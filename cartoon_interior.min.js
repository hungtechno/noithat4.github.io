(function(D){function w(M){if(f[M])return f[M].exports;var U=f[M]={SX:M,pR:!1,exports:{}};D[M].call(U.exports,U,U.exports,w);U.pR=!0;return U.exports}var f={};w.mX=D;w.PW=f;w.d=function(f,U,n){w.Ey(f,U)||Object.defineProperty(f,U,{configurable:!1,enumerable:!0,get:n})};w.XW=function(f){var M=f&&f.NW?function(){return f["default"]}:function(){return f};w.d(M,"a",M);return M};w.Ey=function(f,w){return Object.prototype.hasOwnProperty.call(f,w)};w.iX="";return w(w.rX=84)})([function(D,w,f){var M=f(32),
U={};w.a=function(f,z){function e(){return function(f){f=f||"__b4w_default";if(void 0!==m[f])return m[f];m[f]=n?{}:e();z(f,m[f]);return m[f]}}var m={},n="__"==f.split("").slice(0,2).join("");if(void 0!==U[f])return U[f];var v=n?e():e()();return M.a._n_module[f]=U[f]=v}},function(D,w,f){function M(f,n){function z(a,e){var k=[];-1<a[0].indexOf("%c")?k.push(a[0].replace("%c","%c"+e+": ")):k.push(e+": "+a[0]);for(e=1;e<a.length;e++)k.push(a[e]);return k}function e(){q++;var a=z(arguments,"B4W ERROR");
console.error.apply(console,a)}function m(a){a in y||(y[a]=a,e([a]))}function C(a,e){m(a+"() is deprecated, use "+e+"() instead.")}var v=!1,q=0,r=0,y={};n.QT=function(a){v=a};n.Wd=function(){console.log.apply(console,arguments)};n.log=function(){if(v){var a=z(arguments,"B4W LOG");console.log.apply(console,a)}};n.NE=z;n.error=e;n.Ma=m;n.ef=C;n.pX=function(a,e){switch(1<e.length){case !0:m(a+"() is deprecated, use "+e.slice(0,-1).join("(), ")+"() or "+e[e.length-1]+"() instead.");break;case !1:C(a,
e[0])}};n.$u=function(a,e){void 0===e?m('Config option "'+a+'" is deprecated.'):m('Config option "'+a+'" is deprecated, use "'+e+'" instead.')};n.warn=function(){r++;var a=z(arguments,"B4W WARN");console.warn.apply(console,a)};n.info=function(){var a=z(arguments,"B4W INFO");console.info.apply(console,a)};n.jP=function(){q++;var a=z(arguments,"B4W EXPORT ERROR");console.error.apply(console,a)};n.kP=function(){r++;var a=z(arguments,"B4W EXPORT WARNING");console.warn.apply(console,a)};n.time=function(){v&&
console.time.apply(console,arguments)};n.timeEnd=function(){v&&console.timeEnd.apply(console,arguments)};n.group=function(){console.group.apply(console,arguments)};n.groupCollapsed=function(){console.groupCollapsed.apply(console,arguments)};n.groupEnd=function(){console.groupEnd.apply(console,arguments)};n.clear=function(){"function"==typeof console.clear&&console.clear.apply(console,arguments)};n.FQ=function(){return r};n.iQ=function(){return q};n.clear_errors_warnings=function(){q=r=0}}D=f(0);f=
Object(D.a)("print",M);Object(D.a)("__print",M);w.a=f},function(D,w,f){function M(h){return 0<h?1:0>h?-1:0}function U(h,d,c){var b=h[0],g=h[1];h=h[2];var a=Math.cos(b/2),l=Math.cos(g/2),k=Math.cos(h/2),p=Math.sin(b/2);g=Math.sin(g/2);var t=Math.sin(h/2);if(-1<ra.indexOf(d))var u=Math.cos((b+h)/2),e=Math.sin((b+h)/2),B=Math.cos((b-h)/2),m=Math.sin((b-h)/2),J=Math.cos((h-b)/2),P=Math.sin((h-b)/2);switch(d){case Ea:c[0]=l*e;c[1]=g*B;c[2]=g*m;c[3]=l*u;break;case X:c[0]=g*m;c[1]=l*e;c[2]=g*B;c[3]=l*u;
break;case Ga:c[0]=g*B;c[1]=g*m;c[2]=l*e;c[3]=l*u;break;case Fa:c[0]=l*e;c[1]=g*P;c[2]=g*J;c[3]=l*u;break;case wa:c[0]=g*J;c[1]=l*e;c[2]=g*P;c[3]=l*u;break;case La:c[0]=g*P;c[1]=g*J;c[2]=l*e;c[3]=l*u;break;case ja:c[0]=p*l*k+a*g*t;c[1]=a*g*k-p*l*t;c[2]=a*l*t+p*g*k;c[3]=a*l*k-p*g*t;break;case ta:c[0]=a*l*t+p*g*k;c[1]=p*l*k+a*g*t;c[2]=a*g*k-p*l*t;c[3]=a*l*k-p*g*t;break;case ka:c[0]=a*g*k-p*l*t;c[1]=a*l*t+p*g*k;c[2]=p*l*k+a*g*t;c[3]=a*l*k-p*g*t;break;case qa:c[0]=p*l*k-a*g*t;c[1]=a*l*t-p*g*k;c[2]=a*
g*k+p*l*t;c[3]=a*l*k+p*g*t;break;case S:c[0]=a*g*k+p*l*t;c[1]=p*l*k-a*g*t;c[2]=a*l*t-p*g*k;c[3]=a*l*k+p*g*t;break;case va:c[0]=a*l*t-p*g*k,c[1]=a*g*k+p*l*t,c[2]=p*l*k-a*g*t,c[3]=a*l*k+p*g*t}return c}function n(h,c,d){var b=h[0],g=h[1],a=h[2];h=h[3];switch(c){case Ea:d[0]=Math.atan2(b*g+a*h,g*h-b*a);d[1]=Math.acos(1-2*(g*g+a*a));d[2]=Math.atan2(b*g-a*h,b*a+g*h);break;case X:d[0]=Math.atan2(b*h+g*a,a*h-b*g);d[1]=Math.acos(1-2*(b*b+a*a));d[2]=Math.atan2(g*a-b*h,b*g+a*h);break;case Ga:d[0]=Math.atan2(b*
a+g*h,b*h-g*a);d[1]=Math.acos(1-2*(b*b+g*g));d[2]=Math.atan2(b*a-g*h,b*h+g*a);break;case Fa:d[0]=Math.atan2(b*a-g*h,b*g+a*h);d[1]=Math.acos(1-2*(g*g+a*a));d[2]=Math.atan2(b*a+g*h,a*h-b*g);break;case wa:d[0]=Math.atan2(b*g-a*h,b*h+g*a);d[1]=Math.acos(1-2*(b*b+a*a));d[2]=Math.atan2(b*g+a*h,b*h-g*a);break;case La:d[0]=Math.atan2(g*a-b*h,b*a+g*h);d[1]=Math.acos(1-2*(b*b+g*g));d[2]=Math.atan2(b*h+g*a,g*h-b*a);break;case ja:d[0]=Math.atan2(2*(b*h-g*a),1-2*(b*b+g*g));d[1]=Math.asin(2*(b*a+g*h));d[2]=Math.atan2(2*
(a*h-b*g),1-2*(g*g+a*a));break;case ta:c=b*g+a*h;.499999<c?(d[0]=0,d[1]=Math.PI/2,d[2]=2*Math.atan2(b,h)):-.499999>c?(d[0]=0,d[1]=-Math.PI/2,d[2]=-2*Math.atan2(b,h)):(d[0]=Math.atan2(2*(g*h-b*a),1-2*(g*g+a*a)),d[1]=Math.asin(2*(b*g+a*h)),d[2]=Math.atan2(2*(b*h-g*a),1-2*(b*b+a*a)));break;case ka:d[0]=Math.atan2(2*(a*h-b*g),1-2*(b*b+a*a));d[1]=Math.asin(2*(b*h+g*a));d[2]=Math.atan2(2*(g*h-b*a),1-2*(b*b+g*g));break;case qa:d[0]=Math.atan2(2*(b*h+g*a),1-2*(b*b+a*a));d[1]=Math.asin(2*(a*h-b*g));d[2]=Math.atan2(2*
(b*a+g*h),1-2*(g*g+a*a));break;case S:d[0]=Math.atan2(2*(b*a+g*h),1-2*(b*b+g*g));d[1]=Math.asin(2*(b*h-g*a));d[2]=Math.atan2(2*(b*g+a*h),1-2*(b*b+a*a));break;case va:c=g*h-b*a,.499999<c?(d[0]=0,d[1]=Math.PI/2,d[2]=-2*Math.atan2(a,h)):-.499999>c?(d[0]=0,d[1]=-Math.PI/2,d[2]=2*Math.atan2(a,h)):(d[0]=Math.atan2(2*(b*g+a*h),1-2*(g*g+a*a)),d[1]=Math.asin(2*(g*h-b*a)),d[2]=Math.atan2(2*(b*h+g*a),1-2*(b*b+g*g)))}return d}function z(h,d){var b=Math.cos(h[0]),c=Math.cos(h[1]),g=Math.cos(h[2]),a=Math.sin(h[0]),
l=Math.sin(h[1]);h=Math.sin(h[2]);var k=b*g,p=b*h,t=a*g,u=a*h;d[0]=c*g;d[1]=c*h;d[2]=-l;d[3]=l*t-p;d[4]=l*u+k;d[5]=c*a;d[6]=l*k+u;d[7]=l*p-t;d[8]=c*b;return d}function e(h,d,b){b||(b=new Float32Array(3));K.transformQuat(d,h,b);return b}function m(h){if(!(h instanceof Object))return h;var d=h.constructor;switch(d){case Int8Array:case Uint8Array:case Uint8ClampedArray:case Int16Array:case Uint16Array:case Int32Array:case Uint32Array:case Float32Array:case Float64Array:d=new d(h);break;case Array:d=
new d(h.length);for(var b=0;b<h.length;b++)d[b]=m(h[b]);break;default:for(b in d=new d,h)h.hasOwnProperty(b)&&(d[b]=m(h[b]))}return d}function C(h){var d=h[0],b=h[1],c=h[2],g=h[3],a=Math.sqrt(d*d+b*b+c*c);a=1/a;h[0]=d*a;h[1]=b*a;h[2]=c*a;h[3]=g*a}function v(h,d,b,c){if(c<b)return b;var g=b+Math.floor((c-b)/2);return h[g]>d?v(h,d,b,g-1):h[g]<d?v(h,d,g+1,c):g}function q(h){return(34*h+1)*h%289}function r(h){return h-Math.floor(h)}function y(h){return a((34*h+5)*h)}function a(h){return h-289*Math.floor(h/
289)}function T(h){return h-7*Math.floor(h/7)}function k(h,d,b){h<d&&(h=d);h>b&&(h=b);return h}function c(h,d,b){h-=d;b-=d;return d+(h-Math.floor(h/b)*b)}function l(h){return c(h,0,2*Math.PI)}function b(h,d){if(h&&d){var b=h instanceof Array;if(b!=d instanceof Array)return!1;var c=h.buffer instanceof ArrayBuffer&&"undefined"!==h.byteLength;if(c!=(d.buffer instanceof ArrayBuffer&&"undefined"!==d.byteLength))return!1;if(b){if(h.length!=d.length)return!1;for(b=0;b<h.length;b++)if(!g(h[b],d[b]))return!1}else if(c){if(h.length!=
d.length)return!1;for(b=0;b<h.length;b++)if(h[b]!=d[b])return!1}else{switch(h.constructor){case WebGLUniformLocation:case WebGLProgram:case WebGLShader:case WebGLFramebuffer:case WebGLRenderbuffer:case WebGLTexture:case WebGLBuffer:return h==d}for(var a in h)if(!g(h[a],d[a]))return!1;for(a in d)if(!(a in h))return!1}return!0}return!(h||d)}function g(h,d){if(typeof h!=typeof d)return!1;switch(typeof h){case "number":case "string":case "boolean":return h==d;case "object":return b(h,d);default:return!0}}
function E(h,d,b){var c=ca,g=K.dot(h,d);-.9999999>g?(K.cross(oa,h,c),1E-6>K.length(c)&&K.cross(Y,h,c),K.normalize(c,c),O.setAxisAngle(c,Math.PI,b)):(K.cross(h,d,c),b.set(c),b[3]=1+g,O.normalize(b,b));return b}function ea(h,d,b){var c=Math.sqrt(h[0]*h[0]+h[1]*h[1]);1E-6<c?(d[0]=Math.atan2(h[5],h[8]),d[1]=Math.atan2(-h[2],c),d[2]=Math.atan2(h[1],h[0]),b[0]=Math.atan2(-h[5],-h[8]),b[1]=Math.atan2(-h[2],-c),b[2]=Math.atan2(-h[1],-h[0])):(d[0]=Math.atan2(-h[7],h[4]),d[1]=Math.atan2(-h[2],c),d[2]=0,K.copy(d,
b))}f.d(w,"m",function(){return Aa});f.d(w,"k",function(){return Ja});f.d(w,"n",function(){return N});f.d(w,"d",function(){return oa});f.d(w,"e",function(){return Y});f.d(w,"f",function(){return Q});f.d(w,"a",function(){return Ha});f.d(w,"b",function(){return ia});f.d(w,"c",function(){return Ma});f.d(w,"o",function(){return Ea});f.d(w,"v",function(){return X});f.d(w,"x",function(){return Ga});f.d(w,"q",function(){return Fa});f.d(w,"s",function(){return wa});f.d(w,"z",function(){return La});f.d(w,
"p",function(){return ja});f.d(w,"u",function(){return ta});f.d(w,"w",function(){return ka});f.d(w,"r",function(){return qa});f.d(w,"t",function(){return S});f.d(w,"y",function(){return va});w._15=function(h){return xa.test(Object.prototype.toString.call(h))};f.d(w,"j",function(){return ya});f.d(w,"g",function(){return Va});f.d(w,"l",function(){return Ca});f.d(w,"h",function(){return Wa});f.d(w,"i",function(){return Ra});w._17=function(h){return"undefined"!=typeof h};w._18=function(h,d,b){for(var c=
[],g=b.length,a=0;a<g;a++){var l=b[a];l[h]==d&&c.push(l)}return c};w._1=function(h){return new Float32Array(h)};w._2=function(h,d){var b=h.length,c=new Float32Array(b+d.length);c.set(h);c.set(d,b);return c};w._67=function(h,d){var b=h.length,c=new Uint32Array(b+d.length);c.set(h);c.set(d,b);return c};w.K=function(){return 255==(new DataView((new Uint16Array([255])).buffer)).getUint16(0,!0)};w.D=function(h,d){var b=[],c={},g=d.length,a;for(a=0;a<g;a++)c[d[a]]=!0;g=h.length;for(a=0;a<g;a++)d=h[a],d in
c&&b.push(d);return b};w._50=M;w._19=function(h,d,b){for(var c=0;c<b.length;c++){var g=b[c];if(g[h]===d)return g}return null};w._9=function(h,d,b){for(var c=0;c<h.length;c++)if(h[c][d]==b)return c;return-1};w.C=function(h,d){for(var b=0;b<h.length;b++)if(h[b]==d)return;h.push(d)};w._60=function(h,d,b,c){c||(c=new Float32Array(16));F.identity(c);c[12]=h;c[13]=d;c[14]=b;return c};w._40=function(d){var b=d[0]%h*za-ua*Math.floor(d[0]/h);d[0]=0<b?b:b+Da;return(d[0]-1)/(Da-1)};w._13=function(h,d){d||(d=
[]);d[0]=ma+Math.floor(h);return d};w.Y=function(h,d){var b=ca;b[0]=h[2];b[1]=h[1];b[2]=h[0];U(b,va,d);return d};w._27=U;w._37=n;w.Z=z;w._36=function(h,d){h=n(h,va,ca);d[0]=h[2];d[1]=h[1];d[2]=h[0];return d};w._34=e;w.U=function(h,d,b){b||(b=new Float32Array(4));h=K.normalize(h,ca);var c=K.dot(d,h);h=K.cross(d,h,L);c=Math.acos(c);b[0]=h[0]*Math.sin(c/2);b[1]=h[1]*Math.sin(c/2);b[2]=h[2]*Math.sin(c/2);b[3]=Math.cos(c/2);return b};w._61=function(h,d,b,c){c||(c=new Float32Array(4));K.transformQuat(b,
d,c);c[3]=-K.dot(h,c);return c};w.G=function(h,d,b,c){if(0==b)return h;c=c||[];for(var g=0;g<h.length;g++)c[g]=(1-b)*h[g]+b*d[g];return c};w.O=m;w.N=function(h){var d=h instanceof Array?[]:{},b;for(b in h)if(h.hasOwnProperty(b))if(h[b]instanceof Object){var c=h[b].constructor;switch(c){case Int8Array:case Uint8Array:case Uint8ClampedArray:case Int16Array:case Uint16Array:case Int32Array:case Uint32Array:case Float32Array:case Float64Array:d[b]=new c(h[b]);break;case Array:d[b]=h[b].slice(0);break;
default:d[b]=h[b]}}else d[b]=h[b];return d};w._24=function(h,d){d||(d=new Float32Array(4));u.fromMat4(h,da);var b=da[0],c=da[3],g=da[6],a=da[1],l=da[4],k=da[7];h=da[2];var p=da[5],t=da[8];b=Math.sqrt(b*b+c*c+g*g)||1;a=Math.sqrt(a*a+l*l+k*k)||1;h=Math.sqrt(h*h+p*p+t*t)||1;da[0]/=b;da[3]/=b;da[6]/=b;da[1]/=a;da[4]/=a;da[7]/=a;da[2]/=h;da[5]/=h;da[8]/=h;O.fromMat3(da,d);O.normalize(d,d);return d};w._26=function(h,d){d||(d=new Float32Array(3));d[0]=h[12];d[1]=h[13];d[2]=h[14];return d};w._25=function(h,
d){P[0]=.577350269189626;P[1]=.577350269189626;P[2]=.577350269189626;P[3]=0;A.transformMat4(P,h,P);h=A.length(P);return d?K.set(h,h,h,d):h};w._0=function(h,d){var b=d.left,c=d.right,g=d.top,a=d.bottom,l=d.near,k=d.far;b[0]=h[3]+h[0];b[1]=h[7]+h[4];b[2]=h[11]+h[8];b[3]=h[15]+h[12];c[0]=h[3]-h[0];c[1]=h[7]-h[4];c[2]=h[11]-h[8];c[3]=h[15]-h[12];g[0]=h[3]-h[1];g[1]=h[7]-h[5];g[2]=h[11]-h[9];g[3]=h[15]-h[13];a[0]=h[3]+h[1];a[1]=h[7]+h[5];a[2]=h[11]+h[9];a[3]=h[15]+h[13];l[0]=h[3]+h[2];l[1]=h[7]+h[6];l[2]=
h[11]+h[10];l[3]=h[15]+h[14];k[0]=h[3]-h[2];k[1]=h[7]-h[6];k[2]=h[11]-h[10];k[3]=h[15]-h[14];C(b);C(c);C(g);C(a);C(l);C(k);return d};w._56=function(h,d,b){return b<-R.P(h,d.near)||b<-R.P(h,d.left)||b<-R.P(h,d.right)||b<-R.P(h,d.top)||b<-R.P(h,d.bottom)||b<-R.P(h,d.far)?!0:!1};w.X=function(h,d,b,c,g){var a=K.dot(b,d.far),l=K.dot(c,d.far),k=K.dot(g,d.far);a=Math.sqrt(a*a+l*l+k*k);if(a<-R.P(h,d.near)||a<-R.P(h,d.far))return!0;a=K.dot(b,d.left);l=K.dot(c,d.left);k=K.dot(g,d.left);if(Math.sqrt(a*a+l*l+
k*k)<-R.P(h,d.left))return!0;a=K.dot(b,d.right);l=K.dot(c,d.right);k=K.dot(g,d.right);if(Math.sqrt(a*a+l*l+k*k)<-R.P(h,d.right))return!0;a=K.dot(b,d.top);l=K.dot(c,d.top);k=K.dot(g,d.top);if(Math.sqrt(a*a+l*l+k*k)<-R.P(h,d.top))return!0;a=K.dot(b,d.bottom);l=K.dot(c,d.bottom);k=K.dot(g,d.bottom);return Math.sqrt(a*a+l*l+k*k)<-R.P(h,d.bottom)?!0:!1};w._28=function(h,d,b,c){c||(c=0);for(var g=h.length,a=0;a<g;a+=3){var l=h[a],k=h[a+1],p=h[a+2];b[c+a]=d[0]*l+d[4]*k+d[8]*p+d[12];b[c+a+1]=d[1]*l+d[5]*
k+d[9]*p+d[13];b[c+a+2]=d[2]*l+d[6]*k+d[10]*p+d[14]}return b};w._38=function(h,d,b,c){c=c||0;for(var g=h.length,a=na,l=0;l<g;l+=4){a[0]=h[l];a[1]=h[l+1];a[2]=h[l+2];a[3]=h[l+3];var k=0<a[3];O.multiply(d,a,a);(k&&0>a[3]||!k&&0<a[3])&&A.scale(a,-1,a);b[c+l]=a[0];b[c+l+1]=a[1];b[c+l+2]=a[2];b[c+l+3]=a[3]}return b};w._68=function(h,d,b){b||(b=new Float32Array(3));var c=P;c[0]=h[0];c[1]=h[1];c[2]=h[2];c[3]=0;A.transformMat4(c,d,c);b[0]=c[0];b[1]=c[1];b[2]=c[2]};w._69=function(h,d){d||(d=[]);for(var b=
0;b<h.length;b+=3)d[b/3]=new Float32Array([h[b],h[b+1],h[b+2]]);return d};w.F=v;w.P=function(h,d){for(var b=0;b<h.length;b++)if(h[b]!=d[b])return!1;return!0};w._63=function(h,b,c,g,a){a||(a=new Float32Array(3));c=F.fromRotationTranslation(c,g,d);1!==b&&(g=F.identity(la),b=K.set(b,b,b,ca),F.scale(g,b,g),F.multiply(c,g,c));K.transformMat4(h,c,a);return a};w._46=function(h,d,b,c){c||(c=new Float32Array(3));var g=ca;K.subtract(d,h,g);K.transformQuat(g,b,g);K.subtract(d,g,c)};w._5=function(){var h=ca;
h[0]=0;h[1]=0;h[2]=0;var d=new Float32Array(16),b=new Float32Array(16),c=new Float32Array(16),g=new Float32Array(16),a=new Float32Array(16),l=new Float32Array(16);F.lookAt(h,[-1,0,0],[0,-1,0],d);F.scale(d,[-1,1,1],d);F.scale(d,[-1,1,-1],b);F.lookAt(h,[0,-1,0],[0,0,-1],c);F.scale(c,[1,1,-1],c);F.scale(c,[1,-1,-1],g);F.lookAt(h,[0,0,-1],[0,-1,0],a);F.scale(a,[-1,1,1],a);F.scale(a,[-1,1,-1],l);return[d,b,c,g,a,l]};w._6=function(){var h=ca;h[0]=0;h[1]=0;h[2]=0;var d=new Float32Array(16),b=new Float32Array(16),
c=new Float32Array(16),g=new Float32Array(16),a=new Float32Array(16),l=new Float32Array(16);F.lookAt(h,[1,0,0],[0,-1,0],d);F.scale(d,[-1,1,-1],b);F.lookAt(h,[0,1,0],[0,0,1],c);F.scale(c,[1,-1,-1],g);F.lookAt(h,[0,0,1],[0,-1,0],a);F.scale(a,[-1,1,-1],l);return[d,b,c,g,a,l]};w._11=function(h,d){for(var b=0;b<h.length;b++)d=(d<<5)-d+h.charCodeAt(b),d&=d;return d};w._23=function(h,d){d[15]=1;d[14]=0;d[13]=0;d[12]=0;d[11]=0;d[10]=h[8];d[9]=h[7];d[8]=h[6];d[7]=0;d[6]=h[5];d[5]=h[4];d[4]=h[3];d[3]=0;d[2]=
h[2];d[1]=h[1];d[0]=h[0];return d};w._33=function(h,d){d||(d=h);var b=h[0]*h[0]+h[1]*h[1]+h[2]*h[2];0<b?(d[3]=2*Math.acos(h[3]),b=1/Math.sqrt(b),d[0]=h[0]*b,d[1]=h[1]*b,d[2]=h[2]*b):(d[3]=0,d[0]=1,d[1]=0,d[2]=0);return d};w._64=function(h){return isNaN(h)||"undefined"==typeof h?NaN:h|0};w.T=function(h){return h*Math.PI/180};w._39=function(h){return 180*h/Math.PI};w._55=function(h){var d=.366025403784439*h[0]+.366025403784439*h[1],b=Math.floor(h[0]+d),c=Math.floor(h[1]+d),g=.211324865405187*b+.211324865405187*
c;d=h[0]-b+g;h=h[1]-c+g;var a=d>h?1:0,l=1-a;g=d+.211324865405187-a;var k=h+.211324865405187-l,p=d+-.577350269189626,t=h+-.577350269189626;b%=289;c%=289;var u=Math.max(.5-(d*d+h*h),0),e=Math.max(.5-(g*g+k*k),0),B=Math.max(.5-(p*p+t*t),0),m=2*r(.024390243902439*q(q(c)+b))-1;a=2*r(.024390243902439*q(q(c+l)+b+a))-1;var J=2*r(.024390243902439*q(q(c+1)+b+1))-1;b=Math.abs(m)-.5;c=Math.abs(a)-.5;l=Math.abs(J)-.5;m-=Math.floor(m+.5);a-=Math.floor(a+.5);J-=Math.floor(J+.5);return 130*(u*u*u*u*(1.79284291400159-
.85373472095314*(m*m+b*b))*(m*d+b*h)+e*e*e*e*(1.79284291400159-.85373472095314*(a*a+c*c))*(a*g+c*k)+B*B*B*B*(1.79284291400159-.85373472095314*(J*J+l*l))*(J*p+l*t))};w.J=function(h){var d=1/7,b=d/2,c=a(Math.floor(h[0])),g=a(Math.floor(h[1])),l=r(h[0]);h=r(h[1]);var k=l-.5,p=l-1.5;l=h-.5;h-=1.5;var t=y(c),u=y(c+1),e=t;c=u;t=y(t+g);u=y(u+g);e=y(e+g+1);c=y(c+g+1);g=k+.7*(T(t)*d+b);var B=p+.7*(T(u)*d+b);k+=.7*(T(e)*d+b);p+=.7*(T(c)*d+b);t=l+.7*(T(Math.floor(t*d))*d+b);l+=.7*(T(Math.floor(u*d))*d+b);e=
h+.7*(T(Math.floor(e*d))*d+b);d=h+.7*(T(Math.floor(c*d))*d+b);return Math.min(g*g+t*t,B*B+l*l,k*k+e*e,p*p+d*d)};w._30=function(h,d,b,c,g){g||(g=new Float32Array(4));h=K.transformQuat(d,h,ca);d=b[0];var a=b[1];b=b[2];var l=da;l[0]=a*a+b*b;l[1]=-a*d;l[2]=-b*d;l[3]=-d*a;l[4]=d*d+b*b;l[5]=-b*a;l[6]=-d*b;l[7]=-a*b;l[8]=d*d+a*a;K.transformMat3(h,l,h);K.normalize(h,h);O.rotationTo(c,h,g);return g};w.I=function(h,d){d||(d=new Float32Array(4));var b=O.setAxisAngle([0,0,1],Math.PI,O.create());var c=O.setAxisAngle([1,
0,0],Math.PI/2,O.create());O.multiply(b,c,b);O.multiply(h,b,d);return d};w.M=k;w._51=function(h,d,b,c){return c?(b=Math.exp(-b/c),(1-b)*h+b*d):h};w._54=function(h,d,b,c,g){g||(g=new Float32Array(h.length));if(c)for(b=Math.exp(-b/c),c=0;c<g.length;c++)g[c]=(1-b)*h[c]+b*d[c];else K.copy(h,g);return g};w._52=function(h,d,b,c,g){g||(g=new Float32Array(h.length));c?O.slerp(h,d,Math.exp(-b/c),g):O.copy(h,g);return g};w._14=function(h){return"object"===typeof h&&h.buffer&&h.buffer instanceof ArrayBuffer?
!0:!1};w._16=function(h,d){if(h instanceof Array||h.buffer&&h.buffer instanceof ArrayBuffer)if(d&&d==h.length||!d)return!0;return!1};w.R=function(h,d){var b=u.fromQuat(h,da),c=ca;c[0]=b[6];c[1]=b[7];c[2]=b[8];c=K.cross(Q,c,c);K.normalize(c,c);var g=b[4];!d&&0<g&&(c[0]*=-1,c[1]*=-1,c[2]*=-1);d=L;d[0]=b[0];d[1]=b[1];d[2]=b[2];K.normalize(d,d);b=p;O.rotationTo(d,c,b);O.multiply(b,h,h)};w._7=function(h,d,b,c){b=b*d-.5;c=c*d-.5;var g=b-Math.floor(b),a=c-Math.floor(c);b=Math.floor(b);c=Math.floor(c);var l=
d-1;return(h[c*d+b]*(1-g)+h[c*d+Math.min(b+1,l)]*g)*(1-a)+(h[Math.min(c+1,l)*d+b]*(1-g)+h[Math.min(c+1,l)*d+Math.min(b+1,l)]*g)*a};w._43=function(h){for(var d=0,b=0;3>b;b++)0<(h&1<<b)&&d++;return d};w._44=function(h){for(var d=[0,0,0],b=0;3>b;b++)0<(h&1<<b)&&(d[2-b]=1);return d};w._42=function(h,d){var b=0;(1==d||2==d)&&0<(h&4)&&b++;2==d&&0<(h&2)&&b++;return b};w._4=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(h){var d=16*Math.random()|0;return("x"==h?d:d&3|8).toString(16)})};
w._8=function(h){var d=0,b;for(b in h)h.hasOwnProperty(b)&&d++;return d};w._41=function(h){return h.length?h[Math.floor(Math.random()*h.length)]:null};w._12=function(h,d,b){b||(b=new Float32Array(3));b[0]=h[0]-d[0];b[1]=h[1]-d[1];b[2]=0;K.normalize(b,b)};w._62=function(h,d,b){var c=h[0],g=h[1];h=h[2];var a=d[0],l=d[1],k=d[2];d=d[3];var p=l*h-k*g,t=k*c-a*h,u=a*g-l*c;b[0]=c+2*p*d+2*(l*u-k*t);b[1]=g+2*t*d+2*(k*p-a*u);b[2]=h+2*u*d+2*(a*t-l*p);return b};w.B=c;w.A=l;w._59=function(h,d){for(var c in h){var g=
!0,a=h[c],l=d[c];switch(typeof a){case "number":case "string":case "boolean":g=a==l;break;case "object":g=b(a,l)}if(!g)return!1}return!0};w._29=function(h,d){var b=h[0],c=h[2],g=h[3];d[0]=h[1];d[1]=c;d[2]=g;d[3]=b;return d};w._22=function(h,d,b,c){var g=P;g.set(h);g[3]=d;h=p;ca[0]=b[3];ca[1]=b[4];ca[2]=b[5];h.set(ca);h[3]=0;h=A.dot(g,h);if(0==h)return null;d=p;K.copy(b,ca);d.set(ca);d[3]=1;g=-A.dot(g,d)/h;c[0]=b[0]+g*b[3];c[1]=b[1]+g*b[4];c[2]=b[2]+g*b[5];return c};w._10=function(h,d,b,c){var g=d[0]-
h[0],a=b[0]-h[0],l=d[1]-h[1],k=b[1]-h[1];d=d[2]-h[2];h=b[2]-h[2];c[0]=l*h-d*k;c[1]=a*d-g*h;c[2]=g*k-l*a;return c};w._48=E;w.H=function(h,d,b){if(d==b)return b-h;h=l(h);d=l(d);b=l(b);d=2*Math.PI-d;b=l(b+d);h=l(h+d);return h>b?(b-=h,h=2*Math.PI-h,-b>h?h:b):0};w._53=function(h,d,b){isFinite(d)&&isFinite(b)&&(h=k(h,d,b));return h*h*(3-2*h)};w._20=function(h,d,b){return d+h*(b-d)};w.E=function(h,d){for(var b=0;b<h.length;b++)for(var c=0;c<d.length;c++)if(d[c]==h[b])return!0;return!1};w._70=function(h,
d){for(var b=Math.max(h.length,d.length),c=0;c<b;c++){var g=M((c>=h.length?0:h[c])-(c>=d.length?0:d[c]));if(g)return g}return 0};w._71=function(h){return h.join(".")};w._58=function(h){return h.split(".").map(function(h){return h|0})};w._57=function(h,d){d[0]=Math.pow(h[0],Ta);d[1]=Math.pow(h[1],Ta);d[2]=Math.pow(h[2],Ta);return d};w._21=function(h,d){d[0]=Math.pow(h[0],1/Ta);d[1]=Math.pow(h[1],1/Ta);d[2]=Math.pow(h[2],1/Ta);return d};w.L=function(h){return 0!=parseInt(h.toString(2).substr(1),2)};
w.W=function(h,d,b,c){c[0]=h[0];c[1]=d[0];c[2]=b[0];c[3]=h[1];c[4]=d[1];c[5]=b[1];c[6]=h[2];c[7]=d[2];c[8]=b[2];return c};w.S=function(){var h=[{}];h.length=0;return h};w._3=function(h){h=Math.round(32767.5*(h+1)-32768);return k(h?h:0,-32768,32767)};w._49=function(h){return k((h+32768)/32767.5-1,-1,1)};w._66=function(h){return k(Math.round(255*h),0,255)};w._65=function(h){return k(h/255,0,1)};w.V=function(h,d,b,c){var g=K.subtract(b,d,ca),a=K.subtract(c,b,L),l=K.subtract(d,c,ha);d=K.subtract(h,d,
J);b=K.subtract(h,b,W);h=K.subtract(h,c,B);c=K.cross(g,a,ba);if(0<=K.dot(K.cross(c,g,I),d)&&0<=K.dot(K.cross(c,a,I),b)&&0<=K.dot(K.cross(c,l,I),h))return l=K.length(c),a=K.dot(c,d),Math.abs(a/l);g=K.scale(g,k(K.dot(g,d)/K.length(g),0,1),I);d=K.length(K.subtract(d,g,I));a=K.scale(a,k(K.dot(a,b)/K.length(a),0,1),I);a=K.length(K.subtract(b,a,I));l=K.scale(l,k(K.dot(l,h)/K.length(l),0,1),I);l=K.length(K.subtract(h,l,I));return Math.min(Math.min(d,a),l)};w._47=function(h,d,b,c,g){if(b||c){var a=O.identity(na);
b&&(d=O.setAxisAngle(d,b,pa),O.multiply(a,d,a));h=O.copy(h,g);c&&(g=e(h,oa,ca),c=O.setAxisAngle(g,c,pa),O.normalize(c,c),O.multiply(a,c,a));O.multiply(a,h,h);O.normalize(h,h)}};w._31=function(h,d,b,c){var g=L;e(d,c,g);K.normalize(g,g);c=ha;K.subtract(b,h,c);K.normalize(c,c);h=E(g,c,P);O.multiply(h,d,d);O.normalize(d,d)};w._32=function(h,d,b,c){d=K.transformQuat(d,h,L);var g=K.dot(c,b);c=K.scale(c,g,ha);b=K.subtract(b,c,ha);c=O.identity(na);K.normalize(b,b);.999999>Math.abs(K.dot(d,b))&&E(d,b,c);O.normalize(c,
c);O.multiply(c,h,h)};w.Q=function(h,d){for(var b=2*Math.PI,c=[],g=0;3>g;g++)c[g]=h[g]-d[g],5.1<c[g]?(h[g]-=c[g]/b*b,c[g]=h[g]-d[g]):-5.1>c[g]&&(h[g]+=-c[g]/b*b,c[g]=h[g]-d[g]);3.2<Math.abs(c[0])&&1.6>Math.abs(c[1])&&1.6>Math.abs(c[2])&&(h[0]=0<c[0]?h[0]-b:h[0]+b);3.2<Math.abs(c[1])&&1.6>Math.abs(c[2])&&1.6>Math.abs(c[0])&&(h[1]=0<c[1]?h[1]-b:h[1]+b);3.2<Math.abs(c[2])&&1.6>Math.abs(c[0])&&1.6>Math.abs(c[1])&&(h[2]=0<c[2]?h[2]-b:h[2]+b)};w._45=function(h,d,b){d=z(d,da);h=z(h,H);h=u.multiply(h,d,t);
d=ca;var c=L;ea(h,d,c);K.copy(Math.abs(d[0])+Math.abs(d[1])+Math.abs(d[2])>Math.abs(c[0])+Math.abs(c[1])+Math.abs(c[2])?c:d,b);return b};w._35=function(h,d,b){h=u.fromQuat(h,da);var c=ca,g=L;ea(h,c,g);K.copy(Math.abs(c[0]-d[0])+Math.abs(c[1]-d[1])+Math.abs(c[2]-d[2])>Math.abs(g[0]-d[0])+Math.abs(g[1]-d[1])+Math.abs(g[2]-d[2])?g:c,b);return b};var u=f(27),F=f(21),R=f(42),O=f(8);D=f(6);var K=f(3),A=f(7),ca=new Float32Array(3),L=new Float32Array(3),ha=new Float32Array(3),J=new Float32Array(3),W=new Float32Array(3),
B=new Float32Array(3),ba=new Float32Array(3),I=new Float32Array(3),P=new Float32Array(4),p=new Float32Array(4),da=new Float32Array(9),H=new Float32Array(9),t=new Float32Array(9),d=new Float32Array(16),la=new Float32Array(16),na=O.create(),pa=O.create(),Aa=new Float32Array([0,0,0]),Ja=new Float32Array([0,0,0,1]);D.b();D.b();var N=new Float32Array([1,1,1]),oa=new Float32Array([1,0,0]),Y=new Float32Array([0,1,0]),Q=new Float32Array([0,0,1]),Ha=new Float32Array([-1,0,0]),ia=new Float32Array([0,-1,0]),
Ma=new Float32Array([0,0,-1]),Ea=0,X=1,Ga=2,Fa=3,wa=4,La=5,ja=6,ta=7,ka=8,qa=9,S=10,va=11,xa=/object .*Array/,ra=[Ea,X,Ga,wa,La],ma=5E4,za=48271,Da=2147483647,ua=Da%za,h=Math.floor(Da/za),ya=[new Float32Array([0,0,-1,0,0,-1,0,0,-1,0,0,0,0,0,0,1]),new Float32Array([0,0,1,0,0,-1,0,0,1,0,0,0,0,0,0,1]),new Float32Array([1,0,0,0,0,0,-1,0,0,1,0,0,0,0,0,1]),new Float32Array([1,0,0,0,0,0,1,0,0,-1,0,0,0,0,0,1]),new Float32Array([1,0,0,0,0,-1,0,0,0,0,-1,0,0,0,0,1]),new Float32Array([-1,0,0,0,0,-1,0,0,0,0,1,
0,0,0,0,1])],Ta=2.2,Va=1,Ca=2,Wa=4,Ra=4},function(D,w,f){function M(){var c=new a(3);c[0]=0;c[1]=0;c[2]=0;return c}function U(c,l,b){var g=new a(3);g[0]=c;g[1]=l;g[2]=b;return g}function n(c,a,b){b[0]=c[0]-a[0];b[1]=c[1]-a[1];b[2]=c[2]-a[2];return b}function z(c,a,b){b[0]=c[0]*a[0];b[1]=c[1]*a[1];b[2]=c[2]*a[2];return b}function e(c,a,b){b[0]=c[0]/a[0];b[1]=c[1]/a[1];b[2]=c[2]/a[2];return b}function m(c,a){var b=a[0]-c[0],g=a[1]-c[1];c=a[2]-c[2];return Math.sqrt(b*b+g*g+c*c)}function C(c,a){var b=
a[0]-c[0],g=a[1]-c[1];c=a[2]-c[2];return b*b+g*g+c*c}function v(c){var a=c[0],b=c[1];c=c[2];return Math.sqrt(a*a+b*b+c*c)}function q(c){var a=c[0],b=c[1];c=c[2];return a*a+b*b+c*c}function r(c,a){var b=c[0],g=c[1],l=c[2];b=b*b+g*g+l*l;0<b&&(b=1/Math.sqrt(b),a[0]=c[0]*b,a[1]=c[1]*b,a[2]=c[2]*b);return a}function y(c,a){return c[0]*a[0]+c[1]*a[1]+c[2]*a[2]}Object.defineProperty(w,"__esModule",{value:!0});w.create=M;w.clone=function(c){var l=new a(3);l[0]=c[0];l[1]=c[1];l[2]=c[2];return l};w.fromValues=
U;w.copy=function(c,a){a[0]=c[0];a[1]=c[1];a[2]=c[2];return a};w.set=function(c,a,b,g){g[0]=c;g[1]=a;g[2]=b;return g};w.add=function(c,a,b){b[0]=c[0]+a[0];b[1]=c[1]+a[1];b[2]=c[2]+a[2];return b};w.subtract=n;f.d(w,"sub",function(){return n});w.multiply=z;f.d(w,"mul",function(){return z});w.divide=e;f.d(w,"div",function(){return e});w.min=function(c,a,b){b[0]=Math.min(c[0],a[0]);b[1]=Math.min(c[1],a[1]);b[2]=Math.min(c[2],a[2]);return b};w.max=function(c,a,b){b[0]=Math.max(c[0],a[0]);b[1]=Math.max(c[1],
a[1]);b[2]=Math.max(c[2],a[2]);return b};w.scale=function(c,a,b){b[0]=c[0]*a;b[1]=c[1]*a;b[2]=c[2]*a;return b};w.scaleAndAdd=function(c,a,b,g){g[0]=c[0]+a[0]*b;g[1]=c[1]+a[1]*b;g[2]=c[2]+a[2]*b;return g};w.distance=m;f.d(w,"dist",function(){return m});w.squaredDistance=C;f.d(w,"sqrDist",function(){return C});w.length=v;f.d(w,"len",function(){return v});w.squaredLength=q;f.d(w,"sqrLen",function(){return q});w.negate=function(c,a){a[0]=-c[0];a[1]=-c[1];a[2]=-c[2];return a};w.inverse=function(c,a){a[0]=
1/c[0];a[1]=1/c[1];a[2]=1/c[2];return a};w.normalize=r;w.dot=y;w.cross=function(c,a,b){var g=c[0],k=c[1];c=c[2];var l=a[0],u=a[1];a=a[2];b[0]=k*a-c*u;b[1]=c*l-g*a;b[2]=g*u-k*l;return b};w.lerp=function(c,a,b,g){var k=c[0],l=c[1];c=c[2];g[0]=k+b*(a[0]-k);g[1]=l+b*(a[1]-l);g[2]=c+b*(a[2]-c);return g};w.hermite=function(c,a,b,g,k,e){var l=k*k,m=l*(2*k-3)+1,f=l*(k-2)+k,T=l*(k-1);k=l*(3-2*k);e[0]=c[0]*m+a[0]*f+b[0]*T+g[0]*k;e[1]=c[1]*m+a[1]*f+b[1]*T+g[1]*k;e[2]=c[2]*m+a[2]*f+b[2]*T+g[2]*k;return e};w.bezier=
function(c,a,b,g,k,e){var l=1-k,m=l*l,f=k*k,T=m*l;m*=3*k;l*=3*f;k*=f;e[0]=c[0]*T+a[0]*m+b[0]*l+g[0]*k;e[1]=c[1]*T+a[1]*m+b[1]*l+g[1]*k;e[2]=c[2]*T+a[2]*m+b[2]*l+g[2]*k;return e};w.random=function(c,a){var b=2*T()*Math.PI,g=2*T()-1,k=Math.sqrt(1-g*g)*c;a[0]=Math.cos(b)*k;a[1]=Math.sin(b)*k;a[2]=g*c;return a};w.transformMat4=function(c,a,b){var g=c[0],k=c[1];c=c[2];var l=a[3]*g+a[7]*k+a[11]*c+a[15];l=l||1;b[0]=(a[0]*g+a[4]*k+a[8]*c+a[12])/l;b[1]=(a[1]*g+a[5]*k+a[9]*c+a[13])/l;b[2]=(a[2]*g+a[6]*k+a[10]*
c+a[14])/l;return b};w.transformMat3=function(c,a,b){var g=c[0],k=c[1];c=c[2];b[0]=g*a[0]+k*a[3]+c*a[6];b[1]=g*a[1]+k*a[4]+c*a[7];b[2]=g*a[2]+k*a[5]+c*a[8];return b};w.transformQuat=function(c,a,b){var g=c[0],k=c[1],l=c[2];c=a[0];var u=a[1],e=a[2];a=a[3];var m=a*g+u*l-e*k,f=a*k+e*g-c*l,T=a*l+c*k-u*g;g=-c*g-u*k-e*l;b[0]=m*a+g*-c+f*-e-T*-u;b[1]=f*a+g*-u+T*-c-m*-e;b[2]=T*a+g*-e+m*-u-f*-c;return b};w.rotateX=function(c,a,b,g){var k=[],l=[];k[0]=c[0]-a[0];k[1]=c[1]-a[1];k[2]=c[2]-a[2];l[0]=k[0];l[1]=k[1]*
Math.cos(b)-k[2]*Math.sin(b);l[2]=k[1]*Math.sin(b)+k[2]*Math.cos(b);g[0]=l[0]+a[0];g[1]=l[1]+a[1];g[2]=l[2]+a[2];return g};w.rotateY=function(c,a,b,g){var k=[],l=[];k[0]=c[0]-a[0];k[1]=c[1]-a[1];k[2]=c[2]-a[2];l[0]=k[2]*Math.sin(b)+k[0]*Math.cos(b);l[1]=k[1];l[2]=k[2]*Math.cos(b)-k[0]*Math.sin(b);g[0]=l[0]+a[0];g[1]=l[1]+a[1];g[2]=l[2]+a[2];return g};w.rotateZ=function(c,a,b,g){var k=[],l=[];k[0]=c[0]-a[0];k[1]=c[1]-a[1];k[2]=c[2]-a[2];l[0]=k[0]*Math.cos(b)-k[1]*Math.sin(b);l[1]=k[0]*Math.sin(b)+
k[1]*Math.cos(b);l[2]=k[2];g[0]=l[0]+a[0];g[1]=l[1]+a[1];g[2]=l[2]+a[2];return g};f.d(w,"forEach",function(){return k});w.angle=function(c,a){c=U(c[0],c[1],c[2]);a=U(a[0],a[1],a[2]);r(c,c);r(a,a);a=y(c,a);return 1<a?0:Math.acos(a)};w.str=function(c){return"vec3("+c[0]+", "+c[1]+", "+c[2]+")"};var a="undefined"!==typeof Float32Array?Float32Array:Array,T=Math.random,k=function(){var c=M();return function(a,b,g,k,e,u){var l;b||(b=3);g||(g=0);for(k?l=Math.min(k*b+g,a.length):l=a.length;g<l;g+=b)c[0]=
a[g],c[1]=a[g+1],c[2]=a[g+2],e(c,u,c),a[g]=c[0],a[g+1]=c[1],a[g+2]=c[2];return a}}()},function(D,w,f){D=f(0);var M=f(32),U=f(5),n=f(1),z=f(2);f=Object(D.a)("__config",function(e,m){function f(){return M.a.module_check(m.Nf.nu)}function v(){for(var e=m.Nf,a=null,f=!1,k=document.getElementsByTagName("script"),c=0;c<k.length;c++){for(var l=k[c].src,b=0;b<e.DG.length;b++)if(0<=l.indexOf(e.DG[b])&&(a=l,k[c].attributes["b4w-offset"])){a=a.substring(0,a.lastIndexOf("/"))+"/"+k[c].attributes["b4w-offset"].value;
f=!0;break}if(f)break}a||(r.warn("Couldn't determine path to ancillary resources, fallback to the current page directory"),a=document.location.href);e=a.indexOf("?");0<=e&&(a=a.substring(0,e));return a.substring(0,a.lastIndexOf("/"))}var q=Object(U.a)(e),r=Object(n.a)(e);m.P_LOW=1;m.P_HIGH=2;m.P_ULTRA=3;m.P_CUSTOM=4;m.P_AUTO=5;m.context={alpha:!0,antialias:!1,premultipliedAlpha:!0};m.TE=z.O(m.context);m.wa={alpha_sort:!0,alpha_sort_threshold:.1,nn:[6,3],max_fps:1E4,console_verbose:!1,do_not_load_resources:!1,
use_min50:!1,enable_texture_cache:!0,DF:1,BP:5,background_color:[0,0,0,0],canvas_resolution_factor:1,Gk:3,allow_cors:!1,CF:!1,bz:!0,anisotropic_filtering:!0,Vx:!1,RI:!1,BU:!1,AU:!1,CU:!1,qE:!1,cN:!1,show_hud_debug_info:!1,Ku:!0,shadows:!0,stereo:"NONE",reflections:!0,refractions:!0,ssao:!0,dof:!0,god_rays:!0,bloom:!0,motion_blur:!0,compositing:!0,antialiasing:!0,smaa:!1,debug_view:!1,GJ:!1,Ho:!0,Ow:!0,ld:!0,water_dynamic:!0,shore_smoothing:!0,Cp:!0,mJ:!0,precision:"highp",quality:m.P_HIGH,Wt:!0,lod_leap_smooth_threshold:3,
assets_gzip_available:!1,hS:!1,YB:!1,Lz:!1,xJ:!1,is_mobile_device:!1,BA:!1,pz:!1,LY:!1,Rs:!1,allow_hidpi:!1,tI:!1,aB:!1,pG:!1,enable_selectable:!0,enable_outlining:!0,lod_smooth_transitions:!0,glow_materials:!0,Qv:!1,AF:!1,QA:[0,0],FH:!0,px:!1,url_params:null,Ib:!0,Jc:4,er:!1,RH:!1,gT:!1,Is:!1,PH:!1,zE:!1,lG:!1,kG:!1,media_auto_activation:!0,$G:4,ow:!1,gl_debug:!1,sE:!1,OD:!1,Zy:!1,Fm:"dds",shadow_blur_samples:"",reflection_quality:"",srgb_type:"SRGB_SIMPLE",Tv:!1,Ks:!1,debug_loading:!1,YG:!1,XG:!1,
yE:!1,zp:!0};m.lF=z.O(m.wa);m.Xk={jv:-1,EF:!1,Tm:1};m.controls={bS:1/120};m.se={path:"",wS:"B4W_ASSETS_PATH=assets/",MS:"B4W_PROJ_ASSETS_PATH=assets/",VR:15,prevent_caching:!0,$A:!1,Iz:!1,Vw:!1};m.TD=z.O(m.se);m.Nf={shaders_path:"",YT:"../shaders/",rI:"include/",KY:"postprocessing/",nu:"built_in_data",DG:"b4w.js b4w.min.js b4w.simple.min.js b4w.whitespace.min.js b4w_app_bundle.js cartoon_interior.min.js".split(" "),smaa_search_texture_path:"smaa_search_texture.png",
smaa_area_texture_path:"smaa_area_texture.png"};m.iG={webvr:{distortion_coefs:[.22,.28],chromatic_aberration_coefs:[-.015,.02,.025,.02]},nonwebvr:{sF:.8,ki:.064,Ki:.035,Ns:.039,distortion_coefs:[.34,.55],chromatic_aberration_coefs:[0,0,0,0],mm:.11,aj:.062,Li:.004}};m.xa={enabled:!0,max_fps:60,pt:"",iy:"",jy:"B4W_URANIUM_PATH=uranium/",SD:"uranium.js",FJ:"uranium_wasm.js",cH:"uranium.js.mem",EJ:"uranium_wasm.wasm",lJ:"/dist/uranium",kz:!1,ping:!1,On:!0,ut:!0};m.wH=z.O(m.xa);m.Pl={No:1024,Du:256,eF:32,
PO:128,NO:256,yH:.25,ES:.5,DS:1};m.VH=z.O(m.Pl);m.Ra={SC:!0,vw:!1,XD:!1,CE:!1,pF:!1};m.pI=z.O(m.Ra);m.Ed={outlining_overview_mode:!1,ti:[1,.4,.05],Gl:.2,Hl:3.8,Il:1};m.Lm={enabled:!1,dt:3,yU:1,aU:"COLOR"};m.jF=z.O(m.Lm);m.ei={UR:8,TA:64,XA:8,rw:8,YA:15,bH:0,sw:128,Xg:1024,UA:4096,Ic:4096,ZA:[4096,4096],yo:24};m.SE=z.O(m.ei);m.apply_quality=function(){var e=m.wa,a=m.xa,f=m.Pl;switch(e.quality){case m.P_ULTRA:e.shadows=!0;e.shore_smoothing=!0;e.ssao=!0;e.dof=!0;e.god_rays=!0;e.bloom=!0;e.reflections=
!0;e.refractions=!0;e.Ho=!0;e.Ow=!0;e.ld=!0;f.No=2048;f.Du=512;e.Gk=3;e.anisotropic_filtering=!0;e.use_min50=!1;e.water_dynamic=!0;e.Cp=!0;e.antialiasing=!0;e.smaa=!1;e.compositing=!0;e.motion_blur=!0;e.allow_hidpi=!0;e.enable_outlining=!0;e.glow_materials=!0;e.Jc=16;e.srgb_type="SRGB_PROPER";a.max_fps=120;e.lod_smooth_transitions=!0;break;case m.P_HIGH:e.shadows=!0;e.shore_smoothing=!0;e.ssao=!0;e.dof=!0;e.god_rays=!0;e.bloom=!0;e.reflections=!0;e.refractions=!0;e.Ho=!0;e.Ow=!0;e.ld=!0;f.No=1024;
f.Du=256;e.Gk=3;e.anisotropic_filtering=!0;e.use_min50=!1;e.water_dynamic=!0;e.Cp=!0;e.antialiasing=!0;e.smaa=!1;e.compositing=!0;e.motion_blur=!0;e.allow_hidpi=!1;e.enable_outlining=!0;e.glow_materials=!0;e.srgb_type="SRGB_SIMPLE";e.Jc=4;a.max_fps=60;e.lod_smooth_transitions=!0;break;case m.P_LOW:e.shadows=!1;e.shore_smoothing=!1;e.ssao=!1;e.dof=!1;e.god_rays=!1;e.bloom=!1;e.reflections=!1;e.refractions=!1;e.Ho=!1;e.Ow=!1;e.ld=!1;f.No=512;f.Du=256;e.Gk=2;e.anisotropic_filtering=!1;e.use_min50=!0;
e.water_dynamic=!1;e.Cp=!1;e.antialiasing=!1;e.smaa=!1;e.compositing=!1;e.motion_blur=!1;e.allow_hidpi=!1;e.enable_outlining=!1;e.glow_materials=!1;e.srgb_type="SRGB_SIMPLE";e.Jc=1;a.max_fps=60;e.lod_smooth_transitions=!1;break;case m.P_AUTO:q.va("Direct AUTO quality profile setting is forbidden")}};m.set=function(e,a){switch(e){case "allow_cors":m.wa.allow_cors=a;break;case "allow_hidpi":m.wa.allow_hidpi=a;break;case "alpha":m.context.alpha=a;break;case "alpha_sort":m.wa.alpha_sort=a;break;case "alpha_sort_threshold":m.wa.alpha_sort_threshold=
a;break;case "anaglyph_use":r.$u("anaglyph_use","stereo");m.wa.stereo=a?"ANAGLYPH":m.wa.stereo;break;case "animation_framerate":m.Xk.jv=a;break;case "anisotropic_filtering":m.wa.anisotropic_filtering=a;break;case "antialiasing":m.wa.antialiasing=a;break;case "assets_dir":case "assets_path":m.se.path=a;break;case "assets_dds_available":m.se.Iz=a;break;case "assets_pvr_available":m.se.Vw=a;break;case "assets_min50_available":m.se.$A=a;break;case "audio":m.Ra.SC=a;break;case "background_color":m.wa.background_color=
a;break;case "bloom":m.wa.bloom=a;break;case "built_in_module_name":m.Nf.nu=a;break;case "canvas_resolution_factor":m.wa.canvas_resolution_factor=a;break;case "console_verbose":m.wa.console_verbose=a;break;case "compositing":m.wa.compositing=a;break;case "dof":m.wa.dof=a;break;case "do_not_load_resources":m.wa.do_not_load_resources=a;break;case "god_rays":m.wa.god_rays=a;break;case "stereo":m.wa.stereo=a;break;case "lod_leap_smooth_threshold":m.wa.lod_leap_smooth_threshold=a;break;case "lod_smooth_transitions":m.wa.lod_smooth_transitions=
a;break;case "max_fps":m.wa.max_fps=a;break;case "max_fps_physics":m.xa.max_fps=a;break;case "media_auto_activation":m.wa.media_auto_activation=a;break;case "motion_blur":m.wa.motion_blur=a;break;case "physics_enabled":m.xa.enabled=a;break;case "physics_uranium_path":m.xa.ut&&window.WebAssembly?(m.xa.pt=a+m.xa.FJ,m.xa.iy=a+m.xa.EJ):(m.xa.pt=a+m.xa.SD,m.xa.iy=a+m.xa.cH);m.xa.lJ=a;break;case "physics_use_wasm":m.xa.ut=a;break;case "physics_calc_fps":m.xa.kz=a;break;case "physics_use_workers":m.xa.On=
a;break;case "precision":m.wa.precision=a;break;case "prevent_caching":m.se.prevent_caching=a;break;case "quality":m.wa.quality=a;break;case "reflections":m.wa.reflections=a;break;case "refractions":m.wa.refractions=a;break;case "sfx_mix_mode":m.Ra.vw=a;break;case "shaders_dir":case "shaders_path":m.Nf.shaders_path=a;break;case "shadows":m.wa.shadows=a;break;case "show_hud_debug_info":m.wa.show_hud_debug_info=a;break;case "smaa":r.$u("smaa");m.wa.smaa=a;break;case "smaa_search_texture_path":r.$u("smaa_search_texture_path");
m.Nf.smaa_search_texture_path=a;break;case "smaa_area_texture_path":r.$u("smaa_area_texture_path");m.Nf.smaa_area_texture_path=a;break;case "ssao":m.wa.ssao=a;break;case "debug_view":m.wa.debug_view=a;break;case "enable_selectable":m.wa.enable_selectable=a;break;case "enable_outlining":m.wa.enable_outlining=a;break;case "outlining_overview_mode":m.Ed.outlining_overview_mode=a;break;case "glow_materials":m.wa.glow_materials=a;break;case "url_params":m.wa.url_params=a;break;case "use_min50":m.wa.use_min50=
a;break;case "enable_texture_cache":m.wa.enable_texture_cache=a;break;case "gl_debug":m.wa.gl_debug=a;break;case "srgb_type":m.wa.srgb_type=a;break;case "shadow_blur_samples":m.wa.shadow_blur_samples=a;break;case "reflection_quality":m.wa.reflection_quality=a;break;case "assets_gzip_available":m.wa.assets_gzip_available=a;break;case "debug_loading":m.wa.debug_loading=a;break;case "msaa_samples":m.wa.Jc=a;break;default:r.error("Unknown config property: "+e)}};m.get=function(e){switch(e){case "allow_cors":return m.wa.allow_cors;
case "allow_hidpi":return m.wa.allow_hidpi;case "alpha":return m.context.alpha;case "alpha_sort":return m.wa.alpha_sort;case "alpha_sort_threshold":return m.wa.alpha_sort_threshold;case "anaglyph_use":return"ANAGLYPH"==m.wa.stereo;case "animation_framerate":return m.Xk.jv;case "anisotropic_filtering":return m.wa.anisotropic_filtering;case "antialiasing":return m.wa.antialiasing;case "assets_dir":case "assets_path":return m.se.path;case "assets_dds_available":return m.se.Iz;case "assets_pvr_available":return m.se.Vw;
case "assets_min50_available":return m.se.$A;case "audio":return m.Ra.SC;case "background_color":return m.wa.background_color;case "bloom":return m.wa.bloom;case "built_in_module_name":return m.Nf.nu;case "canvas_resolution_factor":return m.wa.canvas_resolution_factor;case "console_verbose":return m.wa.console_verbose;case "compositing":return m.wa.compositing;case "dof":return m.wa.dof;case "do_not_load_resources":return m.wa.do_not_load_resources;case "is_mobile_device":return m.wa.is_mobile_device;
case "god_rays":return m.wa.god_rays;case "stereo":return m.wa.stereo;case "lod_leap_smooth_threshold":return m.wa.lod_leap_smooth_threshold;case "lod_smooth_transitions":return m.wa.lod_smooth_transitions;case "max_fps":return m.wa.max_fps;case "max_fps_physics":return m.xa.max_fps;case "media_auto_activation":return m.wa.media_auto_activation;case "motion_blur":return m.wa.motion_blur;case "physics_enabled":return m.xa.enabled;case "physics_uranium_path":return m.xa.lJ;case "physics_uranium_bin":return m.xa.iy;
case "physics_use_wasm":return m.xa.ut;case "physics_calc_fps":return m.xa.kz;case "physics_use_workers":return m.xa.On;case "precision":return m.wa.precision;case "prevent_caching":return m.se.prevent_caching;case "quality":return m.wa.quality;case "reflections":return m.wa.reflections;case "refractions":return m.wa.refractions;case "sfx_mix_mode":return m.Ra.vw;case "shaders_dir":case "shaders_path":return m.Nf.shaders_path;case "shadows":return m.wa.shadows;case "show_hud_debug_info":return m.wa.show_hud_debug_info;
case "smaa":return m.wa.smaa;case "smaa_search_texture_path":return m.Nf.smaa_search_texture_path;case "smaa_area_texture_path":return m.Nf.smaa_area_texture_path;case "ssao":return m.wa.ssao;case "debug_view":return m.wa.debug_view;case "enable_selectable":return m.wa.enable_selectable;case "enable_outlining":return m.wa.enable_outlining;case "outlining_overview_mode":return m.Ed.outlining_overview_mode;case "glow_materials":return m.wa.glow_materials;case "url_params":return m.wa.url_params;case "use_min50":return m.wa.use_min50;
case "enable_texture_cache":return m.wa.enable_texture_cache;case "gl_debug":return m.wa.gl_debug;case "srgb_type":return m.wa.srgb_type;case "shadow_blur_samples":return m.wa.shadow_blur_samples;case "reflection_quality":return m.wa.reflection_quality;case "assets_gzip_available":return m.wa.assets_gzip_available;case "debug_loading":return m.wa.debug_loading;case "msaa_samples":return m.wa.Jc;default:r.error("Unknown config property: "+e)}};m.reset=function(){for(var e in m.TE)m.context[e]=m.TE[e];
for(e in m.lF)m.wa[e]=m.lF[e];for(e in m.TD)m.se[e]=m.TD[e];for(e in m.wH)m.xa[e]=m.wH[e];for(e in m.VH)m.Pl[e]=m.VH[e];for(e in m.pI)m.Ra[e]=m.pI[e];for(e in m.jF)m.Lm[e]=m.jF[e]};m.reset_limits=function(){var e=m.ei.yo,a;for(a in m.SE)m.ei[a]=m.SE[a];m.ei.yo=e};m.sG=f;m.GT=function(){var e=m.Nf,a=m.xa;f()||""!=e.shaders_path||(e.shaders_path=v()+"/"+e.YT);if(m.xa.ut&&window.WebAssembly){e=a.jy+a.FJ;var T=a.jy+a.EJ}else e=a.jy+a.SD,T=a.jy+a.cH;a.enabled&&""==a.pt&&(a.pt=e.replace("B4W_URANIUM_PATH=",
""),a.iy=T.replace("B4W_URANIUM_PATH=",""))};m.get_assets_path=function(e){var a=m.se;if(a.path)return a.path;var f=a.wS,k="B4W_ASSETS_PATH=";e&&(f=a.MS,k="B4W_PROJ_ASSETS_PATH=",f=f.replace("__NAME__",e));f=f.replace(k,"");return f=f.replace("__JS__",v())}});w.a=f},function(D,w,f){D=f(0);var M=f(2),U=f(1);f=Object(D.a)("assert",function(f,z){function e(a){a&&q.error.apply(q,arguments);throw"engine panic:\nThe engine tried to perform an invalid operation and halted.\nPlease copy the console contents above and submit it to the Blend4Web forum at\nhttps://www.blend4web.com/en/forums/forum/17/";
}function m(a,m){n(a)||e("Structure assertion failed: invalid first object value");n(m)||e("Structure assertion failed: invalid second object value");v(a,m)||e("Structure assertion failed: incompatible types");if(!(null==a||null==m||"object"!=typeof a||M._14(a)||a instanceof Array)){for(var k in a)n(a[k])||e("Structure assertion failed: invalid value for key in the first object: "+k),k in m||e("Structure assertion failed: missing key in the first object: "+k);for(k in m)n(m[k])||e("Structure assertion failed: invalid value for key in the second object: "+
k),k in a||e("Structure assertion failed: missing key in the second object: "+k),v(a[k],m[k])||e("Structure assertion failed: incompatible types for key "+k)}}function n(a){return"undefined"==typeof a?!1:"number"==typeof a&&isNaN(a)?!1:!0}function v(a,e){if(typeof a!=typeof e)return!1;if(null!=a&&null!=e&&"object"==typeof a){var k=a instanceof Array,c=e instanceof Array;if(k&&!c||!k&&c)return!1;a=M._14(a);e=M._14(e);if(a&&!e||!a&&e)return!1}return!0}var q=Object(U.a)(f),r=null,y=!1;z.va=e;z.assert=
function(a){a||e("Assertion failed")};z.cY=function(a,m){a.constructor!=m&&e("Type assertion failed: value <"+a+"> has type <"+a.constructor+">, required <"+m+">")};z.nX=m;z.oX=function(a){y?m(a,r):y=!0;r=null!=a&&"object"==typeof a?M.N(a):a}});w.a=f},function(D,w,f){function M(){var b=new Float32Array(9);b[3]=1;b[4]=1;b[5]=1;return b}function U(b,c){if(b[8]!=b[8])throw Error(b);c[0]=b[0];c[1]=b[1];c[2]=b[2];c[3]=b[3];c[4]=b[4];c[5]=b[5];c[6]=b[6];c[7]=b[7];c[8]=b[8];return c}function n(b,c){if(b[0]!=
b[0])throw Error(b);c[0]=b[0];c[1]=b[1];c[2]=b[2];return c}function z(b,c){y._15(b)?(c[3]=b[0],c[4]=b[1],c[5]=b[2]):(c[3]=b,c[4]=b,c[5]=b);return c}function e(b,c){if(b[0]!=b[0])throw Error(b);var a=0>b[3]?-1:1;c[6]=a*b[0];c[7]=a*b[1];c[8]=a*b[2];return c}function m(b,c){c[0]=b[0];c[1]=b[1];c[2]=b[2];return c}function C(b,c){return c?(c[0]=b[3],c[1]=b[4],c[2]=b[5],c):b[3]}function v(b,c){c[0]=b[6];c[1]=b[7];c[2]=b[8];c[3]=Math.sqrt(Math.abs(1-b[6]*b[6]-b[7]*b[7]-b[8]*b[8]));return c}w.b=M;w.e=function(b,
c,a,g,k,l,e,p){var u=M();u[0]=b;u[1]=c;u[2]=a;u[3]=g;u[4]=g;u[5]=g;b=0>p?-1:1;u[6]=b*k;u[7]=b*l;u[8]=b*e;return u};w.c=function(){var b=new Float32Array(9);b[3]=1;b[4]=1;b[5]=1;return b};w.a=U;w.m=function(b){b[0]=0;b[1]=0;b[2]=0;b[3]=1;b[4]=1;b[5]=1;b[6]=0;b[7]=0;b[8]=0;return b};w.t=function(b,c,a,g){g[0]=b[0];g[1]=b[1];g[2]=b[2];y._15(c)?(g[3]=c[0],g[4]=c[1],g[5]=c[2]):(g[3]=c,g[4]=c,g[5]=c);b=0>a[3]?-1:1;g[6]=b*a[0];g[7]=b*a[1];g[8]=b*a[2];return g};w.v=n;w.s=z;w.w=function(b,c){c[0]=b[0];c[1]=
b[1];c[2]=b[2];c[3]=b[3];return c};w.r=e;w.k=function(b){return m(b,r.create())};w.j=m;w.i=C;w.l=function(b,c){c[0]=b[0];c[1]=b[1];c[2]=b[2];c[3]=b[3];return c};w.h=function(b){return v(b,r.create())};w.g=v;f.d(w,"p",function(){return c});f.d(w,"x",function(){return l});f.d(w,"d",function(){return b});f.d(w,"q",function(){return g});f.d(w,"D",function(){return E});f.d(w,"E",function(){return ea});f.d(w,"F",function(){return u});f.d(w,"z",function(){return F});f.d(w,"y",function(){return R});f.d(w,
"C",function(){return O});w.A=function(b,c,a){v(c,a);return r.multiply(a,b,a)};f.d(w,"B",function(){return K});f.d(w,"G",function(){return A});f.d(w,"o",function(){return ca});f.d(w,"n",function(){return L});w.f=function(b,c,a){a[0]=b[9*c];a[1]=b[9*c+1];a[2]=b[9*c+2];a[3]=b[9*c+3];a[4]=b[9*c+4];a[5]=b[9*c+5];a[6]=b[9*c+6];a[7]=b[9*c+7];a[8]=b[9*c+8];return a};w.u=function(b,c,a){c[9*a]=b[0];c[9*a+1]=b[1];c[9*a+2]=b[2];c[9*a+3]=b[3];c[9*a+4]=b[4];c[9*a+5]=b[5];c[9*a+6]=b[6];c[9*a+7]=b[7];c[9*a+8]=
b[8];return c};var q=f(21),r=f(8),y=f(2),a=f(3),T=Math.sin(-Math.PI/4),k=-T,c=function(){var b=a.create(),c=a.create(),g=r.create();return function(k,l){var u=C(k,b);a.inverse(u,u);if(!u[0])return null;var B=m(k,c);k=v(k,g);r.invert(k,k);a.multiply(B,u,B);a.transformQuat(B,k,B);a.negate(B,B);n(B,l);z(u,l);e(k,l);return l}}(),l=function(){var b=a.create(),c=a.create(),g=r.create();return function(a,k){var l=m(a,b),e=C(a,c);a=v(a,g);q.fromRotationTranslation(a,l,k);q.scale(k,e,k);return k}}(),b=function(){var b=
a.create(),c=a.create(),g=r.create();return function(a,k){var l=y._26(a,b),u=y._25(a,c);a=y._24(a,g);n(l,k);z(u,k);e(a,k);return k}}(),g=function(){var b=a.create(),c=a.create(),g=r.create(),k=r.create();return function(l,u,B){var p=m(u,b);E(p,l,p);n(p,B);p=C(l,b);var f=C(u,c);p=a.multiply(p,f,b);z(p,B);l=v(l,g);u=v(u,k);u=r.multiply(l,u,g);e(u,B);return B}}();(function(){var b=q.create();return function(c,a,g){a=l(a,b);q.multiply(a,c,g);return g}})();var E=function(){var b=a.create(),c=a.create(),
g=r.create();return function(k,l,e){var u=m(l,b),p=C(l,c);l=v(l,g);a.multiply(k,p,e);a.transformQuat(e,l,e);a.add(e,u,e);return e}}(),ea=function(){var b=a.create(),c=a.create(),g=r.create();return function(k,l,e){var u=m(l,b),p=C(l,c);l=v(l,g);a.subtract(k,u,e);r.invert(l,l);a.transformQuat(e,l,e);a.inverse(p,p);a.multiply(e,p,e);return e}}(),u=function(){var b=a.create(),c=a.create(),g=a.create(),k=r.create();return function(l,e,u,p){p|=0;var B=l.length,f=m(e,b),t=C(e,c);e=v(e,k);for(var d=0;d<
B;d+=3)g[0]=l[d],g[1]=l[d+1],g[2]=l[d+2],a.multiply(g,t,g),a.transformQuat(g,e,g),a.add(g,f,g),u[p+d]=g[0],u[p+d+1]=g[1],u[p+d+2]=g[2];return u}}(),F=function(){var b=a.create(),c=a.create(),g=r.create();return function(k,l,e,u){u|=0;var p=k.length,m=C(l,b);l=v(l,g);for(var B=0;B<p;B+=3)c[0]=k[B],c[1]=k[B+1],c[2]=k[B+2],a.multiply(c,m,c),a.transformQuat(c,l,c),e[u+B]=c[0],e[u+B+1]=c[1],e[u+B+2]=c[2];return e}}(),R=function(){var b=a.create(),c=r.create();return function(g,k,l){var e=C(k,b);k=v(k,
c);a.multiply(g,e,l);a.transformQuat(l,k,l);return l}}(),O=function(){var b=a.create();a.create();var c=r.create();return function(g,k,l,e){e|=0;var u=g.length,p=C(k,b);k=v(k,c);for(var m,B=0;B<u;B+=4)m=g[B+2],a.scale(m,p,m),a.transformQuat(m,k,m),l[e+B]=m[0],l[e+B+1]=m[1],l[e+B+2]=m[2],l[e+B+3]=g[B+3];return l}}(),K=function(){var b=r.create();return function(c,a,g,k){k|=0;a=v(a,b);y._38(c,a,g,k);return g}}(),A=function(){var b=a.create(),c=a.create(),g=r.create();return function(k,l,e){var u=m(k,
b),p=C(k,c),B=v(k,g);l=a.multiply(l,p,c);a.transformQuat(l,B,l);a.add(u,l,u);U(k,e);n(u,e);return e}}(),ca=function(){var b=a.create(),c=a.create(),g=r.create(),k=r.create();return function(l,u,B,p){var f=m(l,b),F=m(u,c),t=a.lerp(f,F,B,b);n(t,p);C(l,b);C(u,c);f=a.lerp(f,F,B,b);z(f,p);l=v(l,g);u=v(u,k);B=r.slerp(l,u,B,g);e(B,p);return p}}();(function(){var b=a.create(),c=a.create(),g=r.create(),k=r.create();return function(a,l,u,p){var B=m(a,b),f=m(l,c);b[0]=f[0]*(u+1)-B[0]*u;b[1]=f[1]*(u+1)-B[1]*
u;b[2]=f[2]*(u+1)-B[2]*u;n(b,p);B=C(a,b);f=C(l,c);b[0]=f[0]*(u+1)-B[0]*u;b[1]=f[1]*(u+1)-B[1]*u;b[2]=f[2]*(u+1)-B[2]*u;z(b,p);a=v(a,g);l=v(l,k);g[0]=l[0]*(u+1)-a[0]*u;g[1]=l[1]*(u+1)-a[1]*u;g[2]=l[2]*(u+1)-a[2]*u;g[3]=l[3]*(u+1)-a[3]*u;r.normalize(g,g);e(g,p);return p}})();var L=function(){var b=a.create();a.create();var c=r.create(),g=r.create();return function(a,k,l,u,p){var B=m(a,b);B[0]+=k*l[0];B[1]+=k*l[1];B[2]+=k*l[2];n(B,p);l=C(a,b);z(l,p);a=v(a,c);l=u[0];B=u[1];u=u[2];g[0]=.5*(l*a[3]+B*a[2]-
u*a[1]);g[1]=.5*(B*a[3]+u*a[0]-l*a[2]);g[2]=.5*(u*a[3]+l*a[1]-B*a[0]);g[3]=.5*(-l*a[0]-B*a[1]-u*a[2]);a[0]+=g[0]*k;a[1]+=g[1]*k;a[2]+=g[2]*k;a[3]+=g[3]*k;r.normalize(a,a);e(a,p);return p}}();(function(){var b=a.create(),c=a.create(),g=r.create(),l=r.create();return function(a,u){var B=m(a,b);n(B,u);B=C(a,c);z(B,u);a=v(a,g);l[0]=a[0]*k+a[3]*T;l[1]=a[1]*k+a[2]*T;l[2]=a[2]*k-a[1]*T;l[3]=a[3]*k-a[0]*T;e(l,u);return u}})();(function(){var b=a.create(),c=r.create();return function(a,g){var k=m(a,b);k[0]=
k[0];k[1]=-k[2];k[2]=k[1];n(k,g);k=C(a,b);z(k,g);a=v(a,c);a[0]=a[0];a[1]=-a[1];a[2]=a[2];a[3]=a[3];e(a,g);return g}})()},function(D,w,f){function M(){var a=new r(4);a[0]=0;a[1]=0;a[2]=0;a[3]=0;return a}function U(a,k,c){c[0]=a[0]-k[0];c[1]=a[1]-k[1];c[2]=a[2]-k[2];c[3]=a[3]-k[3];return c}function n(a,k,c){c[0]=a[0]*k[0];c[1]=a[1]*k[1];c[2]=a[2]*k[2];c[3]=a[3]*k[3];return c}function z(a,k,c){c[0]=a[0]/k[0];c[1]=a[1]/k[1];c[2]=a[2]/k[2];c[3]=a[3]/k[3];return c}function e(a,k){var c=k[0]-a[0],l=k[1]-
a[1],b=k[2]-a[2];a=k[3]-a[3];return Math.sqrt(c*c+l*l+b*b+a*a)}function m(a,k){var c=k[0]-a[0],l=k[1]-a[1],b=k[2]-a[2];a=k[3]-a[3];return c*c+l*l+b*b+a*a}function C(a){var k=a[0],c=a[1],l=a[2];a=a[3];return Math.sqrt(k*k+c*c+l*l+a*a)}function v(a){var k=a[0],c=a[1],l=a[2];a=a[3];return k*k+c*c+l*l+a*a}function q(a,k){var c=a[0],l=a[1],b=a[2];a=a[3];var g=c*c+l*l+b*b+a*a;0<g&&(g=1/Math.sqrt(g),k[0]=c*g,k[1]=l*g,k[2]=b*g,k[3]=a*g);return k}Object.defineProperty(w,"__esModule",{value:!0});w.create=M;
w.clone=function(a){var k=new r(4);k[0]=a[0];k[1]=a[1];k[2]=a[2];k[3]=a[3];return k};w.fromValues=function(a,k,c,l){var b=new r(4);b[0]=a;b[1]=k;b[2]=c;b[3]=l;return b};w.copy=function(a,k){k[0]=a[0];k[1]=a[1];k[2]=a[2];k[3]=a[3];return k};w.set=function(a,k,c,l,b){b[0]=a;b[1]=k;b[2]=c;b[3]=l;return b};w.add=function(a,k,c){c[0]=a[0]+k[0];c[1]=a[1]+k[1];c[2]=a[2]+k[2];c[3]=a[3]+k[3];return c};w.subtract=U;f.d(w,"sub",function(){return U});w.multiply=n;f.d(w,"mul",function(){return n});w.divide=z;
f.d(w,"div",function(){return z});w.min=function(a,k,c){c[0]=Math.min(a[0],k[0]);c[1]=Math.min(a[1],k[1]);c[2]=Math.min(a[2],k[2]);c[3]=Math.min(a[3],k[3]);return c};w.max=function(a,k,c){c[0]=Math.max(a[0],k[0]);c[1]=Math.max(a[1],k[1]);c[2]=Math.max(a[2],k[2]);c[3]=Math.max(a[3],k[3]);return c};w.scale=function(a,k,c){c[0]=a[0]*k;c[1]=a[1]*k;c[2]=a[2]*k;c[3]=a[3]*k;return c};w.scaleAndAdd=function(a,k,c,l){l[0]=a[0]+k[0]*c;l[1]=a[1]+k[1]*c;l[2]=a[2]+k[2]*c;l[3]=a[3]+k[3]*c;return l};w.distance=
e;f.d(w,"dist",function(){return e});w.squaredDistance=m;f.d(w,"sqrDist",function(){return m});w.length=C;f.d(w,"len",function(){return C});w.squaredLength=v;f.d(w,"sqrLen",function(){return v});w.negate=function(a,k){k[0]=-a[0];k[1]=-a[1];k[2]=-a[2];k[3]=-a[3];return k};w.inverse=function(a,k){k[0]=1/a[0];k[1]=1/a[1];k[2]=1/a[2];k[3]=1/a[3];return k};w.normalize=q;w.dot=function(a,k){return a[0]*k[0]+a[1]*k[1]+a[2]*k[2]+a[3]*k[3]};w.lerp=function(a,k,c,l){var b=a[0],g=a[1],e=a[2];a=a[3];l[0]=b+c*
(k[0]-b);l[1]=g+c*(k[1]-g);l[2]=e+c*(k[2]-e);l[3]=a+c*(k[3]-a);return l};w.random=function(a,k){k[0]=y();k[1]=y();k[2]=y();k[3]=y();q(k,k);a(k,a,k);return k};w.transformMat4=function(a,k,c){var l=a[0],b=a[1],g=a[2];a=a[3];c[0]=k[0]*l+k[4]*b+k[8]*g+k[12]*a;c[1]=k[1]*l+k[5]*b+k[9]*g+k[13]*a;c[2]=k[2]*l+k[6]*b+k[10]*g+k[14]*a;c[3]=k[3]*l+k[7]*b+k[11]*g+k[15]*a;return c};w.transformQuat=function(a,k,c){var l=a[0],b=a[1],g=a[2],e=k[0],m=k[1],u=k[2];k=k[3];var f=k*l+m*g-u*b,q=k*b+u*l-e*g,v=k*g+e*b-m*l;
l=-e*l-m*b-u*g;c[0]=f*k+l*-e+q*-u-v*-m;c[1]=q*k+l*-m+v*-e-f*-u;c[2]=v*k+l*-u+f*-m-q*-e;c[3]=a[3];return c};f.d(w,"forEach",function(){return a});w.str=function(a){return"vec4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"};var r="undefined"!==typeof Float32Array?Float32Array:Array,y=Math.random,a=function(){var a=M();return function(k,c,l,b,g,e){var m;c||(c=4);l||(l=0);for(b?m=Math.min(b*c+l,k.length):m=k.length;l<m;l+=c)a[0]=k[l],a[1]=k[l+1],a[2]=k[l+2],a[3]=k[l+3],g(a,e,a),k[l]=a[0],k[l+1]=a[1],k[l+2]=
a[2],k[l+3]=a[3];return k}}()},function(D,w,f){function M(){var a=new q(4);a[0]=0;a[1]=0;a[2]=0;a[3]=1;return a}function U(a,k,c){k*=.5;var l=Math.sin(k);c[0]=l*a[0];c[1]=l*a[1];c[2]=l*a[2];c[3]=Math.cos(k);return c}function n(a,k,c){var l=a[0],b=a[1],g=a[2];a=a[3];var e=k[0],m=k[1],u=k[2];k=k[3];c[0]=l*k+a*e+b*u-g*m;c[1]=b*k+a*m+g*e-l*u;c[2]=g*k+a*u+l*m-b*e;c[3]=a*k-l*e-b*m-g*u;return c}function z(a,k,c,l){var b=a[0],g=a[1],e=a[2];a=a[3];var m=k[0],u=k[1],f=k[2];k=k[3];var q=b*m+g*u+e*f+a*k;0>q&&
(q=-q,m=-m,u=-u,f=-f,k=-k);if(1E-6<1-q){var v=Math.acos(q);var r=Math.sin(v);q=Math.sin((1-c)*v)/r;c=Math.sin(c*v)/r}else q=1-c;l[0]=q*b+c*m;l[1]=q*g+c*u;l[2]=q*e+c*f;l[3]=q*a+c*k;return l}function e(a,k){var c=a[0]+a[4]+a[8];if(0<c)c=Math.sqrt(c+1),k[3]=.5*c,c=.5/c,k[0]=(a[5]-a[7])*c,k[1]=(a[6]-a[2])*c,k[2]=(a[1]-a[3])*c;else{var l=0;a[4]>a[0]&&(l=1);a[8]>a[3*l+l]&&(l=2);var b=(l+1)%3,g=(l+2)%3;c=Math.sqrt(a[3*l+l]-a[3*b+b]-a[3*g+g]+1);k[l]=.5*c;c=.5/c;k[3]=(a[3*b+g]-a[3*g+b])*c;k[b]=(a[3*b+l]+a[3*
l+b])*c;k[g]=(a[3*g+l]+a[3*l+g])*c}return k}Object.defineProperty(w,"__esModule",{value:!0});w.create=M;f.d(w,"rotationTo",function(){return r});f.d(w,"setAxes",function(){return y});w.identity=function(a){a[0]=0;a[1]=0;a[2]=0;a[3]=1;return a};w.setAxisAngle=U;w.multiply=n;f.d(w,"mul",function(){return n});w.rotateX=function(a,k,c){k*=.5;var l=a[0],b=a[1],g=a[2];a=a[3];var e=Math.sin(k);k=Math.cos(k);c[0]=l*k+a*e;c[1]=b*k+g*e;c[2]=g*k-b*e;c[3]=a*k-l*e;return c};w.rotateY=function(a,k,c){k*=.5;var l=
a[0],b=a[1],g=a[2];a=a[3];var e=Math.sin(k);k=Math.cos(k);c[0]=l*k-g*e;c[1]=b*k+a*e;c[2]=g*k+l*e;c[3]=a*k-b*e;return c};w.rotateZ=function(a,k,c){k*=.5;var l=a[0],b=a[1],g=a[2];a=a[3];var e=Math.sin(k);k=Math.cos(k);c[0]=l*k+b*e;c[1]=b*k-l*e;c[2]=g*k+a*e;c[3]=a*k-g*e;return c};w.calculateW=function(a,k){var c=a[0],l=a[1];a=a[2];k[0]=c;k[1]=l;k[2]=a;k[3]=Math.sqrt(Math.abs(1-c*c-l*l-a*a));return k};w.slerp=z;f.d(w,"sqlerp",function(){return a});w.invert=function(a,k){var c=a[0],l=a[1],b=a[2];a=a[3];
var g=c*c+l*l+b*b+a*a;g=g?1/g:0;k[0]=-c*g;k[1]=-l*g;k[2]=-b*g;k[3]=a*g;return k};w.conjugate=function(a,k){k[0]=-a[0];k[1]=-a[1];k[2]=-a[2];k[3]=a[3];return k};w.fromMat3=e;w.str=function(a){return"quat("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"};var m=f(3),C=f(7),v=f(27);f.d(w,"clone",function(){return C.clone});f.d(w,"fromValues",function(){return C.fromValues});f.d(w,"copy",function(){return C.copy});f.d(w,"set",function(){return C.set});f.d(w,"add",function(){return C.add});f.d(w,"scale",function(){return C.scale});
f.d(w,"dot",function(){return C.dot});f.d(w,"lerp",function(){return C.lerp});f.d(w,"length",function(){return C.length});f.d(w,"len",function(){return C.length});f.d(w,"squaredLength",function(){return C.squaredLength});f.d(w,"sqrLen",function(){return C.squaredLength});f.d(w,"normalize",function(){return C.normalize});var q="undefined"!==typeof Float32Array?Float32Array:Array,r=function(){var a=m.create(),k=m.fromValues(1,0,0),c=m.fromValues(0,1,0);return function(l,b,g){var e=m.dot(l,b);if(-.9999999>
e)return m.cross(k,l,a),1E-6>m.length(a)&&m.cross(c,l,a),m.normalize(a,a),U(a,Math.PI,g),g;if(.9999999<e)return g[0]=0,g[1]=0,g[2]=0,g[3]=1,g;m.cross(l,b,a);g[0]=a[0];g[1]=a[1];g[2]=a[2];g[3]=1+e;return C.normalize(g,g)}}(),y=function(){var a=v.create();return function(k,c,l,b){a[0]=c[0];a[3]=c[1];a[6]=c[2];a[1]=l[0];a[4]=l[1];a[7]=l[2];a[2]=-k[0];a[5]=-k[1];a[8]=-k[2];return C.normalize(e(a,b),b)}}(),a=function(){var a=M(),k=M();return function(c,l,b,g,e,m){z(c,g,e,a);z(l,b,e,k);z(a,k,2*e*(1-e),
m);return m}}()},function(D,w,f){D=f(0);var M=f(25),U=f(4),n=f(6),z=f(2),e=f(3),m=f(7);f=Object(D.a)("__obj_util",function(f,v){function q(a){a={type:a,Rd:0,na:n.c(),Dy:n.c(),pivot:new Float32Array(3),$c:new Float32Array(3),ql:0,rl:0,FA:!1,Vv:!1,bl:null,mj:0,Sx:!1,od:e.create(),use_panning:!1,cc:0,kq:1,jq:1,lq:1,dof_distance:0,dof_front_start:0,dof_front_end:0,dof_rear_start:0,dof_rear_end:0,dof_power:0,dof_bokeh_intensity:0,dof_bokeh:!1,te:!1,dof_object:null,zc:null,Hb:null,rc:null,me:null,le:null,
Oe:null,Xi:!0,lj:{Gl:1,Hl:1,Il:0},Qd:-1,Gd:-1,ad:new Float32Array(4),ve:0,uh:0,dk:!1,fs:new Float32Array(3),pw:new Float32Array(3),Wg:0,Vg:Infinity,ik:0,jk:0,cf:!1,Of:!1,Be:!1,sf:!1,Pe:!1,ze:!1,Hd:!1,Nh:"",yf:!1,df:!1,ld:!1,hide:!1,hG:!1,Ql:!1,Jw:!1,Ed:!1,Iw:!1,Kw:!1,ul:!1,is_visible:!1,Gr:!1,Wn:0,Cg:0,Dg:0,ig:0,hg:0,cg:0,kk:"",Ef:{OA:"",NA:"",sB:""},zm:!1,qu:new Float32Array(3),qh:!1,Nq:!1,Pq:"",Oq:!1,lg:0,ny:0,oy:0,mi:0,Um:!1,Ld:!1,Rf:!1,qg:[],wl:!1,Gj:!1,Zf:1,jo:0,io:1,Fj:null,ni:!1,Mi:new Int8Array([-1,
-1]),Fp:[],tw:[],ox:[],ye:null,qf:null,De:null,wf:null,bm:null,Ll:null,Mg:null,Oi:null,ys:null,ko:null,Gq:null,Jj:M.w(),gb:M.w(),bi:M.w(),Xc:M.A(),Ye:M.A(),jc:M.y(),Yk:M.y(),Nd:M.C(),$D:M.C(),Mq:M.K(),Kq:M.I(),Lq:M.J(),nj:0};e.copy(z.f,a.od);return a}function r(a){return{Bb:a,Uv:!1,Ia:[],Lg:[],oj:[],Tj:null,ZB:[],es:0,pH:!1,Qa:[],sI:[]}}function C(a){if(!(a instanceof Object))return a;var b=null,c=null,g=null,k=null,l=null,e=null;a.Ua&&(b=a.Ua,a.Ua=null);a.vg&&(c=a.vg,a.vg=null);a.bg&&(g=a.bg,a.bg=
null);a.Tb&&(k=a.Tb,a.Tb=null);a.ec&&(l=a.ec,a.ec=null);a.Sf&&(e=a.Sf,a.Sf=null);var u=a.constructor;switch(u){case Int8Array:case Uint8Array:case Uint8ClampedArray:case Int16Array:case Uint16Array:case Int32Array:case Uint32Array:case Float32Array:case Float64Array:u=new u(a);break;case Array:u=new u(a.length);for(var m=0;m<a.length;m++)u[m]=C(a[m]);break;case WebGLUniformLocation:case WebGLProgram:case WebGLShader:u=a;break;case WebGLFramebuffer:case WebGLRenderbuffer:case WebGLTexture:case WebGLBuffer:u=
null;break;case Function:u=a;break;default:for(m in u=new u,a)u[m]=C(a[m])}b&&(u.Ua=b,a.Ua=b);c&&(u.vg=c,a.vg=c);g&&(u.bg=g,a.bg=g);k&&(u.Tb=k,a.Tb=k);l&&(u.ec=l,a.ec=l);e&&(u.Sf=z.S(),a.Sf=e);return u}function a(a,b){M.o(b,a.gb);M.h(a.gb,a.na,a.bi)}function T(a,b,c){a.Xc=M.l(b,c);M.k(a.Xc,a.na,a.Ye)}function k(a,b,c,g,k,l){a.jc=M.e(b,c,g,l);e.scale(a.jc.Cb,k[0],a.jc.Cb);e.scale(a.jc.Db,k[1],a.jc.Db);e.scale(a.jc.Eb,k[2],a.jc.Eb);M.i(a.jc,a.na,a.Yk)}function c(a,b,c,g){a.Mq=M.d(b,g);a.Kq=M.b(c,g);
a.Lq=M.c(b,g)}function l(a,b,c,g,k,l){a.Nd=M.O(l,b,c,g,k);M.j(a.Nd,a.na,a.$D)}function b(a,b,c){M.h(a.Xb.Bf,b,c.Bf);a.hm&&M.i(a.Xb.ag,b,c.ag);M.k(a.Xb.Cf,b,c.Cf)}function g(a,b){a=a.Aa;for(var c=0;c<a.length;c++){var g=a[c];if(g.Bb==b)return g}return null}function E(a){return a.Kl?a.parent:a.parent?E(a.parent):null}var ea=Object(U.a)(f).wa;v.Qy=Infinity;v.Hm=q;v.qz=function(a){var b=q(a.type);b.Rd=a.Rd;n.a(a.na,b.na);n.a(a.Dy,b.Dy);e.copy(a.pivot,b.pivot);e.copy(a.$c,b.$c);b.ql=a.ql;b.rl=a.rl;b.FA=
a.FA;b.Vv=a.Vv;a.bl&&(b.bl=e.clone(a.bl));b.mj=a.mj;b.Sx=a.Sx;e.copy(a.od,b.od);b.use_panning=a.use_panning;b.cc=a.cc;b.kq=a.kq;b.jq=a.jq;b.lq=a.lq;b.dof_distance=a.dof_distance;b.dof_front_start=a.dof_front_start;b.dof_front_end=a.dof_front_end;b.dof_rear_start=a.dof_rear_start;b.dof_rear_end=a.dof_rear_end;b.dof_power=a.dof_power;b.dof_bokeh_intensity=a.dof_bokeh_intensity;b.dof_bokeh=a.dof_bokeh;b.te=a.te;b.dof_object=a.dof_object;b.zc=z.O(a.zc);b.Hb=z.O(a.Hb);b.rc=z.O(a.rc);b.me=z.O(a.me);b.le=
z.O(a.le);b.Oe=a.Oe;b.Xi=a.Xi;b.lj.Gl=a.lj.Gl;b.lj.Hl=a.lj.Hl;b.lj.Il=a.lj.Il;b.Qd=a.Qd;b.Gd=a.Gd;b.ad=a.ad;b.ve=a.ve;b.uh=a.uh;b.dk=a.dk;e.copy(a.fs,b.fs);e.copy(a.pw,b.pw);b.Wg=a.Wg;b.Vg=a.Vg;b.ik=a.ik;b.jk=a.jk;b.cf=a.cf;b.Of=a.Of;b.Be=a.Be;b.sf=a.sf;b.Pe=a.Pe;b.ze=a.ze;b.Hd=a.Hd;b.Nh=a.Nh;b.yf=a.yf;b.df=a.df;b.ld=a.ld;b.hide=a.hide;b.Ql=a.Ql;b.Jw=a.Jw;b.Ed=a.Ed;b.Iw=a.Iw;b.Kw=a.Kw;b.ul=a.ul;b.is_visible=a.is_visible;b.Gr=a.Gr;b.Wn=a.Wn;b.Cg=a.Cg;b.Dg=a.Dg;b.ig=a.ig;b.hg=a.hg;b.cg=a.cg;b.kk=a.kk;
b.Ef=a.Ef;b.zm=a.zm;e.copy(a.qu,b.qu);b.qh=a.qh;b.Nq=a.Nq;b.Pq=a.Pq;b.Oq=a.Oq;b.lg=a.lg;b.ny=a.ny;b.oy=a.oy;b.mi=a.mi;b.Um=a.Um;b.Ld=a.Ld;b.Rf=a.Rf;b.qg=z.O(a.qg);b.wl=a.wl;b.Gj=a.Gj;b.Zf=a.Zf;b.jo=a.jo;b.io=a.io;b.Mi.set(a.Mi);b.Fp=z.O(a.Fp);b.tw=z.O(a.tw);b.ox=z.O(a.ox);b.ye=z.O(a.ye);b.qf=z.O(a.qf);b.De=z.O(a.De);b.wf=z.O(a.wf);b.Mg=z.O(a.Mg);b.Oi=z.O(a.Oi);b.ys=z.O(a.ys);b.ko=z.O(a.ko);b.Gq=z.O(a.Gq);M.o(a.Jj,b.Jj);M.o(a.gb,b.gb);M.o(a.bi,b.bi);M.u(a.Xc,b.Xc);M.u(a.Ye,b.Ye);M.s(a.jc,b.jc);M.s(a.Yk,
b.Yk);M.p(a.Kq,b.Kq);M.r(a.Mq,b.Mq);M.q(a.Lq,b.Lq);b.nj=a.nj;return b};v.so=function(a,b,c){c||(c=a);return{name:a,nd:z._4(),oe:c,type:b,Sc:[],vl:!0,Vk:null,Kf:{Fl:[],cn:[]},is_dynamic:!1,Ur:!1,qt:!1,rG:!1,ka:null,Yc:null,Ra:null,lc:null,au:null,anchor:null,Eo:null,uw:null,Fu:null,Aa:[],Ld:[],bf:z.S(),wz:z.S(),Za:[],An:[],Lf:[],ho:[],xi:null,Bn:[],parent:null,Kl:!1,qs:"",uy:null,ts:null,Jn:!1,Sb:"",zu:"AUTO",mg:!1,is_character:!1,en:!1,hz:!1,xa:null,Ba:null,xh:null,xg:null,Go:null,rE:null,yB:[],Fd:{tk:"NO_COLLISION",
Bi:!1,tJ:!1,mf:0,yt:0,xt:0,nr:0,Ls:0,HR:!1,IR:!1,JR:!1,KR:!1,LR:!1,MR:!1,$e:0,Ze:0,af:0,LC:!1,vu:"BOX",bq:!1},tH:{Zx:0,rB:0,bh:0,GB:0},vm:0,Mm:[],iB:!1,gH:!1,gs:[]}};v.$X=r;v.ir=function(a){return a instanceof Array?a.slice():a};v.jr=C;v.is_dynamic=function(a){return a.is_dynamic};v.kc=function(a){return"MESH"==a.type&&a.is_dynamic};v.Fq=function(a,b){a.Aa.push(r(b))};v.Ig=function(a,c,k){var l=a.ka;a=g(a,c);a.Ia.push(k);c=M.L();b(k,l.na,c);a.Lg.push(c)};v.gJ=function(b,g){var e=b.ka,m=Math.max(Math.abs(g.max_x),
Math.abs(g.min_x)),u=Math.max(Math.abs(g.max_y),Math.abs(g.min_y));g=Math.max(Math.abs(g.max_z),Math.abs(g.min_z));g=Math.sqrt(m*m+u*u+g*g);m=Math.sqrt(m*m+u*u);u=M.w();u.max_x=u.max_y=u.max_z=g;u.min_x=u.min_y=u.min_z=-g;a(e,u);T(e,g,[0,0,0]);k(e,[1,0,0],[0,1,0],[0,0,1],[g,g,g],[0,0,0]);b.is_dynamic?c(e,m,m,u):l(e,[1,0,0],[0,1,0],[0,0,1],[g,g,g],[0,0,0])};v.gV=function(b,g,e){var m=b.ka,u=e.bs_rad,f=e.bc_rad,q=e.bs_cen,v=e.be_cen,r=e.caxis_x,J=e.caxis_y,n=e.caxis_z,B=e.be_ax,ba=e.rbb.rbb_c;e=e.rbb.rbb_s;
a(m,g);T(m,u,q);g=b.is_dynamic;k(m,g?r:[1,0,0],g?J:[0,1,0],g?n:[0,0,1],B,v);b.is_dynamic?c(m,f,f,m.gb):l(m,r,J,n,e,ba)};v.hV=function(b,g,e){for(var m=b.ka,u=g.max_x-g.min_x,f=g.max_y-g.min_y,q=g.max_z-g.min_z,v=(g.max_x+g.min_x)/2,r=(g.max_y+g.min_y)/2,J=(g.max_z+g.min_z)/2,n=v,B=r,ba=Math.max(u,Math.max(f,q))/2,I=Math.max(u,f)/2,P=[v/(u?u:1),r/(f?f:1),J/(q?q:1)],p=.5,F=0;F<e.length;F++)for(var H=e[F],t=0;t<H.length;t+=3){var d=H[t],C=H[t+1],y=H[t+2],E=Math.sqrt((v-d)*(v-d)+(r-C)*(r-C)+(J-y)*(J-
y));if(E>ba){var z=v-ba*(d-v)/E,R=r-ba*(C-r)/E;E=J-ba*(y-J)/E;v=(z+d)/2;r=(R+C)/2;J=(E+y)/2;ba=Math.sqrt((v-d)*(v-d)+(r-C)*(r-C)+(J-y)*(J-y))}R=Math.sqrt((n-d)*(n-d)+(B-C)*(B-C));R>I&&(z=n-I*(d-n)/R,R=B-I*(C-B)/R,n=(z+d)/2,B=(R+C)/2,I=Math.sqrt((n-d)*(n-d)+(B-C)*(B-C)));d/=u?u:1;C/=f?f:1;y/=q?q:1;E=Math.sqrt((P[0]-d)*(P[0]-d)+(P[1]-C)*(P[1]-C)+(P[2]-y)*(P[2]-y));E>p&&(z=P[0]-p*(d-P[0])/E,R=P[1]-p*(C-P[1])/E,E=P[2]-p*(y-P[2])/E,P[0]=(z+d)/2,P[1]=(R+C)/2,P[2]=(E+y)/2,p=Math.sqrt((P[0]-d)*(P[0]-d)+(P[1]-
C)*(P[1]-C)+(P[2]-y)*(P[2]-y)))}e=u?u*P[0]:g.max_x;n=f?f*P[1]:g.max_y;P=q?q*P[2]:g.max_z;u*=p;f*=p;q*=p;a(m,g);T(m,ba,[v,r,J]);k(m,[1,0,0],[0,1,0],[0,0,1],[u,f,q],[e,n,P]);b.is_dynamic?c(m,I,I,m.gb):l(m,[(m.gb.max_x-m.gb.min_x)/2,0,0],[0,(m.gb.max_y-m.gb.min_y)/2,0],[0,0,(m.gb.max_z-m.gb.min_z)/2],[1,1,1],[(m.gb.max_x+m.gb.min_x)/2,(m.gb.max_y+m.gb.min_y)/2,(m.gb.max_z+m.gb.min_z)/2])};v.kJ=b;v.wY=function(a,b){a=a.Aa;for(var c=0;c<a.length;c++)if(a[c].Bb==b){a.splice(c,1);break}};v.kb=g;v.fJ=function(a,
b){for(var c=0;c<a.length;c++)m.copy(b,a[c].ka.ad)};v.RB=function(a,b,c){for(var g=0;g<a.Aa.length;g++){var k=a.Aa[g];c&&k.Bb!=c||(k.Uv=b)}};v.TH=function(a,b){a.Ia.splice(b,1);a.Lg.splice(b,1)};v.xv=function(a,b){var c=[];b=b?ea.$G-1:ea.$G;for(var g=0;g<a.length;g++){var k=a[g];k.lc.MF&&c.length<b&&c.push(k)}return c.length?c:a[0]?[a[0]]:[]};v.$R=function(a,b){n.m(b.na);b.bl=null;a.ka=b};v.uE=function(a,b){return b.b4w_enable_soft_particles&&0<b.b4w_particles_softness&&(b=b.material-1,a=a.Sc,0<=
b&&b<a.length&&("ADD"==a[b].Pb||"ALPHA"==a[b].Pb||"ALPHA_SORT"==a[b].Pb))?!0:!1};v.jN=function(a){a=a.Aa;for(var b=0;b<a.length;b++)for(var c=a[b].Ia,g=0;g<c.length;g++)for(var k=c[g].Mb.fi,l=0;l<k.length;l++){var e=k[l];if("USE_MODEL_TSR_INVERSE"==e[0]&&"1"==e[1])return!0}return!1};v.IF=function(a,b){return a+"*"+b};v.get_parent=function(a){return a.Kl?null:a.parent};v.get_dg_parent=E;v.dA=function(a,b){for(var c=[],g=0;g<b.length;g++){var k=b[g];E(k)==a&&c.push(k)}return c};v.get_object_data_id=
function(a){return a.ka.Rd};v.is_mesh=function(a){return"MESH"===a.type};v.is_armature=function(a){return"ARMATURE"===a.type};v.is_speaker=function(a){return"SPEAKER"===a.type};v.is_camera=function(a){return"CAMERA"===a.type};v.is_lamp=function(a){return"LAMP"===a.type};v.is_empty=function(a){return"EMPTY"===a.type};v.is_line=function(a){return"LINE"===a.type};v.is_world=function(a){return"WORLD"===a.type}});w.a=f},function(D,w,f){D=f(0);var M=f(5),U=f(16),n=f(25),z=f(14),e=f(4),m=f(15),C=f(46),v=
f(29),q=f(51),r=f(39),y=f(21),a=f(62),T=f(12),k=f(17),c=f(9),l=f(90),b=f(64),g=f(1),E=f(8),ea=f(22),u=f(58),F=f(23),R=f(34),O=f(11),K=f(6),A=f(2),ca=f(3),L=f(7),ha=f(37);f=Object(D.a)("__scenes",function(f,W){function B(){kc||(kc=J(ob));return kc}function J(a){for(var b=0;b<a.length;b++){var h=a[b];if(!h.Hg||!h.Hg.length)return h}return null}function I(){lc||wb.va("No active scene available");return lc}function P(a,b,h){if(!p(a,b,h))return null;h=a.b4w_shadow_settings;var c={};h.csm_resolution>tb.Ic?
(c.csm_resolution=tb.Ic,mb.error("Shadow map texture has unsupported size. Changed to "+tb.Ic+".")):c.csm_resolution=h.csm_resolution;Pa.shadow_blur_samples=Pa.shadow_blur_samples?Pa.shadow_blur_samples:h.blur_samples;c.dU=h.soft_shadows;a=Sa.xv(b,Pa.ssao&&a.b4w_enable_ssao);c.self_shadow_polygon_offset=h.self_shadow_polygon_offset;c.self_shadow_normal_offset=h.self_shadow_normal_offset;c.enable_csm=h.b4w_enable_csm&&1==a.length;h.b4w_enable_csm&&1<h.csm_num&&1<a.length&&mb.warn("Disabling Cascaded Shadow Maps because of multiple shadow casting lamps.");
c.li=[];c.AI=[];c.br=[];c.ar=[];for(b=0;b<a.length;b++)c.li.push(a[b].lc.type),c.AI.push(a[b].lc.En),c.br.push(a[b].lc.br),c.ar.push(a[b].lc.ar),"SPOT"!=c.li[b]&&"POINT"!=c.li[b]||!c.enable_csm||(mb.warn("Generating shadows for SPOT or POINT light. Disabling Cascaded Shadow Maps"),c.enable_csm=!1);c.enable_csm?(c.csm_num=h.csm_num,c.csm_first_cascade_border=h.csm_first_cascade_border,c.first_cascade_blur_radius=h.first_cascade_blur_radius,c.csm_last_cascade_border=h.csm_last_cascade_border,c.last_cascade_blur_radius=
h.last_cascade_blur_radius,c.fade_last_cascade=h.fade_last_cascade,c.blend_between_cascades=h.blend_between_cascades):(c.csm_num=1,c.csm_first_cascade_border=h.csm_first_cascade_border,c.first_cascade_blur_radius=h.first_cascade_blur_radius,c.csm_last_cascade_border=h.csm_last_cascade_border,c.last_cascade_blur_radius=h.last_cascade_blur_radius,c.fade_last_cascade=!1,c.blend_between_cascades=!1);return c}function p(a,b,h){if(0!=b.length&&Pa.shadows)switch(a.b4w_render_shadows){case "OFF":return!1;
case "ON":return!0}else return!1;var c=!1,d=!1;a=Pa.ssao&&a.b4w_enable_ssao;if(0==b.length&&!a)return!1;for(b=0;b<h.length;b++){var G=h[b];G.b4w_shadow_cast&&(c=!0);G.b4w_shadow_receive&&(d=!0);if((a||c)&&d)return!0}return!1}function da(a){for(var b=0;b<a.length;b++)if("SUN"==a[b].lc.type)return!0;return!1}function H(a){if(!Pa.shore_smoothing)return!1;a=ab(a);for(var b=0;b<a.length;b++){var h=a[b];if(h.Sa.fj&&h.Sa.shore_smoothing)return!0}return!1}function t(a){for(var b=0;b<a.length;b++)for(var h=
a[b].particle_systems,c=0;c<h.length;c++)if(Sa.uE(a[b].rb,h[c].settings))return!0;return!1}function d(a){for(var b=ab(a),h=[],c=0;c<b.length;c++){var d=b[c];if(d.Sa.fj){for(var G={},g=0;g<a.length;g++)for(var k=a[g],l=k.rb.Sc,e=0;e<l.length;e++)l[e]==d&&(G.yj=k.location[2]);G.ue=new Float32Array(4);G.ue.set(d.Sa.Rm);G.ue[3]=d.Sa.hv;d.Sa.is_dynamic?(G.xr=!0,G.waves_height=d.Sa.waves_height,G.waves_length=d.Sa.waves_length,G.dst_noise_scale0=d.Sa.dst_noise_scale0,G.dst_noise_scale1=d.Sa.dst_noise_scale1,
G.dst_noise_freq0=d.Sa.dst_noise_freq0,G.dst_noise_freq1=d.Sa.dst_noise_freq1,G.dir_min_shore_fac=d.Sa.dir_min_shore_fac,G.dir_freq=d.Sa.dir_freq,G.dir_noise_scale=d.Sa.dir_noise_scale,G.dir_noise_freq=d.Sa.dir_noise_freq,G.dir_min_noise_fac=d.Sa.dir_min_noise_fac,G.dst_min_fac=d.Sa.dst_min_fac,G.waves_hor_fac=d.Sa.waves_hor_fac):(G.xr=!1,G.waves_height=0,G.waves_length=0);G.Ng=d.Sa.Xu;G.aN=d.Sa.Nj;G.$M=d.Sa.Mj;G.bN=new Float32Array([.3,.7]);G.Sl=null;d=d.hh;for(g=0;g<d.length;g++)k=d[g].texture,
!0===k.b4w_shore_dist_map&&"FILE"==k.image.source&&(G.Sl=k.image,G.aC=k.image.size[0],G.VA=k.b4w_max_shore_dist,k=k.b4w_shore_boundings,G.Dp=[(k[0]+k[1])/2,(k[2]+k[3])/2],G.Ep=[k[0]-k[1],k[2]-k[3]]);h.push(G)}}if(0<h.length){G=h[0];if(!G.xr)for(c=0;c<h.length;c++)h[c].xr&&(G=h[c]);return G}return null}function la(a){function b(a,c){if(a){a=a.nodes;for(var d=0;d<a.length;d++){var G=a[d];"GROUP"==G.type&&G.node_group&&b(G.node_group.node_tree,c);"GROUP"==G.type&&"B4W_REFRACTION"==G.node_tree_name&&
(h.refractions=!0);"BSDF_TRANSPARENT"==G.type&&(G.b4w_use_alpha?c.Pb="ALPHA_SORT":h.refractions=!0);"BSDF_PRINCIPLED"==G.type&&(h.refractions=!0)}}}var h={refractions:!1};a=ab(a);for(var c=0;c<a.length;c++){var d=a[c];d.gn&&(h.refractions=!0);d.ne&&b(d.ne,d)}return h}function na(a,b,h){if(Pa.reflections)switch(a.b4w_render_reflections){case "OFF":return!1}else return!1;a=[];for(var c=[],d=!1,G=!1,g=!1,k=0;k<b.length;k++){var l=b[k];l.ka.Hd&&"CUBE"==l.ka.Nh&&c.push(l);l.ka.Hd&&"PBR"==l.ka.Nh&&(G=!0);
if(l.An.length){for(var e=null,p=0;p<a.length;p++)if(a[p]==l){e=p;break}null==e&&a.push(l)}}for(k=0;k<h.length;k++){b=h[k];b.b4w_reflexible&&(d=!0);a:if(b.b4w_reflexible){b=b.rb.Sc;for(l=0;l<b.length;l++)if(e=b[l].Pb,"OPAQUE"!=e&&"CLIP"!=e&&"ALPHA_ANTIALIASING"!=e){b=!0;break a}b=!1}else b=void 0;b&&(g=!0)}return{$w:a,Zw:c,Tj:[],Ez:[],oj:[],Rw:[],tA:d,OQ:G,Ov:g}}function pa(a,b){a=a.b4w_sky_settings;var h={};h.HB=a.render_sky||a.procedural_skydome;h.procedural_skydome=a.procedural_skydome;h.use_as_environment_lighting=
a.use_as_environment_lighting;h.Ul=a.color;h.rayleigh_brightness=a.rayleigh_brightness;h.mie_brightness=a.mie_brightness;h.spot_brightness=a.spot_brightness;h.scatter_strength=a.scatter_strength;h.rayleigh_strength=a.rayleigh_strength;h.mie_strength=a.mie_strength;h.rayleigh_collection_power=a.rayleigh_collection_power;h.mie_collection_power=a.mie_collection_power;h.mie_distribution=a.mie_distribution;h.Pe=a.reflexible;h.ze=a.reflexible_only;!b&&a.procedural_skydome&&mb.warn("There is no sun on the scene. Procedural sky will use a default sun position.");
return h}function Aa(a){var b={};a=a.b4w_ssao_settings;b.radius_increase=a.radius_increase;b.RQ=a.hemisphere;b.KM=a.blur_depth;b.blur_discard_value=a.blur_discard_value;b.influence=a.influence;b.dist_factor=a.dist_factor;b.hT=a.samples;return b}function w(a){if(!Pa.bloom||!a.b4w_enable_bloom)return null;var b={};a=a.b4w_bloom_settings;b.blur=a.blur;b.edge_lum=a.edge_lum;b.key=a.key;b.adaptive=a.adaptive;b.average_luminance=a.average_luminance;return b}function N(a){var b={};a=a.b4w_motion_blur_settings;
b.mb_decay_threshold=a.motion_blur_decay_threshold;b.mb_factor=a.motion_blur_factor;return b}function oa(a){var b={};a=a.b4w_color_correction_settings;b.brightness=a.brightness;b.contrast=a.contrast;b.exposure=a.exposure;b.saturation=a.saturation;return b}function Y(a){var b={};a=a.b4w_god_rays_settings;b.intensity=a.intensity;b.Al=a.max_ray_length;b.Vl=a.steps_per_pass;return b}function Q(a){var b={};b.ti=a.b4w_outline_color;b.un=a.b4w_outline_factor;return b}function Ha(a){var b={};a=a.b4w_glow_settings;
b.small_glow_mask_coeff=a.small_glow_mask_coeff;b.large_glow_mask_coeff=a.large_glow_mask_coeff;b.small_glow_mask_width=a.small_glow_mask_width;b.large_glow_mask_width=a.large_glow_mask_width;return b}function ia(a,b){var h=a.light_settings,c={};c.Rg=h.environment_energy;c.rt=h.use_environment_light;c.Pz=h.environment_color;c.we=a.horizon_color.slice(0);c.Fe=a.zenith_color.slice(0);c.Ln=a.use_sky_paper;c.Kn=a.use_sky_blend;c.Mn=a.use_sky_real;c.vx=null;c.Cn=null;c.Zu=null;c.Me="";b.HB&&a.use_nodes&&
a.node_tree&&(h=Xb.OE(a.node_tree,a.uuid,"MAIN",null,[]),c.Me=h.id);h=!0;if(c.rt&&"SKY_TEXTURE"==c.Pz&&(!b.procedural_skydome||!b.use_as_environment_lighting)){b=null;for(var d=0;d<a.texture_slots.length;d++)if(a.texture_slots[d].texture.b4w_use_as_environment_lighting&&!a.texture_slots[d].texture.b4w_use_as_skydome){b=a.texture_slots[d];break}b?c.Zu=b:h=!1}for(d=0;d<a.texture_slots.length;d++)if(a.texture_slots[d].texture.b4w_use_as_skydome){a=a.texture_slots[d];a.texture.image&&(h=!0,c.vx=a,b=Math.min(tb.Xg,
Jb.lz(a.texture.image.size[0]/3)),c.Cn={SI:b,cE:a.blend_factor,jG:a.horizon_factor,LJ:a.zenith_up_factor,KJ:a.zenith_down_factor,color:a.color,mb:a.default_value,invert:a.invert,sJ:a.use_rgb_to_intensity,dE:a.blend_type,nJ:a.use_map_blend,oJ:a.use_map_horizon,qJ:a.use_map_zenith_up,pJ:a.use_map_zenith_down});break}c.rt=c.rt?h:!1;return c}function Ma(a){var b=a.fog_settings,h={};h.yV=b.use_fog;h.intensity=b.intensity;h.depth=b.depth;h.start=b.start;h.height=b.height;h.qP=b.falloff;h.color=b.use_custom_color?
b.color.slice(0):a.horizon_color.slice(0);a=h.color;h.ue=new Float32Array([a[0],a[1],a[2],1/h.depth]);h.kg=new Float32Array([h.intensity,h.depth,h.start,h.height]);return h}function Ea(a,b){if(!Pa.ld)return!1;switch(a.b4w_render_dynamic_grass){case "OFF":return!1;case "ON":return!0}for(var h=a=!1,c=0;c<b.length;c++){for(var d=b[c],G=d.rb.Sc,g=0;g<G.length;g++)G[g].uj.Xo&&(a=!0);d=d.particle_systems;for(g=0;g<d.length;g++)G=d[g].settings,"HAIR"==G.type&&G.b4w_dynamic_grass&&(h=!0);if(a&&h)return!0}return!1}
function X(a,b){if(cd.outlining_overview_mode)return!0;if(Pa.enable_selectable)switch(a.b4w_enable_object_selection){case "OFF":return!1;case "ON":return!0;case "AUTO":for(a=0;a<b.length;a++)if(b[a].rb.ka.Ql)return!0;return!1}else return!1}function Ga(a,b){if(cd.outlining_overview_mode)return!0;if(Pa.enable_outlining)switch(a.b4w_enable_outlining){case "OFF":return!1;case "ON":return!0;case "AUTO":for(a=0;a<b.length;a++)if(b[a].rb.ka.Ed)return!0;return!1}else return!1}function Fa(a,b){if(Pa.glow_materials)switch(a.b4w_enable_glow_materials){case "OFF":return!1;
case "ON":return!0;case "AUTO":for(a=0;a<b.length;a++)for(var h=b[a].rb.Sc,c=0;c<h.length;c++)if(Xb.tE(h[c]))return!0;return!1}else return!1}function wa(a,b){if(Pa.refractions)switch(a.b4w_render_refractions){case "OFF":return!1;case "ON":return!0;case "AUTO":return b.refractions}else return!1}function La(a){for(var b=0;b<a.length;b++)for(var h=a[b].rb.Sc,c=0;c<h.length;c++){var d=h[c];if(d.vk&&"OPAQUE"!=d.Pb&&"CLIP"!=d.Pb&&"ALPHA_ANTIALIASING"!=d.Pb)return!0}return!1}function ja(a,b){switch(a.b4w_enable_anchors_visibility){case "OFF":return!1;
case "ON":return!0;case "AUTO":for(a=0;a<b.length;a++){var h=b[a].rb;if(h.anchor&&h.anchor.zo)return!0}return!1}}function ta(a,b){a=fa(a,[Z.ic,Z.Md,Z.He]);for(var h=0;h<a.length;h++)a[h].lu=b}function ka(a,b,h,c,d,G){for(var g=b.ka,k=Sa.kb(b,d),l=k.Ia,e=0;e<l.length;e++){var p=l[e];if(!(p.sf||p.ze||"MAIN"!=p.type&&"NODES_GLOW"!=p.type&&"PARTICLES"!=p.type&&"LINE"!=p.type)&&("OPAQUE"==p.fc&&"OPAQUE"==c||"BLEND"==p.fc&&"BLEND"==c||"XRAY"==p.fc&&"XRAY"==c||"NODES_GLOW"==p.type&&"GLOW"==c)){if(!G&&(S(p,
a,b,h,c,d),!Ia.md(p)))if("DEBUG"===Object(ha.d)())Ia.$t(p,"error.glslv","error.glslf"),Ia.md(p);else continue;var t=Z.cj(p,g,k.Lg[e]);Z.zd(a,t);ya(h,a,p,!1);xa(p)}}}function qa(a){a.yl.st&&Ia.dc(a,"USE_LOD_SMOOTHING",1)}function S(a,b,h,c,d,G){var g=h.ka,k=G.sa,l=Sa.kb(h,G),e="NO_SHADOWS";h=fa(G,[Z.ee]);if(h.length&&a.Be){switch(d){case "OPAQUE":e="SHADOW_MAPPING_OPAQUE";break;case "BLEND":case "XRAY":e="SHADOW_MAPPING_BLEND";break;case "COLOR_ID":case "REFLECT":case "GLOW":e="NO_SHADOWS";break;case "SHADOW":e=
"SHADOW_MASK_GENERATION";break;default:wb.va("Wrong subscene type")}for(var p=0;p<h.length;p++)Ia.VD(a,G.sa.Id)}p="NO_SOFT_SHADOWS";if(k.Id&&k.Id.dU)switch(Pa.shadow_blur_samples){case "16x":p="POISSON_X_16";break;case "8x":p="POISSON_X_8";break;case "4x":p="POISSON_X_4"}h=a.Mb;Oa.Wa(h,"SHADOW_USAGE",e);Oa.Wa(h,"POISSON_DISK_NUM",p);qa(a);a.ld&&(p=sa.xc(c,Z.Bj))&&ra(a,p,g);va(h,b.qa);if("SHADOW"!=a.type&&"COLOR_ID"!=d||a.bc){d=b.op;Oa.Wa(h,"NUM_LIGHTS",d);Oa.Wa(h,"NUM_LFACTORS",0==d%2?d/2:Math.floor(d/
2)+1);Oa.Wa(h,"REFLECTION_PASS","REFL_PASS_NONE");Oa.Wa(h,"SSAO_ONLY",0);if(d=k.wd)Oa.Wa(h,"WATER_EFFECTS",1),Oa.Wa(h,"WAVES_HEIGHT",Oa.Ga(d.waves_height)),Oa.Wa(h,"WAVES_LENGTH",Oa.Ga(d.waves_length)),Oa.Wa(h,"WATER_LEVEL",Oa.Ga(d.yj));if(b.Ng&&a.Ng){Oa.Wa(h,"CAUSTICS",1);if(p=k.Id){g=p.li;for(p=e=0;p<g.length;p++)"SUN"==g[p]&&(e=p);Oa.Wa(h,"SUN_NUM",e)}Oa.Wa(h,"CAUST_SCALE",Oa.Ga(b.Nj));Oa.Wa(h,"CAUST_SPEED",Oa.Ga(b.pu,2));Oa.Wa(h,"CAUST_BRIGHT",Oa.Ga(b.Mj))}p=l.Tj;g=l.oj;l=sa.xc(c,Z.Ve);b=sa.xc(c,
Z.Tk);e=sa.xc(c,Z.ao);if(-1!==a.vg.indexOf("u_mirrormap"))Oa.Wa(h,"REFLECTION_TYPE","REFL_MIRRORMAP");else if(a.Hd&&b&&e&&!p&&!g.length)Ia.ai(a,b.qa.wc,"u_cube_irradiance"),Ia.ai(a,e.qa.wc,"u_cube_r_convolution"),Oa.Wa(h,"REFLECTION_TYPE","REFL_PBR_STANDARD");else if(!a.Hd||p||g.length||Pa.quality==Ka.P_LOW)if(a.Hd&&p)b=p.qa.wc,k.pg.tA||(p.Sm=!0,l&&(b=l.qa.wc)),Ia.ai(a,b,"u_cube_reflection"),Oa.Wa(h,"REFLECTION_TYPE","REFL_CUBE");else if(a.Hd&&g)for(p=0;p<g.length;p++)b=g[p].qa.wc,Ia.ai(a,b,"u_plane_reflection"),
Oa.Wa(h,"REFLECTION_TYPE","REFL_PLANE");else Oa.Wa(h,"REFLECTION_TYPE","REFL_NONE");else l?(Ia.ai(a,l.qa.wc,"u_sky_reflection"),Oa.Wa(h,"REFLECTION_TYPE","REFL_PBR_SIMPLE")):Oa.Wa(h,"REFLECTION_TYPE","REFL_NONE");l?a.Su?(b=l.qa.wc,Ia.ai(a,b,"u_sky")):l.procedural_skydome&&(a.eg=l.eg,Oa.Wa(h,"PROCEDURAL_FOG",1)):Oa.Wa(h,"PROCEDURAL_FOG",0);b=k.Aj;b.rt&&(Oa.Wa(h,"USE_ENVIRONMENT_LIGHT",1),"SKY_TEXTURE"==b.Pz?(b.Zu?(l=b.Zu.texture,b=Jb.hf(b.Zu),Ia.ai(a,b,"u_sky_texture",l.name)):l&&(b=l.qa.wc,Ia.ai(a,
b,"u_sky_texture")),Oa.Wa(h,"SKY_TEXTURE",1)):"SKY_COLOR"==b.Pz&&Oa.Wa(h,"SKY_COLOR",1));b=k.Cy;b.yV&&(Oa.Wa(h,"USE_FOG",1),Oa.Wa(h,"FOG_TYPE",b.qP));a.sj&&a.Ob?(Pa.Ku&&Oa.Wa(h,"USE_REFRACTION_CORRECTION",1),"MAIN"==a.type&&a.bc||"NODES_GLOW"==a.type?(Oa.Wa(h,"REFRACTIVE",1),k.refractions?Oa.Wa(h,"USE_REFRACTION",1):Oa.Wa(h,"USE_REFRACTION",0)):k.refractions?Oa.Wa(h,"REFRACTIVE",1):Oa.Wa(h,"REFRACTIVE",0),(k.ZG.refractions||k.refractions)&&Oa.Wa(h,"HAS_REFRACT_TEXTURE",1)):(Oa.Wa(h,"REFRACTIVE",0),
Oa.Wa(h,"USE_REFRACTION",0),Oa.Wa(h,"USE_REFRACTION_CORRECTION",0));a.Bg&&(Pa.shore_smoothing&&a.Un&&sa.xc(c,Z.$C)?Oa.Wa(h,"SHORE_SMOOTHING",1):Oa.Wa(h,"SHORE_SMOOTHING",0),a.water_dynamic&&d&&d.waves_height?Oa.Wa(h,"DYNAMIC",1):Oa.Wa(h,"DYNAMIC",0));"PARTICLES"==a.type&&Oa.Wa(h,"COLOR_RAMP_LENGTH",a.tb.xu);if(!a.yh)for(a=a.Ua,c=0;c<a.length;c++)if(b=a[c],"SCENE"==b.source)for(k=0;k<ob.length;k++)for(h=ob[k],d=ob[k].Hg,l=0;l<d.length;l++)d[l]==b&&Ya.ra(Ob,h,G,null)}}function va(a,b){b.type==G.Xe||
b.type==G.Zh||b.type==G.Cj?Oa.Wa(a,"CAMERA_TYPE","CAM_TYPE_ORTHO"):Oa.Wa(a,"CAMERA_TYPE","CAM_TYPE_PERSP")}function xa(a){8<a.Ua.length&&mb.warn(a.type,"too many textures used - "+a.Ua.length+' (max 8), materials "'+a.Hc.join(", ")+'"')}function ra(a,b,h){a.Ud=b.Ud;var c=b.Ud[0],d=b.Ud[1],g=b.Ud[2];h=h.gb;h=Math.max(h.max_x-h.min_x,h.max_y-h.min_y);g=0==g?h:Math.max(g,h);b.Ud[2]=g;b=b.qa;G.bI(b,g/2,g/2,-d,-c);G.set_projection(b,!1);c=a.bk||0;c=0==c?h:Math.max(c,h);a.bk=c}function ma(a,b,h,c,d,G){for(var g=
b.ka,k=Sa.kb(b,d),l=k.Ia,e=0;e<l.length;e++){var p=l[e];if(("MAIN"==p.type||"PARTICLES"==p.type||"LINE"==p.type)&&"REFLECT"==p.fc&&p.Ob==c){if(a.type==Z.de||a.type==Z.Ue){var t;a:{var Ka=d.sa.pg.oj;for(t=0;t<Ka.length;t++)for(var m=0;m<Ka[t].length;m++)if(Ka[t][m]==a)break a;Ka=d.sa.pg.Rw;for(t=0;t<Ka.length;t++)for(m=0;m<Ka[t].length;m++)if(Ka[t][m]==a)break a;t=null}if(t==g.Gd)continue}else if(t=Qb(d,a),t==g.Qd)continue;if(!G&&(S(p,a,b,h,"REFLECT",d),t=p.Mb,Oa.Wa(t,"WATER_EFFECTS",0),a.type==Z.de||
a.type==Z.Ue?Oa.Wa(t,"REFLECTION_PASS","REFL_PASS_PLANE"):Oa.Wa(t,"REFLECTION_PASS","REFL_PASS_CUBE"),Oa.Wa(t,"TEXTURE_NORM",0),!Ia.md(p)))if("DEBUG"===Object(ha.d)())Ia.$t(p,"error.glslv","error.glslf"),Ia.md(p);else continue;Z.uP(a,p,g)||(t=Z.cj(p,g,k.Lg[e]),Z.zd(a,t),ya(h,a,p,!1),xa(p))}}}function za(a){Ca(a);var b=Na(a,Z.ic),h=!0,c=a.sa.Id;Ya.Na(a.sa.Ya,function(d,G){G.type===Z.ee&&(ua(G,a,b.qa,c,h),h=!1)})}function Da(a){Ya.Na(a.sa.Ya,function(a,b){b.type===Z.$n&&(b.wr=1)})}function ua(a,b,h,
c,d){if(0!=a.vb.length){var g=a.qa;K.a(h.na,g.na);K.a(h.Ag,g.Ts);if("SUN"===c.li[a.gh]||"HEMI"===c.li[a.gh]){var k=h.na,l=db;n.P(l);for(var e=0;e<a.vb.length;e++)for(var p=a.vb[e].jb,t=0;t<p.length;t++){var Ka=p[t].fb,m=p[t].$g;if(Ka.ld){var f=K.g(k,Hc),B=ca.transformQuat(A.c,f,oc);f=-B[0];B=B[1];var u=K.j(k,oc);f=u[0]-Ka.bk*(1+f)/2;B=u[1]-Ka.bk*(1-B)/2;m=n.h(Ka.Xb.Bf,m.na,kb);m=m.max_z-m.min_z;u=kb;u.min_x=f;u.min_y=B;u.min_z=Ka.Ud[0]-m;u.max_x=f+Ka.bk;u.max_y=B+Ka.bk;u.max_z=Ka.Ud[1]+m}else u=m.bi;
0==e&&0==t?n.o(u,l):n.D(l,u)}k=n.F(l,tc);A._28(k,g.Kc,k);if(c.enable_csm){b=ca.copy(h.Ti[a.lr],Cb);c=y.invert(h.Kc,ic);A._28(b,c,b);A._28(b,g.Kc,b);a=h.mr[a.lr];if(d)for(Fb=0,gb=-Infinity,d=2;d<k.length;d+=3)Fb=Math.min(Fb,k[d]),gb=Math.max(gb,k[d]);d=db;d.max_x=b[0]+a;d.max_y=b[1]+a;d.max_z=gb;d.min_x=b[0]-a;d.min_y=b[1]-a;d.min_z=Fb}else{h=d=db;c=Kb;c.set(k);k=mc/9;l=y.identity(ic);y.rotate(l,k,A.c,l);p=e=-1;for(t=0;10>t;t++){Ka=n.a(c,0,c.length,kb);m=(Ka.max_x-Ka.min_x)*(Ka.max_y-Ka.min_y);if(-1==
e||.1<e-m)e=m,p=t,n.o(Ka,h);A._28(c,l,c)}h=p*k;0<h&&(c=y.identity(ic),y.rotate(c,h,A.c,c),y.multiply(c,g.Kc,g.Kc),K.d(g.Kc,g.Ag));h=d.max_x-d.min_x;c=d.max_y-d.min_y;h&&c&&(k=Math.abs(h-c)/2,2<h/c?(d.max_y+=k,d.min_y-=k):2<c/h&&(d.max_x+=k,d.min_x-=k));d.max_x+=.005;d.max_y+=.005;d.max_z+=.005;d.min_x-=.005;d.min_y-=.005;d.min_z-=.005;jc(a,b.sa.Ya)}G.BT(g,d.min_x,d.max_x,d.min_y,d.max_y,-d.max_z,-d.min_z);G.set_projection(g,!1)}else"SPOT"!==c.li[a.gh]&&"POINT"!==c.li[a.gh]||G.set_projection(g,!1)}}
function h(a,b,h,c,d){for(var G=b.ka,g=Sa.kb(b,c),k=g.Ia,l=0;l<k.length;l++){var e=k[l];if("COLOR_ID"==e.type&&(a.type==Z.zf&&"COLOR_ID"==e.fc||a.type==Z.Vh&&"COLOR_ID_XRAY"==e.fc)){if(!d&&(S(e,a,b,h,"COLOR_ID",c),Ia.dc(e,"USE_OUTLINE",0),!Ia.md(e)))continue;e=Z.cj(e,G,g.Lg[l]);Z.zd(a,e)}}}function ya(a,b,h,c){var d=Ya.pk(a,b);Ya.Lk(a,d,function(a,b,d){if(d.active){switch(d.from){case "COLOR":case "CUBEMAP":var G=b.qa.wc;break;case "DEPTH":G=b.qa.gg;break;case "SCREEN":G=null;break;case Z.xd:return;
default:wb.va("Wrong slink")}switch(d.to){case "COLOR":case "CUBEMAP":case "DEPTH":case "NONE":case "SCREEN":case "OFFSCREEN":case "RESOLVE":case "COPY":case "u_cube_reflection":case "u_plane_reflection":break;default:if(!G)if(c)break;else wb.va("Connection of SCREEN is forbidden");G.Tf&&wb.va("Batch texture can't use renderbuffer");Oa.wE(h.ec,d.to)&&(c?Ia.IB(h,G,d.to):Ia.ai(h,G,d.to))}}});for(a=0;a<b.Nb.length;a++){d=b.Nb[a];var G=b.Th[a];switch(d.to){case "COLOR":case "CUBEMAP":case "DEPTH":case "NONE":case "SCREEN":case "OFFSCREEN":case "RESOLVE":case "COPY":break;
default:G.Tf&&wb.va("Batch texture can't use renderbuffer"),Oa.wE(h.ec,d.to)&&(c?Ia.IB(h,G,d.to):Ia.ai(h,G,d.to))}}}function Ta(a,b){Va(a,b);for(var h=0;h<a.bf.length;h++)a.bf[h].parent==a&&Ta(a.bf[h],b)}function Va(a,b){a.ka.hide=b;if(Sa.is_lamp(a))for(b=0;b<a.Aa.length;b++)for(var h=a.Aa[b],c=fa(h.Bb,nd),d=0;d<c.length;d++){var G=c[d],g=a.ka,k=a.lc,l=h.es,e=k.In&&!g.hide?1:0;G.kn[4*l+3]=e;e=k.Nn&&!g.hide?1:0;G.jn[4*l+3]=e;G.wb=!0}}function Ca(a){var b=ub.tc(a,"LAMP",ub.DATA_ID_ALL);b=Sa.xv(b,Pa.ssao&&
a.b4w_enable_ssao);if(b.length)for(var h=0;h<b.length;h++){var c=b[h],d=c.ka,g=K.j(d.na,Cb);d=K.g(d.na,Hc);for(var k=0;k<c.Aa.length;k++){var l=c.Aa[k],e=l.ZB;if(l.Bb==a)for(l=0;l<e.length;l++)G.XB(e[l].qa,g,d)}}}function Wa(a){var b=Na(a,Z.Ve);b&&Ra(a,b)}function Ra(a,b){Ab.xn(b);nb.Xj(b);if(b.hp){b=fa(a,eb);for(var h=0;h<b.length;h++)for(var c=b[h].vb,d=0;d<c.length;d++)for(var G=c[d].jb,g=0;g<G.length;g++){var k=G[g];k.Ec&&(k=k.fb,Ia.eN(k)&&nb.OU(k))}}if(b=Na(a,Z.Tk))Ab.xn(b),nb.Xj(b);if(b=Na(a,
Z.ao))Ab.xn(b),nb.Xj(b);if(a=Na(a,Z.Gy))Ab.xn(a),nb.Xj(a)}function V(a){var b=a.qa;nb.VS(b.Hf,b.wc,b.gg,b.width,b.height);a=a.vb;for(b=0;b<a.length;b++)for(var h=a[b].jb,c=0;c<h.length;c++){var d=h[c].fb;d&&Ia.HE(d)}}function ab(a){for(var b=[],h=0;h<a.length;h++)for(var c=a[h].rb.Sc,d=0;d<c.length;d++){var G=c[d];-1==b.indexOf(G)&&b.push(G)}return b}function D(a,b,h,c){sb.yG()&&(b*=window.devicePixelRatio,h*=window.devicePixelRatio);var d=B();d&&(d=d.sa,b*=d.yp,h*=d.yp);b*=a.zk;h*=a.Ak;c[0]=Math.floor(b);
c[1]=Math.floor(h);return c}function Ua(a,b,h){a=D(a,b,h,fc);return a[0]>tb.Ic||a[1]>tb.Ic?(mb.warn("Texture size exceeds platform limits, downscaling"),Math.min(tb.Ic/a[0],tb.Ic/a[0])):1}function Qa(a,b,h){for(var c=a.sa,d=Sa.kb(a.Ii,a).Qa,g=0!=h?b/h:1,k=0;k<d.length;k++){var l=d[k];G.pT(l,g);G.set_projection(l,!1);c.Id&&G.HC(l,c.Id)}if(c.Id){c.Cw=!0;c=fa(a,[Z.Gg]);for(k=0;k<c.length;k++)c[k].wb=!0;c=fa(a,[Z.Md]);for(k=0;k<c.length;k++)c[k].wb=!0}Ba(a,b,h)}function Ba(a,b,h){var c=a.sa.Ya,d=Infinity;
sa.Xp(c,function(a){a.Hn&&(d=Math.min(d,Ua(a,b,h)))});sa.Xp(c,function(G,g,k,l){if(G.Hn){if(l&&l.type==Z.Uk||k.Gc&&!G.Zt){var e=b*G.zk;var p=h*G.Ak}else p=D(G,b,h,fc),e=p[0]*d,p=p[1]*d;if(g)for(g=0;g<k.Nb.length;g++)k.Nb[g]==G&&Jb.resize(G.yb,e,p);else switch(Jb.Yo(G.yb)&&(Jb.resize(G.yb,e,p),G.yb.Ee&&(l.dw=G.yb.eH)),G=k.qa,G.width=e,G.height=p,k.type){case Z.wq:ib(a,{dof_power:k.qa.dof_power});break;case Z.xq:fb(a,{small_glow_mask_width:k.small_glow_mask_width,large_glow_mask_width:k.large_glow_mask_width});
break;case Z.sq:jb(a,{blur:k.lo});break;case Z.wD:G.width=G.wc.width;G.height=G.wc.height;break;case Z.$n:k=sa.Bd(c,k,Z.Lc);G=sa.Bd(c,k,Z.Lc);p=sa.Bd(c,G,Z.Lc);g=sa.Bd(c,p,Z.Lc);sa.Ae(k,1/e,1/e);sa.Ae(G,1/e,1/e);sa.Ae(p,1/e,1/e);sa.Ae(g,1/e,1/e);break;default:sa.Ae(k,1/e,1/p)}}})}function fa(a,b){for(var h=[],c=0;c<b.length;c++){var d=b[c];a.sa.Ya&&Ya.Na(a.sa.Ya,function(a,b){b.type==d&&h.push(b)})}return h}function Na(a,b){return sa.xc(a.sa.Ya,b)}function Xa(a){var b=B();b&&Ya.Na(b.sa.Ya,function(b,
h){(b=h.qa)&&b.type==G.Af&&(h.Sm=a)})}function ib(a,b){var h=fa(a,[Z.wq]);if(!h.length)return mb.error("DOF is not enabled on the scene. Check camera settings"),0;for(var c=0;c<h.length;c++){var d=h[c],G=b,g=a,k=d.dof_bokeh,l=k?fa(g,[Z.Hy]):[];g=g.sa.Ya;if("boolean"==typeof G.dof_on&&(d.qa.dof_on=G.dof_on,k))for(var e=0;e<l.length;e++)l[e].qa.dof_on=G.dof_on;if("number"==typeof G.dof_distance&&(d.qa.dof_distance=G.dof_distance,k))for(e=0;e<l.length;e++)l[e].qa.dof_distance=G.dof_distance;if("number"==
typeof G.dof_front_start&&(d.qa.dof_front_start=G.dof_front_start,k))for(e=0;e<l.length;e++)l[e].qa.dof_front_start=G.dof_front_start;if("number"==typeof G.dof_front_end&&(d.qa.dof_front_end=G.dof_front_end,k))for(e=0;e<l.length;e++)l[e].qa.dof_front_end=G.dof_front_end;if("number"==typeof G.dof_rear_start&&(d.qa.dof_rear_start=G.dof_rear_start,k))for(e=0;e<l.length;e++)l[e].qa.dof_rear_start=G.dof_rear_start;if("number"==typeof G.dof_rear_end&&(d.qa.dof_rear_end=G.dof_rear_end,k))for(e=0;e<l.length;e++)l[e].qa.dof_rear_end=
G.dof_rear_end;"number"==typeof G.dof_bokeh_intensity&&(d.qa.dof_bokeh_intensity=G.dof_bokeh_intensity,k&&(l=sa.uv(g,d,Z.Lc),l[0].qa.dof_bokeh_intensity=G.dof_bokeh_intensity,l[1].qa.dof_bokeh_intensity=G.dof_bokeh_intensity,l[0]=sa.Bd(g,l[0],Z.Lc),l[0].qa.dof_bokeh_intensity=G.dof_bokeh_intensity));if("number"==typeof G.dof_power)if(k){G=G.dof_power;d.qa.dof_power=G;G/=2;k=d.qa.width;e=d.qa.height;var p=[1/k,0],t=[1/k*.5,1/e*.866],Ka=[-1/k*.5,1/e*.866];l=sa.uv(g,d,Z.Lc);sa.Zd(l[0],G);sa.Ae(l[0],
Ka[0],Ka[1]);sa.Zd(l[1],G);sa.Ae(l[1],t[0],t[1]);l[0]=sa.Bd(g,l[0],Z.Lc);sa.Zd(l[0],G);sa.Ae(l[0],p[0],p[1]);d.qa.te&&(l[0]=sa.Bd(g,l[0],Z.Hy),l[0]=sa.Bd(g,l[0],Z.Lc),sa.Ae(l[0],1/k,1/e),l[0]=sa.Bd(g,l[0],Z.Lc),sa.Ae(l[0],1/k,1/e))}else d.qa.dof_power=G.dof_power,l=sa.Bd(g,d,Z.Lc),g=sa.Bd(g,l,Z.Lc),sa.Zd(l,d.qa.dof_power),sa.Ae(l,1/d.qa.width,1/d.qa.height),sa.Zd(g,d.qa.dof_power),sa.Ae(g,1/d.qa.width,1/d.qa.height)}}function jb(a,b){var h=fa(a,[Z.Jt]),c=fa(a,[Z.sq]);if(!h.length||!c.length)return mb.error("Bloom is not enabled on the scene"),
0;if("number"==typeof b.key)for(var d=0;d<h.length;d++)h[d].oo=b.key,h[d].wb=!0;if("number"==typeof b.edge_lum)for(d=0;d<h.length;d++)h[d].no=b.edge_lum,h[d].wb=!0;if("number"==typeof b.blur)for(d=0;d<c.length;d++){c[d].lo=b.blur;for(var G=a.sa.Ya,g=c[d].qa.width/.5,k=c[d].qa.height/.5,l=sa.uv(G,c[d],Z.Lc),e=0;e<l.length;++e){var p=l[e],t=sa.Bd(G,p,Z.Lc),Ka=g*p.mo,m=k*p.mo;sa.Zd(p,b.blur);sa.Ae(p,1/Ka,1/m);sa.Zd(t,b.blur);sa.Ae(t,1/Ka,1/m)}}if("number"==typeof b.average_luminance)for(d=0;d<h.length;d++)h[d].sm||
(h[d].average_luminance=b.average_luminance,h[d].wb=!0)}function fb(a,b){var h=fa(a,[Z.xq]);if(!h.length)return mb.error("Glow is not enabled on the scene"),null;for(var d=0;d<h.length;d++){for(var c=h[d],G=b,g=a.sa.Ya,k=sa.sQ(g,c),l=0;l<k.length;++l){var e=k[l];if(e.type==Z.Lc&&"GLOW_MASK_LARGE"==e.fc)var p=e;if(e.type==Z.Lc&&"GLOW_MASK_SMALL"==e.fc)var t=e}k=sa.Bd(g,p,Z.Lc);g=sa.Bd(g,t,Z.Lc);"number"==typeof G.small_glow_mask_coeff&&(c.small_glow_mask_coeff=G.small_glow_mask_coeff,c.wb=!0);"number"==
typeof G.large_glow_mask_coeff&&(c.large_glow_mask_coeff=G.large_glow_mask_coeff,c.wb=!0);"number"==typeof G.small_glow_mask_width&&(c.small_glow_mask_width=G.small_glow_mask_width,sa.Zd(t,G.small_glow_mask_width),sa.Ae(t,1/c.qa.width,1/c.qa.height),t.wb=!0,sa.Zd(g,G.small_glow_mask_width),sa.Ae(g,1/c.qa.width,1/c.qa.height),g.wb=!0);"number"==typeof G.large_glow_mask_width&&(c.large_glow_mask_width=G.large_glow_mask_width,sa.Zd(p,G.large_glow_mask_width),sa.Ae(p,1/c.qa.width,1/c.qa.height),p.wb=
!0,sa.Zd(k,G.large_glow_mask_width),sa.Ae(k,1/c.qa.width,1/c.qa.height),k.wb=!0)}}function rb(a,b,h){var c=a.sa,d=c.wd;if(!d.xr)return d.yj;var G=d.waves_height,g=d.waves_length,k=d.yj,l=ca.length(c.Di)||1;a=Na(a,Z.ic).time;a*=l;var e=fc;e[0]=20/g*(b-.25*a);e[1]=20/g*(h-.25*a);l=A.J(e);e[0]=17/g*(h+.1*a);e[1]=17/g*(b+.1*a);e=A.J(e);l=l+e-1;var p=d.dst_noise_scale0;e=d.dst_noise_scale1;var t=d.dst_noise_freq0,Ka=d.dst_noise_freq1,m=fc;m[0]=p*(b+t*a);m[1]=p*(h+t*a);p=A._55(m);m[0]=e*(h-Ka*a);m[1]=e*
(b-Ka*a);e=A._55(m);e=G*p*e;if(d.Sl)if(Ka=(b-d.Dp[0])/d.Ep[0],m=(d.Dp[1]+h)/d.Ep[1],Ka+=.5,m+=.5,1<Ka||0>Ka||1<m||0>m)b=e;else{c=A._7(c.$B,d.aC,Ka,m);p=d.dir_noise_scale;t=d.dir_noise_freq;var f=d.dir_min_noise_fac;Ka=d.dst_min_fac;m=Math.sqrt(c);b=G*Math.max(c,d.dir_min_shore_fac)*Math.sin(m/(g/d.VA/Math.PI)+d.dir_freq*a)*Math.max(A._55([p/g*(b+t*a),p/g*(h+t*a)]),f);h=Math.max(m,Ka);b=b*(1-h)+e*h;l*=c}else b=e;return k+(b+.05*l)}function cb(a,b,h){b.fn&&b.type==Z.Lc&&h.Ec!=b.Ec&&(b.Ec=h.Ec);h.Ec||
b.type!=Z.$n||(b.wr=0)}function Wb(a,b,h,d){var c=Ya.Kb(a,b);G.fx(c.qa,h,d);c.Iq=!0;Ya.cm(a,b,function(b,c,G){G.active&&G.from==h&&sa.kN(G)&&Pb(a,b,G.to,d)});Ya.Lk(a,b,function(b,c,G){G.active&&G.from==h&&G.from==G.to&&Wb(a,b,h,d)})}function Pb(a,b,h,d){a=Ya.Kb(a,b).vb;for(b=0;b<a.length;b++)for(var c=a[b].jb,G=0;G<c.length;G++)Ia.IB(c[G].fb,d,h)}function hb(a){for(var b=fa(a,[Z.Bj]),h=0;h<b.length;h++){var d=b[h],c=d.qa,g=a.Ii.ka,k=K.j(g.na,Cb),l=oc;l[0]=0;l[1]=0;l[2]=-d.Ud[2]/2;d=K.g(g.na,Hc);ca.transformQuat(l,
d,l);l[0]+=k[0];l[1]+=k[1];l[2]=0;E.identity(d);G.XB(c,l,d)}}function pb(a,b){Ya.Na(a,function(h,d){if(d.type==Z.Gi){d.Nb[0]&&d.Th[0]||wb.va("Wrong MOTION_BLUR subscene");var c=d.Nb[0],G=d.Th[0];d.Th[0]=d.qa.wc;Ya.cm(a,h,function(b,h,d){d.active&&Pb(a,b,d.to,G)});Wb(a,h,c.from,G);Pb(a,h,c.to,d.Th[0]);d.ww=Math.exp(-b/d.mb_factor)}})}function vb(a){return a.sa.Di}function Qb(a,b){if(!a.sa.pg)return null;for(var h=a.sa.pg.Tj,d=0;d<h.length;d++)if(h[d]==b)return d;a=a.sa.pg.Ez;for(d=0;d<a.length;d++)if(a[d]==
b)return d;return null}var wb=Object(M.a)(f),Ia=Object(U.a)(f),G=Object(z.a)(f),Ka=Object(e.a)(f),sb=Object(m.a)(f),Sb=Object(C.a)(f),Ya=Object(v.a)(f),Rc=Object(q.a)(f),Ic=Object(r.a)(f),Xb=Object(a.a)(f),ub=Object(T.a)(f),Jc=Object(k.a)(f),Sa=Object(c.a)(f),Ab=Object(l.a)(f),Ac=Object(b.a)(f),mb=Object(g.a)(f),nb=Object(ea.a)(f),sa=Object(u.a)(f),Db=Object(F.a)(f),Oa=Object(R.a)(f),Z=Object(O.a)(f),Jb=Object(k.a)(f),Yc=Ka.Lm,Pa=Ka.wa,tb=Ka.ei,cd=Ka.Ed,Lb=Ka.Pl,Bb=[Z.Bj,Z.ee,Z.ic,Z.Md,Z.lh,Z.He,
Z.de,Z.xd,Z.Ue,Z.Ge,Z.zf,Z.Vh,Z.Gg,Z.Xh,Z.Wh];W.kW=Bb;var nd=[Z.ic,Z.Md,Z.lh,Z.He,Z.de,Z.xd,Z.Zn,Z.It,Z.Ve,Z.Ue,Z.Ge,Z.Jt,Z.Gg,Z.ee,Z.zf,Z.Vh,Z.Xh],eb=[Z.ic,Z.Nt,Z.Md,Z.lh,Z.He,Z.de,Z.xd,Z.Ue,Z.Ge],Tb=[Z.ee,Z.ic,Z.Md,Z.lh,Z.He,Z.de,Z.xd,Z.Ue,Z.Ge,Z.zf,Z.Vh,Z.Gg,Z.Zn,Z.Xh,Z.Wh],lb=[Z.ic,Z.Md,Z.lh,Z.He,Z.de,Z.xd,Z.Ue,Z.Ge],kc=null,lc=null,ob=[],Ob=null,mc=Math.PI/2,fc=new Float32Array(2),Cb=new Float32Array(3),oc=new Float32Array(3),Hc=new Float32Array(4),ic=new Float32Array(16),tc=new Float32Array(24),
Kb=new Float32Array(24),db=n.w(),kb=n.w(),Fb=0,gb=-Infinity,zb=new Uint8Array(4);W.gX=function(){return{}};W.set_active=function(a){lc=a;Db.oT(a)};W.CH=function(a,b){var h=a.sa,d=sa.zz(h.Ya);if(a==b){Qa(a,sb.bG(),sb.aG());for(var c=0;c<d.length;c++)a.sa.rj.push(d[c])}else for(c=a.Hg[0],Qa(a,c.Bk,c.Bk),c=0;c<d.length;c++)b.sa.rj.push(d[c]);a=fa(a,Tb);for(b=0;b<a.length;b++)a[b].Di.set(h.Di);for(c=0;c<h.rj.length;c++)h.rj[c].type==Z.ee&&nb.Xj(h.rj[c])};W.Bh=B;W.cv=J;W.get_active=I;W.zb=function(){return lc?
!0:!1};W.ml=function(a){return a.Ii};W.Mr=function(){return ob};W.wv=function(){if(1==ob.length)return ob;for(var a=0;a<ob.length;a++){var b=ob[a].sa.Ya;Ya.Na(b,function(b,h){b=h.vb;for(var d=0;d<b.length;d++)for(var c=b[d].jb,G=0;G<c.length;G++){for(var g=c[G],k=g.fb.Ua,l=g.fb.bg,e=null,p=0;p<k.length;p++)if("SCENE"==k[p].source&&k[p].Ys==ob[a].name&&h.type!=Z.Jy){mb.error('Texture-scene loop detected. A scene is rendered to texture "'+l[p]+'" yet this texture belongs to the same scene.');e=g.fb;
break}if(e)for(k=e.Ua,e.Ua=[],e.vg=[],Ia.NU(e,null),Ia.md(e),Z.zd(h,g),p=0;p<k.length;p++)Jc.GE(k[p])}})}var h=[];for(a=0;a<ob.length;a++)if(b=ob[a],!b.Hg.length){b=Ya.pk(Ob,b);Ya.iP(Ob,b);b=Ya.Xl(Ob,b,Ya.Sk);b=Ya.uC(b);Ya.Na(b,function(a,b){h.push(b)});break}return h};W.kV=function(a,b,h,d){var c=Sa.kb(b.Ii,b);a={pg:na(a,h,d)};sa.iV(b.sa,c,a);W.CH(b,b);W.Xz(b,b.sa.Ya)};W.jM=function(a,b,h,c,g){a.Hg=a.Hg||[];a.qb=null;var k=a.sa,l=Sa.kb(a.Ii,a),e=a.Ii.ka;k.oq=[];var p=a.world;k.LA=h.length;k.Yl=da(h);
k.ux=pa(p,k.Yl);k.Aj=ia(p,k.ux);k.Cy=Ma(p);if(p=!a.Hg.length)a:{if("HMD"==Pa.stereo){if(l.Qa[0].type!=G.qd){mb.warn("Head-mounted display stereo is disabled for the non-perspective camera");Pa.stereo="NONE";p=!1;break a}if(!Ic.can_use_device(Ic.DEVICE_HMD)){mb.warn("Head-mounted display stereo is disabled for the non-WebVR and non-mobile devices");Pa.stereo="NONE";p=!1;break a}}p="HMD"==Pa.stereo}k.Pv=p;if(p=!a.Hg.length)l.Qa[0].type!=G.qd&&"ANAGLYPH"==Pa.stereo?(mb.warn("Anaglyph stereo is disabled for the non-perspective camera"),
Pa.stereo="NONE",p=!1):p="ANAGLYPH"==Pa.stereo;k.anaglyph_use=p;if(p=!a.Hg.length)l.Qa[0].type!=G.qd&&"SIDEBYSIDE"==Pa.stereo?(mb.warn("Side-by-side stereo is disabled for the non-perspective camera"),Pa.stereo="NONE",p=!1):p="SIDEBYSIDE"==Pa.stereo;k.Us=p;k.$L=!k.anaglyph_use&&!k.Us&&ja(a,g);k.pg=na(a,b,c);k.JM=w(a);k.XR=N(a);k.dN=oa(a);k.HQ=Y(a);k.oS=Q(a);k.$i=Ha(a);k.dof=Pa.dof&&(0<e.dof_distance||e.dof_object);k.motion_blur=Pa.motion_blur&&a.b4w_enable_motion_blur;k.compositing=Pa.compositing&&
a.b4w_enable_color_correction;k.antialiasing=Pa.antialiasing&&1==Pa.Jc&&"NONE"!=a.b4w_antialiasing_quality;k.ssao=Pa.ssao&&a.b4w_enable_ssao;k.god_rays=Pa.god_rays&&a.b4w_enable_god_rays&&k.Yl;k.nF=Pa.Ku;k.Av=a.b4w_glow_settings.render_glow_over_blend;k.qU=Aa(a);g=la(c);k.ZG=g;k.refractions=wa(a,g);k.Id=P(a,h,c);k.wd=d(c);k.Fi=La(c);k.cU=t(c);k.shore_smoothing=H(c);k.ld=Ea(a,c);k.yN=X(a,c);k.outline=Ga(a,c);k.glow_materials=Fa(a,c);k.NR=a.b4w_lod_smooth_type;k.RG=a.b4w_lod_hyst_interval;switch(Pa.reflection_quality?
Pa.reflection_quality:a.b4w_reflection_quality){case "LOW":k.Ui=Lb.eF;k.dh=Lb.yH;break;case "MEDIUM":k.Ui=Lb.PO;k.dh=Lb.ES;break;case "HIGH":k.Ui=Lb.NO;k.dh=Lb.DS;break;default:k.Ui=Lb.eF,k.dh=Lb.yH}sb.yG()?(mb.log("%cENABLE HIDPI MODE","color: #00a"),k.ID="AA_QUALITY_LOW",k.yp=1,Pa.Jc=1):1<Pa.Jc?(mb.log("%cENABLE MSAA RENDERING: "+Pa.Jc+"x","color: #00a"),k.yp=1):(k.ID="AA_QUALITY_"+a.b4w_antialiasing_quality,k.yp=Pa.quality===Ka.P_ULTRA?1.33:1);h=a.Hg.sort(function(a,b){return b.Bk-a.Bk});k.Ya=
sa.bO(k,l,e,h);k.rj=[];k.Cw=!1;k.gB=!1;k.hB=!1;k.Di=new Float32Array(3);ob.push(a);Ob||(Ob=Ya.create());Ya.Fa(Ob,a);for(k=0;k<b.length;k++)Sa.RB(b[k],!0,a);a=sb.get_container();sb.resize(a.clientWidth,a.clientHeight,!0)};W.kM=function(a,b,h){for(var d=0;d<b.length;d++){var c=b[d].sa;c&&c.ej&&(c.qq=h,a.sa.oq.push(b[d]))}};W.tv=function(a){return a.sa.Ya};W.Xz=function(a,b){Ya.Na(b,function(h,d){h=null;switch(d.type){case Z.Lc:h=Ia.Bu(d.As);break;case Z.Nt:h=Ia.hO(d);break;case Z.Vy:h=Ia.iO(d);break;
case Z.$C:h=Ia.PN();break;case Z.Zn:h=Ia.TN(d.Nw,d.Bg,d.Vl);break;case Z.It:h=Ia.UN();break;case Z.Gi:h=Ia.XN();break;case Z.Hy:h=Ia.JN(d.uu);break;case Z.wq:h=Ia.QN(d);var c=d.qa.dof_power;if(d.dof_bokeh){c/=2;var G=sa.uv(b,d,Z.Lc);sa.Zd(G[0],c);sa.Zd(G[1],c);G[0]=sa.Bd(b,G[0],Z.Lc);sa.Zd(G[0],c)}else{G=sa.Bd(b,d,Z.Lc);var g=sa.Bd(b,G,Z.Lc);sa.Zd(G,c);sa.Zd(g,c)}break;case Z.$n:h=Ia.YN();c=sa.Bd(b,d,Z.Lc);G=sa.Bd(b,c,Z.Lc);g=sa.Bd(b,G,Z.Lc);var k=sa.Bd(b,g,Z.Lc);sa.Zd(G,d.Qq);sa.Zd(c,d.Qq);sa.Zd(k,
d.Cr*d.un);sa.Zd(g,d.Cr*d.un);break;case Z.xq:h=Ia.SN();break;case Z.Iy:h=Ia.KN();break;case Z.VC:h=Ia.FN(d);break;case Z.Ty:case Z.Lt:case Z.Aq:case Z.Mt:h=Ia.fO(d.type);break;case Z.mh:h=Ia.jO(d.fc);break;case Z.Ve:h=Ia.NN(a,d);break;case Z.Tk:h=Ia.LN();break;case Z.ao:h=Ia.MN();break;case Z.Gy:h=Ia.IN();break;case Z.LUMINANCE:h=Ia.VN();break;case Z.YC:h=Ia.GN();break;case Z.Jt:h=Ia.WN(d.sm);break;case Z.sq:h=Ia.HN(d.iu);break;case Z.wD:h=Ia.Bu("NONE");break;case Z.PL:h=Ia.JO();break;case Z.Xn:h=
Ia.EN();break;case Z.zq:h=Ia.$N()}h&&(c=Z.cj(h,Sa.Hm("NONE")),Z.zd(d,c),ya(b,d,h,!1),xa(h))})};var pc=function(){var a=E.create(),b=ca.create();return function(h,d){var c=fa(d,nd),g=h.lc,k=h.ka,l=Sa.kb(h,d),e=K.j(k.na,b);k=K.g(k.na,a);for(var p=0;p<c.length;p++){var t=c[p];Cc(h,l,t);switch(g.type){case "SUN":t.Rx.set(k);t.Qx=g.dr;ca.copy(g.direction,t.Px);t.type==Z.Ve&&t.procedural_skydome&&(t.hp=g.hH,Ra(d,t));break;case "HEMI":case "POINT":case "SPOT":break;default:mb.error("Unknown light type: "+
g.type+'".')}t=t.vb;for(var Ka=0;Ka<t.length;Ka++)for(var m=t[Ka].jb,f=0;f<m.length;f++){var B=m[f].fb;B.hn&&Ia.DT(B,h)}}h=Na(d,Z.ic).qa;l=l.ZB;c=d.sa.Id;for(p=0;p<l.length;p++)t=l[p],G.XB(t.qa,e,k),ua(t,d,h,c,!0),jc(t,d.sa.Ya)}}();W.$p=pc;W.append_object=function(a,b,d){switch(b.type){case "MESH":case "LINE":case "WORLD":var c=a.sa.Ya,g=b.ka;!sa.xc(c,Z.ee)&&g.Be&&(g.Be=!1);g=fa(a,Bb);for(var k=0;k<g.length;k++){var l=g[k],e=b,p=c,t=a,Ka=d;switch(l.type){case Z.ic:ka(l,e,p,"OPAQUE",t,Ka);break;case Z.Md:ka(l,
e,p,"BLEND",t,Ka);break;case Z.lh:ka(l,e,p,"XRAY",t,Ka);break;case Z.He:ka(l,e,p,"GLOW",t,Ka);break;case Z.de:case Z.xd:ma(l,e,p,!1,t,Ka);break;case Z.Ue:case Z.Ge:ma(l,e,p,!0,t,Ka);break;case Z.Gg:for(var m=Sa.kb(e,t),f=m.Ia,B=0;B<f.length;B++){var u=f[B];if("SHADOW"==u.type&&"RECEIVE"==u.fc&&u.Be){if(!Ka&&(S(u,l,e,p,"SHADOW",t),!Ia.md(u)))continue;var q=Z.cj(u,e.ka,m.Lg[B]);Z.zd(l,q);ya(p,l,u,!1);xa(u)}}break;case Z.ee:m=!1;f=e.ka;e=Sa.kb(e,t);B=e.Ia;u=sa.xc(p,Z.Bj);for(q=0;q<B.length;q++){var P=
B[q];if("SHADOW"==P.type&&"CAST"==P.fc){m=!0;if(!Ka){qa(P);var I=l.op;Ia.dc(P,"NUM_LIGHTS",I);Ia.dc(P,"NUM_LFACTORS",0==I%2?I/2:Math.floor(I/2)+1);va(P.Mb,l.qa);Oa.Wa(P.Mb,"SHADOW_USAGE","SHADOW_CASTING");P.ld&&u&&ra(P,u,f);Ia.dc(P,"SHADOW_TEX_RES",Oa.Ga(t.sa.Id.csm_resolution));if(!Ia.md(P))continue}P.ld&&(t.sa.Id.dP=!0);I=Z.cj(P,f,e.Lg[q]);Z.zd(l,I);ya(p,l,P,!1);xa(P)}}m&&(e=t.sa.Id,Ka=sa.xc(p,Z.ic),ua(l,t,Ka.qa,e,!0));break;case Z.zf:h(l,e,p,t,Ka);break;case Z.Vh:h(l,e,p,t,Ka);break;case Z.Xh:m=
e.ka;f=Sa.kb(e,t);B=f.Ia;for(u=0;u<B.length;u++)if(q=B[u],"COLOR_ID"==q.type&&"OUTLINE"==q.fc){if(!Ka&&(S(q,l,e,p,"COLOR_ID",t),Ia.dc(q,"USE_OUTLINE",1),!Ia.md(q)))continue;q=Z.cj(q,m,f.Lg[u]);Z.zd(l,q)}break;case Z.Bj:p=e.ka;e=Sa.kb(e,t);t=e.Ia;for(m=0;m<t.length;m++)if(f=t[m],"GRASS_MAP"==f.type){if(!Ka&&!Ia.md(f))if("DEBUG"===Object(ha.d)())Ia.$t(f,"error.glslv","error.glslf"),Ia.md(f);else continue;f=Z.cj(f,p,e.Lg[m]);Z.zd(l,f);f=l.qa;P=p.bi;B=l.Ud[0];u=l.Ud[1];q=l.Ud[2];0==B&&0==u?(B=P.min_z,
u=P.max_z):(B=Math.min(B,P.min_z),u=Math.max(u,P.max_z));P=1E-4*(u-B);B-=P;u+=P;l.Ud[0]=B;l.Ud[1]=u;G.bI(f,q/2,q/2,-u,-B);G.set_projection(f,!1)}break;case Z.Wh:for(m=e.ka,e=Sa.kb(e,t),t=e.Ia,f=0;f<t.length;f++)if(B=t[f],"DEBUG_VIEW"==B.type){if(!Ka&&(B.ld&&(u=sa.xc(p,Z.Bj))&&ra(B,u,m),!Ia.md(B)))if("DEBUG"===Object(ha.d)())Ia.$t(B,"error.glslv","error.glslf"),Ia.md(B);else break;u=Z.cj(B,m,e.Lg[f]);Z.zd(l,u);ya(p,l,B,!1);xa(B)}}}break;case "LAMP":pc(b,a)}d=Sa.kb(b,a);c=d.Ia;for(g=0;g<c.length;g++)null==
c[g].ec&&"PHYSICS"!=c[g].type&&(Sa.TH(d,g),g--);Sa.RB(b,!0,a)};W.XQ=function(a,b){if(a&&a.sa&&a.sa.Ya){var h=a.sa.Ya,d=sa.xc(a.sa.Ya,Z.Ve);if(d){var c=null;sa.Xp(h,function(a,b,h,d){if("CUBEMAP"==a.from&&h.type==Z.Ve&&d.type==Z.Uk)return c=a.yb,!0});if(c){var G=Lb.Du;if((b=Ia.Nr(b,a))&&b.bc)b=Xb.vQ(Xb.vv(b.Me).Ya),-1!=b&&(G=Jc.lz(b/2));else if(b=a.sa.Aj.Cn)G=b.SI;G=Math.min(G,tb.Xg);d.qa.width=G;d.qa.height=G;Jb.gx(c,G);ta(a,G);if(d=sa.xc(a.sa.Ya,Z.Tk)){d.qa.width=32;d.qa.height=32;var g=null;sa.Xp(h,
function(a,b,h,d){if("CUBEMAP"==a.from&&h.type==Z.Tk&&d.type==Z.ic)return g=a.yb,!0});g&&Jb.gx(g,32)}if(a=sa.xc(a.sa.Ya,Z.ao)){a.qa.width=128;a.qa.height=128;var k=null;sa.Xp(h,function(a,b,h,d){if("CUBEMAP"==a.from&&h.type==Z.ao&&d.type==Z.ic)return k=a.yb,!0});k&&Jb.gx(k,128)}}}}};W.UU=function(a,b){a=a.Aa;for(var h=0;h<a.length;h++){var d=a[h].Bb,c=d.sa.Ya,G=sa.xc(d.sa.Ya,Z.Ve);if(G){var g=null;sa.Xp(c,function(a,b,h,d){if("CUBEMAP"==a.from&&h.type==Z.Ve&&d.type==Z.Tk)return g=a.yb,!0});g&&(c=
Jc.lz(b.height/2),c=Math.min(c,tb.Xg),G.qa.width=c,G.qa.height=c,Jb.gx(g,c),ta(d,c))}}};W.XL=ma;W.SB=function(a){a.sa.Cw=!0};W.mV=function(a,b){Ya.Na(b,function(b,h){h.type===Z.ee&&(K.a(a.na,h.qa.na),K.a(a.Ag,h.qa.Ts))})};var jc=function(){var a=E.create(),b=ca.create(),h=L.create();return function(d,c){var G=d.qa;c=sa.wQ(c,d);for(var g=0;g<c.length;g++){var k=c[g];if(k.type==Z.ic||k.type==Z.Gg||k.type==Z.Md||k.type==Z.lh)if(Pa.ow)k.vt.set(G.Ag,9*d.gh);else{var l=K.j(G.Ag,b),e=K.i(G.Ag),p=K.g(G.Ag,
a);L.set(l[0],l[1],l[2],e,h);k.iq.set(h,4*d.gh);k.hq.set(p,4*d.gh)}}}}();W.SY=jc;W.cQ=function(a,b){a=a.sa.Id;for(var h=new Float32Array(a.csm_num),d=0;d<a.csm_num;d++)h[d]=G.MO(a,b,d);return h};W.AN=ya;W.Zq=Ta;W.Cm=Va;W.is_hidden=function(a){return a.ka.hide};W.NH=function(a,b){for(var h=0;h<a.Aa.length;h++)for(var d=fa(a.Aa[h].Bb,Bb),c=0;c<d.length;c++)for(var G=d[c].vb,g=0;g<G.length;g++)for(var k=G[g].jb,l=k.length-1;0<=l;l--){var e=k[l];if(e.$g==a.ka)if(e.fb){if("undefined"==typeof b||-1!=e.fb.Hc.indexOf(b)||
0==e.fb.Hc.length)Ia.HE(e.fb),k.splice(l,1)}else k.splice(l,1)}};W.WU=function(a,b){var h=a.lc;a=Sa.kb(a,b).es;b=fa(b,nd);for(var d=0;d<b.length;d++){var c=b[d];c.jn.set(h.dr,4*a);c.wb=!0}};var Cc=function(){var a=ca.create(),b=L.create();return function(h,d,c){var G=h.ka,g=h.lc;d=d.es;h=K.j(h.ka.na,a);var k=g.dr;c.ds.set(g.direction,3*d);b[0]=h[0];b[1]=h[1];b[2]=h[2];b[3]=g.In&&!G.hide?1:0;c.kn.set(b,4*d);b[0]=k[0];b[1]=k[1];b[2]=k[2];b[3]=g.Nn&&!G.hide?1:0;c.jn.set(b,4*d);c.wb=!0}}();W.gy=function(a){a=
a.Aa;for(var b=0;b<a.length;b++)Wa(a[b].Bb)};W.hy=Wa;W.nV=Ra;W.cleanup=function(){for(var a=0;a<ob.length;a++){var b=ob[a];Ya.Na(b.sa.Ya,function(a,b){b.type!=Z.Uk&&V(b)});b.sa.Ya=null;b.sa.rj=[]}lc=kc=null;ob.length=0;Ob=null};W.IE=V;W.WG=function(a,b,h){a=G.mP(a,a.near,a.far,null,!0);var d=Ac.JP(a);a=Sa.Hm("DYNAMIC");a.bi=a.gb=n.f();a.Ye=a.Xc=n.g();var c=a.Ye.Lb;a.Yk=a.jc=n.e([c,0,0],[0,c,0],[0,0,c],a.Ye.Da);h=Ia.eO(d,h);h.Wj=!0;h=Z.cj(h,a);Z.zd(b,h)};W.EX=function(a){return[a.frame_start,a.frame_end]};
W.lI=function(a,b,h){sb.VT(a,b,h);lc&&Qa(lc,a,b)};W.ug=fa;W.yc=Na;W.TS=function(){Xa(!1)};W.US=function(){Xa(!0)};W.get_environment_colors=function(a){a=Na(a,Z.ic);var b=a.we,h=a.Fe,d=[],c=[];d[0]=b[0];d[1]=b[1];d[2]=b[2];c[0]=h[0];c[1]=h[1];c[2]=h[2];return[a.Rg,d,c]};W.set_environment_colors=function(a,b,h,d){for(var c=fa(a,nd),G=0;G<c.length;G++){var g=c[G];g.we.set(h);g.Fe.set(d);g.Rg=b;g.wb=!0}(b=sa.xc(a.sa.Ya,Z.Ve))&&Ra(a,b)};W.get_sky_params=function(a){if((a=Na(a,Z.Ve))&&a.procedural_skydome){var b=
{};b.color=Array(3);ca.copy(a.Ul,b.color);b.procedural_skydome=a.procedural_skydome;b.use_as_environment_lighting=a.use_as_environment_lighting;b.rayleigh_brightness=a.rayleigh_brightness;b.mie_brightness=a.mie_brightness;b.spot_brightness=a.spot_brightness;b.scatter_strength=a.scatter_strength;b.rayleigh_strength=a.rayleigh_strength;b.mie_strength=a.mie_strength;b.rayleigh_collection_power=a.rayleigh_collection_power;b.mie_collection_power=a.mie_collection_power;b.mie_distribution=a.mie_distribution;
return b}return null};W.mQ=function(a){return fa(a,eb)[0].kg[0]};W.kQ=function(a){return fa(a,eb)[0].kg[1]};W.nQ=function(a){return fa(a,eb)[0].kg[2]};W.lQ=function(a){return fa(a,eb)[0].kg[3]};W.ZH=function(a,b){a=fa(a,eb);for(var h=0;h<a.length;h++){var d=a[h];d.kg[0]=b;d.wb=!0}};W.XH=function(a,b){a=fa(a,eb);for(var h=0;h<a.length;h++){var d=a[h];d.kg[1]=b;d.wb=!0}};W.$H=function(a,b){a=fa(a,eb);for(var h=0;h<a.length;h++){var d=a[h];d.kg[2]=b;d.wb=!0}};W.YH=function(a,b){a=fa(a,eb);for(var h=
0;h<a.length;h++){var d=a[h];d.kg[3]=b;d.wb=!0}};W.get_fog_color_density=function(a,b){b=b||[];a=fa(a,eb)[0].ue;b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b};W.set_fog_color_density=function(a,b){a=fa(a,eb);for(var h=0;h<a.length;h++){var d=a[h];d.ue.set(b);d.wb=!0}};W.get_ssao_params=function(a){var b=Na(a,Z.Nt),h=Na(a,Z.Vy);a=Na(a,Z.ic);if(!b)return null;var d={};d.quality=b.Fn;d.use_hemisphere=b.Mp;d.use_blur_depth=h.Jp;d.blur_discard_value=h.Kp;d.radius_increase=b.Op;d.influence=b.Np;d.dist_factor=
b.Lp;d.ssao_only=a.ssao_only;d.ssao_white=b.ssao_white;return d};W.get_dof_params=function(a){a=Na(a,Z.wq);if(!a)return null;var b={};b.dof_on=a.qa.dof_on;b.dof_bokeh=a.dof_bokeh;b.dof_distance=a.qa.dof_distance;b.dof_front_start=a.qa.dof_front_start;b.dof_front_end=a.qa.dof_front_end;b.dof_rear_start=a.qa.dof_rear_start;b.dof_rear_end=a.qa.dof_rear_end;b.dof_power=a.qa.dof_power;b.dof_bokeh_intensity=a.qa.dof_bokeh_intensity;b.dof_object=a.qa.dof_object;return b};W.set_dof_params=ib;W.get_god_rays_params=
function(a){var b=fa(a,[Z.Zn]);a=Na(a,Z.It);if(!b||!a)return null;var h={};h.god_rays_max_ray_length=b[0].Al;h.god_rays_intensity=a.god_rays_intensity;h.god_rays_steps=Ia.Td(b[0].vb[0].jb[0].fb,"STEPS_PER_PASS")[1];return h};W.set_god_rays_params=function(a,b){var h=fa(a,[Z.Zn]);a=fa(a,[Z.It]);if(!h.length||!a.length)return mb.error("God Rays are not enabled on the scene"),0;if("number"==typeof b.god_rays_intensity)for(var d=0;d<a.length;d++)a[d].god_rays_intensity=b.god_rays_intensity;if("number"==
typeof b.god_rays_max_ray_length){var c=b.god_rays_max_ray_length;for(d=0;d<h.length;d++)h[d].Al=c,h[d].wp=c/h[d].Vl/(d+1),h[d].wb=!0}if("number"==typeof b.god_rays_steps)for(b=Oa.Ga(b.god_rays_steps,1),c=h[0].Al,d=0;d<h.length;d++){h[d].Vl=b;h[d].wp=c/b/(d+1);h[d].wb=!0;var G=h[d].vb[0].jb[0],g=G.fb;Ia.dc(g,"STEPS_PER_PASS",b);Ia.md(g);Z.zd(h[d],G)}for(d=0;d<a.length;d++)a.wb=!0};W.get_bloom_params=function(a){var b=Na(a,Z.Jt);a=Na(a,Z.sq);if(!b||!a)return null;var h={};h.key=b.oo;h.edge_lum=b.no;
h.blur=a.lo;h.adaptive=b.sm;h.average_luminance=b.average_luminance;return h};W.set_bloom_params=jb;W.get_glow_material_params=function(a){a=Na(a,Z.xq);if(!a)return null;var b={};b.small_glow_mask_coeff=a.small_glow_mask_coeff;b.large_glow_mask_coeff=a.large_glow_mask_coeff;b.small_glow_mask_width=a.small_glow_mask_width;b.large_glow_mask_width=a.large_glow_mask_width;return b};W.set_glow_material_params=fb;W.get_wind_params=function(a){var b=vb(a);a=ca.length(b);if(0==a)return null;b=A._39(Math.atan2(b[0],
-b[1]));var h={};h.wind_dir=b;h.wind_strength=a;return h};W.iT=function(a){a.sa.gB=!0};W.get_water_surface_level=rb;W.get_water_mat_params=function(a,b){var h=a.sa.wd;(a=Na(a,Z.ic))&&h&&(b.waves_height=h.waves_height,b.waves_length=h.waves_length,b.water_fog_density=a.Ci[3],b=b.water_fog_color=[],b[0]=a.Ci[0],b[1]=a.Ci[1],b[2]=a.Ci[2])};W.set_water_params=function(a,b){var h=a.sa.wd;if(!h)return mb.error("set_water_params() - no water parameters on the scene"),null;"number"==typeof b.dst_noise_scale0&&
(h.dst_noise_scale0=b.dst_noise_scale0);"number"==typeof b.dst_noise_scale1&&(h.dst_noise_scale1=b.dst_noise_scale1);"number"==typeof b.dst_noise_freq0&&(h.dst_noise_freq0=b.dst_noise_freq0);"number"==typeof b.dst_noise_freq1&&(h.dst_noise_freq1=b.dst_noise_freq1);"number"==typeof b.dir_min_shore_fac&&(h.dir_min_shore_fac=b.dir_min_shore_fac);"number"==typeof b.dir_freq&&(h.dir_freq=b.dir_freq);"number"==typeof b.dir_noise_scale&&(h.dir_noise_scale=b.dir_noise_scale);"number"==typeof b.dir_noise_freq&&
(h.dir_noise_freq=b.dir_noise_freq);"number"==typeof b.dir_min_noise_fac&&(h.dir_min_noise_fac=b.dir_min_noise_fac);"number"==typeof b.dst_min_fac&&(h.dst_min_fac=b.dst_min_fac);"number"==typeof b.waves_hor_fac&&(h.waves_hor_fac=b.waves_hor_fac);"number"==typeof b.water_dynamic&&(h.xr=b.water_dynamic);a=fa(a,lb);for(var d=0;d<a.length;d++){var c=a[d];"number"==typeof b.water_fog_density&&h.ue&&(c.Ci[3]=b.water_fog_density);"object"==typeof b.water_fog_color&&h.ue&&c.Ci.set(b.water_fog_color);c.wb=
!0}};W.get_shore_dist=function(a,b,h){var d=a.sa.wd;if(!d.Sl)return 100;var c=d.VA;a=d.yj;var G=(b[0]-d.Dp[0])/d.Ep[0],g=(d.Dp[1]+b[1])/d.Ep[1];G+=.5;g+=.5;if(!(1<G||0>G||1<g||0>g))return d=c*A._7(lc.sa.$B,d.aC,G,g),b=(a-b[2])*h,b=Math.sqrt(d*d+b*b)};W.update=function(a,b){nb.clear();for(var h=I().Ii.ka,d=0;d<ob.length;d++){var c=ob[d],G=c.sa.Ya,g=c.sa;if(g.wd){var k=K.j(h.na,Cb),l=k[2]-rb(c,k[0],k[1]);K.v(k,h.na)}for(k=0;k<g.oq.length;k++){var e=g.oq[k].sa,p=e.Rb,t=e.pe;if(!(c.b4w_use_nla&&e.im||
!p&&!t)&&Jb.CJ(e)){var Ka=Jb.zJ(e),m=Jb.BJ(e);p&&Pa.is_mobile_device&&(m-=5);var f=Jb.FV(e);Ka>=f&&e.Mk||Ka<m?(Jb.reset_video(e),t&&(e.Rl=Jb.ex(e,a))):Ka>=f&&!e.Mk?Jb.pause_video(e):Jb.DJ(e)&&(p?Jb.jJ(e):(p=Jb.ex(e,a),p!=e.Rl&&(Jb.iJ(e),e.yk++),e.Rl=p))}}Ya.Na(G,function(b,h){-1<Tb.indexOf(h.type)&&(h.time=a);g.wd&&(h.Vq=l)})}for(d=0;d<ob.length;d++)if(c=ob[d],g=c.sa,G=g.Ya,h=g.rj,h.length)for(g.Cw&&(za(c),g.Cw=!1),g.gB&&(hb(c),g.gB=!1),g.hB&&(Da(c),g.hB=!1),g.motion_blur&&pb(G,b),c=sa.xc(G,Z.Xh),
k=0;k<h.length;k++)e=h[k],Ab.xn(e),c&&cb(G,e,c),nb.Xj(e);Pa.show_hud_debug_info&&Rc.$T(ob,b)};W.ZS=function(a){a.sa.hB=!0};W.$z=function(a){var b=[];Ya.Na(a.sa.Ya,function(a,h){b.push(h)});return b};W.get_cam_water_depth=function(){var a=Na(lc,Z.Md),b=lc;return a||b.sa.wd?a.Vq:null};W.hJ=function(a){Ya.Na(a.sa.Ya,function(a,b){b.wb=!0})};W.uT=function(a,b){a.debug_view_mode=b;a.Ec=b!=Sb.DV_NONE;a.Ob=b==Sb.DV_TRANSPARENT_WIREFRAME;a.wb=!0;a=I();for(var h=0;h<lb.length;h++)for(var d=fa(a,[lb[h]]),c=
0;c<d.length;c++)d[c].vr=b==Sb.DV_RENDER_TIME};W.tT=function(a,b){a.debug_colors_seed=b;a.wb=!0};W.JT=function(a,b){a.Iu=b;a.wb=!0};W.ST=function(a,b){a=a.vb;for(var h=0;h<a.length;h++)for(var d=a[h].jb,c=0;c<d.length;c++){var G=d[c].fb;ca.copy(b,G.wireframe_edge_color);G.ec.ip=!0}};W.dJ=function(){var a=E.create();return function(b,h){var d=h.Eo,c=b.sa.Di;if(d&&"WIND"==d.type&&c){h=K.g(h.ka.na,a);ca.transformQuat(A.f,h,c);ca.normalize(c,c);ca.scale(c,d.FI,c);b=fa(b,Tb);for(d=0;d<b.length;d++)b[d].Di.set(c);
return!0}return!1}}();W.yS=function(a,b,h){var d=Na(a,Z.zf);if(d){var c=Yc.enabled&&(Yc.dt===Z.zf||Yc.dt===Z.Vh);if(c)var g=sb.Wq(b,h,fc,d.qa);else{var k=sb.get_canvas();G.sT(d.qa,b,h,k.clientWidth,k.clientHeight)}Ab.xn(d);d.Ec&&nb.Xj(d);(a=Na(a,Z.Vh))?(y.copy(d.qa.gc,a.qa.gc),y.copy(d.qa.zg,a.qa.zg),A._0(a.qa.zg,a.qa.Vm),Ab.xn(a),a.Ec&&nb.Xj(a),b=a.qa):b=d.qa;if(d.Ec||a&&a.Ec)return c?(g[1]=b.height-g[1],nb.Xw(b.Hf,g[0],g[1],1,1,zb)):nb.Xw(a?a.qa.Hf:d.qa.Hf,0,0,1,1,zb)}else mb.error("Object Selection is not available on the scene");
return null};W.set_outline_color=function(a){var b=I();b=fa(b,[Z.$n]);for(var h=0;h<b.length;h++){var d=b[h];d.ti.set(a);d.wb=!0}};W.JX=vb;W.get_meta_tags=function(a){var b={title:"",description:""};a.b4w_tags&&(b.title=a.b4w_tags.title,b.description=a.b4w_tags.description);return b};W.get_custom_prop=function(a){return a.b4w_custom_prop};W.cJ=function(a,b){var h=Cb;ca.negate(b,h);for(b=0;6>b;b++){var d=a.th[b],c=a.Jm[b],G=a.qa;y.translate(A.j[b],h,d);y.multiply(G.gc,d,G.zg);A._0(G.zg,c)}};W.eJ=function(a,
b,h){A._61(b,h,A.f,a.qa.ad)};W.UD=function(a,b,h){var d=a.sa.pg;if(d&&b)for(var c=0;c<b.length;c++){var G=b[c],g=Sa.kb(G,a);if(-1!=G.ka.Gd){var k=d.oj,l=d.Rw;G=G.ka.Gd;l.length&&G<l.length?g.oj=l[G]:k.length&&G<k.length&&(g.oj=k[G])}else-1!=G.ka.Qd&&(k=d.Tj,l=d.Ez,G=G.ka.Qd,l.length?g.Tj=l[G]:k.length&&(g.Tj=k[G]))}if(h)for(b=Sa.xv(h,Pa.ssao&&a.b4w_enable_ssao),h=a.sa.Id,c=0;c<b.length;c++)if(g=Sa.kb(b[c],a),h)for(d=fa(a,[Z.ee]),G=0;G<d.length;G++)c==d[G].gh&&g.ZB.push(d[G])};W.marker_frame=function(a,
b){return a.timeline_markers[b]};W.set_hmd_params=function(a){var b=I();if(b=Na(b,Z.mh))a.distortion_coefs&&(b.Vj[0]=a.distortion_coefs[0],b.Vj[1]=a.distortion_coefs[1],b.wb=!0),a.chromatic_aberration_coefs&&(b.chromatic_aberration_coefs[0]=a.chromatic_aberration_coefs[0],b.chromatic_aberration_coefs[1]=a.chromatic_aberration_coefs[1],b.chromatic_aberration_coefs[2]=a.chromatic_aberration_coefs[2],b.chromatic_aberration_coefs[3]=a.chromatic_aberration_coefs[3],b.wb=!0),a.base_line_factor&&(b.Vj[2]=
a.base_line_factor,b.wb=!0),a.inter_lens_factor&&(b.Vj[3]=a.inter_lens_factor,b.wb=!0),null!=a.enable_hmd_stereo&&(b.enable_hmd_stereo=a.enable_hmd_stereo,b.wb=!0)};W.Aw=function(a,b){for(var h=ob,d=0;d<h.length;d++)sa.dS(W.tv(h[d]),a,b)};W.JU=function(a){for(var b=ub.tc(a,"LAMP",ub.DATA_ID_ALL),h=fa(a,Bb),d=0;d<h.length;d++)for(var c=h[d],G=c.vb,g=0;g<G.length;g++)for(var k=G[g].jb,l=0;l<k.length;l++){var e=k[l],p=e.fb;"MAIN"==p.type&&(Ia.MU(p,b,a),Ia.md(p),Z.zd(c,e))}};W.JH=function(a){for(var b=
0;b<ob.length;b++)Ya.Na(ob[b].sa.Ya,function(b,h){b=h.vb;for(var d=0;d<b.length;d++)for(var c=b[d].jb,G=0;G<c.length;G++){var g=c[G];g.fb==a&&Z.zd(h,g)}})}});w.a=f},function(D,w,f){D=f(0);var M=f(5),U=f(14),n=f(4),z=f(2),e=f(25);f=Object(D.a)("__subscene",function(m,f){function v(a,k){a.op=k;a.ds=new Float32Array(3*k);a.kn=new Float32Array(4*k);a.jn=new Float32Array(4*k)}function q(a){a={type:a,fc:"",Sm:!1,Ob:!1,Nw:!1,Iq:!1,hp:!1,el:0,fg:0,fl:[],debug_view_mode:0,debug_colors_seed:0,Iu:1,vr:!1,time:0,
qa:null,th:null,Jm:[],vb:[],Nb:[],Th:[],Di:new Float32Array(3),Ud:new Float32Array(3),ue:new Float32Array(4),kg:new Float32Array(4),eg:new Float32Array(16),Hp:0,Rg:0,op:0,ds:null,kn:null,jn:null,LG:null,we:new Float32Array(3),Fe:new Float32Array(3),Ip:new Float32Array(4),Qx:new Float32Array(3),Px:new Float32Array([0,0,1]),Rx:new Float32Array(4),Gp:new Float32Array(3),tx:"",lu:0,un:0,wr:0,fn:!1,ti:new Float32Array(3),Bg:!1,Vq:0,Ci:new Float32Array(4),yj:0,Ng:!1,Nj:0,pu:new Float32Array(2),Mj:0,procedural_skydome:!1,
use_as_environment_lighting:!1,mie_brightness:0,rayleigh_brightness:0,spot_brightness:0,mie_strength:0,rayleigh_strength:0,scatter_strength:0,mie_collection_power:0,rayleigh_collection_power:0,mie_distribution:0,Ul:new Float32Array(3),Mp:!1,Jp:!1,Kp:0,Op:0,Np:0,Lp:0,Fn:0,ssao_only:!1,ssao_white:!1,brightness:0,contrast:0,exposure:0,saturation:0,god_rays_intensity:0,Al:0,wp:0,Vl:0,lr:0,self_shadow_polygon_offset:0,self_shadow_normal_offset:0,iq:null,hq:null,vt:null,rk:null,Gc:!1,lv:"",oo:0,lo:0,no:0,
sm:!0,average_luminance:0,Qq:0,Cr:0,mb_decay_threshold:0,mb_factor:0,ww:0,As:"",dof_bokeh:!1,uu:"",KA:new Float32Array(2),dw:0,iu:2,mo:.5,small_glow_mask_width:0,large_glow_mask_width:0,small_glow_mask_coeff:0,large_glow_mask_coeff:0,ft:new Float32Array(2),nc:new Float32Array(2),Vj:new Float32Array(4),chromatic_aberration_coefs:new Float32Array(4),enable_hmd_stereo:!1,gh:0,ms:!0,sx:!1,Ax:!1,wx:!1,xx:!1,zx:!1,yx:!1,rx:"",Kn:!1,Ln:!1,Mn:!1,xp:null,Ec:!0,enqueue:!0,Ub:!0,Yb:!0,Ad:!0,wb:!0,uf:1};a.nc[0]=
1;a.nc[1]=1;a.Vj[2]=.5;a.Vj[3]=.5;a.Fn=8;return a}function r(a,k){return a==k?0:a>k?1:-1}function y(a,k){return r(a.Yf,k.Yf)||r(a.ek,k.ek)||r(a.Yd,k.Yd)||r(a.ec.fG,k.ec.fG)||r(a.Rk,k.Rk)}var a=Object(M.a)(m),C=Object(U.a)(m),k=Object(n.a)(m).Ed;f.ic=0;f.Md=1;f.lh=2;f.de=3;f.xd=4;f.Ue=5;f.Ge=6;f.He=7;f.ee=8;f.Gg=9;f.Bj=10;f.Lc=11;f.xq=13;f.Kt=14;f.zf=15;f.Vh=16;f.Wh=17;f.Xn=18;f.$C=19;f.Nt=20;f.Vy=21;f.VC=22;f.Aq=23;f.Lt=24;f.Ty=25;f.Mt=26;f.Iy=27;f.Gi=28;f.Hy=29;f.wq=30;f.Xh=31;f.$n=32;f.Zn=33;f.It=
34;f.Ve=35;f.Jy=36;f.mh=37;f.LUMINANCE=38;f.YC=39;f.Jt=40;f.sq=41;f.PL=42;f.Uk=43;f.zq=44;f.wD=45;f.Tk=46;f.ao=47;f.Gy=48;f.CO=function(a,k,b,g){var c=q(8);c.lr=a;c.self_shadow_polygon_offset=b.self_shadow_polygon_offset;c.gh=k;switch(b.li[k]){case "SPOT":case "POINT":c.qa=C.jd(C.qd);C.aI(c.qa,b.AI[k],b.br[k],b.ar[k]);break;default:c.qa=C.jd(C.Cj)}v(c,g);return c};f.xN=function(a){var c=q(a.type);c.fc=a.fc;c.Sm=a.Sm;c.Ec=a.Ec;c.enqueue=a.enqueue;c.Ub=a.Ub;c.Yb=a.Yb;c.Ad=a.Ad;c.Ob=a.Ob;c.Nw=a.Nw;c.Iq=
a.Iq;c.hp=a.hp;c.wb=a.wb;c.el=0;c.fg=0;c.fl=[];c.debug_view_mode=a.debug_view_mode;c.debug_colors_seed=a.debug_colors_seed;c.Iu=a.Iu;c.vr=a.vr;c.time=a.time;c.qa=C.sd(a.qa,!0);c.th=z.O(a.th);c.Jm=z.O(a.Jm);c.vb=z.O(a.vb);c.Nb=z.O(a.Nb);c.Th=z.O(a.Th);c.Di.set(a.Di);c.Ud.set(a.Ud);c.ue.set(a.ue);c.kg.set(a.kg);c.eg.set(a.eg);c.Hp=a.Hp;c.Rg=a.Rg;c.op=a.op;c.ds=z.O(a.ds);c.kn=z.O(a.kn);c.jn=z.O(a.jn);c.LG=z.O(a.LG);c.we.set(a.we);c.Fe.set(a.Fe);c.Ip.set(a.Ip);c.Qx.set(a.Qx);c.Px.set(a.Px);c.Rx.set(a.Rx);
c.Gp.set(a.Gp);c.tx=a.tx;c.lu=a.lu;c.un=a.un;c.wr=a.wr;c.fn=a.fn;c.ti.set(a.ti);c.Bg=a.Bg;c.Vq=a.Vq;c.Ci.set(a.Ci);c.yj=a.yj;c.Ng=a.Ng;c.Nj=a.Nj;c.pu.set(a.pu);c.Mj=a.Mj;c.procedural_skydome=a.procedural_skydome;c.use_as_environment_lighting=a.use_as_environment_lighting;c.mie_brightness=a.mie_brightness;c.rayleigh_brightness=a.rayleigh_brightness;c.spot_brightness=a.spot_brightness;c.mie_strength=a.mie_strength;c.rayleigh_strength=a.rayleigh_strength;c.scatter_strength=a.scatter_strength;c.mie_collection_power=
a.mie_collection_power;c.rayleigh_collection_power=a.rayleigh_collection_power;c.mie_distribution=a.mie_distribution;c.Ul.set(a.Ul);c.Mp=a.Mp;c.Jp=a.Jp;c.Kp=a.Kp;c.Op=a.Op;c.Np=a.Np;c.Lp=a.Lp;c.Fn=a.Fn;c.ssao_only=a.ssao_only;c.ssao_white=a.ssao_white;c.brightness=a.brightness;c.contrast=a.contrast;c.exposure=a.exposure;c.saturation=a.saturation;c.god_rays_intensity=a.god_rays_intensity;c.Al=a.Al;c.wp=a.wp;c.Vl=a.Vl;c.lr=a.lr;c.self_shadow_polygon_offset=a.self_shadow_polygon_offset;c.self_shadow_normal_offset=
a.self_shadow_normal_offset;c.iq=z.O(a.iq);c.hq=z.O(a.hq);c.vt=z.O(a.vt);c.rk=z.O(a.rk);c.Gc=a.Gc;c.lv=a.lv;c.oo=a.oo;c.lo=a.lo;c.no=a.no;c.sm=a.sm;c.average_luminance=a.average_luminance;c.Qq=a.Qq;c.Cr=a.Cr;c.mb_decay_threshold=a.mb_decay_threshold;c.mb_factor=a.mb_factor;c.ww=a.ww;c.As=a.As;c.uu=a.uu;c.dof_bokeh=a.dof_bokeh;c.KA.set(a.KA);c.dw=a.dw;c.iu=a.iu;c.mo=a.mo;c.small_glow_mask_width=a.small_glow_mask_width;c.large_glow_mask_width=a.large_glow_mask_width;c.small_glow_mask_coeff=a.small_glow_mask_coeff;
c.large_glow_mask_coeff=a.large_glow_mask_coeff;c.uf=a.uf;c.ft.set(a.ft);c.nc.set(a.nc);c.Vj.set(a.Vj);c.chromatic_aberration_coefs.set(a.chromatic_aberration_coefs);c.enable_hmd_stereo=a.enable_hmd_stereo;c.gh=a.gh;c.ms=a.ms;c.sx=a.sx;c.Ax=a.Ax;c.wx=a.wx;c.xx=a.xx;c.zx=a.zx;c.yx=a.yx;c.rx=a.rx;c.Kn=a.Kn;c.Ln=a.Ln;c.Mn=a.Mn;return c};f.$E=function(){var a=q(10);a.qa=C.jd(C.Zh);return a};f.kd=function(c){var k=q(11);k.Ub=!1;k.Yb=!1;k.Ad=!1;k.Gc=!0;k.qa=C.jd(C.Wc);k.As=c;switch(c){case "NONE":k.nc[0]=
1;k.nc[1]=1;break;case "GRAYSCALE":k.nc[0]=1;k.nc[1]=1;break;case "X_BLUR":k.nc[0]=1;k.nc[1]=0;break;case "Y_BLUR":k.nc[0]=0;k.nc[1]=1;break;case "X_GLOW_BLUR":k.nc[0]=1;k.nc[1]=0;break;case "Y_GLOW_BLUR":k.nc[0]=0;k.nc[1]=1;break;case "X_BLOOM_BLUR":k.nc[0]=1;k.nc[1]=0;break;case "Y_BLOOM_BLUR":k.nc[0]=0;k.nc[1]=1;break;case "X_DOF_BLUR":k.nc[0]=1;k.nc[1]=1;break;case "Y_DOF_BLUR":k.nc[0]=1;k.nc[1]=1;break;case "X_ALPHA_BLUR":k.nc[0]=1;k.nc[1]=0;k.uf=3;break;case "Y_ALPHA_BLUR":k.nc[0]=0;k.nc[1]=
1;k.uf=3;break;case "X_EXTEND":k.nc[0]=1;k.nc[1]=0;break;case "Y_EXTEND":k.nc[0]=0;k.nc[1]=1;break;default:a.va("Wrong postprocessing effect: "+c)}return k};f.sO=function(a,k){var b=q(13);b.Ub=!1;b.Yb=!1;b.Ad=!1;b.small_glow_mask_coeff=k.$i.small_glow_mask_coeff;b.large_glow_mask_coeff=k.$i.large_glow_mask_coeff;b.small_glow_mask_width=k.$i.small_glow_mask_width;b.large_glow_mask_width=k.$i.large_glow_mask_width;b.qa=a;b.Gc=!0;return b};f.Im=function(c,k,b,g,e,m,f,r,n){var l=q(c);0==c?(l.Ub=!0,l.Yb=
b,l.Ob=!1):1==c?(l.Ub=!1,l.Yb=!1,l.Ob=!0):2==c?(l.Ub=!1,l.Yb=!0,l.Ob=!0):3==c||4==c?(l.Ub=!0,l.Yb=!0,l.Ob=!1):5==c||6==c?(l.Ub=!1,l.Yb=!1,l.Ob=!0):7==c?(l.Ub=!0,l.Yb=!1,l.Ob=!0):a.va("wrong main subscene type");l.Ob&&r&&(l.self_shadow_normal_offset=r.self_shadow_normal_offset);l.qa=k;if(c=f.Cn)l.Ip.set([c.cE,c.jG,c.LJ,c.KJ]),l.Gp.set(c.color),l.Hp=c.mb;l.we.set(f.we);l.Fe.set(f.Fe);l.Rg=f.Rg;l.ue=m.ue;l.kg=m.kg;g&&(g.ue&&l.Ci.set(g.ue),l.yj=g.yj,g.Ng&&n&&(l.Ng=!0,l.Nj=g.aN,l.Mj=g.$M,l.pu.set(g.bN)));
v(l,e);return l};f.kr=function(){var a=q(14);a.Gc=!0;a.qa=C.jd(C.Wc);return a};f.YE=function(a,k,b){var c=q(15);k&&(c.type=16,c.Ub=!1,c.Yb=!0);c.enqueue=!1;c.qa=a;v(c,b);return c};f.qO=function(a){var c=q(17);c.Ec=!1;c.Ub=!1;c.Yb=!1;c.qa=a;return c};f.lO=function(a){var c=q(18);c.Ub=!0;c.Yb=!1;c.qa=a;return c};f.DO=function(a,k){var b=q(9);b.qa=a;v(b,k);return b};f.rO=function(a){var c=q(19);c.Ub=!1;c.Yb=!1;c.qa=a;c.Gc=!0;return c};f.FO=function(a,k,b){var c=q(20);c.Ub=!1;c.Yb=!1;c.Ad=!1;c.qa=a;c.ue=
k.ue;c.Ci.set(k.ue);c.Op=b.radius_increase;c.Mp=b.RQ;c.Np=b.influence;c.Lp=b.dist_factor;c.Fn=b.hT;c.Gc=!0;return c};f.GO=function(a,k){var b=q(21);b.Ub=!1;b.Yb=!1;b.Ad=!1;b.qa=a;b.Jp=k.KM;b.Kp=k.blur_discard_value;b.Gc=!0;return b};f.kO=function(a){var c=q(22);c.Ub=!1;c.Yb=!1;c.Ad=!1;c.uf=1/a.yp;c.lv=a.ID;c.qa=C.jd(C.Wc);c.Gc=!0;return c};f.Dz=function(a,k){var b=q(a);b.Ub=23==a||24==a?!0:!1;b.Yb=!1;b.Ad=!1;b.uf=1/k.yp;b.qa=C.jd(C.Wc);23==a&&(b.lR=new Float32Array(4));b.Gc=!0;return b};f.pO=function(a,
k,b,g){var c=q(27);c.Ub=!1;c.Yb=!1;c.Ad=!1;c.qa=C.jd(C.Wc);c.brightness=a;c.contrast=k;c.exposure=b;c.saturation=g;c.Gc=!0;return c};f.xO=function(a,k){var b=q(28);b.Ub=!1;b.Yb=!1;b.Ad=!1;b.qa=C.jd(C.Wc);b.Iq=!0;b.mb_decay_threshold=a;b.mb_factor=k;b.Gc=!0;return b};f.Az=function(a,k){var b=q(29);b.Ub=!1;b.Yb=!1;b.Ad=!1;b.qa=a;b.uf=b.qa.dof_power;b.uu=k;b.Gc=!0;return b};f.ZE=function(a,k){var b=q(30);b.Ub=!1;b.Yb=!1;b.Ad=!1;b.qa=a;b.uf=a.dof_power;b.dof_bokeh=k;b.Gc=!0;return b};f.zO=function(a,
k){var b=q(31);b.Ad=!1;b.qa=a;v(b,k);return b};f.yO=function(a){var c=q(32);k.outlining_overview_mode?c.ti.set(k.ti):c.ti.set(a.ti);c.un=a.un;c.Cr=5;c.Qq=3;c.Ad=!1;c.qa=C.jd(C.Wc);c.Gc=!0;return c};f.Cz=function(a,k,b,g,e,m,f){var c=q(33);c.Ub=!1;c.Yb=!1;c.Ad=!1;c.we=new Float32Array([1,1,1]);c.Fe=new Float32Array([1,1,1]);c.Rg=1;c.Nw=g;c.Bg=k;c.wp=e;c.Al=b;c.Vl=f;c.qa=a;v(c,m);return c};f.tO=function(a,k){var b=q(34);b.Ub=!1;b.Yb=!1;b.Ad=!1;b.qa=C.jd(C.Wc);b.god_rays_intensity=a;v(b,k);b.Gc=!0;return b};
f.EO=function(a,k,b,g){var c=q(35);c.enqueue=!1;c.Ub=!1;c.Yb=!1;c.Ad=!1;var e=C.jd(C.Wc);e.width=g;e.height=g;c.qa=e;c.th=z._5();v(c,k);c.we=new Float32Array([1,1,1]);c.Fe=new Float32Array([1,1,1]);c.Rg=1;c.Ul.set(b.Ul);c.procedural_skydome=b.procedural_skydome;c.use_as_environment_lighting=b.use_as_environment_lighting;c.rayleigh_brightness=b.rayleigh_brightness;c.mie_brightness=b.mie_brightness;c.spot_brightness=b.spot_brightness;c.scatter_strength=b.scatter_strength;c.rayleigh_strength=b.rayleigh_strength;
c.mie_strength=b.mie_strength;c.rayleigh_collection_power=b.rayleigh_collection_power;c.mie_collection_power=b.mie_collection_power;c.mie_distribution=b.mie_distribution;if(a){c.we.set(a.we);c.Fe.set(a.Fe);c.Rg=a.Rg;if(k=a.Cn)c.Ip.set([k.cE,k.jG,k.LJ,k.KJ]),c.Gp.set(k.color),c.Hp=k.mb,c.sx=k.invert,c.Ax=k.sJ,c.wx=k.nJ,c.xx=k.oJ,c.zx=k.qJ,c.yx=k.pJ,c.rx=k.dE;c.Kn=a.Kn;c.Ln=a.Ln;c.Mn=a.Mn;c.tx=a.Me}return c};f.uO=function(a,k){var b=q(46);b.enqueue=!1;b.Ub=!1;b.Yb=!1;b.Ad=!1;var c=C.jd(C.Wc);c.width=
k;c.height=k;b.qa=c;b.th=z._5();v(b,a);return b};f.BO=function(a){var c=q(47);c.enqueue=!1;c.Ub=!1;c.Yb=!1;c.Ad=!1;var b=C.jd(C.Wc);b.width=128;b.height=128;c.qa=b;c.th=z._5();v(c,a);return c};f.oO=function(){var a=q(48);a.enqueue=!1;a.Ub=!1;a.Yb=!1;a.Ad=!1;var k=C.jd(C.Wc);k.width=512;k.height=512;a.qa=k;return a};f.Bz=function(){var a=q(36);a.Ub=!1;a.Yb=!1;a.qa=C.jd(C.Wc);a.Gc=!0;return a};f.HO=function(a,k){var b=q(37);b.Ub=!1;b.Yb=!1;b.fc=a?"HMD":k?"ANAGLYPH":"SIDEBYSIDE";b.qa=C.jd(C.Wc);b.Gc=
!0;return b};f.vO=function(){var a=q(38);a.Ub=!1;a.Yb=!1;a.qa=C.jd(C.Wc);a.Gc=!0;return a};f.mO=function(){var a=q(39);a.Ub=!1;a.Yb=!1;a.qa=C.jd(C.Wc);a.Gc=!0;return a};f.cO=function(){var a=q(45);a.Ub=!1;a.Yb=!1;a.qa=C.jd(C.Wc);a.Gc=!0;return a};f.wO=function(a,k,b,g){var c=q(40);c.Ub=!1;c.Yb=!1;c.oo=a;c.no=k;c.qa=g;v(c,b);c.Gc=!0;return c};f.nO=function(a){var c=q(41);c.Ub=!1;c.Yb=!1;c.qa=C.jd(C.Wc);c.lo=a;c.iu=5;c.Gc=!0;return c};f.hX=function(a){var c=q(42);c.Ub=!1;c.Yb=!1;c.qa=a;c.Gc=!0;return c};
f.aF=function(){var a=q(43);a.enqueue=!1;return a};f.AO=function(){var a=q(44);a.Gc=!0;return a};f.Ox=function(a){switch(a.type){case 0:return"MAIN OPAQUE";case 1:return"MAIN BLEND";case 2:return"MAIN XRAY";case 3:return"MAIN PLANE REFLECT";case 4:return"MAIN CUBE REFLECT";case 5:return"MAIN PLANE REFLECT BLEND";case 6:return"MAIN CUBE REFLECT BLEND";case 7:return"MAIN GLOW";case 8:return"SHADOW CAST";case 9:return"SHADOW RECEIVE";case 10:return"GRASS MAP";case 11:return"POSTPROCESSING ("+a.As.replace(/_/g,
" ")+")";case 13:return"GLOW COMBINE";case 14:return"RESOLVE";case 15:return"COLOR PICKING";case 16:return"COLOR PICKING XRAY";case 17:return"DEBUG VIEW";case 18:return"ANCHOR VISIBILITY";case 19:return"DEPTH PACK";case 20:return"SSAO";case 21:return"SSAO BLUR";case 22:return"ANTIALIASING";case 23:return"SMAA BLENDING WEIGHT CALCULATION";case 24:return"SMAA EDGE DETECTION";case 25:return"SMAA RESOLVE";case 26:return"SMAA NEIGHBORHOOD BLENDING";case 27:return"COMPOSITING";case 28:return"MOTION BLUR";
case 29:return"COC";case 30:return"DOF";case 31:return"OUTLINE MASK";case 32:return"OUTLINE";case 33:return"GOD RAYS";case 34:return"GOD RAYS COMBINE";case 35:return"SKY";case 46:return"IRRADIANCE";case 47:return"ROUGHNESS_CONVOLUTION";case 48:return"PRE-COMPUTE_BRDF";case 36:return"COPY";case 37:return"STEREO";case 38:return"LUMINANCE";case 39:return"AVERAGE LUMINANCE";case 40:return"LUMINANCE TRUNCED";case 41:return"BLOOM";case 42:return"VELOCITY";case 44:return"PERFORMANCE";case 43:return"SINK";
case 45:return"RESIZE";default:return"UNKNOWN"}};f.zd=function(a,k){for(var b=k.fb,c=b.ec,e=b.Yf,l=0;l<a.vb.length;l++){var m=a.vb[l].jb,f=m.indexOf(k);if(-1!=f&&(m.splice(f,1),!m.length)){a.vb.splice(l,1);break}}l=a.Ob?b.Yd:0;a:{m=a.vb;for(f=0;f<m.length;f++){var q=m[f];if(q.ec==c&&q.Yf==e&&q.Yd==l&&q.ek==b.ek){m=q;break a}}m=null}m?m.jb.push(k):(a.vb.push({ec:c,jb:[k],Yf:e,Yd:l,ek:b.ek,Ec:!0,Rk:Infinity}),a.ms=!0)};f.cj=function(a,k,b){k={Ec:!0,Nz:[!0,!0,!0,!0,!0,!0],$g:k,fb:a,Ft:b||null,Sv:null,
Rk:Infinity};a.Uf&&a.$a.Ke&&(b=a.$a.Ke,k.Sv={YR:new Float32Array(b.length),ZR:new Float32Array(b.length),ZO:new Float32Array(b.length/3),MJ:new Float32Array(3),GM:e.m(a.Xb.Bf)});return k};f.uP=function(a,k,b){for(var c=0;c<a.vb.length;c++)for(var e=0;e<a.vb[c].jb.length;e++)if(a.vb[c].jb[e].fb==k&&a.vb[c].jb[e].ka==b)return!0;return!1};f.eU=function(a){a.vb.sort(y);a.ms=!1}});w.a=f},function(D,w,f){D=f(0);var M=f(38),U=f(5),n=f(16),z=f(25),e=f(14),m=f(4),C=f(59),v=f(15),q=f(31),r=f(20),y=f(57),a=
f(74),T=f(52),k=f(9),c=f(47),l=f(19),b=f(1),g=f(64),E=f(8),ea=f(10),u=f(11),F=f(23),R=f(17),O=f(18),K=f(13),A=f(6),ca=f(2),L=f(3),ha=f(56),J=f(55),W=f(22),B=f(29),ba=f(58);f=Object(D.a)("__objects",function(f,P){function p(a){var b=a.Aa;a=a.ka;for(var h=0;h<b.length;h++){var d=b[h].Bb;d.sa.outline&&a.mj&&ya.ZS(d)}}function I(a){a.ka.mj=0;a=fb.indexOf(a);-1!=a&&fb.splice(a,1)}function H(a){if(a.Eo)for(var b=a.Aa,h=0;h<b.length;h++)ya.dJ(b[h].Bb,a)}function t(a,b){a=a.Aa;for(var h=b.Aa,c=0;c<a.length;c++){for(var g=
!1,k=0;k<h.length;k++)if(a[c].Bb==h[k].Bb){g=!0;break}g||d(b,a[c].Bb)&&ma.Fq(b,a[c].Bb)}}function d(a,b){return!b.HD&&"SPEAKER"==a.type||!b.UL&&"LAMP"==a.type?!1:!0}function la(a){var b=a.b4w_do_not_batch,h=a.b4w_collision,d=a.b4w_vehicle,c=a.b4w_floating,g=a.b4w_character,k=za.MQ(a),e=ra.hE(a),G=0<a.data.b4w_shape_keys.length,p=a.b4w_dynamic_geometry,l=na(a);if(!(b=wa.gE(a)||b||h||d||G||c||k||g||e||p))a:{a=a.data;for(b=0;b<a.materials.length;b++)if(h=a.materials[b],h.Sa.fj||h.dj||Aa(h.ne)){b=!0;
break a}b=!1}return b||l}function na(a){var b=!1,h=a.constraints.length;if(h){var d=null;for(--h;0<=h;h--){var c=a.constraints[h];if("LOCKED_TRACK"!=c.type||"REFLECTION PLANE"!=c.name){d=c;break}}if(!d||!d.target)return!1;a=d.target;d=a.type;if(a.parent)return d=a.parent.type,"MESH"==d?b=b||la(a.parent):"EMPTY"==d?b=b||pa(a.parent):b=!0,b;"MESH"==d?b=b||la(a):"EMPTY"==d?b=b||pa(a):b=!0}return b}function pa(a){var b=ra.hE(a),h=a.b4w_do_not_batch,d=!!a.b4w_anchor,c=na(a);return wa.gE(a)||b||h||d||c}
function Aa(a){if(!a)return!1;a=a.nodes;for(var b=0;b<a.length;b++){var h=a[b];if("VECT_TRANSFORM"==h.type){var d=h.convert_from,c=h.convert_to,g=h.outputs[0];if(!(!g.is_linked||"WORLD"==d&&"CAMERA"==c||"CAMERA"==d&&"WORLD"==c||"OBJECT"==d&&"OBJECT"==c))return!0}if("NORMAL_MAP"==h.type&&(d=h.space,g=h.outputs[0],g.is_linked&&("OBJECT"==d||"BLENDER_OBJECT"==d))||"TEX_COORD"==h.type&&h.outputs[3].is_linked||"OBJECT_INFO"==h.type&&(g=h.outputs[1],d=h.outputs[3],h.outputs[0].is_linked||g.is_linked||d.is_linked))return!0}return!1}
function w(a){if(Q(a,fa.ALL,!1,-1)){for(var b=1,h;;){h="."+(3>String(b).length?("000"+String(b)).slice(-3):String(b));if(!Q(a+h,fa.ALL,!1,-1))break;b++}ua.error('Object "'+a+'" already exists. Name was replaced by "'+a+h+'".');return h}return""}function N(a,b,h){b=fa[b]||[];for(var d=[],c=0;c<b.length;c++){var g=b[c];if(g.ka.Rd==h||-1==h)for(var k=g.Aa,e=0;e<k.length;e++)k[e].Bb==a&&d.push(g)}return d}function oa(a,b){a=fa[a]||[];if(-1==b)return a;for(var h=[],d=0;d<a.length;d++){var c=a[d];c.ka.Rd==
b&&h.push(c)}return h}function Y(a,b,h,d){for(var c=0;c<a.Aa.length;c++)for(var g=a.Aa[c].Ia,k=0;k<g.length;k++){var e=g[k];e.$a&&(e.$a.sh=b);e.sh=b;e.ec&&(e.ec.sh=h);ja.rT(d)}}function Q(a,b,h,d,c){for(var g=null,k=0;k<b.length;k++){var e=b[k];if(!((h?e.oe:e.name)!=a||e.ka.Rd!=d&&-1!=d||c&&e.vl||(g=e,ma.get_dg_parent(g))))break}return g}function Ha(a){fa.ALL.push(a);fa[a.type]||(fa[a.type]=[]);fa[a.type].push(a);var b=a.ka.Gd;if(null!=b)for(var h=0;h<ib.length;h++){var d=ib[h];d.ka.Gd==b&&d.An.push(a)}}
function ia(a,b,h){if(!b.dk)return!0;a=a.yl;if(a.Vi!=a.Df)if(a.st){var d=ca._50(a.Vi-a.Df);a.Df+=d*Wa.fQ()/.4;a.Df=ca.M(a.Df,0,1)}else a.Df=a.Vi;d="STATIC"==b.type?b.fs:L.add(b.Ye.Da,b.pw,rb);h=L.dist(d,h);0==a.Ro?(d=Math.max(b.Wg-a.Qo/2,0),b=b.Vg+a.Po/2):-1==a.Ro?(d=b.Wg+a.Qo/2,b=b.Vg+a.Po/2):(d=Math.max(b.Wg-a.Qo/2,0),b=Math.max(b.Vg-a.Po/2,0));a.Ro=h<d?-1:h<b?0:1;a.Vi=h<d||h>b?0:1;a.tu=0==a.Vi?-1:1;Math.abs(h-a.Sw)>Qa.lod_leap_smooth_threshold&&(0==a.Df||1==a.Df)&&(a.Df=a.Vi);a.Sw=h;return 0!=
a.Vi||0!=a.Df}function Ma(a,b){Y(a,!0,!1,!0);for(var h=oa("ALL",-1),d=0;d<h.length;d++){var c=h[d];c!=a&&Y(c,!1,!1,!1)}ya.NH(a,b);for(d=0;d<a.Aa.length;d++)for(c=a.Aa[d].Ia.length-1;0<=c;c--){var g=a.Aa[d].Ia[c];0!=g.Hc.length&&-1==g.Hc.indexOf(b)||ma.TH(a.Aa[d],c)}Da.eb(a)&&Da.remove_object(a);for(d=0;d<h.length;d++)h[d]!=a&&Y(h[d],!0,!0,!0);wa.VO(a,b);b=a.Vk.rb;a.Vk.rb=a;return b}function Ea(a,b){a.Vk.rb=b;Y(a,!0,!0,!0)}function X(a,b,h,d){var c=h.Kf.Fl.indexOf(d);b=a.Sc[a.Kf.Fl.indexOf(b)];h.Sc[c]=
b;a=b.name;b.name=d;for(d=0;d<h.Sc.length;d++)h.Kf.cn[d]=d!=c;return a}function Ga(a,b,h,d){for(var c=0;c<h.Sc.length;c++)h.Kf.cn[c]=!1;a.Sc[a.Kf.Fl.indexOf(b)].name=d}function Fa(a,b,h,d,c){for(var g=1;g<a.ka.qg.length;g++)xa.cz(a,a.ka.qg[g].name,a.ka.qg[g].value);if(wa.is_animated(a))for(g=0;g<a.Za.length;g++){var k=a.Za[g];if(k)switch(k.type){case wa.OBJ_ANIM_TYPE_PARTICLES:wa.set_frame(a,wa.cA(a,g),g);break;case wa.OBJ_ANIM_TYPE_MATERIAL:if(k.mp)for(var e=k.mp.length-1;0<=e;e--)-1!=k.mp[e].Hc.indexOf(b)&&
k.mp.splice(e,1)}}d&&ja.JA(a,b,function(b){if(b.tb){var h=b.tb.name;if(d[h]){var c=b.tb.ro!=d[h].ro;b.tb=za.JE(d[h]);c&&za.set_factor(a,h,b.tb.ro)}}},"PARTICLES");c&&(g=ja.Zb(a,b,"MAIN"))&&(g.Qc.set(c.Qc),g.Je=c.Je,g.Wi=c.Wi,g.he.set(c.he),g.Re.set(c.Re),g.Dk=c.Dk,g.tf.set(c.tf),g.rg=c.rg,g.ie=c.ie,g.fe=c.fe,g.oh=c.oh,g.on=c.on,g.np=c.np,g.reflect_factor=c.reflect_factor,g.Oh=c.Oh,g.ji.set(c.ji),g.parallax_scale=c.parallax_scale,g.Sh.set(c.Sh),g.shallow_water_col.set(c.shallow_water_col),g.shallow_water_col_fac=
c.shallow_water_col_fac,g.shore_water_col.set(c.shore_water_col),g.shore_water_col_fac=c.shore_water_col_fac,g.foam_factor=c.foam_factor,g.lm=c.lm,g.ri=c.ri.slice(),g.Ne=c.Ne.slice());ja.JA(a,b,function(b){for(var d=0;d<b.bg.length;d++){var c=b.bg[d],G=b.Ua[d];if("IMAGE"==G.source||"ENVIRONMENT"==G.source){var g=Ca.yv(h,c);g&&G.pl!=g.pl&&Ca.OT(a,c,g)}}})}var wa=Object(M.a)(f),La=Object(U.a)(f),ja=Object(n.a)(f),ta=Object(e.a)(f),ka=Object(m.a)(f),qa=Object(C.a)(f),S=Object(v.a)(f),va=Object(q.a)(f),
xa=Object(r.a)(f),ra=Object(T.a)(f),ma=Object(k.a)(f),za=Object(c.a)(f),Da=Object(l.a)(f),ua=Object(b.a)(f),h=Object(g.a)(f),ya=Object(ea.a)(f),Ta=Object(u.a)(f),Va=Object(F.a)(f),Ca=Object(R.a)(f),Wa=Object(O.a)(f),Ra=Object(K.a)(f),V=Object(J.a)(f),ab=Object(W.a)(f),D=Object(B.a)(f),Ua=Object(ba.a)(f),Qa=ka.wa,Ba=ka.Ed,fa={ALL:[]},Na=0,Xa=0,ib=[],jb=[],fb=[],rb=new Float32Array(3),cb=new Float32Array(4);P.Oy=0;P.Ny=1;P.qe=2;P.DATA_ID_ALL=-1;P.update=function(a){for(var b=0;b<fb.length;b++){var h=
fb[b],d=h,c=a,g=0,k=d.tH;0==k.Zx&&(k.Zx=c);c-=k.Zx;if(k.GB&&c/k.bh>=k.GB)I(d);else{c%=k.bh;if(c<k.rB)switch(k=c/(k.rB/5),c=Math.floor(k),c){case 0:g=(k-c)/2;break;case 1:g=(k-c)/2+.5;break;case 2:g=1;break;case 3:g=1-(k-c)/2;break;case 4:g=.5-(k-c)/2}d.ka.mj=g}h.ka.mj&&p(h)}if(a=fa.ARMATURE)for(b=0;b<a.length;b++)h=a[b],h.iB&&(Ra.Ea(h),h.iB=!1)};P.set_outline_intensity=function(a,b){a.ka.mj=b;p(a)};P.apply_outline_anim=function(a,b,h,d){var c=a.tH;c.Zx=0;c.rB=b;c.bh=h;c.GB=d;-1==fb.indexOf(a)&&fb.push(a)};
P.clear_outline_anim=I;P.WE=function(a,b){var h=ma.so(b?"%meta_world%"+a.name:a.name,b?"WORLD":a.type,b?"%meta_world%"+a.name:a.origin_name);if("MESH"==h.type)for(var d=0;d<a.data.materials.length;d++)h.Sc.push(a.data.materials[d]);for(d=0;d<a.re.length;d++)ma.Fq(h,a.re[d]);a.rb=h;if(b)h.nd=a.uuid,h.vl=!1,h.Mm=a.fo,h.is_dynamic=a.Dj,h.ka=ma.Hm(h.type),h.qt=a.b4w_use_default_animation,h.vm=wa.az(a.b4w_anim_behavior);else{h.nd=a.uuid;h.vl=!1;h.Mm=a.fo;h.is_dynamic=a.Dj;h.Ur=a.GD||!1;h.mg=a.b4w_vehicle;
h.is_character=a.b4w_character;h.en=a.b4w_floating;h.Jn=a.b4w_collision;h.Sb=a.b4w_collision_id;h.zu=a.b4w_correct_bounding_offset;b=a.game;h.Fd={tk:b.physics_type,Bi:b.use_ghost,tJ:b.use_sleep,mf:b.mass,yt:b.velocity_min,xt:b.velocity_max,nr:b.damping,Ls:b.rotation_damping,HR:b.lock_location_x,IR:b.lock_location_y,JR:b.lock_location_z,KR:b.lock_rotation_x,LR:b.lock_rotation_y,MR:b.lock_rotation_z,$e:b.collision_margin,Ze:b.collision_group,af:b.collision_mask,LC:b.use_collision_bounds,vu:b.collision_bounds_type,
bq:b.use_collision_compound};if(b=a.b4w_vehicle_settings)h.xg={name:b.name,og:b.part,zU:b.suspension_rest_length,oC:b.suspension_compression,qC:b.suspension_stiffness,pC:b.suspension_damping,UC:b.wheel_friction,MB:b.roll_influence,WA:b.max_suspension_travel_cm,Fr:b.force_max,Tq:b.brake_max,Qp:b.steering_max,cp:b.max_speed_angle,rr:b.delta_tach_angle,$s:b.speed_ratio,bt:b.steering_ratio,Tr:b.inverse_control,Qm:b.floating_factor,Sn:b.water_lin_damp,Tn:b.water_rot_damp,LI:b.synchronize_position};if(b=
a.b4w_floating_settings)h.Go={name:b.name,og:b.part,Qm:b.floating_factor,Sn:b.water_lin_damp,Tn:b.water_rot_damp,LI:b.synchronize_position};if(b=a.b4w_character_settings)h.rE={LV:b.walk_speed,fT:b.run_speed,sU:b.step_height,oR:b.jump_strength,OV:b.waterline};for(b=0;b<a.constraints.length;b++)d=a.constraints[b],"RIGID_BODY_JOINT"==d.type&&h.yB.push({target:d.target.rb,zS:d.pivot_type,AS:d.pivot_x,BS:d.pivot_y,CS:d.pivot_z,Cb:d.axis_x,Db:d.axis_y,Eb:d.axis_z,zV:d.use_limit_x,AV:d.use_limit_y,BV:d.use_limit_z,
vV:d.use_angular_limit_x,wV:d.use_angular_limit_y,xV:d.use_angular_limit_z,zR:d.limit_max_x,AR:d.limit_max_y,BR:d.limit_max_z,CR:d.limit_min_x,DR:d.limit_min_y,ER:d.limit_min_z,tR:d.limit_angle_max_x,uR:d.limit_angle_max_y,vR:d.limit_angle_max_z,wR:d.limit_angle_min_x,xR:d.limit_angle_min_y,yR:d.limit_angle_min_z});b=h.ka=ma.Hm("MESH"===h.type?h.is_dynamic?"DYNAMIC":"STATIC":h.type);if(a.parent){if(h.parent=a.parent.rb,"BONE"==a.parent_type&&"ARMATURE"==a.parent.type&&(h.qs=a.parent_bone),a.pinverse_tsr)if(9===
a.pinverse_tsr.length)h.ts=A.a(a.pinverse_tsr,A.b());else{h.ts=A.b();d=L.set(a.pinverse_tsr[0],a.pinverse_tsr[1],a.pinverse_tsr[2],rb);var c=a.pinverse_tsr[3],g=E.set(a.pinverse_tsr[4],a.pinverse_tsr[5],a.pinverse_tsr[6],a.pinverse_tsr[7],cb);A.t(d,c,g,h.ts)}}else a.dg_parent&&(h.parent=a.dg_parent.rb,h.Kl=!0);d=a.location;c=a.scale;ca._29(a.rotation_quaternion,cb);Ra.set_translation(h,d);Ra.set_rotation(h,cb);Ra.set_scale(h,c);h.qt=a.b4w_use_default_animation;h.vm=wa.az(a.b4w_anim_behavior);a.b4w_object_tags&&
(h.uw={title:a.b4w_object_tags.title,description:a.b4w_object_tags.description,category:a.b4w_object_tags.category});h.Fu=a.b4w_custom_prop;a.b4w_viewport_alignment&&(h.uy={YL:a.b4w_viewport_alignment.alignment,distance:a.b4w_viewport_alignment.distance});b.hide=a.b4w_hidden_on_load;b.hG=a.b4w_hide_chldr_on_load;switch(a.type){case "ARMATURE":ha.e(a,h);d=b.Mg;c=wa.VM(d);a.b4w_animation_mixing?(b.ye=new Float32Array(c.uc),b.qf=new Float32Array(c.uc),b.De=new Float32Array(c.trans),b.wf=new Float32Array(c.trans)):
(b.ye=c.uc,b.qf=c.uc,b.De=c.trans,b.wf=c.trans);for(var k in d)g=d[k],1==g.ru.length&&ha.d(g,!0,c.trans,c.uc);b.ys=c;b.lg=0;b.Gj=a.b4w_animation_mixing;break;case "MESH":b.Jj=ja.FM(a.data.b4w_boundings.bb);h.rG=a.data.is_boundings_overridden;b.cf=a.b4w_do_not_render;b.Ql=Ba.outlining_overview_mode||a.b4w_selectable;b.Jw=a.b4w_selectable;b.Ed=Ba.outlining_overview_mode||a.b4w_outlining;b.Iw=a.b4w_outlining;b.Kw=Ba.outlining_overview_mode||a.b4w_outline_on_select;b.qh=a.b4w_billboard;b.Nq=a.b4w_pres_glob_orientation;
b.Pq="BASIC";b.Oq="SPHERICAL"==a.b4w_billboard_geometry;k=b.lj;k.Gl=a.b4w_outline_settings.outline_duration;k.Hl=a.b4w_outline_settings.outline_period;k.Il=a.b4w_outline_settings.outline_relapses;b.Ql&&(b.bl=va.HF(Na),Na++);for(k=0;k<a.data.b4w_vertex_anim.length;k++)d=a.data.b4w_vertex_anim[k],h.Ld.push({name:d.name,sb:d.frame_start,$b:d.frame_end,VW:d.averaging,WW:d.averaging_interval,ZL:d.allow_nla});h.ka.Ld=h.Ld.length?!0:!1;"MESH"!=a.type&&La.va("Wrong object type: "+a.name);k=h.ka;if(a.data.b4w_shape_keys.length)for(k.Rf=
!0,d=0;d<a.data.b4w_shape_keys.length;d++)c={},c.value=a.data.b4w_shape_keys[d].value,c.name=a.data.b4w_shape_keys[d].name,k.qg.push(c);else k.Rf=!1;b.Of=a.b4w_shadow_cast;b.Be=a.b4w_shadow_receive;b.sf=a.b4w_shadow_cast_only&&b.Of;b.Pe=a.b4w_reflexible;b.ze=a.b4w_reflexible_only&&b.Pe;b.Hd=a.b4w_reflective;b.Nh=a.b4w_reflection_type;if(!b.Hd)for(k=h.Sc,d=0;d<k.length;d++)c=k[d],!c.jh||-1==c.ne.Cq.indexOf("BSDF_GLOSSY")&&-1==c.ne.Cq.indexOf("BSDF_DIFFUSE")&&-1==c.ne.Cq.indexOf("BSDF_PRINCIPLED")||
(h.ka.Hd=!0,h.ka.Nh="PBR");b.Ng=a.b4w_caustics;if(b.yf=a.b4w_wind_bending)b.Wn=a.b4w_wind_bending_angle,k=ja.HJ(ca.T(a.b4w_wind_bending_angle),b.Jj,a.scale[0]),b.Cg=k,b.Dg=a.b4w_wind_bending_freq,b.ig=a.b4w_detail_bending_freq,b.hg=a.b4w_detail_bending_amp,b.cg=a.b4w_branch_bending_amp,b.kk=a.b4w_main_bend_stiffness_col,k=a.b4w_detail_bend_colors,b.Ef.OA=k.leaves_stiffness_col,b.Ef.NA=k.leaves_phase_col,b.Ef.sB=k.overall_stiffness_col;b.df=a.b4w_dynamic_geometry;if(b.df)for(h.Vk=a,k=0;k<h.Sc.length;k++)h.Kf.Fl.push(h.Sc[k].name),
h.Kf.cn.push(!1);k=h.Sc[0];b.ve=k.Fd.ve;b.uh=k.Fd.uh;b.Wg=0;b.Vg=ma.Qy;b.nj=a.pass_index;break;case "LINE":b.gb=z.w();b.jc=z.y();b.bi=z.w();b.Yk=z.y();break;case "CAMERA":ta.ZM(a,h);ta.wM(h);break;case "LAMP":y.a(a,h);break;case "SPEAKER":h.Ra=Va.dO();b=!1;for(k=0;k<h.Aa.length;k++)if(h.Aa[k].Bb.yd){b=!0;break}b&&Va.fy(a,h);break;case "EMPTY":k=z.w(),b.gb=k,k=z.A(),b.Xc=k,a.field&&(h.Eo={type:a.field.type,FI:a.field.strength}),a.b4w_anchor&&(h.anchor={type:a.b4w_anchor.type,zo:a.b4w_anchor.detect_visibility,
hl:a.b4w_anchor.element_id,WR:a.b4w_anchor.max_width})}}Ha(h);return h};P.bV=function(a,b){var h=b.ka;if("MESH"==b.type){var d=wa.QF(a);if(d){var c=d.rb,g=c.ka.ys,k=b.ka,e=a.data;b.au=c;e=e.vertex_groups;if(e.length){c=c.ka.Mg;var G=0,p={};for(m in c){var l=ca._19("name",m,e);l&&(p[m]={yJ:l.index,Ni:c[m].Ni,Jz:G++})}k.Oi=p;var m=G;e=wa.VF();k.mi=m;m>2*e?(k.wl=!1,ua.error('too many bones for "'+a.name+'" / '+k.mi+" bones (max "+e+" with blending, "+2*e+" without blending). Skinning will be disabled.")):
k.wl=!0}g=wa.oP(g.trans,g.uc,h.Oi);d.b4w_animation_mixing?(h.ye=new Float32Array(g.uc),h.qf=new Float32Array(g.uc),h.De=new Float32Array(g.trans),h.wf=new Float32Array(g.trans)):(h.ye=g.uc,h.qf=g.uc,h.De=g.trans,h.wf=g.trans);h.ko=new Float32Array(4);h.Gq=E.create();h.ys=g;h.lg=0}if(h.Hd)if(h=b.ka,"CUBE"==h.Nh)h.Qd=Xa++,jb.push(b);else if("PLANE"==h.Nh){a:{a=a.constraints;for(d=0;d<a.length;d++)if(g=a[d],"LOCKED_TRACK"==g.type&&"REFLECTION PLANE"==g.name){if(g.target&&g.target.rb){a=g.target.rb;break a}ua.warn('Reflection plane target for object: "'+
b.name+"\" is not present on the scene. Using object's Z-axis.")}a=null}a||(a=va.mt("%reflection%"),a=ma.so(a,"EMPTY"),d=ma.Hm("EMPTY"),d.Rd=b.ka.Rd,a.ka=d,t(b,a),qa.QD(a,b,[0,0,0],null,1),Ha(a));d=null;for(g=0;g<ib.length;g++)if(ib[g]==a){d=g;break}null==d&&(d=ib.length,ib.push(a));a.ka.Gd=d;h.Gd=d;a.An.push(b)}}};P.VU=H;P.IU=function(a){if(0<=a.ka.Gd)for(var b=0;b<a.Aa.length;b++){for(var h=a.Aa[b].Bb.sa.Ya,d=0;d<ib.length;d++){var c=ib[d];if(c.ka.Gd==a.ka.Gd){var g=c.An.indexOf(a);-1<g&&c.An.splice(g,
1);var k=[];D.Na(h,function(a,b){b.type!=Ta.de&&b.type!=Ta.Ue||b.xp!=c||k.push(b)});for(g=0;g<k.length;g++){var e=k[g];D.rf(h,D.fA(h,e));ya.IE(e)}D.$q(h)}}a.Aa[b].Bb.sa.rj=Ua.zz(h)}};P.HU=function(a){if(0<=a.ka.Qd)for(var b=0;b<a.Aa.length;b++){for(var h=a.Aa[b].Bb.sa.Ya,d=0;d<jb.length;d++){var c=jb[d];if(c.ka.Qd==a.ka.Qd){var g=[];D.Na(h,function(a,b){b.type!=Ta.xd&&b.type!=Ta.Ge||b.xp!=c||g.push(b)});for(var k=0;k<g.length;k++){var e=g[k];D.rf(h,D.fA(h,e));ya.IE(e)}D.$q(h)}}a.Aa[b].Bb.sa.rj=Ua.zz(h)}};
P.eX=t;P.gN=d;P.cV=function(a){for(var b=0;b<a.length;b++){var h=a[b];!h.ka||"DYNAMIC"!=h.ka.type&&"CAMERA"!=h.ka.type||Ra.Ea(h);h.qt&&wa.qH(h)&&(wa.apply_def(h),h.Za.length&&wa.play(h,null,wa.SLOT_ALL))}};P.iE=function(a){if(a.b4w_hidden_on_load||a.dg_parent&&a.dg_parent.Dj||a.parent&&a.parent.Dj)return!0;switch(a.type){case "MESH":return la(a);case "EMPTY":return pa(a);default:return!0}};P.get_meta_tags=function(a){return ca.O(a.uw)};P.get_custom_prop=function(a){return a.Fu};P.cleanup=function(){Xa=
Na=0;ib.length=0;jb.length=0;fb.length=0;fa={ALL:[]}};P.copy=function(b,h,d){var c=ma.get_dg_parent(b);c=c?ma.IF(c.name,h):h;var g=w(c);h=ma.so(c+g,b.type,h+g);h.vl=b.vl;h.Vk=b.Vk;h.Kf.Fl=ma.ir(b.Kf.Fl);h.Kf.cn=ma.ir(b.Kf.cn);h.is_dynamic=b.is_dynamic;h.Ur=b.Ur;h.qt=b.qt;h.Mm=b.Mm;h.ka=ma.qz(b.ka);h.ka.dk=!1;h.uw=ma.jr(b.uw);h.Fu=ma.jr(b.Fu);t(b,h);h.ho=ma.ir(b.ho);h.parent=ma.ir(b.parent);h.Kl=b.Kl;h.qs=b.qs;h.Ld=ma.ir(b.Ld);h.vm=b.vm;!b.xa||b.mg||b.is_character||b.en||(h.Jn=b.Jn,h.xa=null);h.Sb=
b.Sb;h.zu=b.zu;h.Fd=ma.jr(b.Fd);c=[];for(g=0;g<b.Aa.length;g++){var k=h.Aa[g],e=b.Aa[g].Ia;if(d){for(var p=k.Ia,G=0;G<e.length;G++)if(!e[G].yh){var l=ma.jr(e[G]);l.$a=xa.uN(e[G].$a);ma.Ig(h,k.Bb,l);c.push(e[G].$a)}for(G=0;G<e.length;G++)if(e[G].yh){l=ma.jr(e[G]);ma.Ig(h,k.Bb,l);for(var m=0;m<c.length;m++)c[m]==e[G].$a&&(l.$a=p[m].$a)}for(G=0;G<p.length;G++)p[G].$a&&xa.IC(p[G].$a),Qa.Zy&&p[G].$a&&ab.zM(p[G]),p[G].El=ja.OP(p[G],h.ka,h.nd),ja.LU(p[G]);Ca.ZT(p)}else for(G=0;G<e.length;G++)ma.Ig(h,k.Bb,
e[G])}for(c=0;c<b.Sc.length;c++)h.Sc.push(a.a(b.Sc[c]));ma.RB(h,!1);Ha(h);h.ka.FA=!0;h.ka.Vv=d;h.ka.bl=va.HF(Na);Na++;return h};P.RF=function(a,b){var h=[],d=a.animation_data,c=a.data?a.data.animation_data:null;d&&d.action&&(d=d.action,(d.sa.type==wa.OBJ_ANIM_TYPE_OBJECT||d.sa.type==wa.OBJ_ANIM_TYPE_ARMATURE&&"ARMATURE"==a.type||d.sa.type==wa.PK&&"LAMP"==a.type||d.sa.type==wa.OK&&b)&&h.push(wa.mG(null,d)));c&&c.action&&("SPEAKER"==a.type||"LAMP"==a.type)&&h.push(wa.mG(null,c.action));"MESH"==a.type&&
h.push.apply(h,wa.UP(a));b&&h.push.apply(h,wa.VP(a));return h};P.update_boundings=function(a){for(var b=a.ka,d=null,c=a.Aa[0].Ia,g=0;g<c.length;g++){var k=c[g],e=a.Aa[0].Lg[g];if(k.$a&&e.ag&&e.Bf){var p=xa.Lo("a_position");if(p=xa.kA(k.$a.Pc,p)){var G=k.$a.mc.a_position.offset,l=k.$a.mc.a_position.length+G;ja.XU(k,p.subarray(G,l));ma.kJ(k,b.na,e);"MAIN"==k.type&&(d?z.D(d,k.Xb.Bf):d=z.n(k.Xb.Bf))}}}d=d||z.w();if(b.qh)ma.gJ(a,d);else{e=[];for(g=0;g<c.length;g++)if(k=c[g],"MAIN"==k.type&&(p=xa.Lo("a_position"),
p=xa.kA(k.$a.Pc,p)))k=c[g].$a.mc,G=k.a_position.offset,l=k.a_position.length+G,e.push(p.subarray(G,l));ma.hV(a,d,e)}if(Qa.debug_view)for(g=0;g<c.length;g++)if("DEBUG_VIEW"===c[g].type&&c[g].Uj){a=b.jc;b=h.Yz(1,a.Da);xa.SH(b,[a.Cb[0],a.Db[1],a.Eb[2]],a.Da);xa.Mx(b,1,!0);b.hb.a_polyindex=xa.av(b);ja.$I(c[g],b);break}};P.tc=N;P.ZF=function(a,b,h){b=fa[b]||[];for(var d=[],c=0;c<b.length;c++){var g=b[c];if(!(g.ka.Rd!=h&&-1!=h||g.vl))for(var k=g.Aa,e=0;e<k.length;e++)k[e].Bb==a&&d.push(g)}return d};P.get_all_objects=
oa;P.get_first_character=function(a){var b=fa.MESH;if(b)for(var h=0;h<b.length;h++){var d=b[h];if(Da.eG(d))for(var c=d.Aa,g=0;g<c.length;g++)if(c[g].Bb==a)return d}return null};P.qp=Y;P.get_selectable_objects=function(){var a=[],b=fa.MESH;if(b)for(var h=0;h<b.length;h++){var d=b[h];d.ka.Ql&&!d.vl&&a.push(d)}return a};P.get_outlining_objects=function(){var a=[],b=fa.MESH;if(b)for(var h=0;h<b.length;h++){var d=b[h];d.ka.Ed&&!d.vl&&a.push(d)}return a};P.Cd=function(a,b,h,d){var c=null,g=fa.ALL;switch(a){case P.Oy:c=
Q(b,g,!0,h,d);break;case P.Ny:a:{for(a=0;a<g.length;a++)if(c=g[a],c.oe==h&&(c.ka.Rd==d||-1==d)){var k=ma.get_dg_parent(c);if(k&&k.oe==b)break a}c=null}break;case P.qe:a:{for(d=0;d<g.length;d++){a=g[d];c=b.length-1;k=a;for(var e=!0;0<=c&&e;)e=k&&k.oe==b[c]&&(k.ka.Rd==h||-1==h),k&&(k=ma.get_dg_parent(k)),c--;if(e&&!k){c=a;break a}}c=null}}return c};P.get_world_by_name=function(a,b){return Q("%meta_world%"+a,fa.WORLD,!0,b)};P.zv=function(a){return a.oe.replace("%meta_world%","")};P.pick_object=function(a,
b){var h=ya.Bh();if(!h)return ua.error("No active scene"),null;var d=ya.yc(h,Ta.mh);d&&d.enable_hmd_stereo&&(b=S.get_canvas(),a=b.clientHeight/2,b=b.clientWidth/2);if(d=V.xS(a,b))return d;a=ya.yS(h,a,b);if(!a)return null;h=N(h,"MESH",-1);for(b=0;b<h.length;b++){d=h[b].ka;var c=d.bl;if(c&&3>Math.abs(255*c[0]-a[0])&&3>Math.abs(255*c[1]-a[1])&&3>Math.abs(255*c[2]-a[2]))return d.Ed&&d.Kw&&(Ba.outlining_overview_mode?P.apply_outline_anim(h[b],Ba.Gl,Ba.Hl,Ba.Il):(a=d.lj,P.apply_outline_anim(h[b],a.Gl,a.Hl,
a.Il))),h[b]}return null};P.set_wind_params=function(a,b){a=N(a,"EMPTY",-1);for(var h=0;h<a.length;h++){var d=a[h];if(d.Eo&&"WIND"===d.Eo.type){var c=d;break}}if(!c)return ua.error("There is no wind on the scene"),0;"number"==typeof b.wind_dir&&(a=ca.T(b.wind_dir),L.set(Math.sin(a),-Math.cos(a),0,rb),ca.U(rb,ca.f,cb),Ra.set_rotation(c,cb));"number"==typeof b.wind_strength&&(c.Eo.FI=b.wind_strength);H(c)};P.remove_object=function(a){qa.hN(a)&&qa.remove(a);var b=fa.ALL,h=fa[a.type],d=b.indexOf(a);a=
h.indexOf(a);-1!=d&&b.splice(d,1);-1!=a&&h.splice(a,1)};P.lS=Ha;P.sY=function(a){return fa[a.type]&&-1<fa[a.type].indexOf(a)};P.YU=function(a,b){if(a.ka.dk){var h=a.ka,d=b.sa;if(h.dk)for(var c=Ra.get_translation(b.Ii,rb),g=0;g<a.Aa.length;g++)if(a.Aa[g].Bb==b)for(var k=0;k<a.Aa[g].Ia.length;k++){var e=a.Aa[g].Ia[k],G=e.yl,p="SHADOW"==e.type&&"RECEIVE"==e.fc&&!Qa.zp;Qa.lod_smooth_transitions&&!p&&(p=d.NR,"ALL"==p||"NON-OPAQUE"==p&&(e.Ob||e.Ej))&&(G.st=!0);ia(e,h,c);G.Df=G.Vi;G.Qo=Math.min(d.RG,.6*
h.ik);G.Po=Math.min(d.RG,.6*h.jk)}}};P.ZU=ia;P.CT=function(a){var b=a.ka,h=b.Cg,d=b.Dg,c=b.ig,g=b.hg,k=b.cg;a=a.Aa;for(b=0;b<a.length;b++)for(var e=a[b].Ia,G=0;G<e.length;G++){var p=e[G].$a,l=p.mc,t=l.au_wind_bending_amp,m=l.au_wind_bending_freq,f=l.au_detail_bending_amp,B=l.au_detail_bending_freq;l=l.au_branch_bending_amp;if(m){var u=Array.apply(null,Array(m.length)).map(function(){return d});xa.nt(p,xa.bo,new Float32Array(u),m.offset)}t&&(u=Array.apply(null,Array(t.length)).map(function(){return h}),
xa.nt(p,xa.bo,new Float32Array(u),t.offset));f&&(u=Array.apply(null,Array(f.length)).map(function(){return g}),xa.nt(p,xa.bo,new Float32Array(u),f.offset));B&&(u=Array.apply(null,Array(B.length)).map(function(){return c}),xa.nt(p,xa.bo,new Float32Array(u),B.offset));l&&(u=Array.apply(null,Array(l.length)).map(function(){return k}),xa.nt(p,xa.bo,new Float32Array(u),l.offset))}};P.inherit_material=function(a,b,h,d){if(a.ka.df&&h.ka.df){var c=ja.Zb(a,b,"MAIN"),g=null;ja.JA(h,d,function(a){g||(g={});
a.tb&&(g[a.tb.name]=a.tb)},"PARTICLES");for(var k=Ma(h,d),e=X(a,b,h,d),G=ya.get_active(),p=0;p<h.Aa.length;p++){var l=h.Aa[p].Bb;ya.set_active(l);var t=N(l,"LAMP",0),m=h.Aa[p].Ia;h.Aa[p].Ia=[];h.Aa[p].Lg=[];ja.LF(l,[h.Vk],t,[]);ja.Au(h,ya.tv(l),l);ya.UD(l,[h]);ya.append_object(l,h,!1);Da.append_object(h,l);for(t=0;t<m.length;t++)ma.Ig(h,l,m[t])}Ga(a,b,h,e);Ea(h,k);Fa(h,d,a,g,c);ya.set_active(G)}};P.create_line=function(a){a=a||"";a+=w(a);a=ma.so(a,"LINE");a.ka=ma.Hm("EMPTY");a.is_dynamic=!0;ja.KF(ya.Bh(),
[a]);ya.append_object(ya.Bh(),a);Ha(a);return a};P.create_empty=function(a){a=a||"";a+=w(a);a=ma.so(a,"EMPTY");a.ka=ma.Hm("EMPTY");a.is_dynamic=!0;ma.Fq(a,ya.Bh());Ha(a);return a};P.NP=function(a,b){var h=b.ka,d=z.n(h.Jj);h.qh?ma.gJ(b,d):ma.gV(b,d,a.data.b4w_boundings)};P.set_nodemat_value=function(a,b,h,d){for(var c=ma.is_world(a),g=!1,k=0;k<a.Aa.length;k++)for(var e=a.Aa[k].Ia,G=0;G<e.length;G++){var p=e[G];if(c||-1!=p.Hc.indexOf(b))g|=ja.set_nodemat_value(p,h,d)}g&&c&&ya.gy(a);return g};P.set_nodemat_rgb=
function(a,b,h,d,c,g){for(var k=ma.is_world(a),e=!1,G=0;G<a.Aa.length;G++)for(var p=a.Aa[G].Ia,l=0;l<p.length;l++){var t=p[l];if(k||-1!=t.Hc.indexOf(b))e|=ja.set_nodemat_rgb(t,h,d,c,g)}e&&k&&ya.gy(a);return e};P.get_nodemat_value=function(a,b,h){return ja.get_nodemat_value(ja.wh(a,b,"MAIN")||ja.wh(a,b,"PARTICLES"),h)};P.get_nodemat_rgb=function(a,b,h,d){return ja.get_nodemat_rgb(ja.wh(a,b,"MAIN")||ja.wh(a,b,"PARTICLES"),h,d)}});w.a=f},function(D,w,f){D=f(0);var M=f(25),U=f(14),n=f(59),z=f(57);f(8);
var e=f(12),m=f(9),C=f(10),v=f(23),q=f(6),r=f(2),y=f(3);f=Object(D.a)("__transform",function(a,f){function k(a,b){R.Dh(a)?q.v(b,R.Ah(a)):q.v(b,a.ka.na)}function c(a,b){var c=a.ka;R.Dh(a)?(q.r(b,c.na),b=R.ov(a),b=q.p(b,W),q.q(b,c.na,R.Ah(a))):q.r(b,c.na)}function l(a,b){R.Dh(a)?q.r(b,R.Ah(a)):q.r(b,a.ka.na)}function b(a,b){q.g(a.ka.na,b);return b}function g(a,b){R.Dh(a)?q.g(R.Ah(a),b):q.g(a.ka.na,b);return b}function E(a,b){R.Dh(a)?q.a(b,R.Ah(a)):q.a(b,a.ka.na)}function T(a,b){R.Dh(a)?q.a(R.Ah(a),
b):q.a(a.ka.na,b);return b}function u(a){var b=a.ka,c=a.Aa,g=a.type;R.TU(a,ba);"CAMERA"==g&&F.RU(a);M.h(b.gb,b.na,b.bi);M.k(b.Xc,b.na,b.Ye);for(var k=0;k<c.length;k++)for(var d=c[k].Ia,e=0;e<d.length;e++)K.kJ(d[e],b.na,c[k].Lg[e]);switch(g){case "MESH":a.gH&&q.p(a.ka.na,a.ka.Dy);if(d=a.au)k=d.ka.na,0!=k[3]&&0!=k[4]&&0!=k[5]?(q.p(k,W),q.q(W,b.na,W),q.l(W,b.ko),q.g(W,b.Gq)):q.l(k,b.ko);b.Gr=!0;break;case "CAMERA":for(k=0;k<c.length;k++)F.SU(a,c[k]);break;case "SPEAKER":ca.jU(a,ba,I);break;case "LAMP":z.g(a)}d=
q.j(b.na,L);var l=q.g(b.na,J);for(k=0;k<c.length;k++)if(e=c[k],e.Uv){var m=e.Bb,f=m.sa;switch(g){case "MESH":b.Of&&A.SB(m);f=e.Tj;null!=b.Qd&&f&&A.cJ(f,d);break;case "EMPTY":O.VU(a);break;case "CAMERA":if(A.get_active()==m&&A.ml(m)==a){A.iT(m);if(f.Id){(f.Id.enable_csm||f.Id.dP)&&A.SB(m);var B=K.kb(a,m).Qa[0];A.mV(B,f.Ya)}ca.FR(m,d,l,ba,I)}break;case "LAMP":A.$p(a,m)}f=e.oj;B=a.An;if(B.length)for(e=0;e<f.length;e++){var P=f[e].qa;A.eJ(f[e],d,l);K.fJ(B,P.ad);F.RT(P,A.ml(m))}}b=a.bf;for(k=0;k<b.length;k++)u(b[k]);
a=a.wz;for(k=0;k<a.length;k++)b=a[k],d=b[0],R.PU(d,b[1])}var F=Object(U.a)(a),R=Object(n.a)(a),O=Object(e.a)(a),K=Object(m.a)(a),A=Object(C.a)(a),ca=Object(v.a)(a),L=new Float32Array(3),ha=new Float32Array(3),J=new Float32Array(4),W=q.b(),B=q.b(),ba=0,I=0;f.update=function(a){ba=a;I++};f.set_translation=function(a,b){var c=a.ka;R.Dh(a)?(q.v(b,c.na),b=R.ov(a),b=q.p(b,W),q.q(b,c.na,R.Ah(a))):q.v(b,c.na)};f.set_translation_rel=k;f.get_translation=function(a,b){q.j(a.ka.na,b);return b};f.get_translation_rel=
function(a,b){R.Dh(a)?q.j(R.Ah(a),b):q.j(a.ka.na,b);return b};f.set_rotation=c;f.set_rotation_rel=l;f.get_rotation=b;f.get_rotation_rel=g;f.set_rotation_euler=function(a,b){b=r.Y(b,J);c(a,b)};f.set_rotation_euler_rel=function(a,b){b=r.Y(b,J);l(a,b)};f.get_rotation_euler=function(a,c){a=b(a,J);return c=r._36(a,c)};f.get_rotation_euler_rel=function(a,b){a=g(a,J);return b=r._36(a,b)};f.set_scale=function(a,b){var c=a.ka;R.Dh(a)?(q.s(b,c.na),b=R.ov(a),b=q.p(b,W),q.q(b,c.na,R.Ah(a))):q.s(b,c.na)};f.set_scale_rel=
function(a,b){var c=a.ka;R.Dh(a)?q.s(b,R.Ah(a)):q.s(b,c.na)};f.get_scale=function(a,b){return q.i(a.ka.na,b)};f.get_scale_rel=function(a,b){return R.Dh(a)?q.i(R.Ah(a),b):q.i(a.ka.na,b)};f.set_tsr=function(a,b){q.a(b,a.ka.na);R.Dh(a)&&(b=R.ov(a),b=q.p(b,W),q.q(b,a.ka.na,R.Ah(a)))};f.set_tsr_rel=E;f.get_tsr=function(a,b){return q.a(a.ka.na,b)};f.get_tsr_rel=T;f.get_object_size=function(){var a=y.create();return function(b){var c=b.ka;b=c.Jj;var g=q.i(c.na,a);c=g[0]*(b.max_x-b.min_x);var k=g[1]*(b.max_y-
b.min_y);b=g[2]*(b.max_z-b.min_z);return.5*Math.sqrt(c*c+k*k+b*b)}}();f.get_object_center=function(a,b,c){b?(a=a.ka,y.copy(a.Ye.Da,c)):(a=a.ka,b=a.Jj,c[0]=(b.max_x+b.min_x)/2,c[1]=(b.max_y+b.min_y)/2,c[2]=(b.max_z+b.min_z)/2,q.D(c,a.na,c));return c};f.move_local=function(a,b,c,g){var e=T(a,W),d=L;d[0]=b;d[1]=c;d[2]=g;q.D(d,e,d);k(a,d)};f.NB=function(a,b){var c=T(a,W);b=q.r(b,q.m(B));q.q(c,b,b);E(a,b)};f.Ea=u;f.distance=function(a,b){a=q.j(a.ka.na,L);b=q.j(b.ka.na,ha);return y.dist(a,b)};f.ns=function(a,
b){a=q.j(a.ka.na,L);return y.dist(a,b)}});w.a=f},function(D,w,f){D=f(0);var M=f(5),U=f(25),n=f(15),z=f(21),e=f(42),m=f(9),C=f(1),v=f(8),q=f(10),r=f(11),y=f(13),a=f(6),T=f(2),k=f(3),c=f(7);f=Object(D.a)("__camera",function(l,b){function g(a,b,h,d,c){xa.set_translation(a,b);h&&B(a,b,h);ba(a,d);I(a,c)}function f(a,b,h,d,c,g,k,e){var G=a.ka;xa.set_translation(a,b);G.pivot.set(h);B(a,b,h);ba(a,d);I(a,c);H(a,g);t(a,k);G.use_panning=e}function ea(a,b,h,c,g,k,e,l){var G=a.ka;xa.set_translation(a,b);G.$c.set(h);
B(a,b,h);da(a,c);P(a,g);d(a,k);la(a,e);G.Xi=l}function u(b){b={type:b,name:"",vI:1,width:0,height:0,Hf:null,Hr:null,wc:null,gg:null,Wb:0,Rc:0,Fo:"VERTICAL",near:0,far:0,left:0,right:0,top:0,bottom:0,Vd:c.create(),na:a.c(),Kc:new Float32Array(16),pq:new Float32Array(16),Bt:{trans:k.create(),angle:0},gc:new Float32Array(16),zg:new Float32Array(16),sy:new Float32Array(16),AB:new Float32Array(16),Ph:new Float32Array(16),direction:new Float32Array(3),Ag:a.c(),ty:a.c(),Fs:a.c(),Yw:a.c(),Ts:a.c(),dof_distance:0,
dof_front_start:0,dof_front_end:0,dof_rear_start:0,dof_rear_end:0,dof_power:0,dof_bokeh_intensity:0,dof_object:null,dof_bokeh:!1,te:!1,dof_on:!1,kw:new Float32Array(3),Vm:R(),Wl:0,tg:0,ad:null,Ti:null,mr:null,Cu:new Float32Array(4),tp:new Float32Array(4)};b.Vd[0]=b.Vd[2]=0;b.Vd[1]=b.Vd[3]=0;return b}function F(b,h){var d=u(b.type);d.name=b.name;d.vI=b.vI;d.width=b.width;d.height=b.height;h||(d.Hf=b.Hf,d.Hr=b.Hr,d.wc=b.wc,d.gg=b.gg);d.Wb=b.Wb;d.Fo=b.Fo;d.Rc=b.Rc;d.near=b.near;d.far=b.far;d.left=b.left;
d.right=b.right;d.top=b.top;d.bottom=b.bottom;c.copy(b.Vd,d.Vd);a.a(b.na,d.na);z.copy(b.Kc,d.Kc);z.copy(b.pq,d.pq);d.Bt=T.O(b.Bt);z.copy(b.gc,d.gc);z.copy(b.zg,d.zg);z.copy(b.sy,d.sy);z.copy(b.AB,d.AB);z.copy(b.Ph,d.Ph);d.direction.set(b.direction);a.a(b.Ag,d.Ag);a.a(b.ty,d.ty);a.a(b.Fs,d.Fs);a.a(b.Yw,d.Yw);a.a(b.Ts,d.Ts);d.dof_distance=b.dof_distance;d.dof_front_start=b.dof_front_start;d.dof_front_end=b.dof_front_end;d.dof_rear_start=b.dof_rear_start;d.dof_rear_end=b.dof_rear_end;d.dof_power=b.dof_power;
d.dof_bokeh_intensity=b.dof_bokeh_intensity;d.dof_object=b.dof_object;d.dof_bokeh=b.dof_bokeh;d.te=b.te;d.dof_on=b.dof_on;k.copy(b.kw,d.kw);h=b.Vm;var g=d.Vm;c.copy(h.left,g.left);c.copy(h.right,g.right);c.copy(h.top,g.top);c.copy(h.bottom,g.bottom);c.copy(h.near,g.near);c.copy(h.far,g.far);d.Wl=b.Wl;d.tg=b.tg;b.ad&&(d.ad=c.clone(b.ad));if(b.Ti){h=b.Ti.length;d.Ti=Array(h);for(g=0;g<h;g++)d.Ti[g]=k.clone(b.Ti[g]);d.mr=new Float32Array(b.mr)}c.copy(b.Cu,d.Cu);c.copy(b.tp,d.tp);return d}function R(){return{left:new Float32Array([0,
0,0,0]),right:new Float32Array([0,0,0,0]),top:new Float32Array([0,0,0,0]),bottom:new Float32Array([0,0,0,0]),near:new Float32Array([0,0,0,0]),far:new Float32Array([0,0,0,0])}}function O(a){switch(a){case "STATIC":return b.MS_STATIC;case "TARGET":return b.MS_TARGET_CONTROLS;case "EYE":return b.MS_EYE_CONTROLS;case "HOVER":return b.MS_HOVER_CONTROLS;default:ja.va("Unknown move style")}}function K(a){var h=u(a);if(a==b.Wc)return h;switch(a){case b.qd:ha(h,ra,.1,1E3);break;case b.Xe:ha(h,2.5,.1,1E3);
break;case b.Wf:break;case b.Zh:break;case b.Cj:break;case b.fd:case b.rd:case b.Vf:case b.Af:ja.va("Stereo camera may only be created from perspective one");break;default:ja.va("Unknown camera type")}return h}function A(a,h,d){a.type!=b.fd&&a.type!=b.rd&&a.type!=b.Vf&&a.type!=b.Af&&ja.va("set_stereo_params(): wrong camera type");if(a.type==b.fd||a.type==b.rd)a.Wl=h;a.tg=d;Y(a,!1);if(S.zb()&&(h=S.get_active(),a=h.sa.Id))for(h=ka.kb(S.ml(h),h).Qa,d=0;d<h.length;d++)X(h[d],a)}function ca(a,b,h){var d=
Va,c=Ca;0<k.dot(b,T.f)?(k.cross(T.d,b,d),k.normalize(d,d)):k.copy(T.f,d);k.cross(b,d,c);var g=T._34(a,T.f,Wa),G=T._34(a,T.b,Ra);k.normalize(g,g);k.normalize(G,G);a=-Math.asin(k.dot(g,b));b=k.dot(G,b);g=Math.abs(a)>Math.PI/4?k.scale(G,-T._50(a),V):k.scale(g,-T._50(Math.asin(b)),D);G=Math.atan(Math.abs(k.dot(c,g)/k.dot(d,g)));0<b&&(a=T._50(a)*Math.PI-a);b=G;0>k.dot(d,g)&&(b=Math.PI-b);0>k.dot(c,g)&&(b=2*Math.PI-b);h[0]=b;h[1]=a;return h}function L(a){switch(a.Fo){case "AUTO":return 1<a.Wb?wa(a)?a.Rc/
a.Wb:2*Math.atan(Math.tan(a.Rc/2)/a.Wb):a.Rc;case "HORIZONTAL":return wa(a)?a.Rc/a.Wb:2*Math.atan(Math.tan(a.Rc/2)/a.Wb);case "VERTICAL":return a.Rc}}function ha(a,h,d,c){switch(a.type){case b.qd:case b.fd:case b.rd:a.Rc=h;a.Wb=1;break;case b.Xe:a.Rc=h;a.Wb=1;break;case b.Vf:case b.Af:break;default:ja.va("set_frustum(): Unsupported camera type: "+a.type)}a.near=d;a.far=c}function J(a,b){Y(a,!0);var h=Ua,d=Ba;z.invert(a.Kc,d);z.transpose(d,d);c.transformMat4(a.ad,d,h);d=Qa;d[0]=(T._50(h[0])+a.gc[8])/
a.gc[0];d[1]=(T._50(h[1])+a.gc[9])/a.gc[5];d[2]=-1;d[3]=(1+a.gc[10])/a.gc[14];c.scale(h,2/(h[0]*d[0]+h[1]*d[1]+h[2]*d[2]+h[3]*d[3]),h);a.gc[2]=h[0];a.gc[6]=h[1];a.gc[10]=h[2]+1;a.gc[14]=h[3];Q(a);b||Ha(a)}function W(a,b,h){h=k.subtract(h,b,Va);k.length(h)&&(k.normalize(h,h),h=T._48(T.c,h,bb),xa.set_rotation(a,h));xa.set_translation(a,b)}function B(a,b,h){var d=a.ka,c=rb(a);W(a,b,h);c?(b=k.copy(d.od,Va),k.negate(b,b),fb(a,b,!0)):fb(a,d.od,!0)}function ba(a,d){var c=a.ka;d?(c.zc=c.zc||{},c.zc.left=
d.left,c.zc.right=d.right,c.zc.ap=d.left,c.zc.Ap=d.right,c.zc.camera_space=!!d.camera_space,c=a.ka,!(d=c.zc)||c.cc!=b.MS_EYE_CONTROLS&&c.cc!=b.MS_TARGET_CONTROLS||(a=Na(a,h),d.camera_space?(d.left+=a[0],d.right+=a[0]):(d.ap-=a[0],d.Ap-=a[0]),d.left=T.A(d.left),d.right=T.A(d.right),d.ap=T.A(d.ap),d.Ap=T.A(d.Ap))):c.zc=null}function I(a,b){var h=a.ka;b?(h.Hb=h.Hb||{},h.Hb.down=b.down,h.Hb.up=b.up,h.Hb.Bo=b.down,h.Hb.Zp=b.up,h.Hb.camera_space=!!b.camera_space,p(a)):h.Hb=null}function P(a,b){var d=a.ka;
b||(b=Na(a,h),b={down:b[1],up:b[1]});d.Hb=d.Hb||{};d.Hb.down=b.down;d.Hb.up=b.up;p(a);d.rc&&d.Hb&&Qb(a)}function p(a){var d=a.ka,c=d.Hb;if(c)switch(d.cc){case b.MS_EYE_CONTROLS:case b.MS_TARGET_CONTROLS:a=Na(a,h);c.camera_space?(c.up+=a[1],c.down+=a[1]):(c.Zp-=a[1],c.Bo-=a[1]);c.up=T.B(c.up,-Math.PI,Math.PI);c.down=T.B(c.down,-Math.PI,Math.PI);c.Zp=T.B(c.Zp,-Math.PI,Math.PI);c.Bo=T.B(c.Bo,-Math.PI,Math.PI);break;case b.MS_HOVER_CONTROLS:c.up=T.B(c.up,-Math.PI,Math.PI),c.down=T.B(c.down,-Math.PI,Math.PI),
c.up=T.M(c.up,-Math.PI/2,0),c.down=T.M(c.down,-Math.PI/2,0)}}function da(a,b){var h=a.ka;b||(b=xa.ns(a,h.$c),b={min:b,max:b});h.rc=h.rc||{};h.rc.min=b.min;h.rc.max=b.max;h.rc&&h.Hb&&Qb(a)}function H(a,b){a=a.ka;b?(a.rc=a.rc||{},a.rc.min=b.min,a.rc.max=b.max):a.rc=null}function t(a,b){a=a.ka;b?(a.Oe=a.Oe||{},a.Oe.min_z=b.min_z,a.Oe.max_z=b.max_z):a.Oe=null}function d(a,b){a=a.ka;b?(a.le=a.le||{},a.le.min=b.min,a.le.max=b.max):a.le=null}function la(a,b){a=a.ka;b?(a.me=a.me||{},a.me.min=b.min,a.me.max=
b.max):a.me=null}function na(a){var d=a.ka,c=d.cc;if(c===b.MS_TARGET_CONTROLS||c===b.MS_EYE_CONTROLS){if(d.zc){var g=d.zc.left,k=d.zc.right,G=Na(a,h);(G=c==b.MS_TARGET_CONTROLS?T.H(G[0],g,k):T.H(G[0],k,g))&&(c==b.MS_TARGET_CONTROLS?Aa(a,G,0):pb(a,G,0))}d.Hb&&(g=d.Hb.down,k=d.Hb.up,G=Na(a,h),(G=c==b.MS_TARGET_CONTROLS?T.H(G[1],k,g):T.H(G[1],g,k))&&(c==b.MS_TARGET_CONTROLS?Aa(a,0,G):pb(a,0,G)));c===b.MS_TARGET_CONTROLS&&d.rc&&Pb(a)}c===b.MS_TARGET_CONTROLS&&d.Oe&&wb(a);c===b.MS_HOVER_CONTROLS&&(Ia(a),
d=a.ka,c=Na(a,h)[1],(d=T.H(c,d.Hb.up,d.Hb.down))&&N(a,0,d))}function pa(a,b,h,d){a=Na(a,Ta);d[0]=b-a[0];d[1]=h-a[1];return d}function Aa(a,b,h){hb(a,a.ka.pivot,b,h)}function w(a,b,h){b=pa(a,b,h,ya);Aa(a,b[0],b[1])}function N(a,b,h){var d=a.ka;d.Xi||(b=0);hb(a,d.$c,b,h);h&&Qb(a)}function oa(a,b,h){b=pa(a,b,h,ya);N(a,b[0],b[1])}function Y(a,h){switch(a.type){case b.qd:case b.Wf:z.perspective(L(a),a.Wb,a.near,a.far,a.gc);break;case b.Xe:case b.Zh:var d=L(a),c=d*a.Wb;z.ortho(-c,c,-d,d,a.near,a.far,a.gc);
break;case b.Cj:z.ortho(a.left,a.right,a.bottom,a.top,a.near,a.far,a.gc);break;case b.fd:case b.rd:c=Math.tan(L(a)/2);d=a.near*c;var g=a.Wb*a.Wl*c;a.type==b.fd?(c=g-a.tg/2,g+=a.tg/2):(c=g+a.tg/2,g-=a.tg/2);c=-(a.near/a.Wl*c);g*=a.near/a.Wl;z.frustum(c,g,-d,d,a.near,a.far,a.gc);a.left=c;a.right=g;break;case b.Vf:case b.Af:S.zb()&&(d=S.get_active(),(d=S.yc(d,va.mh))&&d.enable_hmd_stereo?(d=Math.tan(a.Vd[1]),c=Math.tan(a.Vd[2]),g=Math.tan(a.Vd[3]),a.top=a.near*Math.tan(a.Vd[0]),a.right=a.near*d,a.bottom=
-a.near*c,a.left=-a.near*g,z.frustum(a.left,a.right,a.bottom,a.top,a.near,a.far,a.gc)):(a.top=a.near*Math.tan(L(a)/2),a.bottom=-a.top,a.right=a.top*a.Wb,a.left=-a.right,z.perspective(L(a),a.Wb,a.near,a.far,a.gc)));break;case b.Wc:return;default:ja.va("Wrong camera type: "+a.type)}Q(a);h||Ha(a)}function Q(a){z.translate(a.gc,a.Bt.trans,a.gc);z.rotateZ(a.gc,a.Bt.angle,a.gc)}function Ha(a){ia(a);Ma(a);T._0(a.zg,a.Vm)}function ia(a){z.copy(a.Kc,a.zg);z.multiply(a.gc,a.zg,a.zg);z.invert(a.zg,a.sy)}function Ma(a){z.copy(a.Kc,
a.Ph);a.Ph[12]=0;a.Ph[13]=0;a.Ph[14]=0;a.Ph[15]=1;z.multiply(a.gc,a.Ph,a.Ph);z.invert(a.Ph,a.Ph)}function Ea(a,h,d,c,g){c||(c=new Float32Array(24));h||(h=a.near);d||(d=a.far);switch(a.type){case b.Wc:ja.va("Extraction from NONE camera is not possible");break;case b.qd:case b.Wf:var k=h*Math.tan(L(a)/2);var G=-k;var e=k*a.Wb;var l=-e;var p=d/h*k;var t=-p;var m=p*a.Wb;var f=-m;break;case b.Xe:case b.Zh:G=L(a);l=G*a.Wb;k=p=G;e=m=l;G=t=-G;l=f=-l;break;case b.Cj:k=p=a.top;e=m=a.right;G=t=a.bottom;l=f=
a.left;break;case b.fd:case b.rd:p=h/a.near;k=h*Math.tan(L(a)/2);G=-k;e=a.right*p;l=a.left*p;f=d/h;p=k*f;t=-p;m=e*f;f*=l;break;case b.Vf:case b.Af:p=h/a.near;k=a.top*p;G=a.bottom*p;e=a.right*p;l=a.left*p;f=d/h;p=k*f;t=G*f;m=e*f;f*=l;break;default:ja.va("Wrong camera type: "+a.type)}c[0]=l;c[1]=G;c[2]=-h;c[3]=e;c[4]=G;c[5]=-h;c[6]=e;c[7]=k;c[8]=-h;c[9]=l;c[10]=k;c[11]=-h;c[12]=f;c[13]=t;c[14]=-d;c[15]=f;c[16]=p;c[17]=-d;c[18]=m;c[19]=p;c[20]=-d;c[21]=m;c[22]=t;c[23]=-d;g&&(h=Ba,z.invert(a.Kc,h),T._28(c,
h,c,0));return c}function X(a,b){if(b.enable_csm){var h=b.csm_num;if(!a.Ti){var d=b.csm_num;a.Ti=Array(d);for(var c=0;c<d;c++)a.Ti[c]=new Float32Array(3);a.mr=new Float32Array(d)}for(d=0;d<h;d++){c=0==d?a.near:Ga(b,a,d-1);var g=Ga(b,a,d);c=Ea(a,c,g,fa);c=U.H(c);a.Ti[d].set(c.Da);a.mr[d]=c.Lb;a.Cu[d]=k.length(c.Da);a.tp[d]=Fa(b.first_cascade_blur_radius,b.last_cascade_blur_radius,h,d)}}else a.tp[0]=b.first_cascade_blur_radius}function Ga(a,b,h){var d=a.csm_num,c=T.M(a.csm_first_cascade_border,b.near,
b.far);a=T.M(a.csm_last_cascade_border,b.near,b.far);return T.M(Fa(c,a,d,h),b.near,b.far)}function Fa(a,b,h,d){switch(d){case 0:break;case h-1:a=b;break;default:a=0==a?0:a*Math.pow(b/a,d/(h-1))}return a}function wa(a){switch(a.type){case b.Xe:case b.Zh:case b.Cj:return!0;default:return!1}}function La(b,h){h||(h=new Float32Array(3));return a.j(b.ka.na,h)}var ja=Object(M.a)(l),ta=Object(n.a)(l),ka=Object(m.a)(l),qa=Object(C.a)(l),S=Object(q.a)(l),va=Object(r.a)(l),xa=Object(y.a)(l);b.Wc=10;b.qd=20;
b.Xe=30;b.Wf=40;b.Zh=50;b.Cj=60;b.fd=70;b.rd=80;b.Vf=90;b.Af=100;b.MS_STATIC=0;b.MS_TARGET_CONTROLS=2;b.MS_EYE_CONTROLS=3;b.MS_HOVER_CONTROLS=4;var ra=T.T(40),ma=T.T(.5),za=new Float32Array([1,1,1,1]),Da=new Float32Array([-1,-1,1,1]),ua=new Float32Array([0,0,-1,1]),h=new Float32Array(2),ya=new Float32Array(2),Ta=new Float32Array(2),Va=new Float32Array(3),Ca=new Float32Array(3),Wa=new Float32Array(3),Ra=new Float32Array(3),V=new Float32Array(3),D=new Float32Array(3);v.create();var bb=new Float32Array(4),
Ua=new Float32Array(4),Qa=new Float32Array(4),Ba=new Float32Array(16),fa=new Float32Array(24);b.ZM=function(){var h=k.create(),d=k.create();return function(c,k){var G=k.ka,e=c.data;switch(e.type){case "PERSP":var l=K(b.qd);l.Fo=e.sensor_fit;ha(l,e.angle,e.clip_start,e.clip_end);break;case "ORTHO":l=K(b.Xe),l.Fo=e.sensor_fit,ha(l,e.ortho_scale/2,e.clip_start,e.clip_end)}l.name=k.name;var p=k.Aa;p[0].Qa.push(l);for(var t=1;t<p.length;t++){var m=F(l,!1);p[t].Qa.push(m)}G.cc=O(e.b4w_move_style);G.dof_distance=
e.dof_distance;l=e.dof_object;G.dof_object=l?l.rb:null;G.dof_front_start=e.b4w_dof_front_start;G.dof_front_end=e.b4w_dof_front_end;G.dof_rear_start=e.b4w_dof_rear_start;G.dof_rear_end=e.b4w_dof_rear_end;G.dof_power=e.b4w_dof_power;G.dof_bokeh=e.b4w_dof_bokeh;G.dof_bokeh_intensity=e.b4w_dof_bokeh_intensity;G.te=e.b4w_dof_foreground_blur;G.kq=e.b4w_trans_velocity;G.jq=e.b4w_rot_velocity;G.lq=e.b4w_zoom_velocity;l=k.ka.cc;p=c.data;t=null;l!=b.MS_TARGET_CONTROLS&&l!=b.MS_EYE_CONTROLS||!p.b4w_use_horizontal_clamping||
(t={left:p.b4w_rotation_left_limit,right:p.b4w_rotation_right_limit,camera_space:"LOCAL"==p.b4w_horizontal_clamping_type},l==b.MS_EYE_CONTROLS&&(t.left*=-1,t.right*=-1));l=t;p=k.ka.cc;t=c.data;m=null;p!=b.MS_TARGET_CONTROLS&&p!=b.MS_EYE_CONTROLS||!t.b4w_use_vertical_clamping?p==b.MS_HOVER_CONTROLS&&t.b4w_use_zooming&&(t.b4w_hover_angle_min<=t.b4w_hover_angle_max?(m={down:t.b4w_hover_angle_min,up:t.b4w_hover_angle_max},m.down*=-1,m.up*=-1):qa.error("Wrong angle limits for the HOVER camera. Disabling angle limits.")):
(m={down:t.b4w_rotation_down_limit,up:t.b4w_rotation_up_limit,camera_space:"LOCAL"==t.b4w_vertical_clamping_type},p==b.MS_TARGET_CONTROLS&&(m.down*=-1,m.up*=-1));p=m;t=k.ka.cc;m=c.data;var B=null;t==b.MS_TARGET_CONTROLS&&m.b4w_use_target_distance_limits&&m.b4w_distance_min<=m.b4w_distance_max?B={min:m.b4w_distance_min,max:m.b4w_distance_max}:t===b.MS_HOVER_CONTROLS&&m.b4w_use_zooming&&(m.b4w_distance_min<=m.b4w_distance_max?B={min:m.b4w_distance_min,max:m.b4w_distance_max}:qa.error("Wrong distance limits for the HOVER camera. Disabling distance limits."));
t=B;m=c.data;B=null;k.ka.cc==b.MS_HOVER_CONTROLS&&m.b4w_use_horizontal_clamping&&m.b4w_horizontal_translation_min<=m.b4w_horizontal_translation_max&&(B={min:m.b4w_horizontal_translation_min,max:m.b4w_horizontal_translation_max});m=B;B=c.data;var u=null;k.ka.cc==b.MS_HOVER_CONTROLS&&B.b4w_use_vertical_clamping&&B.b4w_vertical_translation_min<=B.b4w_vertical_translation_max&&(u={min:B.b4w_vertical_translation_min,max:B.b4w_vertical_translation_max});B=u;u=c.data;var Ka=null;k.ka.cc==b.MS_TARGET_CONTROLS&&
u.b4w_use_pivot_limits&&(Ka={min_z:u.b4w_pivot_z_min,max_z:u.b4w_pivot_z_max});u=Ka;switch(G.cc){case b.MS_EYE_CONTROLS:G=a.j(k.ka.na,h);g(k,G,null,l,p);break;case b.MS_TARGET_CONTROLS:G=a.j(k.ka.na,h);f(k,G,e.b4w_target,l,p,t,u,e.b4w_use_panning);break;case b.MS_HOVER_CONTROLS:G=a.j(k.ka.na,h),c=Xa(k,c.data.b4w_hover_zero_level,d),ea(k,G,c,t,p,m,B,e.b4w_enable_hover_hor_rotation)}na(k);ib(k)}}();b.mI=g;b.oI=f;b.nI=ea;var Na=function(){var b=v.create();return function(h,d){var c=a.g(h.ka.na,b);return ca(c,
h.ka.od,d)}}();b.get_camera_angles=Na;var Xa=function(){var b=new Float32Array(6),h=v.create(),d=new Float32Array(2),g=k.create(),l=k.create(),p=c.create();return function(c,k,G){var t=c.ka,m=a.j(t.na,g);t=a.g(t.na,h);p.set(T.f);p[3]=0;c=Na(c,d)[1];t=T._34(t,T.c,l);e.R(b,m);e.Q(b,t);if(!T._22(p,-k,b,G)||Math.abs(c)<ma)qa.warn("Active hover camera view vector and the supporting plane are parallel to each other. Hover pivot will be set based on the camera position."),G[0]=m[0],G[1]=m[1],G[2]=0;return G}}(),
ib=function(){var h=k.create();return function(d){for(var c=d.ka,g=0;g<d.Aa.length;g++){var G=d.Aa[g].Qa[0];if(G.type==b.Xe)switch(c.cc){case b.MS_TARGET_CONTROLS:var e=a.j(c.na,h);c.ql=k.dist(e,c.pivot);c.rl=G.Rc;break;case b.MS_HOVER_CONTROLS:e=a.j(c.na,h),c.ql=k.dist(e,c.$c),c.rl=G.Rc}}}}();b.To=ib;b.sd=F;b.RN=R;b.pY=O;b.jd=K;b.aX=function(a,b){switch(b){case "COLOR":case "CUBEMAP":return!!a.wc;case "DEPTH":return!!a.gg;case "SCREEN":return!a.wc&&!a.gg;default:ja.va("Wrong attachment type: "+b)}};
b.fx=function(a,b,h){switch(b){case "COLOR":case "CUBEMAP":a.wc=h;break;case "DEPTH":a.gg=h;break;case "SCREEN":a.wc=null;a.gg=null;break;default:ja.va("Wrong attachment type: "+b)}};b.xX=function(a,b){switch(b){case "COLOR":case "CUBEMAP":return a.wc;case "DEPTH":return a.gg;case "SCREEN":return null;default:ja.va("Wrong attachment type: "+b)}};b.qw=function(a,h){(a.type!=b.qd||h!=b.fd&&h!=b.rd&&h!=b.Vf&&h!=b.Af)&&ja.va("make_stereo(): wrong camera type");a.type=h;A(a,6,.065)};b.MT=A;b.bA=ca;b.get_camera_angles_char=
function(a,b){Na(a,b);b[0]=T.A(b[0]+Math.PI);b[1]*=-1;return b};b.set_fov=function(a,h){switch(a.type){case b.qd:case b.Wf:case b.fd:case b.rd:a.Rc=h}};b.get_fov=function(a){switch(a.type){case b.qd:case b.Wf:case b.fd:case b.rd:return a.Rc;default:return 0}};b.EQ=L;b.aI=ha;b.bI=function(a,h,d,c,g){switch(a.type){case b.qd:case b.fd:case b.rd:case b.Xe:a.Rc=d;a.Wb=1;break;case b.Wf:case b.Zh:a.Rc=d;a.Wb=h/d;break;case b.Vf:case b.Af:break;default:ja.va("set_frustum2(): Unsupported camera type: "+
a.type)}a.near=c;a.far=g};b.BT=function(a,h,d,c,g,k,e){switch(a.type){case b.Cj:a.left=h;a.right=d;a.bottom=c;a.top=g;a.near=k;a.far=e;break;default:ja.va("set_frustum_asymmetric(): Unsupported camera type: "+a.type)}};b.get_move_style=function(a){return a.ka.cc};var jb=function(){var h=k.create(),d=v.create(),c=z.create();return function(g,G){var e=a.j(G.ka.na,h);G=a.g(G.ka.na,d);var l=z.fromRotationTranslation(G,e,c);z.invert(l,g.Kc);if(S.zb()){var p=S.get_active();p=S.yc(p,va.mh)}if(g.type==b.fd||
p&&p.enable_hmd_stereo&&g.type==b.Vf)g.Kc[12]+=g.tg/2;else if(g.type==b.rd||p&&p.enable_hmd_stereo&&g.type==b.Af)g.Kc[12]-=g.tg/2;if(g.ad){a.d(g.Kc,g.Fs);a.p(g.Fs,g.Yw);p=g.ad[0];l=g.ad[1];var t=g.ad[2],m=g.ad[3],f=g.pq;f[0]=1-2*p*p;f[1]=-2*p*l;f[2]=-2*p*t;f[3]=0;f[4]=-2*p*l;f[5]=1-2*l*l;f[6]=-2*l*t;f[7]=0;f[8]=-2*p*t;f[9]=-2*l*t;f[10]=1-2*t*t;f[11]=0;f[12]=-2*p*m;f[13]=-2*l*m;f[14]=-2*t*m;f[15]=1;z.multiply(g.Kc,g.pq,g.Kc);J(g,!0);k.transformMat4(e,g.pq,e)}a.d(g.Kc,g.Ag);a.p(g.Ag,g.ty);a.t(e,1,G,
g.na);Ha(g)}}();b.RT=jb;b.iI=J;b.XB=function(h,d,c){var g=Va;g[0]=0;g[1]=0;g[2]=-1;k.transformQuat(g,c,g);g[0]+=d[0];g[1]+=d[1];g[2]+=d[2];var G=Ca;G[0]=0;G[1]=1;G[2]=0;k.transformQuat(G,c,G);z.lookAt(d,g,G,h.Kc);c=S.get_active();c=S.yc(c,va.mh);if(h.type==b.fd||c&&c.enable_hmd_stereo&&h.type==b.Vf)h.Kc[12]+=h.tg/2;else if(h.type==b.rd||c&&c.enable_hmd_stereo&&h.type==b.Af)h.Kc[12]-=h.tg/2;a.d(h.Kc,h.Ag);ia(h);Ma(h);a.v(d,h.na)};b.fI=W;var fb=function(){var b=k.create(),h=k.create(),d=k.create(),
c=v.create(),g=v.create();return function(G,e,l){G=G.ka;var p=a.g(G.na,c),t=T._34(p,T.f,b);k.normalize(t,t);if(.999999<Math.abs(k.dot(e,t)))t=v.identity(g);else{var m=k.cross(e,t,h);k.normalize(m,m);var f=T._34(p,T.b,d);0<k.dot(f,e)&&k.negate(m,m);f=T._34(p,T.d,d);k.normalize(f,f);var B=T.M(k.dot(f,m),-1,1);t=-.999999>=B?v.setAxisAngle(t,Math.acos(B),g):v.rotationTo(f,m,g);v.normalize(t,t)}v.multiply(t,p,p);l&&(l=T._34(p,T.e,b),0>k.dot(e,l)&&v.rotateZ(p,Math.PI,p));a.r(p,G.na)}}();b.correct_up=fb;
var rb=function(){var b=v.create(),h=k.create();return function(d){var c=a.g(d.ka.na,b);d=d.ka.od;c=T._34(c,T.e,h);return 0>k.dot(c,d)}}();b.ET=B;var cb=function(){var b=k.create(),h=k.create(),d=k.create(),c=v.create();return function(g,G){var e=g.ka,l=G.Qa,p=a.g(e.na,c);p=T._34(p,T.c,b);var t=a.j(e.na,h),m=G.sI;for(G=0;G<m.length;G++){var f=m[G];k.copy(p,f.direction);a.j(e.na,f.kw)}for(G=0;G<l.length;G++)f=l[G],jb(f,g),k.copy(p,f.direction),f.dof_object&&f.dof_on&&(e=xa.get_translation(f.dof_object,
d),e=k.dist(t,e),f.dof_distance=e)}}();b.SU=cb;b.RU=function(){var h=v.create(),d=k.create();return function(c){var g=c.ka;na(c);Wb(c);switch(g.cc){case b.MS_TARGET_CONTROLS:var G=a.j(g.na,d),e=a.g(g.na,h);T._31(G,e,g.pivot,T.c);a.r(e,g.na);for(e=0;e<c.Aa.length;e++)for(var l=c.Aa[e].Qa,p=0;p<l.length;p++){var t=l[p];t.type!=b.fd&&t.type!=b.rd||A(t,k.dist(G,g.pivot),t.tg)}fb(c,g.od);break;case b.MS_EYE_CONTROLS:c.Yc||fb(c,g.od)}}}();b.hx=ba;b.ix=I;b.hover_set_vertical_limits=P;b.hover_set_distance_limits=
da;b.WH=H;b.hI=t;b.dI=d;b.kI=la;var Wb=function(){var h=k.create();return function(d){var c=d.ka;if(ka.is_camera(d))for(var g=d.Aa,G=0;G<g.length;G++){var e=g[G].Qa;if(e[0].type===b.Xe){switch(c.cc){case b.MS_TARGET_CONTROLS:var l=a.j(c.na,h);l=k.dist(l,c.pivot);l=l/c.ql*c.rl;break;case b.MS_HOVER_CONTROLS:l=a.j(c.na,h);l=k.distance(l,c.$c);l=l/c.ql*c.rl;break;default:l=e[0].Rc}for(var p=0;p<e.length;p++){var t=e[p];t.Rc=l;Y(t,!0)}cb(d,g[G])}}}}();b.dV=Wb;var Pb=function(){var b=v.create(),h=k.create(),
d=k.create(),c=k.create();return function(g){g=g.ka;var G=a.j(g.na,h),e=k.subtract(G,g.pivot,d),l=k.length(e);l>g.rc.max?(k.scale(e,g.rc.max/l,e),k.add(g.pivot,e,G)):l<g.rc.min&&(l=a.g(g.na,b),l=T._34(l,T.c,c),k.scale(l,100*g.rc.min,l),k.add(e,l,e),k.scale(e,-g.rc.min/k.length(e),e),k.add(g.pivot,e,G));a.v(G,g.na)}}(),hb=function(){var b=v.create(),h=v.create(),d=v.create(),c=k.create(),g=k.create();return function(k,G,e,l){var p=k.ka;if(e||l){var t=v.identity(b);e&&v.setAxisAngle(k.ka.od,e,t);k=
a.g(p.na,h);l&&(e=T._34(k,T.d,c),l=v.setAxisAngle(e,l,d),v.normalize(l,l),v.multiply(t,l,t));l=a.j(p.na,g);T._46(l,G,t,l);a.v(l,p.na);v.multiply(t,k,k);v.normalize(k,k);a.r(k,p.na)}}}();b.BY=Aa;b.JY=w;var pb=function(){var b=v.create(),h=v.create(),d=v.create(),c=k.create();return function(g,k,G){g=g.ka;if(k||G){var e=v.identity(b);k&&(k=v.setAxisAngle(g.od,k,h),v.multiply(e,k,e));k=a.g(g.na,h);if(G){var l=T._34(k,T.d,c);G=v.setAxisAngle(l,G,d);v.normalize(G,G);v.multiply(e,G,e)}v.multiply(e,k,k);
v.normalize(k,k);a.r(k,g.na)}}}();b.AY=pb;b.yY=function(a,b,h){pb(a,b,h)};b.HY=function(a,b,h){vb(a,b,h)};var vb=function(){var b=new Float32Array(2),h=v.create();return function(d,c,g){var k=d.ka,G=a.g(k.na,h);k=ca(G,k.od,b);pb(d,c-k[0],g-k[1])}}();b.IY=vb;b.zY=N;b.LT=oa;b.cT=function(a,h,d){var c=a.ka.cc;c===b.MS_TARGET_CONTROLS?Aa(a,h,d):c===b.MS_EYE_CONTROLS?pb(a,h,d):c===b.MS_HOVER_CONTROLS?N(a,h,d):c===b.MS_STATIC&&pb(a,h,d)};b.KT=function(a,h,d){var c=a.ka.cc;c===b.MS_TARGET_CONTROLS?w(a,h,
d):c===b.MS_EYE_CONTROLS?vb(a,h,d):c===b.MS_HOVER_CONTROLS?oa(a,h,d):c===b.MS_STATIC&&vb(a,h,d)};var Qb=function(){var b=v.create(),h=new Float32Array(2),d=k.create(),c=k.create();return function(g){var G=g.ka,e=Na(g,h)[1],l=g.ka;g=l.Hb;l=l.rc;g.down-g.up?(e=(g.down-e)/(g.down-g.up),e=Math.max(e,0)):e=0;e=e*(l.max-l.min)+l.min;g=a.j(G.na,d);l=a.g(G.na,b);l=T._34(l,T.c,c);k.normalize(l,l);k.scale(l,e,l);k.subtract(G.$c,l,g);a.v(g,G.na)}}(),wb=function(){var b=k.create(),h=k.create();return function(d){d=
d.ka;var c=d.pivot[2],g=T.M(d.pivot[2],d.Oe.min_z,d.Oe.max_z);g!=c&&(c=k.set(0,0,g-c,b),k.add(d.pivot,c,d.pivot),g=a.j(d.na,h),k.add(g,c,g),a.v(g,d.na))}}(),Ia=function(){var b=k.create();return function(h){h=h.ka;if(h.le){var d=T.M(h.$c[0],h.le.min,h.le.max)-h.$c[0];h.$c[0]+=d;var c=a.j(h.na,b);c[0]+=d;a.v(c,h.na)}h.me&&(d=T.M(h.$c[1],h.me.min,h.me.max)-h.$c[1],h.$c[1]+=d,c=a.j(h.na,b),c[1]+=d,a.v(c,h.na))}}();b.eY=function(a){switch(a.type){case b.qd:case b.Xe:case b.fd:case b.rd:return!0;default:return!1}};
b.RP=function(a){switch(a.type){case b.qd:case b.Wf:case b.fd:case b.rd:a:{switch(a.Fo){case "AUTO":var h=1<a.Wb?a.Rc:wa(a)?a.Rc*a.Wb:2*Math.atan(Math.tan(a.Rc/2)*a.Wb);break a;case "HORIZONTAL":h=a.Rc;break a;case "VERTICAL":h=wa(a)?a.Rc*a.Wb:2*Math.atan(Math.tan(a.Rc/2)*a.Wb);break a}h=void 0}return Math.min(L(a),h);default:return qa.error("get_angular_diameter(): Unsupported camera type: "+a.type),0}};b.pT=function(a,h){switch(a.type){case b.Wf:case b.Zh:qa.error("set_aspect(): Unsupported camera type: "+
a.type);break;default:a.Wb=h}};b.wX=function(a){return a.Wb};b.set_projection=Y;b.sT=function(a,h,d,c,g){var k=1/Math.max(g,c);switch(a.type){case b.Wc:case b.qd:case b.Wf:g/=2;c/=2;d=-(d-g)/g*Math.tan(L(a)/2);h=(h-c)/c*Math.tan(L(a)/2)*a.Wb;c=a.near*(d+k);g=a.near*(h+k);d=a.near*(d-k);h=a.near*(h-k);z.frustum(h,g,d,c,a.near,a.far,a.gc);break;case b.Xe:case b.Zh:d=-d/g;h/=c;c=L(a);g=c*a.Wb;z.ortho(-g+(h-k)*(g+g),-g+(h+k)*(g+g),c+(d-k)*(c+c),c+(d+k)*(c+c),a.near,a.far,a.gc);break;case b.Cj:d=-d/g,
h/=c,c=a.top+(d+k)*(a.top-a.bottom),g=a.left+(h+k)*(a.right-a.left),d=a.top+(d-k)*(a.top-a.bottom),h=a.left+(h-k)*(a.right-a.left),z.ortho(h,g,d,c,a.near,a.far,a.gc)}Q(a);Ha(a)};b.WM=Ma;b.mP=Ea;b.wM=function(a){a=a.ka;var b=U.w();b.min_x=-1;b.max_x=1;b.min_y=-1;b.max_y=1;b.min_z=-1;b.max_z=1;a.gb=b;var h=U.l(1,T._1([0,0,0]));a.Xc=h;a.Kq=U.b(1,b);a.Mq=U.d(1,b);a.Lq=U.c(1,b)};b.is_static_camera=function(a){return ka.is_camera(a)&&a.ka&&a.ka.cc==b.MS_STATIC};b.is_target_camera=function(a){return ka.is_camera(a)&&
a.ka&&a.ka.cc==b.MS_TARGET_CONTROLS};b.is_eye_camera=function(a){return ka.is_camera(a)&&a.ka&&a.ka.cc==b.MS_EYE_CONTROLS};b.is_hover_camera=function(a){return ka.is_camera(a)&&a.ka&&a.ka.cc==b.MS_HOVER_CONTROLS};b.is_ortho_camera=function(a){return ka.is_camera(a)&&a.ka&&a.Aa[0].Qa[0].type==b.Xe};b.HC=X;b.MO=Ga;b.project_point=function(a,h,d){a=a.Aa[0].Qa[0];switch(a.type){case b.qd:case b.Wf:case b.Xe:case b.Zh:case b.fd:case b.rd:case b.Vf:case b.Af:case b.Wc:var g=Ua;g.set(h);g[3]=1;c.transformMat4(g,
a.zg,g);h=-g[1]/g[3];d[0]=(g[0]/g[3]+1)/2*a.width;d[1]=(h+1)/2*a.height;ta.GV(d[0],d[1],d,a);2<d.length&&(d[2]=(g[2]/Math.abs(g[3])+1)/2);return d;default:return qa.error("Non-compatible camera"),d}};b.jQ=function(a){return a.Aa[0].Qa[0]};b.pv=function(a,h){switch(a.type){case b.qd:case b.Wf:case b.fd:case b.rd:var d=Math.tan(L(a)/2);switch(h){case "LEFT":return-d*a.Wb;case "RIGHT":return d*a.Wb;case "TOP":return d;case "BOTTOM":return-d}break;case b.Xe:case b.Zh:switch(h){case "LEFT":return-L(a)*
a.Wb;case "RIGHT":return L(a)*a.Wb;case "TOP":return L(a);case "BOTTOM":return-L(a)}break;case b.Cj:switch(h){case "LEFT":return a.left;case "RIGHT":return a.right;case "TOP":return a.top;case "BOTTOM":return a.bottom}break;case b.Vf:case b.Af:d=S.get_active();if((d=S.yc(d,va.mh))&&d.enable_hmd_stereo)switch(h){case "LEFT":return-Math.tan(Math.min(a.Vd[1],a.Vd[3]));case "RIGHT":return Math.tan(Math.min(a.Vd[1],a.Vd[3]));case "TOP":return Math.tan(Math.min(a.Vd[0],a.Vd[2]));case "BOTTOM":return-Math.tan(Math.min(a.Vd[0],
a.Vd[2]))}else switch(d=Math.tan(L(a)/2),h){case "LEFT":return-d*a.Wb;case "RIGHT":return d*a.Wb;case "TOP":return d;case "BOTTOM":return-d}break;default:ja.va("Unknown camera type")}};b.jR=wa;b.WB=function(b,h,d){b=b.ka;a.v(h,b.na);k.copy(d,b.pivot)};b.eI=function(){var b=k.create(),h=k.create();return function(d,c){var g=d.ka,e=k.subtract(c,g.$c,b),G=a.j(g.na,h);e=k.add(e,G,e);xa.set_translation(d,e);k.copy(c,g.$c)}}();b.NT=function(){var b=k.create(),h=k.create();return function(d,c){var g=d.ka,
e=k.subtract(c,g.pivot,b),G=a.j(g.na,h);e=k.add(e,G,e);xa.set_translation(d,e);k.copy(c,g.pivot)}}();b.AX=La;b.GY=function(){var h=k.create(),d=k.create(),c=v.create();return function(g,e){g.ka.cc=e;g.ka.zc=null;g.ka.Hb=null;g.ka.rc=null;g.ka.le=null;g.ka.me=null;ib(g);switch(e){case b.MS_HOVER_CONTROLS:e=a.j(g.ka.na,h);var G=Xa(g,0,d);ea(g,e,G,null,null,null,null,g.ka.Xi);break;case b.MS_TARGET_CONTROLS:e=La(g,h),G=a.g(g.ka.na,c),G=T._34(G,T.c,d),G=k.scaleAndAdd(e,G,10,G),k.copy(G,g.ka.pivot)}}}();
b.Dt=function(a){a=a.ka;a.cc=0;k.set(0,0,0,a.pivot);k.set(0,0,0,a.$c);a.use_panning=!1;a.zc=null;a.Hb=null;a.rc=null;a.le=null;a.me=null;a.Oe=null;a.Xi=!0};b.set_eye_distance=function(a,b){for(var h=0;h<a.length;h++){var d=a[h];70!=d.type&&80!=d.type&&90!=d.type&&100!=d.type||A(d,d.Wl,b)}};b.set_hmd_fov=function(a,b,h){var d=S.get_active();a=ka.kb(a,d).Qa;for(d=0;d<a.length;d++){var g=a[d];if(90==g.type||100==g.type)90==g.type&&c.copy(b,g.Vd),100==g.type&&c.copy(h,g.Vd),g.ad?J(g,!1):Y(g,!1)}};b.FY=
function(a,b,h){var d=S.get_active();a=ka.kb(a,d).Qa;for(d=0;d<a.length;d++){var c=a[d];if(90==c.type||100==c.type)90==c.type&&b&&z.copy(b,c.gc),100==c.type&&h&&z.copy(h,c.gc),Q(c),Ha(c)}};b.HT=function(a,h){var d=S.get_active();a=ka.kb(a,d).Qa;for(d=0;d<a.length;d++){var g=a[d];if(g.type==b.Wc&&g.near||g.type==b.qd||g.type==b.Wf){var k=g.near;h=z.invert(h,Ba);var e=c.transformMat4(za,h,Ua);var G=e[0]*k;e=e[1]*k;var l=c.transformMat4(Da,h,Ua);var p=l[0]*k;l=l[1]*k;h=c.transformMat4(ua,h,Ua);var t=
-h[2]*h[3];var m=z.frustum(p,G,l,e,k,t,Ba);var f=(G-p)/(e-l);break}}for(d=0;d<a.length;d++)if(g=a[d],g.type==b.Wc||g.type==b.qd||g.type==b.Wf)g.far=t,g.near=k,g.right=G,g.top=e,g.left=p,g.bottom=l,g.Wb=f,g.Rc=Math.atan(e/k)-Math.atan(l/k),z.copy(m,g.gc),Q(g),Ha(g)}});w.a=f},function(D,w,f){D=f(0);var M=f(5),U=f(4),n=f(43),z=f(51),e=f(1),m=f(10),C=f(11),v=f(13);f(2);f=Object(D.a)("__container",function(f,r){var q;function a(){ca.getBoundingClientRect()}function T(a,b,c,g){O.kG?(c=c.getBoundingClientRect(),
g[0]=a-c.left,g[1]=b-c.top):(J.clientX=a,J.clientY=b,J.view=window,a=new MouseEvent("b4w_convert",J),c.dispatchEvent(a),g[0]=a.offsetX,g[1]=a.offsetY);return g}function k(a,b,c,g){a.style.width=c+"px";a.style.height=g+"px";b&&(b.style.width=c+"px",b.style.height=g+"px")}function c(a,b,c){var e=ca,l=L;c&&k(e,l,a,b);l&&(l.width=a,l.height=b,E.Hn());c=Math.floor(a*O.canvas_resolution_factor);b=Math.floor(b*O.canvas_resolution_factor);e.width=c;e.height=b;l=Math.min(A.drawingBufferWidth,K.UA,K.ZA[0]);
var m=Math.min(A.drawingBufferHeight,K.UA,K.ZA[1]);if(c>l||b>m)ea.warn("Canvas size exceeds platform limits, downscaling"),l=Math.min(l/c,l/b),c*=l,b*=l;e.width=Math.floor(c);e.height=Math.floor(b);u.lI(e.width,e.height,a?c/a:1);u.zb()&&R.Ea(u.get_active().Ii);g.$U(e.width,e.height)}var l=Object(M.a)(f),b=Object(U.a)(f),g=Object(n.a)(f),E=Object(z.a)(f),ea=Object(e.a)(f),u=Object(m.a)(f),F=Object(C.a)(f),R=Object(v.a)(f),O=b.wa,K=b.ei,A=null,ca=null,L=null,ha=null,J={clientX:0,clientY:0};var W=q=
0;var B=1;r.fh=function(a){A=a};r.get_canvas=function(){return ca};r.get_canvas_hud=function(){return L};r.get_container=function(){return ha};r.init=function(a,b){a&&a.parentNode?(ca=a,L=b,ha=a.parentNode):l.va("canvas container is not available")};r.insert_to_container=function(a,b){b=b||"LAST";switch(b){case "FIRST":ha.insertBefore(a,ha.firstElementChild);break;case "JUST_BEFORE_CANVAS":ha.insertBefore(a,ca);break;case "JUST_AFTER_CANVAS":ca.nextElementSibling?ha.insertBefore(a,ca.nextElementSibling):
ha.appendChild(a,ca);break;case "LAST":ha.appendChild(a,ca);break;default:ea.error(b+" invalid stack order")}};r.bG=function(){return q};r.aG=function(){return W};r.set_canvas_offsets=function(){};r.update_canvas_offsets=a;r.VT=function(b,c,g){q=b;W=c;B=g;a()};r.force_offsets_updating=function(){};r.client_to_canvas_coords=function(a,b,c){return T(a,b,ca,c)};r.get_coords_target_space=function(a,b,c){a.constructor==MouseEvent?(c[0]=a.offsetX,c[1]=a.offsetY):a.constructor==TouchEvent?(b="touchend"==
a.type?a.changedTouches:b?a.targetTouches:a.touches,T(b[0].clientX,b[0].clientY,a.target,c)):(c[0]=-1,c[1]=-1);return c};r.client_to_element_coords=T;r.Wq=function(a,b,c,g){c||(c=new Float32Array(2));c[0]=a*B;c[1]=b*B;g&&(a=g.width/q,c[0]*=a,c[1]*=a);return c};r.GV=function(a,b,c,g){c||(c=new Float32Array(2));c[0]=a/B;c[1]=b/B;g&&(a=g.width/q,c[0]/=a,c[1]/=a)};r.tG=function(a){return a&&a.parentNode?a.parentNode==ha?!0:r.tG(a.parentNode):!1};r.yG=function(){return O.allow_hidpi&&2<=window.devicePixelRatio?
!0:!1};r.resize=c;r.resize_to_container=function(a){var b=ha,g=ca,e=b.clientWidth;b=b.clientHeight;if(a||e!=g.clientWidth||b!=g.clientHeight){a=g.width;g=g.height;k(ca,L,e,b);if(u.zb()){var l=u.get_active();if((l=u.yc(l,F.mh))&&l.enable_hmd_stereo){c(a,g,!1);return}}c(e,b,!1)}};r.reset=function(){ha=L=ca=A=null}});w.a=f},function(D,w,f){D=f(0);var M=f(5),U=f(25),n=f(4),z=f(31),e=f(1),m=f(28),C=f(29),v=f(27),q=f(62),r=f(9),y=f(47),a=f(64),T=f(8),k=f(22),c=f(58),l=f(10),b=f(34),g=f(11),E=f(17),ea=f(6),
u=f(20),F=f(2),R=f(3),O=f(7);f=Object(D.a)("__batch",function(f,A){function K(a){a={type:a,fc:"",id:0,Rd:0,cr:-1,El:"",Hu:-1,vo:-1,pr:0,fg:0,fl:[],Ua:[],vg:[],bg:[],Hc:[],Qj:[],xj:null,ud:{},ec:null,Mb:D.$Q(),Me:"",Jq:[],$a:null,Sf:F.S(),Rf:!1,Uj:!1,Ju:!1,num_vertices:0,num_triangles:0,Zv:0,$v:0,ld:!1,Bv:0,bk:0,Ud:new Float32Array(3),eg:new Float32Array(16),Ej:!1,Yf:!1,Ob:!1,Ab:!1,Fi:!1,pb:!1,bd:!1,df:!1,Of:!1,sf:!1,Be:!1,Pe:!1,ze:!1,Hd:!1,gi:Qa.Yn,Uf:!1,yh:!1,Wj:!1,Ng:!1,Vg:Ta.Qy,Wg:0,ik:0,jk:0,
yl:ha(),Qd:-1,Gd:-1,Hv:!1,Lv:0,Iv:0,Mv:0,Nv:0,Kv:new Float32Array(3),Jv:new Float32Array(3),Pr:!1,fe:0,ie:0,Je:1,reflect_factor:0,Dk:0,rg:1,parallax_scale:0,Wi:0,oh:1,np:0,on:0,Yd:0,Oh:0,he:new Float32Array(2),tf:new Float32Array(3),Sh:new Float32Array(3),Re:new Float32Array(3),Qc:new Float32Array(4),ji:new Float32Array(2),hn:null,$o:null,Zr:null,Yr:null,bc:!1,wireframe_edge_color:R.create(),Bg:!1,water_dynamic:!1,Un:!1,xy:!1,yy:0,zy:0,wy:0,lm:.1,shallow_water_col_fac:0,shore_water_col_fac:0,foam_factor:0,
gv:new Float32Array(2),fv:new Float32Array(2),Er:new Float32Array(2),shallow_water_col:new Float32Array(3),shore_water_col:new Float32Array(3),qk:null,sj:!1,ek:!1,Su:!1,tb:null,ln:0,um:null,rs:null,ri:[],pi:[],Ne:[],oi:[],Xb:U.L(),hm:!1,$d:null,sh:!0,nG:0,pp:new Float32Array(3),hj:[]};a.Qc[3]=1;a.Ab=!0;a.ln=1;a.yl.Ro=-1;return a}function L(a){var b=K(a.type);b.fc=a.fc;b.id=a.id;b.cr=a.cr;b.El=a.El;b.Hu=a.Hu;b.vo=a.vo;b.pr=a.pr;b.fg=a.fg;b.fl=[];b.Ua=a.Ua.slice();b.vg=a.vg.slice();b.bg=a.bg.slice();
b.Hc=a.Hc.slice();b.Qj=a.Qj.slice();b.xj=F.O(a.xj);b.ud=F.O(a.ud);b.ec=a.ec;b.Mb=D.vN(a.Mb);b.Me=a.Me;b.Jq=Wa.sN(a.Jq);b.$a=a.$a;b.Rf=a.Rf;b.Uj=a.Uj;b.Ju=a.Ju;b.num_vertices=a.num_vertices;b.num_triangles=a.num_triangles;b.Zv=a.Zv;b.$v=a.$v;b.Bv=a.Bv;b.bk=a.bk;b.Ud=a.Ud;b.eg=a.eg;b.Ej=a.Ej;b.Yf=a.Yf;b.Ob=a.Ob;b.Ab=a.Ab;b.Fi=a.Fi;b.pb=a.pb;b.bd=a.bd;b.df=a.df;b.Of=a.Of;b.sf=a.sf;b.Be=a.Be;b.Pe=a.Pe;b.ze=a.ze;b.Hd=a.Hd;b.ld=a.ld;b.gi=a.gi;b.Uf=a.Uf;b.yh=a.yh;b.Wj=a.Wj;b.Ng=a.Ng;b.Vg=a.Vg;b.Wg=a.Wg;
b.ik=a.ik;b.jk=a.jk;var h=a.yl,d=ha();d.st=h.st;d.Df=h.Df;d.tu=h.tu;d.Vi=h.Vi;d.Ro=h.Ro;d.Qo=h.Qo;d.Po=h.Po;d.Sw=h.Sw;b.yl=d;b.Qd=a.Qd;b.Gd=a.Gd;b.Hv=a.Hv;b.Lv=a.Lv;b.Iv=a.Iv;b.Mv=a.Mv;b.Nv=a.Nv;R.copy(a.Kv,b.Kv);R.copy(a.Jv,b.Jv);b.Pr=a.Pr;b.fe=a.fe;b.ie=a.ie;b.Je=a.Je;b.reflect_factor=a.reflect_factor;b.Dk=a.Dk;b.rg=a.rg;b.parallax_scale=a.parallax_scale;b.Wi=a.Wi;b.oh=a.oh;b.np=a.np;b.on=a.on;b.Yd=a.Yd;b.Oh=a.Oh;b.he[0]=a.he[0];b.he[1]=a.he[1];R.copy(a.tf,b.tf);R.copy(a.Sh,b.Sh);R.copy(a.Re,b.Re);
O.copy(a.Qc,b.Qc);b.ji.set(a.ji);b.hn=F.O(a.hn);a.$o&&(b.$o=new Float32Array(a.$o),b.Zr=new Float32Array(a.Zr),b.Yr=new Float32Array(a.Yr));b.bc=a.bc;R.copy(a.wireframe_edge_color,b.wireframe_edge_color);b.Bg=a.Bg;b.water_dynamic=a.water_dynamic;b.Un=a.Un;b.xy=a.xy;b.yy=a.yy;b.zy=a.zy;b.wy=a.wy;b.lm=a.lm;b.shallow_water_col_fac=a.shallow_water_col_fac;b.shore_water_col_fac=a.shore_water_col_fac;b.foam_factor=a.foam_factor;b.gv.set(a.gv);b.fv.set(a.fv);b.Er.set(a.Er);R.copy(a.shallow_water_col,b.shallow_water_col);
R.copy(a.shore_water_col,b.shore_water_col);b.qk=F.O(a.qk);b.sj=a.sj;b.ek=a.ek;b.Su=a.Su;a.tb&&(b.tb=Va.JE(a.tb));b.ln=a.ln;a.um&&(b.um=new Float32Array(a.um));b.rs=F.O(a.rs);b.ri=a.ri.slice();b.pi=a.pi.slice();b.Ne=a.Ne.slice();b.oi=a.oi.slice();U.t(a.Xb,b.Xb);b.hm=a.hm;b.sh=a.sh;b.pp=a.pp;b.hj=a.hj;return b}function ha(){return{st:!1,Df:0,Vi:0,Ro:0,Qo:0,Po:0,Sw:0,tu:1}}function J(a){switch(a.type){case "MAIN":case "PARTICLES":case "LINE":a.fc=a.Ob?a.Fi?"XRAY":"BLEND":"OPAQUE";break;case "SHADOW":a.fc=
a.sf?"CAST":"RECEIVE";break;case "COLOR_ID":a.fc=a.Fi?"COLOR_ID_XRAY":"COLOR_ID"}}function W(a,b,h){for(var d=[],c=0;c<a.length;c++){var g=a[c],k=g.rb;k.Ur||d.push.apply(d,B(g,k.ka,b,h))}return d}function B(a,b,h,d){var c=[],g=a.rb,k=I(h,b,!b.cf,!1),e=a.data,l=g.Sc,G=Array(l.length),p=Array(l.length),t=[],f=Ra.xc(h,bb.ic),m=!1;f&&(m=f.kn.length?!0:!1);for(var B=0;B<k.length;B++)for(var u=k[B],q=0;q<l.length;q++){var v=l[q];if(!xa(g,q)&&!Qa.gG(e,q))if("PHYSICS"==u&&a.b4w_collision&&"NAVMESH"==a.game.physics_type)t.push(Qa.bv(e,
q,[],b.Oi,{},null));else if(!v.dj||m){var r=K(u);r.hj=F.O(d);"MAIN"==u?G[q]=r:"DEBUG_VIEW"==u&&(p[q]=r);r.cr=a.b4w_cluster_data.cluster_id;if(wa(r,v)&&P(r,v,e)){"SHADOW"==u&&G[q]&&(r.bd=G[q].bd);r.gi=b.Rf||b.df?Qa.Ht:Qa.Yn;Ha(r,b);Ma(r,a.particle_systems);if("DYNAMIC"==b.type||"COLOR_ID"==r.type)r.El=va(r,b,a.uuid);r.Wj=a.b4w_do_not_cull;"MAIN"==r.type&&(r.Ng=a.b4w_caustics);X(r,"DISABLE_FOG",("COLOR_ID"!=u&&"SHADOW"!=u&&a.b4w_disable_fogging)|0);var J=Qa.bv(e,q,r.Qj,b.Oi,r.ud,r.xj);!v.Se||"a_shade_tangs"in
J.Va[0]||(X(r,"CALC_TBN",1),Ea(r,"a_tbn"));if(v.dj){for(var n=J,H=n.Gb,A=n.Va[0].a_position,C=[],ba=[],Ka=0;Ka<H;Ka++)ba.push(A[3*Ka]),C.push(A[3*Ka+1]),ba.push(A[3*Ka+2]);C=new Float32Array(C);ba=new Float32Array(ba);n.hb.a_lf_dist=C;n.hb.a_lf_bb_vertex=ba;J=n}La(r);c.push({fb:r,$g:b,hu:b,$d:J,Jh:[v.name],Qe:[a]})}}}if(t.length){r=K("PHYSICS");r.fc="NAVMESH";r.El=va(r,b,a.uuid);J=Qa.II(t);var W=[];for(B=0;B<l.length;B++)W.push(l[B].name);La(r);c.push({fb:r,$g:b,hu:b,$d:J,Jh:W,Qe:[a]})}for(B=0;B<
p.length;B++)p[B]&&(p[B].vo=G[B].id,La(p[B]));var y=a.particle_systems;if(0<y.length){var fa=!1,da=!1;for(B=0;B<y.length;B++){var E=y[B],ya=E.settings;ya.use_render_emitter&&c.length&&(fa=!0);"HAIR"!=ya.type||"OBJECT"!=ya.render_type&&"GROUP"!=ya.render_type&&E.transforms.length||(da=!0);if(fa&&da)break}if(c.length)var S=c[0];else{var L=K("TMP");Ma(L,y);var T=Qa.bv(e,0,L.Qj,b.Oi,L.ud,L.xj);S={fb:L,$d:T}}var rb=S,Y=rb.fb.ud;if(da){if(1<l.length){for(var hb={},pa=0;pa<y.length;pa++){var pb=y[pa].settings;
if("HAIR"==pb.type&&("OBJECT"==pb.render_type||"GROUP"==pb.render_type)){var jb=pb.b4w_vcol_from_name,la=pb.b4w_vcol_to_name;""!==jb&&""!==la&&(hb[jb]=F.O(Y[jb]))}}"a_bending_col_main"in Y&&(hb.a_bending_col_main=F.O(Y.a_bending_col_main));"a_bending_col_detail"in Y&&(hb.a_bending_col_detail=F.O(Y.a_bending_col_detail));var na=Qa.zF(e,[],hb)}else na=rb.$d;var z=na}else z=null;for(var N=z,ka=a.rb,O=[],ma=a.particle_systems,Aa=a.data,R=0;R<ma.length;R++){var ia=ma[R],ja=ia.settings;if(ja.count)if("EMITTER"==
ja.type){if("DYNAMIC"==b.type){var ea=K("PARTICLES");ea.Xb.Bf=b.gb;ea.Xb.ag=b.jc;ea.Xb.Cf=b.Xc;ea.hj=F.O(d);var fb=ia.settings.material-1;fb>=ka.Sc.length&&(Da.warn('Wrong material used for rendering particle system "'+ia.name+'"'),fb=0);var sb=fb;var Na=ka.Sc[sb];if(!xa(ka,sb)&&("HALO"===ia.settings.render_type&&"HALO"==Na.type&&(ea.Pr=!0),P(ea,Na,Aa))){var cb=ea,oa=ka,ha=ia.settings;switch(ha.b4w_billboard_align){case "VIEW":X(cb,"BILLBOARD_ALIGN","BILLBOARD_ALIGN_VIEW");break;case "XY":X(cb,"BILLBOARD_ALIGN",
"BILLBOARD_ALIGN_XY");break;case "YZ":X(cb,"BILLBOARD_ALIGN","BILLBOARD_ALIGN_YZ");break;case "ZX":X(cb,"BILLBOARD_ALIGN","BILLBOARD_ALIGN_ZX");break;default:ra.va("Wrong billboard align value")}X(cb,"BILLBOARD",0);var ca=ha.b4w_enable_soft_particles&&Ta.uE(oa,ha);X(cb,"SOFT_PARTICLES",0<ha.b4w_particles_softness&&ca&&Ba.Ku?1:0);X(cb,"SOFT_STRENGTH",D.Ga(ha.b4w_particles_softness));D.Wa(cb.Mb,"WORLD_SPACE","WORLD"==ha.b4w_coordinate_system?1:0);ea.df=!0;ea.Wj=a.b4w_do_not_cull;ea.El=va(ea,b,ka.name+
"_"+ja.uuid);Va.ZN(ea,ia,Na);var V=Va.IP(ea,Aa,ia,ka.ka);Va.fV(V,ea,ja.count);Va.eV(ka);Ha(ea,ka.ka);La(ea);O.push({fb:ea,$g:b,hu:b,$d:V,Jh:[Na.name],Qe:[a]})}}}else if("HAIR"==ja.type){var za=F._13(ia.seed),w=-1!=F._70(Ba.QA,Qb)&&!ja.b4w_initial_rand_rotation&&!ja.b4w_hair_billboard,Q=4;w&&(Q=8);if(ia.transforms.length)var ta=ia.transforms;else{var Wb=Qa.Zz(N,ja.count,!1,za);ta=new Float32Array(Wb.length*Q);for(var Ja=0;Ja<Wb.length;Ja++){var Ca=.75+.5*F._40(za);ta[Ja*Q]=Wb[Ja][0];ta[Ja*Q+1]=Wb[Ja][1];
ta[Ja*Q+2]=Wb[Ja][2];ta[Ja*Q+3]=Ca;w&&(ta[Ja*Q+4]=1,ta[Ja*Q+5]=0,ta[Ja*Q+6]=0,ta[Ja*Q+7]=0)}}var Xa=Ra.xc(h,bb.Bj)?!0:!1;if("OBJECT"==ja.render_type){var Sb=[I(h,ja.dupli_object.rb.ka,!b.cf,!0)],vb=Fa(a,b,Y,N,[ja.dupli_object],Sb,[ta],ja,ia,Xa,za,!1,d);O.push.apply(O,vb)}else if("GROUP"==ja.render_type){var qa=ja.dupli_group.objects;Sb=[];for(Ja=0;Ja<qa.length;Ja++){var wb=I(h,qa[Ja].rb.ka,!b.cf,!0);Sb.push(wb)}var ib=!1,M=[];for(Ja=0;Ja<qa.length;Ja++)M.push(qa[Ja].rb);if(ja.use_whole_group){var Pb=
Ia(ta,M,w,Q);ib=!0}else{if(ja.use_group_count){for(var Wa=ta,ua=M,Ga=ja.dupli_weights,U=za,ab=w,Ua=Q,xc={},qc=[],Mb=0;Mb<ua.length;Mb++)for(var Tc=ua[Mb],Kc=Tc.oe||Tc.name,hc=0;hc<Ga.length;hc++){var uc=Ga[hc];Kc==uc.name&&qc.push(uc)}Ga.length!=qc.length&&Da.error("dupli weights match failed");for(Mb=0;Mb<Wa.length;Mb+=Ua){for(var Yb,Ec=qc,vc=[0],Zb=0;Zb<Ec.length;Zb++)vc[Zb+1]=vc[Zb]+Ec[Zb].count;var kd=vc[vc.length-1]*F._40(U),xb=0;for(Zb=0;Zb<vc.length;Zb++)if(kd>=vc[Zb]&&kd<vc[Zb+1]){xb=Zb;break}Yb=
xb;xc[Yb]=xc[Yb]||[];xc[Yb].push(Wa[Mb],Wa[Mb+1],Wa[Mb+2],Wa[Mb+3]);ab&&xc[Yb].push(Wa[Mb+4],Wa[Mb+5],Wa[Mb+6],Wa[Mb+7])}for(Yb in xc)xc[Yb]=new Float32Array(xc[Yb]);var Hb=xc}else{for(var qb=ta,Nb=za,Bc=w,nc=Q,cc=M.length,dc={},$a=0;$a<qb.length;$a+=nc){var ec=Math.floor(cc*F._40(Nb));dc[ec]=dc[ec]||[];dc[ec].push(qb[$a],qb[$a+1],qb[$a+2],qb[$a+3]);Bc&&dc[ec].push(qb[$a+4],qb[$a+5],qb[$a+6],qb[$a+7])}for(ec in dc)dc[ec]=new Float32Array(dc[ec]);Hb=dc}Pb=Hb}vb=Fa(a,b,Y,N,qa,Sb,Pb,ja,ia,Xa,za,ib,d);
O.push.apply(O,vb)}"INSTANCE"==ja.b4w_wind_bend_inheritance&&ka.ka.yf&&Da.warn('Emitter object "'+ka.name+"\" has a particle system with wind bending inheritance from the particle instance. Wind bending on the emitter isn't disabled. Expect unforeseen behavior.")}else ra.va("Unknown particle settings type")}fa?c.push.apply(c,O):c=O}return c}function ba(a){for(var b=[],h=[],d={},c=0;c<a.length;c++){var g=a[c].fb,k=null;if(g.id in d){var e=d[g.id],l=h[e].fb;ja(g,function(a){ja(l,function(b){F._59(a,
b)&&1!=a.nG&&(k=h[e])})});if(!k){do g.id++;while(d[g.id])}}k||(k={fb:g,rH:[],ZD:[],KI:[],Qe:[],MH:[],Jh:[]},d[g.id]=h.length,h.push(k));if(a[c].$d&&a[c].$d.Gb){k.rH.push(a[c].$g);k.ZD.push(a[c].hu);k.KI.push(a[c].$d);for(var G=0;G<a[c].Qe.length;G++)g=a[c].Qe[G],-1==k.MH.indexOf(g.uuid)&&(k.Qe.push(g),k.MH.push(g.uuid));for(G=0;G<a[c].Jh.length;G++)g=a[c].Jh[G],-1==k.Jh.indexOf(g)&&k.Jh.push(g)}k.Jh.sort()}for(c=0;c<h.length;c++){g=h[c].fb;var p=h[c].rH,t=h[c].ZD,f=h[c].KI;a="DYNAMIC"==t[0].type||
"COLOR_ID"==g.type?t[0]:Ta.qz(t[0]);if("STATIC"==a.type&&"COLOR_ID"!=g.type)for(G=0;G<p.length;G++){var m=p[G],B=t[G];d=f[G];var u=ea.m(Pb);if(m.qh&&!m.Nq){var q=ea.j(m.na,jb);ea.v(q,u);m=ea.i(m.na,jb);ea.s(m,u)}else ea.a(m.na,u);B.ul?d.If||(B.qh?Qa.wU(d,u):Qa.mC(d,u)):Qa.mC(d,u);if(B.ul)X(g,"AU_QUALIFIER","GLSL_IN");else if(1<h[c].Qe.length){m={};if(B.yf||B.qh)m.au_center_pos=ea.j(u,R.create());B.yf&&(m.au_wind_bending_amp=[B.Cg],m.au_wind_bending_freq=[B.Dg],m.au_detail_bending_amp=[B.hg],m.au_detail_bending_freq=
[B.ig],m.au_branch_bending_amp=[B.cg]);Qa.vU(d,m);X(g,"AU_QUALIFIER","GLSL_IN")}else a.qu.set(u.subarray(0,3)),X(g,"AU_QUALIFIER","uniform")}if(0==f.length)d=Qa.Hh(za.mt("%empty"));else if(1==f.length)d=f[0];else{d=[];for(G=0;G<f.length;G++)Qa.hR(f[G])||d.push(G);if(d.length<f.length)for(G=0;G<d.length;G++)Qa.Mx(f[d[G]]);d=Qa.II(f)}if("STATIC"==a.type){if("COLOR_ID"!=g.type){f=[];for(G=0;G<h[c].Qe.length;G++)U.G(h[c].Qe[G].rb.ka.$D,f);U.a(f,0,f.length,a.bi);U.o(a.bi,a.gb);a.Yk=U.z(F._1(f),!0);U.s(a.Yk,
a.jc);a.Ye=U.B(a.Yk);U.u(a.Ye,a.Xc)}a.dk&&(G=h[c].Qe[0].b4w_cluster_data,G.cluster_center?a.fs.set(G.cluster_center):a.fs.set(a.Ye.Da))}"PARTICLES"!=g.type&&(G=d.Jd,a.qh?(U.o(a.gb,g.Xb.Bf),U.s(a.jc,g.Xb.ag),U.u(a.Xc,g.Xb.Cf),g.hm=!1):(U.o(G.gb,g.Xb.Bf),U.s(G.jc,g.Xb.ag),a.Xc.Lb<G.Xc.Lb?"STATIC"==a.type&&"COLOR_ID"!=g.type?U.u(a.Ye,g.Xb.Cf):U.u(a.Xc,g.Xb.Cf):U.u(G.Xc,g.Xb.Cf),g.hm=U.M(g.Xb.ag,g.Xb.Cf)));b.push({fb:g,ka:a,$d:d,Jh:h[c].Jh,Qe:h[c].Qe})}return b}function I(a,b,h,d){var c=[];d||(b.Ql&&
Ra.xc(a,bb.zf)||b.Ed&&Ra.xc(a,bb.Xh))&&c.push("COLOR_ID");h&&(c.push("MAIN"),c.push("NODES_GLOW"),Ra.xc(a,bb.Wh)&&c.push("DEBUG_VIEW"),Ra.xc(a,bb.Gg)&&c.push("SHADOW"),Ra.xc(a,bb.Bj)&&c.push("GRASS_MAP"));c.push("PHYSICS");if(b.sf||b.ze)for(a=null,b.sf&&(a=["MAIN","NODES_GLOW","COLOR_ID","PHYSICS","DEBUG_VIEW"]),b.ze&&(b=["COLOR_ID","PHYSICS","SHADOW","DEBUG_VIEW"],null!==a?a=F.D(a,b):a=b),b=a,a=0;a<b.length;a++)h=c.indexOf(b[a]),-1!==h&&c.splice(h,1);return c}function P(a,b,h){switch(a.type){case "MAIN":if(b.cf)var c=
!1;else{if(b.jh&&"HALO"!=b.type)Aa(a,b,h,"MAIN");else{t(a,b);a.pb=b.pb;a.Fi=b.vk&&"OPAQUE"!=b.Pb&&"CLIP"!=b.Pb&&"ALPHA_ANTIALIASING"!=b.Pb;a.Yd=b.Yd;a.Sh.set([1,1,1]);var g=b.hh;a.Qc.set(b.Qc);a.Qc[3]=b.alpha;if(b.dj){ka(a,"lens_flares.glslv","lens_flares.glslf");Ea(a,"a_position");Ea(a,"a_texcoord");var k=Ua.hf(g[0]),e=g[0].texture;qa(a,k,"u_sampler",e.name)}else{ka(a,"main.glslv","main_stack.glslf");b.bd||(h={bd:b.bd,Ff:b.Ff,Pf:b.Pf,Se:b.Se},c=p(b.nd,"MAIN"),h=ya.yz(c,h,a.hj),a.Mb.Mf=ya.fr(h));
var l=d("use_map_color_diffuse",!0,g);c=d("use_map_color_spec",!0,g);var f=d("use_map_normal",!0,g),m=d("use_map_mirror",!0,g),G=d("use_stencil",!0,g);h=l[0];c=c[0];f=f[0];m=m[0];l=l[1];g=G[0]&&d("use_rgb_to_intensity",!0,g)[0];if(h){e=h.texture;switch(h.blend_type){case "MIX":X(a,"TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MIX");break;case "MULTIPLY":X(a,"TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MULTIPLY")}k=Ua.hf(h);qa(a,k,"u_colormap0",e.name);a.Wi=h.diffuse_color_factor;h.use_map_alpha?a.oh=h.alpha_factor:
a.oh=0;a.Sh.set(h.scale)}G=h&&h==c;c&&(G||(e=c.texture,k=Ua.hf(c),qa(a,k,"u_specmap0",e.name)),a.Dk=c.specular_color_factor);if(f&&(e=f.texture,Ea(a,"a_tbn"),k=Ua.hf(f),qa(a,k,"u_normalmap0",e.name),a.np=f.normal_factor,e.b4w_use_map_parallax&&Ba.Ow)){k=D.Ga(e.b4w_parallax_steps);var B=D.Ga(e.b4w_parallax_lod_dist);X(a,"PARALLAX",1);X(a,"PARALLAX_STEPS",k);X(a,"PARALLAX_LOD_DIST",B);a.parallax_scale=e.b4w_parallax_scale}m&&(e=m.texture,k=Ua.hf(m),qa(a,k,"u_mirrormap",e.name),a.on=m.mirror_factor);
if(m=h&&l&&g?1:0)k=Ua.hf(l),e=l.texture,qa(a,k,"u_colormap1",e.name),k=Ua.hf(g),e=g.texture,qa(a,k,"u_stencil0",e.name);(e=h||c||f)&&a.Sh.set(e.scale);X(a,"TEXTURE_SPEC",void 0==c?0:1);X(a,"ALPHA_AS_SPEC",G?1:0);X(a,"TEXTURE_STENCIL_ALPHA_MASK",m);Ea(a,"a_position");Ea(a,"a_tbn");(h||c||f)&&Ea(a,"a_texcoord");if(b.Sa.fj){a.Bg=!0;a.water_dynamic=b.Sa.is_dynamic;b.Sa.shore_smoothing&&!a.Ob?(Da.warn('Material: "'+b.name+'" is opaque.',"Disabling water shore smoothing."),a.Un=!1):a.Un="REFLECT"!=a.fc?
b.Sa.shore_smoothing:!1;ka(a,"water.glslv","water.glslf");m={bd:!1,Ff:b.Ff,Pf:b.Pf,Se:b.Se};G=p(b.nd);m=ya.yz(G,m,a.hj);a.Mb.Mf=ya.fr(m);Ea(a,"a_position");Ba.GJ?(Ea(a,"a_polyindex"),a.Ab=!0,R.set(0,0,0,a.wireframe_edge_color),ua.iA()?X(a,"DEBUG_WIREFRAME",1):X(a,"DEBUG_WIREFRAME",2)):X(a,"DEBUG_WIREFRAME",0);G=b.hh;m=d("use_map_normal",!0,G);k=d("use_map_mirror",!0,G)[0];m.length&&(e=m[0].texture,qa(a,Ua.hf(m[0]),"u_normalmap0",e.name),a.lm=b.Sa.norm_uv_velocity);X(a,"NUM_NORMALMAPS",m.length);a.qk=
Array(m.length);for(e=0;e<m.length;e++)a.qk[e]=new Float32Array(2),a.qk[e].set([m[e].scale[0],m[e].scale[1]]);k&&(B=Ua.hf(k),e=k.texture,qa(a,B,"u_mirrormap",e.name),a.on=k.mirror_factor);k=null;if(Ba.Ho)for(e=0;e<G.length;e++){var u=G[e];if(!0===u.texture.b4w_water_foam){k=u;break}}k&&(X(a,"FOAM",1),B=Ua.hf(k),e=k.texture,qa(a,B,"u_foam",e.name),a.foam_factor=b.Sa.foam_factor,a.gv.set(e.b4w_foam_uv_freq),a.fv.set(e.b4w_foam_uv_magnitude),a.Er[0]=k.scale[0],a.Er[1]=k.scale[1]);for(e=0;e<G.length;e++)if(u=
G[e],!0===u.texture.b4w_shore_dist_map){var q=u;break}q&&Ba.Wt&&(G=Ua.hf(q),e=q.texture,qa(a,G,"u_shore_dist_map",e.name),X(a,"SHORE_PARAMS",1),q=u.texture.b4w_shore_boundings,X(a,"MAX_SHORE_DIST",D.Ga(u.texture.b4w_max_shore_dist)),X(a,"SHORE_MAP_SIZE_X",D.Ga(q[0]-q[1])),X(a,"SHORE_MAP_SIZE_Y",D.Ga(q[2]-q[3])),X(a,"SHORE_MAP_CENTER_X",D.Ga((q[0]+q[1])/2)),X(a,"SHORE_MAP_CENTER_Y",D.Ga((q[2]+q[3])/2)));b.Sa.Wv?(X(a,"GENERATED_MESH",1),a.xy=!0,a.yy=b.Sa.Ew,a.zy=b.Sa.Fw,a.wy=b.Sa.Mu):(Ea(a,"a_tbn"),
(k||m.length)&&Ea(a,"a_texcoord"),X(a,"GENERATED_MESH",0));if(b.Sa.is_dynamic){u=D.Ga(b.Sa.dst_noise_scale0);q=D.Ga(b.Sa.dst_noise_scale1);m=D.Ga(b.Sa.dst_noise_freq0);G=D.Ga(b.Sa.dst_noise_freq1);e=D.Ga(b.Sa.dir_min_shore_fac);k=D.Ga(b.Sa.dir_freq);B=D.Ga(b.Sa.dir_noise_scale);var v=D.Ga(b.Sa.dir_noise_freq),r=D.Ga(b.Sa.dir_min_noise_fac),J=D.Ga(b.Sa.dst_min_fac),I=D.Ga(b.Sa.waves_hor_fac);X(a,"DST_NOISE_SCALE_0",u);X(a,"DST_NOISE_SCALE_1",q);X(a,"DST_NOISE_FREQ_0",m);X(a,"DST_NOISE_FREQ_1",G);X(a,
"DIR_MIN_SHR_FAC",e);X(a,"DIR_FREQ",k);X(a,"DIR_NOISE_SCALE",B);X(a,"DIR_NOISE_FREQ",v);X(a,"DIR_MIN_NOISE_FAC",r);X(a,"DST_MIN_FAC",J);X(a,"WAVES_HOR_FAC",I)}na(a,b);pa(a,b);a.shallow_water_col.set(b.Sa.jx);a.shore_water_col.set(b.Sa.mx);a.shallow_water_col_fac=b.Sa.kx;a.shore_water_col_fac=b.Sa.nx;X(a,"ABSORB",D.Ga(b.Sa.absorb_factor));X(a,"SSS_STRENGTH",D.Ga(b.Sa.sss_strength));X(a,"SSS_WIDTH",D.Ga(b.Sa.sss_width))}"HALO"===b.type&&(ka(a,"halo.glslv","halo.glslf"),da(a,b),a.Qj=["a_position"]);
b.Se&&(X(a,"USE_TBN_SHADING",1),Ea(a,"a_shade_tangs"));X(a,"TEXCOORD",0);X(a,"NORMAL_TEXCOORD",0);h&&H(a,h,"TEXTURE_COLOR0_CO");l&&H(a,l,"TEXTURE_COLOR1_CO");g&&H(a,g,"TEXTURE_STENCIL_ALPHA_MASK_CO");c&&H(a,c,"TEXTURE_SPEC_CO");f&&H(a,f,"TEXTURE_NORM_CO");X(a,"SHADELESS",b.bd?1:0);a.bd=b.bd}X(a,"ALPHA","OPAQUE"===b.Pb?0:1);X(a,"ALPHA_CLIP","CLIP"===b.Pb?1:0);X(a,"DOUBLE_SIDED_LIGHTING",b.cq?1:0);b.tt?(X(a,"VERTEX_COLOR",1),Ea(a,"a_color")):X(a,"VERTEX_COLOR",0);a.fe=b.fe;a.Je=b.Je;a.ie=b.ie;a.Re.set(b.Re);
a.rg=b.rg;na(a,b);pa(a,b);b.Wr?X(a,"WETTABLE",1):X(a,"WETTABLE",0);la(a,b);b.gn&&!a.Ob?(Da.warn('Material "'+b.name+'" is not blend. Disabling refractions.'),a.sj=!1):a.sj=b.gn;a.Oh=b.Oh}c=!0}break;case "NODES_GLOW":c=Aa(a,b,h,"GLOW");break;case "SHADOW":if(b.dj||b.Sa.fj||b.cf||"HALO"==b.type)c=!1;else if(t(a,b),a.pb=b.pb,a.Ob)c=!1;else{!b.jh||"CLIP"!=b.Pb&&"ALPHA_ANTIALIASING"!=b.Pb?ka(a,"shadow.glslv","shadow.glslf"):Aa(a,b,h,"SHADOW");a.Ab=a.Ab&&!(Ba.zp&&"ALPHA_ANTIALIASING"==b.Pb);O.set(0,0,0,
b.alpha,a.Qc);Ea(a,"a_position");Ea(a,"a_tbn");X(a,"ALPHA","OPAQUE"===b.Pb?0:1);a.Sh.set([1,1,1]);h=d("use_map_color_diffuse",!0,b.hh)[0];if(!h||"CLIP"!=b.Pb&&"ALPHA_ANTIALIASING"!=b.Pb)X(a,"TEXTURE_COLOR",0);else{switch(h.blend_type){case "MIX":X(a,"TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MIX");break;case "MULTIPLY":X(a,"TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MULTIPLY")}a.Sh.set(h.scale);X(a,"TEXTURE_COLOR",1);Ea(a,"a_texcoord");b=Ua.hf(h);h=h.texture;"IMAGE"!=b.source&&"ENVIRONMENT_MAP"!=b.source&&
"CANVAS"!=b.source&&"NONE"!=b.source||qa(a,b,"u_colormap0",h.name)}c=!0}break;case "PHYSICS":h=b.Fd;b=b.Sa;h.aq?(a.Bi=h.Bi,a.Sb=h.Sb,a.$e=h.$e,a.Ze=h.Ze,a.af=h.af,a.ve=h.ve,a.uh=h.uh,c=!0):b.fj?(a.Bg=!0,a.NV=b.is_dynamic,a.dst_noise_scale0=b.dst_noise_scale0,a.dst_noise_scale1=b.dst_noise_scale1,a.dst_noise_freq0=b.dst_noise_freq0,a.dst_noise_freq1=b.dst_noise_freq1,a.dir_min_shore_fac=b.dir_min_shore_fac,a.dir_freq=b.dir_freq,a.dir_noise_scale=b.dir_noise_scale,a.dir_noise_freq=b.dir_noise_freq,
a.dir_min_noise_fac=b.dir_min_noise_fac,a.dst_min_fac=b.dst_min_fac,a.waves_hor_fac=b.waves_hor_fac,c=!0):c=!1;break;case "COLOR_ID":if(b.dj||"HALO"==b.type)c=!1;else{f=c=b.Pb;"ALPHA_ANTIALIASING"==f&&(f="CLIP",b.Pb="CLIP");t(a,b);a.pb=b.pb;a.Uf=!1;a.Ab=!0;a.Ob=!1;a.Fi=b.vk&&"OPAQUE"!=f&&"CLIP"!=f;b.jh&&"CLIP"==f?Aa(a,b,h,"COLOR_ID"):ka(a,"color_id.glslv","color_id.glslf");O.set(0,0,0,b.alpha,a.Qc);Ea(a,"a_position");X(a,"ALPHA","OPAQUE"===f?0:1);a.Sh.set([1,1,1]);h=d("use_map_color_diffuse",!0,b.hh)[0];
X(a,"ALPHA_CLIP","CLIP"===f?1:0);if(h&&"CLIP"==f){switch(h.blend_type){case "MIX":X(a,"TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MIX");break;case "MULTIPLY":X(a,"TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MULTIPLY")}a.Sh.set(h.scale);X(a,"TEXTURE_COLOR",1);Ea(a,"a_texcoord");f=Ua.hf(h);h=h.texture;"IMAGE"!=f.source&&"ENVIRONMENT_MAP"!=f.source&&"CANVAS"!=f.source&&"NONE"!=f.source||qa(a,f,"u_colormap0",h.name)}else X(a,"TEXTURE_COLOR",0);b.Pb=c;c=!0}break;case "GRASS_MAP":!b.uj.Xo||b.cf?c=!1:(t(a,b),a.pb=
b.pb,a.Ob=!1,a.Uf=!1,a.Ab=!0,ka(a,"grass_map.glslv","grass_map.glslf"),Ea(a,"a_position"),h=b.uj.zr?b.uj.zr:null,b=b.uj.yr?b.uj.yr:null,a.ud.a_grass_size={Xm:!0,src:[]},h?(a.ud.a_grass_size.src.push({name:h,Ih:4}),X(a,"DYNAMIC_GRASS_SIZE",1)):X(a,"DYNAMIC_GRASS_SIZE",0),a.ud.a_grass_color={Xm:!0,src:[]},b?(a.ud.a_grass_color.src.push({name:b,Ih:7}),X(a,"DYNAMIC_GRASS_COLOR",1)):X(a,"DYNAMIC_GRASS_COLOR",0),X(a,"GRASS_TEXTURE_SIZE",D.Ga(Na.No)),c=!0);break;case "DEBUG_VIEW":c=Q(a,b);break;case "PARTICLES":a:if(b.cf)c=
!1;else{c=b.hh;if(a.Pr)ka(a,"particle_system.glslv","particle_system_stack.glslf"),X(a,"HALO_PARTICLES",1),da(a,b);else{f={bd:!1,Ff:b.Ff,Pf:b.Pf,Se:b.Se};if(b.jh){ka(a,"particle_system.glslv","particle_system.glslf");Aa(a,b,h,"PARTICLES");c=!0;break a}ka(a,"particle_system.glslv","particle_system_stack.glslf");h=p(b.nd);h=ya.yz(h,f,a.hj);a.Mb.Mf=ya.fr(h);if(h=d("use_map_color_diffuse",!0,c)[0]){X(a,"TEXTURE_COLOR",1);switch(h.blend_type){case "MIX":X(a,"TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MIX");
break;case "MULTIPLY":X(a,"TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MULTIPLY")}a.Wi=h.diffuse_color_factor;h.use_map_alpha?a.oh=h.alpha_factor:a.oh=0;qa(a,Ua.hf(h),"default"+String(a.Ua.length),h.texture.name)}}a.Qc.set(b.Qc);a.Qc[3]=b.alpha;a.fe=b.fe;a.Je=b.Je;a.ie=b.ie;a.Re.set(b.Re);a.rg=b.rg;Ea(a,"a_position");Ea(a,"a_tbn");X(a,"ALPHA","OPAQUE"===b.Pb?0:1);X(a,"ALPHA_CLIP","CLIP"===b.Pb?1:0);X(a,"PARTICLES_SHADELESS",b.bd?1:0);na(a,b);pa(a,b);t(a,b);a.pb=b.pb;a.Fi=b.vk&&"OPAQUE"!=b.Pb&&"CLIP"!=
b.Pb&&"ALPHA_ANTIALIASING"!=b.Pb;a.Yd=b.Yd;c=!0}break;default:ra.va("Wrong batch type: "+a.type)}return c}function p(a,b,h){var d="";V.zb()&&(d=V.get_active().uuid);return ya.LP(a,b,d,h)}function da(a,b){b=b.Oo;X(a,"NUM_RINGS",b.ax);X(a,"NUM_LINES",b.gw);X(a,"NUM_STARS",b.Ix);X(a,"SKY_STARS",b.Yv?1:0);a.Lv=b.size;a.Iv=b.Qr/20;a.Kv.set(b.bx);a.Jv.set(b.iw);a.Mv=1/b.Jx;a.Nv=b.Kx;a.Hv=!0}function H(a,b,h){switch(b.texture_coords){case "UV":case "ORCO":X(a,h,"TEXTURE_COORDS_UV_ORCO");X(a,"TEXCOORD",1);
break;case "NORMAL":X(a,h,"TEXTURE_COORDS_NORMAL");X(a,"NORMAL_TEXCOORD",1);break;default:X(a,h,"TEXTURE_COORDS_NONE")}}function t(a,b){switch(b.Pb){case "ALPHA_ANTIALIASING":a.Ob=!1;a.Uf=!1;a.Ab=!0;a.Ej=!1;a.Yf=!0;break;case "ALPHA_SORT":a.Ob=!0;a.Uf=!0;a.Ab=!0;a.Ej=!1;a.Yf=!1;break;case "ALPHA":a.Ob=!0;a.Uf=!1;a.Ab=!0;a.Ej=!1;a.Yf=!1;break;case "CLIP":a.Ob=!1;a.Uf=!1;a.Ab=!0;a.Ej=!0;a.Yf=!1;break;case "ADD":a.Ob=!0;a.Uf=!1;a.Ab=!1;a.Ej=!1;a.Yf=!1;break;case "OPAQUE":a.Ob=!1;a.Uf=!1;a.Ab=!0;a.Ej=
!1;a.Yf=!1;break;default:ra.va("Unknown alpha blend mode: "+b.Pb)}}function d(a,b,h){for(var d=[],c=h.length,g=0;g<c;g++){var k=h[g];k[a]==b&&k.texture&&k.texture.sa&&d.push(k)}return d}function la(a,b){b=b.zn;a.reflect_factor=b.reflect_factor;a.ji[0]=b.fresnel;a.ji[1]=1-b.fresnel_factor/5}function na(a,b){var h=0;switch(b.Pf){case "PHONG":case "COOKTORR":var d=b.Dn;break;case "WARDISO":d=b.Dx;break;case "TOON":d=b.Ex;h=b.Fx;break;case "BLINN":d=b.Cx;h=b.Dn;break;default:Da.error("unsupported specular shader: "+
b.Pf+' (material "'+b.name+'")'),d=b.Dn}a.tf[0]=b.Zs;a.tf[1]=d;a.tf[2]=h}function pa(a,b){switch(b.Ff){case "LAMBERT":a.he[0]=0;a.he[1]=0;break;case "OREN_NAYAR":a.he[0]=b.cx;a.he[1]=0;break;case "FRESNEL":a.he[0]=b.Nu;a.he[1]=b.Ou;break;case "MINNAERT":a.he[0]=b.Gu;a.he[1]=0;break;case "TOON":a.he[0]=b.Pu;a.he[1]=b.Qu;break;default:Da.error("unsupported diffuse shader: "+b.Ff+' (material "'+b.name+'")'),a.he[0]=0,a.he[1]=0}}function Aa(a,b,d,c){if(!b.jh||b.cf)return!1;switch(c){case "MAIN":ka(a,
"main.glslv","main.glslf");var g=!1;break;case "GLOW":ka(a,"main.glslv","main.glslf");g=!0;break;case "SHADOW":ka(a,"shadow.glslv","shadow.glslf");g=!1;break;case "COLOR_ID":ka(a,"color_id.glslv","color_id.glslf"),g=!1}var k=b.ne;d={OC:d.active_vcol_name,NC:d.active_uv_name};var e=p(b.nd,c,d);c=ya.OE(k,e,c,d,a.hj);if(!c.Ya)return Da.error('Failed to create node graph for material "'+b.name+'", disable nodes'),Y(a,b),!0;a.Me=c.id;a.bc=!0;X(a,"NODES",1);X(a,"DOUBLE_SIDED_LIGHTING",b.cq?1:0);Ea(a,"a_position");
b.ly&&Ea(a,"a_orco_tex_coord");t(a,b);a.pb=b.pb;a.Yd=b.Yd;g?(X(a,"ALPHA",1),X(a,"ALPHA_CLIP",0)):(X(a,"ALPHA","OPAQUE"===b.Pb?0:1),X(a,"ALPHA_CLIP","CLIP"===b.Pb?1:0));a.Fi=b.vk&&"OPAQUE"!=b.Pb&&"CLIP"!=b.Pb&&"ALPHA_ANTIALIASING"!=b.Pb;a.ie=b.ie;a.fe=b.fe;la(a,b);b.Wr?X(a,"WETTABLE",1):X(a,"WETTABLE",0);var l=null,f=!1;h.Na(c.Ya,function(h,d){switch(d.type){case "UVMAP":case "TEX_COORD_UV":case "GEOMETRY_UV":case "UV_MERGED":h=d.data.name;d=d.data.value;a.xj||(a.xj={});a.xj[d]=h;break;case "GEOMETRY_VC":case "GEOMETRY_VC1":case "GEOMETRY_VC2":case "GEOMETRY_VC3":h=
d.data.name;a.ud[h]={Xm:!0,src:[{name:d.data.value}]};var c=0;if("GEOMETRY_VC"==d.type)c=7;else for(var g=0;g<d.outputs.length;g++){var k="RGB".indexOf(d.outputs[g].identifier);-1<k&&(c|=1<<2-k)}a.ud[h].src[0].Ih=c;break;case "TEX_COORD_NO":case "TEX_COORD_RE":case "GEOMETRY_NO":case "FRESNEL":case "LAYER_WEIGHT":Ea(a,"a_tbn");break;case "TEX_COORD_OB":X(a,"USE_MODEL_TSR_INVERSE",1);break;case "TEX_COORD_WI":X(a,"USE_POSITION_CLIP",1);break;case "MATERIAL_BEGIN":d.data.value.Se&&(X(a,"USE_TBN_SHADING",
1),"PARTICLES"!=a.type&&Ea(a,"a_shade_tangs"));Ea(a,"a_tbn");f=!0;break;case "BSDF_BEGIN":f=!0;Ea(a,"a_tbn");break;case "TEXTURE_COLOR":case "TEXTURE_ENVIRONMENT_CUBE":case "TEXTURE_ENVIRONMENT_EQUIRECTANGULAR":case "TEXTURE_ENVIRONMENT_MIRROR_BALL":h=d.data.name;c=d.data.Rq;d=d.data.value;qa(a,d,h,c);break;case "TEXTURE_NORMAL":case "B4W_PARALLAX":X(a,"CALC_TBN_SPACE",1);Ea(a,"a_tbn");d.data&&(h=d.data.name,c=d.data.Rq,d=d.data.value,qa(a,d,h,c));break;case "NORMAL_MAP":Ea(a,"a_tbn");switch(Number(d.Jb[0][1])){case ya.FK:X(a,
"CALC_TBN_SPACE",1);break;case ya.EK:case ya.DK:X(a,"USE_MODEL_TSR",1)}break;case "LAMP":d.data&&(a.hn=d.data);break;case "B4W_REFRACTION":a.Ob?a.sj=!0:(a.sj=!1,Da.warn('Material "'+b.name+'" is not blend. Disabling refractions.'));X(a,"USE_POSITION_CLIP",1);break;case "VALTORGB":case "CURVE_VEC":case "CURVE_RGB":l||(l=d.data.yb);break;case "PARTICLE_INFO":"PARTICLES"==a.type&&d.data&&(a.rs=d.data);break;case "VECT_TRANSFORM":switch(Number(d.Jb[1][1])){case ya.DD:X(a,"USE_MODEL_TSR_INVERSE",1);break;
case ya.CD:X(a,"USE_VIEW_TSR",1);break;case ya.BD:X(a,"USE_MODEL_TSR",1);break;case ya.AD:X(a,"USE_MODEL_TSR",1);X(a,"USE_VIEW_TSR",1);break;case ya.zD:X(a,"USE_VIEW_TSR_INVERSE",1);break;case ya.yD:X(a,"USE_MODEL_TSR_INVERSE",1),X(a,"USE_VIEW_TSR_INVERSE",1)}break;case "OBJECT_INFO":X(a,"USE_MODEL_TSR",1);a.pp[1]=b.nj;a.pp[2]=Math.random();break;case "B4W_VECTOR_VIEW":case "GEOMETRY_VW":X(a,"USE_VIEW_TSR",1);break;case "B4W_REFLECT":X(a,"USE_VIEW_TSR_INVERSE",1);break;case "BUMP":case "DISPLACEMENT_BUMP":Ea(a,
"a_tbn");ua.iA()?X(a,"USE_DERIVATIVES_EXT",1):Da.warn('"OES_standard_derivatives" extension is not available. Disabling the BUMP node in the "'+b.name+'" material.');break;case "BSDF_TRANSPARENT":d.data.value.uV?X(a,"USE_BSDF_TRANSPARENT_ALPHA",1):(a.Ob=!0,a.sj=!0,X(a,"USE_BSDF_TRANSPARENT_REFRACT",1));break;case "BSDF_GLOSSY":case "BSDF_DIFFUSE":X(a,"USE_BSDF_SKY_DIM",1);ua.jA()&&X(a,"USE_TEXTURE_LOD_EXT",1);break;case "BSDF_PRINCIPLED":X(a,"USE_BSDF_SKY_DIM",1),ua.jA()&&X(a,"USE_TEXTURE_LOD_EXT",
1),d.data.value.CV&&(a.Ob=!0,a.sj=!0,X(a,"USE_BSDF_PRINCIPLED_REFRACT",1),X(a,"USE_VIEW_TSR",1),X(a,"USE_PROJ_MATRIX_FRAG",1))}});l&&qa(a,l,"u_nodes_texture");f||(a.bd=!0);g=a.Mb.Mf=ya.fr(c.Ya);N(c.Ya,a,b.name);c=a.pi;k=a.oi;for(d=0;d<g.length;d++)switch(e=g[d],e.id){case "VALUE":var m=e.rp[0];if(m)for(var B=0;B<c.length;B+=3)if(c[B]==m){e.Jb.push(["VALUE_ROW_IND",c[B+1]]);e.Jb.push(["VALUE_COL_IND",c[B+2]]);break}break;case "RGB":if(m=e.rp[0])for(B=0;B<k.length;B+=2)if(k[B]==m){e.Jb.push(["RGB_IND",
k[B+1]]);break}}X(a,"NUM_VALUES",a.ri.length/4);X(a,"NUM_RGBS",a.Ne.length);return!0}function w(a,b){var d=b.sa.Aj;if(""!=d.Me){a.bc=!0;a.Me=d.Me;var c=ya.vv(d.Me).Ya;if(!c)return Da.error('Failed to create node graph for world "'+b.world.name+'", disable nodes'),Y(a,b.world.name),!0;var g=null;h.Na(c,function(b,h){switch(h.type){case "TEXTURE_COLOR":case "TEXTURE_ENVIRONMENT_EQUIRECTANGULAR":case "TEXTURE_ENVIRONMENT_MIRROR_BALL":qa(a,h.data.value,h.data.name,h.data.Rq);break;case "VALTORGB":case "CURVE_VEC":case "CURVE_RGB":g||
(g=h.data.yb);break;case "VECT_TRANSFORM":switch(Number(h.Jb[1][1])){case ya.DD:X(a,"USE_MODEL_TSR_INVERSE",1);break;case ya.CD:X(a,"USE_VIEW_TSR",1);break;case ya.BD:X(a,"USE_MODEL_TSR",1);break;case ya.AD:X(a,"USE_MODEL_TSR",1);X(a,"USE_VIEW_TSR",1);break;case ya.zD:X(a,"USE_VIEW_TSR_INVERSE",1);break;case ya.yD:X(a,"USE_MODEL_TSR_INVERSE",1),X(a,"USE_VIEW_TSR_INVERSE",1)}break;case "B4W_VECTOR_VIEW":X(a,"USE_VIEW_TSR",1);break;case "B4W_REFLECT":X(a,"USE_VIEW_TSR_INVERSE",1)}});g&&qa(a,g,"u_nodes_texture");
d=a.Mb.Mf=ya.fr(c);N(c,a,b.world.name);b=a.pi;c=a.oi;for(var k=0;k<d.length;k++){var e=d[k];switch(e.id){case "VALUE":var l=e.rp[0];if(l)for(var p=0;p<b.length;p+=3)if(b[p]==l){e.Jb.push(["VALUE_ROW_IND",b[p+1]]);e.Jb.push(["VALUE_COL_IND",b[p+2]]);break}break;case "RGB":if(l=e.rp[0])for(p=0;p<c.length;p+=2)if(c[p]==l){e.Jb.push(["RGB_IND",c[p+1]]);break}}}X(a,"NUM_VALUES",a.ri.length/4);X(a,"NUM_RGBS",a.Ne.length);return!0}return!1}function N(a,b){var h=[],d=[],c=[],g=[];oa(a,"",h,d,c,g);b.ri=h;
b.pi=d;b.Ne=c;b.oi=g}function oa(a,b,d,c,g,k){h.Na(a,function(a,h){"VALUE"==h.type?(a=(b?b+"%join%":"")+h.name,d.push(h.outputs[0].mb),h=c.length/3,c.push(a,parseInt(h/4),parseInt(h%4))):"RGB"==h.type&&(a=(b?b+"%join%":"")+h.name,h=h.outputs[0].mb.slice(0,3),g.push(h[0],h[1],h[2]),k.push(a,k.length/2))});a=d.length+4-d.length%4;for(var e=d.length;e<a;e++)d.push(0)}function Y(a,b){switch(a.type){case "SHADOW":ka(a,"shadow.glslv","shadow.glslf");break;case "COLOR_ID":ka(a,"color_id.glslv","color_id.glslf");
break;default:ka(a,"main.glslv","main_stack.glslf")}X(a,"SHADELESS",1);Ea(a,"a_position");Ea(a,"a_tbn");O.set(1,0,1,1,a.Qc);b&&(X(a,"ALPHA","OPAQUE"===b.Pb?0:1),X(a,"ALPHA_CLIP","CLIP"===b.Pb?1:0),X(a,"VERTEX_COLOR",0),a.Yd=b.Yd,t(a,b),a.pb=b.pb);return!0}function Q(a,b){if(b&&(b.dj||b.cf))return!1;ka(a,"debug_view.glslv","debug_view.glslf");Ea(a,"a_position");Ea(a,"a_tbn");Ea(a,"a_polyindex");a.Ab=!0;R.set(0,0,0,a.wireframe_edge_color);return!0}function Ha(a,b){a.Rd=b.Rd;if("PHYSICS"!==a.type){"DYNAMIC"==
b.type||"COLOR_ID"==a.type?(b.ul?X(a,"AU_QUALIFIER","GLSL_IN"):X(a,"AU_QUALIFIER","uniform"),X(a,"STATIC_BATCH",0)):(X(a,"AU_QUALIFIER","GLSL_IN"),X(a,"STATIC_BATCH",1));"DEBUG_VIEW"==a.type&&(ua.iA()?X(a,"WIREFRAME_QUALITY",1):X(a,"WIREFRAME_QUALITY",0),a.Uj?(X(a,"DEBUG_SPHERE",1),a.Ju?X(a,"DEBUG_SPHERE_DYNAMIC",1):X(a,"DEBUG_SPHERE_DYNAMIC",0)):X(a,"DEBUG_SPHERE",0),X(a,"ALPHA",1));b.Rf&&"PARTICLES"!=a.type&&!b.ul&&(a.Rf=b.Rf);b.yf?(""!==b.kk?(a.ud.a_bending_col_main={Xm:!0,src:[{name:b.kk,Ih:4}]},
Ea(a,"a_bending_col_main"),""!==b.Ef.OA&&""!==b.Ef.NA&&""!==b.Ef.sB?(a.ud.a_bending_col_detail={Xm:!0,src:[{name:b.Ef.OA,Ih:4},{name:b.Ef.NA,Ih:2},{name:b.Ef.sB,Ih:1}]},Ea(a,"a_bending_col_detail"),Ea(a,"a_tbn"),X(a,"DETAIL_BEND",1)):X(a,"DETAIL_BEND",0),X(a,"MAIN_BEND_COL",1)):X(a,"MAIN_BEND_COL",0),b.zm?X(a,"BEND_CENTER_ONLY",1):X(a,"BEND_CENTER_ONLY",0),X(a,"WIND_BEND",1)):X(a,"WIND_BEND",0);X(a,"BILLBOARD_PRES_GLOB_ORIENTATION",b.Nq|0);b.qh?X(a,"BILLBOARD",1):X(a,"BILLBOARD",0);b.qh&&b.ul?X(a,
"HAIR_BILLBOARD",1):X(a,"HAIR_BILLBOARD",0);b.Oq?X(a,"BILLBOARD_SPHERICAL",1):X(a,"BILLBOARD_SPHERICAL",0);switch(b.Pq){case "RANDOM":X(a,"BILLBOARD_RANDOM",1);X(a,"BILLBOARD_JITTERED",0);break;case "JITTERED":X(a,"BILLBOARD_RANDOM",0);X(a,"BILLBOARD_JITTERED",1);break;default:X(a,"BILLBOARD_RANDOM",0),X(a,"BILLBOARD_JITTERED",0)}b.ld&&Ba.Wt?X(a,"DYNAMIC_GRASS",1):X(a,"DYNAMIC_GRASS",0);a.ld=b.ld;"PARTICLES"!=a.type&&(a.df=b.df);a.Of=b.Of;a.sf=b.sf;a.Be=b.Be&&!a.bd&&!(a.Ob&&Ba.Lz);Ba.Ks?("MAIN"==
a.type&&a.Be||"SHADOW"==a.type)&&X(a,"RGBA_SHADOWS",1):X(a,"RGBA_SHADOWS",0);a.Pe=b.Pe;a.ze=b.ze;a.Hd=b.Hd;a.pp[0]=b.nj;a.Vg=b.Vg;a.Wg=b.Wg;a.ik=b.ik;a.jk=b.jk;a.Qd=b.Qd;a.Gd=b.Gd;b.wl?(Ea(a,"a_influence"),X(a,"SKINNED",1),Ba.px?(X(a,"DISABLE_TANGENT_SKINNING",1),X(a,"FRAMES_BLENDING",0)):(X(a,"DISABLE_TANGENT_SKINNING",0),b.Um?X(a,"FRAMES_BLENDING",1):X(a,"FRAMES_BLENDING",0)),X(a,"MAX_BONES",b.mi)):(X(a,"SKINNED",0),X(a,"FRAMES_BLENDING",0),X(a,"DISABLE_TANGENT_SKINNING",0));b.Ld?(X(a,"VERTEX_ANIM",
1),Ba.xJ?X(a,"VERTEX_ANIM_MIX_NORMALS_FACTOR",.5):X(a,"VERTEX_ANIM_MIX_NORMALS_FACTOR","u_va_frame_factor")):X(a,"VERTEX_ANIM",0);b.wl&&b.Ld&&ra.va("Skinning and vertex animation are mutually exlusive")}}function ia(a,b,h){if(b.length){for(var d=Ta.xv(b,Ba.ssao&&h.b4w_enable_ssao),c=a.Mb,g=a.hn,k=0,e=0;e<a.Mb.Mf.length;e++){var l=a.Mb.Mf[e];if("LIGHTING_LAMP"==l.id){var p=b[k++%b.length],t=p.lc,f=Ta.kb(p,h);if("SPOT"==t.type||"POINT"==t.type)var m=Math.cos(t.En/2);if("SPOT"==t.type)var B=t.at*(1-
m);p=d.indexOf(p);l.Jb=[["LAMP_TYPE",t.type],["LAMP_IND",f.es],["LAMP_SPOT_SIZE",D.Ga(m||.01)],["LAMP_SPOT_BLEND",D.Ga(B||.01)],["LAMP_LIGHT_DIST",D.Ga(t.distance)],["LAMP_USE_SPHERE",t.MC?1:0],["LAMP_SHADOW_MAP_IND",p]]}else if("LAMP"==l.id&&g){f=l.Jb[0][1];for(var u=0;u<b.length;u++)if(p=b[u],g[p.nd]==f){t=p.lc;if("SPOT"==t.type||"POINT"==t.type)m=Math.cos(t.En/2);"SPOT"==t.type&&(B=t.at*(1-m));l.Jb.push(["LAMP_TYPE",t.type],["LAMP_SPOT_SIZE",D.Ga(m||.01)],["LAMP_SPOT_BLEND",D.Ga(B||.01)],["LAMP_LIGHT_DIST",
D.Ga(t.distance)],["LAMP_USE_SPHERE",t.MC?1:0])}}}if(g){h=0;for(var q in g)h++;a.$o=new Float32Array(3*h);a.Zr=new Float32Array(3*h);a.Yr=new Float32Array(3*h);D.Wa(c,"NUM_LAMP_LIGHTS",h);for(e=0;e<b.length;e++)wb(a,b[e])}}}function Ma(a,b){for(var h=0;h<b.length;h++){var d=b[h].settings.b4w_vcol_from_name,c=b[h].settings.b4w_vcol_to_name;""!==d&&""!==c&&(a.ud[d]={Xm:!1,src:[{name:d,Ih:7}]})}}function Ea(a,b){var h=a.Qj;-1==h.indexOf(b)&&h.push(b);a.Qj=h.sort()}function X(a,b,h){D.Wa(a.Mb,b,h)}function Ga(a,
b,h){if("PHYSICS"==a.type)"NAVMESH"==a.fc?a.$a=Qa.JI(b,Qa.Yn,[]):(0<b.Tb.length&&Qa.xU(b,b.Va[0],h),a.$d=b);else{h=a.gi;a.Hv&&"PARTICLES"!=a.type&&(b=Qa.nP(b));a.xy&&(b=Ca.HP(a.yy,a.zy,a.wy));h=Qa.JI(b,h,a.ud);a.$a=h;a.df||a.Uf||a.Rf||(h.Ke=null,h.Pc.length=0);h=b.Va.length;a.num_vertices=b.Gb*h;a:switch(a.gi){case Qa.Yn:case Qa.vq:case Qa.Ht:var d=!0;break a;default:d=!1}d?Qa.gR(b)?a.num_triangles=b.ab.length/3*h:a.num_triangles=b.Gb/3*h:a.num_triangles=0}}function Fa(a,b,h,d,c,g,k,e,l,p,t,f,m){var B=
a.rb,u=[],q=e.b4w_dynamic_grass;if(!p&&q)return u;for(var G="INSTANCE"==e.b4w_wind_bend_inheritance,v="INSTANCE"==e.b4w_shadow_inheritance,r="INSTANCE"==e.b4w_reflection_inheritance,J=[],I=[],n=0;n<c.length;n++){var H=c[n].rb.ka,A=Ta.qz(b);A.qh=e.b4w_hair_billboard;A.Pq=e.b4w_hair_billboard_type;A.Oq="SPHERICAL"==e.b4w_hair_billboard_geometry;A.ld=q;A.ul=!0;G?(A.yf=H.yf,A.Wn=H.Wn,A.Dg=H.Dg,A.ig=H.ig,A.kk=H.kk,A.hg=H.hg,A.cg=H.cg,A.Cg=H.Cg,A.Ef=H.Ef,A.zm=!1):(A.yf=B.ka.yf,A.Wn=B.ka.Wn,A.Dg=B.ka.Dg,
A.ig=B.ka.ig,A.kk=B.ka.kk,A.hg=B.ka.hg,A.cg=B.ka.cg,A.Cg=B.ka.Cg,A.Ef=B.ka.Ef,A.zm=!0);v?(A.Of=H.Of,A.sf=H.sf,A.Be=H.Be):(A.Of=B.ka.Of,A.sf=B.ka.sf,A.Be=B.ka.Be);r?(A.Pe=H.Pe,A.ze=H.ze,A.Hd=H.Hd,A.Qd=H.Qd,A.Gd=H.Gd,A.Nh=H.Nh):(A.Pe=B.ka.Pe,A.ze=B.ka.ze,A.Hd=B.ka.Hd,A.Qd=B.ka.Qd,A.Gd=B.ka.Gd,A.Nh=B.ka.Nh);J.push(A);var C=k[n];C||(C=new Float32Array);f&&F._13(l.seed,t);var ba=new Float32Array(3),y=new Float32Array([0,0,0,1]),W=[],fa=-1!=F._70(Ba.QA,Qb)&&!e.b4w_initial_rand_rotation&&!e.b4w_hair_billboard,
da=4;fa&&(da=8);for(var E=0;E<C.length;E+=da){ba[0]=C[E];ba[1]=C[E+1];ba[2]=C[E+2];var ya=C[E+3]*ea.i(H.na);if(e.b4w_initial_rand_rotation){switch(e.b4w_rotation_type){case "XYZ":var S=new Float32Array([F._40(t),F._40(t),F._40(t)]);R.normalize(S,S);break;case "Z":S=new Float32Array([0,0,1]);break;default:ra.va("Unsupported random rotation type: "+e.b4w_rotation_type)}T.setAxisAngle(S,e.b4w_rand_rotation_strength*(2*Math.PI*F._40(t)-Math.PI),y)}else if(fa&&(y.set(C.subarray(E+4,E+8)),F._29(y,y),!e.use_whole_group))if(e.use_rotation_dupli){var L=
ea.g(H.na,Wb);T.multiply(y,L,y)}else T.multiply(y,ib,y);var rb=ea.t(ba,ya,y,ea.b());W.push(rb)}I.push(W)}var Y={},hb=0;for(n=0;n<c.length;n++){var pa=c[n].rb.Sc;for(E=0;E<pa.length;E++)pa[E].name in Y?Y[pa[E].name]++:(Y[pa[E].name]=1,hb++)}hb=hb?hb:1;var pb={};for(n=0;n<c.length;n++){var jb=c[n],la=g[n];A=J[n];var na={};A.yf&&(na.au_wind_bending_amp=[A.Cg],na.au_wind_bending_freq=[A.Dg],na.au_detail_bending_freq=[A.ig],na.au_detail_bending_amp=[A.hg],na.au_branch_bending_amp=[A.cg],A.Cg=0,A.Dg=0,
A.ig=0,A.hg=0,A.cg=0);W=I[n];if(W.length){var z=jb.data;pa=jb.rb.Sc;var N=Array(pa.length),ka=Array(pa.length);for(E=0;E<pa.length;E++)if(!xa(B,E)&&!Qa.gG(z,E))for(var O=0;O<la.length;O++){var ma=la[O],ja=K(ma),ia=pa[E];"MAIN"==ma?N[E]=ja:"DEBUG_VIEW"==ma&&(ka[E]=ja);ja.cr=a.b4w_cluster_data.cluster_id;if(wa(ja,ia)&&(ja.hj=F.O(m),P(ja,ia,z))){"SHADOW"==ma&&N[E]&&(ja.bd=N[E].bd);ja.gi=Qa.Yn;Ha(ja,A);ja.El=va(ja,A,e.uuid);ja.Wj=a.b4w_do_not_cull||e.b4w_dynamic_grass;"MAIN"==ja.type&&(ja.Ng=a.b4w_caustics);
X(ja,"DISABLE_FOG",("COLOR_ID"!=ma&&"SHADOW"!=ma&&a.b4w_disable_fogging)|0);"JITTERED"==e.b4w_hair_billboard_type&&(ja.Zv=e.b4w_hair_billboard_jitter_amp,ja.$v=e.b4w_hair_billboard_jitter_freq);q&&(ja.Bv=e.b4w_dynamic_grass_scale_threshold);G||(delete ja.ud.a_bending_col_main,delete ja.ud.a_bending_col_detail);var Aa=Qa.bv(z,E,ja.Qj,b.Oi,ja.ud,ja.xj),fb=B.ka.na,Ka=!0;if(1<Y[ia.name]){var cb=0,Na;for(Na in Aa.Va)cb++;Ka=Aa.ab.length*W.length*cb*Y[ia.name]>2E5*hb}var ha=Ba.OD&&Ka&&"PHYSICS"!=ja.type;
if(ha){ja.nG=e.use_whole_group?2:1;var oa=Qa.wN(Aa);Qa.lE(Aa,oa,W);oa.If={jt:W,jC:fb,CI:"STATIC"==b.type,Nx:na,sp:{},Uu:q};if(A.yf&&A.zm){var ca=R.fromValues(0,0,0);ea.D(ca,B.ka.na,ca);for(var V=[],za=0;za<W.length;za++)V.push(ca[0],ca[1],ca[2]);oa.If.sp.a_emitter_center={Tc:3,data:V}}Qa.lE(Aa,Aa,W);"STATIC"==b.type&&Qa.MM(oa.Jd,fb)}else{var w=oa=Qa.QR(Aa,na,W),Q=W;w.hb.au_center_pos=new Float32Array(3*w.Gb);for(var ta=Q.length,Va=w.Gb/ta,Ja=0;Ja<ta;Ja++)for(var Fa=Q[Ja],sb=3*Va*Ja,Ma=0;Ma<Va;Ma++)w.hb.au_center_pos[sb+
3*Ma]=Fa[0],w.hb.au_center_pos[sb+3*Ma+1]=Fa[1],w.hb.au_center_pos[sb+3*Ma+2]=Fa[2];oa=w;if(A.yf&&A.zm){var Ca=oa,Xa=B.ka.na;Ca.hb.a_emitter_center=new Float32Array(3*Ca.Gb);var vb=R.fromValues(0,0,0);ea.D(vb,Xa,vb);for(var qa=0;qa<Ca.Gb;qa++)Ca.hb.a_emitter_center[3*qa]=vb[0],Ca.hb.a_emitter_center[3*qa+1]=vb[1],Ca.hb.a_emitter_center[3*qa+2]=vb[2];oa=Ca}}var wb=e.b4w_vcol_from_name,M=e.b4w_vcol_to_name,Ya=ja,D=h,Pb=!G,Wa=z,Ra=[];if(""!==wb&&""!==M){var Ia=void 0,ua=M,Ga=Ya.ud,Sb=[];for(Ia in Ga)for(var Ea=
Ga[Ia].src,U=0,Rc=0;Rc<Ea.length;Rc++){var ab=Ea[Rc].Ih;ua==Ea[Rc].name&&Sb.push(Ia,ab,U);U+=F._43(ab)}var bb=Sb;if(0<bb.length)for(var Xb=0;Xb<bb.length;Xb+=3)Ra.push({Ar:wb,Wu:7,Pw:bb[Xb],Qw:bb[Xb+1],Tu:bb[Xb+2]});else Qa.KQ(Ya.Qj,"a_color")&&M==Wa.active_vcol_name&&Ra.push({Ar:wb,Wu:7,Pw:"a_color",Qw:7,Tu:0})}Pb&&("a_bending_col_main"in D&&Ra.push({Ar:"a_bending_col_main",Wu:4,Pw:"a_bending_col_main",Qw:4,Tu:0}),"a_bending_col_detail"in D&&Ra.push({Ar:"a_bending_col_detail",Wu:7,Pw:"a_bending_col_detail",
Qw:7,Tu:0}));for(var Ua=oa,Ic=W,Sa=d,ub=Ra,Jc=ja.ud,Ab=ha,Ac=!1,Hb=0;Hb<ub.length;Hb++){var qb=ub[Hb].Ar,Nb=Sa.hb[qb];if(Nb&&0<Nb.length){Ac=!0;break}}if(Ab)var Bc=Ua.If.sp;if(Ac){var nc=B.ka.gb,cc=Sa.Va[0].a_position,dc=Ic,$a=pb,ec=new Float32Array(3),rc=new Float32Array(3),yc=new Uint32Array(dc.length);if(!("verts_indices"in $a)){$a.Oj=new Float32Array(3);$a.Ij=new Float32Array(3);$a.PC=new Uint32Array(cc.length/3);$a.os=new Uint32Array(cc.length/3);$a.Oj[0]=(nc.max_x-nc.min_x)/20;$a.Oj[1]=(nc.max_y-
nc.min_y)/20;$a.Oj[2]=(nc.max_z-nc.min_z)/20;$a.Ij[0]=nc.min_x;$a.Ij[1]=nc.min_y;$a.Ij[2]=nc.min_z;for(var yb=0;yb<cc.length/3;yb++){var ae=cc[3*yb+1],be=cc[3*yb+2],Eb=F._64((cc[3*yb]-$a.Ij[0])/$a.Oj[0]),Uc=F._64((ae-$a.Ij[1])/$a.Oj[1]),sc=F._64((be-$a.Ij[2])/$a.Oj[2]);Eb=F.M(Eb,0,19);Uc=F.M(Uc,0,19);sc=F.M(sc,0,19);$a.PC[yb]=yb;$a.os[yb]=sc*Math.pow(20,2)+20*Uc+Eb}Qa.fU($a.os,$a.PC,Qa.Uy,!0);$a.Qn=new Uint32Array(Math.pow(20,3));for(yb=0;yb<$a.os.length;yb++)$a.Qn[$a.os[yb]]++;delete $a.os;for(yb=
1;yb<$a.Qn.length;yb++)$a.Qn[yb]+=$a.Qn[yb-1]}for(var fd=0;fd<dc.length;fd++){ec[0]=dc[fd][0];ec[1]=dc[fd][1];ec[2]=dc[fd][2];var rd=1E10,wc=-1,Id=F._64((ec[0]-$a.Ij[0])/$a.Oj[0]),Jd=F._64((ec[1]-$a.Ij[1])/$a.Oj[1]),Zc=F._64((ec[2]-$a.Ij[2])/$a.Oj[2]);Id=F.M(Id,0,19);Jd=F.M(Jd,0,19);Zc=F.M(Zc,0,19);for(var ce=Zc*Math.pow(20,2)+20*Jd+Id,Fc=$a.Qn[ce],Lc=0==ce?0:$a.Qn[ce-1];Lc<Fc;Lc++){var gd=$a.PC[Lc];rc[0]=cc[3*gd];rc[1]=cc[3*gd+1];rc[2]=cc[3*gd+2];R.sub(rc,ec,rc);var ld=R.sqrLen(rc);ld<=rd&&(rd=ld,
wc=gd)}if(-1==wc)for(Lc=0;Lc<cc.length/3;Lc++)rc[0]=cc[3*Lc],rc[1]=cc[3*Lc+1],rc[2]=cc[3*Lc+2],R.sub(rc,ec,rc),ld=R.sqrLen(rc),ld<=rd&&(rd=ld,wc=Lc);yc[fd]=wc}var Sd=yc;var Kd=Ua.Gb/Ic.length;for(Hb=0;Hb<ub.length;Hb++){var Vc=ub[Hb].Pw,zd=ub[Hb].Qw;qb=ub[Hb].Ar;var sd=ub[Hb].Wu;Nb=Sa.hb[qb];switch(Vc){case "a_bending_col_main":var $c=1;break;case "a_bending_col_detail":$c=3;break;case "a_color":$c=3;break;default:for(var zc=$c=0;zc<Jc[Vc].src.length;zc++)$c+=F._43(Jc[Vc].src[zc].Ih)}if(Nb&&0<Nb.length){var Td=
F._43(sd),Ld=F._43(zd),Ud=sd&zd,Vd=F._44(Ud);Ud!=zd&&Da.error("Wrong color extraction from "+qb+" to "+Vc+".");if(Ab)for(Bc[Vc]={Tc:$c,data:[]},zc=0;zc<Ic.length;zc++)for(Ad=Sd[zc],Bd=Ad*Td,Ib=0;Ib<Vd.length;Ib++)Vd[Ib]&&(td=F._42(sd,Ib),Bc[Vc].data.push(Nb[Bd+td]));else{if("a_bending_col_main"==Vc||"a_bending_col_detail"==Vc)Ua.hb[Vc]=new Float32Array(Ua.Gb*Ld);for(zc=0;zc<Ic.length;zc++){var Ad=Sd[zc],Bd=Ad*Td,Md=zc*Kd*$c;if(-1!=Ad)for(var ud=0;ud<Kd;ud++)for(var hd=ud*$c,Ib=0;Ib<Vd.length;Ib++)if(Vd[Ib]){var td=
F._42(sd,Ib),de=ub[Hb].Tu+F._42(zd,Ib);Ua.hb[Vc][Md+hd+de]=Nb[Bd+td]}}}}else Ua.hb[Vc]=new Float32Array(0)}}oa=Ua;X(ja,"USE_INSTANCED_PARTCLS",oa.If?1:0);La(ja);u.push({fb:ja,$g:b,hu:A,$d:oa,Jh:[ia.name],Qe:[a]})}}for(E=0;E<ka.length;E++)ka[E]&&(ka[E].vo=N[E].id,La(ka[E]))}}return u}function wa(a,b){var h=!0;"NODES_GLOW"==a.type&&(h=ya.tE(b));return h}function La(a){ja(a,function(a){a.id=0;a.id=za.mE(a)})}function ja(a,b){for(var h=null,d=null,c=[],g=0;g<a.Ua.length;g++){var k=a.Ua[g],e=k.rh;e&&(h||
(h={}),h[g]=e,k.rh=null);if(e=k.Rb)d||(d={}),d[g]=e,k.Rb=null;c.push(k.mH);k.mH=0}k=a.Xb;a.Xb=null;e=a.Sf;a.Sf=null;var l=a.$a;a.$a=null;var p=a.$d;a.$d=null;b(a);a.$a=l;a.$d=p;a.Sf=e;a.Xb=k;if(h)for(g in h)a.Ua[g].rh=h[g];if(d)for(g in d)a.Ua[g].Rb=d[g];for(g=0;g<a.Ua.length;g++)a.Ua[g].mH=c[g]}function ta(a,b,h,d){var c=K("DEBUG_VIEW");ka(c,"debug_view.glslv","debug_view.glslf");c.Uj=!0;c.Ab=!0;c.El=va(c,a,b);c.Ju=h;Ha(c,a);La(c);if(d.hm){a=d.Xb.ag;var g=R.create();b=Ca.Yz(1,g);h=R.fromValues(R.length(a.Cb),
R.length(a.Db),R.length(a.Eb));Qa.SH(b,h,g);g=R.normalize(a.Cb,jb);var k=R.normalize(a.Db,fb),e=R.normalize(a.Eb,rb);!h[0]&&h[1]&&h[2]?R.cross(k,e,g):!h[1]&&h[0]&&h[2]?R.cross(e,g,k):!h[2]&&h[0]&&h[1]&&R.cross(g,k,e);h=F.W(g,k,e,hb);v.invert(h,h);h=T.fromMat3(h,cb);ea.r(h,Pb);ea.s(1,Pb);ea.v(a.Da,Pb);Qa.mC(b,Pb)}else a=d.Xb.Cf,b=Ca.Yz(a.Lb,a.Da);U.t(d.Xb,c.Xb);Qa.Mx(b,1,!0);b.hb.a_polyindex=Qa.av(b);Ga(c,b);return c}function ka(a,b,h){a.Mb.yg=b;a.Mb.ff=h;D.wT(a.Mb)}function qa(a,b,h,d){d=d||"";-1==
a.vg.indexOf(h)&&(a.Ua.push(b),a.vg.push(h),a.bg.push(d));a.ec&&Wa.WD(a)}function S(a){a.Mb||ra.va("No shaders info for batch "+a.name);a.ec=D.$P(a.Mb);var b=a.Mb;if(b.status===D.xD){var h=a.ec.attributes,d=a.$a.mc,c;for(c in h)d[c]||ra.va('missing data for "'+c+'" attribute')}b.status&D.RJ&&Da.error("Texture limit exceeded for shader - "+b.ff+', materials: "'+a.Hc.join(", ")+'". Maximum texture count: '+fa.XA+", actual texture count: "+b.Ux);b.status&D.QJ&&Da.error("Fragment uniform limit exceeded for shader - "+
b.ff+', materials: "'+a.Hc.join(", ")+'". ');b.status&D.UJ&&Da.error("Vertex uniform limit exceeded for shader - "+b.yg+', materials: "'+a.Hc.join(", ")+'". ');b.status&D.TJ&&Da.error("Vertex attribute limit exceeded for shader - "+b.yg+', materials: "'+a.Hc.join(", ")+'". Maximum attribute count: '+fa.YA+", actual attribute count: "+b.cu);b.status&D.SJ&&("MAIN"!=a.type||a.bc||Da.error("Varying limit exceeded for shader - "+a.Mb.ff+', materials: "'+a.Hc.join(", ")+'"'),"MAIN"==a.type&&a.bc||"NODES_GLOW"==
a.type)&&(d=h=0,a.xj&&(h=F._8(a.xj)),a.ud&&(d=F._8(a.ud)),Da.error("Varying limit exceeded for node shader - "+a.Mb.ff+", uv: "+h+", vc: "+d+', materials: "'+a.Hc.join(", ")+'"'));b.status&D.OJ&&Da.error("Shader compilation/linking error: "+b.yg+", "+b.ff+', materials: "'+a.Hc.join(", ")+'"');return a.Mb.status===D.xD?(Wa.yM(a.ec),Wa.bu(a),Wa.WD(a),!0):!1}function va(a,b,h){return"NAVMESH"==a.fc?h:b.df?"_odd_id_"+za.ZI():h}function xa(a,b){return 0<=b&&b<a.Kf.cn.length&&a.Kf.cn[b]}var ra=Object(M.a)(f),
ma=Object(n.a)(f),za=Object(z.a)(f),Da=Object(e.a)(f),ua=Object(m.a)(f),h=Object(C.a)(f),ya=Object(q.a)(f),Ta=Object(r.a)(f),Va=Object(y.a)(f),Ca=Object(a.a)(f),Wa=Object(k.a)(f),Ra=Object(c.a)(f),V=Object(l.a)(f),D=Object(b.a)(f),bb=Object(g.a)(f),Ua=Object(E.a)(f),Qa=Object(u.a)(f),Ba=ma.wa,fa=ma.ei,Na=ma.Pl,Xa=ma.iG,ib=new Float32Array([0,0,-Math.sqrt(.5),Math.sqrt(.5)]),jb=new Float32Array(3),fb=new Float32Array(3),rb=new Float32Array(3),cb=new Float32Array(4),Wb=T.create(),Pb=ea.b(),hb=v.create(),
pb={},vb=new Float32Array(24),Qb=[5,4];A.DM=function(a){return pb[a]||null};A.EM=function(a,b){pb[a]=b};A.tN=L;A.LF=function(a,b,h,d){var c=(h||[]).map(function(a){return a.lc});c=W(b,a.sa.Ya,c);c=ba(c);for(var g=0;g<c.length;g++){var k=c[g].fb;k.Hc=c[g].Jh;Ga(k,c[g].$d);ia(k,h,a);if("STATIC"==c[g].ka.type&&"COLOR_ID"!=k.type){var e=za.mt("%meta%"+k.type+"%"+k.Hc.join("%")+"%"),l=Ta.so(e,"MESH");Ta.$R(l,c[g].ka);Ta.Fq(l,a);Ta.Ig(l,a,k);d.push(l);if("MAIN"==k.type)for(var p=0;p<c[g].Qe.length;p++)e=
c[g].Qe[p].rb,e.gs.push(l)}else e=c[g].Qe[0].rb,Ta.Ig(e,a,k)}if(Ba.debug_view){for(g=0;g<c.length;g++)if(h=c[g].ka,"DYNAMIC"==h.type&&(e=c[g].Qe[0].rb,k=c[g].fb,"MAIN"==k.type)){p=Ta.kb(e,a);l=p.Ia;var t=!1;for(p=0;p<l.length;p++)l[p].Uj&&(t=!0);t||(k=ta(h,e.name,!0,k),Ta.Ig(e,a,k))}for(g=0;g<d.length;g++)e=d[g],h=e.ka,p=Ta.kb(e,a),k=p.Ia[0],"MAIN"==k.type&&(k=ta(h,e.name,!1,k),Ta.Ig(e,a,k));for(g=0;g<c.length;g++)k=c[g].fb,"DEBUG_VIEW"==k.type&&(k.Hu=g)}for(g=0;g<b.length;g++)for(p=Ta.kb(b[g].rb,
a),l=p.Ia,p=0;p<l.length;p++)J(l[p]);for(g=0;g<d.length;g++)for(p=Ta.kb(d[g],a),l=p.Ia,p=0;p<l.length;p++)J(l[p])};A.nM=function(a,b,h){var d=a.sa.Aj,c=K("MAIN");ka(c,"sky.glslv","sky.glslf");c.ek=!0;c.Ab=!1;if(b.procedural_skydome)X(c,"PROCEDURAL_SKYDOME",1),c.Su=!0;else{var g=d.Cn,k=Ra.xc(a.sa.Ya,bb.Ve).qa.wc;qa(c,k,"u_sky");g&&(X(c,"WO_SKYTEX",1),g.invert&&X(c,"MTEX_NEGATIVE",1),g.sJ&&X(c,"MTEX_RGBTOINT",1),X(c,"BLENDTYPE",g.dE),g.nJ&&X(c,"WOMAP_BLEND",1),g.oJ&&X(c,"WOMAP_HORIZ",1),g.qJ&&X(c,"WOMAP_ZENUP",
1),g.pJ&&X(c,"WOMAP_ZENDOWN",1));d.Kn&&X(c,"WO_SKYBLEND",1);d.Ln&&X(c,"WO_SKYPAPER",1);d.Mn&&X(c,"WO_SKYREAL",1)}b.Pe&&(c.Pe=!0,b.ze&&(c.ze=!0));Ea(c,"a_position");b=Ca.KP();Ga(c,b);J(c);c.Wj=!0;La(c);Ta.Ig(h,a,c);Ra.xc(a.sa.Ya,bb.Wh)&&(d=L(c),d.type="DEBUG_VIEW",d.fc="",Q(d),X(d,"DEBUG_VIEW_SPECIAL_SKYDOME",1),b.hb.a_polyindex=Qa.av(b),Ga(d,b),d.vo=c.id,La(d),Ta.Ig(h,a,d))};A.Au=function(a,b,h){var d=Ta.kb(a,h).Ia,c=[],g=Ra.xc(b,bb.de),k=Ra.xc(b,bb.xd),e=Ra.xc(b,bb.Xh);b=Ra.xc(b,bb.zf);for(var l=
0;l<d.length;l++){var p=d[l],t=null;"SHADOW"==p.type&&"RECEIVE"==p.fc&&p.Of&&(t=L(p),t.fc="CAST");"MAIN"!=p.type&&"PARTICLES"!=p.type||!g&&!k||!p.Pe||(t=L(p),t.fc="REFLECT",t.sj=!1,t.Uf&&(t.Uf=!1,t.Ab=!1),t.tb=p.tb);"COLOR_ID"==p.type&&e&&a.ka.Ed&&(b&&a.ka.Ql?(t=L(p),t.fc="OUTLINE"):p.fc="OUTLINE");t&&(t.yh=!0,La(t),c.push(t))}for(d=0;d<c.length;d++)Ta.Ig(a,h,c[d])};A.HJ=function(a,b,h){b=h*(b.max_z-b.min_z);return 0==b?0:.5*(Math.sqrt(2*Math.sqrt(4*b*Math.tan(a)+1)+2)/2-1)/b};A.PV=function(a,b,h){b=
h*(b.max_z-b.min_z);if(0==b)return 0;a=2*b*a;return Math.atan((Math.pow(a+1,4)-Math.pow(a+1,2))/b)};A.FM=function(a){var b=U.w();b.max_x=a.max_x;b.min_x=a.min_x;b.max_y=a.max_y;b.min_y=a.min_y;b.max_z=a.max_z;b.min_z=a.min_z;return b};A.hs=function(a,b){var h=a[b];for(b+=1;b<a.length;b++)h=(h?h+"%join%":"")+a[b];return h};A.NU=Y;A.MU=ia;var wb=function(){var a=R.create();return function(b,h){if(h.nd in b.hn){var d=b.hn[h.nd],c=ea.j(h.ka.na,a);b.$o.set(c,3*d);b.Zr.set(h.lc.direction,3*d);b.Yr.set(h.lc.dr,
3*d)}}}();A.DT=wb;A.VD=function(a,b){X(a,"CSM_SECTION1",0);X(a,"CSM_SECTION2",0);X(a,"CSM_SECTION3",0);X(a,"NUM_CAST_LAMPS",0);if(b){X(a,"NUM_CAST_LAMPS",b.li.length);Ba.ow&&X(a,"MAC_OS_SHADOW_HACK",1);for(var h=1;h<b.csm_num;h++)X(a,"CSM_SECTION"+String(h),1);X(a,"SHADOW_TEX_RES",D.Ga(b.csm_resolution));X(a,"CSM_FADE_LAST_CASCADE",b.fade_last_cascade?1:0);X(a,"CSM_BLEND_BETWEEN_CASCADES",b.blend_between_cascades&&!Ba.yE?1:0)}else X(a,"SHADOW_TEX_RES",0),X(a,"CSM_FADE_LAST_CASCADE",0),X(a,"CSM_BLEND_BETWEEN_CASCADES",
0)};A.dc=X;A.Td=function(a,b){return D.hQ(a.Mb,b)};A.$I=Ga;var Ia=function(){var a=R.create();return function(b,h,d,c){for(var g={},k=new Float32Array([0,0,0,1]),e=0;e<b.length;e+=c)for(var l=0;l<h.length;l++){var p=R.create(),t=ea.i(h[l].ka.na),f=ea.j(h[l].ka.na,a);R.scale(f,t,p);t=R.clone([b[e],b[e+1],b[e+2]]);g[l]||(g[l]=new Float32Array(b.length));d&&(g[l][e+4]=k[0]=b[e+4],g[l][e+5]=k[1]=b[e+5],g[l][e+6]=k[2]=b[e+6],g[l][e+7]=k[3]=b[e+7],F._29(k,k),F._62(p,k,p));R.add(t,p,t);g[l][e]=t[0];g[l][e+
1]=t[1];g[l][e+2]=t[2];g[l][e+3]=b[e+3]}return g}}();A.LU=La;A.XU=function(a,b){a.Xb.Bf=U.a(b,0,b.length,a.Xb.Bf);b=U.F(a.Xb.Bf,vb);a.Xb.ag=U.z(b,!0);a.Xb.Cf=U.B(a.Xb.ag);a.hm=U.M(a.Xb.ag,a.Xb.Cf)};A.$t=ka;A.ai=qa;A.IB=function(a,b,h){h=a.vg.indexOf(h);-1<h&&(a.Ua[h]=b)};A.eO=function(a,b){var h=K("MAIN");h.Ob=!0;O.set(b[0],b[1],b[2],.5,h.Qc);h.gi=Qa.vq;Ga(h,a);ka(h,"main.glslv","main_stack.glslf");X(h,"SHADELESS",1);S(h);return h};A.md=S;A.KF=function(a,b){for(var h=0;h<b.length;h++){var d=b[h],
c=K("LINE");ka(c,"line.glslv","line.glslf");c.Ob=!0;c.Wj=!0;var g=Ca.MP();Ga(c,g);J(c);Ta.Fq(d,a);Ta.Ig(d,a,c);S(c)}};A.eN=function(a){return a.ec.ss.length?a.ec.xB.u_cube_fog?!0:!1:!1};A.PN=function(){var a=K("DEPTH_PACK");a.pb=!0;a.Ab=!1;var b=Ca.Sd();Ga(a,b);ka(a,"postprocessing/postprocessing.glslv","postprocessing/depth_pack.glslf");S(a);return a};A.Bu=function(a){var b=K("POSTPROCESSING");ka(b,"postprocessing/postprocessing.glslv","postprocessing/postprocessing.glslf");switch(a){case "NONE":X(b,
"POST_EFFECT","POST_EFFECT_NONE");break;case "GRAYSCALE":X(b,"POST_EFFECT","POST_EFFECT_GRAYSCALE");break;case "X_BLUR":case "Y_BLUR":X(b,"POST_EFFECT","POST_EFFECT_BLUR");break;case "X_GLOW_BLUR":case "Y_GLOW_BLUR":case "X_BLOOM_BLUR":case "Y_BLOOM_BLUR":X(b,"POST_EFFECT","POST_EFFECT_GLOW_BLUR");break;case "X_DOF_BLUR":case "Y_DOF_BLUR":X(b,"POST_EFFECT","POST_EFFECT_DOF_BLUR");break;case "X_ALPHA_BLUR":case "Y_ALPHA_BLUR":X(b,"POST_EFFECT","POST_EFFECT_ALPHA_BLUR");break;case "X_EXTEND":case "Y_EXTEND":X(b,
"POST_EFFECT","POST_EFFECT_EXTEND");break;case "FLIP_CUBEMAP_COORDS":X(b,"POST_EFFECT","FLIP_CUBEMAP_COORDS");break;default:ra.va("Wrong postprocessing effect: "+a)}X(b,"SHADOW_USAGE","NO_SHADOWS");b.pb=!0;b.Ab=!1;a=Ca.Sd();Ga(b,a);S(b);return b};A.hO=function(a){var b=K("SSAO");b.Ab=!1;b.pb=!0;var h=Ca.Sd();Ga(b,h);ka(b,"postprocessing/postprocessing.glslv","postprocessing/ssao.glslf");X(b,"SSAO_QUALITY","SSAO_QUALITY_"+a.Fn);X(b,"SSAO_HEMISPHERE",a.Mp?1:0);X(b,"SHADOW_USAGE","NO_SHADOWS");a={width:4,
height:4,data:new Uint8Array([150,123,254,0,127,3,97,0,164,246,99,0,155,177,14,0,54,83,221,0,2,142,143,0,32,57,79,0,49,160,32,0,57,232,115,0,178,216,203,0,70,196,218,0,241,164,82,0,225,58,85,0,233,88,189,0,144,25,203,0,117,73,12,0])};h=Ua.Sj(Ua.Yh,!1);h.source="NODE_TEX";Ua.ot(h,a,0);qa(b,h,"u_ssao_special_tex");S(b);return b};A.iO=function(a){var b=K("SSAO_BLUR");b.Ab=!1;b.pb=!0;var h=Ca.Sd();Ga(b,h);ka(b,"postprocessing/postprocessing.glslv","postprocessing/ssao_blur.glslf");X(b,"SSAO_BLUR_DEPTH",
a.Jp?1:0);X(b,"SHADOW_USAGE","NO_SHADOWS");S(b);return b};A.JN=function(a){var b=K("COC");b.Ab=!1;b.pb=!0;var h=Ca.Sd();Ga(b,h);ka(b,"postprocessing/postprocessing.glslv","postprocessing/coc.glslf");X(b,"DEPTH_RGBA",1);switch(a){case "COC_ALL":X(b,"COC_TYPE","COC_ALL");break;case "COC_FOREGROUND":X(b,"COC_TYPE","COC_FOREGROUND");break;case "COC_COMBINE":X(b,"COC_TYPE","COC_COMBINE")}X(b,"SHADOW_USAGE","NO_SHADOWS");S(b);return b};A.QN=function(a){var b=K("DOF");b.Ab=!1;b.pb=!0;var h=Ca.Sd();Ga(b,
h);ka(b,"postprocessing/postprocessing.glslv","postprocessing/dof.glslf");a.dof_bokeh?X(b,"DOF_TYPE","DOF_BOKEH"):(X(b,"DOF_TYPE","DOF_SIMPLE"),X(b,"DEPTH_RGBA",1));X(b,"SHADOW_USAGE","NO_SHADOWS");S(b);return b};A.YN=function(){var a=K("OUTLINE");a.Ab=!1;a.pb=!0;var b=Ca.Sd();Ga(a,b);ka(a,"postprocessing/postprocessing.glslv","postprocessing/outline.glslf");S(a);return a};A.SN=function(){var a=K("GLOW_COMBINE");a.Ab=!1;a.pb=!0;var b=Ca.Sd();Ga(a,b);ka(a,"postprocessing/postprocessing.glslv","postprocessing/glow.glslf");
S(a);return a};A.TN=function(a,b,h){var d=K("GOD_RAYS");d.Ab=!1;d.pb=!0;var c=Ca.GP();Ga(d,c);ka(d,"postprocessing/god_rays.glslv","postprocessing/god_rays.glslf");X(d,"DEPTH_RGBA",a?1:0);X(d,"WATER_EFFECTS",b?1:0);X(d,"STEPS_PER_PASS",D.Ga(h,1));X(d,"SHADOW_USAGE","NO_SHADOWS");S(d);return d};A.UN=function(){var a=K("GOD_RAYS_COM");a.Ab=!1;a.pb=!0;var b=Ca.Sd();Ga(a,b);ka(a,"postprocessing/postprocessing.glslv","postprocessing/god_rays_combine.glslf");X(a,"SAFARI_CANVAS_ALPHA_HACK",Ba.RH?1:0);S(a);
return a};A.NN=function(a,b){var h=K("SKY");h.Ab=!1;h.pb=!1;var d=Ca.nv();Ga(h,d);""!=b.tx?(ka(h,"skybox.glslv","node_skybox.glslf"),X(h,"IS_WORLD",1),w(h,a)):b.procedural_skydome?(ka(h,"skybox.glslv","proc_skybox.glslf"),X(h,"WATER_EFFECTS",1)):(ka(h,"skybox.glslv","tex_skybox.glslf"),a&&(a=a.sa.Aj,a.vx&&qa(h,Ua.hf(a.vx),"u_sky_texture",a.vx.texture.name),a.Cn&&X(h,"WO_SKYTEX",1)),b.sx&&X(h,"MTEX_NEGATIVE",1),b.Ax&&X(h,"MTEX_RGBTOINT",1),X(h,"BLENDTYPE",b.rx),b.wx&&X(h,"WOMAP_BLEND",1),b.xx&&X(h,
"WOMAP_HORIZ",1),b.zx&&X(h,"WOMAP_ZENUP",1),b.yx&&X(h,"WOMAP_ZENDOWN",1),b.Kn&&X(h,"WO_SKYBLEND",1),b.Ln&&X(h,"WO_SKYPAPER",1),b.Mn&&X(h,"WO_SKYREAL",1));S(h);return h};A.gM=function(a,b){var h=Ra.xc(a.sa.Ya,bb.Ve);h&&Ta.Ig(b,a,h.vb[0].jb[0].fb)};A.LN=function(){var a=K("IRRADIANCE");a.Ab=!1;a.pb=!1;var b=Ca.nv();Ga(a,b);ka(a,"skybox.glslv","irradiance_skybox.glslf");S(a);return a};A.MN=function(){var a=K("R_CONVOLUTION");a.Ab=!1;a.pb=!1;var b=Ca.nv();Ga(a,b);ka(a,"skybox.glslv","r_convolution_skybox.glslf");
S(a);return a};A.IN=function(){var a=K("BRDF");a.Ab=!1;a.pb=!1;var b=Ca.nv();Ga(a,b);ka(a,"postprocessing/postprocessing.glslv","postprocessing/precompute_brdf.glslf");S(a);return a};A.FN=function(a){var b=K("ANTIALIASING");b.Ab=!1;b.pb=!0;var h=Ca.Sd();Ga(b,h);ka(b,"postprocessing/postprocessing.glslv","postprocessing/antialiasing.glslf");Ba.FH?(X(b,"AA_METHOD","AA_METHOD_FXAA_QUALITY"),X(b,"AA_QUALITY",a.lv)):X(b,"AA_METHOD","AA_METHOD_FXAA_LIGHT");S(b);return b};A.fO=function(a){var b=K("SMAA"),
h=Ca.Sd();Ga(b,h);ka(b,"postprocessing/smaa.glslv","postprocessing/smaa.glslf");X(b,"AA_METHOD","AA_METHOD_SMAA_HIGH");X(b,"SMAA_PASS",a);X(b,"SMAA_PREDICATION",0);X(b,"SMAA_REPROJECTION",0);S(b);b.Ab=!1;b.pb=!0;return b};A.KN=function(){var a=K("COMPOSITING");a.Ab=!1;a.pb=!0;var b=Ca.Sd();Ga(a,b);ka(a,"postprocessing/postprocessing.glslv","postprocessing/compositing.glslf");S(a);return a};A.XN=function(){var a=K("MOTION_BLUR");a.pb=!0;a.Ab=!1;var b=Ca.Sd();Ga(a,b);ka(a,"postprocessing/postprocessing.glslv",
"postprocessing/motion_blur.glslf");S(a);return a};A.jO=function(a){var b=K("STEREO");b.pb=!0;b.Ab=!1;var h=Ca.Sd();Ga(b,h);ka(b,"postprocessing/postprocessing.glslv","postprocessing/stereo.glslf");X(b,"ANAGLYPH","ANAGLYPH"===a?1:0);X(b,"SIDEBYSIDE","SIDEBYSIDE"===a?1:0);X(b,"DISTOR_SCALE",Xa.nonwebvr.sF);S(b);return b};A.VN=function(){var a=K("LUMINANCE");a.Ab=!1;a.pb=!0;var b=Ca.Sd();Ga(a,b);ka(a,"postprocessing/postprocessing.glslv","postprocessing/luminance.glslf");S(a);return a};A.GN=function(){var a=
K("LUMINANCE");a.Ab=!1;a.pb=!0;var b=Ca.Sd();Ga(a,b);ka(a,"postprocessing/postprocessing.glslv","postprocessing/luminance_av.glslf");S(a);return a};A.WN=function(a){var b=K("LUMINANCE_X_BLUR");b.Ab=!1;b.pb=!0;var h=Ca.Sd();Ga(b,h);ka(b,"postprocessing/postprocessing.glslv","postprocessing/luminance_truncated.glslf");a&&D.Wa(b.Mb,"ADAPTIVE_BLOOM",1);S(b);return b};A.HN=function(a){var b=K("BLOOM");b.Ab=!1;b.pb=!0;var h=Ca.Sd();Ga(b,h);ka(b,"postprocessing/postprocessing.glslv","postprocessing/bloom_combine.glslf");
if(1==a)var d="BLUR_PASS_1";else 2==a?d="BLUR_PASS_2":3==a?d="BLUR_PASS_3":4==a?d="BLUR_PASS_4":5==a&&(d="BLUR_PASS_5");D.Wa(b.Mb,"BLUR_PASS_NUM",d);S(b);return b};A.JO=function(){var a=K("VELOCITY");a.Ab=!1;a.pb=!0;var b=Ca.Sd();Ga(a,b);ka(a,"postprocessing/postprocessing.glslv","postprocessing/velocity.glslf");S(a);return a};A.EN=function(){var a=K("ANCHOR_VISIBILITY");a.Ab=!0;a.pb=!0;a.gi=Qa.vq;ka(a,"anchors.glslv","anchors.glslf");var b=Ca.JF(1);Ga(a,b);X(a,"ANCHOR_NUM",1);S(a);a.um=new Float32Array(3);
return a};A.$N=function(){var a=K("PERFORMANCE");a.Ab=!1;a.pb=!0;var b=Ca.Sd();Ga(a,b);ka(a,"postprocessing/postprocessing.glslv","postprocessing/performance.glslf");S(a);return a};A.KU=function(a,b){var h=b.length/3;if(h!=a.um.length/3){var d=Ca.JF(h);Ga(a,d);X(a,"ANCHOR_NUM",h);S(a)}a.um=b};A.qv=function(a){if(!a.Aa.length)return null;a=a.Aa[0];return a.Ia.length?a.Ia[0]:null};A.wh=function(a,b,h){a=a.Aa[0].Ia;for(var d=0;d<a.length;d++)if(a[d].type==h&&-1!=a[d].Hc.indexOf(b))return a[d];return null};
A.Zb=function(a,b,h){a=a.Aa[0].Ia;for(var d=0;d<a.length;d++)if(a[d].type==h&&!a[d].yh&&-1!=a[d].Hc.indexOf(b))return a[d];return null};A.Sg=function(a,b,h){a=a.Aa[0].Ia;for(var d=0;d<a.length;d++)if(a[d].type==h&&a[d].yh&&-1!=a[d].Hc.indexOf(b))return a[d];return null};A.JA=function(a,b,h,d){a=a.Aa[0].Ia;for(var c=0;c<a.length;c++){var g=a[c];if(-1!=g.Hc.indexOf(b)&&(!d||g.type==d)&&h(g))break}};A.bX=function(a,b){a=a.Aa[0].Ia;for(var h=0;h<a.length;h++)if(a[h].type==b)return!0;return!1};A.Nr=function(a,
b){a=(b?Ta.kb(a,b):a.Aa[0]).Ia;for(b=0;b<a.length;b++)if("SKY"==a[b].type)return a[b];return null};A.HE=function(a){var b=a.Ua;a.Ua=[];for(var h=0;h<b.length;h++)Ua.GE(b[h]);a.Ua=b;a.$a&&a.$a.sh&&Qa.nN(a.$a);a.sh&&a.Sf.length&&Wa.qN(a);a.ec&&a.ec.sh&&D.pN(a.ec);a.Me&&(b=ya.vv(a.Me))&&b.FE&&ya.oN(a.Me)};A.rT=function(a){""!==a.Me&&(a=ya.vv(a.Me))&&(a.FE=void 0)};A.OP=va;A.cleanup=function(){pb={}};A.set_nodemat_value=function(a,b,h){for(var d=a.pi,c=0;c<d.length;c+=3)if(d[c]==b)return a.ri[4*d[c+1]+
d[c+2]]=h,!0;return!1};A.set_nodemat_rgb=function(a,b,h,d,c){for(var g=a.oi,k=0;k<g.length;k+=2)if(g[k]==b)return b=g[k+1],a.Ne[3*b]=h,a.Ne[3*b+1]=d,a.Ne[3*b+2]=c,!0;return!1};A.get_nodemat_value=function(a,b){for(var h=a.pi,d=0;d<h.length;d+=3)if(h[d]==b)return a.ri[4*h[d+1]+h[d+2]];return null};A.get_nodemat_rgb=function(a,b,h){for(var d=a.oi,c=0;c<d.length;c+=2)if(d[c]==b)return b=d[c+1],h[0]=a.Ne[3*b],h[1]=a.Ne[3*b+1],h[2]=a.Ne[3*b+2],h;return null}});w.a=f},function(D,w,f){D=f(0);var M=f(5),
U=f(35),n=f(4),z=f(70),e=f(45),m=f(28),C=f(1),v=f(18),q=f(2),r=f(22),y=f(12),a=f(9),T=f(75),k=f(3),c=f(10),l=f(48);f=Object(D.a)("__textures",function(b,g){function f(){Va||(Va=V.createFramebuffer());return Va}function ea(){Ta||(Ta=V.createTexture());return Ta}function u(){return{type:0,source:"",Ys:"",width:0,height:0,gr:1,anisotropic_filtering:0,Bk:1024,il:!1,rh:null,Vb:0,hc:null,Tf:null,ej:!1,qq:-1,Rb:null,zt:"",Bl:0,zh:0,sb:0,Mc:0,kl:0,Kh:!1,wi:1,Ee:!1,eH:0,pe:null,Qs:0,Ps:0,yk:-1,Ss:!1,Rl:-1,
At:!1,KC:!1,Mk:!1,im:!1,repeat:!0,pl:"",So:"",Zm:"",yA:"",xA:"",ol:""}}function F(a,b,h){a.Zm=b.uuid;a.So=b.filepath;a.yA=b.source;a.xA=b.name;a.pl=Object(l.b)(h+b.filepath);a.ol=b.nh;-1==Ca.Ua.indexOf(a)&&(Ca.Ua.push(a),Ca.bp.push(!1))}function R(a,b,h){var d=-1<b.indexOf(".pvr");a.ol=-1<b.indexOf(".dds")?"dds":d?"pvr":"";a.So=b;a.pl=h;a.Zm=q._4();Ca.Ua.push(a);Ca.bp.push(!0)}function O(a,b,h){var d=u();d.type=a;d.source="NONE";d.Ee=h;if(a==g.Qt||a==g.Ot||a==g.Rt||a==g.Pt)d.Tf=V.createRenderbuffer();
else{var c=V.TEXTURE_2D,k=V.createTexture();V.bindTexture(c,k);V.texParameteri(c,V.TEXTURE_MAG_FILTER,V.LINEAR);h?V.texParameteri(c,V.TEXTURE_MIN_FILTER,ab[Da.Gk]):V.texParameteri(c,V.TEXTURE_MIN_FILTER,V.LINEAR);V.texParameteri(c,V.TEXTURE_WRAP_S,V.CLAMP_TO_EDGE);V.texParameteri(c,V.TEXTURE_WRAP_T,V.CLAMP_TO_EDGE);h=P(d);var e=p(d),l=H(d);if(a==g.om)var t=null;else a==g.pm?t=new Float32Array([204,204,204,255]):t=new Uint8Array([204,204,204,255]);V.texImage2D(c,0,e,1,1,0,h,l,t);Da.er&&b&&V.texParameterf(c,
V.TEXTURE_COMPARE_MODE,V.COMPARE_REF_TO_TEXTURE);V.bindTexture(c,null);d.Vb=c;d.hc=k}return d}function K(a){var b=a.Vb;V.bindTexture(b,a.hc);var h=P(a),d=p(a),c=H(a),g=a.rh.canvas;V.pixelStorei(V.UNPACK_FLIP_Y_WEBGL,!0);V.texImage2D(b,0,d,h,c,g);V.pixelStorei(V.UNPACK_FLIP_Y_WEBGL,!1);a.il&&V.generateMipmap(b);V.bindTexture(b,null);a.width=g.width;a.height=g.height}function A(a){var b=a.Vb;V.bindTexture(b,a.hc);V.pixelStorei(V.UNPACK_FLIP_Y_WEBGL,!0);4!=a.Rb.length?a.Kh?ha(a,a.Rb,a.width*a.wi,a.height*
a.wi,!1):V.texImage2D(b,0,V.RGBA,V.RGBA,V.UNSIGNED_BYTE,a.Rb):V.texImage2D(b,0,V.RGBA,1,1,0,V.RGBA,V.UNSIGNED_BYTE,a.Rb);V.bindTexture(b,null)}function ca(a){var b=a.Vb;V.bindTexture(b,a.hc);V.pixelStorei(V.UNPACK_FLIP_Y_WEBGL,!0);a.Kh?ha(a,a.pe[a.yk],a.width*a.wi,a.height*a.wi,!1):V.texImage2D(b,0,V.RGBA,V.RGBA,V.UNSIGNED_BYTE,a.pe[a.yk]);V.bindTexture(b,null)}function L(){ya||(ya=document.createElement("canvas"));return ya}function ha(a,b,h,d,c){c||(W(V.TEXTURE_2D),V.texImage2D(V.TEXTURE_2D,0,V.RGBA,
V.RGBA,V.UNSIGNED_BYTE,b));V.bindTexture(V.TEXTURE_2D,null);b=f();c=ea();va.bP(a,h,d,b,c)}function J(a,b,h,d){for(a=0;6>a;a++){var c=bb[a],g=Ua[a],k=L();k.width=d;k.height=d;var e=k.getContext("2d");e.translate(d/2,d/2);"TEXTURE_CUBE_MAP_POSITIVE_X"==c?(e.rotate(Math.PI/2),e.scale(1,-1)):"TEXTURE_CUBE_MAP_NEGATIVE_X"==c?(e.rotate(Math.PI/2),e.scale(-1,1)):"TEXTURE_CUBE_MAP_POSITIVE_Y"==c||"TEXTURE_CUBE_MAP_POSITIVE_Z"==c?e.scale(1,-1):("TEXTURE_CUBE_MAP_NEGATIVE_Y"==c||"TEXTURE_CUBE_MAP_NEGATIVE_Z"==
c)&&e.scale(-1,1);e.drawImage(b,g[0]*h,g[1]*h,h,h,-d/2,-d/2,d,d);Da.hF?V.texImage2D(V[c],0,V.RGBA,d,d,0,V.RGBA,V.UNSIGNED_BYTE,new Uint8Array(e.getImageData(0,0,d,d).data.buffer)):V.texImage2D(V[c],0,V.RGBA,V.RGBA,V.UNSIGNED_BYTE,k)}}function W(a){V.bindTexture(a,null);var b=ea();V.bindTexture(a,b);V.texParameteri(a,V.TEXTURE_WRAP_S,V.CLAMP_TO_EDGE);V.texParameteri(a,V.TEXTURE_WRAP_T,V.CLAMP_TO_EDGE);V.texParameteri(a,V.TEXTURE_MAG_FILTER,V.LINEAR);V.texParameteri(a,V.TEXTURE_MIN_FILTER,V.LINEAR)}
function B(a,b,d){var c=a.source,g=a.hc,k=a.Vb,e=a.ol,l=a.So;V.bindTexture(k,g);a.repeat?(V.texParameteri(k,V.TEXTURE_WRAP_S,V.REPEAT),V.texParameteri(k,V.TEXTURE_WRAP_T,V.REPEAT)):(V.texParameteri(k,V.TEXTURE_WRAP_S,V.CLAMP_TO_EDGE),V.texParameteri(k,V.TEXTURE_WRAP_T,V.CLAMP_TO_EDGE));a.ej||"NODE_TEX"==c?V.texParameteri(k,V.TEXTURE_MIN_FILTER,V.LINEAR):V.texParameteri(k,V.TEXTURE_MIN_FILTER,ab[Da.Gk]);a.anisotropic_filtering&&V.texParameterf(k,ka.aA().TEXTURE_MAX_ANISOTROPY_EXT,a.anisotropic_filtering);
if(4==b.length){var p=!0;b=new Uint8Array([255*b[0],255*b[1],255*b[2],255*b[3]])}if("IMAGE"==c)if(p)V.texImage2D(k,0,V.RGBA,1,1,0,V.RGBA,V.UNSIGNED_BYTE,b),a.width=1,a.height=1;else if(e){p=ja.cG(b,e);d=q.L(p.width)||q.L(p.height);if(p.width>ua.Ic||p.height>ua.Ic){qa.error('Image "'+l+'" has unsupported size: '+p.width+"x"+p.height+". Max available: "+ua.Ic+"x"+ua.Ic+".");return}c=p.width;p=p.height;if(d||"pvr"==e)a.Kh=!0,W(k),c=I(c*a.wi),p=I(p*a.wi);"dds"==e?ja.sV(V,ka.YF(),b,!0):"pvr"==e&&ja.tV(V,
ka.XF(),b);a.Kh&&(ha(a,null,c,p,!0),V.bindTexture(k,g),V.generateMipmap(k));a.width=c;a.height=p;a.gr=ja.aQ(b,e)}else{V.pixelStorei(V.UNPACK_FLIP_Y_WEBGL,!0);a.ej?Da.Rs?(c=b[0].width,p=b[0].height):(c=b.videoWidth,p=b.videoHeight):(c=b.width,p=b.height);a.width=c;a.height=p;if(c>ua.Ic||p>ua.Ic)qa.warn('Image "'+l+'" has unsupported size: '+c+"x"+p+". Max available: "+ua.Ic+"x"+ua.Ic+". Reduced image size will be used."),a.wi=Math.min(ua.Ic/c,ua.Ic/p),a.Kh=!0;a.ej&&(d in Ra||(Ra[d]={}),Ra[d][a.zt]=
a,Da.Rs?(a.pe=b,a.Qs=b.length,a.zh=a.Ps*a.Bl/b.length,b=b[0]):(a.Rb=b,a.Rb.loop=a.Mk,a.zh=b.duration?a.Bl/b.duration:S.ke(),h.pF||(b.playbackRate=S.ke()/a.zh,h.CE&&2<b.playbackRate&&(b.playbackRate=2)),ba(a)));c=I(a.width*a.wi);p=I(a.height*a.wi);a.Kh||Da.PH?(l=L(),e=l.getContext("2d"),l.width=c,l.height=p,e.drawImage(b,0,0,a.width,a.height,0,0,c,p),Da.hF?V.texImage2D(k,0,V.RGBA,c,p,0,V.RGBA,V.UNSIGNED_BYTE,new Uint8Array(e.getImageData(0,0,c,p).data.buffer)):V.texImage2D(k,0,V.RGBA,V.RGBA,V.UNSIGNED_BYTE,
l)):Da.Ib||!q.L(a.width)&&!q.L(a.height)?V.texImage2D(k,0,V.RGBA,V.RGBA,V.UNSIGNED_BYTE,b):(ha(a,b,c,p,!1),a.Kh=!0);a.width=c;a.height=p;a.ej||(V.bindTexture(k,g),V.generateMipmap(k))}else if("ENVIRONMENT_MAP"==c)if(p){for(g=0;6>g;g++)V.texImage2D(V["TEXTURE_CUBE_MAP_"+bb[g]],0,V.RGBA,1,1,0,V.RGBA,V.UNSIGNED_BYTE,b);a.width=3;a.height=2}else{V.pixelStorei(V.UNPACK_FLIP_Y_WEBGL,!1);if(b.width%3||b.height%2){qa.error('Cubemap Image "'+l+'" has unsupported size: '+b.width+"x"+b.height+". The width must be multiple of three and the height - multiple of two.");
return}g=b.width/3;g>ua.Xg?(qa.warn('Cubemap Image "'+l+'" has unsupported size: '+b.width+"x"+b.height+". Max available: "+3*ua.Xg+"x"+2*ua.Xg+". Reduced image size will be used."),l=I(ua.Xg/g*g),a.Kh=!0):(l=I(g),!Da.Ib&&(3*l>ua.Ic||2*l>ua.Ic)&&(a.Kh=!0));if(a.Kh||Da.Is)J(a,b,g,l);else{e=b;c=l;W(V.TEXTURE_2D);V.texImage2D(V.TEXTURE_2D,0,V.RGBA,V.RGBA,V.UNSIGNED_BYTE,e);V.bindTexture(V.TEXTURE_2D,null);for(e=0;6>e;e++)V.texImage2D(V.TEXTURE_CUBE_MAP_POSITIVE_X+e,0,V.RGBA,c,c,0,V.RGBA,V.UNSIGNED_BYTE,
null);V.bindTexture(a.Vb,null);e=f();V.bindFramebuffer(V.FRAMEBUFFER,e);p=ea();for(e=0;6>e;e++)va.aP(a,V[bb[e]],c,g,p,e);V.bindFramebuffer(V.FRAMEBUFFER,null);V.bindTexture(a.Vb,a.hc);V.texParameteri(a.Vb,V.TEXTURE_MIN_FILTER,ab[Da.Gk]);V.texParameteri(a.Vb,V.TEXTURE_MAG_FILTER,V.LINEAR)}ta.sP()&&(qa.warn("Firefox detected, setting max cubemap size to 256, use canvas for resizing."),J(a,b,g,wa.rD));a.width=3*l;a.height=2*l;V.generateMipmap(k)}else"NODE_TEX"==c&&(V.pixelStorei(V.UNPACK_FLIP_Y_WEBGL,
!1),V.texImage2D(k,0,V.RGBA,b.width,b.height,0,V.RGBA,V.UNSIGNED_BYTE,b.data),a.width=b.width,a.height=b.height);V.bindTexture(k,null)}function ba(a){a.Rb.oncanplay=function(){pa(a)&&A(a)}}function I(a){return q.L(a)?q.M(Math.pow(2,(a|0).toString(2).length),2,ua.Ic):a}function P(a){switch(a.type){case g.Yh:var b=V.RGBA;break;case g.St:b=V.RGB;break;case g.pm:b=V.RGBA;break;case g.Bq:b=V.RGB;break;case g.om:b=V.DEPTH_COMPONENT;break;default:Fa.va("Wrong texture type")}return b}function p(a){switch(a.type){case g.Yh:var b=
Da.Ib?V.RGBA8:V.RGBA;break;case g.St:b=Da.Ib?V.RGB8:V.RGB;break;case g.pm:b=Da.Ib?V.RGBA32F:V.RGBA;break;case g.Bq:b=Da.Ib?V.RGB8:V.RGB;break;case g.om:b=Da.Ib?da(ua.yo):V.DEPTH_COMPONENT;break;default:Fa.va("Wrong texture type")}return b}function da(a){switch(a){case 16:a=V.DEPTH_COMPONENT16;break;case 24:a=V.DEPTH_COMPONENT24;break;case 32:a=V.DEPTH_COMPONENT32F;break;default:a=V.DEPTH_COMPONENT24}return a}function H(a){switch(a.type){case g.Yh:var b=V.UNSIGNED_BYTE;break;case g.St:b=V.UNSIGNED_BYTE;
break;case g.pm:b=V.FLOAT;break;case g.Bq:b=V.FLOAT;break;case g.om:b=V.UNSIGNED_INT;break;default:Fa.va("Wrong texture type")}return b}function t(a){a.Rb?a.Rb.play():a.pe&&(a.Ss=!0);a.At=!1}function d(a){a.Rb?a.Rb.pause():a.pe&&(a.Ss=!1);a.At=!0}function la(a){a.Rb?a.Rb.currentTime=a.Mc/a.zh:a.pe&&(a.yk=Aa(a,a.Mc),ca(a))}function na(a){return a.Rb?!a.Rb.paused:a.pe?a.Ss:!1}function pa(a){return a.Rb||a.pe?a.Rb?2<=a.Rb.readyState:!0:0}function Aa(a,b){return Math.round(b*a.Qs/a.Bl)}function w(a,b){if(ra.is_dynamic(a))return oa(a,
b);a=a.gs;for(var h=0;h<a.length;h++){var d=oa(a[h],b);if(d)return d}return null}function N(a,b,h){if(ra.is_dynamic(a))Y(a,b,h);else{a=a.gs;for(var d=0;d<a.length;d++)Y(a[d],b,h)}}function oa(a,b){a=a.Aa;if(a.length){a=a[0].Ia;for(var h=0;h<a.length;h++){var d=a[h];if("MAIN"==d.type||"SKY"==d.type)for(var c=0;c<d.Ua.length;c++)if(d.bg[c]==b)return d.Ua[c]}}return null}function Y(a,b,h){a=a.Aa;if(a.length){a=a[0].Ia;for(var d=0;d<a.length;d++){var c=a[d];if("MAIN"==c.type)for(var g=0;g<c.Ua.length;g++)if(c.bg[g]==
b){var k=c.Ua[g];c.Ua[g]=h;D(k)}}}}function Q(a,b){a=a.Aa;if(a.length){a=a[0].Ia;for(var h=0;h<a.length;h++){var d=a[h];if("MAIN"==d.type)for(var c=0;c<d.Ua.length;c++){var g=d.Ua[c],k=d.bg[c];-1==b.indexOf(k)&&"NODE_TEX"!=g.source&&b.push(k)}}}}function Ha(a,b,h){var d=a.elements;a=a.interpolation;for(var c=0;c<b;c++){var g=c/(b-1),k=ia(d,g,!0),e=Ma(d,g,!0);if(k&&e)if("CONSTANT"==a)h.push.apply(h,k.color);else{var l=h,p=k,t=e;p==t?l.push.apply(l,p.color):(l.push(ma.hw(t.color[0],t.position,p.color[0],
p.position,g)),l.push(ma.hw(t.color[1],t.position,p.color[1],p.position,g)),l.push(ma.hw(t.color[2],t.position,p.color[2],p.position,g)),l.push(ma.hw(t.color[3],t.position,p.color[3],p.position,g)))}e&&!k&&h.push.apply(h,e.color);k&&!e&&h.push.apply(h,k.color)}}function ia(a,b,h){for(var d=null,c=0;c<a.length;c++){var g=h?b-a[c].position:b-a[c][1][0];0<=g&&(d?g<=(h?b-d.position:b-a[c][1][0])&&(d=a[c]):d=a[c])}return d}function Ma(a,b,h){for(var d=null,c=0;c<a.length;c++){var g=h?a[c].position-b:a[c][1][0]-
b;0<=g&&(d?g<=(h?d.position-b:d[1][0]-b)&&(d=a[c]):d=a[c])}return d}function D(a){var b;if(!(b=Da.enable_texture_cache))a:{b=xa.get_all_objects("ALL",xa.DATA_ID_ALL);for(var h=0;h<b.length;h++){var d=b[h];if(X(d,a)){b=!0;break a}d=d.gs;for(var c=0;c<d.length;c++)if(X(d[c],a)){b=!0;break a}}b=!1}b||(a.hc&&V.deleteTexture(a.hc),a=Ca.Ua.indexOf(a),-1!=a&&(Ca.Ua.splice(a,1),Ca.bp.splice(a,1)))}function X(a,b){for(var h=0;h<a.Aa.length;h++)for(var d=a.Aa[h].Ia,c=0;c<d.length;c++)for(var g=d[c].Ua,k=0;k<
g.length;k++)if(g[k]==b)return!0}function Ga(a,b){for(var h=0;h<Ca.Ua.length;h++){var d=Ca.Ua[h];if(d.pl==a&&d.type==b.type&&d.source==b.source&&d.repeat==b.repeat&&d.anisotropic_filtering==b.anisotropic_filtering&&d.im==b.im)return d}return null}var Fa=Object(M.a)(b),wa=Object(U.a)(b),La=Object(n.a)(b),ja=Object(z.a)(b),ta=Object(e.a)(b),ka=Object(m.a)(b),qa=Object(C.a)(b),S=Object(v.a)(b),va=Object(r.a)(b),xa=Object(y.a)(b),ra=Object(a.a)(b),ma=Object(T.a)(b),za=Object(c.a)(b),Da=La.wa,ua=La.ei,
h=La.Ra,ya=null,Ta=null,Va=null;g.We=0;g.Ca=0;g.OL=0;g.ML=0;g.NL=0;g.Hi=0;g.Yh=10;g.St=20;g.pm=30;g.Bq=40;g.om=50;g.Qt=60;g.Ot=70;g.Rt=80;g.Pt=90;g.ZC=128;g.NJ=128;g.vD=128;var Ca={Ua:[],bp:[]},Wa={},Ra={},V=null,ab,bb="TEXTURE_CUBE_MAP_POSITIVE_X TEXTURE_CUBE_MAP_NEGATIVE_X TEXTURE_CUBE_MAP_POSITIVE_Y TEXTURE_CUBE_MAP_NEGATIVE_Y TEXTURE_CUBE_MAP_POSITIVE_Z TEXTURE_CUBE_MAP_NEGATIVE_Z".split(" "),Ua=[[2,0],[0,0],[2,1],[1,0],[1,1],[0,1]];g.fh=function(a){ab=[a.NEAREST_MIPMAP_NEAREST,a.NEAREST_MIPMAP_LINEAR,
a.LINEAR_MIPMAP_NEAREST,a.LINEAR_MIPMAP_LINEAR];g.We=a.NEAREST;g.Ca=a.LINEAR;g.OL=a.NEAREST_MIPMAP_NEAREST;g.ML=a.LINEAR_MIPMAP_NEAREST;g.NL=a.NEAREST_MIPMAP_LINEAR;g.Hi=a.LINEAR_MIPMAP_LINEAR;V=a};g.yX=function(a,b){return b in Wa&&a in Wa[b]?Wa[b][a].rh:null};g.RY=function(a,b){return b in Wa&&a in Wa[b]?(K(Wa[b][a]),!0):!1};g.PD=F;g.Sj=O;g.ON=function(a,b){var h=V.createTexture(),d=V.TEXTURE_CUBE_MAP;V.bindTexture(d,h);V.texParameteri(d,V.TEXTURE_MAG_FILTER,V.LINEAR);b?V.texParameteri(d,V.TEXTURE_MIN_FILTER,
ab[Da.Gk]):V.texParameteri(d,V.TEXTURE_MIN_FILTER,V.LINEAR);V.texParameteri(d,V.TEXTURE_WRAP_S,V.CLAMP_TO_EDGE);V.texParameteri(d,V.TEXTURE_WRAP_T,V.CLAMP_TO_EDGE);for(var c=0;6>c;c++)V.texImage2D(V[bb[c]],0,V.RGBA,a,a,0,V.RGBA,V.UNSIGNED_BYTE,null);V.bindTexture(d,null);d=u();d.type=g.Yh;d.source="NONE";d.width=3*a;d.height=2*a;d.gr=1;d.Ee=b;d.hc=h;d.Vb=V.TEXTURE_CUBE_MAP;return d};g.gx=function(a,b){var h=a.Vb;V.bindTexture(h,a.hc);for(var d=0;6>d;d++)V.texImage2D(V[bb[d]],0,V.RGBA,b,b,0,V.RGBA,
V.UNSIGNED_BYTE,null);V.bindTexture(h,null);a.width=3*b;a.height=2*b};g.UB=function(a,b,h){var d=a.Vb;V.bindTexture(d,a.hc);b&&V.texParameteri(d,V.TEXTURE_MIN_FILTER,b);h&&V.texParameteri(d,V.TEXTURE_MAG_FILTER,h);V.bindTexture(d,null)};g.resize=function(a,b,h){b=Math.max(b,1);h=Math.max(h,1);if(a.width!=b||a.height!=h){switch(a.type){case g.Qt:V.bindRenderbuffer(V.RENDERBUFFER,a.Tf);V.renderbufferStorage(V.RENDERBUFFER,V.RGB565,b,h);V.bindRenderbuffer(V.RENDERBUFFER,null);break;case g.Ot:V.bindRenderbuffer(V.RENDERBUFFER,
a.Tf);V.renderbufferStorage(V.RENDERBUFFER,da(ua.yo),b,h);V.bindRenderbuffer(V.RENDERBUFFER,null);break;case g.Rt:V.bindRenderbuffer(V.RENDERBUFFER,a.Tf);V.renderbufferStorageMultisample(V.RENDERBUFFER,Da.Jc,V.RGBA8,b,h);V.bindRenderbuffer(V.RENDERBUFFER,null);break;case g.Pt:V.bindRenderbuffer(V.RENDERBUFFER,a.Tf);V.renderbufferStorageMultisample(V.RENDERBUFFER,Da.Jc,da(ua.yo),b,h);V.bindRenderbuffer(V.RENDERBUFFER,null);break;default:var d=a.Vb;V.bindTexture(d,a.hc);var c=P(a),k=p(a),e=H(a);a.Ee&&
(Da.Ib||(h=Math.max(b,h),b=I(h),h=I(h)),a.eH=Math.round(Math.log(Math.max(b,h))/Math.log(2)+.5));V.texImage2D(d,0,k,b,h,0,c,e,null);V.bindTexture(d,null)}b>ua.Ic||h>ua.Ic?Fa.va('Slink texture "'+a.type+'" has unsupported size: '+b+"x"+h+". Max available: "+ua.Ic+"x"+ua.Ic+"."):(a.width=b,a.height=h)}};g.IO=function(a,b,h,d,c){var k=a.type;if("BLEND"==k)return null;var e=a.image,p=u();p.type=g.Yh;p.width=1;p.height=1;if(Da.bz){var t=a.b4w_anisotropic_filtering;"DEFAULT"===t&&(t=b);"OFF"!==t&&Da.anisotropic_filtering&&
(p.anisotropic_filtering=parseFloat(t.split("x")[0]))}if("REPEAT"!=a.extension||a.b4w_shore_dist_map)p.repeat=!1;if(e){"IMAGE"==k&&"MOVIE"==e.source&&(p.ej=!0,p.zt=a.name,p.sb=a.frame_start,p.Mc=a.frame_offset,p.kl=a.frame_duration,p.KC=a.use_auto_refresh,p.Mk=a.use_cyclic,p.Bl=a.movie_length,p.im=a.b4w_nla_video,0!=p.Mc&&qa.warn('Frame offset for texture "'+a.name+'" has a nonzero value. Can lead to undefined behaviour for mobile devices.'));p.source=k;b=Object(l.b)(c+e.filepath);if(b=Ga(b,p))return b;
F(p,e,c)}b=new Uint8Array([204,204,204,255]);switch(k){case "IMAGE":c=V.createTexture();e=V.TEXTURE_2D;V.bindTexture(e,c);V.texImage2D(e,0,V.RGBA,1,1,0,V.RGBA,V.UNSIGNED_BYTE,b);break;case "NONE":if("NONE"==a.b4w_source_type)return null;c=V.createTexture();e=V.TEXTURE_2D;p.source=a.b4w_source_type;if("SCENE"==p.source){if(!a.b4w_source_id)return null;d=q._19("name",a.b4w_source_id,h);if(!d)return null;p.Ys=a.b4w_source_id;p.Bk=a.b4w_source_size;d.Hg=d.Hg||[];d.Hg.push(p);V.bindTexture(e,c);V.texImage2D(e,
0,V.RGBA,1,1,0,V.RGBA,V.UNSIGNED_BYTE,b)}else"CANVAS"==p.source&&(h=a.b4w_source_id,b=a.b4w_source_size,p.Ys=h,p.il=a.b4w_enable_canvas_mipmapping,a=document.createElement("canvas"),a.width=b,a.height=b,p.rh=a.getContext("2d"),d in Wa||(Wa[d]={}),Wa[d][h]=p,V.bindTexture(e,c));break;case "ENVIRONMENT_MAP":c=V.createTexture();e=V.TEXTURE_CUBE_MAP;V.bindTexture(e,c);a="POSITIVE_X NEGATIVE_X POSITIVE_Y NEGATIVE_Y POSITIVE_Z NEGATIVE_Z".split(" ");for(d=0;6>d;d++)V.texImage2D(V["TEXTURE_CUBE_MAP_"+a[d]],
0,V.RGBA,1,1,0,V.RGBA,V.UNSIGNED_BYTE,b);break;default:return qa.error('texture "'+a.name+'" has unsupported type "'+k+'"'),null}p.hc=c;p.Vb=e;"NONE"==k?(p.il?V.texParameteri(e,V.TEXTURE_MIN_FILTER,ab[Da.Gk]):V.texParameteri(e,V.TEXTURE_MIN_FILTER,V.LINEAR),p.anisotropic_filtering&&V.texParameterf(e,ka.aA().TEXTURE_MAX_ANISOTROPY_EXT,p.anisotropic_filtering),"CANVAS"==p.source&&K(p)):(V.generateMipmap(e),V.bindTexture(e,null));return p};g.qV=K;g.jJ=A;g.iJ=ca;g.ot=B;g.lz=I;g.Yo=function(a){return a&&
(a.hc||a.Tf)?!0:!1};g.Wo=function(a){return a&&a.Tf?!0:!1};g.dY=function(a){return a.type==g.pm||a.type==g.Bq?!0:!1};g.DQ=function(a){var b=0;switch(a.type){case g.Yh:case g.St:b=4;break;case g.pm:case g.Bq:b=32;break;case g.om:b=3;break;case g.Qt:case g.Ot:b=2;break;case g.Rt:b=4*Da.Jc;break;case g.Pt:b=3*Da.Jc}return b};g.cleanup=function(){if(!Da.Rs)for(var a in Ra)for(var b in Ra[a])Ra[a][b].Rb.pause(),Ra[a][b].Rb.src="",Ra[a][b].Rb.load();Ca.Ua.length=0;Ca.bp.length=0;Wa={};Ra={}};g.pause=function(){for(var a in Ra)for(var b in Ra[a]){var h=
Ra[a][b];na(h)&&d(h)}};g.reset=function(){for(var a in Ra)for(var b in Ra[a])la(Ra[a][b])};g.play=function(a){for(var b in Ra)for(var h in Ra[b]){var d=Ra[b][h];a&&!d.At||t(d)}};g.mA=function(a,b){return b in Ra&&a in Ra[b]?Ra[b][a]:null};g.QC=function(a){return a.im};g.play_video=t;g.pause_video=d;g.reset_video=la;g.zT=function(a,b,h){h in Ra&&a in Ra[h]&&(a=Ra[h][a],a.Rb?a.Rb.currentTime=b/a.zh:a.pe&&(a.yk=b,ca(a)))};g.CJ=na;g.DJ=pa;g.zJ=function(a){return a.Rb||a.pe?a.Rb?Math.round(a.Rb.currentTime*
a.zh):a.yk:0};g.BJ=function(a){return a.Rb||a.pe?a.Rb?a.Mc:Aa(a,a.Mc):0};g.FV=function(a){if(!a.Rb&&!a.pe)return 0;var b=Math.min(a.kl,a.Bl-a.Mc);return a.Rb?a.Mc+b:Aa(a,a.Mc+b)};g.ex=function(a,b){return Math.round(b*a.Ps*(S.ke()/a.zh))};g.AJ=function(a){return Math.min(a.kl,a.Bl-a.Mc)};g.EV=Aa;g.XP=function(a,b){return(a=w(a,b))&&"CANVAS"==a.source?a.rh:null};g.yv=w;g.OT=N;g.get_texture_names=function(a){var b=[];if(ra.is_dynamic(a))Q(a,b);else{a=a.gs;for(var h=0;h<a.length;h++)Q(a[h],b)}return b};
g.ZT=function(a){for(var b={},h=0;h<a.length;h++){for(var d=a[h].Ua,c=a[h].vg,g=[],k=[],e=0;e<d.length;e++){var l=d[e],p=c[e];if("CANVAS"==l.source)if(p in b)l=b[p];else{var t=d[e];l=u();l.source="CANVAS";l.width=t.width;l.height=t.height;l.il=t.il;l.type=t.type;t=document.createElement("canvas");t.width=l.width;t.height=l.height;l.rh=t.getContext("2d");l.Vb=V.TEXTURE_2D;l.hc=V.createTexture();V.bindTexture(V.TEXTURE_2D,l.hc);l.il?V.texParameteri(V.TEXTURE_2D,V.TEXTURE_MIN_FILTER,ab[Da.Gk]):V.texParameteri(V.TEXTURE_2D,
V.TEXTURE_MIN_FILTER,V.LINEAR);V.texParameteri(V.TEXTURE_2D,V.TEXTURE_MAG_FILTER,V.LINEAR);V.bindTexture(V.TEXTURE_2D,null);t=l;t.rh.drawImage(d[e].rh.canvas,0,0);K(t);b[p]=l}g.push(l);k.push(p)}a[h].Ua=g}};g.lP=function(a,b){for(var h=[],d=0;d<a.length;d++)Ha(a[d].data.value.color_ramp,b,h);return new Uint8Array(h.map(function(a){return q.M(255*a,0,255)}))};g.UM=Ha;g.pP=function(a,b){for(var h=new Float32Array(3),d=new Float32Array(3),c=[],g=0;g<a.length;g++){var e=a[g].data.value,l=[],p=e.curve_mapping.curves_data,
t=e.curve_mapping.curve_extend,f=e.curve_mapping.curves_handle_types;for(e=0;e<p.length;e++){for(var m=t[e],B=p[e],u=[],v=f[e],r=0;r<B.length;r++)u.push([new Float32Array(3),new Float32Array(B[r].concat(0)),new Float32Array(3)]);ma.mz(u[0],null,u[1],v[0],v[0]);for(r=1;r<u.length-1;r++)ma.mz(u[r],u[r-1],u[r+1],v[r],v[r]);ma.mz(u[u.length-1],u[u.length-2],null,v[u.length-1],v[u.length-1]);if(2<u.length){if("AUTO"==v[0]){k.subtract(u[0][2],u[0][1],h);r=k.length(h);k.copy(u[1][0],d);d[0]<u[0][1][0]&&
(d[0]=u[0][1][0]);k.subtract(d,u[0][1],d);var J=k.length(d);1E-8<J&&(k.scale(d,r/J,d),k.add(u[0][1],d,u[0][2]),k.subtract(u[0][1],d,u[0][0]))}B=u.length-1;"AUTO"==v[0]&&(k.subtract(u[B][0],u[B][1],h),r=k.length(h),k.copy(u[B-1][2],d),d[0]>u[B][1][0]&&(d[0]=u[B][1][0]),k.subtract(d,u[B][1],d),J=k.length(d),1E-8<J&&(k.scale(d,r/J,d),k.add(u[B][1],d,u[B][0]),k.subtract(u[B][1],d,u[B][2])))}for(B=0;B<u.length-1;B++)ma.CN(u[B][1],u[B][2],u[B+1][0],u[B+1][1]);B=[];3>=p.length?(r=Math.round(-b/2),v=Math.round(b/
2)):(r=0,v=b);for(;r<v;r++){J=r/(v-1);var I=ia(u,J,!1),n=Ma(u,J,!1);I&&n?B.push(ma.HM(J,I[1],I[2],n[0],n[1])):n&&!I?"EXTRAPOLATED"==m?(J=n[1][0]==n[2][0]?n[1][1]:ma.MG(J,n[1],n[2]),B.push(J)):B.push(n[1][1]):I&&!n&&("EXTRAPOLATED"==m?(J=I[0][0]==I[1][0]?I[1][1]:ma.MG(J,I[0],I[1]),B.push(J)):B.push(I[1][1]))}l.push(B)}c.push(l)}a=[];for(r=0;r<c.length;r++)for(l=c[r],e=0;e<l[0].length;e++)3>=l.length?(b=q.M(127.5*(l[0][e]+1),0,255),h=q.M(127.5*(l[1][e]+1),0,255),d=q.M(127.5*(l[2][e]+1),0,255),B=255):
(b=q.M(255*l[0][e],0,255),h=q.M(255*l[1][e],0,255),d=q.M(255*l[2][e],0,255),B=q.M(255*l[3][e],0,255)),a.push(b,h,d,B);return new Uint8Array(a)};g.VE=function(a,b){var h=O(g.Yh,!1);h.source="NODE_TEX";h.repeat=!1;B(h,{width:b,height:a.length/(4*b),data:a});return h};g.change_image=function(a,b,h,d,c){var g=Object(l.b)(c);if("WORLD"!=a.type){var k=Ga(g,b);if(!k){k=u();k.type=b.type;k.anisotropic_filtering=b.anisotropic_filtering;k.source=b.source;k.Ys=b.Ys;k.width=b.width;k.height=b.height;k.gr=b.gr;
k.Bk=b.Bk;k.il=b.il;k.rh=b.rh;k.Vb=b.Vb;k.hc=b.hc;k.Tf=b.Tf;k.ej=b.ej;k.qq=b.qq;k.Rb=b.Rb;k.zt=b.zt;k.Bl=b.Bl;k.zh=b.zh;k.sb=b.sb;k.Mc=b.Mc;k.kl=b.kl;k.Kh=b.Kh;k.wi=b.wi;k.pe=b.pe;k.Qs=b.Qs;k.Ps=b.Ps;k.yk=b.yk;k.Ss=b.Ss;k.Rl=b.Rl;k.At=b.At;k.KC=b.KC;k.Mk=b.Mk;k.im=b.im;k.repeat=b.repeat;k.So=b.So;k.pl=b.pl;k.Zm=b.Zm;k.yA=b.yA;k.xA=b.xA;k.ol=b.ol;var e=k;V.bindTexture(b.Vb,b.hc);var p=V.getTexParameter(b.Vb,V.TEXTURE_MAG_FILTER),t=V.getTexParameter(b.Vb,V.TEXTURE_MIN_FILTER),f=V.getTexParameter(b.Vb,
V.TEXTURE_WRAP_S);b=V.getTexParameter(b.Vb,V.TEXTURE_WRAP_T);e.hc=V.createTexture();V.bindTexture(e.Vb,e.hc);V.texParameteri(e.Vb,V.TEXTURE_MAG_FILTER,p);V.texParameteri(e.Vb,V.TEXTURE_MIN_FILTER,t);V.texParameteri(e.Vb,V.TEXTURE_WRAP_S,f);V.texParameteri(e.Vb,V.TEXTURE_WRAP_T,b);V.bindTexture(e.Vb,null);R(k,c,g);B(k,d,0)}N(a,h,k)}else k=b,R(k,c,g),B(k,d,0),za.UU(a,k),za.gy(a)};g.GE=D;g.hf=function(a){return a.texture.sa};g.aT=function(){V=null};g.UF=function(){return Ca.Ua};g.WP=function(a){a=Ca.Ua.indexOf(a);
return-1==a?!1:Ca.bp[a]};g.qT=function(a){a=Ca.Ua.indexOf(a);-1!=a&&(Ca.bp[a]=!0)}});w.a=f},function(D,w,f){D=f(0);var M=f(4);f=Object(D.a)("__time",function(f,n){function z(){return-1!==e.Xk.jv?e.Xk.jv:a}var e=Object(M.a)(f),m=0,C=0,v=[],q=0,r=0,y=[],a=-1,T=0;n.jI=function(a){m=a;C=performance.now();for(a=0;a<v.length;a++){var c=v[a];m>c.Rz&&(v.splice(a,1),a--,c.callback())}for(a=0;a<y.length;a++){c=y[a];var k=1-(c.Rz-m)/c.duration;k=Math.min(k,1);c.callback(c.from+k*(c.to-c.from));1==k&&(y.splice(a,
1),a--)}};n.get_timeline=function(){return m};n.xT=function(a){T=a};n.fQ=function(){return T};n.set_timeout=function(a,c){q++;var k=q;v.push({id:k,callback:a,Rz:m+(performance.now()-C+c)/1E3});return k};n.clear_timeout=function(a){for(var c=0;c<v.length;c++)if(v[c].id==a){v.splice(c,1);break}};n.clear_animation=function(a){for(var c=y.length;c--;)if(y[c].id==a){y.splice(c,1);break}};n.animate=function(a,c,e,b){e/=1E3;r++;var g=r;y.push({id:g,callback:b,from:a,to:c,Rz:m+e,duration:e});b(a);return g};
n.reset=function(){C=m=0;v.length=0;r=q=y.length=0};n.ke=z;n.AT=function(k){a=k};n.get_frame=function(a){return a*z()}});w.a=f},function(D,w,f){D=f(0);var M=f(5),U=f(4),n=f(63),z=f(89),e=f(9),m=f(1),C=f(8),v=f(10),q=f(11),r=f(13),y=f(6),a=f(2),T=f(3),k=f(37),c=f(73),l=f(16);f=Object(D.a)("__physics",function(b,g){function f(a,b){a=a.bf;for(var h=0;h<a.length;h++)a[h].Fd.bq&&b.push(a[h]),f(a[h],b);return null}function ea(a,b,h){for(var d=a.cd.jb,c=0;c<d.length;c++)for(var g=d[c].xa,k=0;k<g.dg.length;k++){var e=
g.dg[k];"ANY"!=e.Sb&&h!=e.Sb||da(e,a,b)}}function u(a,b,h){if(ia.Uv(a))switch(b){case ia.aK:var c=F(a);c.cd.JJ=!0;ia.Ta(a,ia.oL,Date.now()-performance.now(),ja.max_fps,ja.kz?ta.DF:0);break;case ia.bK:D.Wd("URANIUM:",h.slice(1));break;case ia.XJ:D.error(h);break;case ia.YJ:Ha.fbmsg.apply(this,h.slice(1));break;case ia.gD:(a=O(h.Ja))&&ya(a,h.time,h.trans,h.quat,h.ij,h.Ji);break;case ia.eD:(a=O(h.oz))&&y.t(h.trans,1,h.quat,a.Ba.Bs[h.CB]);break;case ia.ZJ:if(c=O(h[1]))a=h[4],c=c.xh.ju[h[2]],Fa.set_translation(c,
h[3]),Fa.set_rotation(c,a),Fa.Ea(c);break;case ia.eK:if(a=O(h[1]))a.Ba.speed=h[2];break;case ia.cD:c=F(a);K(c,h.Am,h.Bm,h.result,null,null,0);break;case ia.dD:c=F(a);K(c,h.Am,h.Bm,h.result,h.Em,h.coll_norm,h.coll_dist);break;case ia.VJ:if(a=O(h[1]))a=a.xa,a.Dm&&a.Dm(h[2]);break;case ia.Py:case ia.fD:c=F(a);if(a=c.cd.Ml[h.id])if(c=O(h.po),b==ia.Py)b=a.callback,b(a.id,h.hit_fract,c,h.hit_time);else{b=h.hit_fract;var g=h.hit_time,k=h.hit_pos,e=a.callback;k?e(a.id,b,c,g,k,h.hit_norm):e(a.id,b,c,g)}break;
case ia.dK:d(h.id);break;case ia.cK:a=S.indexOf(a);D.log("Physics #"+a+" Ping: OUT "+(h[2]-h[1]).toFixed(3)+" ms, IN "+(performance.now()-h[2]).toFixed(3)+" ms, ALL "+(performance.now()-h[1]).toFixed(3)+" ms");break;case ia.$J:qa=h[1];break;case ia.WJ:a=S.indexOf(a);D.log("Worker: #"+String(a));D.log(h[1]);break;default:D.error("Wrong message: "+b)}}function F(a){for(var b=0;b<S.length;b++)if(S[b]==a)return va[b]}function R(a){for(var b=0;b<va.length;b++)if(va[b]==a)return S[b]}function O(a){return xa[a]||
null}function K(a,b,h,d,c,g,k){a=a.cd.jb;for(var e=0;e<a.length;e++)for(var l=a[e].xa,p=0;p<l.dg.length;p++){for(var t=l.dg[p],f=t.Jl,m=!1,B=0;B<f.length;B++){var u=f[B];if(u[0]===b&&u[1]===h){t.ps[B]=d;m=!0;break}}m&&(f=A(t),c&&t.iz!=b&&(m=c,B=g,u=k,m[0]+=B[0]*u,m[1]+=B[1]*u,m[2]+=B[2]*u,B[0]*=-1,B[1]*=-1,B[2]*=-1),t.callback(f,f?t.iz==b?O(h):O(b):null,c,g,k))}}function A(a){a=a.ps;for(var b=!1,h=0;h<a.length;h++)b=b||a[h];return b}function ca(){za.body++;return za.body}function L(a,b,h){h=h?a.xa.Ja:
ca();var d=b.$d;return{Ja:h,$d:d,positions:d.Va[0].a_position,ab:d.ab||null,trans:y.j(a.ka.na,Da),ve:b.ve,Js:b.uh,Sb:b.Sb,Og:ha(b.Sb),$e:b.$e,Ze:b.Ze,af:b.af}}function ha(a){var b=ma.indexOf(a);return-1==b?(ma.push(a),ma.length-1):b}function J(a,b){return{Ja:a,type:b,mf:0,tl:!1,Tl:!0,mg:!1,is_character:!1,eR:!1,yu:null,Sb:"",Og:0,cX:{},dg:[],Dm:null,Eu:0,Gz:y.b(),ij:new Float32Array(3),Ji:new Float32Array(3),ou:new Float32Array(3),Uq:new Float32Array(4),ks:null}}function W(a,b){switch(a){case "BOX":var h=
b.gb;break;case "CYLINDER":h=b.Mq;break;case "CONE":h=b.Lq;break;case "SPHERE":h=b.Xc;break;case "CAPSULE":h=b.Kq}return h}function B(a){if(!a)return null;var b={};"number"===typeof a.min_x&&(b.min_x=a.min_x);"number"===typeof a.min_y&&(b.min_y=a.min_y);"number"===typeof a.min_z&&(b.min_z=a.min_z);"number"===typeof a.max_x&&(b.max_x=a.max_x);"number"===typeof a.max_y&&(b.max_y=a.max_y);"number"===typeof a.max_z&&(b.max_z=a.max_z);"object"===typeof a.Da&&(b.center=a.Da);"number"===typeof a.Lb&&(b.radius=
a.Lb);"number"===typeof a.height&&(b.height=a.height);return b}function ba(a){return a.xa&&a.xa.yu}function I(a,b,h,d,c,g,k,e,l,p){za.Yc++;var t=za.Yc.toString(16);var f=b.xa.Ja;ia.Ta(P(f),ia.ZK,t,a,e,f,h,d,c.xa.Ja,g,k,l,p);b.xa.yu=t}function P(a){for(var b=0;b<va.length;b++)for(var h=va[b].cd.jb,d=0;d<h.length;d++)if(h[d].xa.Ja==a)return S[b];return null}function p(a){var b=a.xa;if(b=b?0===b.mf?!0:!0===b.tl?!0:!1===b.Tl?!0:"RIGID_BODY"!==b.type&&"DYNAMIC"!==b.type?!0:!1:!1){b=y.j(a.ka.na,Da);var h=
y.g(a.ka.na,ua);b=b[0]!=a.xa.ou[0]||b[1]!=a.xa.ou[1]||b[2]!=a.xa.ou[2]||h[0]!=a.xa.Uq[0]||h[1]!=a.xa.Uq[1]||h[2]!=a.xa.Uq[2]||h[3]!=a.xa.Uq[3]}if(b){b=a.xa;var d=a.ka;h=ia.WF(ia.yq);h.Ja=b.Ja;var c=y.j(d.na,h.trans);d=y.g(d.na,h.quat);T.copy(c,b.ou);C.copy(d,b.Uq);"DYNAMIC"==b.type&&C.identity(h.quat);ia.Ta(P(b.Ja),ia.yq)}a=a.bf;for(b=0;b<a.length;b++)p(a[b])}function da(a,b,h){var d=a.Jl,c=a.ps,g=a.iz,k=[],e=a.Sb;k||Y.va("At least one destination required");for(var l=0;l<b.cd.jb.length;l++){var p=
b.cd.jb[l];if("ANY"==e||p.xa.Sb==e&&"NAVMESH"!=p.xa.type)p=p.xa.Ja,k&&-1==k.indexOf(p)&&k.push(p)}for(b=0;b<k.length;b++)e=k[b],g<e&&!H(d,g,e)?(d.push([g,e]),c.push(!1)):g>e&&!H(d,e,g)&&(d.push([e,g]),c.push(!1));ia.Ta(h,ia.QK,g);ia.Ta(h,ia.YK,d,a.Qi)}function H(a,b,h){for(var d=0;d<a.length;d++)if(a[d][0]==b&&a[d][1]==h)return!0;return!1}function t(a){a.xa&&a.xa.Dm&&(a=a.xa,ia.Ta(P(a.Ja),ia.kL,a.Ja),a.Dm=null)}function d(a){var b=na(a),h=la(a).cd;h.Ml[a]&&(delete h.Ml[a],h.FB.splice(h.FB.indexOf,
1),ia.Ta(b,ia.tL,a))}function la(a){for(var b=0;b<va.length;b++){var h=va[b];if(h.cd.Ml[a])return h}return null}function na(a){for(var b=0;b<va.length;b++)if(va[b].cd.Ml[a])return S[b];return null}function pa(a,b,h){if(b.Rp){a=a.xa.Ja;var d=b.Do*b.Fr,c=b.Sq*b.Tq,g=-b.Pp*b.Qp*2*Math.PI/b.bt;b.Tr&&(g*=-1);switch(b.type){case 10:ia.Ta(h,ia.JL,a,d,c,g);break;case 20:ia.Ta(h,ia.HL,a,d,c,g)}}}function Aa(a){return a.mg&&"CHASSIS"==a.xg.og}function w(a){return a.mg&&"HULL"==a.xg.og}function N(a){return"NAVMESH"==
a.Fd.tk}function oa(a){return a.en&&"MAIN_BODY"==a.Go.og}var Y=Object(M.a)(b),Q=Object(U.a)(b),Ha=Object(n.a)(b),ia=Object(z.a)(b),Ma=Object(e.a)(b),D=Object(m.a)(b),X=Object(v.a)(b),Ga=Object(q.a)(b),Fa=Object(r.a)(b),wa=Object(c.a)(b),La=Object(l.a)(b),ja=Q.xa,ta=Q.wa,ka=Q.se,qa=0,S=[],va=[],xa={},ra=[],ma=["ANY"],za={body:0,Yc:0,HH:0},Da=new Float32Array(3),ua=new Float32Array(4),h=y.b();y.b();g.ZQ=function(a){a.cd={JJ:!1,jb:[],Ml:{},FB:[]};var b=ja.pt;ka.prevent_caching&&(b+="?v="+Object(k.c)());
D.log("%cLOAD PHYSICS","color: #0a0",ja.On?"Using Separate Worker Thread,":"Using Same Thread,","Max FPS: "+ja.max_fps);D.log("%cPHYSICS PATH","color: #0a0",b);var h=ia.KO(b,!ja.On);ia.AM(h,u);S.push(h);va.push(a);ja.ping&&setInterval(function(){ia.Ta(h,ia.qL,performance.now())},1E3)};g.lN=function(a){return a.cd?a.cd.JJ:!0};g.cleanup=function(){for(var a=0;a<S.length;a++)ia.terminate(S[a]);S.length=0;va.length=0;xa={};ra.length=0;ma=["ANY"];for(var b in za)za[b]=0};g.append_object=function(a,b){if(b.cd){var h=
R(b),d=[];a.Fd.bq&&f(a,d);var c=b.cd.jb;if(Aa(a)||w(a)||a.is_character||oa(a)||a.Jn){var g=N(a);if(g){d=ca();d=J(d,"NAVMESH");var k=Ma.kb(a,b).Ia;d.ks=null;for(var e=0;e<k.length;e++){var l=k[e];if("PHYSICS"==l.type){d.ks=wa.gS(l.$a);break}}}else d=Va(a,d,!1),ia.Ta(h,ia.VK,d.Ja,d.trans,d.quat,d.tk,d.tl,d.qF,d.mf,d.yt,d.xt,d.nr,d.Ls,d.Og,d.$e,d.Ze,d.af,d.fE,d.IJ,d.size,d.ve,d.Js,d.LE,d.UE),xa[d.Ja]=a,ra.push(a),k=J(d.Ja,"BOUNDING"),k.type=d.tk,k.mf=d.mf,k.tl=d.tl,k.Sb=d.Sb,k.Og=d.Og,d=k;e=d;a.xa=e;
k={fb:null,xa:e};g||(c.push(k),ea(b,h,e.Sb))}else for(d=Ma.kb(a,b).Ia,g=0;g<d.length;g++){k=d[g];if(e="PHYSICS"==k.type){a:{e=b.cd.jb;for(l=0;l<e.length;l++){var p=e[l].fb;if(p&&p.id==k.id){e=!0;break a}}e=!1}e=!e}if(e)if(k.$d.Gb)if(k.Bg&&b.sa.wd){var t=k;k=b;e=h;l=k.sa.wd;ia.Ta(e,ia.dL,l.yj);if(t.NV){p={};p.dst_noise_scale0=t.dst_noise_scale0;p.dst_noise_scale1=t.dst_noise_scale1;p.dst_noise_freq0=t.dst_noise_freq0;p.dst_noise_freq1=t.dst_noise_freq1;p.dir_min_shore_fac=t.dir_min_shore_fac;p.dir_freq=
t.dir_freq;p.dir_noise_scale=t.dir_noise_scale;p.dir_noise_freq=t.dir_noise_freq;p.dir_min_noise_fac=t.dir_min_noise_fac;p.dst_min_fac=t.dst_min_fac;p.waves_hor_fac=t.waves_hor_fac;t=l.waves_height;var m=l.waves_length;l.Sl?ia.Ta(e,ia.sD,p,l.Ep[0],l.Ep[1],l.Dp[0],l.Dp[1],l.VA,t,m,l.aC,k.sa.$B):ia.Ta(e,ia.sD,p,0,0,0,0,0,t,m,0,null)}}else k.Bi?e=Ta(a,k,h):(l=h,e=L(a,k),ia.Ta(l,ia.cL,e.Ja,e.positions,e.ab,e.trans,e.ve,e.Js,e.Og,e.$e,e.Ze,e.af),l=J(e.Ja,"STATIC_MESH"),l.Sb=e.Sb,l.Og=e.Og,e=l),a.xa=e,
k={fb:k,xa:e},c.push(k),ea(b,h,e.Sb);else D.error("Object "+a.name+" has collision material with no assigned vertices")}if(Aa(a)||w(a)){b=a.xa.Ja;Aa(a)?(a.Ba.type=10,ia.Ta(h,ia.WK,b,a.Ba.oC,a.Ba.qC,a.Ba.pC,a.Ba.UC,a.Ba.WA)):w(a)&&(a.Ba.type=20,ia.Ta(h,ia.UK,b,a.Ba.Qm,a.Ba.Sn,a.Ba.Tn));if(a.Ba.yn)switch(c=a.Ba.yn,a.Ba.type){case 10:Wa(c[0],a,b,!0,h);Wa(c[1],a,b,!0,h);Wa(c[2],a,b,!1,h);Wa(c[3],a,b,!1,h);break;case 20:for(g=0;g<c.length;g++)Wa(c[g],a,b,!1,h)}pa(a,a.Ba,h)}else a.is_character?(c=a.ka,
b=a.xa,c=c.gb.max_z-c.gb.min_z,g=b.Ja,p=a.rE,d=p.LV,k=p.fT,e=p.sU,l=p.oR,p=p.OV,a=Ra(a),ia.Ta(h,ia.XK,g,a,c,d,k,e,l,p),b.is_character=!0):oa(a)&&V(a,h);for(g=0;g<ra.length;g++)h=ra[g],h.xa&&ab(h)}};g.vP=O;var ya=function(){var a=T.create();return function(b,h,d,c,g,k){var e=b.xa;e.Eu=h;b=y.i(b.ka.na,a);y.t(d,b,c,e.Gz);T.copy(g,e.ij);T.copy(k,e.Ji)}}();g.update=function(a,b){for(var d=0;d<S.length;d++){var c=S[d],g=a;c&&ia.xG(c)&&ia.Ta(c,ia.LL,g,b);for(var k=0;k<ra.length;k++){var e=ra[k],l=e.xa;if(l.Tl&&
l.Eu){var t=ia.xG(c)?g-l.Eu:performance.now()/1E3-l.Eu;t=Math.min(t,10/ja.max_fps);t-=1/ja.max_fps;ta.hS&&(t=0);var f=h;y.n(l.Gz,t,l.ij,l.Ji,h);Fa.set_tsr(e,f);Fa.Ea(e);p(e);if(e.Ba){l=e;t=l.Ba.yn;f=l.ka.na;for(var m=h,B=0;B<t.length;B++){var u=t[B];y.q(f,l.Ba.Bs[B],m);Fa.set_tsr(u,m);Fa.Ea(u)}}e.Ba&&e.Ba.Rp&&Ua(e);e.Ba&&e.Ba.eC&&Qa(e);e.Ba&&e.Ba.rC&&Ba(e)}}ia.HS(c);c=va[d];(g=c.sa.wd)&&0<g.waves_height&&(c=X.yc(c,Ga.ic),g=T.length(c.Di)||1,ia.Ta(S[d],ia.GL,c.time*g))}};g.PP=function(){return va[0]};
g.pause=function(){for(var a=0;a<S.length;a++)ia.Ta(S[a],ia.pL)};g.resume=function(){for(var a=0;a<S.length;a++)ia.Ta(S[a],ia.uL)};var Ta=function(){var a=T.create();return function(b,h,d){var c=ca(),g=h.$d,k=g.Va[0].a_position,e=g.ab||null;g=h.Sb;var l=ha(g),p=h.$e,t=h.Ze;h=h.af;b=y.j(b.ka.na,a);ia.Ta(d,ia.aL,c,k,e,b,l,p,t,h);d=J(c,"STATIC_MESH");d.tl=!0;d.Sb=g;d.Og=l;return d}}(),Va=function(){var a=C.create(),b=T.create();return function(h,d,c){var g=h.ka,k=h.Fd,e=k.tk;if(c)a:{for(var l in xa)if(xa[l]===
h){c=l;break a}c=-1}else c=ca();if(!(0>=c)){if("CAMERA"==h.type){l=k.LC?k.vu:"BOX";var p=W(l,g),t=.5,f=0}else if("EMPTY"==h.type)l="EMPTY",p=null,f=t=0;else{l=k.LC?k.vu:"BOX";p=W(l,g);t=y.i(g.na,b);if(1!=t[0]||1!=t[1]||1!=t[2])switch(f=p,l){case "BOX":f.min_x*=t[0];f.max_x*=t[0];f.min_y*=t[1];f.max_y*=t[1];f.min_z*=t[2];f.max_z*=t[2];break;case "CYLINDER":case "CONE":case "CAPSULE":f.height*=t[2];f.Lb*=Math.max(t[0],t[1]);break;case "SPHERE":f.Lb*=Math.max(t[0],t[1])}t=g.ve;f=g.uh}p=B(p);return{Ja:c,
trans:y.j(g.na,b),quat:y.g(g.na,a),tl:k.Bi,qF:k.tJ,mf:k.mf,yt:k.yt,xt:k.xt,nr:k.nr,Ls:k.Ls,Sb:h.Sb,Og:ha(h.Sb),$e:k.$e,Ze:k.Ze,af:k.af,size:g.Xc.Lb,IJ:p,UE:h.zu,Js:f,ve:t,fE:l,tk:e,LE:Ca(g,d,l,p)}}}}(),Ca=function(){var a=C.create(),b=C.create(),h=y.b(),d=T.create();return function(c,g,k,e){if(!g.length)return[];var l=[],p={};p.quat=new Float32Array([0,0,0,1]);p.trans=new Float32Array(3);p.worker_bounding=e;p.bounding_type=k;l.push(p);k=y.p(c.na,h);c=y.g(c.na,a);c=C.invert(c,a);for(e=0;e<g.length;e++){p=
{};var t=g[e],f=t.Fd.vu,m=new Float32Array(4),u=new Float32Array(3),q=y.j(t.ka.na,d),r=y.g(t.ka.na,b);y.D(q,k,u);C.multiply(c,r,m);p.trans=u;p.quat=m;p.bounding_type=f;p.worker_bounding=B(W(f,t.ka));l.push(p)}return l}}(),Wa=function(){var a=y.b(),b=T.create();return function(h,d,c,g,k){var e=y.j(h.ka.na,b),l=y.p(d.ka.na,a),p=new Float32Array(3);y.D(e,l,p);switch(d.Ba.type){case 10:d=d.xg;h=h.ka.gb;ia.Ta(k,ia.SK,c,p,d.zU,d.MB,(h.max_z-h.min_z)/2,g);break;case 20:ia.Ta(k,ia.RK,c,p,h.hz)}}}(),Ra=function(){var a=
C.create(),b=T.create(),h=T.create();return function(d){var c=y.g(d.ka.na,a);switch(d.type){case "CAMERA":b[0]=0;b[1]=-1;b[2]=0;T.transformQuat(b,c,b);h[0]=0;h[1]=0;h[2]=-1;break;case "MESH":b[0]=0;b[1]=0;b[2]=1;T.transformQuat(b,c,b);h[0]=0;h[1]=0;h[2]=1;break;case "EMPTY":b[0]=0,b[1]=1,b[2]=0,T.transformQuat(b,c,b),h[0]=0,h[1]=1,h[2]=0}b[1]=0;T.normalize(b,b);d=T.dot(b,h);return Math.acos(d)*(0<-b[0]*h[2]?-1:1)}}(),V=function(){var a=T.create(),b=y.b();return function(h,d){var c=h.xa.Ja;ia.Ta(d,
ia.$K,c,h.xh.Qm,h.xh.Sn,h.xh.Tn);if(h.xh.ju)for(var g=h.xh.ju,k=0;k<g.length;k++){var e=g[k],l=y.j(e.ka.na,a),p=y.p(h.ka.na,b),t=new Float32Array(3);y.D(l,p,t);ia.Ta(d,ia.TK,c,t,e.hz)}h.xa.eR=!0}}();g.enable_simulation=function(a){(a=a.xa)||Y.va("No object physics");if(!a.Tl){var b=a.Ja,h=P(b);a.Tl=!0;ia.Ta(h,ia.nL,b)}};g.disable_simulation=function(a){(a=a.xa)||Y.va("No object physics");if(a.Tl){var b=a.Ja,h=P(b);a.Tl=!1;ia.Ta(h,ia.mL,b)}};g.Bp=function(a){return!!a.cd};g.eb=function(a){return!!a.xa};
g.has_dynamic_physics=function(a){return(a=a.xa)&&a.Tl&&("RIGID_BODY"==a.type||"DYNAMIC"==a.type)&&0<a.mf&&0==a.tl?!0:!1};g.has_simulated_physics=function(a){return(a=a.xa)&&a.Tl?!0:!1};g.set_gravity=function(a,b,h,d){a=a.xa.Ja;ia.Ta(P(a),ia.FL,a,b,h,d)};var ab=function(){var b=C.create(),h=y.b(),d=y.b(),c=T.create();return function(g){if(!ba(g))for(var k=0;k<g.yB.length;k++){var e=g.yB[k],l=e.target,p=e.zS;if(l.xa){var t=new Float32Array([e.AS,e.BS,e.CS]),f=a.Y(new Float32Array([e.Cb,e.Db,e.Eb]),
new Float32Array(4));"HINGE"==p&&C.rotateY(f,Math.PI/2,f);var m=y.m(h);m=y.v(t,m);m=y.r(f,m);m=y.q(g.ka.na,m,h);var B=y.p(l.ka.na,d);B=y.q(B,m,B);m=y.j(B,c);B=y.g(B,b);var u={};u.use_limit_x=e.zV;u.use_limit_y=e.AV;u.use_limit_z=e.BV;u.use_angular_limit_x=e.vV;u.use_angular_limit_y=e.wV;u.use_angular_limit_z=e.xV;u.limit_max_x=e.zR;u.limit_min_x=e.CR;u.limit_max_y=e.AR;u.limit_min_y=e.DR;u.limit_max_z=e.BR;u.limit_min_z=e.ER;u.limit_angle_max_x=e.tR;u.limit_angle_min_x=e.wR;u.limit_angle_max_y=e.uR;
u.limit_angle_min_y=e.xR;u.limit_angle_max_z=e.vR;u.limit_angle_min_z=e.yR;I(p,g,t,f,l,m,B,u,null,null)}}}}();g.LQ=ba;g.apply_constraint=I;g.clear_constraint=function(a){a=a.xa;ia.Ta(P(a.Ja),ia.sL,a.yu);a.yu=null};g.pull_to_constraint_pivot=function(){var a=C.create(),b=y.b(),h=y.b(),d=y.b();return function(c,k,e,l,p,t){k=y.t(k,1,e,b);p=y.t(p,1,t,h);y.p(k,k);y.q(p,k,k);Fa.get_tsr(l,p);y.q(p,k,k);Fa.set_tsr(c,k);Fa.Ea(c);l=y.j(c.ka.na,d);p=y.g(c.ka.na,a);g.set_transform(c,l,p)}}();g.set_transform=
function(a,b,h){var d=a.xa,c=ia.WF(ia.yq),g=y.j(a.ka.na,c.trans);a=y.g(a.ka.na,c.quat);y.t(g,1,a,d.Gz);c.Ja=d.Ja;T.copy(b,c.trans);C.copy(h,c.quat);ia.Ta(P(d.Ja),ia.yq)};g.sync_transform=p;g.sync_bounding=function(a,b){b=R(b);var h=[];a.Fd.bq&&f(a,h);(Aa(a)||w(a)||a.is_character||oa(a)||a.Jn)&&!N(a)&&(a=Va(a,h,!0),ia.Ta(b,ia.IL,a.Ja,a.trans,a.quat,a.tk,a.tl,a.qF,a.mf,a.yt,a.xt,a.nr,a.Ls,a.Og,a.$e,a.Ze,a.af,a.fE,a.IJ,a.size,a.ve,a.Js,a.LE,a.UE))};g.sync_mesh=function(a,b){for(var h=R(b),d=a.Aa[0].Ia,
c=0;c<d.length;c++){var g=d[c];if("PHYSICS"==g.type){La.$I(d[c],d[c].$d,a.ka.qg);if(g.Bi)D.error("The function is not implemented for ghost objects yet");else{var k=h;g=L(a,g,!0);ia.Ta(k,ia.KL,g.Ja,g.positions,g.ab,g.trans,g.ve,g.Js,g.Og,g.$e,g.Ze,g.af)}ea(b,h,a.xa.Sb)}}};g.apply_velocity=function(a,b,h,d){var c=Da;bb(a,b,h,d,c);a=a.xa.Ja;b=Math.abs(c[0]);h=Math.abs(c[1]);d=Math.abs(c[2]);c[0]=b?c[0]/b*Math.max(b,0):0;c[1]=h?c[1]/h*Math.max(h,0):0;c[2]=d?c[2]/d*Math.max(d,0):0;ia.Ta(P(a),ia.uD,a,
c[0],c[1],c[2])};g.apply_velocity_world=function(a,b,h,d){a=a.xa.Ja;ia.Ta(P(a),ia.uD,a,b,h,d)};var bb=function(){var a=C.create();return function(b,h,d,c,g){g=g||new Float32Array(3);b=y.g(b.ka.na,a);g[0]=h;g[1]=d;g[2]=c;return T.transformQuat(g,b,g)}}();g.apply_force=function(a,b,h,d,c){var g=Da;c?(g[0]=b,g[1]=h,g[2]=d):bb(a,b,h,d,g);a=a.xa.Ja;ia.Ta(P(a),ia.eL,a,g[0],g[1],g[2])};g.apply_torque=function(a,b,h,d){var c=Da;bb(a,b,h,d,c);a=a.xa.Ja;ia.Ta(P(a),ia.gL,a,c[0],c[1],c[2])};g.set_angular_velocity=
function(a,b,h,d){a=a.xa.Ja;ia.Ta(P(a),ia.vL,a,b,h,d)};g.set_character_move_dir=function(a,b,h){a=a.xa.Ja;ia.Ta(P(a),ia.yL,a,b,h)};g.set_character_move_type=function(a,b){a=a.xa.Ja;ia.Ta(P(a),ia.zL,a,b)};g.set_character_walk_velocity=function(a,b){a=a.xa.Ja;ia.Ta(P(a),ia.EL,a,b)};g.set_character_run_velocity=function(a,b){a=a.xa.Ja;ia.Ta(P(a),ia.BL,a,b)};g.set_character_fly_velocity=function(a,b){a=a.xa.Ja;ia.Ta(P(a),ia.wL,a,b)};g.character_jump=function(a){a=a.xa.Ja;ia.Ta(P(a),ia.iL,a)};g.character_rotation_inc=
function(a,b,h){a=a.xa.Ja;ia.Ta(P(a),ia.jL,a,b,h)};g.set_character_rotation=function(a,b,h){a=a.xa.Ja;ia.Ta(P(a),ia.AL,a,b,h)};g.set_character_rotation_h=function(a,b){a=a.xa.Ja;ia.Ta(P(a),ia.xL,a,b)};g.set_character_rotation_v=function(a,b){a=a.xa.Ja;ia.Ta(P(a),ia.DL,a,b)};g.set_character_vert_move_dir_angle=function(a,b){a=a.xa.Ja;ia.Ta(P(a),ia.CL,a,b)};g.append_collision_test=function(a,b,h,d){var c=a.xa;if(!c.ks){for(var g=c.Ja,k=0;k<c.dg.length;k++)if(a=c.dg[k],a.Sb==b&&a.callback==h)return;
a={iz:g,Qi:d||!1,Sb:b,callback:h,Jl:[],ps:[]};c.dg.push(a);b=P(g);da(a,F(b),b)}};g.remove_collision_test=function(a,b,h){a=a.xa;for(var d=P(a.Ja),c=F(d),g=0;g<a.dg.length;g++){var k=a.dg[g];if(k.Sb==b&&k.callback==h){if(A(k)){var e=T.set(0,0,0,Da);k.callback(!1,null,e,e,0)}a.dg.splice(g,1);g--;e=d;k=k.Jl;for(var l=c.cd.jb,p=0;p<l.length;p++)for(var t=l[p].xa,f=0;f<t.dg.length;f++)for(var m=t.dg[f],B=0;B<m.Jl.length;B++)for(var u=m.Jl[B],q=0;q<k.length;q++){var r=k[q];u[0]==r[0]&&u[1]==r[1]&&(k.splice(q,
1),q--)}k.length&&ia.Ta(e,ia.tD,k)}}};g.apply_collision_impulse_test=function(a,b){a.xa&&a.xa.Dm&&t(a);a=a.xa;ia.Ta(P(a.Ja),ia.fL,a.Ja);a.Dm=b};g.clear_collision_impulse_test=t;g.append_ray_test=function(a,b,h,d,c,g,k,e,l){za.HH++;var p=za.HH;a={id:p,Ja:a?a.xa.Ja:0,from:new Float32Array(b),to:new Float32Array(h),Sb:d,Og:ha(d),YD:g,TM:k,Qi:e,Rv:l,callback:c};b=P(a.Ja)||S[0];h=F(b).cd;h.Ml[p]=a;h.FB.push(a);ia.Ta(b,ia.bL,a.id,a.Ja,a.from,a.to,a.Og,a.YD,a.TM,a.Qi,a.Rv);return p};g.remove_ray_test=d;
g.change_ray_test_from_to=function(a,b,h){var d=na(a),c=la(a).cd.Ml[a];c&&!c.YD&&(c.from.set(b),c.to.set(h),ia.Ta(d,ia.hL,a,b,h))};g.zG=function(a){return la(a).cd.Ml[a]?!0:!1};g.vehicle_throttle=function(a,b){var h=a.Ba;h.Do=b;pa(a,h,P(a.xa.Ja))};g.vehicle_steer=function(a,b){var h=a.Ba;h.Pp=b;pa(a,h,P(a.xa.Ja))};g.vehicle_brake=function(a,b){var h=a.Ba;h.Sq=b;pa(a,h,P(a.xa.Ja))};var Ua=function(){var a=C.create(),b=C.create(),h=T.create();return function(d){var c=d.Ba,g=c.Rp;if(g){var k=d.Ba.DI;
y.q(d.ka.na,d.Ba.EI,g.ka.na);d=y.y(k,d.ka.na,h);c=C.setAxisAngle(d,-c.Pp*c.Qp*2*Math.PI,a);d=y.g(g.ka.na,b);C.multiply(c,d,d);C.normalize(d,d);y.r(d,g.ka.na);Fa.Ea(g)}}}(),Qa=function(){var a=C.create(),b=C.create(),h=T.create();return function(d){var c=d.Ba,g=c.eC;if(g){var k=d.Ba.yI;y.q(d.ka.na,d.Ba.zI,g.ka.na);y.y(k,d.ka.na,h);d=Math.abs(c.speed)*c.$s;d>c.cp&&(d=c.cp);c=C.setAxisAngle(h,-d,a);d=y.g(g.ka.na,b);C.multiply(c,d,d);C.normalize(d,d);y.r(d,g.ka.na);Fa.Ea(g)}}}(),Ba=function(){var a=C.create(),
b=C.create(),h=T.create();return function(d){var c=d.Ba,g=c.rC;if(g){var k=d.Ba.MI;y.q(d.ka.na,d.Ba.NI,g.ka.na);y.y(k,d.ka.na,h);C.setAxisAngle(h,-Math.abs(c.Do)*c.rr,a);d=y.g(g.ka.na,b);C.multiply(a,d,d);C.normalize(d,d);y.r(d,g.ka.na);Fa.Ea(g)}}}();g.is_vehicle_chassis=Aa;g.is_vehicle_hull=w;g.gY=N;g.dR=function(a){if(!a.mg)return!1;a=a.xg.og;return"WHEEL_FRONT_LEFT"==a||"WHEEL_FRONT_RIGHT"==a||"WHEEL_BACK_LEFT"==a||"WHEEL_BACK_RIGHT"==a?!0:!1};g.cR=function(a){return a.mg?"BOB"==a.xg.og?!0:!1:
!1};g.fR=function(a){return a.en?"BOB"==a.Go.og?!0:!1:!1};g.BG=function(a){return a.mg&&"STEERING_WHEEL"==a.xg.og?!0:!1};g.AG=function(a){return a.mg&&"SPEEDOMETER"==a.xg.og?!0:!1};g.CG=function(a){return a.mg&&"TACHOMETER"==a.xg.og?!0:!1};g.get_vehicle_speed=function(a){return a.Ba.speed};g.QV=function(a){switch(a){case "WHEEL_FRONT_RIGHT":return 0;case "WHEEL_FRONT_LEFT":return 1;case "WHEEL_BACK_LEFT":return 2;case "WHEEL_BACK_RIGHT":return 3}};g.eG=function(a){return a.xa&&a.xa.is_character};
g.fY=oa;g.oQ=function(){return qa};g.TO=function(){for(var a=0;a<S.length;a++)ia.Ta(S[a],ia.lL)};g.remove_object=function(a){var b=a.xa.Ja;if("BOUNDING"==a.xa.type){var h=ra.indexOf(a);-1==h&&D.error("Object "+a.name+" doesn't have bounding physics");delete xa[b];ra.splice(h,1)}h=P(b);for(var d=F(h),c=d.cd.jb,g=[],k=0;k<c.length;k++)for(var e=c[k].xa,l=0;l<e.dg.length;l++)for(var p=e.dg[l],f=0;f<p.Jl.length;f++){var m=p.Jl[f],B=p.ps[f];if(m[0]==b||m[1]==b)p.Jl.splice(f,1),p.ps.splice(f,1),f--,B&&
!A(p)&&(B=T.set(0,0,0,Da),p.callback(!1,null,B,B,0)),g.push(m)}g.length&&ia.Ta(h,ia.tD,g);a.xa&&a.xa.Dm&&t(a);a=d.cd.jb;for(d=0;d<a.length;d++)a[d].xa.Ja==b&&(a.splice(d,1),d--);ia.Ta(h,ia.rL,b)};g.NQ=function(a){var b=a.Fd;return a.mg||a.en||a.is_character||a.Jn&&!b.Bi&&0<b.mf&&("DYNAMIC"==b.tk||"RIGID_BODY"==b.tk)}});w.a=f},function(D,w,f){D=f(0);var M=f(5),U=f(25),n=f(31),z=f(28),e=f(1),m=f(8),C=f(36),v=f(6),q=f(2),r=f(3),y=f(7);f=Object(D.a)("__geometry",function(a,f){function k(){return{length:0,
frames:1,Tc:0,offset:0,Om:0}}function c(a,b,d){var c=b.a_tbn,g=b.a_position,h=g.length;b=a.Tb.length;if(d)for(var k=a.Tb[0].gf.a_position,e=0;e<h;e++)g[e]=k[e];for(var l=1;l<b;l++){var p=d?d[l].value:a.Tb[l].Rr;k=a.Tb[l].gf.a_position;for(e=0;e<h;e++)g[e]+=p*k[e]}b=C.f(c);if(d)for(h=a.Tb[0].gf.a_tbn,l=0;l<b;l++)C.n(c,h,l);for(l=0;l<b;l++){g=C.i(Fa);for(e=1;e<a.Tb.length;e++)if(h=a.Tb[e].gf.a_tbn,p=d?d[e].value:a.Tb[e].Rr)h=C.e(h,l,wa),p=C.p(C.i(La),h,p,wa),C.k(p,g,g);e=C.e(c,l,wa);e=C.k(g,e,wa);C.n(c,
e,l)}}function l(a){return 65536<a.Gb?D.TF()?!1:!0:!1}function b(a){return 0<a.ab.length?!0:!1}function g(a,d,c){if(!b(a))return a;c||Ga.log('%cDEBUG max vertices exceeded for indexed submesh "'+a.name+'": '+a.Gb*(d||1)+", will use drawArrays","color: #aa0");d=a.ab;c=a.Gb;var g=a.hb,k=a.Va;for(p in g){var h=g[p],e=I(h,c);g[p]=E(d,h,e)}for(g=0;g<k.length;g++){var l=k[g];for(p in l)h=l[p],e=I(h,c),l[p]=E(d,h,e)}for(g=0;g<a.Tb.length;g++){var p=a.Tb[g].gf;for(var t in p)h=p[t],e=I(h,c),p[t]=E(d,h,e)}a.Gb=
d.length;a.ab=new Uint16Array(0);return a}function E(a,b,d){if(0==b.length)return new Float32Array(0);for(var c=new Float32Array(a.length*d),g=0;g<a.length;g++)for(var h=a[g],k=0;k<d;k++)c[d*g+k]=b[d*h+k];return c}function T(){return{Ke:null,Pc:na(),Ym:0,count:0,mc:{},usage:0,uo:0,wo:0,be:[],Fh:null,Tb:null,bn:1,sh:!0}}function u(a,b,d,c){if("a_normal"==b)return c=C.d(c),u(a,"a_tbn",d,c);var g=a.mc,h=g[b],e=Y(b);if(h)d&&h.Tc!=d&&Ma.va('invalid num_comp for "'+b+'"'),Q(a.Pc,b,c,h.offset);else{h=Aa(a.Pc,
e);-1==h&&(a.Pc.push(pa(e,0)),h=a.Pc.length-1);e=a.Pc[h].jm;var l=new e.constructor(e.length+c.length);l.set(e);a.Pc[h].jm=l;Q(a.Pc,b,c,e.length);b=g[b]=k();b.Tc=d;b.offset=e.length;b.length=c.length}K(a);return a}function F(a,b){if("a_normal"==b){a=F(a,"a_tbn");b=C.f(a);for(var d=new Float32Array(3*b),c=0;c<b;c++){var g=C.g(a,c,ja);d.set(g,3*c)}return d}if(d=a.mc[b])return c=Y(b),Ha(b,N(a.Pc,c).subarray(d.offset,d.offset+d.length),new Float32Array(d.length));Ma.va("extract_array_float() failed; invalid name: "+
b)}function R(a,b){switch(b){case f.Yn:case f.vq:var d=va.STATIC_DRAW;break;case f.Ht:d=va.DYNAMIC_DRAW;break;default:Ma.va("Wrong draw_mode")}a.usage=d}function O(a,b,d){function c(a,b){g[a]||(g[a]=0);g[a]+=b}var g={},h;for(h in a[0]){var k=a[0][h],e=Y(h);c(e,k.length*a.length)}for(h in b)k=b[h],e=Y(h),c(e,k.length);if(d){a=d.jt.length;e=Y("a_part_ts");c(e,4*a);e=Y("a_part_r");c(e,4*a);b=d.sp;for(h in b)e=Y(h),c(e,b[h].Tc*a);d=d.Nx;for(h in d)e=Y(h),c(e,a)}return g}function K(a){a.Ke?(a.Fh||(a.Fh=
va.createBuffer()),va.bindBuffer(va.ELEMENT_ARRAY_BUFFER,a.Fh),va.bufferData(va.ELEMENT_ARRAY_BUFFER,a.Ke,a.usage),a.uo=a.Ke.byteLength):a.uo=0;for(var b=a.wo=0;b<a.Pc.length;b++){var d=a.Pc[b].type,c=Aa(a.be,d);-1==c&&(a.be.push({Nk:null,type:d,SO:X.ZI()}),c=a.be.length-1);d=a.be[c];d.Nk||(d.Nk=va.createBuffer());va.bindBuffer(va.ARRAY_BUFFER,d.Nk);va.bufferData(va.ARRAY_BUFFER,a.Pc[b].jm,a.usage);a.wo+=a.Pc[b].jm.byteLength}}function A(a,b){a.gb=U.h(a.gb,b);a.jc=U.i(a.jc,b);a.Xc=U.k(a.Xc,b);a.Nd=
U.j(a.Nd,b)}function ca(a){for(var b=a[0],d=a[0],c=la("JOIN_"+a.length+"_SUBMESHES"),g=0,h=0;h<a.length;h++)g+=a[h].ab.length;c.ab=new Uint32Array(g);var k=g=0;if(0<a[0].Tb.length)for(var e=0;e<a[0].Tb.length;e++){for(h=0;h<a.length;h++)g+=a[h].Tb[e].gf.a_position.length,k+=C.f(a[h].Tb[e].gf.a_tbn);h={a_position:new Float32Array(g),a_tbn:C.c(k)};c.Tb.push({Rr:a[0].Tb[e].Rr,gf:h})}for(h=g=0;h<a.length;h++)g+=a[h].Gb;c.Gb=g;for(var l in d.hb){for(h=g=0;h<a.length;h++)g+=a[h].hb[l].length;c.hb[l]=new Float32Array(g)}for(l in d.Va[0]){for(h=
g=0;h<a.length;h++)g+=a[h].Va[0][l].length;for(h=0;h<d.Va.length;h++)c.Va[h]=c.Va[h]||{},c.Va[h][l]=new Float32Array(g)}h=c.Jd;h.gb=U.n(b.Jd.gb);k=g=0;e=[];for(d=0;d<a.length;d++){var p=a[d],t=p.ab,f=p.Gb,m=p.hb;l=p.Jd.Xc;U.D(h.gb,p.Jd.gb);U.E(h.Xc,l);U.G(p.Jd.Nd,e);for(l=0;l<t.length;l++)c.ab[g+l]=t[l]+k;g+=t.length;for(var B in m){t=m[B];var u=k*I(t,f);c.hb[B].set(t,u)}for(l=0;l<p.Va.length;l++){m=p.Va[l];var r=c.Va[l];for(B in m)t=m[B],u=k*I(t,f),r[B].set(t,u)}k+=f}h.jc=U.z(q._1(e),!0);if(0<c.Tb.length)for(d=
0;d<c.Tb.length;d++)for(B=c.Tb[d].gf,l=g=h=0;l<a.length;l++)k=a[l].Tb[d].gf,B.a_position.set(k.a_position,h),B.a_tbn.set(k.a_tbn,g),h+=k.a_position.length,g+=k.a_tbn.length;a[0].If&&(c.If={jt:b.If.jt,jC:b.If.jC,CI:!0,Nx:b.If.Nx,sp:b.If.sp,Uu:b.If.Uu});return c}function L(a,b,d){b=b.Jd;for(var c=U.w(),g=U.C(),h=[],k=0;k<d.length;k++)U.h(a.Jd.gb,d[k],c),U.D(b.gb,c),U.j(a.Jd.Nd,d[k],g),U.G(g,h);b.jc=U.z(q._1(h),!0);b.Nd=U.x(b.jc);b.Xc=U.B(b.jc)}function ha(a,b,d,c,k,h){var e=a.submeshes[b],l=e.base_length,
p=la("SUBMESH_"+a.name+"_"+a.materials[b].name);p.Gb=l;var t=!1;if(B(d,"a_texcoord")){var f=null,m=a.materials[b];b=a.submeshes[b];if(m.hh.length)switch(m=m.hh[0],m.texture_coords){case "UV":f=W(b,m.uv_layer||a.active_uv_name,a.name);break;case "ORCO":var u=a.b4w_boundings.bb_src;f=new Float32Array(2*b.base_length);m=(u.max_x+u.min_x)/2;var v=(u.max_y+u.min_y)/2,I=u.max_x-u.min_x;u=u.max_y-u.min_y;for(var n=0,A=0;A<b.position.length;A+=3)f[n++]=(b.position[A]-m)/I+.5,f[n++]=(b.position[A+1]-v)/u+
.5}null===f&&(f=new Float32Array(2*b.base_length));b=f}else b=new Float32Array(0);if(B(d,"a_orco_tex_coord")){f=a.b4w_boundings.bb_src;m=new Float32Array(3*e.base_length);v=e.position;I=f.max_x-f.min_x;u=f.max_y-f.min_y;n=f.max_z-f.min_z;for(var P=A=0;P<v.length;P+=3)0==I?m[A++]=.5:m[A++]=q.M(parseFloat(((v[P]-f.min_x)/I).toFixed(5)),0,1),0==u?m[A++]=.5:m[A++]=q.M(parseFloat(((v[P+1]-f.min_y)/u).toFixed(5)),0,1),0==n?m[A++]=.5:m[A++]=q.M(parseFloat(((v[P+2]-f.min_z)/n).toFixed(5)),0,1);f=m}else f=
new Float32Array(0);m=e.group;if(B(d,"a_influence")&&c){v=new Float32Array(4*l);I=m.length/l;u=new Float32Array(I);for(n=0;n<I;n++){u[n]=-1;for(var C in c)if(A=c[C],A.yJ===n){u[n]=A.Jz;break}}P=3<I?I:4;c=new Float32Array(P);C=new Uint32Array(P);n=new Float32Array(4);A=new Float32Array(P);P=new Uint32Array(P);for(var F=new Float32Array(4),y=0;y<l;y++)c.set(A),C.set(P),n.set(F),v.set(ba(m,I,y,l,u,c,C,n),4*y)}else v=new Float32Array(0);c=v;k=k?q.O(k):{};k.a_color={Xm:!0};k.a_color.src=B(d,"a_color")&&
a.active_vcol_name?[{name:a.active_vcol_name,Ih:7}]:[];p.hb.a_texcoord=b;p.hb.a_influence=c;p.hb.a_orco_tex_coord=f;c=p.hb;C=e.vertex_colors;b=e.color;f=a.name;m=[];for(v=0;v<C.length;v++)m.push(C[v].name);for(var E in k)if(v=k[E].src,v.length){for(u=I=0;u<v.length;u++)I+=q._43(v[u].Ih);c[E]=new Float32Array(I*l);for(u=n=0;u<v.length;u++){var da=v[u].name;A=v[u].Ih;P=q._44(A);F=m.indexOf(da);if(-1==F)Ga.warn('vertex color "'+da+'" for mesh "'+f+'" not found'),y=7;else{y=C[F].mask;var S=C;for(var ra=
F,L=l,Y=0,pa=0;pa<ra;pa++)Y+=q._43(S[pa].mask);S=Y*L}ra=q._43(y);(A&y)!==A&&Ga.error("Wrong color extraction from "+da+" to "+E+' for the mesh "'+f+'".');for(da=0;da<l;da++)for(L=0;3>L;L++)P[L]&&(Y=n+q._42(A,L),pa=q._42(y,L),c[E][da*I+Y]=-1==F?0:b[S+da*ra+pa]);n+=ra}}else c[E]=new Float32Array(0);E=a.name;S=p.hb;if(h)for(var na in h)S[h[na]]=W(e,na,E);p.ab=new Uint32Array(e.indices);na=e.position.length/l/3;E=B(d,"a_tbn")&&e.tbn.length?!0:!1;S=B(d,"a_shade_tangs")&&e.shade_tangs.length?!0:!1;0<a.b4w_shape_keys.length&&
(t=!0);for(k=0;k<na;k++){h=J(e,l,E,S,k);if(t)if(c={},c.name=a.b4w_shape_keys[k].name,p.Tb.push(c),0!=k){c.gf=h;c.Rr=a.b4w_shape_keys[k].value;continue}else c.gf=J(e,l,E,S,k),c.Rr=1;p.Va.push(h)}if(1<na&&!t){a=p.Va[0];h={};for(var T in a)h[T]=new Float32Array(a[T]);p.Va.push(h)}B(d,"a_polyindex")&&(g(p,1,!0),p.hb.a_polyindex=H(p));e=e.boundings;d=p.Jd;d.gb=U.w();d.gb.max_x=e.bb.max_x;d.gb.max_y=e.bb.max_y;d.gb.max_z=e.bb.max_z;d.gb.min_x=e.bb.min_x;d.gb.min_y=e.bb.min_y;d.gb.min_z=e.bb.min_z;T=e.rbb;
a=e.caxis_x;l=e.caxis_y;t=e.caxis_z;h=e.be_ax;d.jc=U.e(a,l,t,e.be_cen);r.scale(d.jc.Cb,h[0],d.jc.Cb);r.scale(d.jc.Db,h[1],d.jc.Db);r.scale(d.jc.Eb,h[2],d.jc.Eb);d.Xc=U.B(d.jc);r.copy(T.rbb_c,d.Nd.Da);r.copy(a,d.Nd.Cb);r.copy(l,d.Nd.Db);r.copy(t,d.Nd.Eb);e=T.rbb_s;r.scale(d.Nd.Cb,e[0],d.Nd.Cb);r.scale(d.Nd.Db,e[1],d.Nd.Db);r.scale(d.Nd.Eb,e[2],d.Nd.Eb);return p}function J(a,b,d,c,g){var h={},k=new Float32Array(3*b),e=C.c(d?b:0),l=g*b*3;k.set(a.position.subarray(l,l+3*b),0);d&&C.b(a.tbn,g*b,b,e);c&&
(d=new Float32Array(3*b),d.set(a.shade_tangs.subarray(0,3*b),0),h.a_shade_tangs=d);h.a_position=k;h.a_tbn=e;return h}function W(a,b,d){var c=2*a.base_length,g=a.uv_layers.indexOf(b);if(-1==g)return Ga.warn('uv layer "'+b+'" for mesh "'+d+'" not found'),new Float32Array(c);b=g*c;return a.texcoord.subarray(b,b+c)}function B(a,b){return-1<a.indexOf(b)?!0:!1}function ba(a,b,d,c,g,h,k,e){for(var l=!0,p=0;p<b;p++){var t=a[p*c+d];if(-1!==t){var m=g[p];-1!==m&&(h[p]=t,k[p]=m,l=!1)}}if(l)return e;P(h,k,f.Uy,
!1);for(p=a=0;4>p;p++)a+=h[p];if(.01>a)return e;for(p=0;4>p;p++)h[p]/=a;if(.01>Math.abs(h[0]-1))e[0]=k[0]+1;else for(p=0;4>p;p++)e[p]=k[p]+h[p];return e}function I(a,b){if(0==b)return 0;a=a.length;var d=a/b;d!=Math.floor(d)&&Ma.va("Array size mismatch during geometry calculation: array length="+a+", base length="+b);return d}function P(a,b,d,c){for(var g=a.length,h=g,k=!1,e=c?-1:1;1<h||k;){1<h&&(h=Math.floor(h/1.247330950103979));k=!1;for(var l=0;h+l<g;l++)if(d==f.Uy?0>e*(a[l]-a[l+h]):a[l]<a[l+h]&&
c)k=a[l],a[l]=a[l+h],a[l+h]=k,k=b[l],b[l]=b[l+h],b[l+h]=k,k=!0}}function p(a,b,d){var c=[],g=[];r.subtract(b,a,c);r.subtract(d,a,g);r.normalize(c,c);r.normalize(g,g);a=q.M(r.dot(c,g),-1,1);return Math.acos(a)}function da(a,d,c){if(b(d)){d=d.ab;for(var g=d.length/3,k=0;k<g;k++){var h=new Float32Array(9),e=d[3*k];h[0]=a[3*e];h[1]=a[3*e+1];h[2]=a[3*e+2];e=d[3*k+1];h[3]=a[3*e];h[4]=a[3*e+1];h[5]=a[3*e+2];e=d[3*k+2];h[6]=a[3*e];h[7]=a[3*e+1];h[8]=a[3*e+2];c[k]=h}}else for(k=0;k<a.length;k++)h=new Float32Array(9),
h[0]=a[9*k],h[1]=a[9*k+1],h[2]=a[9*k+2],h[3]=a[9*k+3],h[4]=a[9*k+4],h[5]=a[9*k+5],h[6]=a[9*k+6],h[7]=a[9*k+7],h[8]=a[9*k+8],c[k]=h;return c}function H(a){for(var b=new Float32Array(a.Gb),d=0;d<a.Gb;d++)b[d]=d%3/2;return b}function t(a,b,d){var c=r.dist(a,b);a=r.dist(a,d);b=r.dist(b,d);d=(c+a+b)/2;return d*(d-c)*(d-a)*(d-b)}function d(a){for(var b=new Float32Array([0,0,0,1,1,1,1,0]),d=new Float32Array(8*a),c=0;c<a;c++)d.set(b,8*c);return d}function la(a){return{name:a,Gb:0,ab:null,Va:[],hb:{a_influence:new Float32Array(0),
a_color:new Float32Array(0),a_texcoord:new Float32Array(0)},Tb:[],Jd:{gb:U.w(),jc:U.y(),Xc:U.A(),Nd:U.C()},If:null}}function na(a){var b=[],d;for(d in a)b.push(pa(d,a[d]));return b}function pa(a,b){return{jm:new (oa(a))(b),type:a}}function Aa(a,b){for(var d=0;d<a.length;d++)if(a[d].type==b)return d;return-1}function w(a,b){b=Aa(a,b);return-1==b?null:a[b].Nk}function N(a,b){b=Aa(a,b);return-1==b?null:a[b].jm}function oa(a){switch(a){case "float":return Float32Array;case "short":return Int16Array;case "unsigned_byte":return Uint8Array;
default:return Float32Array}}function Y(a){a=a.replace(/_next$/,"");a=a.replace(/param_GEOMETRY_VC_a_\w+/,"param_GEOMETRY_VC_a");switch(a){case "a_tbn":case "a_shade_tangs":return"short";case "a_color":case "a_bending_col_main":case "a_bending_col_detail":case "a_grass_size":case "a_grass_color":case "param_GEOMETRY_VC_a":case "a_polyindex":case "a_p_bb_vertex":case "a_halo_bb_vertex":case "a_bb_vertex":return"unsigned_byte";default:return"float"}}function Q(a,b,d,c){var g=Y(b);ia(b,d,a[Aa(a,g)].jm.subarray(c))}
function Ha(a,b,d){switch(Y(a)){case "float":d.set(b);break;case "short":for(a=0;a<b.length;a++)d[a]=q._49(b[a]);break;case "unsigned_byte":for(a=0;a<b.length;a++)d[a]=q._65(b[a])}return d}function ia(a,b,d){switch(Y(a)){case "float":d.set(b);break;case "short":for(a=0;a<b.length;a++)d[a]=q._3(b[a]);break;case "unsigned_byte":for(a=0;a<b.length;a++)d[a]=q._66(b[a])}return d}var Ma=Object(M.a)(a),D=Object(z.a)(a),X=Object(n.a)(a),Ga=Object(e.a)(a),Fa=C.c(),wa=C.c(),La=C.c(),ja=new Float32Array(3),
ta=new Float32Array(3),ka=new Float32Array(3),qa=m.create(),S=v.b();f.vq=10;f.Ht=20;f.Uy=0;f.lW=1;f.Yn=f.vq;var va=null;f.bo="float";f.nW="short";f.oW="unsigned_byte";f.fh=function(a){va=a};f.JI=function(a,b,d){l(a)&&g(a);var e=a.ab,p=a.Gb,h=a.Va,t={};for(f in a.hb)f in d&&!d[f].Xm||(t[f]=a.hb[f]);d=T();0<a.Tb.length&&c(a,h[0]);var f=a.If;if(e.length){var m=e.length;if(65536>=p){e=new Uint16Array(e);var B=va.UNSIGNED_SHORT}else e=new Uint32Array(e),B=va.UNSIGNED_INT}else m=p,e=null;var u=O(h,t,f);
u=na(u);for(var q={},v=0;v<u.length;v++)q[u[v].type]=0;var r={},J;for(J in t){var n=t[J],A=n.length;if(A){var H=Y(J);v=r[J]=k();v.length=A;v.Tc=I(n,p);v.offset=q[H];Q(u,J,n,q[H]);q[H]+=A}}t=h.length;for(J in h[0])if(n=h[0][J],H=Y(J),A=n.length,n=I(n,p),A)for(v=r[J]=k(),v.length=A,v.frames=t,v.Tc=n,v.offset=q[H],1<t&&(v=r[J+"_next"]=k(),v.length=A,v.frames=t,v.Tc=n,v.offset=q[H]+A),v=0;v<t;v++)n=h[v][J],H=Y(J),Q(u,J,n,q[H]),q[H]+=A;f&&(xa(f,r,u,q),d.bn=f.jt.length);d.count=m;d.Ke=e;d.Pc=u;d.Ym=B;d.mc=
r;R(d,b);K(d);d.Tb=a.Tb;return d};f.xU=c;f.hR=l;f.gR=b;f.Mx=g;f.bJ=function(a,b,d){R(a,b);a.count=d.length;a.Ke=d;a.Ym=d instanceof Uint16Array?va.UNSIGNED_SHORT:va.UNSIGNED_INT};f.aJ=u;f.Tz=F;f.mY=function(a){a.usage=va.STATIC_DRAW};f.PR=function(a){a.usage=va.DYNAMIC_DRAW};var xa=function(){var a=y.create(),b=m.create();return function(d,c,g,h){var e=d.jt,l=d.jC,p=d.sp,t=d.Nx,f=d.CI,m={a_part_ts:{data:[],Tc:4},a_part_r:{data:[],Tc:4}},B;for(B in p)m[B]={data:[],Tc:p[B].Tc};for(B in t)m[B]={data:[],
Tc:1};for(var u=0;u<e.length;u++){var q=e[u];f&&l&&!d.Uu&&(q=v.q(l,e[u],S));!f&&d.Uu&&r.subtract(e[u],l,e[u]);var J=v.l(q,a);q=v.g(q,b);var n=m.a_part_ts.data,I=m.a_part_r.data;n.push.apply(n,J);I.push.apply(I,q);for(B in p)for(J=p[B].Tc,q=0;q<J;q++)m[B].data.push(p[B].data[u*J+q]);for(B in t)m[B].data.push(t[B][0])}for(B in m)d=Y(B),Q(g,B,m[B].data,h[d]),e=k(),e.Tc=m[B].Tc,e.offset=h[d],e.Om=1,e.length=m[B].data.length,c[B]=e,h[d]+=e.length}}();f.IC=K;f.nt=function(a,b,d,c){va.bindBuffer(va.ARRAY_BUFFER,
a.be[Aa(a.be,b)].Nk);va.bufferSubData(va.ARRAY_BUFFER,q.h*c,d)};f.nN=function(a){a.Fh&&va.deleteBuffer(a.Fh);for(var b=0;b<a.be.length;b++)a.be[b].Nk&&va.deleteBuffer(a.be[b].Nk);a.be.length=0};f.gG=function(a,b){return a.submeshes[b].base_length?!1:!0};f.mC=function(a,b){for(var d=0;d<a.Va.length;d++){var c=a.Va[d].a_position;v.F(c,b,c,0);c=a.Va[d].a_tbn;C.m(c,b,c);(c=a.Va[d].a_shade_tangs)&&0<c.length&&v.z(c,b,c,0)}(d=a.hb.au_center_pos)&&d.length&&v.F(d,b,d,0);A(a.Jd,b)};f.wU=function(a,b){var d=
a.hb.au_center_pos;if(d&&d.length){var c=new Float32Array(d);v.F(c,b,c,0);for(var g=0;g<a.Va.length;g++)for(var h=0;h<c.length;h++)a.Va[g].a_position[h]+=c[h]-d[h];d.set(c)}else Ma.va('Attribute "au_center_pos" is missing in particle submesh');A(a.Jd,b)};f.MM=A;f.vU=function(a,b){var d=a.Gb,c;for(c in b){var g=b[c].length;a.hb[c]=new Float32Array(g*d);for(var h=0;h<d;h++)for(var k=0;k<g;k++)a.hb[c][h*g+k]=b[c][k]}};f.II=ca;f.QR=function(a,b,d){if(!a.Gb)return la("EMPTY");var c=d.length;65536<a.Gb*
c&&!D.TF()&&g(a,c);var k=a.ab,h=a.Gb,e=a.hb,l=a.Va;for(m in b){var p=b[m].length,t=p*h;e[m]=new Float32Array(t);for(var f=0;f<h;f++)for(t=0;t<p;t++)e[m][f*p+t]=b[m][t]}b=la("CLONE_"+c+"_SUBMESHES");b.Gb=h*c;b.ab=new Uint32Array(k.length*c);for(f=0;f<c;f++){p=k.length*f;var m=h*f;for(t=0;t<k.length;t++)b.ab[p+t]=k[t]+m}for(var B in e)for(k=e[B],t=k.length*c,p=I(k,h),b.hb[B]=new Float32Array(t),f=0;f<c;f++)m=h*p*f,b.hb[B].set(k,m);for(B in l[0])for(f=0;f<l.length;f++)for(k=l[f][B],t=k.length*c,p=I(k,
h),b.Va[f]=b.Va[f]||{},b.Va[f][B]=new Float32Array(t),t=0;t<c;t++)switch(e=d[t],m=h*p*t,B){case "a_position":v.F(k,e,b.Va[f][B],m);break;case "a_tbn":v.B(k,e,b.Va[f][B],m);break;case "a_shade_tangs":v.C(k,e,b.Va[f][B],m);break;default:Ma.va("Wrong attribute name: "+B)}L(a,b,d);return b};f.lE=L;f.bv=ha;f.nP=function(a){var b=a.Gb,c=a.Va[0].a_position,g=new Float32Array(12*b);a=new Uint32Array(4*a.ab.length);for(var k=new Float32Array(4*b),h=0;h<b;h++){g[12*h]=c[3*h];g[12*h+1]=c[3*h+1];g[12*h+2]=c[3*
h+2];g[12*h+3]=c[3*h];g[12*h+4]=c[3*h+1];g[12*h+5]=c[3*h+2];g[12*h+6]=c[3*h];g[12*h+7]=c[3*h+1];g[12*h+8]=c[3*h+2];g[12*h+9]=c[3*h];g[12*h+10]=c[3*h+1];g[12*h+11]=c[3*h+2];a[6*h]=4*h+2;a[6*h+1]=4*h+1;a[6*h+2]=4*h;a[6*h+3]=4*h+2;a[6*h+4]=4*h;a[6*h+5]=4*h+3;var e=Math.random();k[4*h]=e;k[4*h+1]=e;k[4*h+2]=e;k[4*h+3]=e}c=la("HALO");c.Va[0]={};c.Gb=4*b;c.Va[0].a_position=g;c.hb.a_halo_bb_vertex=d(b);c.hb.a_random_vals=k;c.ab=a;return c};f.KQ=B;f.zF=function(a,b,d){for(var c=[],g=0;g<a.submeshes.length;g++){var h=
ha(a,g,b,null,d,null);h.Gb&&c.push(h)}return 0==c.length?la("EMPTY"):1==c.length?c[0]:ca(c)};f.QU=function(a,b,d,c){var g=a.Ke,h=F(a,"a_position"),k=b.YR,e=b.ZR;b=b.ZO;for(var l=g,p=l.length/3,t=0;t<p;t++){var f=l[3*t],m=l[3*t+1],B=l[3*t+2],u=h[3*f+1],q=h[3*f+2],r=h[3*m+1],J=h[3*m+2],n=h[3*B+1],I=h[3*B+2];k[3*t]=(h[3*f]+h[3*m]+h[3*B])/3;k[3*t+1]=(u+r+n)/3;k[3*t+2]=(q+J+I)/3}v.F(k,d,e);d=e.length/3;for(h=0;h<d;h++)k=e[3*h]-c[0],l=e[3*h+1]-c[1],p=e[3*h+2]-c[2],b[h]=k*k+l*l+p*p;c=g;g=b.length;if(!(2>
g))for(e=g,h=!1;1<e||h;)for(1<e&&(e=Math.floor(e/1.247330950103979)),h=!1,d=0;e+d<g;d++)0>b[d]-b[d+e]&&(h=b[d],b[d]=b[d+e],b[d+e]=h,h=c,k=d,l=d+e,p=h[3*k],t=h[3*k+1],f=h[3*k+2],h[3*k]=h[3*l],h[3*k+1]=h[3*l+1],h[3*k+2]=h[3*l+2],h[3*l]=p,h[3*l+1]=t,h[3*l+2]=f,h=!0);g=c;va.bindBuffer(va.ELEMENT_ARRAY_BUFFER,a.Fh);va.bufferData(va.ELEMENT_ARRAY_BUFFER,g,va.DYNAMIC_DRAW)};f.fU=P;f.jE=function(a,b,d){for(var c=b.length/3,g=a.length/3,h=[],k=Array(3),e=Array(3),l=Array(3),t=0;t<g;t++){for(var f=a[3*t],m=
a[3*t+1],B=a[3*t+2],u=0;3>u;u++)k[u]=b[3*f+u],e[u]=b[3*m+u],l[u]=b[3*B+u];if(d){u=p(k,e,l);var q=p(e,l,k),v=Math.PI-u-q}else v=q=u=1;var J=h;var n=k;var I=l,A=[],H=[],P=[];r.subtract(e,n,A);r.subtract(I,n,H);r.cross(A,H,P);r.normalize(P,P);n=P;for(I=0;3>I;I++)A=3*m+I,H=3*B+I,J[3*f+I]=u*n[I],J[A]=q*n[I],J[H]=v*n[I]}if(d)for(var C in d)for(t=d[C],a=0;3>a;a++){b=3*t[0]+a;for(g=1;g<t.length;g++)k=3*t[g]+a,h[b]+=h[k];for(g=1;g<t.length;g++)k=3*t[g]+a,h[k]=h[b]}for(t=0;t<c;t++){d=t;C=h;a=new Float32Array(3);
for(b=0;3>b;b++)g=3*d+b,a[b]=C[g];r.normalize(a,a);for(b=0;3>b;b++)g=3*d+b,C[g]=a[b]}return h};f.kE=function(a,b,d){for(var c={},g=b.length/3,h=0;h<g;h++){var k=String(b[3*h])+String(b[3*h+1])+String(b[3*h+2]);c[k]=[]}b=a.length;for(h=0;h<b;h++)g=a[h],k=String(d[3*g])+String(d[3*g+1])+String(d[3*g+2]),k in c&&c[k].push(g);return c};f.Zz=function(a,b,d,c){var g=da(a.Va[0].a_position,a,[]);if(d){var h=a.Va[0].a_tbn;for(var k=C.f(h),e=new Float32Array(3*k),l=0;l<k;l++){var p=C.h(h,l,qa);p=r.transformQuat(q.e,
p,ja);e[3*l]=p[0];e[3*l+1]=p[1];e[3*l+2]=p[2]}h=da(e,a,[])}e=g.length;l=new Float32Array(e);k=ja;for(a=0;a<e;a++){var f=g[a];k.set(f.subarray(0,3));ta.set(f.subarray(3,6));ka.set(f.subarray(6));l[a]=Math.sqrt(t(k,ta,ka))}k=new Float32Array(e);k[0]=l[0];for(a=1;a<e;a++)k[a]=k[a-1]+l[a];e=k[l.length-1];l=[];for(a=0;a<b;a++){p=e*q._40(c);p=q.F(k,p,0,k.length-1);f=d?h[p]:g[p];var B=c;(p=ja)||(p=new Float32Array(3));var u=f[0],v=f[1],J=f[2],n=f[3],I=f[4],A=f[5],H=f[6],P=f[7];f=f[8];var ba=q._40(B);B=q._40(B);
1<ba+B&&(ba=1-ba,B=1-B);var F=1-ba-B;p[0]=F*u+ba*n+B*H;p[1]=F*v+ba*I+B*P;p[2]=F*J+ba*A+B*f;d?(l[a]=new Float32Array(4),r.normalize(p,p),p=m.rotationTo(q.e,p,qa),l[a][0]=p[0],l[a][1]=p[1],l[a][2]=p[2],l[a][3]=p[3]):(l[a]=new Float32Array(3),l[a][0]=p[0],l[a][1]=p[1],l[a][2]=p[2])}return l};f.av=H;f.OY=t;f.GF=d;f.SH=function(a,b,d){a=a.Va[0].a_position;for(var c=0;c<a.length;c+=3)a[c]=(a[c]-d[0])*b[0]+d[0],a[c+1]=(a[c+1]-d[1])*b[1]+d[1],a[c+2]=(a[c+2]-d[2])*b[2]+d[2]};f.cz=function(a,b,d){var c=a.Aa[0].Ia;
a=a.ka.qg;for(var g=1;g<a.length;g++)a[g].name==b&&(a[g].value=d);for(g=0;g<c.length;g++)if(!c[g].yh&&c[g].Rf&&!c[g].Uj){b=c[g].$a;d=Y("a_position");var h=N(b.Pc,d);va.bindBuffer(va.ARRAY_BUFFER,w(b.be,d));var k=b.mc.a_position;d=c[g];var e=a;if(k){var l=k.offset;k=k.length+l;for(var p=d.$a.Tb[0].gf.a_position,t=l;t<k;t++)h[t]=p[t-l];for(t=1;t<d.$a.Tb.length;t++){p=d.$a.Tb[t].gf.a_position;var f=e[t].value;if(f)for(var m=l;m<k;m++)h[m]+=f*p[m-l]}va.bufferSubData(va.ARRAY_BUFFER,q.h*l,h.subarray(l))}h=
Y("a_tbn");d=N(b.Pc,h);va.bindBuffer(va.ARRAY_BUFFER,w(b.be,h));e=b.mc.a_tbn;b=d;d=a;if(e){h=e.offset;e=e.length+h;l=c[g].$a.Tb;k=l[0].gf.a_tbn;t=C.i(Fa);for(p=h;p<e;p+=C.a){f=C.i(La);m=(p-h)/C.a;for(var B=1;B<l.length;B++){var u=d[B].value;if(u){var v=C.e(l[B].gf.a_tbn,m,wa);u=C.p(t,v,u,wa);C.k(u,t,f)}}m=C.e(k,m,wa);f=C.k(f,m,wa);b[p]=q._3(f[0]);b[p+1]=q._3(f[1]);b[p+2]=q._3(f[2]);b[p+3]=q._3(f[3])}va.bufferSubData(va.ARRAY_BUFFER,q.h*h,b.subarray(h))}}};f.check_shape_keys=function(a){return a.ka.Rf};
f.get_shape_keys_names=function(a){var b=[];if(a.ka)for(var d=1;d<a.ka.qg.length;d++)b.push(a.ka.qg[d].name);return b};f.get_shape_key_value=function(a,b){if(a.ka)for(var d=1;d<a.ka.qg.length;d++)if(b==a.ka.qg[d].name)return a.ka.qg[d].value;return 0};f.uA=function(a,b){if(a=a.ka.qg)for(var d=1;d<a.length;d++)if(a[d].name==b)return!0;return!1};f.ck=function(a){return a&&a.ka&&a.ka.df?!0:!1};f.draw_line=function(a,b,d){var c=a.$a;if(c){for(var g=d?b.length/3/2:b.length/3-1,h=new Float32Array(12*g),
k=new Float32Array(12*g),e=new Uint16Array(6*g),l=0;l<g;l++){if(d)var p=6*l,t=6*l+3;else p=3*l,t=3*(l+1);var m=b[p],B=b[p+1];p=b[p+2];var u=b[t],q=b[t+1];t=b[t+2];var v=u-m,r=q-B,J=t-p;h[12*l]=m;h[12*l+1]=B;h[12*l+2]=p;k[12*l]=v;k[12*l+1]=r;k[12*l+2]=J;h[12*l+3]=u;h[12*l+4]=q;h[12*l+5]=t;k[12*l+3]=-v;k[12*l+4]=-r;k[12*l+5]=-J;h[12*l+6]=m;h[12*l+7]=B;h[12*l+8]=p;k[12*l+6]=-v;k[12*l+7]=-r;k[12*l+8]=-J;h[12*l+9]=u;h[12*l+10]=q;h[12*l+11]=t;k[12*l+9]=v;k[12*l+10]=r;k[12*l+11]=J;e[6*l]=4*l;e[6*l+1]=4*
l+1;e[6*l+2]=4*l+2;e[6*l+3]=4*l;e[6*l+4]=4*l+3;e[6*l+5]=4*l+1}d=0;for(var n in c.mc)b=c.mc[n],d+=h.length/3*b.Tc;b={};b["float"]=d;d=c.Pc=na(b);f.bJ(c,a.gi,e);a=0;for(n in c.mc)switch(b=c.mc[n],n){case "a_position":Q(d,n,h,a);b.offset=a;b.length=h.length;a+=b.length;break;case "a_direction":Q(d,n,k,a);b.offset=a;b.length=k.length;a+=b.length;break;default:b.offset=a,b.length=h.length/3*b.Tc,e=new Float32Array(b.length),Q(d,n,e,a),a+=b.length}K(c)}};f.uN=function(a){if(a){var b=T();if(a.Ke)switch(a.Ym){case va.UNSIGNED_SHORT:b.Ke=
new Uint16Array(a.Ke);break;case va.UNSIGNED_INT:b.Ke=new Uint32Array(a.Ke)}else b.Ke=null;for(var d=b,c=a.Pc,g=[],h=0;h<c.length;h++){var k=c[h].jm,e=c[h].type;g.push({jm:new k.constructor(k),type:e})}d.Pc=g;b.Ym=a.Ym;b.count=a.count;b.mc=q.O(a.mc);b.usage=a.usage;b.uo=a.uo;b.wo=a.wo;b.Fh=null;b.Sv=q.O(a.Sv);b.Tb=q.O(a.Tb);b.bn=a.bn;b.sh=a.sh}else b=null;return b};f.Hh=la;f.wN=function(a){var b=la(a.name);b.Gb=a.Gb;b.ab=q.O(a.ab);b.Va=q.O(a.Va);b.hb=q.O(a.hb);b.Tb=q.O(a.Tb);U.o(a.Jd.gb,b.Jd.gb);
U.s(a.Jd.jc,b.Jd.jc);U.u(a.Jd.Xc,b.Jd.Xc);U.v(a.Jd.Nd,b.Jd.Nd);b.If=q.O(a.If);return b};f.reset=function(){va=null};f.aR=na;f.jT=Aa;f.HX=w;f.kA=N;f.bQ=oa;f.Lo=Y;f.$F=function(a){switch(Y(a)){case "float":return q.h;case "short":return q.l;case "unsigned_byte":return q.g;default:return q.h}};f.rQ=function(a){switch(Y(a)){case "float":return va.FLOAT;case "short":return va.SHORT;case "unsigned_byte":return va.UNSIGNED_BYTE;default:return va.FLOAT}};f.wt=Q;f.VY=function(a,b){switch(Y(a)){case "short":return q._49(b);
case "unsigned_byte":return q._65(b)}return b};f.UY=function(a,b){switch(Y(a)){case "short":return q._3(b);case "unsigned_byte":return q._66(b)}return b};f.UW=Ha;f.TW=ia;f.Si=function(){return{a_position:new Float32Array(0),a_tbn:C.c(0)}}});w.a=f},function(D,w,f){function M(e){e[0]=1;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=1;e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[10]=1;e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;return e}function U(e,f,n){var m=e[0],q=e[1],r=e[2],C=e[3],a=e[4],T=e[5],k=e[6],c=e[7],l=e[8],b=e[9],g=e[10],
E=e[11],z=e[12],u=e[13],F=e[14];e=e[15];var R=f[0],O=f[1],K=f[2],A=f[3];n[0]=R*m+O*a+K*l+A*z;n[1]=R*q+O*T+K*b+A*u;n[2]=R*r+O*k+K*g+A*F;n[3]=R*C+O*c+K*E+A*e;R=f[4];O=f[5];K=f[6];A=f[7];n[4]=R*m+O*a+K*l+A*z;n[5]=R*q+O*T+K*b+A*u;n[6]=R*r+O*k+K*g+A*F;n[7]=R*C+O*c+K*E+A*e;R=f[8];O=f[9];K=f[10];A=f[11];n[8]=R*m+O*a+K*l+A*z;n[9]=R*q+O*T+K*b+A*u;n[10]=R*r+O*k+K*g+A*F;n[11]=R*C+O*c+K*E+A*e;R=f[12];O=f[13];K=f[14];A=f[15];n[12]=R*m+O*a+K*l+A*z;n[13]=R*q+O*T+K*b+A*u;n[14]=R*r+O*k+K*g+A*F;n[15]=R*C+O*c+K*E+A*
e;return n}Object.defineProperty(w,"__esModule",{value:!0});w.create=function(){var e=new z(16);e[0]=1;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=1;e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[10]=1;e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;return e};w.clone=function(e){var f=new z(16);f[0]=e[0];f[1]=e[1];f[2]=e[2];f[3]=e[3];f[4]=e[4];f[5]=e[5];f[6]=e[6];f[7]=e[7];f[8]=e[8];f[9]=e[9];f[10]=e[10];f[11]=e[11];f[12]=e[12];f[13]=e[13];f[14]=e[14];f[15]=e[15];return f};w.copy=function(e,f){f[0]=e[0];f[1]=e[1];f[2]=e[2];f[3]=e[3];
f[4]=e[4];f[5]=e[5];f[6]=e[6];f[7]=e[7];f[8]=e[8];f[9]=e[9];f[10]=e[10];f[11]=e[11];f[12]=e[12];f[13]=e[13];f[14]=e[14];f[15]=e[15];return f};w.identity=M;w.transpose=function(e,f){if(f===e){var m=e[1],v=e[2],q=e[3],r=e[6],n=e[7],a=e[11];f[1]=e[4];f[2]=e[8];f[3]=e[12];f[4]=m;f[6]=e[9];f[7]=e[13];f[8]=v;f[9]=r;f[11]=e[14];f[12]=q;f[13]=n;f[14]=a}else f[0]=e[0],f[1]=e[4],f[2]=e[8],f[3]=e[12],f[4]=e[1],f[5]=e[5],f[6]=e[9],f[7]=e[13],f[8]=e[2],f[9]=e[6],f[10]=e[10],f[11]=e[14],f[12]=e[3],f[13]=e[7],f[14]=
e[11],f[15]=e[15];return f};w.invert=function(e,f){var m=e[0],v=e[1],q=e[2],r=e[3],n=e[4],a=e[5],T=e[6],k=e[7],c=e[8],l=e[9],b=e[10],g=e[11],E=e[12],z=e[13],u=e[14];e=e[15];var F=m*a-v*n,R=m*T-q*n,O=m*k-r*n,K=v*T-q*a,A=v*k-r*a,ca=q*k-r*T,L=c*z-l*E,ha=c*u-b*E,J=c*e-g*E,W=l*u-b*z,B=l*e-g*z,ba=b*e-g*u,I=F*ba-R*B+O*W+K*J-A*ha+ca*L;if(!I)return null;I=1/I;f[0]=(a*ba-T*B+k*W)*I;f[1]=(q*B-v*ba-r*W)*I;f[2]=(z*ca-u*A+e*K)*I;f[3]=(b*A-l*ca-g*K)*I;f[4]=(T*J-n*ba-k*ha)*I;f[5]=(m*ba-q*J+r*ha)*I;f[6]=(u*O-E*ca-
e*R)*I;f[7]=(c*ca-b*O+g*R)*I;f[8]=(n*B-a*J+k*L)*I;f[9]=(v*J-m*B-r*L)*I;f[10]=(E*A-z*O+e*F)*I;f[11]=(l*O-c*A-g*F)*I;f[12]=(a*ha-n*W-T*L)*I;f[13]=(m*W-v*ha+q*L)*I;f[14]=(z*R-E*K-u*F)*I;f[15]=(c*K-l*R+b*F)*I;return f};w.adjoint=function(e,f){var m=e[0],v=e[1],q=e[2],r=e[3],n=e[4],a=e[5],T=e[6],k=e[7],c=e[8],l=e[9],b=e[10],g=e[11],E=e[12],z=e[13],u=e[14];e=e[15];f[0]=a*(b*e-g*u)-l*(T*e-k*u)+z*(T*g-k*b);f[1]=-(v*(b*e-g*u)-l*(q*e-r*u)+z*(q*g-r*b));f[2]=v*(T*e-k*u)-a*(q*e-r*u)+z*(q*k-r*T);f[3]=-(v*(T*g-
k*b)-a*(q*g-r*b)+l*(q*k-r*T));f[4]=-(n*(b*e-g*u)-c*(T*e-k*u)+E*(T*g-k*b));f[5]=m*(b*e-g*u)-c*(q*e-r*u)+E*(q*g-r*b);f[6]=-(m*(T*e-k*u)-n*(q*e-r*u)+E*(q*k-r*T));f[7]=m*(T*g-k*b)-n*(q*g-r*b)+c*(q*k-r*T);f[8]=n*(l*e-g*z)-c*(a*e-k*z)+E*(a*g-k*l);f[9]=-(m*(l*e-g*z)-c*(v*e-r*z)+E*(v*g-r*l));f[10]=m*(a*e-k*z)-n*(v*e-r*z)+E*(v*k-r*a);f[11]=-(m*(a*g-k*l)-n*(v*g-r*l)+c*(v*k-r*a));f[12]=-(n*(l*u-b*z)-c*(a*u-T*z)+E*(a*b-T*l));f[13]=m*(l*u-b*z)-c*(v*u-q*z)+E*(v*b-q*l);f[14]=-(m*(a*u-T*z)-n*(v*u-q*z)+E*(v*T-q*a));
f[15]=m*(a*b-T*l)-n*(v*b-q*l)+c*(v*T-q*a);return f};w.determinant=function(e){var f=e[0],n=e[1],v=e[2],q=e[3],r=e[4],y=e[5],a=e[6],z=e[7],k=e[8],c=e[9],l=e[10],b=e[11],g=e[12],E=e[13],ea=e[14];e=e[15];return(f*y-n*r)*(l*e-b*ea)-(f*a-v*r)*(c*e-b*E)+(f*z-q*r)*(c*ea-l*E)+(n*a-v*y)*(k*e-b*g)-(n*z-q*y)*(k*ea-l*g)+(v*z-q*a)*(k*E-c*g)};w.multiply=U;f.d(w,"mul",function(){return U});w.translate=function(e,f,n){var m=f[0],q=f[1];f=f[2];if(e===n)n[12]=e[0]*m+e[4]*q+e[8]*f+e[12],n[13]=e[1]*m+e[5]*q+e[9]*f+e[13],
n[14]=e[2]*m+e[6]*q+e[10]*f+e[14],n[15]=e[3]*m+e[7]*q+e[11]*f+e[15];else{var r=e[0];var C=e[1];var a=e[2];var z=e[3];var k=e[4];var c=e[5];var l=e[6];var b=e[7];var g=e[8];var E=e[9];var ea=e[10];var u=e[11];n[0]=r;n[1]=C;n[2]=a;n[3]=z;n[4]=k;n[5]=c;n[6]=l;n[7]=b;n[8]=g;n[9]=E;n[10]=ea;n[11]=u;n[12]=r*m+k*q+g*f+e[12];n[13]=C*m+c*q+E*f+e[13];n[14]=a*m+l*q+ea*f+e[14];n[15]=z*m+b*q+u*f+e[15]}return n};w.scale=function(e,f,n){var m=f[0],q=f[1];f=f[2];n[0]=e[0]*m;n[1]=e[1]*m;n[2]=e[2]*m;n[3]=e[3]*m;n[4]=
e[4]*q;n[5]=e[5]*q;n[6]=e[6]*q;n[7]=e[7]*q;n[8]=e[8]*f;n[9]=e[9]*f;n[10]=e[10]*f;n[11]=e[11]*f;n[12]=e[12];n[13]=e[13];n[14]=e[14];n[15]=e[15];return n};w.rotate=function(e,f,C,v){var m=C[0],r=C[1];C=C[2];var y=Math.sqrt(m*m+r*r+C*C);if(Math.abs(y)<n)return null;y=1/y;m*=y;r*=y;C*=y;var a=Math.sin(f);var z=Math.cos(f);var k=1-z;f=e[0];y=e[1];var c=e[2];var l=e[3];var b=e[4];var g=e[5];var E=e[6];var ea=e[7];var u=e[8];var F=e[9];var R=e[10];var O=e[11];var K=m*m*k+z;var A=r*m*k+C*a;var ca=C*m*k-r*
a;var L=m*r*k-C*a;var ha=r*r*k+z;var J=C*r*k+m*a;var W=m*C*k+r*a;m=r*C*k-m*a;r=C*C*k+z;v[0]=f*K+b*A+u*ca;v[1]=y*K+g*A+F*ca;v[2]=c*K+E*A+R*ca;v[3]=l*K+ea*A+O*ca;v[4]=f*L+b*ha+u*J;v[5]=y*L+g*ha+F*J;v[6]=c*L+E*ha+R*J;v[7]=l*L+ea*ha+O*J;v[8]=f*W+b*m+u*r;v[9]=y*W+g*m+F*r;v[10]=c*W+E*m+R*r;v[11]=l*W+ea*m+O*r;e!==v&&(v[12]=e[12],v[13]=e[13],v[14]=e[14],v[15]=e[15]);return v};w.rotateX=function(e,f,n){var m=Math.sin(f);f=Math.cos(f);var q=e[4],r=e[5],y=e[6],a=e[7],C=e[8],k=e[9],c=e[10],l=e[11];e!==n&&(n[0]=
e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]);n[4]=q*f+C*m;n[5]=r*f+k*m;n[6]=y*f+c*m;n[7]=a*f+l*m;n[8]=C*f-q*m;n[9]=k*f-r*m;n[10]=c*f-y*m;n[11]=l*f-a*m;return n};w.rotateY=function(e,f,n){var m=Math.sin(f);f=Math.cos(f);var q=e[0],r=e[1],y=e[2],a=e[3],C=e[8],k=e[9],c=e[10],l=e[11];e!==n&&(n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]);n[0]=q*f-C*m;n[1]=r*f-k*m;n[2]=y*f-c*m;n[3]=a*f-l*m;n[8]=q*m+C*f;n[9]=r*m+k*f;n[10]=
y*m+c*f;n[11]=a*m+l*f;return n};w.rotateZ=function(e,f,n){var m=Math.sin(f);f=Math.cos(f);var q=e[0],r=e[1],y=e[2],a=e[3],C=e[4],k=e[5],c=e[6],l=e[7];e!==n&&(n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]);n[0]=q*f+C*m;n[1]=r*f+k*m;n[2]=y*f+c*m;n[3]=a*f+l*m;n[4]=C*f-q*m;n[5]=k*f-r*m;n[6]=c*f-y*m;n[7]=l*f-a*m;return n};w.fromTranslation=function(e,f){f[0]=1;f[1]=0;f[2]=0;f[3]=0;f[4]=0;f[5]=1;f[6]=0;f[7]=0;f[8]=0;f[9]=0;f[10]=1;f[11]=0;f[12]=e[0];f[13]=e[1];
f[14]=e[2];f[15]=1;return f};w.fromScaling=function(e,f){f[0]=e[0];f[1]=0;f[2]=0;f[3]=0;f[4]=0;f[5]=e[1];f[6]=0;f[7]=0;f[8]=0;f[9]=0;f[10]=e[2];f[11]=0;f[12]=0;f[13]=0;f[14]=0;f[15]=1;return f};w.fromRotation=function(e,f,C){var m=f[0],q=f[1];f=f[2];var r=Math.sqrt(m*m+q*q+f*f);if(Math.abs(r)<n)return null;r=1/r;m*=r;q*=r;f*=r;r=Math.sin(e);e=Math.cos(e);var y=1-e;C[0]=m*m*y+e;C[1]=q*m*y+f*r;C[2]=f*m*y-q*r;C[3]=0;C[4]=m*q*y-f*r;C[5]=q*q*y+e;C[6]=f*q*y+m*r;C[7]=0;C[8]=m*f*y+q*r;C[9]=q*f*y-m*r;C[10]=
f*f*y+e;C[11]=0;C[12]=0;C[13]=0;C[14]=0;C[15]=1;return C};w.fromXRotation=function(e,f){var m=Math.sin(e);e=Math.cos(e);f[0]=1;f[1]=0;f[2]=0;f[3]=0;f[4]=0;f[5]=e;f[6]=m;f[7]=0;f[8]=0;f[9]=-m;f[10]=e;f[11]=0;f[12]=0;f[13]=0;f[14]=0;f[15]=1;return f};w.fromYRotation=function(e,f){var m=Math.sin(e);e=Math.cos(e);f[0]=e;f[1]=0;f[2]=-m;f[3]=0;f[4]=0;f[5]=1;f[6]=0;f[7]=0;f[8]=m;f[9]=0;f[10]=e;f[11]=0;f[12]=0;f[13]=0;f[14]=0;f[15]=1;return f};w.fromZRotation=function(e,f){var m=Math.sin(e);e=Math.cos(e);
f[0]=e;f[1]=m;f[2]=0;f[3]=0;f[4]=-m;f[5]=e;f[6]=0;f[7]=0;f[8]=0;f[9]=0;f[10]=1;f[11]=0;f[12]=0;f[13]=0;f[14]=0;f[15]=1;return f};w.fromRotationTranslation=function(e,f,n){var m=e[0],q=e[1],r=e[2],y=e[3],a=m+m,C=q+q,k=r+r;e=m*a;var c=m*C;m*=k;var l=q*C;q*=k;r*=k;a=y*a;C=y*C;y*=k;n[0]=1-(l+r);n[1]=c+y;n[2]=m-C;n[3]=0;n[4]=c-y;n[5]=1-(e+r);n[6]=q+a;n[7]=0;n[8]=m+C;n[9]=q-a;n[10]=1-(e+l);n[11]=0;n[12]=f[0];n[13]=f[1];n[14]=f[2];n[15]=1;return n};w.fromRotationTranslationScale=function(e,f,n,v){var m=
e[0],r=e[1],y=e[2],a=e[3],C=m+m,k=r+r,c=y+y;e=m*C;var l=m*k;m*=c;var b=r*k;r*=c;y*=c;C=a*C;k=a*k;a*=c;c=n[0];var g=n[1];n=n[2];v[0]=(1-(b+y))*c;v[1]=(l+a)*c;v[2]=(m-k)*c;v[3]=0;v[4]=(l-a)*g;v[5]=(1-(e+y))*g;v[6]=(r+C)*g;v[7]=0;v[8]=(m+k)*n;v[9]=(r-C)*n;v[10]=(1-(e+b))*n;v[11]=0;v[12]=f[0];v[13]=f[1];v[14]=f[2];v[15]=1;return v};w.fromRotationTranslationScaleOrigin=function(e,f,n,v,q){var m=e[0],y=e[1],a=e[2],C=e[3],k=m+m,c=y+y,l=a+a;e=m*k;var b=m*c;m*=l;var g=y*c;y*=l;a*=l;k=C*k;c=C*c;C*=l;l=n[0];
var E=n[1];n=n[2];var z=v[0],u=v[1];v=v[2];q[0]=(1-(g+a))*l;q[1]=(b+C)*l;q[2]=(m-c)*l;q[3]=0;q[4]=(b-C)*E;q[5]=(1-(e+a))*E;q[6]=(y+k)*E;q[7]=0;q[8]=(m+c)*n;q[9]=(y-k)*n;q[10]=(1-(e+g))*n;q[11]=0;q[12]=f[0]+z-(q[0]*z+q[4]*u+q[8]*v);q[13]=f[1]+u-(q[1]*z+q[5]*u+q[9]*v);q[14]=f[2]+v-(q[2]*z+q[6]*u+q[10]*v);q[15]=1;return q};w.fromQuat=function(e,f){var m=e[0],n=e[1],q=e[2];e=e[3];var r=m+m,y=n+n,a=q+q;m*=r;var z=n*r;n*=y;var k=q*r,c=q*y;q*=a;r=e*r;y=e*y;e*=a;f[0]=1-n-q;f[1]=z+e;f[2]=k-y;f[3]=0;f[4]=z-
e;f[5]=1-m-q;f[6]=c+r;f[7]=0;f[8]=k+y;f[9]=c-r;f[10]=1-m-n;f[11]=0;f[12]=0;f[13]=0;f[14]=0;f[15]=1;return f};w.frustum=function(e,f,n,v,q,r,y){var a=1/(f-e),m=1/(v-n),k=1/(q-r);y[0]=2*q*a;y[1]=0;y[2]=0;y[3]=0;y[4]=0;y[5]=2*q*m;y[6]=0;y[7]=0;y[8]=(f+e)*a;y[9]=(v+n)*m;y[10]=(r+q)*k;y[11]=-1;y[12]=0;y[13]=0;y[14]=r*q*2*k;y[15]=0;return y};w.perspective=function(e,f,n,v,q){e=1/Math.tan(e/2);var m=1/(n-v);q[0]=e/f;q[1]=0;q[2]=0;q[3]=0;q[4]=0;q[5]=e;q[6]=0;q[7]=0;q[8]=0;q[9]=0;q[10]=(v+n)*m;q[11]=-1;q[12]=
0;q[13]=0;q[14]=2*v*n*m;q[15]=0;return q};w.perspectiveFromFieldOfView=function(e,f,n,v){var m=Math.tan(e.upDegrees*Math.PI/180),r=Math.tan(e.downDegrees*Math.PI/180),y=Math.tan(e.leftDegrees*Math.PI/180);e=Math.tan(e.rightDegrees*Math.PI/180);var a=2/(y+e),C=2/(m+r);v[0]=a;v[1]=0;v[2]=0;v[3]=0;v[4]=0;v[5]=C;v[6]=0;v[7]=0;v[8]=-((y-e)*a*.5);v[9]=(m-r)*C*.5;v[10]=n/(f-n);v[11]=-1;v[12]=0;v[13]=0;v[14]=n*f/(f-n);v[15]=0;return v};w.ortho=function(e,f,n,v,q,r,y){var a=1/(e-f),m=1/(n-v),k=1/(q-r);y[0]=
-2*a;y[1]=0;y[2]=0;y[3]=0;y[4]=0;y[5]=-2*m;y[6]=0;y[7]=0;y[8]=0;y[9]=0;y[10]=2*k;y[11]=0;y[12]=(e+f)*a;y[13]=(v+n)*m;y[14]=(r+q)*k;y[15]=1;return y};w.lookAt=function(e,f,C,v){var m=e[0],r=e[1];e=e[2];var y=C[0];var a=C[1];var z=C[2];var k=f[0];C=f[1];var c=f[2];if(Math.abs(m-k)<n&&Math.abs(r-C)<n&&Math.abs(e-c)<n)return M(v);f=m-k;C=r-C;k=e-c;var l=1/Math.sqrt(f*f+C*C+k*k);f*=l;C*=l;k*=l;c=a*k-z*C;z=z*f-y*k;y=y*C-a*f;(l=Math.sqrt(c*c+z*z+y*y))?(l=1/l,c*=l,z*=l,y*=l):y=z=c=0;a=C*y-k*z;var b=k*c-f*
y;var g=f*z-C*c;(l=Math.sqrt(a*a+b*b+g*g))?(l=1/l,a*=l,b*=l,g*=l):g=b=a=0;v[0]=c;v[1]=a;v[2]=f;v[3]=0;v[4]=z;v[5]=b;v[6]=C;v[7]=0;v[8]=y;v[9]=g;v[10]=k;v[11]=0;v[12]=-(c*m+z*r+y*e);v[13]=-(a*m+b*r+g*e);v[14]=-(f*m+C*r+k*e);v[15]=1;return v};w.str=function(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"};w.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],
2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2)+Math.pow(e[9],2)+Math.pow(e[10],2)+Math.pow(e[11],2)+Math.pow(e[12],2)+Math.pow(e[13],2)+Math.pow(e[14],2)+Math.pow(e[15],2))};var n=1E-7,z="undefined"!==typeof Float32Array?Float32Array:Array},function(D,w,f){D=f(0);var M=f(16),U=f(14),n=f(4),z=f(71),e=f(45),m=f(72),C=f(28),v=f(20),q=f(8),r=f(11),y=f(17),a=f(6),T=f(2),k=f(37),c=f(3);f=Object(D.a)("__renderer",function(f,b){function g(b){for(var d=
b.qa,g=b.vb,k=null,e=a.j(d.na,Aa),f=0;f<g.length;f++){var l=g[f];if(l.Ec){var p=l.ec,t=l.jb;if(p.qj!=k){H.useProgram(p.qj);k=b;for(var m=d,u=p,n=u.XI,q=n.length;q--;){var r=n[q];r.Jo(H,r.lf,k,m)}if(u.ip&&!u.Dw)for(u.wB.length||F(u),u=u.wB,n=u.length;n--;)r=u[n],r.Jo(H,r.lf,k,m);k=p.qj}l.Yf?(H.enable(H.SAMPLE_ALPHA_TO_COVERAGE),b.Ob||H.enable(H.BLEND)):(H.disable(H.SAMPLE_ALPHA_TO_COVERAGE),b.Ob||H.disable(H.BLEND));for(l=0;l<t.length;l++)if(n=t[l],n.Ec){u=n.$g;m=n.fb;L.rU(m);L.wG()&&"DEBUG_VIEW"==
m.type&&(m.pr=T._51(R.DM(m.vo),m.pr,1,15));if(oa.alpha_sort&&m.Uf){r=u;n=n.Sv;q=e;var v=m.$a;if(c.dist(q,n.MJ)>oa.alpha_sort_threshold*Math.min(n.GM,1)||r.Gr)J.QU(v,n,r.na,q),c.copy(q,n.MJ),r.Gr=!1}r=b;n=m;q=p;for(var I=q.YI,A=I.length;A--;)v=I[A],v.Jo(H,v.lf,u,n);if(q.ip&&!q.Dw){q.ss.length||F(q);I=q.ss;for(A=I.length;A--;)v=I[A],v.Jo(H,v.lf,u,n);q.ip=!1}H.depthMask(n.Ab);n.pb?H.enable(H.CULL_FACE):H.disable(H.CULL_FACE);v=n.Ua;I=H;for(A=0;A<v.length;A++){var P=v[A];I.activeTexture(I.TEXTURE0+A);
I.bindTexture(P.Vb,P.hc);P.Ee&&I.generateMipmap(P.Vb)}if(r.type==W.Ve||r.type==W.Tk){u=r;q=q.em;I=u.qa.wc;v=I.hc;I=I.Vb;A=u.th;for(P=0;6>P;P++){var ba=ea(P);oa.pz?(H.bindTexture(H.TEXTURE_CUBE_MAP,v),H.texImage2D(ba,0,H.RGBA,1,1,0,H.RGBA,H.UNSIGNED_BYTE,da)):(H.uniformMatrix4fv(q.u_cube_view_matrix,!1,A[P]),H.uniform4fv(q.u_sky_tex_fac,u.Ip),H.uniform3fv(q.u_sky_tex_color,u.Gp),H.uniform1f(q.u_sky_tex_dvar,u.Hp),H.uniform3fv(q.u_horizon_color,u.we),H.uniform3fv(q.u_zenith_color,u.Fe),H.framebufferTexture2D(H.FRAMEBUFFER,
H.COLOR_ATTACHMENT0,ba,v,0),pa(n,0));if(u.hp&&5!=P){ba=u;var y=P,E=N;oa.pz?E.set(da):(H.readPixels(191,191,1,1,H.RGBA,H.UNSIGNED_BYTE,E),255!=E[0]&&255!=E[1]&&255!=E[2]||H.readPixels(191,220,1,1,H.RGBA,H.UNSIGNED_BYTE,E));var C=E[0],z=E[1];E=E[2];C/=255;z/=255;E/=255;4===y?(ba.eg[3]=C,ba.eg[7]=z,ba.eg[11]=E):(ba.eg[4*y]=C,ba.eg[4*y+1]=z,ba.eg[4*y+2]=E)}}oa.Vx&&(H.bindTexture(I,v),H.generateMipmap(I),H.texParameteri(I,H.TEXTURE_MIN_FILTER,B.Hi));H.bindFramebuffer(H.FRAMEBUFFER,null);r.el+=6}else if(r.type==
W.ao){u=n;n=q.em;v=r.qa.wc;q=v.hc;I=v.Vb;v=r.th;oa.Vx&&(H.activeTexture(H.TEXTURE7),H.bindTexture(I,q),H.generateMipmap(I),H.texParameteri(I,H.TEXTURE_MIN_FILTER,B.Hi));for(I=0;5>I;++I)for(H.viewport(0,0,128*Math.pow(.5,I),128*Math.pow(.5,I)),A=I/4,P=0;6>P;P++)ba=ea(P),H.uniformMatrix4fv(n.u_cube_view_matrix,!1,v[P]),H.uniform1f(n.u_roughness,A),H.framebufferTexture2D(H.FRAMEBUFFER,H.COLOR_ATTACHMENT0,ba,q,I),pa(u,0);r.el+=30}else pa(n,u.ny),r.el++;L.tU(m);L.wG()&&"MAIN"==m.type&&R.EM(m.id,m.fg)}}}}
function l(a){if(a){var b=(a.Ub?H.COLOR_BUFFER_BIT:0)|(a.Yb?H.DEPTH_BUFFER_BIT:0);if(!b)return;switch(a.type){case W.He:a=p;break;case W.ee:a=ba;break;case W.Gg:a=I;break;case W.zf:case W.Vh:case W.Xn:a=P;break;case W.ic:case W.Xh:case W.Aq:case W.Lt:a=p;break;default:a=oa.background_color}}else b=H.COLOR_BUFFER_BIT|H.DEPTH_BUFFER_BIT,a=oa.background_color;H.colorMask(!0,!0,!0,!0);H.depthMask(!0);H.clearColor(a[0],a[1],a[2],a[3]);H.clear(b)}function ea(a){switch(a){case 0:return H.TEXTURE_CUBE_MAP_POSITIVE_X;
case 1:return H.TEXTURE_CUBE_MAP_NEGATIVE_X;case 2:return H.TEXTURE_CUBE_MAP_POSITIVE_Y;case 3:return H.TEXTURE_CUBE_MAP_NEGATIVE_Y;case 4:return H.TEXTURE_CUBE_MAP_POSITIVE_Z;case 5:return H.TEXTURE_CUBE_MAP_NEGATIVE_Z}}function u(a){var b=ha.lA(),c=a.Jq,g=a.$a,k=g.mc;a.Sf.length=0;var e=1;for(f in k)e=Math.max(e,k[f].frames);for(k=0;k<e;k++){var f=b.createVertexArray();na(f);g.Fh&&H.bindBuffer(H.ELEMENT_ARRAY_BUFFER,g.Fh);for(var l=0;l<g.be.length;l++){H.bindBuffer(H.ARRAY_BUFFER,g.be[l].Nk);for(var p=
0;p<c.length;p++){var t=c[p];t.qy==g.be[l].type&&(H.enableVertexAttribArray(t.lf),H.vertexAttribPointer(t.lf,t.Tc,t.Mo,t.Mo==H.FLOAT?!1:!0,0,t.gu+t.iv*k),d(t.lf,t.Om))}}na(null);a.Sf.push(f)}}function F(b){var d=b.em,c=b.YI,g=b.ss,k=b.XI,e=b.wB;c.length=0;g.length=0;k.length=0;e.length=0;for(var f in d){var l=!1,p=null,t=null;switch(f){case "u_proj_matrix":case "u_proj_matrix_frag":p=function(a,b,d,c){a.uniformMatrix4fv(b,!1,c.gc)};l=!0;break;case "u_view_refl_matrix":p=function(a,b,d,c){a.uniformMatrix4fv(b,
!1,c.pq)};l=!0;break;case "u_view_tsr":case "u_view_tsr_frag":p=function(a,b,d,c){c.ad?a.uniformMatrix3fv(b,!1,c.Fs):a.uniformMatrix3fv(b,!1,c.Ag)};l=!0;break;case "u_view_tsr_inverse":p=function(a,b,d,c){c.ad?a.uniformMatrix3fv(b,!1,c.Yw):a.uniformMatrix3fv(b,!1,c.ty)};l=!0;break;case "u_shadow_cast_billboard_view_tsr":p=function(a,b,d,c){a.uniformMatrix3fv(b,!1,c.Ts)};l=!0;break;case "u_view_proj_prev":p=function(a,b,d,c){a.uniformMatrix4fv(b,!1,c.AB)};l=!0;break;case "u_view_proj_matrix":p=function(a,
b,d,c){a.uniformMatrix4fv(b,!1,c.zg)};l=!0;break;case "u_view_proj_inverse":p=function(a,b,d,c){a.uniformMatrix4fv(b,!1,c.sy)};l=!0;break;case "u_sky_vp_inverse":p=function(a,b,d,c){a.uniformMatrix4fv(b,!1,c.Ph)};l=!0;break;case "u_camera_eye":case "u_camera_eye_frag":p=function(b,d,c,g){b.uniform3fv(d,a.j(g.na,Aa))};l=!0;break;case "u_camera_quat":p=function(b,d,c,g){b.uniform4fv(d,a.g(g.na,w))};l=!0;break;case "u_view_max_depth":p=function(a,b,d,c){a.uniform1f(b,c.far)};l=!0;break;case "u_camera_range":p=
function(a,b,d,c){a.uniform2f(b,c.near,c.far)};l=!0;break;case "u_csm_center_dists":p=function(a,b,d,c){a.uniform4fv(b,c.Cu)};break;case "u_height":p=function(a,b,d,c){a.uniform1f(b,c.height)};l=!0;break;case "u_pcf_blur_radii":p=function(a,b,d,c){a.uniform4fv(b,c.tp)};break;case "u_dof_dist":p=function(a,b,d,c){c.dof_on?a.uniform1f(b,c.dof_distance):a.uniform1f(b,0)};l=!0;break;case "u_dof_front_start":p=function(a,b,d,c){a.uniform1f(b,c.dof_front_start)};l=!0;break;case "u_dof_front_end":p=function(a,
b,d,c){a.uniform1f(b,c.dof_front_end)};l=!0;break;case "u_dof_rear_start":p=function(a,b,d,c){a.uniform1f(b,c.dof_rear_start)};l=!0;break;case "u_dof_rear_end":p=function(a,b,d,c){a.uniform1f(b,c.dof_rear_end)};l=!0;break;case "u_dof_bokeh_intensity":p=function(a,b,d,c){a.uniform1f(b,c.dof_bokeh_intensity)};l=!0;break;case "u_camera_direction":p=function(a,b,d,c){a.uniform3fv(b,c.direction)};l=!0;break;case "u_cam_water_depth":p=function(a,b,d){a.uniform1f(b,d.Vq)};l=!0;break;case "u_fog_color_density":p=
function(a,b,d){a.uniform4fv(b,d.ue)};break;case "u_fog_params":p=function(a,b,d){a.uniform4fv(b,d.kg)};break;case "u_underwater_fog_color_density":p=function(a,b,d){a.uniform4fv(b,d.Ci)};break;case "u_bloom_key":p=function(a,b,d){a.uniform1f(b,d.oo)};break;case "u_average_lum_val":p=function(a,b,d){a.uniform1f(b,d.average_luminance)};break;case "u_mipmap_1x1":p=function(a,b,d){a.uniform1f(b,d.dw)};break;case "u_bloom_edge_lum":p=function(a,b,d){a.uniform1f(b,d.no)};break;case "u_time":p=function(a,
b,d){a.uniform1f(b,d.time)};l=!0;break;case "u_wind":p=function(a,b,d){a.uniform3fv(b,d.Di)};l=!0;break;case "u_sky_tex_dvar":p=function(a,b,d){a.uniform1f(b,d.Hp)};break;case "u_sky_tex_fac":p=function(a,b,d){a.uniform4fv(b,d.Ip)};break;case "u_sky_tex_color":p=function(a,b,d){a.uniform3fv(b,d.Gp)};break;case "u_horizon_color":p=function(a,b,d){a.uniform3fv(b,d.we)};break;case "u_zenith_color":p=function(a,b,d){a.uniform3fv(b,d.Fe)};break;case "u_environment_energy":p=function(a,b,d){a.uniform1f(b,
d.Rg)};break;case "u_bsdf_cube_sky_dim":p=function(a,b,d){a.uniform1f(b,d.lu)};l=!0;break;case "u_sky_color":p=function(a,b,d){a.uniform3fv(b,d.Ul)};break;case "u_rayleigh_brightness":p=function(a,b,d){a.uniform1f(b,d.rayleigh_brightness)};break;case "u_mie_brightness":p=function(a,b,d){a.uniform1f(b,d.mie_brightness)};break;case "u_spot_brightness":p=function(a,b,d){a.uniform1f(b,d.spot_brightness)};break;case "u_scatter_strength":p=function(a,b,d){a.uniform1f(b,d.scatter_strength)};break;case "u_rayleigh_strength":p=
function(a,b,d){a.uniform1f(b,d.rayleigh_strength)};break;case "u_mie_strength":p=function(a,b,d){a.uniform1f(b,d.mie_strength)};break;case "u_rayleigh_collection_power":p=function(a,b,d){a.uniform1f(b,d.rayleigh_collection_power)};break;case "u_mie_collection_power":p=function(a,b,d){a.uniform1f(b,d.mie_collection_power)};break;case "u_mie_distribution":p=function(a,b,d){a.uniform1f(b,d.mie_distribution)};break;case "u_light_positions":p=function(a,b,d){a.uniform4fv(b,d.kn)};break;case "u_light_directions":p=
function(a,b,d){a.uniform3fv(b,d.ds)};break;case "u_light_color_intensities":p=function(a,b,d){a.uniform4fv(b,d.jn)};break;case "u_sun_quaternion":p=function(a,b,d){a.uniform4fv(b,d.Rx)};break;case "u_sun_intensity":p=function(a,b,d){a.uniform3fv(b,d.Qx)};break;case "u_sun_direction":p=function(a,b,d){a.uniform3fv(b,d.Px)};break;case "u_debug_view_mode":p=function(a,b,d){a.uniform1i(b,d.debug_view_mode)};break;case "u_debug_colors_seed":p=function(a,b,d){a.uniform1f(b,d.debug_colors_seed)};break;
case "u_debug_render_time_threshold":p=function(a,b,d){a.uniform1f(b,d.Iu)};break;case "u_subpixel_jitter":p=function(a,b,d){a.uniform2fv(b,d.KA)};l=!0;break;case "u_subsample_indices":p=function(a,b,d){a.uniform4fv(b,d.lR)};l=!0;break;case "u_radial_blur_step":p=function(a,b,d){a.uniform1f(b,d.wp)};break;case "u_god_rays_intensity":p=function(a,b,d){a.uniform1f(b,d.god_rays_intensity)};break;case "u_ssao_radius_increase":p=function(a,b,d){a.uniform1f(b,d.Op)};break;case "u_ssao_blur_discard_value":p=
function(a,b,d){a.uniform1f(b,d.Kp)};l=!0;break;case "u_ssao_influence":p=function(a,b,d){a.uniform1f(b,d.Np)};break;case "u_ssao_dist_factor":p=function(a,b,d){a.uniform1f(b,d.Lp)};break;case "u_texel_size":p=function(a,b,d){a.uniform2fv(b,d.ft)};l=!0;break;case "u_normal_offset":p=function(a,b,d){a.uniform1f(b,d.self_shadow_normal_offset)};break;case "u_v_light_ts":p=function(a,b,d){a.uniform4fv(b,d.iq)};l=!0;break;case "u_v_light_r":p=function(a,b,d){a.uniform4fv(b,d.hq)};l=!0;break;case "u_v_light_tsr":p=
function(a,b,d){a.uniformMatrix3fv(b,!1,d.vt)};l=!0;break;case "u_p_light_matrix0":p=function(a,b,d){a.uniformMatrix4fv(b,!1,d.rk[0])};l=!0;break;case "u_p_light_matrix1":p=function(a,b,d){a.uniformMatrix4fv(b,!1,d.rk[1])};l=!0;break;case "u_p_light_matrix2":p=function(a,b,d){a.uniformMatrix4fv(b,!1,d.rk[2])};l=!0;break;case "u_p_light_matrix3":p=function(a,b,d){a.uniformMatrix4fv(b,!1,d.rk[3])};l=!0;break;case "u_outline_color":p=function(a,b,d){a.uniform3fv(b,d.ti)};break;case "u_draw_outline":p=
function(a,b,d){a.uniform1f(b,d.wr)};l=!0;break;case "u_glow_mask_small_coeff":p=function(a,b,d){a.uniform1f(b,d.small_glow_mask_coeff)};l=!0;break;case "u_glow_mask_large_coeff":p=function(a,b,d){a.uniform1f(b,d.large_glow_mask_coeff)};l=!0;break;case "u_brightness":p=function(a,b,d){a.uniform1f(b,d.brightness)};break;case "u_contrast":p=function(a,b,d){a.uniform1f(b,d.contrast)};break;case "u_exposure":p=function(a,b,d){a.uniform1f(b,d.exposure)};break;case "u_saturation":p=function(a,b,d){a.uniform1f(b,
d.saturation)};break;case "u_enable_hmd_stereo":p=function(a,b,d){a.uniform1i(b,d.enable_hmd_stereo)};break;case "u_distortion_params":p=function(a,b,d){a.uniform4fv(b,d.Vj)};break;case "u_chromatic_aberration_coefs":p=function(a,b,d){a.uniform4fv(b,d.chromatic_aberration_coefs)};break;case "u_motion_blur_exp":p=function(a,b,d){a.uniform1f(b,d.ww)};l=!0;break;case "u_motion_blur_decay_threshold":p=function(a,b,d){a.uniform1f(b,d.mb_decay_threshold)};l=!0;break;case "u_model_tsr":t=function(a,b,d){a.uniformMatrix3fv(b,
!1,d.na)};l=!0;break;case "u_model_tsr_inverse":t=function(a,b,d){a.uniformMatrix3fv(b,!1,d.Dy)};l=!0;break;case "u_transb":t=function(a,b,d){a.uniform4fv(b,d.De)};l=!0;break;case "u_transa":t=function(a,b,d){a.uniform4fv(b,d.wf)};l=!0;break;case "u_arm_rel_trans":t=function(a,b,d){a.uniform4fv(b,d.ko)};l=!0;break;case "u_arm_rel_quat":t=function(a,b,d){a.uniform4fv(b,d.Gq)};l=!0;break;case "u_quat":t=function(b,d,c){b.uniform4fv(d,a.g(c.na,w))};l=!0;break;case "u_quatsb":t=function(a,b,d){a.uniform4fv(b,
d.ye)};l=!0;break;case "u_quatsa":t=function(a,b,d){a.uniform4fv(b,d.qf)};l=!0;break;case "u_frame_factor":t=function(a,b,d){a.uniform1f(b,d.lg)};l=!0;break;case "au_center_pos":t=function(a,b,d){a.uniform3fv(b,d.qu)};l=!0;break;case "au_wind_bending_amp":t=function(a,b,d){a.uniform1f(b,d.Cg)};l=!0;break;case "au_wind_bending_freq":t=function(a,b,d){a.uniform1f(b,d.Dg)};l=!0;break;case "au_detail_bending_freq":t=function(a,b,d){a.uniform1f(b,d.ig)};l=!0;break;case "au_detail_bending_amp":t=function(a,
b,d){a.uniform1f(b,d.hg)};l=!0;break;case "au_branch_bending_amp":t=function(a,b,d){a.uniform1f(b,d.cg)};l=!0;break;case "u_node_values":t=function(a,b,d,c){a.uniform4fv(b,c.ri)};l=!0;break;case "u_node_rgbs":t=function(a,b,d,c){a.uniform3fv(b,c.Ne)};l=!0;break;case "u_lod_coverage":t=function(a,b,d,c){a.uniform1f(b,c.yl.Df)};l=!0;break;case "u_lod_cmp_logic":t=function(a,b,d,c){a.uniform1f(b,c.yl.tu)};l=!0;break;case "u_diffuse_color":t=function(a,b,d,c){a.uniform4fv(b,c.Qc)};l=!0;break;case "u_diffuse_intensity":t=
function(a,b,d,c){a.uniform1f(b,c.Je)};l=!0;break;case "u_diffuse_params":t=function(a,b,d,c){a.uniform2fv(b,c.he)};l=!0;break;case "u_emit":t=function(a,b,d,c){a.uniform1f(b,c.ie)};l=!0;break;case "u_ambient":t=function(a,b,d,c){a.uniform1f(b,c.fe)};l=!0;break;case "u_specular_color":t=function(a,b,d,c){a.uniform3fv(b,c.Re)};l=!0;break;case "u_specular_alpha":t=function(a,b,d,c){a.uniform1f(b,c.rg)};l=!0;break;case "u_specular_params":t=function(a,b,d,c){a.uniform3fv(b,c.tf)};l=!0;break;case "u_reflect_factor":t=
function(a,b,d,c){a.uniform1f(b,c.reflect_factor)};l=!0;break;case "u_mirror_factor":t=function(a,b,d,c){a.uniform1f(b,c.on)};l=!0;break;case "u_grass_map_dim":t=function(a,b,d,c){a.uniform3fv(b,c.Ud)};l=!0;break;case "u_grass_size":t=function(a,b,d,c){a.uniform1f(b,c.bk)};l=!0;break;case "u_scale_threshold":t=function(a,b,d,c){a.uniform1f(b,c.Bv)};l=!0;break;case "u_cube_fog":t=function(a,b,d,c){a.uniformMatrix4fv(b,!1,c.eg)};break;case "u_jitter_amp":t=function(a,b,d,c){a.uniform1f(b,c.Zv)};l=!0;
break;case "u_jitter_freq":t=function(a,b,d,c){a.uniform1f(b,c.$v)};l=!0;break;case "u_wireframe_edge_color":t=function(a,b,d,c){a.uniform3fv(b,c.wireframe_edge_color)};break;case "u_cluster_id":t=function(a,b,d,c){a.uniform1f(b,c.cr)};l=!0;break;case "u_batch_debug_id_color":t=function(a,b,d,c){a.uniform1f(b,c.Hu)};l=!0;break;case "u_batch_debug_main_render_time":t=function(a,b,d,c){a.uniform1f(b,c.pr)};l=!0;break;case "u_refr_bump":t=function(a,b,d,c){a.uniform1f(b,c.Oh)};l=!0;break;case "u_line_width":t=
function(a,b,d,c){a.uniform1f(b,c.ln)};l=!0;break;case "u_lamp_light_positions":t=function(a,b,d,c){a.uniform3fv(b,c.$o)};break;case "u_lamp_light_directions":t=function(a,b,d,c){a.uniform3fv(b,c.Zr)};break;case "u_lamp_light_color_intensities":t=function(a,b,d,c){a.uniform3fv(b,c.Yr)};break;case "u_halo_size":t=function(a,b,d,c){a.uniform1f(b,c.Lv)};l=!0;break;case "u_halo_hardness":t=function(a,b,d,c){a.uniform1f(b,c.Iv)};l=!0;break;case "u_halo_rings_color":t=function(a,b,d,c){a.uniform3fv(b,c.Kv)};
l=!0;break;case "u_halo_lines_color":t=function(a,b,d,c){a.uniform3fv(b,c.Jv)};l=!0;break;case "u_halo_stars_blend":t=function(a,b,d,c){a.uniform1f(b,c.Mv)};l=!0;break;case "u_halo_stars_height":t=function(a,b,d,c){a.uniform1f(b,c.Nv)};l=!0;break;case "u_fresnel_params":t=function(a,b,d,c){a.uniform2fv(b,c.ji)};l=!0;break;case "u_texture_scale":t=function(a,b,d,c){a.uniform3fv(b,c.Sh)};l=!0;break;case "u_parallax_scale":t=function(a,b,d,c){a.uniform1f(b,c.parallax_scale)};l=!0;break;case "u_color_id":t=
function(a,b,d){a.uniform3fv(b,d.bl)};l=!0;break;case "u_diffuse_color_factor":t=function(a,b,d,c){a.uniform1f(b,c.Wi)};l=!0;break;case "u_alpha_factor":t=function(a,b,d,c){a.uniform1f(b,c.oh)};l=!0;break;case "u_specular_color_factor":t=function(a,b,d,c){a.uniform1f(b,c.Dk)};l=!0;break;case "u_normal_factor":t=function(a,b,d,c){a.uniform1f(b,c.np)};l=!0;break;case "u_normalmap0_scale":t=function(a,b,d,c){a.uniform2fv(b,c.qk[0])};l=!0;break;case "u_normalmap1_scale":t=function(a,b,d,c){a.uniform2fv(b,
c.qk[1])};l=!0;break;case "u_normalmap2_scale":t=function(a,b,d,c){a.uniform2fv(b,c.qk[2])};l=!0;break;case "u_normalmap3_scale":t=function(a,b,d,c){a.uniform2fv(b,c.qk[3])};l=!0;break;case "u_foam_factor":t=function(a,b,d,c){a.uniform1f(b,c.foam_factor)};l=!0;break;case "u_foam_uv_freq":t=function(a,b,d,c){a.uniform2fv(b,c.gv)};l=!0;break;case "u_foam_mag":t=function(a,b,d,c){a.uniform2fv(b,c.fv)};l=!0;break;case "u_foam_scale":t=function(a,b,d,c){a.uniform2fv(b,c.Er)};l=!0;break;case "u_water_norm_uv_velocity":t=
function(a,b,d,c){a.uniform1f(b,c.lm)};l=!0;break;case "u_shallow_water_col":t=function(a,b,d,c){a.uniform3fv(b,c.shallow_water_col)};l=!0;break;case "u_shore_water_col":t=function(a,b,d,c){a.uniform3fv(b,c.shore_water_col)};l=!0;break;case "u_water_shallow_col_fac":t=function(a,b,d,c){a.uniform1f(b,c.shallow_water_col_fac)};l=!0;break;case "u_water_shore_col_fac":t=function(a,b,d,c){a.uniform1f(b,c.shore_water_col_fac)};l=!0;break;case "u_p_length":t=function(a,b,d,c){a.uniform1f(b,c.tb.Yx)};l=!0;
break;case "u_p_cyclic":t=function(a,b,d,c){a.uniform1i(b,c.tb.cyclic)};l=!0;break;case "u_p_max_lifetime":t=function(a,b,d,c){a.uniform1f(b,c.tb.fw)};l=!0;break;case "u_p_fade_in":t=function(a,b,d,c){a.uniform1f(b,c.tb.Yj)};l=!0;break;case "u_p_fade_out":t=function(a,b,d,c){a.uniform1f(b,c.tb.Gf)};l=!0;break;case "u_p_size":t=function(a,b,d,c){a.uniform1f(b,c.tb.size)};l=!0;break;case "u_p_alpha_start":t=function(a,b,d,c){a.uniform1f(b,c.tb.Yt)};l=!0;break;case "u_p_alpha_end":t=function(a,b,d,c){a.uniform1f(b,
c.tb.Xt)};l=!0;break;case "u_p_nfactor":t=function(a,b,d,c){a.uniform1f(b,c.tb.jp)};l=!0;break;case "u_p_gravity":t=function(a,b,d,c){a.uniform1f(b,c.tb.Cv)};l=!0;break;case "u_p_mass":t=function(a,b,d,c){a.uniform1f(b,c.tb.mf)};l=!0;break;case "u_p_color_ramp":t=function(a,b,d,c){a.uniform4fv(b,c.tb.wu)};l=!0;break;case "u_p_wind_fac":t=function(a,b,d,c){a.uniform1f(b,c.tb.By)};l=!0;break;case "u_p_time":t=function(a,b,d,c){a.uniform1f(b,c.tb.time)};l=!0;break;case "u_p_tilt":t=function(a,b,d,c){a.uniform1f(b,
c.tb.Wx)};l=!0;break;case "u_p_tilt_rand":t=function(a,b,d,c){a.uniform1f(b,c.tb.Xx)};l=!0;break;case "u_position":t=function(a,b,d,c){a.uniform3fv(b,c.um)};l=!0;break;case "u_va_frame_factor":t=function(a,b,d){a.uniform1f(b,d.oy)};l=!0;break;case "u_refl_plane":t=function(a,b,d){a.uniform4fv(b,d.ad)};l=!0;break;case "u_outline_intensity":t=function(a,b,d){a.uniform1f(b,d.mj)};l=!0;break;case "u_obj_info":t=function(a,b,d,c){a.uniform3fv(b,c.pp)},l=!0}t&&(t={name:f,Jo:t,lf:d[f]},l?c.push(t):g.push(t));
p&&(t={name:f,Jo:p,lf:d[f]},l?k.push(t):e.push(t))}if(g.length||e.length){b=b.xB;for(var B in b)delete b[B];for(B=0;B<g.length;B++)t=g[B],b[t.name]=t;for(B=0;B<e.length;B++)t=e[B],b[t.name]=t}else b.Dw=!0}var R=Object(M.a)(f),O=Object(U.a)(f),K=Object(n.a)(f),A=Object(z.a)(f),ca=Object(e.a)(f),L=Object(m.a)(f),ha=Object(C.a)(f),J=Object(v.a)(f),W=Object(r.a)(f),B=Object(y.a)(f),ba=[1,0,0,1],I=[1,1,1,1],P=[0,0,0,1],p=[0,0,0,0],da=new Uint8Array([91.8,142.8,.96*255,255]),H=null,t=null,d=null,la=null,
na=null,pa=null,Aa=new Float32Array(3),w=q.create(),N=new Uint8Array(4),oa=K.wa;b.fh=function(a){var b=oa.background_color;a.clearColor(b[0],b[1],b[2],b[3]);a.clearDepth(1);a.enable(a.DEPTH_TEST);a.depthFunc(a.LEQUAL);a.enable(a.CULL_FACE);a.frontFace(a.CCW);a.cullFace(a.BACK);a.enable(a.BLEND);a.blendFunc(a.ONE,a.ONE_MINUS_SRC_ALPHA);H=a};b.Xj=function(b){if(b.Ec&&!b.Sm)if(b.type==W.Kt){L.iC(b);var d=b.qa;H.bindFramebuffer(H.READ_FRAMEBUFFER,d.Hr);H.bindFramebuffer(H.DRAW_FRAMEBUFFER,d.Hf);var c=
0;d.wc&&(c|=H.COLOR_BUFFER_BIT);d.gg&&(c|=H.DEPTH_BUFFER_BIT);H.blitFramebuffer(0,0,d.width,d.height,0,0,d.width,d.height,c,H.NEAREST);L.lC(b);ca.nA("draw resolve")}else if(b.type==W.Jy)L.iC(b),d=b.qa,H.bindFramebuffer(H.FRAMEBUFFER,d.Hr),H.bindTexture(H.TEXTURE_2D,d.wc.hc),H.copyTexSubImage2D(H.TEXTURE_2D,0,0,0,0,0,d.width,d.height,0),L.lC(b),ca.nA("draw copy");else{L.iC(b);d=b.qa;H.bindFramebuffer(H.FRAMEBUFFER,d.Hf);b.Iq&&(c=d.wc,H.framebufferTexture2D(H.FRAMEBUFFER,H.COLOR_ATTACHMENT0,c.Vb,c.hc,
0));H.viewport(0,0,d.width,d.height);b.type!=W.xd&&b.type!=W.Ge&&l(b);b.Ob?H.enable(H.BLEND):H.disable(H.BLEND);b.Ad?H.enable(H.DEPTH_TEST):H.disable(H.DEPTH_TEST);switch(b.type){case W.ee:H.enable(H.POLYGON_OFFSET_FILL);H.polygonOffset(b.self_shadow_polygon_offset,b.self_shadow_polygon_offset);H.cullFace(H.BACK);break;case W.de:case W.Ue:H.disable(H.POLYGON_OFFSET_FILL);H.cullFace(H.FRONT);break;case W.Wh:H.enable(H.POLYGON_OFFSET_FILL);H.polygonOffset(-4,-4);H.cullFace(H.BACK);break;case W.He:if(1<
oa.Jc||oa.gT){H.enable(H.POLYGON_OFFSET_FILL);H.polygonOffset(-2,-2);break}default:H.disable(H.POLYGON_OFFSET_FILL),H.cullFace(H.BACK)}if(b.type==W.xd||b.type==W.Ge){d=b.qa;c=d.wc.hc;for(var k=0;6>k;k++){var e=ea(k);d.Kc=b.th[k];a.d(d.Kc,d.Ag);O.WM(d);H.framebufferTexture2D(H.FRAMEBUFFER,H.COLOR_ATTACHMENT0,e,c,0);l(b);e=b.vb;for(var f=0;f<e.length;f++)for(var p=0;p<e[f].jb.length;p++){var t=e[f].jb[p];t.Ec=t.Nz[k]}g(b)}}else g(b);L.lC(b);ca.nA("draw subscene: "+W.Ox(b));b.type==W.Gy&&H.bindFramebuffer(H.FRAMEBUFFER,
null)}};b.clear=function(a){if(a)H.bindFramebuffer(H.FRAMEBUFFER,a.qa.Hf);else{var b=oa.background_color;if(b[0]===p[0]&&b[1]===p[1]&&b[2]===p[2]&&b[3]===p[3])return}l(a)};b.bu=function(a){var b=a.Jq;b.length=0;var d=a.$a,c=d.mc,g=a.ec.attributes,e;for(e in g){var l=c[e],f=J.Lo(e),p=J.rQ(e),t=J.$F(e);b.push({qy:f,Mo:p,lf:g[e],gu:l.offset*t,iv:1<l.frames?l.length*t:0,Tc:l.Tc,Om:l.Om})}if("DEBUG"==Object(k.d)())for(e in c)f=J.Lo(e),b=J.jT(d.be,f),b=d.be[b],l=a.Mb.yg+" | "+a.Mb.ff,f=c[e].length*c[e].frames*
J.$F(e),A.tP(b.SO,l,e,f,e in g);oa.Zy&&u(a)};b.zM=u;b.qN=function(a){for(var b=ha.lA(),d=0;d<a.Sf.length;d++)b.deleteVertexArray(a.Sf[d]);a.Sf.length=0};b.sN=function(a){for(var b=[],d=0;d<a.length;d++){var c=a[d];b.push({qy:c.qy,Mo:c.Mo,lf:c.lf,gu:c.gu,iv:c.iv,Tc:c.Tc,Om:c.Om})}return b};b.yM=F;b.WD=function(a){var b=a.ec,d=a.Ua;a=a.vg;H.useProgram(b.qj);for(var c=0;c<d.length;c++)H.uniform1i(b.em[a[c]],c)};b.Xw=function(a,b,d,c,g,k){H.bindFramebuffer(H.FRAMEBUFFER,a);H.readPixels(b,d,c,g,H.RGBA,
H.UNSIGNED_BYTE,k);H.bindFramebuffer(H.FRAMEBUFFER,null);return k};b.OU=function(a){var b=a.ec;b.Dw||(H.useProgram(b.qj),b.ss.length||F(b),b=b.xB.u_cube_fog,b.Jo(H,b.lf,null,a))};b.WS=function(a,b){var d=H.createFramebuffer();H.bindFramebuffer(H.FRAMEBUFFER,d);if(B.Wo(a))a=a.Tf,H.framebufferRenderbuffer(H.FRAMEBUFFER,H.COLOR_ATTACHMENT0,H.RENDERBUFFER,a);else if(B.Yo(a)){var c=a;a=c.hc;c=c.Vb==H.TEXTURE_CUBE_MAP?H.TEXTURE_CUBE_MAP_NEGATIVE_Z:c.Vb;H.framebufferTexture2D(H.FRAMEBUFFER,H.COLOR_ATTACHMENT0,
c,a,0)}B.Wo(b)?(a=b.Tf,H.framebufferRenderbuffer(H.FRAMEBUFFER,H.DEPTH_ATTACHMENT,H.RENDERBUFFER,a)):B.Yo(b)&&(c=b,a=c.hc,c=c.Vb,H.framebufferTexture2D(H.FRAMEBUFFER,H.DEPTH_ATTACHMENT,c,a,0));ca.LM();H.bindFramebuffer(H.FRAMEBUFFER,null);return d};b.VS=function(a,b,d,c,g){null==a?(H.bindFramebuffer(H.FRAMEBUFFER,a),H.viewport(0,0,c,g),H.clear(H.COLOR_BUFFER_BIT|H.DEPTH_BUFFER_BIT)):(B.Wo(b)?H.deleteRenderbuffer(b.Tf):B.Yo(b)&&H.deleteTexture(b.hc),B.Wo(d)?H.deleteRenderbuffer(d.Tf):B.Yo(d)&&H.deleteTexture(d.hc),
H.deleteFramebuffer(a))};b.TX=function(){};b.aP=function(a,b,d,c,g,k){a=a.hc;H.viewport(0,0,d,d);H.framebufferTexture2D(H.FRAMEBUFFER,H.COLOR_ATTACHMENT0,b,a,0);b=R.Bu("FLIP_CUBEMAP_COORDS");a=b.ec;H.activeTexture(H.TEXTURE0);H.bindTexture(H.TEXTURE_2D,g);var e=g=0;d!=c&&(g=1/(6*c),e=1/(4*c));H.uniform1i(a.em.u_tex_number,k);H.uniform2fv(a.em.u_delta,[g,e]);H.useProgram(a.qj);pa(b,0);H.bindTexture(H.TEXTURE_2D,null)};b.bP=function(a,b,d,c,g){H.bindFramebuffer(H.FRAMEBUFFER,c);c=a.hc;a=a.Vb;H.bindTexture(a,
c);H.viewport(0,0,b,d);H.texImage2D(a,0,H.RGBA,b,d,0,H.RGBA,H.UNSIGNED_BYTE,null);H.framebufferTexture2D(H.FRAMEBUFFER,H.COLOR_ATTACHMENT0,a,c,0);b=R.Bu("NONE");d=b.ec;H.activeTexture(H.TEXTURE0);H.bindTexture(a,g);H.useProgram(d.qj);pa(b,0);H.bindFramebuffer(H.FRAMEBUFFER,null);H.bindTexture(a,null)};b.cleanup=function(){};b.yT=function(){var a=ha.tQ(),b=ha.lA();oa.OD=a?!0:!1;oa.Zy=b?!0:!1;a?(t=function(b,d,c,g){a.drawElementsInstanced(H.TRIANGLES,b,d,c,g)},d=function(b,d){a.vertexAttribDivisor(b,
d)},la=function(b,d,c){a.drawArraysInstanced(H.TRIANGLES,b,d,c)}):(t=function(a,b,d){H.drawElements(H.TRIANGLES,a,b,d)},d=function(){},la=function(a,b){H.drawArrays(H.TRIANGLES,a,b)});b?(na=function(a){b.bindVertexArray(a)},pa=function(a,b){var d=a.$a;na(a.Sf[b]);d.Fh?t(d.count,d.Ym,0,d.bn):la(0,d.count,d.bn);na(null)}):pa=function(a,b){var c=a.$a;a=a.Jq;for(var g=0;g<c.be.length;g++){H.bindBuffer(H.ARRAY_BUFFER,c.be[g].Nk);for(var k=0;k<a.length;k++){var e=a[k];e.qy==c.be[g].type&&(H.enableVertexAttribArray(e.lf),
H.vertexAttribPointer(e.lf,e.Tc,e.Mo,e.Mo==H.FLOAT?!1:!0,0,e.gu+e.iv*b),d(e.lf,e.Om))}}c.Fh?(H.bindBuffer(H.ELEMENT_ARRAY_BUFFER,c.Fh),t(c.count,c.Ym,0,c.bn)):la(0,c.count,c.bn);for(g=0;g<a.length;g++)e=a[g],H.disableVertexAttribArray(e.lf)}};b.reset=function(){na=la=d=t=H=null}});w.a=f},function(D,w,f){D=f(0);var M=f(5),U=f(4),n=f(1),z=f(8),e=f(18),m=f(6),C=f(2),v=f(3);f=Object(D.a)("__sfx",function(f,r){function q(){var a=window.AudioContext||window.webkitAudioContext;if(a){try{var b=new a}catch(Ja){return L.error('Unable to initialize AudioContext: "'+
Ja+'". The audio is disabled.'),null}if(b.createGain)return b;L.warn("deprecated WebAudio implementation");return null}L.warn("WebAudio is not supported");return null}function a(a,d,g){var e=a.Ra;if("NONE"!=e.behavior){var f=e.loop,p=e.pitch;if(e.src&&(f||0<=g)){e.ez=Math.floor(5E4*Math.random());var t=da.currentTime+d;t=Math.max(0,t);e.sg=t;e.state=20;var B=H.yd;"POSITIONAL"==e.behavior&&"none"==B.ur&&(e.behavior="BACKGROUND_SOUND");na(a,H.yd);if("POSITIONAL"==e.behavior||"BACKGROUND_SOUND"==e.behavior){d=
da.createBufferSource();d.buffer=e.src;d.playbackRate.value=p;if(f){e.Uc&&e.Uc.disconnect();e.Ce&&e.Ce.disconnect();d.loop=!0;d.loopStart=e.VG;if(d.loopEnd=e.nw)g=da.createBufferSource(),g.buffer=e.src,g.playbackRate.value=p,e.Ce=g,g.connect(e.xe);d.start(t);e.duration=0}else f=d.buffer?d.buffer.duration:0,g>f?(f=t+g+e.Gf,d.loop=!0,d.start(t),d.stop(f),e.duration=g):(d.loop=!1,d.start(t),e.duration=f);d.connect(e.xe);e.Uc=d;k(e);c(e);l(e)}else"BACKGROUND_MUSIC"==e.behavior&&(ha.clear_timeout(e.fz),
ha.clear_timeout(e.gz),g=function(){var b=a.Ra,d=b.src;d&&(d.volume=1,d.loop=b.loop,b.Uc=b.Uc||da.createMediaElementSource(d),b.Uc.connect(b.xe),20==b.state&&(d.currentTime&&(d.currentTime=0),d.play()))},0==d?g():e.fz=ha.set_timeout(g,1E3*d),f?e.duration=0:e.duration=K(a));b(e,t)}}}function T(b){var d=b.Ra;a(b,d.delay+d.mF*Math.random(),d.duration)}function k(a){var b=a.Ce||a.Uc;C._17(b.onended)&&(b.onended=function(){a.state=50})}function c(a){a.Rn&&a.EB.gain.cancelScheduledValues(a.sg);a.vp&&(a.Uc.playbackRate.cancelScheduledValues(a.sg),
a.Ce&&a.Ce.playbackRate.cancelScheduledValues(a.sg));a.Ct=a.sg}function l(a){if(a.Rn||a.vp){var b=a.EB,c=a.Uc,g=c.buffer?c.buffer.duration:0;if(g){var k=a.sg;d[0]=a.ez;for(var e=0;5>e;){var l=a.pitch+a.vp*C._40(d);if(k>=a.Ct){if(a.Rn){var f=1-C.M(a.Rn,0,1)*Math.random();b.gain.setTargetAtTime(f,k,.015)}a.vp&&(c.playbackRate.setTargetAtTime(l,k,.015),a.Ce&&a.Ce.playbackRate.setTargetAtTime(l,k,.015));e++}k+=g/l}a.Ct=k-.001}}}function b(a,b){if(a.Yj||a.Gf){var d=a.jl;d.gain.cancelScheduledValues(b);
a.Yj?(d.gain.setTargetAtTime(0,b,.015),d.gain.linearRampToValueAtTime(1,b+a.Yj)):d.gain.setTargetAtTime(1,b,.015);a.Gf&&!a.loop&&(d.gain.setTargetAtTime(1,b+a.duration,.015),d.gain.linearRampToValueAtTime(0,b+a.duration+a.Gf))}}function g(a){"SPEAKER"!=a.type&&A.va("Wrong object type");var b=a.Ra;if(50==b.state)b.state=30;else if(20==b.state||40==b.state){var d=b.jl,c=da.currentTime;b.Gf&&(d.gain.setTargetAtTime(d.gain.value,c,.015),d.gain.linearRampToValueAtTime(0,c+b.Gf,.015));"BACKGROUND_MUSIC"==
b.behavior?b.src&&(ha.clear_timeout(b.fz),ha.clear_timeout(b.gz),b.gz=ha.set_timeout(function(){var b=a.Ra.src;b&&(b.currentTime&&(b.currentTime=0),b.pause())},1E3*b.Gf)):(d=b.Uc,d.onended=function(){},b.duration<d.buffer.duration?b.Gf&&20==b.state?d.stop(c+b.Gf):20==b.state&&(d.stop(0),d.disconnect()):d.disconnect(),b.sg=0,b.vB=0,b.mu=0);b.state=30}}function E(a){a=a.Ra;if(20==a.state){var b=da.currentTime;a.vB=b;"BACKGROUND_MUSIC"==a.behavior?(b=a.src)&&b.pause():(b>a.sg?a.mu=ea(a,b):a.mu=0,a.Uc.onended=
function(){},a.Uc.stop(0),a.Uc.disconnect(),c(a));a.state=40}}function ea(a,b){d[0]=a.ez;for(var c=a.Uc.buffer.duration,g=a.sg,k;g<b;)k=a.pitch+a.vp*C._40(d),g+=c/k;return(c/k-(g-b))*k}function u(a){var d=a.Ra;if(40==d.state){var c=da.currentTime;d.sg+=c-d.vB;if("BACKGROUND_MUSIC"==d.behavior)d.src.play();else{a=a.Ra;var g=da.createBufferSource();g.loop=a.Uc.loop;g.loopStart=a.Uc.loopStart;g.loopEnd=a.Uc.loopEnd;g.buffer=a.Uc.buffer;g.playbackRate.value=a.Uc.playbackRate.value;g.connect(a.xe);a.Uc=
g;a.Ce&&(g=da.createBufferSource(),g.loop=a.Ce.loop,g.buffer=a.Ce.buffer,g.playbackRate.value=a.Ce.playbackRate.value,g.connect(a.xe),a.Ce=g);d.Ct=c;c=d.Uc;k(d);c.start(d.sg,d.mu);l(d)}b(d,d.sg);d.state=20}}function F(a,b,d){var c=b.$O;if(0<c){var g=b.kU;if(0!=v.dot(a.ry,a.ry)||0!=v.dot(b.mn,b.mn)){var k=v.subtract(a.MA,b.jj,B),e=v.length(k);b=v.dot(k,b.mn)/e;k=v.dot(k,a.ry)/e;e=g/c;b=Math.min(-b,e);k=Math.min(-k,e);c=(g-c*b)/(g-c*k);isFinite(c)||(c=0);c=Math.min(c,16);c=Math.max(c,.125);c=C._51(c,
a.IG,d,.3);a.Uc.playbackRate.value=c;a.IG=c}}}function R(a){a=a.Ra;return!a||20!=a.state&&40!=a.state&&30!=a.state&&50!=a.state?!1:!0}function O(a){return a.muted?0:a.volume}function K(a){a=a.Ra;return(a=a.src)?a.duration:0}var A=Object(M.a)(f),w=Object(U.a)(f),L=Object(n.a)(f),ha=Object(e.a)(f),J=w.wa,W=w.Ra,B=new Float32Array(3),ba=new Float32Array(3),I=z.create(),P=[],p=[],da=null,H=null,t=[],d=[1],la=null;r.XC=10;r.Fy=20;r.WC=30;r.dO=function(){return{nd:-1,Zi:"",behavior:"NONE",muted:!1,volume:1,
pitch:1,attenuation:1,dist_ref:1,dist_max:1E4,PE:360,QE:360,RE:1,autoplay:!1,cyclic:!1,loop:!1,VG:0,nw:0,delay:0,mF:0,Rn:0,vp:0,Yj:0,Gf:0,sg:0,vB:0,mu:0,duration:0,Ct:0,ez:1,src:null,state:10,MA:new Float32Array(3),ry:new Float32Array(3),Yu:!1,IG:1,fz:-1,gz:-1,Pm:0,xe:null,Uc:null,Ce:null,tB:null,hi:null,Ko:null,jl:null,EB:null,gm:0}};r.init=function(){var a=document.createElement("audio"),b=document.createElement("video");a.canPlayType&&(""!=a.canPlayType("audio/ogg")&&(P.push("ogg"),P.push("ogv"),
P.push("oga")),""!=a.canPlayType("audio/mpeg")&&P.push("mp3"),""!=a.canPlayType("audio/mp4")&&(P.push("mp4"),P.push("m4v"),P.push("m4a")),""!=a.canPlayType("audio/webm")&&P.push("webm"));b.canPlayType&&(""!=b.canPlayType("video/ogg")&&(p.push("ogv"),p.push("ogg"),p.push("oga")),""!=b.canPlayType("video/mp4")&&(p.push("m4v"),p.push("mp4")),""!=b.canPlayType("video/webm")&&p.push("webm"),""!=b.canPlayType("video/mpeg")&&p.push("mp3"))};r.BM=function(a){W.SC&&!da&&(da=q())&&L.log("%cINIT WEBAUDIO: "+
da.sampleRate+"Hz","color: #00a");if(da){var b={jj:new Float32Array(3),mn:new Float32Array(3),gm:0},d=da.createGain(),c=da.createGain();b.Ko=d;b.jl=c;d.connect(c);c.connect(da.destination);if(a.b4w_enable_dynamic_compressor){c=da.createDynamicsCompressor();var g=a.b4w_dynamic_compressor_settings;c.threshold.value=g.threshold;c.knee.value=g.knee;c.ratio.value=g.ratio;c.attack.value=g.attack;c.release.value=g.release;c.connect(d);b.hr=c;b.xe=c}else b.hr=null,b.xe=d;switch(a.audio_distance_model){case "INVERSE":case "INVERSE_CLAMPED":b.ur=
"inverse";break;case "LINEAR":case "LINEAR_CLAMPED":b.ur="linear";break;case "EXPONENT":case "EXPONENT_CLAMPED":b.ur="exponential";break;case "NONE":b.ur="none";break;default:A.va("Wrong audio distance model")}b.$O=a.audio_doppler_factor;b.kU=a.audio_doppler_speed;b.muted=!1;b.volume=a.audio_volume;d.gain.value=O(b);b.Pm=0}else b=null;a.yd=b};r.oT=function(a){H=a};r.detect_audio_container=function(a){a||(a="ogg");return-1<P.indexOf(a)?a:-1<P.indexOf("m4a")?"m4a":-1<P.indexOf("oga")?"oga":""};r.detect_video_container=
function(a){a||(a="webm");return-1<p.indexOf(a)?a:-1<p.indexOf("m4v")?"m4v":-1<p.indexOf("webm")?"webm":""};r.fy=function(a,b){var d=a.data,c=b.Ra;if(a.data.sound){c.nd=a.data.sound.uuid;c.Zi=a.data.sound.filepath;switch(d.b4w_behavior){case "POSITIONAL":case "BACKGROUND_SOUND":c.behavior=da?d.b4w_behavior:"NONE";break;case "BACKGROUND_MUSIC":da?(window.MediaElementAudioSourceNode?a=!0:(L.warn("MediaElementAudioSourceNode not found"),a=!1),a=a&&!J.zE?"BACKGROUND_MUSIC":"BACKGROUND_SOUND"):a="NONE";
c.behavior=a;break;default:A.va("Wrong speaker behavior")}d.sound||(c.behavior="NONE");c.Yu=d.b4w_enable_doppler;c.muted=d.muted;c.volume=d.volume;c.pitch=d.pitch;c.attenuation=d.attenuation;c.dist_ref=d.distance_reference;c.dist_max=d.distance_max||1E4;c.PE=d.cone_angle_inner;c.QE=d.cone_angle_outer;c.RE=d.cone_volume_outer;c.autoplay=d.b4w_auto_play;c.cyclic=d.b4w_cyclic_play;c.loop=d.b4w_loop;c.VG=d.b4w_loop_start;c.nw=d.b4w_loop_end;c.delay=d.b4w_delay;c.mF=d.b4w_delay_random;c.Rn=d.b4w_volume_random;
c.vp=d.b4w_pitch_random;c.Yj=d.b4w_fade_in;c.Gf=d.b4w_fade_out;t.push(b)}};r.xI=function(a){"SPEAKER"!=a.type&&A.va("Wrong object type");switch(a.Ra.behavior){case "POSITIONAL":return r.Fy;case "BACKGROUND_SOUND":return r.Fy;case "BACKGROUND_MUSIC":return r.WC;case "NONE":return r.XC;default:A.va("Wrong speaker behavior")}};r.oV=function(a,b){a=a.Ra;switch(a.behavior){case "POSITIONAL":case "BACKGROUND_SOUND":case "BACKGROUND_MUSIC":a.src=b;break;case "NONE":break;default:A.va("Wrong speaker behavior")}};
r.zH=function(){var a=da.createBufferSource();a.buffer=da.createBuffer(1,22050,22050);a.connect(da.destination);a.start(0)};r.UO=function(a,b,d){da?da.decodeAudioData(a,b,d):d()};r.hU=function(a){g(a);a.Ra=null;t.splice(t.indexOf(a),1)};r.cleanup=function(){for(var a=0;a<t.length;a++){var b=t[a].Ra;"BACKGROUND_MUSIC"==b.behavior?(b=b.src)&&b.pause():(b.Uc&&b.Uc.disconnect(),b.Ce&&b.Ce.disconnect())}H&&H.yd&&(a=H.yd,a.jj[0]=0,a.jj[1]=0,a.jj[2]=0,a.mn[0]=0,a.mn[1]=0,a.mn[2]=0);H=null;t.splice(0);la=
null};r.update=function(a){if(da&&0!=t.length){for(var b=0;b<t.length;b++){var d=t[b],c=d.Ra,k=c.Uc,e=da.currentTime;!c.loop&&20==c.state&&c.duration&&c.sg+c.duration<e&&("BACKGROUND_MUSIC"==c.behavior||k&&!C._17(k.onended))&&(c.state=50);c.cyclic&&50==c.state&&T(d);20==c.state&&3>c.Ct-e&&l(c)}la&&la.Ck.length&&(-1==la.active||a>la.ND+la.uF[la.active])&&(b=la,-1<b.active&&g(b.Ck[b.active]),d=-1==b.active&&b.random?Math.round(Math.random()*(b.Ck.length-1)):b.random?(b.active+(1+Math.round(Math.random()*
(b.Ck.length-2))))%b.Ck.length:(b.active+1)%b.Ck.length,T(b.Ck[d]),b.active=d,b.ND=a)}};var na=function(){var a=z.create(),b=v.create();return function(d,c){var g=d.Ra;if(!g.xe){if(W.vw){var k=da.createBiquadFilter();k.type="peaking"}else k=null;var e=da.createGain();switch(g.behavior){case "POSITIONAL":var l=da.createPanner();"string"!=typeof l.panningModel?(l.panningModel=l.EQUALPOWER,l.distanceModel=l.INVERSE_DISTANCE):(l.panningModel="equalpower",l.distanceModel=c.ur);var f=m.j(d.ka.na,b);d=m.g(d.ka.na,
a);l.setPosition(f[0],f[1],f[2]);v.copy(f,g.MA);C._34(d,C.c,b);l.setOrientation(b[0],b[1],b[2]);l.refDistance=g.dist_ref;l.maxDistance=g.dist_max;l.rolloffFactor=g.attenuation;l.coneInnerAngle=g.PE;l.coneOuterAngle=g.QE;l.coneOuterGain=g.RE;f=da.createGain();f.gain.value=O(g);k?(l.connect(k),k.connect(f)):l.connect(f);f.connect(e);g.xe=l;if(g.Rn){var p=da.createGain();e.connect(p);p.connect(c.xe)}else p=null,e.connect(c.xe);break;case "BACKGROUND_SOUND":l=null;f=da.createGain();f.gain.value=O(g);
k?(g.xe=k,k.connect(f)):g.xe=f;f.connect(e);g.Rn?(p=da.createGain(),e.connect(p),p.connect(c.xe)):(p=null,e.connect(c.xe));break;case "BACKGROUND_MUSIC":p=l=null,f=da.createGain(),f.gain.value=O(g),k?(g.xe=k,k.connect(f)):g.xe=f,f.connect(e),e.connect(c.xe)}g.tB=l;g.hi=k;g.Ko=f;g.jl=e;g.EB=p}}}();r.play=a;r.play_def=T;r.stop=g;r.is_playing=function(a){return 20==a.Ra.state};r.gU=E;r.iU=u;r.loop_stop=function(a,b){var d=a.Ra,c=d.Ce;R(a)&&("POSITIONAL"==d.behavior||"BACKGROUND_SOUND"==d.behavior)&&
c&&(a=da.currentTime+b,d.Uc.stop(a),c.start(a,d.nw))};r.playrate=function(a,b){var d=a.Ra;d.pitch=b;!R(a)||"POSITIONAL"!=d.behavior&&"BACKGROUND_SOUND"!=d.behavior||(d.Uc.playbackRate.value=b,d.Ce&&(d.Ce.playbackRate.value=b),c(d),l(d))};r.get_playrate=function(a){return a.Ra.pitch};r.cyclic=function(a,b){a.Ra.cyclic=!!b};r.bR=function(a){return a.Ra.autoplay};r.is_cyclic=function(a){return a.Ra.cyclic};r.FR=function(a,b,d,c,g){if(a=a.yd){var k=B;k[0]=0;k[1]=0;k[2]=-1;v.transformQuat(k,d,k);ba[0]=
0;ba[1]=1;ba[2]=0;v.transformQuat(ba,d,ba);d=da.listener;d.setPosition(b[0],b[1],b[2]);d.setOrientation(k[0],k[1],k[2],ba[0],ba[1],ba[2]);if(c&&a.gm!=g){if(a.listener_stride)a.listener_stride=!1,v.copy(b,a.jj);else for(d=a.mn,d[0]=(b[0]-a.jj[0])/c,d[1]=(b[1]-a.jj[1])/c,d[2]=(b[2]-a.jj[2])/c,v.copy(b,a.jj),b=0;b<t.length;b++)d=t[b],k=d.Ra,R(d)&&"POSITIONAL"==k.behavior&&k.Yu&&F(k,a,c);a.gm=g}else v.copy(b,a.jj)}};r.listener_stride=function(){var a=H.yd;a&&(a.listener_stride=!0)};r.jU=function(a,b,
d){var c=a.Ra;if(R(a)&&"POSITIONAL"==c.behavior){var g=m.j(a.ka.na,B);a=m.g(a.ka.na,I);var k=c.tB;k.setPosition(g[0],g[1],g[2]);C._34(a,C.c,ba);k.setOrientation(ba[0],ba[1],ba[2]);c.Yu&&(a=c.MA,b&&c.gm!=d?(c.GI?(v.copy(g,a),c.GI=!1):(k=c.ry,k[0]=(g[0]-a[0])/b,k[1]=(g[1]-a[1])/b,k[2]=(g[2]-a[2])/b,v.copy(g,a),F(c,H.yd,b)),c.gm=d):v.copy(g,a))}};r.speaker_stride=function(a){var b=a.Ra;R(a)&&"POSITIONAL"==b.behavior&&b.Yu&&(b.GI=!0)};r.hA=function(a){return a.Ra.behavior};r.check_active_speakers=function(){for(var a=
0;a<t.length;a++)if(R(t[a]))return!0;return!1};r.FT=function(a){var b=H.yd;b&&(b.volume=a,da&&(b.Ko.gain.value=O(b)))};r.uQ=function(){var a=H.yd;return a?a.volume:0};r.set_volume=function(a,b){var d=a.Ra;d.volume=b;R(a)&&(d.Ko.gain.value=O(d))};r.get_volume=function(a){return a.Ra.volume};r.mute=function(a,b){a.Ra.muted=!!b;R(a)&&(a.Ra.Ko.gain.value=O(a.Ra))};r.is_muted=function(a){return a.Ra.muted};r.fS=function(a){var b=H.yd;b&&(b.muted=!!a,da&&(b.Ko.gain.value=O(b)))};r.iR=function(){var a=H.yd;
return a?a.muted:!1};r.get_speaker_objects=function(){return t};r.pause=function(){for(var a=0;a<t.length;a++)E(t[a])};r.resume=function(){for(var a=0;a<t.length;a++)u(t[a])};r.set_compressor_params=function(a,b){a.yd&&a.yd.hr&&(a=a.yd.hr,a.threshold.value=b.threshold,a.knee.value=b.knee,a.ratio.value=b.ratio,a.attack.value=b.attack,a.release.value=b.release)};r.get_compressor_params=function(a){if(!a.yd||!a.yd.hr)return null;a=a.yd.hr;return{threshold:a.threshold.value,knee:a.knee.value,ratio:a.ratio.value,
attack:a.attack.value,release:a.release.value}};r.duck=function(a,b,d){if(R(a)){a=a.Ra;var c=a.jl,g=da.currentTime;c.gain.setTargetAtTime(c.gain.value,g,.015);c.gain.linearRampToValueAtTime(b,g+d);a.Pm=d}};r.unduck=function(a){if(R(a)){a=a.Ra;var b=a.jl,d=da.currentTime;b.gain.setTargetAtTime(b.gain.value,d,.015);b.gain.linearRampToValueAtTime(1,d+a.Pm);a.Pm=0}};r.cP=function(a,b){if(da){var d=H.yd,c=d.jl,g=da.currentTime;c.gain.setTargetAtTime(c.gain.value,g,.015);c.gain.linearRampToValueAtTime(a,
g+b);d.Pm=b}};r.GU=function(){if(da){var a=H.yd,b=a.jl,d=da.currentTime;b.gain.setTargetAtTime(b.gain.value,d,.015);b.gain.linearRampToValueAtTime(1,d+a.Pm);a.Pm=0}};r.apply_playlist=function(a,b,d){la={active:-1,ND:0,random:d,Ck:[],uF:[]};for(d=0;d<a.length;d++){var c=a[d],k=K(c);0==k?L.warn("Ignoring speaker with zero duration: "+c.name):(g(c),c.Ra.cyclic=!1,la.Ck.push(c),la.uF.push(k+b))}};r.get_duration=K;r.clear_playlist=function(){if(la)for(var a=la.Ck,b=0;b<a.length;b++)g(a[b]);la=null};r.get_positional_params=
function(a){return(a=a.Ra)&&"POSITIONAL"==a.behavior?{dist_ref:a.dist_ref,dist_max:a.dist_max,attenuation:a.attenuation}:null};r.set_positional_params=function(a,b){(a=a.Ra)&&"POSITIONAL"==a.behavior&&(a.dist_ref=b.dist_ref,a.dist_max=b.dist_max,a.attenuation=b.attenuation,b=a.tB)&&(b.refDistance=a.dist_ref,b.maxDistance=a.dist_max,b.rolloffFactor=a.attenuation)};r.set_filter_params=function(a,b){(a=a.Ra)&&a.hi&&(a.hi.frequency.value=b.freq,a.hi.Q.value=b.Q,a.hi.gain.value=b.gain)};r.get_filter_params=
function(a){return(a=a.Ra)&&a.hi?{freq:a.hi.frequency.value,Q:a.hi.Q.value,gain:a.hi.gain.value}:null};r.get_filter_freq_response=function(a,b,d,c){a=a.Ra;if(!a||!a.hi)return null;a.hi.getFrequencyResponse(b,d,c)};r.reset=function(){P.length=0;p.length=0;da=null}});w.a=f},function(D,w,f){D=f(0);var M=f(53),U=f(19),n=f(1);f=Object(D.a)("controls",function(f,e){var m=Object(M.a)(f),C=Object(U.a)(f),v=Object(n.a)(f);e.CT_POSITIVE=m.CT_POSITIVE;e.CT_CONTINUOUS=m.CT_CONTINUOUS;e.CT_TRIGGER=m.CT_TRIGGER;
e.CT_SHOT=m.CT_SHOT;e.CT_LEVEL=m.CT_LEVEL;e.CT_CHANGE=m.CT_CHANGE;e.KEY_BACKSPACE=8;e.KEY_TAB=9;e.KEY_ENTER=13;e.KEY_SHIFT=16;e.KEY_CTRL=17;e.KEY_ALT=18;e.KEY_PAUSE=19;e.KEY_CAPSLOCK=20;e.KEY_ESC=27;e.KEY_SPACE=32;e.KEY_LEFT=37;e.KEY_UP=38;e.KEY_RIGHT=39;e.KEY_DOWN=40;e.KEY_1=49;e.KEY_2=50;e.KEY_3=51;e.KEY_4=52;e.KEY_5=53;e.KEY_6=54;e.KEY_7=55;e.KEY_8=56;e.KEY_9=57;e.KEY_A=65;e.KEY_B=66;e.KEY_C=67;e.KEY_D=68;e.KEY_E=69;e.KEY_F=70;e.KEY_G=71;e.KEY_H=72;e.KEY_I=73;e.KEY_J=74;e.KEY_K=75;e.KEY_L=76;e.KEY_M=
77;e.KEY_N=78;e.KEY_O=79;e.KEY_P=80;e.KEY_Q=81;e.KEY_R=82;e.KEY_S=83;e.KEY_T=84;e.KEY_U=85;e.KEY_V=86;e.KEY_W=87;e.KEY_X=88;e.KEY_Y=89;e.KEY_Z=90;e.KEY_NUM0=96;e.KEY_NUM1=97;e.KEY_NUM2=98;e.KEY_NUM3=99;e.KEY_NUM4=100;e.KEY_NUM5=101;e.KEY_NUM6=102;e.KEY_NUM7=103;e.KEY_NUM8=104;e.KEY_NUM9=105;e.KEY_MULT=106;e.KEY_ADD=107;e.KEY_SUB=109;e.KEY_DEC_POINT=110;e.KEY_DIV=111;e.KEY_SEMI_COLON=186;e.KEY_EQUAL_SIGN=187;e.KEY_COMMA=188;e.KEY_DASH=189;e.KEY_PERIOD=190;e.KEY_FORWARD_SLASH=191;e.KEY_GRAVE_ACCENT=
192;e.KEY_LEFT_SQ_BRACKET=219;e.KEY_BACK_SLASH=220;e.KEY_RIGHT_SQ_BRACKET=221;e.KEY_SINGLE_QUOTE=222;e.PL_SINGLE_TOUCH_MOVE=m.PL_SINGLE_TOUCH_MOVE;e.PL_MULTITOUCH_MOVE_ZOOM=m.PL_MULTITOUCH_MOVE_ZOOM;e.PL_MULTITOUCH_MOVE_PAN=m.PL_MULTITOUCH_MOVE_PAN;e.PL_MULTITOUCH_MOVE_ROTATE=m.PL_MULTITOUCH_MOVE_ROTATE;e.default_AND_logic_fun=m.default_AND_logic_fun;e.default_OR_logic_fun=m.default_OR_logic_fun;e.create_gamepad_btn_sensor=m.create_gamepad_btn_sensor;e.create_gamepad_axis_sensor=m.create_gamepad_axis_sensor;
e.create_gamepad_position_sensor=m.create_gamepad_position_sensor;e.create_gamepad_orientation_sensor=m.create_gamepad_orientation_sensor;e.create_custom_sensor=m.create_custom_sensor;e.create_keyboard_sensor=m.create_keyboard_sensor;e.create_collision_sensor=function(e,f,n){return m.create_collision_sensor(e,f||"ANY",n||!1)};e.create_collision_impulse_sensor=m.create_collision_impulse_sensor;e.create_ray_sensor=function(e,f,n,a,z,k,c){if(e&&!C.eb(e))v.Ma("No physics for object "+e.name);else return m.create_ray_sensor(e,
f,n,a||"ANY",z||!1,k||!1,c||!1)};e.create_mouse_click_sensor=m.create_mouse_click_sensor;e.create_mouse_wheel_sensor=m.create_mouse_wheel_sensor;e.create_mouse_move_sensor=m.create_mouse_move_sensor;e.create_plock_mouse_sensor=m.create_plock_mouse_sensor;e.create_plock_sensor=m.create_plock_sensor;e.create_touch_move_sensor=m.create_touch_move_sensor;e.create_touch_zoom_sensor=m.create_touch_zoom_sensor;e.create_touch_rotate_sensor=m.create_touch_rotate_sensor;e.create_touch_click_sensor=m.create_touch_click_sensor;
e.create_motion_sensor=m.create_motion_sensor;e.create_vertical_velocity_sensor=m.create_vertical_velocity_sensor;e.create_gyro_angles_sensor=m.create_gyro_angles_sensor;e.create_gyro_quat_sensor=m.create_gyro_quat_sensor;e.create_gyro_delta_sensor=m.create_gyro_delta_sensor;e.create_hmd_quat_sensor=m.create_hmd_quat_sensor;e.create_hmd_position_sensor=m.create_hmd_position_sensor;e.create_timer_sensor=function(e,f){return m.create_timer_sensor(e,f||!1)};e.reset_timer_sensor=m.reset_timer_sensor;
e.create_elapsed_sensor=m.create_elapsed_sensor;e.create_timeline_sensor=m.create_timeline_sensor;e.create_selection_sensor=function(e,f){return m.create_selection_sensor(e,f||!1)};e.create_callback_sensor=function(e,f){return m.create_callback_sensor(e,f||0)};e.set_custom_sensor=function(e,f){m.lT(e,f)};e.get_custom_sensor=function(e){return e.value};e.get_sensor_value=m.get_sensor_value;e.get_sensor_payload=m.get_sensor_payload;e.create_sensor_manifold=function(e,f,n,a,v,k,c){v=v||m.default_AND_logic_fun;
m.create_sensor_manifold(e,f,n,a,v,k,void 0===c?null:c)};e.create_kb_sensor_manifold=function(e,f,n,a,v,k){a=m.create_keyboard_sensor(a);m.create_sensor_manifold(e,f,n,[a],m.default_AND_logic_fun,v,void 0===k?null:k)};e.check_sensor_manifolds=function(e){return m.check_sensor_manifold(e,null)};e.check_sensor_manifold=m.check_sensor_manifold;e.remove_sensor_manifold=m.remove_sensor_manifold;e.reset=m.reset;e.set_plock_smooth_factor=m.set_plock_smooth_factor});w.a=f},function(D,w,f){function M(){return{max_x:0,
min_x:0,max_y:0,min_y:0,max_z:0,min_z:0}}function U(a,b){b.min_x=a.min_x;b.max_x=a.max_x;b.min_y=a.min_y;b.max_y=a.max_y;b.min_z=a.min_z;b.max_z=a.max_z;return b}function n(){return{Da:new Float32Array(3),Cb:new Float32Array(3),Db:new Float32Array(3),Eb:new Float32Array(3)}}function z(a,b){var c=a.max_y,g=a.max_z,k=a.min_x,e=a.min_y,l=a.min_z;a.max_x=Math.max(b.max_x,a.max_x);a.max_y=Math.max(b.max_y,c);a.max_z=Math.max(b.max_z,g);a.min_x=Math.min(b.min_x,k);a.min_y=Math.min(b.min_y,e);a.min_z=Math.min(b.min_z,
l);return a}function e(a,b,c,g){var k=a[b],e=a[b+1],l=a[b+2],f=a[b],d=a[b+1],m=a[b+2];for(b+=3;b<c;b+=3){var B=a[b],u=a[b+1],n=a[b+2];k=Math.max(k,B);e=Math.max(e,u);l=Math.max(l,n);f=Math.min(f,B);d=Math.min(d,u);m=Math.min(m,n)}g.max_x=k;g.max_y=e;g.max_z=l;g.min_x=f;g.min_y=d;g.min_z=m;return g}function m(a,b){b||(b=new Float32Array(24));var c=a.max_x,g=a.max_y,k=a.max_z,e=a.min_x,l=a.min_y;a=a.min_z;b[0]=e;b[1]=l;b[2]=a;b[3]=c;b[4]=l;b[5]=a;b[6]=c;b[7]=g;b[8]=a;b[9]=e;b[10]=g;b[11]=a;b[12]=e;
b[13]=l;b[14]=k;b[15]=c;b[16]=l;b[17]=k;b[18]=c;b[19]=g;b[20]=k;b[21]=e;b[22]=g;b[23]=k;return b}function C(){return{Da:new Float32Array(3),Lb:0}}function v(a,b){b.Da[0]=a.Da[0];b.Da[1]=a.Da[1];b.Da[2]=a.Da[2];b.Lb=a.Lb;return b}function q(){return{Cb:new Float32Array(3),Db:new Float32Array(3),Eb:new Float32Array(3),Da:new Float32Array(3)}}function r(a,b){g.copy(a.Cb,b.Cb);g.copy(a.Db,b.Db);g.copy(a.Eb,b.Eb);g.copy(a.Da,b.Da);return b}function y(a,b,c,g){return{Cb:new Float32Array(a),Db:new Float32Array(b),
Eb:new Float32Array(c),Da:new Float32Array([g[0],g[1],g[2]])}}function a(a,b){var c=E.g(a,K);b=b?E.e(a,c,ca):ea.identity(ca);b=E.L(b,J,A);g.copy(a,F);g.transformMat3(F,b,F);var k=F[0],e=k,l=F[1],f=l,t=F[2],d=t;for(c=3;c<a.length;c+=3){F[0]=a[c];F[1]=a[c+1];F[2]=a[c+2];g.transformMat3(F,b,F);var m=F[0];var B=F[1];var u=F[2];m>k&&(k=m);m<e&&(e=m);B>l&&(l=B);B<f&&(f=B);u>t&&(t=u);u<d&&(d=u)}k=Math.max(k-e,ha);l=Math.max(l-f,ha);t=Math.max(t-d,ha);d=ea.identity(ca);d[0]=0!=k?1/k:1/W;d[4]=0!=l?1/l:1/W;
d[8]=0!=t?1/t:1/W;ea.transpose(b,L);F[0]=a[0];F[1]=a[1];F[2]=a[2];g.transformMat3(F,b,F);g.transformMat3(F,d,F);g.transformMat3(F,L,F);f=F[0];e=F[0];m=F[1];B=F[1];u=F[2];var n=F[2];for(c=3;c<a.length;c+=3)F[0]=a[c],F[1]=a[c+1],F[2]=a[c+2],g.transformMat3(F,b,F),g.transformMat3(F,d,F),g.transformMat3(F,L,F),f=Math.max(f,F[0]),e=Math.min(e,F[0]),m=Math.max(m,F[1]),B=Math.min(B,F[1]),u=Math.max(u,F[2]),n=Math.min(n,F[2]);a=Math.sqrt((f-e)*(f-e)+(m-B)*(m-B)+(u-n)*(u-n))/2;a=Math.min(a,1);O[0]=(f+e)/2;
O[1]=(m+B)/2;O[2]=(u+n)/2;c=O;d=ea.identity(ca);d[0]=k;d[4]=l;d[8]=t;g.transformMat3(c,b,c);g.transformMat3(c,d,c);g.transformMat3(c,L,c);d=[b[0],b[3],b[6]];f=[b[1],b[4],b[7]];b=[b[2],b[5],b[8]];g.scale(d,k*a,d);g.scale(f,l*a,f);g.scale(b,t*a,b);return y(d,f,b,c)}function T(){return{Lb:0,height:0,Da:new Float32Array(3)}}function k(a,b){b.Lb=a.Lb;b.height=a.height;b.Da.set(a.Da);return b}function c(a,b,c){g.add(b,c,a.Da);g.scale(a.Da,.5,a.Da);a.Lb=g.distance(a.Da,b);return a}w.L=function(){return{Bf:M(),
ag:q(),Cf:C()}};w.t=function(a,b){U(a.Bf,b.Bf);r(a.ag,b.ag);v(a.Cf,b.Cf);return b};w.w=M;w.o=U;w.C=n;w.v=function(a,b){g.copy(a.Da,b.Da);g.copy(a.Cb,b.Cb);g.copy(a.Db,b.Db);g.copy(a.Eb,b.Eb);return b};w.f=function(){return{max_x:1E12,min_x:-1E12,max_y:1E12,min_y:-1E12,max_z:1E12,min_z:-1E12}};w.P=function(a){a.max_x=0;a.min_x=0;a.max_y=0;a.min_y=0;a.max_z=0;a.min_z=0;return a};w.n=function(a){var b=M();U(a,b);return b};w.m=function(a){var b=a.max_x-a.min_x,c=a.max_y-a.min_y;c<b&&(b=c);a=a.max_z-a.min_z;
a<b&&(b=a);return b};w.D=z;w.a=e;w.h=function(a,b,c){c||(c=M());a=m(a,u);l.F(a,b,a);return e(a,0,a.length,c)};w.F=m;w.k=function(a,b,c){c||(c=C());l.D(a.Da,b,c.Da);b=l.i(b);c.Lb=a.Lb*(0>b?-b:b);return c};w.i=function(a,b,c){c||(c=q());l.D(a.Da,b,c.Da);g.copy(a.Cb,c.Cb);g.copy(a.Db,c.Db);g.copy(a.Eb,c.Eb);l.y(c.Cb,b,c.Cb);l.y(c.Db,b,c.Db);l.y(c.Eb,b,c.Eb);return c};w.j=function(a,b,c){c||(c=n());l.D(a.Da,b,c.Da);g.copy(a.Cb,c.Cb);g.copy(a.Db,c.Db);g.copy(a.Eb,c.Eb);l.y(c.Cb,b,c.Cb);l.y(c.Db,b,c.Db);
l.y(c.Eb,b,c.Eb);return c};w.l=function(a,b){var c=C();g.copy(b,c.Da);c.Lb=a;return c};w.O=function(a,b,c,k,e){var l=n();g.copy(a,l.Da);g.copy(b,l.Cb);g.copy(c,l.Db);g.copy(k,l.Eb);g.scale(l.Cb,e[0],l.Cb);g.scale(l.Db,e[1],l.Db);g.scale(l.Eb,e[2],l.Eb);return l};w.A=C;w.u=v;w.y=q;w.s=r;w.e=y;w.g=function(a){a||(a=C());g.set(0,0,0,a.Da);a.Lb=1E12;return a};w.E=function(a,b){var c=g.subtract(b.Da,a.Da,g.create());0==g.length(c)&&g.set(1,0,0,c);c=g.normalize(c,g.create());var k=g.scale(c,a.Lb,g.create());
g.add(k,a.Da,k);var e=g.scale(c,-a.Lb,g.create());g.add(e,a.Da,e);var l=g.scale(c,b.Lb,g.create());g.add(l,b.Da,l);var f=g.scale(c,-b.Lb,g.create());g.add(f,b.Da,f);b=[k,e,l,f];c=g.normalize(c,g.create());k=b[0];e=b[0];for(l=1;l<b.length;l++)f=g.dot(b[l],c),f<g.dot(k,c)&&(k=b[l]),f>g.dot(e,c)&&(e=b[l]);c=[k,e];b=c[0];c=c[1];a.Da=g.scale(g.add(b,c,g.create()),.5,g.create());a.Lb=g.length(g.subtract(c,b,g.create()))/2};w.G=function(a,b){g.add(a.Da,a.Db,F);g.add(F,a.Cb,F);g.add(F,a.Eb,F);b.push(F[0],
F[1],F[2]);g.add(a.Da,a.Db,F);g.add(F,a.Cb,F);g.subtract(F,a.Eb,F);b.push(F[0],F[1],F[2]);g.add(a.Da,a.Db,F);g.subtract(F,a.Cb,F);g.add(F,a.Eb,F);b.push(F[0],F[1],F[2]);g.add(a.Da,a.Db,F);g.subtract(F,a.Cb,F);g.subtract(F,a.Eb,F);b.push(F[0],F[1],F[2]);g.subtract(a.Da,a.Db,F);g.add(F,a.Cb,F);g.add(F,a.Eb,F);b.push(F[0],F[1],F[2]);g.subtract(a.Da,a.Db,F);g.add(F,a.Cb,F);g.subtract(F,a.Eb,F);b.push(F[0],F[1],F[2]);g.subtract(a.Da,a.Db,F);g.subtract(F,a.Cb,F);g.add(F,a.Eb,F);b.push(F[0],F[1],F[2]);g.subtract(a.Da,
a.Db,F);g.subtract(F,a.Cb,F);g.subtract(F,a.Eb,F);b.push(F[0],F[1],F[2])};w.z=a;w.x=function(a){var b=n();g.copy(a.Cb,b.Cb);g.copy(a.Db,b.Db);g.copy(a.Eb,b.Eb);g.copy(a.Da,b.Da);return b};w.B=function(a){var b=C();var c=g.length(a.Cb);var k=g.length(a.Db),e=g.length(a.Eb);c=c>k?c:k;b.Da=a.Da;b.Lb=e>c?e:c;return b};w.M=function(a,b){var c=g.length(a.Cb),k=g.length(a.Db);a=g.length(a.Eb);return.75*b.Lb*b.Lb*b.Lb>c*k*a};f.d(w,"I",function(){return T});f.d(w,"K",function(){return T});f.d(w,"J",function(){return T});
w.b=function(a,b){var c=b.max_z;b=b.min_z;var g=Math.max(0,c-b-2*a),k=T();k.Lb=a;k.height=g;k.Da[0]=0;k.Da[1]=0;k.Da[2]=(c+b)/2;return k};w.d=function(a,b){var c=b.max_z;b=b.min_z;var g=Math.max(0,c-b),k=T();k.Lb=a;k.height=g;k.Da[0]=0;k.Da[1]=0;k.Da[2]=(c+b)/2;return k};w.c=function(a,b){var c=b.max_z;b=b.min_z;var g=Math.max(0,c-b),k=T();k.Lb=a;k.height=g;k.Da[0]=0;k.Da[1]=0;k.Da[2]=(c+b)/2;return k};f.d(w,"p",function(){return k});f.d(w,"r",function(){return k});f.d(w,"q",function(){return k});
w.N=function(b){for(var c=0,g=0,k=M(),l=0;l<b.submeshes.length;l++){for(var f=b.submeshes[l],n=f.position,t=0;t<n.length/3;t++){var d=n[3*t],B=n[3*t+1],q=n[3*t+2];c=Math.max(Math.sqrt(d*d+B*B+q*q),c);g=Math.max(Math.sqrt(d*d+B*B),g)}t=f.boundings.bb;n=e(n,0,n.length,M());t.max_x=n.max_x;t.min_x=n.min_x;t.max_y=n.max_y;t.min_y=n.min_y;t.max_z=n.max_z;t.min_z=n.min_z;t=m(n,u);t=a(t,!1);f.boundings.be_cen=t.Da;f.boundings.be_ax=[t.Cb[0],t.Db[1],t.Eb[2]];0==l?U(n,k):z(k,n)}l=b.b4w_boundings.bb;l.max_x=
k.max_x;l.min_x=k.min_x;l.max_y=k.max_y;l.min_y=k.min_y;l.max_z=k.max_z;l.min_z=k.min_z;l=b.b4w_boundings.bb_src;l.max_x=k.max_x;l.min_x=k.min_x;l.max_y=k.max_y;l.min_y=k.min_y;l.max_z=k.max_z;l.min_z=k.min_z;b.b4w_boundings.bs_rad=c;b.b4w_boundings.bc_rad=g;t=m(k,u);t=a(t,!1);b.b4w_boundings.be_cen=t.Da;b.b4w_boundings.be_ax=[t.Cb[0],t.Db[1],t.Eb[2]]};w.H=function(a){var k=a.subarray(0,3),e=a.subarray(6,9),l=a.subarray(12,15),f=a.subarray(18,21);a=g.subtract(e,k,F);g.normalize(a,a);var m=b._10(k,
e,l,R);m=g.cross(m,a,m);g.normalize(m,m);var u=g.create(),t=g.create();g.subtract(e,k,O);t[0]=g.dot(O,a);t[1]=g.dot(O,m);e=g.create();g.subtract(l,k,O);e[0]=g.dot(O,a);e[1]=g.dot(O,m);l=g.create();g.subtract(f,k,O);l[0]=g.dot(O,a);l[1]=g.dot(O,m);f=C();l=[u,t,e,l];u=c(f,l[0],l[1]);for(f=2;f<l.length;f++)if(g.distance(u.Da,l[f])>u.Lb){var d=u;u=l;t=l[f];e=f-1;d=c(d,t,u[0]);for(var n=1;n<=e;n++)if(g.distance(d.Da,u[n])>d.Lb){var B=d;d=u;var q=t,r=u[n],v=n-1;B=c(B,q,r);for(var J=0;J<=v;J++)if(g.distance(B.Da,
d[J])>B.Lb){var A=q,W=r,y=d[J],E=g.subtract(W,y,O);E=g.squaredLength(E);var L=g.subtract(A,y,O),z=g.squaredLength(L);L=g.subtract(A,W,O);var T=g.squaredLength(L);L=E*(z+T-E);var K=z*(T+E-z);E=T*(E+z-T);z=L+K+E;g.copy(A,B.Da);g.scale(B.Da,L/z,B.Da);g.scaleAndAdd(B.Da,W,K/z,B.Da);g.scaleAndAdd(B.Da,y,E/z,B.Da);B.Lb=g.distance(B.Da,A)}d=B}u=d}f=u;a=g.scale(a,f.Da[0],O);g.scaleAndAdd(a,m,f.Da[1],a);g.add(a,k,f.Da);return f};var l=f(6),b=f(2),g=f(3),E=f(42),ea=f(27),u=new Float32Array(24),F=new Float32Array(3),
R=new Float32Array(3),O=new Float32Array(3),K=new Float32Array(3),A=new Float32Array(9),ca=new Float32Array(9),L=new Float32Array(9),ha=.001,J=5E-4,W=ha/2},function(D,w,f){D=f(0);var M=f(5),U=f(35),n=f(31),z=f(1),e=f(8),m=f(36),C=f(2),v=f(3);f=Object(D.a)("util",function(f,r){var q=Object(M.a)(f),a=Object(U.a)(f),T=Object(n.a)(f),k=Object(z.a)(f);r.AXIS_X=new Float32Array([1,0,0]);r.AXIS_Y=new Float32Array([0,1,0]);r.AXIS_Z=new Float32Array([0,0,1]);r.AXIS_MX=new Float32Array([-1,0,0]);r.AXIS_MY=
new Float32Array([0,-1,0]);r.AXIS_MZ=new Float32Array([0,0,-1]);r.XYX=C.o;r.YZY=C.v;r.ZXZ=C.x;r.XZX=C.q;r.YXY=C.s;r.ZYZ=C.z;r.XYZ=C.p;r.YZX=C.u;r.ZXY=C.w;r.XZY=C.r;r.YXZ=C.t;r.ZYX=C.y;r.f32=function(a){return C._1(a||0)};r.assert=q.assert;r.keyfind=C._18;r.keysearch=C._19;r.matrix_to_quat=function(a){return C._24(a)};r.euler_to_quat=function(a,k){k||(k=new Float32Array(4));return C.Y(a,k)};r.ordered_angles_to_quat=function(a,k,b){b||(b=e.create());return C._27(a,k,b)};r.quat_to_ordered_angles=function(a,
k,b){b||(b=v.create());return C._37(a,k,b)};r.quat_to_euler=function(a,k){k||(k=new Float32Array(3));return C._36(a,k)};r.sign=C._50;r.clamp=C.M;r.quat_to_dir=C._34;r.ground_project_cam_quat=function(a,k){return C._30(a,C.c,C.f,C.e,k)};r.cam_quat_to_mesh_quat=function(a,k){return C.I(a,k)};r.quat_project=function(a,e,b,g,f){return 0!=v.dot(b,g)?(k.error("Wrong in-plane direction"),null):C._30(a,e,b,g,f)};r.hash_code=function(){return T.hash_code.apply(T,arguments)};r.smooth=C._51;r.smooth_v=C._54;
r.is_vector=C._16;r.correct_cam_quat_up=C.R;r.quat_to_angle_axis=C._33;r.random_from_array=C._41;r.horizontal_direction=C._12;r.angle_wrap_0_2pi=C.A;r.angle_wrap_periodic=C.B;r.smooth_step=C._53;r.lerp=C._20;r.deg_to_rad=C.T;r.rad_to_deg=C._39;r.dir_to_quat=C.U;r.is_ie11=a.is_ie11;r.gen_tbn_quats=function(a,e){k.Ma("util.gen_tbn_quats() deprecated. Do not use it anymore.");return m.d(a,e)};r.trunc=C._64});w.a=f},function(D,w,f){function M(f,z,e){var m=f[0],n=f[1],v=f[2],q=f[3],r=f[4],y=f[5],a=f[6],
T=f[7];f=f[8];var k=z[0],c=z[1],l=z[2],b=z[3],g=z[4],E=z[5],ea=z[6],u=z[7];z=z[8];e[0]=k*m+c*q+l*a;e[1]=k*n+c*r+l*T;e[2]=k*v+c*y+l*f;e[3]=b*m+g*q+E*a;e[4]=b*n+g*r+E*T;e[5]=b*v+g*y+E*f;e[6]=ea*m+u*q+z*a;e[7]=ea*n+u*r+z*T;e[8]=ea*v+u*y+z*f;return e}Object.defineProperty(w,"__esModule",{value:!0});w.create=function(){var f=new U(9);f[0]=1;f[1]=0;f[2]=0;f[3]=0;f[4]=1;f[5]=0;f[6]=0;f[7]=0;f[8]=1;return f};w.fromMat4=function(f,z){z[0]=f[0];z[1]=f[1];z[2]=f[2];z[3]=f[4];z[4]=f[5];z[5]=f[6];z[6]=f[8];z[7]=
f[9];z[8]=f[10];return z};w.clone=function(f){var n=new U(9);n[0]=f[0];n[1]=f[1];n[2]=f[2];n[3]=f[3];n[4]=f[4];n[5]=f[5];n[6]=f[6];n[7]=f[7];n[8]=f[8];return n};w.copy=function(f,z){z[0]=f[0];z[1]=f[1];z[2]=f[2];z[3]=f[3];z[4]=f[4];z[5]=f[5];z[6]=f[6];z[7]=f[7];z[8]=f[8];return z};w.identity=function(f){f[0]=1;f[1]=0;f[2]=0;f[3]=0;f[4]=1;f[5]=0;f[6]=0;f[7]=0;f[8]=1;return f};w.transpose=function(f,z){if(z===f){var e=f[1],m=f[2],n=f[5];z[1]=f[3];z[2]=f[6];z[3]=e;z[5]=f[7];z[6]=m;z[7]=n}else z[0]=f[0],
z[1]=f[3],z[2]=f[6],z[3]=f[1],z[4]=f[4],z[5]=f[7],z[6]=f[2],z[7]=f[5],z[8]=f[8];return z};w.invert=function(f,z){var e=f[0],m=f[1],n=f[2],v=f[3],q=f[4],r=f[5],y=f[6],a=f[7];f=f[8];var T=f*q-r*a,k=-f*v+r*y,c=a*v-q*y,l=e*T+m*k+n*c;if(!l)return null;l=1/l;z[0]=T*l;z[1]=(-f*m+n*a)*l;z[2]=(r*m-n*q)*l;z[3]=k*l;z[4]=(f*e-n*y)*l;z[5]=(-r*e+n*v)*l;z[6]=c*l;z[7]=(-a*e+m*y)*l;z[8]=(q*e-m*v)*l;return z};w.adjoint=function(f,z){var e=f[0],m=f[1],n=f[2],v=f[3],q=f[4],r=f[5],y=f[6],a=f[7];f=f[8];z[0]=q*f-r*a;z[1]=
n*a-m*f;z[2]=m*r-n*q;z[3]=r*y-v*f;z[4]=e*f-n*y;z[5]=n*v-e*r;z[6]=v*a-q*y;z[7]=m*y-e*a;z[8]=e*q-m*v;return z};w.determinant=function(f){var n=f[3],e=f[4],m=f[5],C=f[6],v=f[7],q=f[8];return f[0]*(q*e-m*v)+f[1]*(-q*n+m*C)+f[2]*(v*n-e*C)};w.multiply=M;f.d(w,"mul",function(){return M});w.translate=function(f,z,e){var m=f[0],n=f[1],v=f[2],q=f[3],r=f[4],y=f[5],a=f[6],T=f[7];f=f[8];var k=z[0];z=z[1];e[0]=m;e[1]=n;e[2]=v;e[3]=q;e[4]=r;e[5]=y;e[6]=k*m+z*q+a;e[7]=k*n+z*r+T;e[8]=k*v+z*y+f;return e};w.rotate=
function(f,z,e){var m=f[0],n=f[1],v=f[2],q=f[3],r=f[4],y=f[5],a=f[6],T=f[7];f=f[8];var k=Math.sin(z);z=Math.cos(z);e[0]=z*m+k*q;e[1]=z*n+k*r;e[2]=z*v+k*y;e[3]=z*q-k*m;e[4]=z*r-k*n;e[5]=z*y-k*v;e[6]=a;e[7]=T;e[8]=f;return e};w.scale=function(f,z,e){var m=z[0];z=z[1];e[0]=m*f[0];e[1]=m*f[1];e[2]=m*f[2];e[3]=z*f[3];e[4]=z*f[4];e[5]=z*f[5];e[6]=f[6];e[7]=f[7];e[8]=f[8];return e};w.fromTranslation=function(f,z){z[0]=1;z[1]=0;z[2]=0;z[3]=0;z[4]=1;z[5]=0;z[6]=f[0];z[7]=f[1];z[8]=1;return z};w.fromRotation=
function(f,z){var e=Math.sin(f);f=Math.cos(f);z[0]=f;z[1]=e;z[2]=0;z[3]=-e;z[4]=f;z[5]=0;z[6]=0;z[7]=0;z[8]=1;return z};w.fromScaling=function(f,z){z[0]=f[0];z[1]=0;z[2]=0;z[3]=0;z[4]=f[1];z[5]=0;z[6]=0;z[7]=0;z[8]=1;return z};w.fromMat2d=function(f,z){z[0]=f[0];z[1]=f[1];z[2]=0;z[3]=f[2];z[4]=f[3];z[5]=0;z[6]=f[4];z[7]=f[5];z[8]=1;return z};w.fromQuat=function(f,z){var e=f[0],m=f[1],n=f[2];f=f[3];var v=e+e,q=m+m,r=n+n;e*=v;var y=m*v;m*=q;var a=n*v,T=n*q;n*=r;v=f*v;q=f*q;f*=r;z[0]=1-m-n;z[3]=y-f;
z[6]=a+q;z[1]=y+f;z[4]=1-e-n;z[7]=T-v;z[2]=a-q;z[5]=T+v;z[8]=1-e-m;return z};w.normalFromMat4=function(f,z){var e=f[0],m=f[1],n=f[2],v=f[3],q=f[4],r=f[5],y=f[6],a=f[7],T=f[8],k=f[9],c=f[10],l=f[11],b=f[12],g=f[13],E=f[14];f=f[15];var ea=e*r-m*q,u=e*y-n*q,F=e*a-v*q,R=m*y-n*r,O=m*a-v*r,K=n*a-v*y,A=T*g-k*b,w=T*E-c*b;T=T*f-l*b;var L=k*E-c*g;k=k*f-l*g;c=c*f-l*E;l=ea*c-u*k+F*L+R*T-O*w+K*A;if(!l)return null;l=1/l;z[0]=(r*c-y*k+a*L)*l;z[1]=(y*T-q*c-a*w)*l;z[2]=(q*k-r*T+a*A)*l;z[3]=(n*k-m*c-v*L)*l;z[4]=(e*
c-n*T+v*w)*l;z[5]=(m*T-e*k-v*A)*l;z[6]=(g*K-E*O+f*R)*l;z[7]=(E*F-b*K-f*u)*l;z[8]=(b*O-g*F+f*ea)*l;return z};w.str=function(f){return"mat3("+f[0]+", "+f[1]+", "+f[2]+", "+f[3]+", "+f[4]+", "+f[5]+", "+f[6]+", "+f[7]+", "+f[8]+")"};w.frob=function(f){return Math.sqrt(Math.pow(f[0],2)+Math.pow(f[1],2)+Math.pow(f[2],2)+Math.pow(f[3],2)+Math.pow(f[4],2)+Math.pow(f[5],2)+Math.pow(f[6],2)+Math.pow(f[7],2)+Math.pow(f[8],2))};var U="undefined"!==typeof Float32Array?Float32Array:Array},function(D,w,f){D=f(0);
var M=f(4),U=f(1);f=Object(D.a)("__extensions",function(f,z){function e(){return y.Ib?v("OES_texture_float_linear"):n("OES_texture_float_linear")}function m(){return y.Ib?v("EXT_color_buffer_float"):n("WEBGL_color_buffer_float")}function n(k){if(k in T)return T[k];var c=a.getExtension(k)||null;T[k]=c;r.log("%cGET EXTENSION","color: #"+(c?"0a0":"a00"),k);return c}function v(k){if(k in T)return T[k];switch(k){case "WEBGL_depth_texture":case "OES_element_index_uint":case "OES_standard_derivatives":case "EXT_shader_texture_lod":case "OES_texture_float":case "OES_texture_half_float":var c=
{};break;case "ANGLE_instanced_arrays":case "OES_vertex_array_object":c=a;break;default:c=a.getExtension(k)||null}T[k]=c;r.log("%cGET EXTENSION (WebGL 2)","color: #"+(c?"0a0":"a00"),k);return c}var q=Object(M.a)(f),r=Object(U.a)(f),y=q.wa,a=null,T={};z.fh=function(k){a=k};z.YF=function(){return n("WEBGL_compressed_texture_s3tc")||n("WEBKIT_WEBGL_compressed_texture_s3tc")};z.XF=function(){return n("WEBKIT_WEBGL_compressed_texture_pvrtc")||n("WEBGL_compressed_texture_pvrtc")};z.gQ=function(){return y.Ib?
v("WEBGL_depth_texture"):n("WEBGL_depth_texture")||n("WEBKIT_WEBGL_depth_texture")};z.zQ=function(){return y.Ib?v("OES_texture_float"):n("OES_texture_float")};z.BQ=function(){return y.Ib?v("OES_texture_half_float"):n("OES_texture_half_float")};z.AQ=e;z.CQ=function(){return y.Ib?e():n("OES_texture_half_float_linear")};z.YP=m;z.ZP=function(){return y.Ib?m():n("EXT_color_buffer_half_float")};z.aA=function(){return n("EXT_texture_filter_anisotropic")||n("WEBKIT_EXT_texture_filter_anisotropic")};z.jA=
function(){return y.Ib?v("EXT_shader_texture_lod"):n("EXT_shader_texture_lod")};z.dQ=function(){return n("WEBGL_debug_shaders")};z.get_renderer_info=function(){return n("WEBGL_debug_renderer_info")};z.TF=function(){return y.Ib?v("OES_element_index_uint"):n("OES_element_index_uint")};z.iA=function(){return y.Ib?v("OES_standard_derivatives"):n("OES_standard_derivatives")};z.eA=function(){var k=y.Ib?v("EXT_disjoint_timer_query_webgl2"):n("EXT_disjoint_timer_query");return null==k?k:k.createQueryEXT?
{createQuery:function(){return k.createQueryEXT()},beginQuery:function(a){k.beginQueryEXT(k.TIME_ELAPSED_EXT,a)},endQuery:function(){k.endQueryEXT(k.TIME_ELAPSED_EXT)},OF:function(a){return k.getQueryObjectEXT(a,k.QUERY_RESULT_AVAILABLE_EXT)},PF:function(a){return k.getQueryObjectEXT(a,k.QUERY_RESULT_EXT)},NF:function(){return a.getParameter(k.GPU_DISJOINT_EXT)}}:{createQuery:function(){return a.createQuery()},beginQuery:function(c){a.beginQuery(k.TIME_ELAPSED_EXT,c)},endQuery:function(){a.endQuery(k.TIME_ELAPSED_EXT)},
OF:function(c){return a.getQueryParameter(c,a.QUERY_RESULT_AVAILABLE)},PF:function(c){return a.getQueryParameter(c,a.QUERY_RESULT)},NF:function(){return a.getParameter(k.GPU_DISJOINT_EXT)}}};z.tQ=function(){if(y.Ib)return v("ANGLE_instanced_arrays");var a=n("ANGLE_instanced_arrays");return null==a?a:{drawElementsInstanced:function(c,k,b,g,e){a.drawElementsInstancedANGLE(c,k,b,g,e)},vertexAttribDivisor:function(c,k){a.vertexAttribDivisorANGLE(c,k)},drawArraysInstanced:function(c,k,b,g){a.drawArraysInstancedANGLE(c,
k,b,g)}}};z.lA=function(){if(y.Ib)return v("OES_vertex_array_object");var a=n("OES_vertex_array_object");return null==a?a:{bindVertexArray:function(c){a.bindVertexArrayOES(c)},createVertexArray:function(){return a.createVertexArrayOES()},deleteVertexArray:function(c){a.deleteVertexArrayOES(c)},isVertexArray:function(c){return a.isVertexArrayOES(c)}}};z.cleanup=function(){T={}};z.reset=function(){a=null}});w.a=f},function(D,w,f){D=f(0);var M=f(5),U=f(2);f=Object(D.a)("__graph",function(f,z){function e(a,
b,c){c||(c=null);m(a,b)?B.va("Graph already has node with given ID"):a.Ha.push(b,c)}function m(a,b){a=a.Ha;for(var c=0;c<a.length;c+=2)if(a[c]==b)return!0;return!1}function n(a,b,c,g){g||(g=null);m(a,b)&&m(a,c)?a.nb.push(b,c,g):B.va("Wrong node IDs")}function v(a,b){m(a,b)||B.va("Node not found");a=a.Ha;for(var c=0;c<a.length;c+=2)a[c]==b&&(a.splice(c,2),c-=2)}function q(a,b,c,g){L(a,b,c)||B.va("Edge not found");a=a.nb;for(var k=0,e=0;e<a.length;e+=3)if(a[e]==b&&a[e+1]==c){if(-1==g)a.splice(e,3);
else{if(g==k){a.splice(e,3);break}k++}e-=3}}function r(a){a=a.Ha;for(var b=-1,c=0;c<a.length;c+=2)b=Math.max(b,a[c]);return++b}function y(a,b){a=a.Ha;for(var c=0;c<a.length;c+=2)if(a[c+1]==b)return a[c];return-1}function a(a){var b=[],c={};T(a,c);for(var g=a.Ha,e=0;e<g.length;e+=2)0==K(a,g[e])&&k(a,g[e],c,b);return{Ha:b,nb:a.nb.slice(0)}}function T(a,b){a=a.Ha;for(var c=0;c<a.length;c+=2)b[a[c]]=!1}function k(a,b,c,g){if(!c[b]){c[b]=!0;for(var e=0;e<O(a,b);e++)k(a,A(a,b,e),c,g);g.unshift(b,R(a,b))}}
function c(a,b,g,k){if(!g[b]){g[b]=!0;if(10==k||30==k)for(var e=0;e<O(a,b);e++){var f=A(a,b,e);c(a,f,g,k)}if(20==k||30==k)for(e=0;e<K(a,b);e++)f=w(a,b,e),c(a,f,g,k)}}function l(a){for(var b=a.nb,c=0;c<b.length;c+=3){var g=b[c+1];m(a,b[c])&&m(a,g)||(b.splice(c,3),c-=3)}}function b(a){for(var b=[],c=a.Ha,g=0;g<c.length;g+=2){var k=c[g];O(a,k)||b.push(k)}return b}function g(a){var b=a.Ha;a=a.nb;for(var c=[],g=[],k=[],e=0;e<b.length;e++)k[b[2*e]]=e,c.push(e,b[2*e+1]);for(e=0;e<a.length;e+=3)g.push(k[a[e]],
k[a[e+1]],a[e+2]);return{Ha:c,nb:g}}function E(a,b,c){if(c.Ri==c.Cl){for(var g=0,k=0;g<c.Cl;g++)-1!=c.Rj[g]&&(a[k]=g,b[k]=c.Rj[g],k++);return!0}if(c.Cl>c.gp||c.Zl>c.$l||c.Tp>c.Vp||c.Sp>c.Up)return!1;k=g=-1;for(var e=!1;!e&&ea(c,ba,g,k);)if(g=ba[0],k=ba[1],u(c,g,k)){var d=c;e={};e.Kr=d.Kr;e.Lr=d.Lr;e.jB=d.jB;e.Vu=d.Vu;e.Cl=d.Cl;e.gp=d.gp;e.order=d.order;e.Ri=e.Hw=d.Ri;e.Sp=d.Sp;e.Tp=d.Tp;e.Zl=d.Zl;e.Up=d.Up;e.Vp=d.Vp;e.$l=d.$l;e.Dq=-1;e.Rj=d.Rj;e.Gm=d.Gm;e.$m=d.$m;e.an=d.an;e.sn=d.sn;e.tn=d.tn;e.lx=
d.lx;d.lx[0]+=1;e=d=e;var f=g,l=k,p=e.Kr,m=e.Lr,B=e.Cl,n=e.gp,q=e.Rj,r=e.Gm,v=e.$m,J=e.an,I=e.sn,W=e.tn;F(f<B);F(l<n);F(e.Ri<B);F(e.Ri<n);B=++e.Ri;e.Dq=f;v[f]||(v[f]=B,e.Sp++,I[f]&&e.Zl++);I[f]||(I[f]=B,e.Tp++,v[f]&&e.Zl++);J[l]||(J[l]=B,e.Up++,W[l]&&e.$l++);W[l]||(W[l]=B,e.Vp++,J[l]&&e.$l++);q[f]=l;r[l]=f;for(q=0;q<K(p,f);q++)r=w(p,f,q),v[r]||(v[r]=B,e.Sp++,I[r]&&e.Zl++);for(q=0;q<O(p,f);q++)r=A(p,f,q),I[r]||(I[r]=B,e.Tp++,v[r]&&e.Zl++);for(q=0;q<K(m,l);q++)r=w(m,l,q),J[r]||(J[r]=B,e.Up++,W[r]&&
e.$l++);for(q=0;q<O(m,l);q++)r=A(m,l,q),W[r]||(W[r]=B,e.Vp++,J[r]&&e.$l++);e=E(a,b,d);F(1>=d.Ri-d.Hw);F(-1!=d.Dq);r=d.Kr;f=d.Lr;l=d.Ri;p=d.Dq;m=d.Rj;v=d.Gm;B=d.$m;J=d.an;n=d.sn;I=d.tn;if(d.Hw<l){B[p]==l&&(B[p]=0);for(W=0;W<K(r,p);W++)q=w(r,p,W),B[q]==l&&(B[q]=0);n[p]==l&&(n[p]=0);for(W=0;W<O(r,p);W++)q=A(r,p,W),n[q]==l&&(n[q]=0);r=m[p];J[r]==l&&(J[r]=0);for(W=0;W<K(f,r);W++)q=w(f,r,W),J[q]==l&&(J[q]=0);I[r]==l&&(I[r]=0);for(W=0;W<O(f,r);W++)q=A(f,r,W),I[q]==l&&(I[q]=0);m[p]=-1;v[r]=-1;d.Ri=d.Hw;d.Dq=
-1}}return e}function ea(a,b,c,g){-1==c&&(c=0);-1==g?g=0:g++;var k=a.Zl,e=a.$l,d=a.Tp,f=a.Vp,l=a.Sp,p=a.Up,m=a.Ri,u=a.Cl,B=a.gp,q=a.Rj,n=a.Gm,r=a.$m,v=a.an,J=a.sn,A=a.tn;if(k>m&&e>m)for(;c<u&&(-1!=q[c]||0==J[c]||0==r[c]);)c++,g=0;else if(d>m&&f>m)for(;c<u&&(-1!=q[c]||0==J[c]);)c++,g=0;else if(l>m&&p>m)for(;c<u&&(-1!=q[c]||0==r[c]);)c++,g=0;else if(0==c&&0!=a.order){for(r=0;r<u&&-1!=q[c=a.order[r]];)r++;r==u&&(c=u)}else for(;c<u&&-1!=q[c];)c++,g=0;if(k>m&&e>m)for(;g<B&&(-1!=n[g]||0==A[g]||0==v[g]);)g++;
else if(d>m&&f>m)for(;g<B&&(-1!=n[g]||0==A[g]);)g++;else if(l>m&&p>m)for(;g<B&&(-1!=n[g]||0==v[g]);)g++;else for(;g<B&&-1!=n[g];)g++;return c<u&&g<B?(b[0]=c,b[1]=g,!0):!1}function u(a,b,c){var g=a.Kr,k=a.Lr,e=a.gp,d=a.Rj,f=a.Gm,l=a.$m,p=a.an,m=a.sn,u=a.tn;F(b<a.Cl);F(c<e);F(-1==d[b]);F(-1==f[c]);if(!(0,a.jB)(R(g,b),R(k,c)))return!1;for(var B=e=0,q=0,n=0,r=0,v=0,J=0;J<O(g,b);J++){var W=A(g,b,J);if(-1!=d[W]){var I=d[W];if(!L(k,c,I)||!ha(a.Vu,g,b,W,k,c,I))return!1}else l[W]&&q++,m[W]&&e++,l[W]||m[W]||
r++}for(J=0;J<K(g,b);J++)if(W=w(g,b,J),-1!=d[W]){if(I=d[W],!L(k,I,c)||!ha(a.Vu,g,W,b,k,I,c))return!1}else l[W]&&q++,m[W]&&e++,l[W]||m[W]||r++;for(J=0;J<O(k,c);J++)if(I=A(k,c,J),-1!=f[I]){if(W=f[I],!L(g,b,W))return!1}else p[I]&&n++,u[I]&&B++,p[I]||u[I]||v++;for(J=0;J<K(k,c);J++)if(I=w(k,c,J),-1!=f[I]){if(W=f[I],!L(g,W,b))return!1}else p[I]&&n++,u[I]&&B++,p[I]||u[I]||v++;return q<=n&&e<=B&&r<=v}function F(a){a||B.va("Assertion failed")}function R(a,b){a=a.Ha;for(var c=0;c<a.length;c+=2)if(a[c]==b)return a[c+
1];return null}function O(a,b){a=a.nb;for(var c=0,g=0;g<a.length;g+=3)a[g]==b&&c++;return c}function K(a,b){a=a.nb;for(var c=0,g=0;g<a.length;g+=3)a[g+1]==b&&c++;return c}function A(a,b,c){a=a.nb;for(var g=0,k=0;k<a.length;k+=3)if(a[k]==b){if(g==c)return a[k+1];g++}return-1}function w(a,b,c){a=a.nb;for(var g=0,k=0;k<a.length;k+=3)if(a[k+1]==b){if(g==c)return a[k];g++}return-1}function L(a,b,c){a=a.nb;for(var g=0;g<a.length;g+=3)if(a[g]==b&&a[g+1]==c)return!0;return!1}function ha(a,b,c,g,k,e,d){for(var f=
J(b,c,g),l=J(k,e,d),p=0;p<f;p++){for(var t=!1,m=0;m<l;m++)if(a(W(b,c,g,p),W(k,e,d,m))){t=!0;break}if(!t)return!1}return!0}function J(a,b,c){var g=0;a=a.nb;for(var k=0;k<a.length;k+=3)a[k]==b&&a[k+1]==c&&g++;return g}function W(a,b,c,g){a=a.nb;for(var k=0,e=0;e<a.length;e+=3)if(a[e]==b&&a[e+1]==c){if(k==g)return a[e+2];k++}return null}var B=Object(M.a)(f),ba=[-1,-1];z.Sy=-1;z.eW=10;z.Sk=20;z.mW=30;z.create=function(){for(var a=arguments,b=[],c=[],g=0;g<a.length;g++){var k=a[g];switch(k.length){case 2:b.push(k[0],
k[1]);break;case 3:c.push(k[0],k[1],k[2]);break;default:B.va("Wrong graph constructor params")}}return{Ha:b,nb:c}};z.clone=function(a,b,c){if(b)for(var g=Array(a.Ha.length),k=0;k<a.Ha.length;k+=2)g[k]=a.Ha[k],g[k+1]=b(a.Ha[k+1]);else g=U.O(a.Ha);if(c)for(b=Array(a.nb.length),k=0;k<a.nb.length;k+=3)b[k]=a.nb[k],b[k+1]=a.nb[k+1],b[k+2]=c(a.nb[k+2]);else b=U.O(a.nb);return a={Ha:g,nb:b}};z.fX=function(a,b){for(var c=[],g=[],k=0;k<a.length;k++)c.push(a[k][0],a[k][1]);for(k=0;k<b.length;k++)g.push(b[k][0],
b[k][1],b[k][2]);return{Ha:c,nb:g}};z.$h=e;z.NX=m;z.gd=n;z.rf=v;z.Ol=q;z.vi=function(a,b,c,g){L(a,b,c)||B.va("Edge not found");a=a.nb;for(var k=0;k<a.length;k+=3)if(a[k]==b&&a[k+1]==c&&a[k+2][0]==g[0]&&a[k+2][1]==g[1]){a.splice(k,3);break}};z.Fa=function(a,b){if(-1==y(a,b)){var c=r(a);e(a,c,b);return c}B.va("Non-unique attribute")};z.YS=function(a,b,c,g,k){a=a.nb;for(var e=0;e<a.length;e+=3)a[e]==b&&a[e+1]==c&&a[e+2]==g&&(a[e+2]=k)};z.RD=function(a,b,c,g){c=c||[];g=g||[];for(var k={},f=0;f<a.Ha.length;f+=
2){var d=a.Ha[f],l=r(b);e(b,l,a.Ha[f+1]);k[d]=l}for(f=0;f<a.nb.length;f+=3){l=k[a.nb[f]];var p=k[a.nb[f+1]];d=a.nb[f+2];n(b,l,p,d)}for(f=0;f<c.length;f+=3)l=k[c[f]],a=c[f+1],d=c[f+2],n(b,l,a,d);for(f=0;f<g.length;f+=3)c=g[f],p=k[g[f+1]],d=g[f+2],n(b,c,p,d)};z.ak=r;z.pk=y;z.ra=function(a,b,c,g){b=y(a,b);c=y(a,c);-1!=b&&-1!=c?n(a,b,c,g):B.va("Attributes not found")};z.Na=function(a,b){a=a.Ha;for(var c=0;c<a.length&&!b(a[c],a[c+1]);c+=2);};z.Uh=function(a,b){a=a.nb;for(var c=0;c<a.length&&!b(a[c],a[c+
1],a[c+2]);c+=3);};z.Lk=function(a,b,c){for(var g=a.nb,k=0;k<g.length;k+=3)if(g[k+1]==b){var e=g[k];if(c(e,R(a,e),g[k+2]))break}};z.cm=function(a,b,c){for(var g=a.nb,k=0;k<g.length;k+=3)if(g[k]==b){var e=g[k+1];if(c(e,R(a,e),g[k+2]))break}};z.uC=a;z.FU=function(b){b=a(b).Ha;for(var c=[],g=0;g<b.length;g+=2)c.push(b[g+1]);return c};z.bY=function(){};z.Xl=function(a,b,g){m(a,b)||B.va("No such node");var k={};T(a,k);c(a,b,k,g);b=[];for(var e in k)k[e]&&(e=Number(e),b.push(e,R(a,e)));a={Ha:b,nb:a.nb.slice(0)};
l(a);return a};z.$q=l;z.xQ=function(a){for(var b=[],c=a.Ha,g=0;g<c.length;g+=2){var k=c[g];K(a,k)||b.push(k)}return b};z.Or=b;z.match=function(a,b,c,k){var e={};e.Kr=g(a);e.Lr=g(b);e.jB=c||function(a,b){return a==b};e.Vu=k||function(a,b){return a==b};k=a.Ha.length/2;var f=b.Ha.length/2;e.Cl=k;e.gp=f;e.order=0;e.Ri=e.Hw=0;e.Zl=e.Sp=e.Tp=0;e.$l=e.Up=e.Vp=0;e.Dq=-1;e.Rj=Array(k);e.Gm=Array(f);e.$m=Array(k);e.an=Array(f);e.sn=Array(k);e.tn=Array(f);e.lx=[1];for(c=0;c<k;c++)e.Rj[c]=-1,e.$m[c]=0,e.sn[c]=
0;for(c=0;c<f;c++)e.Gm[c]=-1,e.an[c]=0,e.tn[c]=0;f=Array(k);k=Array(k);if(E(f,k,e)){for(c=0;c<f.length;c++)f[c]=a.Ha[2*f[c]],k[c]=b.Ha[2*k[c]];return[f,k]}return null};z.fA=function(a,b){a=a.Ha;for(var c=1;c<a.length;c+=2)if(a[c]==b)return a[c-1];return null};z.Kb=R;z.ah=O;z.bj=K;z.Ch=A;z.Tg=w;z.zX=J;z.td=W;z.replace=function(a,b,c){for(var g=a.nb,k=r(a),f=0;f<b.length;f++){var d=b[f];v(a,d);for(var l=0;l<g.length;l+=3)g[l]==d&&(g[l]=k),g[l+1]==d&&(g[l+1]=k),g[l]==g[l+1]&&(g.splice(l,3),l-=3)}e(a,
k,c)};z.OS=function(a,b,c,g,k){L(a,b,c)||B.va("Edge not found");a=a.nb;for(var e=0;e<a.length;e+=3)a[e]==b&&a[e+1]==c&&(a[e]=g,a[e+1]=k)};z.iP=function(a,c){function g(a,b){if(-1!=l.indexOf(a)){var d=l.slice(l.indexOf(a));if(-1!=e[d[d.length-1]].indexOf(d[0])){m.push([a,d[d.length-1]]);return}}l.push(a);for(a=0;a<b.length;a++)b[a]in e&&g(b[a],e[b[a]])}c||(c=b(a)[0]);var k=a.nb;if(k.length&&-1!=k.indexOf(c)){for(var e={},f=0,d=0;d<k.length;d+=3)k[d+1]in e?e[k[d+1]].push(k[d]):e[k[d+1]]=[k[d]],f++;
var l=[],m=[];g(c,e[c]);for(d=0;d<m.length;d++)for(c=f=0;c<k.length;c+=3)m[d][1]==k[c+1]&&m[d][0]==k[c]&&q(a,k[c],k[c+1],f),f++}};z.iF=function(a,b,c){var g=a.Ha;a=a.nb;var k="digraph debug {\n    node [shape=box];\n";for(var e=0;e<g.length;e+=2){var d=g[e],f=g[e+1];f=b?b(d,f):String(d);k+="    ";k+=String(d)+' [label="'+f.replace(/"/g,'\\"')+'"];\n'}for(e=0;e<a.length;e+=3)b=a[e],g=a[e+1],f=a[e+2],k+="    ",k+=String(b)+" -> "+String(g),c&&(k+=' [label="'+c(b,g,f)+'"]'),k+=";\n";return k+"}"}});
w.a=f},function(D,w,f){D=f(0);var M=f(16),U=f(14),n=f(15),z=f(43),e=f(29),m=f(12),C=f(9),v=f(1),q=f(19),r=f(10),y=f(11),a=f(2);f=Object(D.a)("scenes",function(f,k){function c(){var a=E.get_canvas();return F.pick_object(a.clientWidth/2,a.clientHeight/2)}function l(a){return R.kc(a)||R.is_empty(a)||R.is_line(a)||R.is_lamp(a)}var b=Object(M.a)(f),g=Object(U.a)(f),E=Object(n.a)(f),T=Object(z.a)(f),u=Object(e.a)(f),F=Object(m.a)(f),R=Object(C.a)(f),O=Object(v.a)(f),K=Object(q.a)(f),A=Object(r.a)(f),w=
Object(y.a)(f);k.DATA_ID_ALL=F.DATA_ID_ALL;k.set_active=function(b){var c=A.Mr();A.set_active(a._19("name",b,c))};k.get_active=function(){return A.zb()?A.get_active().name:""};k.get_scenes=function(){for(var a=A.Mr(),b=[],c=0;c<a.length;c++)b.push(a[c].name);return b};k.get_active_camera=function(){if(A.zb())return A.ml(A.get_active());O.error("No active scene");return!1};k.get_object_by_name=function(a,b){if(b=F.Cd(F.Oy,a,b|0,!0))return b;O.error("get object "+a+": not found")};k.get_object_by_dupli_name=
function(a,b,c){if(a=F.Cd(F.Ny,a,b,c|0))return a;O.error("get object "+b+": not found")};k.get_object_by_dupli_name_list=function(a,b){if(b=F.Cd(F.qe,a,b|0))return b;O.error("get object "+a+": not found")};k.get_world_by_name=function(a,b){if(b=F.get_world_by_name(a,b|0))return b;O.error("get object "+a+": not found")};k.get_object_data_id=function(a){return R.get_object_data_id(a)};k.pick_object=function(a,b){var g=A.Bh();return g?(g=A.yc(g,w.mh))&&g.enable_hmd_stereo?(O.Ma("pick_object() is not available in the stereo rendering mode. Use scenes.pick_center instead."),
c()):F.pick_object(a,b):(O.error("No active scene"),null)};k.pick_center=c;k.outlining_is_enabled=function(a){return a&&a.ka&&a.ka.Ed};k.set_outline_intensity=function(a,b){a&&a.ka&&a.ka.Ed?F.set_outline_intensity(a,b):O.error("set_outline_intensity(): wrong object")};k.get_outline_intensity=function(a){if(a&&a.ka&&a.ka.Ed)return a.ka.mj;O.error("get_outline_intensity(): wrong object");return 0};k.apply_outline_anim=function(a,b,c,g){a&&a.ka&&a.ka.Ed?F.apply_outline_anim(a,b,c,g):O.error("apply_outline_anim(): wrong object")};
k.apply_outline_anim_def=function(a){if(a&&a.ka&&a.ka.Ed){var b=a.ka.lj;F.apply_outline_anim(a,b.Gl,b.Hl,b.Il)}else O.error("apply_outline_anim_def(): wrong object")};k.clear_outline_anim=function(a){a&&a.ka&&a.ka.Ed?F.clear_outline_anim(a):O.error("clear_outline_anim(): wrong object")};k.set_outline_color=A.set_outline_color;k.get_outline_color=function(a){var b=A.get_active();if(b=A.yc(b,w.$n))return a=a||new Float32Array(3),a.set(b.ti),a};k.set_hmd_params=function(a){A.zb()?a&&(!a.distortion_coefs||
a.distortion_coefs instanceof Array||(a.distortion_coefs=null),!a.chromatic_aberration_coefs||a.chromatic_aberration_coefs instanceof Array||(a.chromatic_aberration_coefs=null),"number"!=typeof a.base_line_factor&&(a.base_line_factor=null),"number"!=typeof a.inter_lens_factor&&(a.inter_lens_factor=null),"boolean"!=typeof a.enable_hmd_stereo&&(a.enable_hmd_stereo=null),A.set_hmd_params(a)):O.error("No active scene")};k.get_shadow_params=function(){if(!A.zb())return O.error("No active scene"),!1;var a=
A.get_active(),b=A.yc(a,w.ee);if(!b)return null;var c=a.sa.Id,g=A.yc(a,w.ic),k=A.yc(a,w.Gg),e={};e.csm_resolution=c.csm_resolution;e.self_shadow_polygon_offset=b.self_shadow_polygon_offset;k&&(e.self_shadow_normal_offset=k.self_shadow_normal_offset);e.enable_csm=c.enable_csm;e.csm_num=c.csm_num;e.csm_first_cascade_border=c.csm_first_cascade_border;e.first_cascade_blur_radius=c.first_cascade_blur_radius;e.csm_last_cascade_border=c.csm_last_cascade_border;e.last_cascade_blur_radius=c.last_cascade_blur_radius;
e.fade_last_cascade=c.fade_last_cascade;e.blend_between_cascades=c.blend_between_cascades;c.enable_csm?(e.csm_borders=A.cQ(a,g.qa),e.blur_radii=new Float32Array(c.csm_num),e.blur_radii.set(g.qa.tp.subarray(0,c.csm_num))):(e.csm_borders=null,e.blur_radii=null);return e};k.set_shadow_params=function(a){if(A.zb()){var c=A.get_active();"number"==typeof a.self_shadow_polygon_offset&&u.Na(c.sa.Ya,function(b,c){c.type==w.ee&&(c.self_shadow_polygon_offset=a.self_shadow_polygon_offset)});for(var k=A.ug(c,
[w.Gg]),e=0;e<k.length;e++){var f=k[e];"number"==typeof a.self_shadow_normal_offset&&(f.self_shadow_normal_offset=a.self_shadow_normal_offset);"number"==typeof a.pcf_blur_radius&&(f.pcf_blur_radius=a.pcf_blur_radius)}k=A.ug(c,[w.Md]);for(e=0;e<k.length;e++){var l=k[e];"number"==typeof a.self_shadow_normal_offset&&(l.self_shadow_normal_offset=a.self_shadow_normal_offset);"number"==typeof a.pcf_blur_radius&&(l.pcf_blur_radius=a.pcf_blur_radius);l.wb=!0}k=c.sa.Id;"number"==typeof a.csm_first_cascade_border&&
(k.csm_first_cascade_border=a.csm_first_cascade_border);"number"==typeof a.first_cascade_blur_radius&&(k.first_cascade_blur_radius=a.first_cascade_blur_radius);"number"==typeof a.csm_last_cascade_border&&(k.csm_last_cascade_border=a.csm_last_cascade_border);"number"==typeof a.last_cascade_blur_radius&&(k.last_cascade_blur_radius=a.last_cascade_blur_radius);if(f){l=f.vb;for(e=0;e<l.length;e++)for(var m=l[e].jb,q=0;q<m.length;q++){var p=m[q];if(p.$g.Be){var n=p.fb;b.VD(n,k);b.md(n);w.zd(f,p)}}f.wb=
!0}f=R.kb(c.Ii,c).Qa;for(e=0;e<f.length;e++)g.HC(f[e],k);A.SB(c)}else O.error("No active scene")};k.get_environment_colors=function(){if(!A.zb())return O.error("No active scene"),[];var a=A.get_active();return A.get_environment_colors(a)};k.set_environment_colors=function(a,b,c){if(A.zb()){var g=A.get_active(),k=A.yc(g,w.ic);A.set_environment_colors(g,a||0==a?parseFloat(a):k.Rg,b||0==b?b:k.we,c||0==c?c:k.Fe)}else O.error("No active scene")};k.get_fog_color_density=function(a){if(!A.zb())return O.error("No active scene"),
!1;var b=A.get_active();return A.get_fog_color_density(b,a)};k.set_fog_color_density=function(a){if(A.zb()){var b=A.get_active();A.set_fog_color_density(b,a)}else O.error("No active scene")};k.get_fog_params=function(){if(!A.zb())return O.error("No active scene"),!1;var a=A.get_active(),b={};b.fog_intensity=A.mQ(a);b.fog_depth=A.kQ(a);b.fog_start=A.nQ(a);b.fog_height=A.lQ(a);return b};k.set_fog_params=function(a){if(A.zb()){var b=A.get_active();"number"==typeof a.fog_intensity&&A.ZH(b,a.fog_intensity);
"number"==typeof a.fog_depth&&A.XH(b,a.fog_depth);"number"==typeof a.fog_start&&A.$H(b,a.fog_start);"number"==typeof a.fog_height&&A.YH(b,a.fog_height)}else O.error("No active scene")};k.get_ssao_params=function(){if(!A.zb())return O.error("No active scene"),!1;var a=A.get_active();return A.get_ssao_params(a)};k.set_ssao_params=function(a){if(A.zb()){var c=A.get_active(),g=A.ug(c,[w.Nt]);c=A.ug(c,[w.Vy]);if(!g.length)return O.error("SSAO is not enabled on the scene"),0;for(var k=0;k<g.length;k++){var e=
g[k],f=c[k],l=a,m=A.get_active(),p=e.vb[0].jb[0],u=p.fb,q=f.vb[0].jb[0],t=q.fb;if("quality"in l){var d=l.quality;8===d||16===d||24===d||32===d?(e.Fn=d,b.dc(u,"SSAO_QUALITY","SSAO_QUALITY_"+d),b.md(u),w.zd(e,p)):O.error('set_ssao_params(): Wrong "quality" value.')}"use_hemisphere"in l&&(e.Mp=l.use_hemisphere,b.dc(u,"SSAO_HEMISPHERE",l.use_hemisphere|0),b.md(u),w.zd(e,p));"use_blur_depth"in l&&(f.Jp=l.use_blur_depth,b.dc(t,"SSAO_BLUR_DEPTH",l.use_blur_depth|0),b.md(t),w.zd(f,q),A.AN(m.sa.Ya,f,t,!1));
"ssao_white"in l&&(e.ssao_white=l.ssao_white,b.dc(u,"SSAO_WHITE",l.ssao_white|0),b.md(u),w.zd(e,p));"blur_discard_value"in l&&(f.Kp=l.blur_discard_value);"radius_increase"in l&&(e.Op=l.radius_increase);"influence"in l&&(e.Np=l.influence);"dist_factor"in l&&(e.Lp=l.dist_factor);if("boolean"==typeof l.ssao_only){m=A.yc(m,w.ic);m.ssao_only=l.ssao_only;p=m.vb;u=[];for(q=0;q<p.length;q++)for(t=p[q].jb,d=0;d<t.length;d++){var n=t[d].fb;b.dc(n,"SSAO_ONLY",l.ssao_only|0);b.md(n);u.push(t[d])}for(q=0;q<u.length;q++)w.zd(m,
u[q])}e.wb=!0;f.wb=!0}}else O.error("No active scene")};k.get_color_correction_params=function(){if(!A.zb())return O.error("No active scene"),null;var a=A.get_active();a=A.yc(a,w.Iy);if(!a)return null;var b={};b.brightness=a.brightness;b.contrast=a.contrast;b.exposure=a.exposure;b.saturation=a.saturation;return b};k.set_color_correction_params=function(a){if(A.zb()){var b=A.get_active();if(b=A.yc(b,w.Iy))"brightness"in a&&(b.brightness=a.brightness),"contrast"in a&&(b.contrast=a.contrast),"exposure"in
a&&(b.exposure=a.exposure),"saturation"in a&&(b.saturation=a.saturation),b.wb=!0}else O.error("No active scene")};k.get_sky_params=function(){if(!A.zb())return O.error("No active scene"),!1;var a=A.get_active();return A.get_sky_params(a)};k.set_sky_params=function(a){if(A.zb()){var b=A.get_active(),c=A.yc(b,w.Ve);c&&("color"in a&&c.Ul.set(a.color),"rayleigh_brightness"in a&&(c.rayleigh_brightness=a.rayleigh_brightness),"mie_brightness"in a&&(c.mie_brightness=a.mie_brightness),"spot_brightness"in a&&
(c.spot_brightness=a.spot_brightness),"scatter_strength"in a&&(c.scatter_strength=a.scatter_strength),"rayleigh_strength"in a&&(c.rayleigh_strength=a.rayleigh_strength),"mie_strength"in a&&(c.mie_strength=a.mie_strength),"rayleigh_collection_power"in a&&(c.rayleigh_collection_power=a.rayleigh_collection_power),"mie_collection_power"in a&&(c.mie_collection_power=a.mie_collection_power),"mie_distribution"in a&&(c.mie_distribution=a.mie_distribution),c.wb=!0,c.hp=!0,A.nV(b,c))}else O.error("No active scene")};
k.get_dof_params=function(){if(!A.zb())return O.error("No active scene"),!1;var a=A.get_active();return A.yc(a,w.wq)?A.get_dof_params(a):null};k.set_dof_params=function(a){if(A.zb()){var b=A.get_active();A.set_dof_params(b,a)}else O.error("No active scene")};k.get_god_rays_params=function(){if(!A.zb())return O.error("No active scene"),!1;var a=A.get_active();return A.yc(a,w.Zn)?A.get_god_rays_params(a):null};k.set_god_rays_params=function(a){if(A.zb()){var b=A.get_active();A.set_god_rays_params(b,
a)}else O.error("No active scene")};k.get_bloom_params=function(){if(!A.zb())return O.error("No active scene"),!1;var a=A.get_active();return A.yc(a,w.sq)?A.get_bloom_params(a):null};k.set_bloom_params=function(a){if(A.zb()){var b=A.get_active();A.set_bloom_params(b,a)}else O.error("No active scene")};k.get_glow_material_params=function(){if(!A.zb())return O.error("No active scene"),!1;var a=A.get_active();return A.yc(a,w.xq)?A.get_glow_material_params(a):null};k.set_glow_material_params=function(a){if(A.zb()){var b=
A.get_active();A.set_glow_material_params(b,a)}else O.error("No active scene")};k.get_wind_params=function(){if(!A.zb())return O.error("No active scene"),!1;var a=A.get_active();return A.get_wind_params(a)};k.set_wind_params=function(a){if(A.zb()){var b=A.get_active();F.set_wind_params(b,a)}else O.error("No active scene")};k.get_water_surface_level=function(a,b){if(!A.zb())return O.error("No active scene"),0;var c=A.get_active();return c.sa.wd?A.get_water_surface_level(c,a,b):(O.error("No water parameters on the active scene"),
0)};k.set_water_params=function(a){if(A.zb()){var b=A.get_active();A.set_water_params(b,a)}else O.error("No active scene")};k.get_water_mat_params=function(a){if(A.zb()){var b=A.get_active();A.get_water_mat_params(b,a)}else O.error("No active scene")};k.update_scene_materials_params=function(){if(A.zb()){var a=A.get_active();A.hJ(a)}else O.error("No active scene")};k.hide_object=function(a,b){b=b||!1;l(a)?b?A.Cm(a,!0):A.Zq(a,!0):O.error("show/hide is only supported for dynamic objects.")};k.show_object=
function(a,b){b=b||!1;l(a)?b?A.Cm(a,!1):A.Zq(a,!1):O.error("show/hide is only supported for dynamic objects.")};k.is_hidden=function(a){if(l(a))return A.is_hidden(a);O.error("show/hide is only supported for dynamic meshes/empties and lamps");return!1};k.is_visible=function(a){return a.ka.is_visible};k.check_object_by_name=function(a,b){return F.Cd(F.Oy,a,b|0,!0)?!0:!1};k.check_object_by_dupli_name=function(a,b,c){return F.Cd(F.Ny,a,b,c|0)?!0:!1};k.check_object_by_dupli_name_list=function(a,b){return F.Cd(F.qe,
a,b|0)?!0:!1};k.get_all_objects=function(a,b){var c=A.get_active();a||(a="ALL");b||0===b||(b=F.DATA_ID_ALL);return F.ZF(c,a,b)};k.get_object_name=function(a){return a?a.oe:(O.error("Wrong object name"),"")};k.get_object_name_hierarchy=function(a){if(!a)return O.error("Wrong object name"),null;for(var b=[];a;)b.push(a.oe),a=R.get_dg_parent(a);return b.reverse()};k.get_object_type=function(a){return a&&a.type?a.type:(O.error("Wrong object"),"UNDEFINED")};k.get_object_children=function(a){return a.bf.slice(0)};
k.get_first_character=function(){return F.get_first_character(A.get_active())};k.get_shore_dist=function(a,b){b||0===b||(b=1);if(!A.zb())return O.error("No active scene"),0;var c=A.get_active();return A.get_shore_dist(c,a,b)};k.get_cam_water_depth=function(){return A.get_cam_water_depth()};k.get_type_mesh_object=function(a){return R.is_mesh(a)?a.ka.type:""};k.get_meta_tags=function(){if(!A.zb())return O.error("No active scene"),!1;var a=A.get_active();return A.get_meta_tags(a)};k.get_custom_prop=
function(){if(!A.zb())return O.error("No active scene"),!1;var a=A.get_active();return A.get_custom_prop(a)};k.append_object=function(b,c){if(c){var g=A.Mr();c=a._19("name",c,g)}else c=A.get_active();A.append_object(c,b,!0);K.append_object(b,c)};k.remove_object=function(a){R.kc(a)||R.is_empty(a)||R.is_line(a)?(F.qp(a,a.ka.Vv,!1,!1),T.BH(a),F.qp(a,!0,!0,!0),F.remove_object(a)):O.error("Can't remove object \""+a.name+'". It must be dynamic and type of MESH or EMPTY.')};k.marker_frame=function(a){var b=
A.get_active();if(b.timeline_markers&&a in b.timeline_markers)return A.marker_frame(b,a);O.error('"'+a+'" marker not found.');return 0};k.get_mb_params=function(){var a=A.get_active();return(a=A.yc(a,w.Gi))?{mb_factor:a.mb_factor,mb_decay_threshold:a.mb_decay_threshold}:null};k.set_mb_params=function(a){var b=A.get_active();b=A.ug(b,[w.Gi]);if(b.length)for(var c=0;c<b.length;c++){var g=b[c];"number"==typeof a.mb_decay_threshold&&(g.mb_decay_threshold=a.mb_decay_threshold);"number"==typeof a.mb_factor&&
(g.mb_factor=a.mb_factor)}else O.error("The motion blur subscene doesn't exist.")};k.can_select_objects=function(){var a=A.get_active();return!!A.yc(a,w.zf)}});w.a=f},function(D,w,f){D=f(0);var M=f(5),U=f(1);f=Object(D.a)("generator",function(f,z){function e(a,c){switch(typeof a){case "object":if(a)switch(a.constructor){case Object:for(var k in a)c=e(a[k],c);break;case Int8Array:case Uint8Array:case Uint8ClampedArray:case Int16Array:case Uint16Array:case Int32Array:case Uint32Array:case Float32Array:case Float64Array:for(k=
0;k<a.length;k++)c=m(a[k],c);break;case Array:for(k=0;k<a.length;k++)c=e(a[k],c);break;case WebGLUniformLocation:case WebGLProgram:case WebGLShader:case WebGLFramebuffer:case WebGLRenderbuffer:case WebGLTexture:case WebGLBuffer:c=m(0,c);break;default:n.va("Wrong object constructor:",a.constructor)}else c=m(0,c);return c;case "number":return m(a,c);case "boolean":return m(a|0,c);case "string":for(k=0;k<a.length;k++)c=(c<<5)-c+a.charCodeAt(k),c&=c;return c;case "function":case "undefined":return m(0,
c)}}function m(k,c){a[0]=k;c=(c<<5)-c+T[0];c&=c;c=(c<<5)-c+T[1];return c&c}var n=Object(M.a)(f),v=Object(U.a)(f),q=1,r=0,y={},a=new Float64Array(1),T=new Uint32Array(a.buffer);z.mt=function(a){y[a]||(y[a]=0);var c=a+y[a];y[a]++;return c};z.cleanup=function(){r=0;y={}};z.ZI=function(){r++;return r.toString(10)};z.HF=function(a){a++;132651<a&&v.error("Color ID pool depleted");var c=Math.floor(a/2601);a%=2601;return new Float32Array([c/51,Math.floor(a/51)/51,a%51/51])};z.NS=function(){q=(69069*q+5)%
Math.pow(2,32);return Math.round(q/65536)%32768/32767};z.pU=function(a){q=a};z.mE=function(a){return e(a,0)};z.hash_code=e});w.a=f},function(D,w){D=!1;try{var f=window.b4w}catch(z){f=self.b4w,D=!0}if(!f){f={};D?self.b4w=f:window.b4w=f;var M={},U={};f.module=M;f._n_module=U;var n={};f.cleanup=function(f,e){if(f=M[f])f.eo=null;n[e||"__b4w_default"]=null};f.register=function(f,e){M[f]||(M[f]=e)};f.require=function(f,e){if(!M[f]&&!U[f])throw Error('Module "'+f+'" not found');e=e||"__b4w_default";if(void 0!==
U[f])return U[f](e);n[e]||(n[e]=function(e){return function(f){if(!M[f]&&!U[f])throw Error('Module "'+f+'" not found');if(void 0!==U[f])return U[f](e);f=M[f];f.eo||(f.eo={});f.eo[e]||(f.eo[e]={},f(f.eo[e],n[e]));return f.eo[e]}}(e));return n[e](f)};f.module_check=function(f){return void 0!==M[f]||void 0!==U[f]};f.get_namespace=function(f){for(var e in n)if(n[e]==f)return e;return""};f.worker_listeners=[];f.worker_namespaces=[]}w.a=f},function(D,w,f){D=f(0);var M=f(14),U=f(15),n=f(42),z=f(9),e=f(19),
m=f(1),C=f(10),v=f(13),q=f(6),r=f(2),y=f(3),a=f(7),T=f(8);f=Object(D.a)("camera",function(k,c){function f(a,b){if(!E.is_camera(a))return u.error("get_view_vector(): Wrong camera object"),null;b=b||new Float32Array(3);a=q.g(a.ka.na,w);r._34(a,r.c,b);return b}var b=Object(M.a)(k),g=Object(U.a)(k),E=Object(z.a)(k),ea=Object(e.a)(k),u=Object(m.a)(k),F=Object(C.a)(k),R=Object(v.a)(k),O=new Float32Array(2),K=new Float32Array(3),A=new Float32Array(3),w=T.create(),L={},ha={};c.MS_STATIC=b.MS_STATIC;c.MS_TARGET_CONTROLS=
b.MS_TARGET_CONTROLS;c.MS_EYE_CONTROLS=b.MS_EYE_CONTROLS;c.MS_HOVER_CONTROLS=b.MS_HOVER_CONTROLS;c.static_setup=function(a,c){if(E.is_camera(a)){b.Dt(a);a.ka.cc=b.MS_STATIC;if(c){var g=c.pos||q.j(a.ka.na,K);c.look_at?b.fI(a,g,c.look_at):R.set_translation(a,g)}R.Ea(a);ea.sync_transform(a);b.To(a)}else u.error("static_setup(): Wrong camera object")};c.static_set_look_at=function(a,c,g){b.is_static_camera(a)?(c=c||q.j(a.ka.na,K),g?b.fI(a,c,g):R.set_translation(a,c),R.Ea(a),ea.sync_transform(a)):u.error("static_set_look_at(): Wrong camera object or camera move style")};
c.static_set_rotation=function(a,c){b.is_static_camera(a)?(R.set_rotation(a,c),R.Ea(a),ea.sync_transform(a)):u.error("static_set_rotation(): Wrong camera object or camera move style")};c.static_get_rotation=function(a,c){if(!b.is_static_camera(a))return u.error("static_get_rotation(): Wrong camera object or camera move style"),null;c=c||new Float32Array(4);return R.get_rotation(a,c)};c.eye_setup=function(a,c){if(E.is_camera(a))if(c&&c.horiz_rot_lim&&("number"!=typeof c.horiz_rot_lim.left||"number"!=
typeof c.horiz_rot_lim.right))u.error("eye_setup(): Wrong horizontal limits object.");else if(c&&c.vert_rot_lim&&("number"!=typeof c.vert_rot_lim.down||"number"!=typeof c.vert_rot_lim.up))u.error("eye_setup(): Wrong vertical limits object.");else{b.Dt(a);a.ka.cc=b.MS_EYE_CONTROLS;if(c){var g=c.pos||q.j(a.ka.na,K);b.mI(a,g,c.look_at,c.horiz_rot_lim,c.vert_rot_lim)}R.Ea(a);ea.sync_transform(a);b.To(a)}else u.error("eye_setup(): Wrong camera object")};c.eye_set_look_at=function(a,c,g){b.is_eye_camera(a)?
(c=c||q.j(a.ka.na,K),g?b.ET(a,c,g):R.set_translation(a,c),b.correct_up(a,a.ka.od,!0),R.Ea(a),ea.sync_transform(a)):u.error("eye_set_look_at(): Wrong camera object or camera move style")};c.eye_rotate=function(a,g,k,e){u.ef("eye_rotate","rotate_camera");b.is_eye_camera(a)?c.rotate_camera(a,g,k,e||!1):u.error("eye_rotate(): Wrong camera object or camera move style")};c.eye_set_vertical_limits=function(a,c){b.is_eye_camera(a)?!c||"number"==typeof c.down&&"number"==typeof c.up?(b.ix(a,c),R.Ea(a),ea.sync_transform(a)):
u.error("eye_set_vertical_limits(): Incorrect limits object."):u.error("eye_set_vertical_limits(): Wrong camera object or camera move style")};c.eye_get_vertical_limits=function(a,c,g){if(!b.is_eye_camera(a))return u.error("eye_get_vertical_limits(): Wrong camera object or camera move style"),null;a=a.ka;return a.Hb?(c=c||{},g?(c.down=a.Hb.Bo,c.up=a.Hb.Zp):(c.down=a.Hb.down,c.up=a.Hb.up),c.camera_space=g||!1,c):null};c.eye_set_horizontal_limits=function(a,c){b.is_eye_camera(a)?!c||"number"==typeof c.left&&
"number"==typeof c.right?(b.hx(a,c),R.Ea(a),ea.sync_transform(a)):u.error("eye_set_horizontal_limits(): Incorrect limits object."):u.error("eye_set_horizontal_limits(): Wrong camera object or camera move style")};c.eye_get_horizontal_limits=function(a,c,g){if(!b.is_eye_camera(a))return u.error("eye_get_horizontal_limits(): Wrong camera object or camera move style"),null;a=a.ka;return a.zc?(c=c||{},g?(c.left=a.zc.ap,c.right=a.zc.Ap):(c.left=a.zc.left,c.right=a.zc.right),c.camera_space=g||!1,c):null};
c.target_setup=function(a,c){if(E.is_camera(a))if(!c.horiz_rot_lim||"number"==typeof c.horiz_rot_lim.left&&"number"==typeof c.horiz_rot_lim.right)if(!c.vert_rot_lim||"number"==typeof c.vert_rot_lim.down&&"number"==typeof c.vert_rot_lim.up){if(c.dist_lim){if("number"!=typeof c.dist_lim.min||"number"!=typeof c.dist_lim.max||c.dist_lim.min>c.dist_lim.max){u.error("target_setup(): Wrong distance limits object");return}c.dist_lim.min=Math.max(c.dist_lim.min,0);c.dist_lim.max=Math.max(c.dist_lim.max,0)}if(c.us&&
("number"!=typeof c.us.min_y||"number"!=typeof c.us.max_y||c.us.min_y>c.us.max_y))u.error("target_setup(): Wrong pivot limits object");else{b.Dt(a);a.ka.cc=b.MS_TARGET_CONTROLS;var g=c.pos||q.j(a.ka.na,K),k=c.pivot;k||(k=f(a,A),k=y.add(g,k,k));b.oI(a,g,k,c.horiz_rot_lim,c.vert_rot_lim,c.dist_lim,c.us,c.use_panning||!1);R.Ea(a);ea.sync_transform(a);b.To(a)}}else u.error("target_setup(): Wrong vertical limits object");else u.error("target_setup(): Wrong horizontal limits object");else u.error("target_setup(): Wrong camera object")};
c.target_rotate=function(a,g,k,e){u.ef("target_rotate","rotate_camera");b.is_target_camera(a)?c.rotate_camera(a,g,k,e||!1):u.error("target_rotate(): Wrong camera object or camera move style")};c.target_set_trans_pivot=function(a,c,g){b.is_target_camera(a)?(c=c||q.j(a.ka.na,K),g=g||a.ka.pivot,b.WB(a,c,g),R.Ea(a),ea.sync_transform(a)):u.error("target_set_trans_pivot(): Wrong camera object or camera move style")};c.target_set_pivot_translation=function(a,c){b.is_target_camera(a)?(b.NT(a,c),R.Ea(a),ea.sync_transform(a)):
u.error("target_set_pivot_translation(): Wrong camera object or camera move style")};c.target_set_distance=function(a,c){if(b.is_target_camera(a)){var g=R.ns(a,a.ka.pivot);R.move_local(a,0,0,Math.max(0,c)-g);R.Ea(a);ea.sync_transform(a)}else u.error("target_set_distance(): Wrong camera object or camera move style")};c.target_get_distance=function(a){return b.is_target_camera(a)?R.ns(a,a.ka.pivot):(u.error("target_get_distance(): Wrong camera object or camera move style"),0)};c.target_zoom_object=
function(a,c){if(b.is_target_camera(a)){var g=R.get_object_center(c,!1,K);c=R.get_object_size(c);var k=F.get_active();k=E.kb(a,k).Qa[0];k=b.RP(k)/2;c/=Math.sin(k);k=R.ns(a,g);b.WB(a,q.j(a.ka.na,A),g);R.Ea(a);R.move_local(a,0,0,c-k);R.Ea(a);ea.sync_transform(a)}else u.error("target_zoom_object(): Wrong camera object or camera move style")};c.target_get_pivot=function(a,c){if(!b.is_target_camera(a))return u.error("target_get_pivot(): Wrong camera object or camera move style"),null;c=c||new Float32Array(3);
y.copy(a.ka.pivot,c);return c};c.target_set_distance_limits=function(a,c){if(b.is_target_camera(a)){if(c){if("number"!=typeof c.min||"number"!=typeof c.max||c.min>c.max){u.error("target_set_distance_limits(): Wrong limits object");return}c.min=Math.max(c.min,0);c.max=Math.max(c.max,0)}b.WH(a,c);R.Ea(a);ea.sync_transform(a)}else u.error("target_set_distance_limits(): Wrong camera object or camera move style")};c.target_get_distance_limits=function(a,c){if(!b.is_target_camera(a))return u.error("target_get_distance_limits(): Wrong camera object or camera move style"),
null;a=a.ka;return a.rc?(c=c||{},c.min=a.rc.min,c.max=a.rc.max,c):null};c.target_set_vertical_limits=function(a,c){b.is_target_camera(a)?!c||"number"==typeof c.down&&"number"==typeof c.up?(b.ix(a,c),R.Ea(a),ea.sync_transform(a)):u.error("target_set_vertical_limits(): Wrong limits object"):u.error("target_set_vertical_limits(): Wrong camera object or camera move style")};c.target_get_vertical_limits=function(a,c,g){if(!b.is_target_camera(a))return u.error("target_get_vertical_limits(): Wrong camera object or camera move style"),
null;a=a.ka;return a.Hb?(c=c||{},g?(c.down=a.Hb.Bo,c.up=a.Hb.Zp):(c.down=a.Hb.down,c.up=a.Hb.up),c.camera_space=g||!1,c):null};c.target_set_horizontal_limits=function(a,c){b.is_target_camera(a)?!c||"number"==typeof c.left&&"number"==typeof c.right?(b.hx(a,c),R.Ea(a),ea.sync_transform(a)):u.error("target_set_horizontal_limits(): Wrong limits object"):u.error("target_set_horizontal_limits(): Wrong camera object or camera move style")};c.target_get_horizontal_limits=function(a,c,g){if(!b.is_target_camera(a))return u.error("target_get_horizontal_limits(): Wrong camera object or camera move style"),
null;a=a.ka;return a.zc?(c=c||{},g?(c.left=a.zc.ap,c.right=a.zc.Ap):(c.left=a.zc.left,c.right=a.zc.right),c.camera_space=g||!1,c):null};c.target_set_pivot_limits=function(a,c){b.is_target_camera(a)?c&&("number"!=typeof c.min_z||"number"!=typeof c.max_z||c.min_z>c.max_z)?u.error("target_set_pivot_limits(): Wrong limits object"):(b.hI(a,c),R.Ea(a),ea.sync_transform(a)):u.error("target_set_pivot_limits(): Wrong camera object or camera move style")};c.target_get_pivot_limits=function(a,c){if(!b.is_target_camera(a))return u.error("target_get_pivot_limits(): Wrong camera object or camera move style"),
null;a=a.ka;return a.Oe?(c=c||{},c.min_z=a.Oe.min_z,c.max_z=a.Oe.max_z,c):null};c.target_pan_pivot=function(a,c,g){if(b.is_target_camera(a)){var k=a.ka;k.use_panning&&(K[0]=c,K[1]=-g,K[2]=0,q.y(K,k.na,K),y.add(k.pivot,K,k.pivot),c=q.j(k.na,A),y.add(c,K,c),q.v(c,k.na),R.Ea(a),ea.sync_transform(a))}else u.error("target_pan_pivot(): wrong object")};c.target_switch_panning=function(a,c){if(!b.is_target_camera(a))return u.error("target_switch_panning(): Wrong camera object or camera move style"),null;
a.ka.use_panning=c};c.hover_setup_rel=function(a,g){c.hover_setup(a,{pos:g.pos,pivot:g.pivot});var k="undefined"==typeof g.dist_interval?0:Math.max(g.dist_interval,0),e="undefined"==typeof g.angle_interval?0:Math.max(g.angle_interval,0);g="undefined"==typeof g.t?.5:r.M(g.t,0,1);var f=c.hover_get_distance_limits(a,L);f.min=Math.max(f.min-g*k,0);f.max+=(1-g)*k;k=c.hover_get_vertical_limits(a,ha);k.down=r.M(k.down+g*e,-Math.PI/2,0);k.up=r.M(k.up-(1-g)*e,-Math.PI/2,0);b.hover_set_distance_limits(a,f);
b.hover_set_vertical_limits(a,k);R.Ea(a);ea.sync_transform(a);b.To(a)};c.hover_setup=function(a,c){if(E.is_camera(a)){if(c.dist_lim){if("number"!=typeof c.dist_lim.min||"number"!=typeof c.dist_lim.max||c.dist_lim.min>c.dist_lim.max){u.error("hover_setup(): Wrong distance limits object");return}c.dist_lim.min=Math.max(c.dist_lim.min,0);c.dist_lim.max=Math.max(c.dist_lim.max,0)}if(c.hover_angle_lim&&("number"!=typeof c.hover_angle_lim.down||"number"!=typeof c.hover_angle_lim.up||c.hover_angle_lim.down<
c.hover_angle_lim.up))u.error("hover_setup(): Wrong hover angle limits object");else if(c.horiz_trans_lim&&("number"!=typeof c.horiz_trans_lim.min||"number"!=typeof c.horiz_trans_lim.max||c.horiz_trans_lim.min>c.horiz_trans_lim.max))u.error("hover_setup(): Wrong horizontal translation limits object");else if(c.vert_trans_lim&&("number"!=typeof c.vert_trans_lim.min||"number"!=typeof c.vert_trans_lim.max||c.vert_trans_lim.min>c.vert_trans_lim.max))u.error("hover_setup(): Wrong vertical translation limits object");
else{b.Dt(a);a.ka.cc=b.MS_HOVER_CONTROLS;var g=c.pos||q.j(a.ka.na,K);b.nI(a,g,c.pivot,c.dist_lim,c.hover_angle_lim,c.horiz_trans_lim,c.vert_trans_lim,c.enable_horiz_rot||!1);R.Ea(a);ea.sync_transform(a);b.To(a)}}else u.error("hover_setup(): Wrong camera object")};c.hover_rotate=function(a,g,k,e){u.ef("hover_rotate","rotate_camera");b.is_hover_camera(a)?c.rotate_camera(a,g,k,e||!1):u.error("hover_rotate(): Wrong camera object or camera move style")};c.hover_set_pivot_translation=function(a,c){b.is_hover_camera(a)?
(b.eI(a,c),R.Ea(a),ea.sync_transform(a)):u.error("hover_set_pivot_translation(): Wrong camera object or camera move style")};c.hover_get_pivot=function(a,c){if(!b.is_hover_camera(a))return u.error("hover_get_pivot(): Wrong camera object or camera move style"),null;c=c||new Float32Array(3);y.copy(a.ka.$c,c);return c};c.hover_get_distance=function(a){return b.is_hover_camera(a)?R.ns(a,a.ka.$c):(u.error("hover_get_distance(): Wrong camera object or camera move style"),0)};c.hover_set_vertical_limits=
function(a,c){b.is_hover_camera(a)?"number"!=typeof c.down||"number"!=typeof c.up||c.down<c.up?u.error("hover_set_vertical_limits(): Wrong limits object"):(b.hover_set_vertical_limits(a,c),R.Ea(a),ea.sync_transform(a)):u.error("hover_set_vertical_limits(): Wrong camera object or camera move style")};c.hover_get_vertical_limits=function(a,c){if(!b.is_hover_camera(a))return u.error("hover_get_vertical_limits(): Wrong camera object or camera move style"),null;a=a.ka;c=c||{};c.down=a.Hb.down;c.up=a.Hb.up;
return c};c.hover_set_distance_limits=function(a,c){b.is_hover_camera(a)?"number"!=typeof c.min||"number"!=typeof c.max||c.min>c.max?u.error("hover_set_distance_limits(): Wrong limits object"):(c.min=Math.max(c.min,0),c.max=Math.max(c.max,0),b.hover_set_distance_limits(a,c),R.Ea(a),ea.sync_transform(a)):u.error("hover_set_distance_limits(): Wrong camera object or camera move style")};c.hover_get_distance_limits=function(a,c){if(!b.is_hover_camera(a))return u.error("hover_get_distance_limits(): Wrong camera object or camera move style"),
null;a=a.ka;c=c||{};c.min=a.rc.min;c.max=a.rc.max;return c};c.hover_set_vert_trans_limits=function(a,c){b.is_hover_camera(a)?c&&("number"!=typeof c.min||"number"!=typeof c.max||c.min>c.max)?u.error("hover_set_vert_trans_limits(): Wrong limits object"):(b.kI(a,c),R.Ea(a),ea.sync_transform(a)):u.error("hover_set_vert_trans_limits(): Wrong camera object or camera move style")};c.hover_get_vert_trans_limits=function(a,c){if(!b.is_hover_camera(a))return u.error("hover_get_vert_trans_limits(): Wrong camera object or camera move style"),
null;a=a.ka;return a.me?(c=c||{},c.min=a.me.min,c.max=a.me.max,c):null};c.hover_set_horiz_trans_limits=function(a,c){b.is_hover_camera(a)?c&&("number"!=typeof c.min||"number"!=typeof c.max||c.min>c.max)?u.error("hover_set_horiz_trans_limits(): Wrong limits object"):(b.dI(a,c),R.Ea(a),ea.sync_transform(a)):u.error("hover_set_horiz_trans_limits(): Wrong camera object or camera move style")};c.hover_get_horiz_trans_limits=function(a,c){if(!b.is_hover_camera(a))return u.error("hover_get_horiz_trans_limits(): Wrong camera object or camera move style"),
null;a=a.ka;return a.le?(c=c||{},c.min=a.le.min,c.max=a.le.max,c):null};c.hover_switch_horiz_rotation=function(a,c){if(!b.is_hover_camera(a))return u.error("hover_switch_horiz_rotation(): Wrong camera object or camera move style"),null;a.ka.Xi=c};c.is_static_camera=b.is_static_camera;c.is_target_camera=b.is_target_camera;c.is_eye_camera=b.is_eye_camera;c.is_hover_camera=b.is_hover_camera;c.get_move_style=function(a){return E.is_camera(a)?b.get_move_style(a):(u.error("get_move_style(): Wrong camera object"),
null)};c.set_translation=function(a,c){if(E.is_camera(a)){var g=a.ka;if(b.is_target_camera(a)){var k=q.j(g.na,K);k=y.subtract(c,k,K);y.add(k,g.pivot,g.pivot)}else b.is_hover_camera(a)&&(k=q.j(g.na,K),k=y.subtract(c,k,K),y.add(k,g.$c,g.$c));R.set_translation(a,c);R.Ea(a);ea.sync_transform(a)}else u.error("set_translation(): Wrong camera object")};c.get_translation=function(a,b){if(!E.is_camera(a))return u.error("get_translation(): Wrong camera object"),null;b=b||new Float32Array(3);return R.get_translation(a,
b)};c.rotate_camera=function(a,c,g,k){E.is_camera(a)?(k?b.KT(a,c,g):b.cT(a,c,g),R.Ea(a),ea.sync_transform(a)):u.error("rotate_camera(): Wrong camera object")};c.set_velocities=function(a,b){E.is_camera(a)?(a=a.ka,"number"==typeof b.trans&&(a.kq=r.M(b.trans,0,Infinity)),"number"==typeof b.rot&&(a.jq=r.M(b.rot,0,Infinity)),"number"==typeof b.zoom&&(a.lq=r.M(b.zoom,0,.99))):u.error("set_velocities(): Wrong camera object")};c.get_velocities=function(a,b){if(!E.is_camera(a))return u.error("get_velocities(): Wrong camera object"),
null;a=a.ka;b=b||{};b.trans=a.kq;b.rot=a.jq;b.zoom=a.lq;return b};c.is_look_up=function(a){if(!E.is_camera(a))return u.error("is_look_up(): Wrong camera object"),!1;a=q.g(a.ka.na,w);return 0<=r._34(a,r.c,K)[1]};c.get_camera_angles=function(a,c){if(!E.is_camera(a))return u.error("get_camera_angles(): Wrong camera object"),null;c=c||new Float32Array(2);b.get_camera_angles(a,c);return c};c.get_camera_angles_char=function(a,c){if(!E.is_camera(a))return u.error("get_camera_angles_char(): Wrong camera object"),
null;c=c||new Float32Array(2);b.get_camera_angles_char(a,c);return c};c.get_camera_angles_dir=function(a,c){c=c||new Float32Array(2);a=y.normalize(a,K);a=r._48(r.c,a,w);r.R(a,!0);b.bA(a,r.f,c);return c};c.set_stereo_distance=function(a,c){if(E.is_camera(a)){var g=F.get_active();a=E.kb(a,g).Qa;for(g=0;g<a.length;g++){var k=a[g];k.type!=b.fd&&k.type!=b.rd&&k.type!=b.Vf&&k.type!=b.Af||b.MT(k,c,k.tg)}}else u.error("set_stereo_distance(): Wrong camera object")};c.get_stereo_distance=function(a){if(!E.is_camera(a))return u.error("get_stereo_distance(): Wrong camera object"),
0;var c=F.get_active();a=E.kb(a,c).Qa;for(c=0;c<a.length;c++){var g=a[c];if(g.type==b.fd||g.type==b.rd)return g.Wl}return 0};c.set_eye_distance=function(a,c){if(E.is_camera(a)){var g=F.get_active();a=E.kb(a,g).Qa;b.set_eye_distance(a,c)}else u.error("set_eye_distance(): Wrong camera object")};c.get_eye_distance=function(a){if(!E.is_camera(a))return u.error("get_eye_distance(): Wrong camera object"),0;var c=F.get_active();a=E.kb(a,c).Qa;for(c=0;c<a.length;c++){var g=a[c];if(g.type==b.fd||g.type==b.rd||
g.type==b.Vf||g.type==b.Af)return g.tg}return 0};c.set_vertical_axis=function(a,b){E.is_camera(a)?(y.copy(b,a.ka.od),R.Ea(a),ea.sync_transform(a)):u.error("set_vertical_axis(): Wrong camera object")};c.get_vertical_axis=function(a,b){if(E.is_camera(a))return b||(b=y.create()),y.copy(a.ka.od,b),b;u.error("get_vertical_axis(): Wrong camera object")};c.translate_view=function(a,c,g){if(E.is_camera(a)){var k=F.get_active();a=E.kb(a,k).Qa;for(k=0;k<a.length;k++){var e=a[k];y.set(-c,-g,0,e.Bt.trans);e.ad?
b.iI(e,!1):b.set_projection(e,!1)}}else u.error("translate_view(): Wrong camera object")};c.get_view_vector=f;c.get_fov=function(a){if(!E.is_camera(a))return u.error("get_fov(): Wrong camera object"),0;var c=F.get_active();a=E.kb(a,c).Qa;return b.get_fov(a[0])};c.set_fov=function(a,c){if(E.is_camera(a)){var g=F.get_active();a=E.kb(a,g).Qa;for(g=0;g<a.length;g++){var k=a[g];b.set_fov(k,c);k.ad?b.iI(k,!1):b.set_projection(k,!1)}}else u.error("set_fov(): Wrong camera object")};c.set_hmd_fov=function(){u.Ma("set_hmd_fov() deprecated")};
c.correct_up=function(a,c,g){E.is_camera(a)?(c=c||a.ka.od,b.correct_up(a,c,g||!1),R.Ea(a),ea.sync_transform(a)):u.error("correct_up(): Wrong camera object")};c.set_ortho_scale=function(a,c){if(E.is_camera(a)&&b.is_ortho_camera(a)){var g=a.ka;if(b.is_target_camera(a)){var k=q.j(g.na,K);k=y.dist(k,g.pivot);g.rl=c/2*g.ql/k}else b.is_hover_camera(a)?(k=q.j(g.na,K),k=y.distance(k,g.$c),g.rl=c/2*g.ql/k):(g=F.get_active(),E.kb(a,g).Qa[0].Rc=c/2);b.dV(a)}else u.error("set_ortho_scale(): Wrong camera object")};
c.get_ortho_scale=function(a){if(!E.is_camera(a)||!b.is_ortho_camera(a))return u.error("get_ortho_scale(): Wrong camera object"),0;var c=F.get_active();return 2*E.kb(a,c).Qa[0].Rc};c.is_ortho_camera=function(a){return E.is_camera(a)?b.is_ortho_camera(a):(u.error("is_ortho_camera(): Wrong camera object"),!1)};c.calc_ray=function(a,c,k,e){if(!E.is_camera(a))return u.error("calc_ray(): Wrong camera object"),null;var f=F.get_active(),l=E.kb(a,f).Qa[0];e&&3==e.length?u.Ma('dest parameter in the function "calc_ray" should be type of parametric line.'):
e=e||new Float32Array(6);switch(l.type){case b.qd:case b.Wf:case b.fd:case b.rd:var p=Math.tan(b.EQ(l)/2),m=p*l.Wb;f=K;c=g.Wq(c,k,O,l);f[0]=(2*c[0]/l.width-1)*m;f[1]=(1-2*c[1]/l.height)*p;f[2]=-1;q.y(f,a.ka.na,f);y.normalize(f,f);3==e.length?y.copy(f,e):(a=R.get_translation(a,A),n.R(e,a),n.Q(e,f));return e;case b.Xe:return f=K,c=g.Wq(c,k,O,l),f[0]=(2*c[0]/l.width-1)*l.top*l.Wb,f[1]=(1-2*c[1]/l.height)*l.top,f[2]=0,q.D(f,a.ka.na,f),y.copy(f,e),a=q.g(a.ka.na,w),y.transformQuat(r.c,a,f),n.Q(e,f),e;default:return u.error("calc_ray(): Non-compatible camera"),
e}};c.project_point=function(a,c,g){if(!E.is_camera(a))return u.error("project_point(): Wrong camera object"),null;g=g||new Float32Array(2);return b.project_point(a,c,g)};c.has_distance_limits=function(a){return(b.is_target_camera(a)||b.is_hover_camera(a))&&null!==a.ka.rc};c.has_vertical_rot_limits=function(a){return(b.is_eye_camera(a)||b.is_target_camera(a)||b.is_hover_camera(a))&&null!==a.ka.Hb};c.has_horizontal_rot_limits=function(a){return(b.is_target_camera(a)||b.is_eye_camera(a))&&null!==a.ka.zc};
c.has_vertical_trans_limits=function(a){return b.is_hover_camera(a)&&null!==a.ka.me};c.has_horizontal_trans_limits=function(a){return b.is_hover_camera(a)&&null!==a.ka.le};c.get_frustum_planes=function(b,c){if(!E.is_camera(b))return u.error("get_frustum_planes(): Wrong camera object"),null;var g=F.get_active();b=E.kb(b,g).Qa[0].Vm;a.copy(b.left,c.left);a.copy(b.right,c.right);a.copy(b.top,c.top);a.copy(b.bottom,c.bottom);a.copy(b.near,c.near);a.copy(b.far,c.far);return c};c.set_projection=function(a,
c){E.is_camera(a)?b.HT(a,c):u.error("set_projection(): Wrong camera object")}});w.a=f},function(D,w,f){D=f(0);var M=f(32),U=f(5),n=f(44),z=f(4),e=f(37);f(92);var m=f(93),C=f(1),v=f(2),q=f(48),r={vS:{parse:function(){}}};"DEBUG"==e.d()&&(r=m);f=Object(D.a)("__shaders",function(e,a){function f(){return{yg:"",ff:"",fi:[],Mf:[],status:0,cu:0,Ux:0}}function k(a){var b=f();b.yg=a.yg;b.ff=a.ff;b.fi=v.O(a.fi);b.Mf=v.O(a.Mf);b.status=a.status;b.cu=a.cu;b.Ux=a.Ux;return b}function c(a,b,c){var d=a.fi;"string"==
typeof c?(a=l(a,c))&&(c=a[1]):c=String(c);for(a=0;a<d.length;a++)if(d[a][0]==b){d[a][1]=c;break}}function l(a,b){a=a.fi;for(var c=0;c<a.length;c++)if(a[c][0]==b)return a[c];return!1}function b(a,b){var c=a+b;if(!(c in Y)){a=ha(Aa.shaders_path,a);var d=ha(Aa.shaders_path,b);b=W(a);a=W(d);for(var g in a)b[g]=a[g];a=[];for(g in b)a.push([g,b[g]]);Y[c]=a}return Y[c]}function g(a,b,c){na.gl_debug&&(c=y(c),la.error("shader compilation failed:\n"+c+"\n"+qa.getShaderInfoLog(a)+" ("+b+")"))}function y(a){a=
a.split("\n");for(var b=0;b<a.length;b++)a[b]=b+1+" "+a[b];return a=a.join("\n")}function ea(a,b){return a+b}function u(a,b){return(a.split(";").map(function(a){return(a=a.match(b))&&(a[3]?parseInt(a[3],10):1)}).filter(function(a){return a})||[]).reduce(ea,0)}function F(a,b){var c=L(a.type),d=L(b.type);a=a.ym;b=b.ym;return c>d?-1:c<d?1:a>b?-1:a<b?1:0}function R(a){if(na.Ib){a=a.replace(/(.*?)\([^()]*?\)(.*?)/g,"$1$2");var b=Ma}else b=Ea;a=a.split(";").map(function(a){return(a=a.match(b))&&{type:a[2],
ym:a[4]?parseInt(a[4],10):1}}).filter(function(a){return a});return K(a,Fa,pa.rw)}function O(a,b,c){a=a.split(";");for(var d=[],g=0;g<a.length;g++){var k=a[g].match(ia);k&&d.push({type:k[2],ym:k[4]?parseInt(k[4],10):1})}return K(d,b,c)}function K(a,b,c){function d(){for(var c=0;l<a.length;){var d=a[l];if(3!=L(d.type))break;c+=w(d.type)*d.ym;l++}h=f+c;if(h>ta)return!1;A(b,f,c,0,3);return!0}function g(){for(var c=ta-h,d=c,g=c;l<a.length;){var k=a[l];if(2!=L(k.type))break;k=w(k.type)*k.ym;if(k<=d)d-=
k;else if(k<=g)g-=k;else return!1;l++}g=c-g;A(b,h,c-d,0,2);A(b,ta-g,g,2,2);return!0}function k(){for(;l<a.length;){var d=a[l];d=w(d.type)*d.ym;for(var h=-1,g=c+1,k=-1,e=0;4>e;e++){var f=Ga;f[0]=0;f[1]=1;var p=b;for(var t=e,m=d,u=f;ja<p.length&&15===p[ja];)ja++;for(;0<ta&&15===p[ta];)ta--;if(ta-ja<m)p=!1;else{t=1<<t;for(var q=0,n=-1,B=p.length+1,r=!1,v=ja;v<=ta;v++)v<ta&&!(p[v]&t)?r||(q=v,r=!0):(r&&(r=v-q,r>=m&&r<B&&(B=r,n=q)),r=!1);0>n?p=!1:(u[0]=n,u[1]=B,p=!0)}p&&f[1]<g&&(k=f[0],g=f[1],h=e)}if(0>
h)return!1;A(b,k,d,h,1);l++}return!0}if(!a.length)return!0;for(var e=0;e<c;e++)b[e]=0;ta=c;a.sort(F);var h=0,f=0,l=0;return function(){for(;l<a.length;){var c=a[l];if(4!=L(c.type))break;f+=w(c.type)*c.ym;l++}if(f>ta)return!1;ja=f;A(b,0,f,0,4);return!0}()&&d()&&g()&&k()}function A(a,b,c,d,g){for(var k=0,e=0;e<g;e++)k|=1<<d+e;for(e=0;e<c;e++)a[b+e]|=k}function w(a){switch(a){case "mat4":a=4;break;case "mat3":a=3;break;case "mat2":a=2;break;default:a=1}return a}function L(a){switch(a){case "mat4":case "vec4":case "ivec4":case "bvec4":case "mat2":a=
4;break;case "mat3":case "vec3":case "ivec3":case "bvec3":a=3;break;case "vec2":case "ivec2":case "bvec2":a=2;break;default:a=1}return a}function ha(a,b){a+=b;if(N[a])return N[a];if(oa){b=oa[b];if(!b)return null;b=r.vS.parse(b)}else if(b=M.a.require("shader_texts")[b],!b)return null;return N[a]=b}function J(a,b){for(var c={},d=b.fi||[],g=0;g<d.length;g++)c[d[g][0]]=[d[g][1]];for(g=0;g<b.Mf.length;g++)c["USE_NODE_"+b.Mf[g].id]=["1"];na.Ib?(c.GLSL1=["0"],c.GLSL3=["1"],c.GLSL_VERSION=["300 es"],c.GLSL_IN=
["in"],c.GLSL_OUT=["out"],c.GLSL_OUT_FRAG_COLOR=["glsl_out_frag_color"],c.GLSL_TEXTURE=["texture"],c.GLSL_TEXTURE_CUBE=["texture"],c.GLSL_TEXTURE_PROJ=["textureProj"],c.GLSL_TEXTURE_LOD=["textureLod"],c.GLSL_TEXTURE_CUBE_LOD=["textureLod"]):(c.GLSL1=["1"],c.GLSL3=["0"],c.GLSL_VERSION=["100"],c.GLSL_IN="vert"==a?["attribute"]:["varying"],c.GLSL_OUT="vert"==a?["varying"]:[""],c.GLSL_OUT_FRAG_COLOR=["gl_FragColor"],c.GLSL_TEXTURE=["texture2D"],c.GLSL_TEXTURE_CUBE=["textureCube"],c.GLSL_TEXTURE_PROJ=
["texture2DProj"],c.GLSL_TEXTURE_LOD=["textureLod"],na.Vx?(c.GLSL_TEXTURE_LOD=["texture2DLodEXT"],c.GLSL_TEXTURE_CUBE_LOD=["textureCubeLodEXT"]):(c.GLSL_TEXTURE_LOD=["texture2D"],c.GLSL_TEXTURE_CUBE_LOD=["textureCube"]));c.GLSL_SMPLR2D_SHDW=na.er&&!na.Ks?["sampler2DShadow"]:["sampler2D"];for(var k in c)c[k][0].constructor!=String&&la.warn("Warning! The value of a directive '"+k+"' is not of type string.");return c}function W(a){function b(a){"var"==a.$?d[a.ba]=a.aa.join(""):"include"==a.$&&(a=ha(Aa.shaders_path,
Aa.rI+a.oa),c(a,b))}function c(a,b,d){if(a instanceof Array)for(var h=0;h<a.length;h++)c(a[h],b,d);else if(a instanceof Object&&a){b&&b(a);for(h in a)c(a[h],b,d);d&&d(a)}}var d={};c(a,b);return d}function B(a,b,c){function d(b){b=b.da;for(var c=0;c<b.length;c++){var l=b[c];switch(l.$){case "cond":a:{l=l.da;for(var n=0;n<l.length;n++){var v=l[n];switch(v.$){case "if":case "elif":if(g(v.ga)){d(v.ha);break a}break;case "else":d(v.ha);break a;case "ifdef":v.ba in m&&d(v.ha);break;case "ifndef":v.ba in
m||d(v.ha)}}}break;case "include":l=l.oa;n=ha(Aa.shaders_path,Aa.rI+l);q.push("include/"+l);d(n);q.pop();break;case "var":break;case "define":m[l.ba]=l.aa;break;case "error":H.va("Shader error: #error "+l.aa.join(" "));break;case "line":break;case "pragma":t.push("#pragma "+l.ba+" "+l.aa.join(" "));break;case "undef":delete m[l.ba];break;case "warning":la.warn("Shader warning: #warning "+l.aa.join(" "));break;case "extension":l=f(l.aa,m,u,!1);t.push("#extension "+l.join(" "));break;case "version":l=
f(l.aa,m,u,!1),t.push("#version "+l.join(" "));case "#":break;case "node":B[l.ba]=l;break;case "nodes_global":l=p;for(n=0;n<l.length;n++){v=l[n];var A=B[v.id];if(A)for(var F=0,P=0;P<A.la.length;P++){var C=A.la[P];if("node_param"==C.$){if("PARTICLE_INFO"==v.id&&C.ea)if(1==m.PARTICLE_BATCH){var z=!1;switch(F){case 0:z=da(v.Jb,"PART_INFO_IND")||da(v.Jb,"PART_INFO_AGE")||da(v.Jb,"PART_INFO_LT")||da(v.Jb,"PART_INFO_SIZE");break;case 1:z=da(v.Jb,"PART_INFO_LOC");break;case 2:z=da(v.Jb,"PART_INFO_VEL");
break;case 3:z=da(v.Jb,"PART_INFO_A_VEL");break;case 4:z=da(v.Jb,"PART_INFO_IND")}}else z=!1;else z=!0;z&&(C=C.fa.join(" ")+" ","vert"==a?C+=v.xf[F]:"frag"==a&&(C+=v.Oa[F],null!==v.rp[F]&&(C+="="+v.rp[F])),C+=";",h(e(C)));F++}}}break;case "nodes_main":l=p;for(n=0;n<l.length;n++)if(v=l[n],A=B[v.id]){F={};S=E=y=0;P=A;C=v;z=P;for(var I={},J=0;J<z.ma.length;J++){var G=z.ma[J];I[G.ba]=[G.aa.join("")]}z=I;for(I=0;I<C.Jb.length;I++)J=C.Jb[I][0],J in z&&(z[J]=[C.Jb[I][1]]);for(I=J=0;I<P.la.length;I++)G=P.la[I],
"node_out"==G.$&&(z["USE_OUT_"+G.ba]=[-1<r.indexOf(C.outputs[J])|0],J++);P=z;C=v;z=A.la;I=F;J=P;for(G=0;G<z.length;G++){var ba=z[G];switch(ba.$){case "node_in":var O=C.inputs[y];if(null!==C.CA[y]){if(("MATERIAL_BEGIN"==C.id&&3===y||!J.MATERIAL_EXT&&("MATERIAL_BEGIN"==C.id&&4===y||"MATERIAL_END"==C.id&&3===y||"MATERIAL_END"==C.id&&4===y||"MATERIAL_END"==C.id&&5===y)||"TEXTURE_COLOR"==C.id||"TEXTURE_NORMAL"==C.id)&&ba.ea){I[ba.ba]=C.CA[y];y++;continue}var na=ba.fa.join(" ")+" ";na+=O+"="+C.CA[y]+";";
h(e(na))}I[ba.ba]=O;y++;break;case "node_out":O=C.outputs[E];if(!ba.ea||-1<r.indexOf(O))na=ba.fa.join(" ")+" ",na+=O+";",h(e(na)),I[ba.ba]=O;E++;break;case "node_param":"vert"==a?O=C.xf[S]:"frag"==a&&(O=C.Oa[S]),I[ba.ba]=O,S++}}t.push("{");k(v,A.ja,F,P);t.push("}")}break;case "txt":h(l.aa);break;default:H.va("Unknown element type: "+l.$)}}}function g(a,b){a=f(a,m,u,!0,b);b=[];for(var c=0;c<a.length;c++)if(a[c]instanceof Object)switch(a[c].$){case "conditional_expr":var d=b.pop(),h=b.pop();b.pop()?
b.push(h):b.push(d);break;case "logical_or_expr":h=b.pop();for(var g=0;g<a[c].ia-1;g++)d=b.pop(),h=h||d;b.push(h);break;case "logical_and_expr":h=b.pop();for(g=0;g<a[c].ia-1;g++)d=b.pop(),h=h&&d;b.push(h);break;case "logical_bitor_expr":h=b.pop();for(g=0;g<a[c].ia-1;g++)h|=b.pop();b.push(h);break;case "logical_bitxor_expr":h=b.pop();for(g=0;g<a[c].ia-1;g++)h^=b.pop();b.push(h);break;case "logical_bitand_expr":h=b.pop();for(g=0;g<a[c].ia-1;g++)h&=b.pop();b.push(h);break;case "equal_expr":d=b.pop();
h=b.pop();b.push(h==d);break;case "non_equal_expr":d=b.pop();h=b.pop();b.push(h!=d);break;case "le_expr":d=b.pop();h=b.pop();b.push(h<=d);break;case "ge_expr":d=b.pop();h=b.pop();b.push(h>=d);break;case "l_expr":d=b.pop();h=b.pop();b.push(h<d);break;case "g_expr":d=b.pop();h=b.pop();b.push(h>d);break;case "left_shift_expr":h=b.pop();d=b.pop();b.push(h<<d);break;case "right_shift_expr":h=b.pop();d=b.pop();b.push(h>>d);break;case "add_expr":h=b.pop();d=b.pop();b.push(h+d);break;case "sub_expr":h=b.pop();
d=b.pop();b.push(h-d);break;case "mul_expr":h=b.pop();d=b.pop();b.push(h*d);break;case "div_expr":h=b.pop();d=b.pop();b.push(h/d);break;case "mod_expr":h=b.pop();d=b.pop();b.push(h%d);break;case "pre_inc_expr":case "post_inc_expr":d=b.pop();b.push(++d);break;case "pre_dec_expr":case "post_dec_expr":d=b.pop();b.push(--d);break;case "positive_expr":d=b.pop();b.push(+d);break;case "negative_expr":d=b.pop();b.push(-d);break;case "one_compl_expr":d=b.pop();b.push(~d);break;case "logic_negative_expr":d=
b.pop();b.push(!d);break;default:H.va("Unknown operation type: "+a[c].$)}else d=a[c],/^[a-zA-Z_$][a-zA-Z_$0-9]*$/.test(d)?(b.push(0),0!=d.indexOf("USE_NODE_")&&(h=q[q.length-1],h in n||(n[h]=[]),-1==n[h].indexOf(d)&&(n[h].push(d),la.error("Undefined directive '"+d+"' in shader '"+h+"'. Should it be defined with #var/#node_var or #define?")))):b.push(parseFloat(a[c]));1==b.length?a=b[0]:(H.va("Incorrect expression: "+a.join(" ")),a=void 0);return a}function k(a,b,c,d){for(var e=0;e<b.length;e++){var f=
b[e];switch(f.$){case "node_cond":a:{var l=a;f=f.da;for(var p=c,t=d,u=0;u<f.length;u++){var q=f[u];switch(q.$){case "node_if":case "node_elif":if(g(q.ga,t)){k(l,q.ja,p,t);break a}break;case "node_else":k(l,q.ja,p,t);break a;case "node_ifdef":(q.ba in m||q.ba in t)&&k(l,q.ja,p,t);break;case "node_ifndef":q.ba in m||q.ba in t||k(l,q.ja,p,t)}}}break;case "txt":l=[];for(p=0;p<f.aa.length;p++)t=f.aa[p],t in c?l.push(c[t]):l.push(t);h(l,d)}}}function e(a){return a.match(/([\d]+\.[\d]+|[\w]+|[^\s])/g)}function h(b,
c){if(!na.Ib&&"frag"==a){var d=b.join(" ");F&&(d.match(/[^;]*;/)?(d=d.replace(/[^;]*;/,""),F=!1):d="");d=d.replace(/GLSL_OUT [^;]*;/g,"");d.match(/GLSL_OUT(?:$| [^;]*)/)&&(d=d.replace(/GLSL_OUT(?:$| [^;]*)/,""),F=!0);d=d.replace(/ {2,}/g," ");(d=d.trim())?b=d.split(" "):b=[]}b.length&&(c=f(b,m,u,!1,c),t.push(c.join(" ")))}function f(a,b,c,d,h){var g=[];l(a,b,c,d,g,h);return g}function l(a,b,c,d,h,g){for(var k=0;k<a.length;k++){var e=a[k];if(g&&e in g)e=g[e];else if(e in b)e=b[e];else{h.push(e);continue}0==
e.length&&d?h.push(0):l(e,b,c,d,h,g)}}var p=c.Mf,t=[],m=J(a,c),u={},q=[c[a]],n={},B={},r=[],v;for(v in p)for(var A in p[v].inputs)r.push(p[v].inputs[A]);var F=!1;d(b);var y=0,E=0,S=0;return t.join("\n")}function ba(a,b,c,d){b=a.createShader(d);a.shaderSource(b,c);a.compileShader(b);return b}function I(a){qa.deleteProgram(a.qj);qa.deleteShader(a.vy);qa.deleteShader(a.kv);delete D[a.WT]}function P(a,b){!b&&a.length?b=a.length:b||(b=1);switch(b){case 1:return p(a);case 2:return"vec2("+p(a[0])+","+p(a[1])+
")";case 3:return"vec3("+p(a[0])+","+p(a[1])+","+p(a[2])+")";case 4:return"vec4("+p(a[0])+","+p(a[1])+","+p(a[2])+","+p(a[3])+")";case 9:return"mat3("+p(a[0])+","+p(a[1])+","+p(a[2])+","+p(a[3])+","+p(a[4])+","+p(a[5])+","+p(a[6])+","+p(a[7])+","+p(a[8])+")";case 16:return"mat4("+p(a[0])+","+p(a[1])+","+p(a[2])+","+p(a[3])+","+p(a[4])+","+p(a[5])+","+p(a[6])+","+p(a[7])+","+p(a[8])+","+p(a[9])+","+p(a[10])+","+p(a[11])+","+p(a[12])+","+p(a[13])+","+p(a[14])+","+p(a[15])+")";default:H.va("Wrong glsl value dimension")}}
function p(a){return a%1?String(a):String(a)+".0"}function da(a,b){for(var c=0;c<a.length;c++)if(a[c][0]==b)return!0;return!1}var H=Object(U.a)(e),t=Object(n.a)(e),d=Object(z.a)(e),la=Object(C.a)(e),na=d.wa,pa=d.ei,Aa=d.Nf,D={},N={},oa=null,Y={},Q="anchors.glslf anchors.glslv color_id.glslf color_id.glslv shadow.glslf shadow.glslv error.glslf error.glslv grass_map.glslf grass_map.glslv halo.glslf halo.glslv irradiance_skybox.glslf line.glslf line.glslv main.glslf main.glslv main_stack.glslf particle_system.glslf particle_system_stack.glslf particle_system.glslv proc_skybox.glslf r_convolution_skybox.glslf skybox.glslv lens_flares.glslf lens_flares.glslv sky.glslf sky.glslv water.glslf water.glslv tex_skybox.glslf debug_view.glslf debug_view.glslv node_skybox.glslf postprocessing/antialiasing.glslf postprocessing/bloom_combine.glslf postprocessing/coc.glslf postprocessing/compositing.glslf postprocessing/depth_pack.glslf postprocessing/dof.glslf postprocessing/glow.glslf postprocessing/god_rays.glslf postprocessing/god_rays.glslv postprocessing/god_rays_combine.glslf postprocessing/luminance.glslf postprocessing/luminance_av.glslf postprocessing/luminance_truncated.glslf postprocessing/motion_blur.glslf postprocessing/outline.glslf postprocessing/performance.glslf postprocessing/postprocessing.glslf postprocessing/postprocessing.glslv postprocessing/smaa.glslf postprocessing/smaa.glslv postprocessing/ssao.glslf postprocessing/ssao_blur.glslf postprocessing/stereo.glslf postprocessing/precompute_brdf.glslf include/blending.glslf include/caustics.glslf include/color_util.glslf include/coverage.glslf include/depth_fetch.glslf include/dynamic_grass.glslv include/environment.glslf include/fog.glslf include/fxaa.glslf include/halo_color.glslf include/lighting_nodes.glslf include/math.glslv include/mirror.glslf include/nodes.glslf include/nodes.glslv include/pack.glslf include/particles.glslv include/particles_nodes.glslf include/particles_nodes.glslv include/precision_statement.glslf include/procedural.glslf include/refraction.glslf include/scale_texcoord.glslv include/shadow.glslf include/shadow.glslv include/skin.glslv include/sky_blending.glslf include/std.glsl include/to_world.glslv include/wind_bending.glslv".split(" ");
a.xD=0;a.RJ=1;a.QJ=2;a.UJ=4;a.TJ=8;a.SJ=16;a.OJ=32;var Ha=/(?:^|[^a-zA-Z_])uniform.*?(sampler2D|samplerCube)(?=\s)(.*?\[\s*([0-9]*)\s*\])?/,ia=/(?:^|[^a-zA-Z_])(uniform)(?=\s)\s*(float|vec2|vec3|vec4|ivec2|ivec3|ivec4|bvec2|bvec3|bvec4|mat2|mat3|mat4|sampler2D|samplerCube)\s*(.*?\[\s*([0-9]*)\s*\])?/,Ma=/(?:^|[^a-zA-Z_])(in)(?=\s)\s*(float|vec2|vec3|vec4|mat2|mat3|mat4)\s*(.*?\[\s*([0-9]*)\s*\])?/,Ea=/(?:^|[^a-zA-Z_])(varying)(?=\s)\s*(float|vec2|vec3|vec4|mat2|mat3|mat4)\s*(.*?\[\s*([0-9]*)\s*\])?/,
X=/(?:\W|^)discard(\W|$)/,Ga=new Int16Array(2),Fa=null,wa=null,La=null,ja=0,ta=0,ka=[],qa=null,S=!1;a.fh=function(a){qa=a};a.$Q=f;a.vN=k;a.Wa=c;a.hQ=l;a.wT=function(a){a.fi=v.O(b(a.yg,a.ff));c(a,"PRECISION",d.wa.precision);"highp"==d.wa.precision?c(a,"EPSILON",P(1E-6)):c(a,"EPSILON",P(1E-4));c(a,"CONSTANTS_HACK",na.YB|0);c(a,"SRGB",na.srgb_type);c(a,"COMPARED_MODE",na.er|0)};a.IX=function(a){return a.yg};a.BX=function(a){return a.ff};a.$P=function(a){var b=JSON.stringify(a.yg)+JSON.stringify(a.ff)+
JSON.stringify(a.fi)+JSON.stringify(a.Mf),c=D[b];if(c)return c;var d=a.ff,e=ha(Aa.shaders_path,a.yg);d=ha(Aa.shaders_path,d);if(!e||!d)return null;e=B("vert",e,a);d=B("frag",d,a);c=0;var f=u(d,Ha);a.Ux=f;f>pa.XA&&(c|=1);Fa||(Fa=new Uint32Array(pa.rw));wa||(wa=new Uint32Array(pa.TA));La||(La=new Uint32Array(pa.sw));O(d,wa,pa.TA)||(c|=2);O(e,La,pa.sw)||(c|=4);f=na.Ib?(e.replace(/(.*?)\([^()]*?\)(.*?)/g,"$1$2").match(/(?:^|[^a-zA-Z_])in(?=\s)/g)||[]).length:(e.match(/(?:^|[^a-zA-Z_])attribute(?=\s)/g)||
[]).length;a.cu=f;f>pa.YA&&(c|=8);R(d)||(c|=16);a.status=c;if(0===a.status){c=qa;var l=ba(c,b,e,c.VERTEX_SHADER,a),h=ba(c,b,d,c.FRAGMENT_SHADER,a);f=c.createProgram();c.attachShader(f,l);c.attachShader(f,h);c.linkProgram(f);l={vy:l,kv:h,qj:f,attributes:{},em:{},ss:v.S(),wB:v.S(),xB:{},ip:!0,Dw:!1,YI:v.S(),XI:v.S(),Mb:k(a),WT:b,fG:!!d.match(X),sh:!0};var p=c.getProgramParameter(f,c.ACTIVE_ATTRIBUTES);for(h=0;h<p;h++){var t=c.getActiveAttrib(f,h).name;l.attributes[t]=c.getAttribLocation(f,t)}p=c.getProgramParameter(f,
c.ACTIVE_UNIFORMS);for(h=0;h<p;h++)t=c.getActiveUniform(f,h).name.split("[0]").join(""),l.em[t]=c.getUniformLocation(f,t);D[b]=c=l;f=!qa.getShaderParameter(c.kv,qa.COMPILE_STATUS);l=!qa.getShaderParameter(c.vy,qa.COMPILE_STATUS);h=!qa.getProgramParameter(c.qj,qa.LINK_STATUS);f?g(c.kv,b,d):l?g(c.vy,b,e):h&&(p=c.qj,na.gl_debug&&(e=y(e),d=y(d),la.error("shader linking failed:\n"+e+"\n\n\n"+d+"\n"+qa.getProgramInfoLog(p)+" ("+b+")")));if(f||l||h)a.status|=32,c=null}else c=null;return c};a.GR=function(){S=
!1;if(r==m){for(var a=[],b=t.AT_TEXT,c=0;c<Q.length;c++){var d=Object(q.b)(Aa.shaders_path+Q[c]);a.push({id:Q[c],type:b,url:d})}b=function(a,b){oa||(oa={});oa[b]=a};a.length?t.enqueue(a,b,function(){S=!0}):la.error("Shaders have not been found.")}else S=!0};a.vE=function(){return S};a.jX=function(){return ka};a.SF=function(){return D};a.cleanup=function(){for(var a in D)I(D[a]);for(var b in N)delete N[b];for(var c in ka)delete ka[c];La=wa=Fa=null;Y={}};a.pN=I;a.kX=function(a){var b=a.fi;la.log("Shader: "+
a.yg+" "+a.ff+", "+String(b.length)+" directives: ");for(a=0;a<b.length;a++)la.log("  "+b[a][0],b[a][1])};a.Ga=P;a.wE=function(a,b){return b in a.em?!0:!1};a.reset=function(){qa=null}});w.a=f},function(D,w,f){D=f(0);var M=f(4),U=f(45),n=f(28),z=f(1),e=f(22);f=Object(D.a)("__compat",function(f,C){function m(a){return-1<navigator.userAgent.indexOf(a)?!0:!1}function q(){return navigator.userAgent.match(/Windows Phone/i)||navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||
navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)}function r(){return!window.ActiveXObject&&"ActiveXObject"in window}var y=Object(M.a)(f),a=Object(U.a)(f),T=Object(n.a)(f),k=Object(z.a)(f),c=Object(e.a)(f),l="R600;RV610;RV630;RV620;RV635;RV670;RS780;RS880;RV770;RV730;RV710;RV740;CEDAR;REDWOOD;JUNIPER;CYPRESS;PALM (Wrestler/Ontario);SUMO (Llano);SUMO2 (Llano);ARUBA (Trinity/Richland);BARTS;TURKS;CAICOS;CAYMAN".split(";");C.rD=256;var b=
y.Xk,g=y.wa,E=y.Lm,ea=y.context,u=y.ei,F=y.Ra,R=y.xa,O=y.se;C.XO=function(a){a.getError()==a.INVALID_ENUM&&k.warn("Possible Tegra invalid enum issue detected, ignoring")};C.cI=function(e,f){function n(a){f&&k.warn(a)}u.UR=e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS);u.TA=e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS);u.XA=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);u.rw=e.getParameter(e.MAX_VARYING_VECTORS);u.YA=e.getParameter(e.MAX_VERTEX_ATTRIBS);u.bH=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS);
u.sw=e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS);u.Xg=e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE);u.UA=e.getParameter(e.MAX_RENDERBUFFER_SIZE);u.Ic=e.getParameter(e.MAX_TEXTURE_SIZE);u.ZA=e.getParameter(e.MAX_VIEWPORT_DIMS);var v=T.get_renderer_info();if(v){var A=e.getParameter(v.UNMASKED_VENDOR_WEBGL),z=e.getParameter(v.UNMASKED_RENDERER_WEBGL);-1<A.indexOf("Qualcomm")&&-1<z.indexOf("330")&&(m("Chrome")||m("Firefox"))&&(n("Chrome/Firefox and Qualcomm 330 detected, force enable WebGL 1, disable blending cascaded shadow maps."),
g.Ib=!1,g.yE=!0)}u.yo=g.Ib?24:16;g.Ib&&!E.enabled&&(g.er=!0);g.Ib?(g.Jc=Math.min(g.Jc,e.getParameter(e.MAX_SAMPLES)),m("Firefox")&&(n("Firefox and WebGL 2 detected, applying framebuffer hack."),g.sE=!0),m("Windows")&&m("Chrome")&&(n("Windows, Chrome and WebGL 2 detected, applying multisample hack, disabling MSAA."),g.Jc=1)):g.Jc=1;m("Firefox")&&"NONE"!==g.stereo&&(n("Firefox and Stereo rendering detected, disable texture reusage"),g.AF=!0);if(g.Ib&&a.eS()||m("Firefox"))n("Firefox detected, disabling multisample"),
g.Jc=1;m("Mac OS X")&&m("Chrome/60")&&(n("macOS and Chrome 60 detected, disabling multisample"),g.Jc=1);c.yT();var W=!!T.gQ();m("Firefox/28.0")&&(m("Linux")||m("Macintosh"))&&(n("Firefox 28 detected, applying depth hack"),W=!1);m("Windows Phone")||(m("iPad")||m("iPhone")?(n("iOS detected, applying alpha hack, applying vertex animation mix normals hack, disable smaa. Disable ssao for performance. Initialize WebAudio context with empty sound. Applying glow hack."),ea.alpha||(g.background_color[3]=1),
g.Tv=!0,g.xJ=!0,g.smaa=!1,g.ssao=!1,g.BA=!0,T.XF()&&O.Vw&&(g.Fm="pvr")):m("Mac OS X")&&m("Safari")&&!m("Chrome")&&(n("OS X / Safari detected, force to wait complete loading. Applying playback rate hack for video textures. Applying canvas alpha hack."),g.RH=!0,F.XD=!0,F.CE=!0));m("Windows")&&(m("Chrome/40")||m("Firefox/33")||m("Firefox/34")||m("Firefox/35")||m("Firefox/36"))&&(n("Windows/Chrome40 or Firefox33-36 detected. Applying clear procedural skydome hack."),g.pz=!0);m("Chrome")&&!q()&&y.sG()&&
(n('Chrome (non-mobile) was detected for a single HTML-exported file. "Background Music" speakers were changed to "Background Sound".'),g.zE=!0);m("Mac OS X")&&(g.ow=!0,n("OS X detected, applying shadows hack"));q()&&(n("Mobile detected, applying various hacks for video textures."),g.is_mobile_device=!0,m("iPad")||m("iPhone")||m("Windows Phone")||(n("Mobile (not iOS) detected, disable playback rate for video textures."),F.pF=!0));m("iPad")&&(n('iPad detected, use "autoplay" hack for video textures.'),
g.pG=!0);(m("Firefox/35.0")||m("Firefox/36.0"))&&m("Windows")&&(n("Windows/Firefox 35/36 detected, applying shadows slink hack"),g.tI=!0);if(m("iPhone")||r())n("iPhone or IE11 detected. Enable sequential video fallback for video textures."),g.Rs=!0;10>u.rw&&(n("Not enough varyings, disable shadows on blend objects"),g.Lz=!0);m("Windows Phone")&&(n("Windows Phone detected. Disable debug view mode, glow materials, ssao, smaa, shadows, reflections, refractions."),g.debug_view=!1,g.glow_materials=!1,
g.ssao=!1,g.smaa=!1,g.shadows=!1,g.reflections=!1,g.refractions=!1,g.FH=!1);if(m("UCBrowser")||m("Chrome")&&m("Nexus")&&g.is_mobile_device)n("Mobile Nexus Chrome or UCBrowser detected, disable workers."),R.On=!1;m("Firefox")&&(n("Firefox detected, disabling workers"),R.On=!1);if(r()||m("Edge"))n("IE11 or Edge detected, disabling workers"),R.On=!1;m("Chrome")&&m("Linux")&&(n("Chrome and Linux detected, disabling wasm physics."),R.ut=!1);if(v){A=e.getParameter(v.UNMASKED_VENDOR_WEBGL);z=e.getParameter(v.UNMASKED_RENDERER_WEBGL);
v=/\b4\d{2}\b/;A.indexOf("Intel")&&(-1<z.indexOf("3000")||-1<z.indexOf("2000"))&&(g.zp=!1,n("Intel HD Graphics 2000/3000 detected, disable depth reuse."));m("Chrome")&&-1<z.indexOf("Mali-T720")&&(n('Chrome and ARM Mali-T720 detected, changing "Alpha Anti-Aliasing" materials to "Alpha Clip".'),g.YG=!0);-1<z.indexOf("AMD")&&m("Windows")&&m("Firefox")&&(n("AMD, Windows and Firefox detected, disabling depth textures."),W=!1);-1<A.indexOf("ARM")&&v.test(z)&&(n("ARM Mali-400 series detected, applying lamps, depth and frames blending hacks"),
W=!1,b.EF=!0,g.XG=!0);-1<A.indexOf("ARM")&&-1<z.indexOf("Mali-T604")&&(n("ARM Mali-T604 detected, disabling shadows."),g.shadows=!1);-1<A.indexOf("ARM")&&-1<z.indexOf("Mali-T760")&&(n("ARM Mali-T760 detected, disabling SSAO."),g.ssao=!1,g.px=!0,g.Ib&&(g.Jc=1,n("ARM Mali-T760 and WebGL 2 detected, switching MSAA samples to 1.")));-1<A.indexOf("ARM")&&-1<z.indexOf("Mali-T720")&&(n("ARM Mali-T720 detected, disabling depth textures."),W=!1,g.Ib&&(g.Jc=1,n("ARM Mali-T720 and WebGL 2 detected, switching MSAA samples to 1.")));
-1<A.indexOf("Qualcomm")&&-1<z.indexOf("Adreno")&&(n("Qualcomm Adreno detected, applying shader constants hack."),g.YB=!0,-1<z.indexOf("420")&&(n("Qualcomm Adreno420 detected, setting max cubemap size to 12288x8192, setting max texture size to 4096x4096."),u.Ic=Math.min(u.Ic,4096),u.Xg=Math.min(u.Xg,4096)),m("Chrome")&&(z.match(/4../)||z.match(/5../))&&(n("Qualcomm Adreno 4xx or 5xx detected, switch MSAA samples to 1."),g.Jc=1));-1<A.indexOf("NVIDIA")&&-1<z.indexOf("Tegra 3")&&(n("NVIDIA Tegra 3 detected, force low quality for B4W_LEVELS_OF_QUALITY nodes."),
g.CF=!0);m("Windows")&&m("Chrome")&&!m("Edge")&&(z.match(/NVIDIA GeForce 8..0/)||z.match(/NVIDIA GeForce 9..0/)||z.match(/NVIDIA GeForce( (G|GT|GTS|GTX))? 2../))&&(n("Chrome / Windows / NVIDIA GeForce 8/9/200 series detected, setting max cubemap size to 768x512, use canvas for resizing."),u.Xg=C.rD,g.Is=!0);-1<z.indexOf("PowerVR")&&-1<z.indexOf("SGX")&&(n("PowerVR SGX series detected, use canvas for resizing. Disable shadows. Apply skinning hack, disable skin blending between frames."),g.Is=!0,g.px=
!0,g.shadows=!1);m("Windows")&&-1<z.indexOf("Direct3D9")&&(n("DirectX 9.0 detected, using canvas for resizing textures/cubemap textures."),g.hF=!0,g.Is=!0,g.PH=!0);A="";for(v=0;v<l.length;v++)if(-1<z.indexOf(l[v])){A=l[v];break}A&&(n("Architecture "+A+" detected. Blending between frames and shadows on blend objects will be disabled."),g.px=!0,g.Lz=!0)}0==u.bH&&(n("Vertex textures are not allowed. Disabling vertex textures"),g.Wt=!1);W||(g.Ho=!1,g.ld=!1,g.water_dynamic=!1,g.shore_smoothing=!1,g.Cp=
!1,g.smaa=!1,g.ssao=!1,g.Ks=!0);g.mJ=!!T.YF()||"pvr"==g.Fm;g.Ku=W;if(e.getShaderPrecisionFormat)var B=e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT);e.getShaderPrecisionFormat&&0!==B.precision||(g.precision="mediump");if(r()&&m("Touch")||m("Edge"))n("IE11 and touchscreen or Edge detected. Behaviour of the mouse move sensor will be changed."),g.Qv=!0;if(r()||m("Edge"))g.lG=!0,g.kG=!0,g.Is=!0;q()&&m("Firefox")&&(k.log("Mobile firefox detected. Applying autoplay media hack.Setting max cubemap size to 12288x8192, setting max texture size to 4096x4096."),
g.aB=!0,u.Ic=Math.min(u.Ic,4096),u.Xg=Math.min(u.Xg,4096));e=!!T.aA();g.bz=e;e=!!T.jA();g.Vx=e;e=!!T.zQ();g.RI=e;e=!!T.BQ();g.BU=e;e=!!T.AQ();g.AU=e;e=!!T.CQ();g.CU=e;e=!!T.YP();g.qE=e;e=!!T.ZP();g.cN=e};C.xE=m;C.detect_mobile=q;C.tM=function(){m("Firefox/35.0")&&m("Windows")&&(k.warn("Windows/Firefox 35 detected, forcing context's alpha"),y.context.alpha=!0)};C.is_ie11=r});w.a=f},function(D,w,f){function M(b,c,g){b=v(b,c||0,g);a.normalize(b,g);return g}function U(b,g,k){k=k||0;var e=v(b,k,O),f=a.length(e),
m=c._50(e[3])*c._50(g[3])||1;a.scale(g,m*f,e);Math.abs(e[3])<l&&(e[3]=0<e[3]?l:-l);q(b,e,k);return b}function n(a,b){return c._50(a[4*(b||0)+3])}function z(b,g,k){k=k||0;var e=v(b,k,O);0>c._50(e[3])*g&&a.scale(e,-1,e);q(b,e,k);return b}function e(b,c,g){g=g||0;var k=v(b,g,O);a.normalize(k,k);a.scale(k,c,k);Math.abs(k[3])<l&&(k[3]=0<k[3]?k[3]+l:k[3]-l);q(b,k,g);return b}function m(b,c){b=v(b,c||0,O);return a.length(b)}function C(a){a=0!==a?a||1:0;for(var b=new Float32Array(4*a),c=0;c<a;c++)b[4*c+3]=
g;return b}function v(a,b,c){c[0]=a[4*b];c[1]=a[4*b+1];c[2]=a[4*b+2];c[3]=a[4*b+3];return c}function q(a,b,c){a[4*c]=b[0];a[4*c+1]=b[1];a[4*c+2]=b[2];a[4*c+3]=b[3];return a}function r(a){return a.length/4}function y(b,c,g){for(var k=r(b),f=0;f<k;f++){var l=n(b,f),u=m(b,f),q=M(b,f,ea);q=a.multiply(c,q,ea);U(g,q,f);e(g,u,f);z(g,l,f)}}f.d(w,"a",function(){return b});w.d=function(f,m,n){var q=!(!m||!m.length),r=f.length/3;n=n||C(r);for(var v=0;v<r;++v){var B=u;B[0]=f[3*v];B[1]=f[3*v+1];B[2]=f[3*v+2];
k.normalize(B,B);if(q){var A=K;A[0]=m[b*v];A[1]=m[b*v+1];A[2]=m[b*v+2];A[3]=m[b*v+3];k.normalize(A,A);var y=k.cross(A,B,F);k.normalize(y,y);var P=a.rotationTo(c.f,y,E),p=k.transformQuat(c.e,P,R);p=a.rotationTo(p,B,ea);P=a.multiply(p,P,E);a.normalize(P,P);p=g;y=k.cross(B,y,R);if(Math.abs(y[0]-A[0])>l||Math.abs(y[1]-A[1])>l||Math.abs(y[2]-A[2])>l)p=Math.acos(k.dot(B,A))/Math.PI;U(n,P,v);z(n,c._50(A[3]),v);e(n,p,v)}else P=a.rotationTo(c.e,B,E),U(n,P,v)}return n};w.b=function(a,b,c,g){if(0!==c){b=4*b||
0;c=c||a.length;for(var k=0,e=0;k<4*c;k+=4,e+=4)g[e]=a[b+k],g[e+1]=a[b+k+1],g[e+2]=a[b+k+2],g[e+3]=a[b+k+3]}};w.h=M;w.o=U;w.g=function(a,b,g){a=M(a,b,E);return k.transformQuat(c.e,a,g)};w.c=C;w.i=function(a){for(var b=0;b<a.length;b+=4)a[b]=0,a[b+1]=0,a[b+2]=0,a[b+3]=g;return a};w.e=v;w.n=q;w.f=r;w.j=y;w.m=function(a,b,c){b=T.g(b,E);return y(a,b,c)};w.p=function(b,c,g,k){var f=n(c,0),l=M(b,0,E),u=M(c,0,ea);b=m(b);c=m(c);l=a.slerp(l,u,g,ea);a.normalize(l,l);U(k,l,0);e(k,g*(b-c)+c);z(k,f,0);return k};
w.k=function(b,c,k){var f=n(c,0),l=M(b,0,E),u=M(c,0,ea);b=m(b,0);c=m(c,0);l=a.multiply(l,u,E);U(k,l,0);e(k,b+c-g);z(k,f,0);return k};w.l=function(b,c,k){var f=n(c,0),l=M(b,0,E),u=M(c,0,ea);b=m(b);c=m(c);u=a.invert(u,ea);l=a.multiply(l,u,E);U(k,l,0);e(k,b-c+g);z(k,f,0);return k};var a=f(8),T=f(6),k=f(3);D=f(7);var c=f(2),l=3.1E-5,b=4,g=.5,E=a.create(),ea=a.create(),u=k.create(),F=k.create(),R=k.create(),O=D.create(),K=D.create()},function(D,w){function f(){if("DEBUG"==n){var f=M();return[parseInt(String(f.getFullYear()).slice(-2),
10),f.getMonth()+1]}return e}function M(){return"DEBUG"==n?new Date:z}function U(){var e=M(),f=e.getDate();f=10>f?"0"+String(f):String(f);var m=e.getMonth()+1;m=10>m?"0"+String(m):String(m);var n=String(e.getFullYear()),y=e.getHours();y=10>y?"0"+String(y):String(y);var a=e.getMinutes();a=10>a?"0"+String(a):String(a);e=e.getSeconds();e=10>e?"0"+String(e):String(e);return f+"."+m+"."+n+" "+y+":"+a+":"+e}w.e=f;w.f=function(){for(var e="",m=f(),n=0;n<m.length;n++)e=1==n?e+(10>m[n]?"0"+m[n]:m[n]):e+m[n],
n!=m.length-1&&(e+=".");return e};w.d=function(){return n};w.a=M;w.b=U;w.c=function(){if("DEBUG"!=n)return m;var e=U();return e=e.split(" ").join("").split(":").join("").split(".").join("")};var n="RELEASE",z=new Date(2022,7,9,1,56,58),e=[18,5,0],m="_b4w_ver_18_05_0_"},function(D,w,f){D=f(0);var M=f(56),U=f(5),n=f(4),z=f(57),e=f(9),m=f(47),C=f(19),v=f(1),q=f(8),r=f(10),y=f(23),a=f(11),T=f(18),k=f(13),c=f(6),l=f(2),b=f(3);f(7);f=Object(D.a)("__animation",function(g,f){function E(a,b){var c=a.Za[b];
c&&c.dv&&c.Br&&(c.Br=!1,c.dv(a,b))}function u(a,b,c){c=a.Za[c];c.type=30;var d=b.sb,h=b.$b-d+1;c.start=d;c.length=h;c.Pg=d;c.Hj=b.name;for(h=d=0;h<a.Ld.length;h++){var g=a.Ld[h];if(g==b)break;else d+=g.$b-g.sb+1}c.vJ=d}function F(a,b,c){b.type=50;b.Hj=c.name;b.start=c.sb;b.length=c.$b-b.start;c.cyclic||(b.length+=c.cs)}function R(a,b){var c={type:null,Hj:null,Wy:null,MD:0,KD:null,Pj:new Int8Array(8),uc:null,scale:null,trans:null,Kj:null,Lj:null,bC:[],play:!1,behavior:20,Pg:0,start:0,length:0,DC:0,
DB:0,Br:!1,vJ:null,speed:1,volume:null,pitch:null,color:null,Qg:null,Fe:null,we:null,fog_intensity:null,fog_depth:null,fog_start:null,fog_height:null,Rm:null,kH:[],pi:[],jH:[],oi:[],mp:null};if(!a.Za.length)for(var d=0;8>d;d++)a.Za.push(null);a.Za[b]=c}function O(a){return a.replace(/_B4W_BAKED$/,"")}function K(a,b){return{rn:a,action:b}}function A(a,b,c){if(a.animation_data){var d=a.animation_data.action;d&&60==d.sa.type&&b.push(K(c,d))}a=a.nodes;for(d=0;d<a.length;d++){var h=a[d];if(h.node_group){var g=
h.node_group.node_tree;if(g){var k=c.slice();k.push(h.name);A(g,b,k)}}}}function w(a){return ta.is_mesh(a)&&a.ka.Ld?!0:!1}function L(a,b,c){var d=a.Za;if(-1==c)for(c=0;8>c;c++){var h=d[c];h&&(h.Pg=b,J(a,0,c,!0))}else if(h=d[c])h.Pg=b,J(a,0,c,!0)}function ha(a,b,c){if(-1==b)for(b=0;8>b;b++){var d=a[b];d&&c(d)}else(d=a[b])&&c(d)}function J(a,b,c,d){da(a,b,c,d);E(a,c);a.ka.Gj&&(na(a,b),t(a,b))}function W(a,b,c,d){var h=c.frame_range;if(h[0]>h[1])return S.warn('Incompatible action "'+c.name+'" has been applied to object "'+
a.name+'"'),!1;var g=c.sa,k=a.Za[d];k.Hj=c.name;k.Wy=h;k.MD=g.xH;k.KD=g.aE;k.Pj.set(g.Pj);k.start=h[0];k.length=h[1]-h[0];k.Pg=h[0];switch(g.type){case 10:if(ta.is_armature(a)){k.type=10;var e=B(a,b,c);e||(e=pa(c,a.ka.Mg),ba(a,b,c,e));k.trans=e.trans;k.uc=e.uc;k.Kj=e.Kj;k.Lj=e.Lj;I(a,d,c,e)}break;case 40:ta.is_speaker(a)&&(k.volume=g.Oa.volume||null,k.pitch=g.Oa.pitch||null,k.type=40);break;case 70:ta.is_lamp(a)&&(k.color=g.Oa.color||null,k.Qg=g.Oa.energy||null,k.type=70);break;case 60:if("MESH"==
a.type||"WORLD"==a.type){k.type=60;h=ta.is_world(a);var f=[],l=[],t=[],m=[],u=[];c=c.sa;var n=b?b[0]:null;for(e in c.Oa){var q=b;var r=e.match(/"(.*?)"/)[1];if(q&&1<q.length){for(var v=q[1],A=2;A<q.length;A++)v=v+"%join%"+q[A];v+="%join%"+r}else v=r;q=v;for(r=0;r<a.Aa.length;r++)for(v=a.Aa[r].Ia,A=0;A<v.length;A++){var F=v[A];if(h||!n||-1!=F.Hc.indexOf(n)){var y=F.oi;var H=e;var E=q,P=c,z=l,C=f,O=F.pi;if(O){for(var na=!1,J=0;J<O.length;J+=3)E==O[J]&&(C.push(4*O[J+1]+O[J+2]),z.push(new Float32Array(P.Oa[H])),
na=!0);H=na}else H=!1;E=e;P=q;z=c;C=m;O=t;if(y){na=!1;for(J=0;J<y.length;J+=2)P==y[J]&&(O.push(y[J+1]),C.push(new Float32Array(z.Oa[E])),na=!0);y=na}else y=!1;(H||y)&&u.push(F)}}}k.pi=f;k.kH=l;k.oi=t;k.jH=m;k.mp=u}break;case 20:if(e=g.Oa.tsr)k.type=20,h=B(a,b,c),h||(h=ib(a,c,e),ba(a,b,c,h)),k.trans=h.trans,k.scale=h.scale,k.uc=h.uc,ka.lB(a)&&ka.pV(a,k.trans[0],k.scale[0],k.uc[0]);else return S.warn('Incompatible action "'+c.name+'" has been applied to object "'+a.name+'"'),!1;break;case 80:ta.is_world(a)&&
(k.Qg=g.Oa["light_settings.environment_energy"]||null,k.we=g.Oa.horizon_color||null,k.Fe=g.Oa.zenith_color||null,k.fog_intensity=g.Oa["mist_settings.intensity"]||null,k.fog_depth=g.Oa["mist_settings.depth"]||null,k.fog_start=g.Oa["mist_settings.start"]||null,k.fog_height=g.Oa["mist_settings.height"]||null,k.Rm=g.Oa.b4w_fog_color||null,k.type=80)}ta.is_armature(a)&&10!=g.type&&p(a,d);return!0}function B(a,b,c){a=a.ho;b=b?b.join("%join%"):null;for(var d=0;d<a.length;d+=3)if(c==a[d]&&b==a[d+1])return a[d+
2];return null}function ba(a,b,c,d){a.ho.push(c,b?b.join("%join%"):null,d)}function I(a,b,c,d){var h=a.ka,g=h.Fp,k=a.Za[b],e=k.bC;a:{var f=h.ox;for(var l=0;l<f.length;l+=2)if(c==f[l]){f=f[l+1];break a}f=null}if(f)k.bC=f;else{for(k=0;k<g.length;k++){f=g[k].Oi;l=[];for(var p=[],t=d.trans,m=d.uc,u=0;u<t.length;u++){var n=D(t[u],m[u],f);l.push(n.trans);p.push(n.uc)}e.push({trans:l,uc:p})}h.ox.push(c,e)}h.Gj&&(c=h.Mi,b>c[1]?(d=c[1],c[1]=b,c[0]=d):b>c[0]&&b<c[1]&&(c[0]=b),P(a))}function P(a){var b=a.ka.Mi;
if(-1!=b[0]&&-1!=b[1]){var c=a.Za;a=c[b[1]].Pg;var d=Math.floor(a),h=a-d;b=c[b[0]];a=b.Pg;d=Math.floor(a);b.Pg=d+h}}function p(a,b){var c=a.ka.Mi,d=c[1];c[0]=-1;c[1]=-1;if(-1!=b)for(a=a.Za;0<=d;d--)if((b=a[d])&&10==b.type)if(d>c[1])c[1]=d;else{d>c[0]&&(c[1]=d);break}}function da(a,d,g,k){if((g=a.Za[g])&&null!=g.type&&(g.play||k)){var e=a.ka,f=g.Pg,p=g.start,t=g.length;f+=g.speed*d*ma.ke();var m=g.type,u=g.speed;if(0<=u&&f>=p+t||0>u&&f<p)switch(k||(g.Br=!0),g.behavior){case 10:0<=u?f=(f-p)%t+p:f=p+
t-1E-6;break;case 20:0<=u?f=p:f=p+t-1E-6;g.play=!1;break;case 30:0<=u?f=p+t-1E-6:f=p,g.play=!1}g.Pg=f;switch(m){case 10:if(!e.Gj){k=H(g);d=k[0];var n=k[1];k=k[2];e.ye=g.uc[d];e.qf=g.uc[n];e.De=g.trans[d];e.wf=g.trans[n];e.lg=k;k=e.Fp;g=g.bC;for(var B=0;B<k.length;B++){var r=k[B],v=g[B];r.ye=v.uc[d];r.qf=v.uc[n];r.De=v.trans[d];r.wf=v.trans[n];r.lg=e.lg}za.Ea(a)}break;case 20:k=H(g);e=ya;n=k[0];B=k[1];r=k[2];v=g.trans;var A=v[n][1];f=v[n][2];p=v[B][1];t=v[B][2];e[0]=(1-r)*v[n][0]+r*v[B][0];e[1]=(1-
r)*A+r*p;e[2]=(1-r)*f+r*t;n=Ta;B=k[0];r=k[1];v=k[2];A=g.scale;f=A[B][1];p=A[B][2];t=A[r][1];m=A[r][2];n[0]=(1-v)*A[B][0]+v*A[r][0];n[1]=(1-v)*f+v*t;n[2]=(1-v)*p+v*m;B=ab;v=k[0];r=k[1];k=k[2];A=g.uc;f=bb;f[0]=A[v][0];f[1]=A[v][1];f[2]=A[v][2];f[3]=A[v][3];v=Ua;v[0]=A[r][0];v[1]=A[r][1];v[2]=A[r][2];v[3]=A[r][3];q.slerp(f,v,k,B);a.parent&&a.ts&&(k=Ba,c.t(e,n,B,k),c.q(a.ts,k,k),c.j(k,e),c.i(k,n),c.g(k,B));g.DC&&(k=za.get_translation(a,Va),l._54(e,k,d,g.DC,e));g.DB&&(k=bb,za.get_rotation(a,k),l._52(B,
k,d,g.DB,B));f=g.Pj;f[0]&&za.set_translation_rel(a,e);f[1]&&za.set_rotation_rel(a,B);f[2]&&za.set_scale_rel(a,n);za.Ea(a);qa.sync_transform(a);break;case 30:k=g.Pg-g.start;0>k&&(k=0);k>=g.length&&(k=g.length);a=Math.floor(k);d=a+1;k-=a;10!=g.behavior&&d==g.length&&(d=--a,k=1);g=g.vJ;h[0]=a+g;h[1]=d+g;h[2]=k;k=h;e.ny=k[0];e.oy=k[2];break;case 40:k=H(g);d=k[0];e=k[1];k=k[2];g.volume&&xa.set_volume(a,(1-k)*g.volume[d]+k*g.volume[e]);g.pitch&&xa.playrate(a,(1-k)*g.pitch[d]+k*g.pitch[e]);break;case 50:d=
10==g.behavior?(f-p)/ma.ke():f/ma.ke();ka.PT(a,g.Hj,d);break;case 60:k=H(g);d=k[0];e=k[1];k=k[2];A=g.kH;f=g.pi;n=g.jH;B=g.oi;r=g.mp;for(g=0;g<f.length;g++)for(p=A[g],v=f[g],t=(1-k)*p[d]+k*p[e],p=0;p<r.length;p++)r[p].ri[v]=t;for(g=0;g<B.length;g++)for(A=n[g],v=B[g],A=b.lerp(A.subarray(3*d,3*d+3),A.subarray(3*e,3*e+3),k,ya),p=0;p<r.length;p++)r[p].Ne[3*v]=A[0],r[p].Ne[3*v+1]=A[1],r[p].Ne[3*v+2]=A[2];ta.is_world(a)&&va.gy(a);break;case 70:k=H(g);d=k[0];e=k[1];k=k[2];f=g.Pj;(t=g.Qg)&&f[0]&&z.d(a.lc,
(1-k)*t[d]+k*t[e]);(g=g.color)&&f[1]&&(ya[0]=(1-k)*g[3*d]+k*g[3*e],ya[1]=(1-k)*g[3*d+1]+k*g[3*e+1],ya[2]=(1-k)*g[3*d+2]+k*g[3*e+2],z.b(a.lc,ya));p=a.Aa;for(g=0;g<p.length;g++)va.WU(a,p[g].Bb);break;case 80:k=H(g);d=k[0];e=k[1];k=k[2];f=g.Pj;p=a.Aa;u=va.yc(p[0].Bb,ra.ic);t=g.Qg;t=f[0]?(1-k)*t[d]+k*t[e]:u.Qg;m=g.we;f[1]?(ya[0]=(1-k)*m[3*d]+k*m[3*e],ya[1]=(1-k)*m[3*d+1]+k*m[3*e+1],ya[2]=(1-k)*m[3*d+2]+k*m[3*e+2],m=ya):m=u.we;var F=g.Fe;f[2]?(Ta[0]=(1-k)*F[3*d]+k*F[3*e],Ta[1]=(1-k)*F[3*d+1]+k*F[3*e+1],
Ta[2]=(1-k)*F[3*d+2]+k*F[3*e+2],u=Ta):u=u.Fe;F=g.fog_intensity;f[3]&&(n=(1-k)*F[d]+k*F[e]);F=g.fog_depth;f[4]&&(B=(1-k)*F[d]+k*F[e]);F=g.fog_start;f[5]&&(r=(1-k)*F[d]+k*F[e]);F=g.fog_height;f[6]&&(v=(1-k)*F[d]+k*F[e]);g=g.Rm;f[7]&&(ab[0]=(1-k)*g[3*d]+k*g[3*e],ab[1]=(1-k)*g[3*d+1]+k*g[3*e+1],ab[2]=(1-k)*g[3*d+2]+k*g[3*e+2],A=ab);for(g=0;g<p.length;g++)d=a.Aa[g].Bb,(f[0]||f[1]||f[2])&&va.set_environment_colors(d,t,m,u),f[3]&&va.ZH(d,n),f[4]&&va.XH(d,B),f[5]&&va.$H(d,r),f[6]&&va.YH(d,v),f[7]&&va.set_fog_color_density(d,
A);break;default:La.va("Unknown animation type:"+m)}}}function H(a){var b=a.Wy[0],c=a.Wy[1]-b;b=a.Pg-b;0>b&&(b=0);b>=c&&(b=c);b/=a.MD;c=Math.floor(b);a=a.KD[c]?b-c:0;b=Math.ceil(c+a);h[0]=c;h[1]=b;h[2]=a;return h}function t(a,b){var c=a.ka,h=c.Zf,g=c.Mi,k=g[0];g=g[1];if(-1!=g){if(-1!=k){var e=a.Za[k];if(e.play||0==b||c.ni){var f=H(e),l=f[0],p=f[1];c.lg=f[2];f=e.uc[l];var t=e.uc[p],m=e.trans[l],u=e.trans[p]}else h=1}else h=1;g=a.Za[g];if(g.play||0==b||c.ni){b=H(g);var n=b[0],q=b[1];c.lg=b[2]}else if(-1!=
k&&e.play)h=0;else return;b=g.uc[n];k=g.uc[q];var B=g.trans[n],r=g.trans[q];if(1!=h||c.ni)if(0!=h||c.ni){h=c.Mg;if(c.ni&&!c.bm&&!c.Ll){c.bm=new Float32Array(c.De.length);c.Ll=new Float32Array(c.ye.length);for(var v in h)f=h[v],f.vn||la(c,f)}for(v in h)f=h[v],f.vn||d(c,f,e,g,l,p,n,q)}else c.ye.set(f),c.qf.set(t),c.De.set(m),c.wf.set(u);else c.ye.set(b),c.qf.set(k),c.De.set(B),c.wf.set(r);za.Ea(a);M.f(a)}}function d(a,b,h,g,k,e,f,p){var t=b.vn,m=a.Zf,u=ab,n=bb,B=Ca,r=Wa,v=Ua,A=Qa,F=Ra,y=V,H=4*b.Ni,
E=g.Kj[f],P=g.Lj[f],S=g.Kj[p],z=g.Lj[p];if(!a.ni)var C=h.Kj[k],I=h.Lj[k],ba=h.Kj[e],O=h.Lj[e];for(var J=0;4>J;J++)n[J]=E[H+J],r[J]=P[H+J],A[J]=S[H+J],y[J]=z[H+J],a.ni?(u[J]=a.Ll[H+J],B[J]=a.bm[H+J],v[J]=a.Ll[H+J],F[J]=a.bm[H+J]):(u[J]=C[H+J],B[J]=I[H+J],v[J]=ba[H+J],F[J]=O[H+J]);q.slerp(u,n,m,u);l.G(B,r,m,B);c.w(B,Ba);c.r(u,Ba);t&&c.q(t.ey,Ba,Ba);c.a(Ba,b.ey);c.q(Ba,b.GC,Ba);c.l(Ba,B);c.g(Ba,u);q.slerp(v,A,m,v);l.G(F,y,m,F);c.w(F,Ba);c.r(v,Ba);t&&c.q(t.dy,Ba,Ba);c.a(Ba,b.dy);c.q(Ba,b.GC,Ba);c.l(Ba,
F);c.g(Ba,v);for(J=0;4>J;J++)a.ye[H+J]=u[J],a.De[H+J]=B[J],a.qf[H+J]=v[J],a.wf[H+J]=F[J];b=b.Lu;for(J=0;J<b.length;J++)d(a,b[J],h,g,k,e,f,p)}function la(a,b){for(var d=4*b.Ni,h=b.vn,g=a.Zf,k=Ca,e=ab,f=Wa,p=bb,t=0;4>t;t++)k[t]=a.De[d+t],e[t]=a.ye[d+t],f[t]=a.wf[d+t],p[t]=a.qf[d+t];c.w(k,Ba);c.r(e,Ba);c.q(Ba,b.Ai,Ba);c.a(Ba,b.ey);h&&(c.p(h.ey,fa),c.q(fa,Ba,Ba));c.l(Ba,k);c.g(Ba,e);c.w(f,Ba);c.r(p,Ba);c.q(Ba,b.Ai,Ba);c.a(Ba,b.dy);h&&(c.p(h.dy,fa),c.q(fa,Ba,Ba));c.l(Ba,f);c.g(Ba,p);q.slerp(e,p,g,e);l.G(k,
f,g,k);for(t=0;4>t;t++)a.Ll[d+t]=e[t],a.bm[d+t]=k[t];b=b.Lu;for(t=0;t<b.length;t++)la(a,b[t])}function na(a,b){a=a.ka;var c=a.Zf,d=a.jo;0!=d&&(!a.ni||a.bm||a.Ll||(c=a.Zf=0),c=a.io-c,b=d*b,l._50(c)==l._50(d)&&Math.abs(b)<Math.abs(c)?a.Zf+=b:(a.Zf=a.io,a.jo=0,a.Fj&&(a.Fj(),a.Fj=null),a.ni&&(a.bm=null,a.Ll=null,a.ni=!1)))}function pa(a,b){for(var d=[],h=[],g=[],k=[],e=a.sa.kB,f=0;f<e;f++){for(var l in b){var p=b[l],t=p.kt,m=a.sa.jz[l];m?c.f(m,f,t):c.m(t);p.cy=!1}p=Aa(b);d.push(p.trans);h.push(p.uc);
g.push(p.Lj);k.push(p.Kj)}return{trans:d,uc:h,Lj:g,Kj:k}}function Aa(a){var b=[],d=[],h=[],g=[],k=new Float32Array(4),e=new Float32Array(4),f=new Float32Array(4),l=new Float32Array(4),p;for(p in a){var t=a[p],m=k,u=e,n=t.ru,q=n[n.length-1],B=q.FC;q.cy||c.m(B);for(q=n.length-1;0<=q;q--){var r=n[q],v=r.FC;if(r.cy)B=v;else{var A=r.Ai,F=r.kt;c.p(A,Ba);c.q(F,Ba,Ba);c.q(A,Ba,Ba);c.q(B,Ba,v);B=v;r.cy=!0}}n=r.FC;c.l(n,m);c.g(n,u);m=t.Ni;c.q(t.Yp,t.kt,Ba);c.l(Ba,f);c.g(Ba,l);for(t=0;4>t;t++)u=4*m+t,b[u]=k[t],
d[u]=e[t],h[u]=f[t],g[u]=l[t]}return{trans:b,uc:d,Lj:h,Kj:g}}function D(a,b,c){var d=[],h=[],g;for(g in c){var k=c[g],e=k.Ni;k=k.Jz;for(var f=0;4>f;f++){var l=4*k+f,p=4*e+f;d[l]=a[p];h[l]=b[p]}}d=new Float32Array(d);h=new Float32Array(h);return{trans:d,uc:h}}function N(a){var b=a.sa;if(b.jz)var c=10;else if(b.Oa)if("volume"in b.Oa||"pitch"in b.Oa)c=40;else{var d;a:{if(d=a.sa.Oa)for(var h in d)if(-1!=h.indexOf("nodes")){d=!0;break a}d=!1}if(d)c=60;else{a:{if(a.sa.Oa){d=a.fcurves;for(g in d)if("color"==
g&&!d[g][3]){var g=!0;break a}if("energy"==g){g=!0;break a}}g=!1}if(g)c=70;else if(g=a.sa.Oa,"light_settings.environment_energy"in g||"horizon_color"in g||"zenith_color"in g||"mist_settings.intensity"in g||"mist_settings.depth"in g||"mist_settings.start"in g||"mist_settings.height"in g||"b4w_fog_color"in g)c=80;else{a:{if(a.sa.Oa)for(c in a=a.fcurves,a)if("location"==c||"rotation_quaternion"==c||"scale"==c){c=!0;break a}c=!1}c=c?20:0}}}else c=0;b.type=c}function oa(a,b){b[0]=b[1]=b[2]=0;for(var c in a)"location"==
c?b[0]=1:"rotation_quaternion"==c?b[1]=1:"scale"==c&&(b[2]=1)}function Y(a,b){b[0]=b[1]=0;for(var c in a)"energy"==c?b[0]=1:"color"==c&&(b[1]=1)}function Q(a,b){b[0]=b[1]=b[2]=0;b[3]=b[4]=b[5]=0;b[6]=b[7]=0;for(var c in a)"light_settings.environment_energy"==c?b[0]=1:"horizon_color"==c?b[1]=1:"zenith_color"==c?b[2]=1:"mist_settings.intensity"==c?b[3]=1:"mist_settings.depth"==c?b[4]=1:"mist_settings.start"==c?b[5]=1:"mist_settings.height"==c?b[6]=1:"b4w_fog_color"==c&&(b[7]=1)}function Ha(a,b,c,d,
h,g,k){var e=a+(b-a)/2,f=ia(e,d,h,g,k)-c;return.02>Math.abs(f)?e:0<f?Ha(a,e,c,d,h,g,k):Ha(e,b,c,d,h,g,k)}function ia(a,b,c,d,h){var g=1-a;return b*g*g*g+3*c*g*g*a+3*d*g*a*a+h*a*a*a}function Ma(a,b){R(a,b);-1==Na.indexOf(a)&&Na.push(a)}function Ea(a,b){za.Ea(a);qa.sync_transform(a);J(a,0,b,!0)}function X(a,b,c,d){d=d||0;if(ta.is_mesh(a)){var h=Ga(a,c);if(h)return Ma(a,d),u(a,h,d),Ea(a,d),!0;if((h=Fa(a,c))&&"EMITTER"==h.Mw){Ma(a,d);b=h.name;c=d;h=a.Aa;for(var g=0;g<h.length;g++)for(var k=h[g].Ia,e=
0;e<k.length;e++){var f=k[e].tb;f&&f.name==b&&F(k[e],a.Za[c],f)}Ea(a,d);return!0}}if(h=l._19("name",c,Xa)||l._19("name",c+"_B4W_BAKED",Xa)){Ma(a,d);if(W(a,b,h,d))return Ea(a,d),!0;a.Za[d]=null}S.error('Unsupported object: "'+a.name+'" or animation name: "'+c+'"');return!1}function Ga(a,b){for(var c=0;c<a.Ld.length;c++){var d=a.Ld[c];if(d.name===b)return d}return null}function Fa(a,b){a=a.Aa;for(var c=0;c<a.length;c++)for(var d=a[c].Ia,h=0;h<d.length;h++){var g=d[h].tb;if(g&&g.name===b)return g}return null}
function wa(a){a=a.modifiers;for(var b=0;b<a.length;b++){var c=a[b];if("ARMATURE"==c.type)return c.object}return null}var La=Object(U.a)(g),ja=Object(n.a)(g),ta=Object(e.a)(g),ka=Object(m.a)(g),qa=Object(C.a)(g),S=Object(v.a)(g),va=Object(r.a)(g),xa=Object(y.a)(g),ra=Object(a.a)(g),ma=Object(T.a)(g),za=Object(k.a)(g),Da=ja.Xk,ua=ja.ei;f.fK=1E-6;f.OBJ_ANIM_TYPE_NONE=0;f.OBJ_ANIM_TYPE_ARMATURE=10;f.OBJ_ANIM_TYPE_OBJECT=20;f.OBJ_ANIM_TYPE_VERTEX=30;f.OBJ_ANIM_TYPE_SOUND=40;f.OBJ_ANIM_TYPE_PARTICLES=
50;f.OBJ_ANIM_TYPE_MATERIAL=60;f.PK=70;f.OK=80;f.SLOT_0=0;f.SLOT_1=1;f.SLOT_2=2;f.SLOT_3=3;f.SLOT_4=4;f.SLOT_5=5;f.SLOT_6=6;f.SLOT_7=7;f.SLOT_ALL=-1;f.AB_CYCLIC=10;f.AB_FINISH_RESET=20;f.AB_FINISH_STOP=30;var h=Array(3),ya=new Float32Array(3),Ta=new Float32Array(3),Va=new Float32Array(3),Ca=new Float32Array(4),Wa=new Float32Array(4),Ra=new Float32Array(4),V=new Float32Array(4),ab=new Float32Array(4),bb=new Float32Array(4),Ua=new Float32Array(4),Qa=new Float32Array(4),Ba=c.b(),fa=c.b(),Na=[],Xa=[];
f.VF=function(){return l._64((ua.sw-50)/4)};f.frame_to_sec=function(a){return a/ma.ke()};f.update=function(a){for(var b=0;b<Na.length;b++){for(var c=Na[b],d=0;8>d;d++)da(c,a,d);c.ka.Gj&&(na(c,a),t(c,a))}for(b=0;b<Na.length;b++)for(c=Na[b],d=0;8>d&&c.Za.length;d++)E(c,d)};f.QP=function(){return Xa};f.get_anim_names=function(a){var b=[];if(w(a))for(var c=0;c<a.Ld.length;c++)b.push(a.Ld[c].name);var d=[];for(c=0;c<Xa.length;c++){var h=Xa[c],g=h.sa;20==g.type?d.push(h):60!=h.sa.type||"MESH"!=a.type&&
"WORLD"!=a.type?10==g.type&&"ARMATURE"==a.type?d.push(h):40==g.type&&"SPEAKER"==a.type?d.push(h):80==g.type&&"WORLD"==a.type&&d.push(h):d.push(h)}for(c=0;c<d.length;c++)b.push(O(d[c].name));if(ka.lB(a)&&ka.oH(a))for(a=a.Aa,c=0;c<a.length;c++)for(d=a[c].Ia,h=0;h<d.length;h++)(g=d[h].tb)&&b.push(g.name);return b};f.HI=O;f.get_anim_type=function(a,b){return(a=a.Za[b])?a.type:0};f.apply_def=function(a){for(var b=0,c=a.Aa,d=0;d<c.length;d++)for(var h=c[d].Ia,g=0;g<h.length;g++){var k=h[g].tb;k&&"EMITTER"==
k.Mw&&!h[g].yh&&(Ma(a,b),F(h[g],a.Za[b],k),Ea(a,b),k.cyclic?a.Za[b].behavior=10:a.Za[b].behavior=a.vm,b++)}c=a.Mm.slice();for(d=0;d<c.length;d++)g=c[d],h=g.rn,g=g.action,Ma(a,b),W(a,h,g,b)?(Ea(a,b),a.Za[b].behavior=a.vm,b++):a.Za[b]=null;w(a)&&(Ma(a,b),u(a,a.Ld[0],b),Ea(a,b),a.Za[b].behavior=a.vm)};f.az=function(a){switch(a){case "CYCLIC":return 10;case "FINISH_RESET":return 20;case "FINISH_STOP":return 30;default:La.va("Wrong animation behavior")}};f.UP=function(a){var b=[];a=a.data.materials;for(var c=
0;c<a.length;c++){var d=a[c],h=d.ne;h&&A(h,b,[d.name])}return b};f.VP=function(a){var b=[],c=a.node_tree;c&&A(c,b,[a.name]);return b};f.mG=K;f.play=function(a,b,c){ha(a.Za,c,function(a){a.play=!0;b?a.dv=b:a.dv=null;a.Br=!1});a.ka.Gj&&P(a)};f.stop=function(a,b){ha(a.Za,b,function(a){a.play=!1;a.dv=null;a.Br=!1})};f.is_play=function(a,b){a=a.Za;if(-1==b)for(b=0;8>b;b++){if(a[b]&&a[b].play)return!0}else if(b=a[b])return b.play;return!1};f.set_frame=L;f.set_first_frame=function(a,b){b=b||0;ha(a.Za,b,
function(c){L(a,c.start,b)})};f.cA=function(a,b){return(a=a.Za[b])&&a.Pg?a.Pg:0};f.is_cyclic=function(a,b){return(a=a.Za[b])&&10==a.behavior};f.set_behavior=function(a,b,c){ha(a.Za,c,function(a){a.behavior=b})};f.get_behavior=function(a,b){return(a=a.Za[b])&&a.behavior};f.apply_smoothing=function(a,b,c,d){ha(a.Za,d,function(a){a.DC=b||0;a.DB=c||0})};f.remove_slot_animation=function(a,b){if(-1==b)for(var c=0;8>c;c++)a.Za[c]=null;else a.Za[b]=null;a.ka.Gj&&p(a,b)};f.aV=J;f.qH=function(a){if("ARMATURE"==
a.type||a.au||"WORLD"==a.type)return!0;for(var b=0;b<a.Mm.length;b++){var c=a.Mm[b].action.sa.type;if(20==c||10==c||40==c&&"SPEAKER"==a.type||70==c&&"LAMP"==a.type||60==c&&"MESH"==a.type)return!0}return ka.lB(a)&&ka.oH(a)||"MESH"==a.type&&a.Ld.length?!0:!1};f.gE=function(a){if(wa(a))return!0;if(a.fo)for(var b=0;b<a.fo.length;b++){var c=a.fo[b].action.sa.type;if(20==c||60==c&&"MESH"==a.type)return!0}return ka.OM(a)&&ka.NM(a)||"MESH"==a.type&&a.data.b4w_vertex_anim.length?!0:!1};f.is_animated=function(a){return!!a.Za.length};
f.WQ=function(a,b,c,d,h){if(c=c?l._19("uuid",c,Xa):l._19("name",d,Xa)||l._19("name",d+"_B4W_BAKED",Xa))if(R(a,h),-1==Na.indexOf(a)&&Na.push(a),d=c.frame_range,d[0]>d[1])S.warn('Incompatible action "'+c.name+'" has been applied to object "'+a.name+'"');else switch(d=c.sa,d.type){case 10:ta.is_armature(a)&&(d=B(a,b,c),d||(d=pa(c,a.ka.Mg),ba(a,b,c,d)),I(a,h,c,d));break;case 20:(h=d.Oa.tsr)?(d=B(a,b,c),d||(d=ib(a,c,h),ba(a,b,c,d))):S.warn('Incompatible action "'+c.name+'" has been applied to object "'+
a.name+'"')}};f.VO=function(a,b){for(var c=a.ho,d=[],h=0;h<c.length;h+=3)(60!=c[h].sa.type||null!==c[h+1]&&c[h+1].split("%join%")[0]!=b)&&d.push(c[h],c[h+1],c[h+2]);a.ho=d};var ib=function(){var a=c.b();return function(d,h,g){d=h.sa.kB;h=[];for(var k=[],e=[],f=0;f<d;f++){var l=c.f(g,f,a),p=c.j(l,b.create()),t=c.i(l,b.create());l=c.g(l,q.create());h.push(p);k.push(t);e.push(l)}return{trans:h,scale:k,uc:e}}}();f.VM=Aa;f.oP=D;f.cM=function(a){function b(a,b){-1<a.indexOf("location")?a=0:-1<a.indexOf("rotation_quaternion")?
(a=6,b=0==b?NaN:b-1):a=-1<a.indexOf("scale")?3:0;return a+b}function d(a,b,c,d,k){if(-1<c.search(h)){a=b;c=c.split('"')[1];var e=g}else 8==k||9==k?(c="tsr",e=g):1<k?e=new Float32Array(k):e=0;if(!a[c]){k=a;b=c;if("object"==typeof e&&e.length)for(var f=e.length,l=new Float32Array(d*f),p=0;p<d;p++)for(var t=0;t<f;t++)l[p*f+t]=e[t];else if("number"==typeof e)for(l=new Float32Array(d),p=0;p<d;p++)l[p]=e;else La.va("Wrong storage default value");k[b]=l}return a[c]}var h=new RegExp(/pose.bones\[".+"\]/g),
g=c.b(),k=a.sa={type:0,kB:0,xH:0,Oa:null,jz:null,aE:null,Pj:new Int8Array(8)};k.xH=1/Da.Tm;var e=a.fcurves,f={},p={},t=0,m;for(m in e){var u=e[m];Object.keys(u);for(var n in u){var q=u[n],B=q.Xf,r=q.num_channels;t||(t=B.length);q=d(f,p,m,t,r);var v=q.length/t,A=b(m,n|0);if(A==A)if(-1<m.indexOf("scale")&&8===r)for(r=0;r<t;r++)q[r*v+A]=B[r],q[r*v+A+1]=B[r],q[r*v+A+2]=B[r];else for(r=0;r<t;r++)q[r*v+A]=B[r]}if(-1<m.indexOf("rotation_quaternion")&&0 in u)for(q=u[0],B=q.Xf,r=q.num_channels,q=d(f,p,m,t,
r),v=q.length/t,r=0;r<t;r++)0>B[r]&&(q[r*v+6]=-q[r*v+6],q[r*v+7]=-q[r*v+7],q[r*v+8]=-q[r*v+8])}l._8(f)&&(k.Oa=f);l._8(p)&&(k.jz=p);k.kB=t;k.aE=a.SL;"tsr"in f&&oa(e,k.Pj);("color"in f||"energy"in f)&&Y(e,k.Pj);("light_settings.environment_energy"in f||"horizon_color"in f||"zenith_color"in f||"mist_settings.intensity"in f||"mist_settings.depth"in f||"mist_settings.start"in f||"mist_settings.height"in f||"b4w_fog_color"in f)&&Q(e,k.Pj);N(a);Xa.push(a)};f.TP=function(a,b){return(b-a)*Da.Tm+1};f.vM=function(a,
b,c,d,h,g){var k=new Float32Array(2),e=new Float32Array(2),f=new Float32Array(2),l=new Float32Array(2),p=b[1],t=b[2],m=b[a.last_frame_offset+1];a=b[a.last_frame_offset+2];for(var u=0,n=0,q=null;h<=g;h++)if(h<p)for(var r=0;r<Da.Tm;r++)c[u++]=t;else if(h>m)for(r=0;r<Da.Tm;r++)c[u++]=a;else{var B=b[n],v=3;0===B&&(v+=2);0===q&&(v+=2);var A=2===B?0:1;if(b[n+1]==b[n+v+1])q=B,n+=v;else{r=0;h==b[n+1]&&(A&&(d[u]=1),c[u]=b[n+2],u++,r++);if(h==m)for(;r<Da.Tm;r++)c[u++]=a;else for(k[0]=b[n+1],k[1]=b[n+2],0!==
B?(e[0]=0,e[1]=0):0===q?(e[0]=b[n+5],e[1]=b[n+6]):(e[0]=b[n+3],e[1]=b[n+4]),0!==B?(f[0]=0,f[1]=0):(f[0]=b[n+v+3],f[1]=b[n+v+4]),l[0]=b[n+v+1],l[1]=b[n+v+2];r<Da.Tm;r++){var F=h+r/Da.Tm;switch(B){case 0:var y=k,H=e,E=f,P=l,S=[],z=[];S[0]=y[0]-H[0];S[1]=y[1]-H[1];z[0]=P[0]-E[0];z[1]=P[1]-E[1];var C=P[0]-y[0];var I=Math.abs(S[0]);var J=Math.abs(z[0]);0!=I+J&&I+J>C&&(C/=I+J,H[0]=y[0]-C*S[0],H[1]=y[1]-C*S[1],E[0]=P[0]-C*z[0],E[1]=P[1]-C*z[1]);A&&(d[u]=1);c[u]=ia(Ha(0,1,F,k[0],e[0],f[0],l[0]),k[1],e[1],
f[1],l[1]);u++;break;case 1:A&&(d[u]=1);y=k[0];H=k[1];E=(l[1]-H)/(l[0]-y);c[u]=E*F+(H-E*y);u++;break;case 2:A&&(d[u]=1);c[u]=b[n+2];u++;break;default:La.va("Unknown keyframe interpolation mode: "+B)}}h+1==b[n+v+1]&&(q=B,n+=v)}}};f.apply=X;f.sM=function(a,b,c,d){d=d||0;var h=l._19("uuid",c,Xa);if(h){Ma(a,d);if(W(a,b,h,d)){Ea(a,d);return}a.Za[d]=null}S.error('Unsupported object: "'+a.name+'" or animation uuid: "'+c+'"')};f.wJ=function(a,b){var c=l._19("name",b,Xa)||l._19("name",b+"_B4W_BAKED",Xa);if(c){if(0==
c.sa.type)return!1}else if(!(Fa(a,b)||ta.is_mesh(a)&&Ga(a,b)))return!1;return!0};f.get_slot_num_by_anim=function(a,b){a=a.Za;for(var c=0;c<a.length;c++){var d=a[c];if(d&&O(d.Hj)==O(b))return c}return-1};f.SP=function(a,b){return(a=a.Za[b])&&a.Hj?O(a.Hj):null};f.remove=function(a){a.Za.length=0;a=Na.indexOf(a);-1!=a&&Na.splice(a,1)};f.QS=function(a){for(var b=Xa.length-1;0<=b;b--)Xa[b].TL==a&&Xa.splice(b,1)};f.apply_to_first_empty_slot=function(a,b){if(!a.Za.length)return X(a,null,b,0)?0:-1;for(var c=
0;c<a.Za.length;c++)if(!a.Za[c])return X(a,null,b,c)?c:-1};f.set_skel_mix_factor=function(a,b,c,d){a=a.ka;a.jo=(b-a.Zf)/c;a.io=b;a.Fj&&a.Fj();a.Fj=d};f.mix_from_cur_pos=function(a,b,c,d){a=a.ka;a.Mi[1]=b;a.jo=1/c;a.io=1;a.Fj&&a.Fj();a.Fj=d;a.bm=null;a.Ll=null;a.ni=!0};f.set_speed=function(a,b,c){ha(a.Za,c,function(a){a.speed=b})};f.get_speed=function(a,b){return a.Za[b].speed};f.get_anim_start_frame=function(a,b){return a.Za[b].start};f.get_anim_length=function(a,b){return a.Za[b].length};f.cleanup=
function(){Na.length=0;Xa.length=0};f.rP=function(a){var b=(a[0]||a[1]||a[2]).Xf.length,c=ab,d=ya,h=!!a[0];h||(a[0]={Xf:new Float32Array(b),num_channels:8});var g=!!a[1];g||(a[1]={Xf:new Float32Array(b),num_channels:8});var k=!!a[2];k||(a[2]={Xf:new Float32Array(b),num_channels:8});a[3]={Xf:new Float32Array(b),num_channels:8};for(var e=0;e<b;e++)d[0]=h?a[0].Xf[e]:0,d[1]=g?a[1].Xf[e]:0,d[2]=k?a[2].Xf[e]:0,l.Y(d,c),a[0].Xf[e]=c[3],a[1].Xf[e]=c[0],a[2].Xf[e]=c[1],a[3].Xf[e]=c[2]};f.QF=wa;f.bU=function(a,
b){for(var c=7,d=0,h=0;h<Xa.length;h++){var g=Xa[h];if(g.name==b){d=g.sa.type;break}}0==d&&(Ga(a,b)?d=30:(h=Fa(a,b))&&"EMITTER"==h.Mw&&(d=50));for(h=0;8>h;h++)if(b=a.Za[h]){if(b.type==d)return h}else h<c&&(c=h);return c}});w.a=f},function(D,w,f){D=f(0);var M=f(35),U=f(15),n=f(4),z=f(21),e=f(1),m=f(6),C=f(8),v=f(2),q=f(3),r=f(7);f=Object(D.a)("__input",function(f,a){function y(a){var b=N.detect_mobile();return(20!=a||navigator.getVRDevices||navigator.getVRDisplays||b&&D())&&(10!=a||b&&window.DeviceOrientationEvent)?
!0:!1}function k(a,b){if(!y(a))return null;var c={type:a,eh:!1,Mh:[],si:[],lk:[],Le:[],mk:[],nk:[],Xr:[],FG:[],fk:[],Kk:[],Ik:[],Hk:[],element:b,pj:!0,Oc:[],zw:new Float32Array(2),cS:0,distortion_coefs:new Float32Array(2),chromatic_aberration_coefs:new Float32Array(4),Hs:null,Vn:null,zj:null,ce:null,orientation:C.create(),position:q.create(),ii:window.VRFrameData?new VRFrameData:null,gC:m.b(),Zj:new Float32Array(4),$j:new Float32Array(4),ki:0,Ki:0,Ns:0,mm:0,aj:0,Li:0,Wm:[],ll:[0,0,0,0,0,0,0,0,0,0,
0,0],FF:[0,0,0,0,0,0,0,0,0,0,0,0],mv:[]};c.Zj[0]=c.Zj[1]=c.Zj[2]=c.Zj[3]=Math.PI/4;c.$j[0]=c.$j[1]=c.$j[2]=c.$j[3]=Math.PI/4;30==a||40==a||50==a?(c.eh=!!b,50==a?document.addEventListener("touchstart",function(){}):40==a&&(c.pj=!1)):10==a?c.eh=!0:20==a&&l(c);return c}function c(b,c){10==b||20==b?c=window:c||(40==b?c=document:c=oa.get_container());for(var d=0;d<qa.length;d++)if(qa[d].type==b&&qa[d].element==c)return qa[d];c=k(b,c);60!=b&&70!=b&&80!=b&&90!=b||c.mv.push(a.GMPD_BUTTON_0,a.GMPD_BUTTON_1,
a.GMPD_BUTTON_2,a.GMPD_BUTTON_3,a.GMPD_BUTTON_4,a.GMPD_BUTTON_5,a.GMPD_BUTTON_6,a.GMPD_BUTTON_7,a.GMPD_BUTTON_8,a.GMPD_BUTTON_9,a.GMPD_BUTTON_10,a.GMPD_BUTTON_11,a.GMPD_BUTTON_12,a.GMPD_BUTTON_13,a.GMPD_BUTTON_14,a.GMPD_BUTTON_15,a.GMPD_BUTTON_16,a.GMPD_BUTTON_17,a.GMPD_BUTTON_18,a.GMPD_BUTTON_19,a.GMPD_BUTTON_20,a.GMPD_BUTTON_21,a.GMPD_BUTTON_22,a.GMPD_BUTTON_23,a.GMPD_BUTTON_24,a.GMPD_BUTTON_25,a.GMPD_AXIS_0,a.GMPD_AXIS_1,a.GMPD_AXIS_2,a.GMPD_AXIS_3,a.GMPD_AXIS_4,a.GMPD_AXIS_5,a.GMPD_AXIS_6,a.GMPD_AXIS_7,
a.GMPD_AXIS_8,a.GMPD_AXIS_9,a.GMPD_AXIS_10,a.GMPD_AXIS_11);c&&qa.push(c);return c}function l(a){20==a.type&&(navigator.getVRDisplays?navigator.getVRDisplays().then(function(b){0<b.length&&(a.ce=b[0],a.eh=!0,a.ce.getFrameData(a.ii),a.Hs&&a.Hs())},function(){Q.Ma("WebVR displays are not found.");a.eh=!1}):navigator.getVRDevices?(navigator.getVRDevices().then(function(b){w(a,b);b.length&&(a.eh=!0);a.Hs&&a.Hs()},function(){Q.Ma("WebVR devices are not found.");a.eh=!1}),g(a,ia.webvr)):(b(a),a.eh=!0))}
function b(a){var b=ia.nonwebvr;a.mm=b.mm;a.aj=b.aj;a.Li=b.Li;g(a,b);a.ki=b.ki;a.Ki=b.Ki;a.Ns=b.Ns;E(a)}function g(a,b){a.distortion_coefs[0]=b.distortion_coefs[0];a.distortion_coefs[1]=b.distortion_coefs[1];a.chromatic_aberration_coefs[0]=b.chromatic_aberration_coefs[0];a.chromatic_aberration_coefs[1]=b.chromatic_aberration_coefs[1];a.chromatic_aberration_coefs[2]=b.chromatic_aberration_coefs[2];a.chromatic_aberration_coefs[3]=b.chromatic_aberration_coefs[3]}function E(a){var b=Math.atan(a.ki/2/
a.Ns*ia.nonwebvr.sF);b&&(a.Zj[0]=a.$j[0]=Math.min(b,Math.PI/3));b&&(a.Zj[1]=a.$j[3]=Math.min(b,Math.PI/3));b&&(a.Zj[2]=a.$j[2]=Math.min(b,Math.PI/3));b&&(a.Zj[3]=a.$j[1]=Math.min(b,Math.PI/3))}function w(a,b){var c=b.filter(function(a){return a instanceof HMDVRDevice}),d=null;c.length&&(d=c[0]);c=null;d&&(c=b.filter(function(a){return-1!==a.deviceName.toLowerCase().indexOf("oculus")&&a.hardwareUnitId==d.hardwareUnitId&&a instanceof PositionSensorVRDevice}));a.Vn=d;a.zj=c}function u(a,b,c){switch(a.type){case 20:var d=
R(a,0);if(d&1){var g="left"==b?a.Zj:a.$j;r.copy(g,c)}else if(g=a.ce||a.Vn)g=g.getEyeParameters(b),(g=g.fieldOfView||g.currentFieldOfView)?(c[0]=v.T(g.upDegrees),c[1]=v.T(g.rightDegrees),c[2]=v.T(g.downDegrees),c[3]=v.T(g.leftDegrees)):d&16&&(d=X,"left"==b?z.copy(a.ii.leftProjectionMatrix,d):z.copy(a.ii.rightProjectionMatrix,d),(a=z.invert(d,d))||(a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),q.transformMat4([1,1,-1],a,wa),c[0]=Math.atan(-wa[1]/wa[2]),c[1]=Math.atan(-wa[0]/wa[2]),q.transformMat4([-1,-1,-1],
a,wa),c[2]=Math.atan(wa[1]/wa[2]),c[3]=Math.atan(wa[0]/wa[2]));break;default:Q.error("fov is undefined for device: ",a.type)}return c}function F(a,b,c){switch(a.type){case 20:a.ce&&("left"==b?z.copy(a.ii.leftProjectionMatrix,c):"right"==b?z.copy(a.ii.rightProjectionMatrix,c):Q.error("Unknown type of eye: ",b));break;default:Q.error("Projection matrix is undefined for device: ",a.type)}return c}function R(a,b){switch(b){case 0:return b=0,navigator.getVRDisplays&&(b|=8,a.ii&&(b|=16)),navigator.getVRDevices&&
(b=Ha.is_mobile_device?b|4:b|2),b||1;case 23:var c=a.ce||a.Vn;return c?(b=c.getEyeParameters("left"),c=c.getEyeParameters("right"),a.ce?c.offset[0]-b.offset[0]:c.eyeTranslation.x-b.eyeTranslation.x):a.ki}}function O(a,b){if(a){for(var d=0;d<a.buttons.length;d++)b.Wm[d]=a.buttons[d].value||+a.buttons[d].pressed;if(a.axes)for(d=0;d<a.axes.length;d++)b.ll[d]=a.axes[d];if(a=a.pose)d=c(20).gC,a.position&&m.D(a.position,d,b.position),a.orientation&&m.A(a.orientation,d,b.orientation)}}function K(a){for(var b=
0;b<a.Wm;b++)a.Wm[b]=0;for(b=0;b<a.ll.length;b++)a.FF[b]=a.ll[b],a.ll[b]=0;a.position.set(v.m);a.orientation.set(v.k)}function A(a,b){b=a.indexOf(b);0<=b&&(a[b]=null)}function ca(a){return null===a}function L(a,b,c,g){switch(b){case 130:c&&A(a.Mh,c);if(g||a.si.every(ca)&&a.Mh.every(ca))a.Mh.length=0,a.si.length=0,b=a.Oc.indexOf(141),0<=b&&(a.Oc.splice(b,1),a.element.removeEventListener("deviceorientation",J,!1));break;case 140:c&&A(a.si,c);if(g||a.si.every(ca)&&a.Mh.every(ca))a.Mh.length=0,a.si.length=
0,b=a.Oc.indexOf(141),0<=b&&(a.Oc.splice(b,1),a.element.removeEventListener("deviceorientation",J,!1));break;case 50:c&&A(a.lk,c);if(g||a.lk.every(ca))a.lk.length=0,b=a.Oc.indexOf(b),0<=b&&(a.Oc.splice(b,1),a.element.removeEventListener("mousedown",I,!1));break;case 40:c&&A(a.Le,c);if(g||a.Le.every(ca))a.Le.length=0,b=a.Oc.indexOf(b),0<=b&&(a.Oc.splice(b,1),a.element.removeEventListener("mousemove",B,!1));break;case 41:c&&A(a.Le,c);if(g||a.Le.every(ca))a.Le.length=0,b=a.Oc.indexOf(b),0<=b&&(a.Oc.splice(b,
1),a.element.removeEventListener("mousemove",ba,!1));break;case 60:c&&A(a.mk,c);if(g||a.mk.every(ca))a.mk.length=0,b=a.Oc.indexOf(b),0<=b&&(a.Oc.splice(b,1),a.element.removeEventListener("mouseout",P,!1),a.element.removeEventListener("mouseup",p,!1));break;case 70:c&&A(a.nk,c);if(g||a.nk.every(ca))a.nk.length=0,b=a.Oc.indexOf(b),0<=b&&(a.Oc.splice(b,1),a.element.removeEventListener("wheel",da,!1));break;case 90:c&&A(a.Xr,c);if(g||a.Xr.every(ca))a.Xr.length=0,b=a.Oc.indexOf(b),0<=b&&(a.Oc.splice(b,
1),a.element.removeEventListener("keydown",H,!1));break;case 80:c&&A(a.fk,c);if(g||a.fk.every(ca))a.fk.length=0,b=a.Oc.indexOf(b),0<=b&&(a.Oc.splice(b,1),a.element.removeEventListener("keyup",t,!1));break;case 100:c&&A(a.Kk,c);if(g||a.Kk.every(ca))a.Kk.length=0,b=a.Oc.indexOf(b),0<=b&&(a.Oc.splice(b,1),a.element.removeEventListener("touchstart",d,!1));break;case 110:c&&A(a.Ik,c);if(g||a.Ik.every(ca))a.Ik.length=0,b=a.Oc.indexOf(b),0<=b&&(a.Oc.splice(b,1),a.element.removeEventListener("touchmove",
la,!1));break;case 120:if(c&&A(a.Hk,c),g||a.Hk.every(ca))a.Hk.length=0,b=a.Oc.indexOf(b),0<=b&&(a.Oc.splice(b,1),a.element.removeEventListener("touchend",na,!1))}}function ha(a,b){v._27(a,v.w,b);if("orientation"in window)var c=v.T(window.orientation);else"orientation"in window.screen?c=v.T(window.screen.orientation.angle):c=0;a=C.setAxisAngle(v.c,c,Fa);C.multiply(b,a,b);return b}function J(a){var b=wa;null===a.alpha||null===a.beta||null===a.gamma?b[0]=b[1]=b[2]=0:(b[0]=v.T(a.alpha),b[1]=v.T(a.beta),
b[2]=v.T(a.gamma));a=c(10,a.currentTarget);for(var d=0;d<a.si.length;d++){var g=a.si[d];g&&(q.copy(b,ja),g(ja))}if(a.Mh.length)for(b=ha(b,Ga),d=0;d<a.Mh.length;d++)if(g=a.Mh[d])C.copy(b,ta),g(ta);for(d=0;d<a.Mh.length;d++)a.Mh[d]||a.Mh.splice(d,1);for(d=0;d<a.si.length;d++)a.si[d]||a.si.splice(d,1)}function W(a,b){switch(a.type){case 30:a.zw[0]=b.clientX,a.zw[1]=b.clientY,a.cS=b.which}}function B(a){if(!ka||!(a.sourceCapabilities&&a.sourceCapabilities.firesTouchEvents||5==a.mozInputSource)){var b=
c(30,a.currentTarget);W(b,a);for(var d=0;d<b.Le.length;d++){var g=b.Le[d];g&&(La[0]=a.clientX,La[1]=a.clientY,g(La))}b.pj&&a.preventDefault();for(d=0;d<b.Le.length;d++)b.Le[d]||b.Le.splice(d,1)}}function ba(a){if(!ka||!(a.sourceCapabilities&&a.sourceCapabilities.firesTouchEvents||5==a.mozInputSource)){var b=c(30,a.currentTarget);W(b,a);for(var d=0;d<b.Le.length;d++){var g=b.Le[d];if(g){if("number"==typeof a.movementX)var k=a.movementX,e=a.movementY;else"number"==typeof a.webkitMovementX?(k=a.webkitMovementX,
e=a.webkitMovementY):"number"==typeof a.mozMovementX?(k=a.mozMovementX,e=a.mozMovementY):e=k=0;La[0]=k;La[1]=e;g(La)}}b.pj&&a.preventDefault();for(d=0;d<b.Le.length;d++)b.Le[d]||b.Le.splice(d,1)}}function I(a){if(!ka||!(a.sourceCapabilities&&a.sourceCapabilities.firesTouchEvents||5==a.mozInputSource)){var b=c(30,a.currentTarget);W(b,a);for(var d=0;d<b.lk.length;d++){var g=b.lk[d];g&&g(a.which)}b.pj&&(window.frameElement&&window.frameElement.focus(),a.preventDefault());for(d=0;d<b.lk.length;d++)b.lk[d]||
b.lk.splice(d,1)}}function P(a){!oa.tG(a.relatedTarget)&&a.which&&p(a)}function p(a){if(!ka||!(a.sourceCapabilities&&a.sourceCapabilities.firesTouchEvents||5==a.mozInputSource)){var b=c(30,a.currentTarget);W(b,a);for(var d=0;d<b.mk.length;d++){var g=b.mk[d];g&&g(a.which)}b.pj&&a.preventDefault();for(d=0;d<b.mk.length;d++)b.mk[d]||b.mk.splice(d,1)}}function da(a){for(var b=c(30,a.currentTarget),d=0;d<b.nk.length;d++){var g=b.nk[d];if(g){var k=a;var e=0;k.wheelDelta?0==k.wheelDelta%120?e=k.wheelDelta/
120:e=v._50(k.wheelDelta):k.deltaY&&(e=0==k.deltaY%3?-k.deltaY/3:-v._50(k.deltaY));k=v.M(100*e,-2E3,2E3);g(k)}}b.pj&&a.preventDefault();for(d=0;d<b.nk.length;d++)b.nk[d]||b.nk.splice(d,1)}function H(a){for(var b=c(40,a.currentTarget),d=a.ctrlKey||a.altKey||a.metaKey?b.FG:b.Xr,g=0;g<d.length;g++){var k=d[g];k?k(a.keyCode):d.splice(g--,1)}b.pj&&a.preventDefault()}function t(a){for(var b=c(40,a.currentTarget),d=0;d<b.fk.length;d++){var g=b.fk[d];g&&g(a.keyCode)}b.pj&&a.preventDefault();for(d=0;d<b.fk.length;d++)b.fk[d]||
b.fk.splice(d,1)}function d(a){for(var b=c(50,a.currentTarget),d=0;d<b.Kk.length;d++){var g=b.Kk[d];g&&g(a.targetTouches)}for(d=0;d<b.Kk.length;d++)b.Kk[d]||b.Kk.splice(d,1)}function la(a){for(var b=c(50,a.currentTarget),d=0;d<b.Ik.length;d++){var g=b.Ik[d];g&&g(a.targetTouches)}b.pj&&a.preventDefault();for(d=0;d<b.Ik.length;d++)b.Ik[d]||b.Ik.splice(d,1)}function na(a){for(var b=c(50,a.currentTarget),d=0;d<b.Hk.length;d++){var g=b.Hk[d];g&&g(a.targetTouches)}for(d=0;d<b.Hk.length;d++)b.Hk[d]||b.Hk.splice(d,
1)}function pa(a){switch(a){case 0:a=60;break;case 1:a=70;break;case 2:a=80;break;case 3:a=90;break;default:a=60}return a}function Aa(a){function b(){document.pointerLockElement===c||document.webkitPointerLockElement===c||document.mozPointerLockElement===c?a.value=1:(a.value=0,document.removeEventListener("pointerlockchange",b,!1),document.removeEventListener("webkitpointerlockchange",b,!1),document.removeEventListener("mozpointerlockchange",b,!1))}var c=a.element;document.addEventListener("pointerlockchange",
b,!1);document.addEventListener("webkitpointerlockchange",b,!1);document.addEventListener("mozpointerlockchange",b,!1);var d=c.requestPointerLock||c.webkitRequestPointerLock||c.mozRequestPointerLock;"function"===typeof d&&d.apply(c)}function D(){return window.document.fullscreenEnabled||window.document.mozFullScreenEnabled||window.document.msFullscreenEnabled||window.document.webkitFullscreenEnabled?!0:!1}var N=Object(M.a)(f),oa=Object(U.a)(f),Y=Object(n.a)(f),Q=Object(e.a)(f),Ha=Y.wa,ia=Y.iG,Ma=
m.b(),Ea=m.b(),X=z.create();a.DEVICE_GYRO=10;a.DEVICE_HMD=20;a.DEVICE_MOUSE=30;a.DEVICE_KEYBOARD=40;a.DEVICE_TOUCH=50;a.Gt=60;a.Ky=70;a.Ly=80;a.My=90;a.HMD_WEBVR_DESKTOP=2;a.HMD_WEBVR_MOBILE=4;a.HMD_NON_WEBVR=1;a.HMD_WEBVR1=8;a.HMD_WEBVR1_1=16;a.HMD_WEBVR_TYPE=0;a.HMD_ORIENTATION_QUAT=10;a.HMD_POSITION=20;a.aD=21;a.bD=22;a.HMD_EYE_DISTANCE=23;a.HMD_DISTORTION=24;a.HMD_BASELINE_DIST=25;a.HMD_SCREEN_LENS_DIST=26;a.HMD_SCREEN_WIDTH=27;a.HMD_SCREEN_HEIGHT=28;a.HMD_BEVEL_SIZE=29;a.fW=30;a.gW=31;a.MOUSE_LOCATION=
40;a.iD=41;a.MOUSE_DOWN_WHICH=50;a.MOUSE_UP_WHICH=60;a.MOUSE_WHEEL=70;a.KEYBOARD_UP=80;a.KEYBOARD_DOWN=90;a.hD=91;a.TOUCH_START=100;a.TOUCH_MOVE=110;a.TOUCH_END=120;a.GYRO_ORIENTATION_QUAT=130;a.GYRO_ORIENTATION_ANGLES=140;a.GMPD_BUTTON_0=300;a.GMPD_BUTTON_1=301;a.GMPD_BUTTON_2=302;a.GMPD_BUTTON_3=303;a.GMPD_BUTTON_4=304;a.GMPD_BUTTON_5=305;a.GMPD_BUTTON_6=306;a.GMPD_BUTTON_7=307;a.GMPD_BUTTON_8=308;a.GMPD_BUTTON_9=309;a.GMPD_BUTTON_10=310;a.GMPD_BUTTON_11=311;a.GMPD_BUTTON_12=312;a.GMPD_BUTTON_13=
313;a.GMPD_BUTTON_14=314;a.GMPD_BUTTON_15=315;a.GMPD_BUTTON_16=316;a.GMPD_BUTTON_17=317;a.GMPD_BUTTON_18=318;a.GMPD_BUTTON_19=319;a.GMPD_BUTTON_20=320;a.GMPD_BUTTON_21=321;a.GMPD_BUTTON_22=322;a.GMPD_BUTTON_23=323;a.GMPD_BUTTON_24=324;a.GMPD_BUTTON_25=325;a.GMPD_TRACKPAD_BUTTON=300;a.GMPD_TRIGGER_BUTTON=301;a.GMPD_GRIPS_BUTTON=302;a.GMPD_MENU_BUTTON=303;a.GMPD_AXIS_0=326;a.GMPD_AXIS_1=327;a.GMPD_AXIS_2=328;a.GMPD_AXIS_3=329;a.GMPD_AXIS_4=330;a.GMPD_AXIS_5=331;a.GMPD_AXIS_6=332;a.GMPD_AXIS_7=333;a.GMPD_AXIS_8=
334;a.GMPD_AXIS_9=335;a.GMPD_AXIS_10=336;a.GMPD_AXIS_11=337;var Ga=C.create(),Fa=C.create(),wa=q.create(),La=new Float32Array(2),ja=q.create(),ta=C.create(),ka="ontouchstart"in document.documentElement,qa=[];a.can_use_device=y;a.init=function(){if("HMD"==Ha.stereo||"NONE"==Ha.stereo&&Ha.is_mobile_device){var a=c(20);a&&document.addEventListener("onvrdisplayconnect",function(b){a.ce=b.display;a.eh=!0;a.ce.getFrameData(a.ii)})}};a.get_device_by_type_element=c;a.$S=l;a.switch_prevent_default=function(a,
b){a.pj=b};a.reset_device=function(a){switch(a.type){case 20:if(a.eh)if(a.ce)a.ce.resetPose();else if(a.zj)for(var b=0;b<a.zj.length;b++)a.zj[b].resetSensor();break;default:Q.error("reset_device() is undefined for device: ",a.type)}};a.get_vector_param=function(a,b,c){switch(b){case 10:a:switch(a.type){case 20:q.copy(v.k,c);if(a.ce)c[0]=a.orientation[0],c[1]=a.orientation[1],c[2]=a.orientation[2],c[3]=a.orientation[3];else if(a.zj)for(b=0;b<a.zj.length;b++){var d=a.zj[b];d=d.getState&&d.getState()||
d.getImmediateState&&d.getImmediateState();d.orientation&&(c[0]=d.orientation.x,c[1]=d.orientation.y,c[2]=d.orientation.z,c[3]=d.orientation.w)}a=c;break a;default:Q.error("orientation_quat is undefined for device: ",a.type),a=c}return a;case 20:a:switch(a.type){case 20:q.copy(v.n,c);if(a.ce)c[0]=a.position[0],c[1]=a.position[1],c[2]=a.position[2];else if(a.zj)for(b=0;b<a.zj.length;b++)d=a.zj[b],d=d.getState&&d.getState()||d.getImmediateState&&d.getImmediateState(),d.position&&(c[0]=d.position.x,
c[1]=-d.position.z,c[2]=d.position.y);a=c;break a;default:Q.error("position is undefined for device: ",a.type),a=c}return a;case 21:return u(a,"left",c);case 22:return u(a,"right",c);case 30:return F(a,"left",c);case 31:return F(a,"right",c);case 40:case 41:return c[0]=a.zw[0],c[1]=a.zw[1],c}};a.get_value_param=R;a.set_config=function(a,b,c){switch(a.type){case 20:if(R(a,0)&8)break;switch(b){case 24:a.distortion_coefs[0]=c[0];a.distortion_coefs[1]=c[1];break;case 23:a.ki=c;E(a);break;case 25:a.Ki=
c;E(a);break;case 26:a.Ns=c;E(a);break;case 27:a.mm=c;E(a);break;case 28:a.aj=c;E(a);break;case 29:a.Li=c,E(a)}break;case 60:case 70:case 80:case 90:a.mv[b]=c}};a.qQ=function(a,b){b-=300;return b<a.Wm.length?a.Wm[a.mv[b]-300]:!1};a.pQ=function(a,b){return b-326<a.ll.length?a.ll[a.mv[b-300]-326]:0};a.get_gamepad_position=function(a,b){b.set(a.position);return b};a.get_gamepad_orientation=function(a,b){b.set(a.orientation);return b};a.update=function(){for(var a=navigator.getGamepads?navigator.getGamepads():
navigator.webkitGetGamepads?navigator.webkitGetGamepads:[],b=0;b<qa.length;b++){var c=qa[b];switch(c.type){case 60:K(c);O(a[0],c);break;case 70:K(c);O(a[1],c);break;case 80:K(c);O(a[2],c);break;case 90:K(c);O(a[3],c);break;case 20:if(c.ce){var d=c.ce;if(c.ii&&d.getFrameData(c.ii)){var g=c.ii.pose,k=v._26(c.ii.leftViewMatrix,wa);c.ki=2*q.length(k)}else d.getPose&&(g=d.getPose());g&&(k=C.setAxisAngle(v.d,Math.PI/2,Ga),d.stageParameters&&d.stageParameters.sittingToStandingTransform?(d=m.d(d.stageParameters.sittingToStandingTransform,
Ma),m.m(Ea),k=m.r(k,Ea),d=m.q(k,d,c.gC)):(m.m(Ma),d=m.r(k,c.gC)),g.orientation&&m.A(g.orientation,d,c.orientation),g.position&&m.D(g.position,d,c.position))}}}};a.attach_param_cb=function(a,b,c){switch(b){case 130:a.Mh.push(c);b=141;break;case 140:a.si.push(c);b=141;break;case 50:a.lk.push(c);break;case 40:case 41:a.Le.push(c);break;case 60:a.mk.push(c);break;case 70:a.nk.push(c);break;case 90:a.Xr.push(c);break;case 91:a.FG.push(c);b=90;break;case 80:a.fk.push(c);break;case 100:a.Kk.push(c);break;
case 110:a.Ik.push(c);break;case 120:a.Hk.push(c)}if(-1==a.Oc.indexOf(b)&&(a.Oc.push(b),a.eh))switch(b){case 50:/iPad|iPhone|iPod/.test(navigator.platform)||a.element.addEventListener("mousedown",I,!1);break;case 40:a.element.addEventListener("mousemove",B,!1);break;case 41:a.element.addEventListener("mousemove",ba,!1);break;case 60:/iPad|iPhone|iPod/.test(navigator.platform)||(a.element!=window&&a.element.addEventListener("mouseout",P,!1),a.element.addEventListener("mouseup",p,!1));break;case 70:a.element.addEventListener("wheel",
da,!1);break;case 90:a.element.addEventListener("keydown",H,!1);break;case 80:a.element.addEventListener("keyup",t,!1);break;case 100:a.element.addEventListener("touchstart",d,!1);break;case 110:a.element.addEventListener("touchmove",la,!1);break;case 120:a.element.addEventListener("touchend",na,!1);break;case 141:a.element.addEventListener("deviceorientation",J,!1)}};a.detach_param_cb=function(a,b,c){L(a,b,c,!1)};a.JQ=ha;a.cleanup=function(){for(var a=0;a<qa.length;a++)for(var b=qa[a],c=0;c<b.Oc.length;c++)L(b,
b.Oc[c],null,!0);qa.length=0};a.get_pressed_gmpd_btn=function(a){a=c(pa(a));for(var b=0;b<a.Wm.length;b++)if(a.Wm[b])return b+300;return-1};a.get_moved_gmpd_axis=function(a){a=c(pa(a));for(var b=0;b<a.ll.length;b++)if(a.FF[b]-a.ll[b])return b+326;return-1};a.rv=function(){for(var a=navigator.getGamepads?navigator.getGamepads():navigator.webkitGetGamepads?navigator.webkitGetGamepads:[],b=0;b<a.length;b++)if(a[b])return b;return 0};a.GQ=function(){var a=c(20);return a&&a.ce};a.WL=function(a){a.element.addEventListener("mousedown",
function(){a.value||Aa(a)},!1)};a.add_click_listener=function(a,b){Ha.is_mobile_device?a.addEventListener("touchend",b):a.addEventListener("mouseup",b)};a.remove_click_listener=function(a,b){Ha.is_mobile_device?a.removeEventListener("touchend",b):a.removeEventListener("mouseup",b)};a.check_fullscreen=D});w.a=f},function(D,w,f){D=f(0);var M=f(15),U=f(1);f=Object(D.a)("container",function(f,z){var e=Object(M.a)(f),m=Object(U.a)(f);z.get_canvas=e.get_canvas;z.get_canvas_hud=e.get_canvas_hud;z.get_container=
e.get_container;z.insert_to_container=function(f,n){2!=arguments.length?m.error("insert_to_container(): two arguments required"):f&&n&&e.insert_to_container(f,n)};z.set_canvas_offsets=function(f,n){m.Ma("container.set_canvas_offsets() deprecated. Not needed anymore. Use the container.client_to_canvas_coords method.");return e.set_canvas_offsets(f,n)};z.update_canvas_offsets=function(){m.Ma("container.update_canvas_offsets() deprecated. Not needed anymore. Use the container.client_to_canvas_coords method.");
e.update_canvas_offsets()};z.client_to_canvas_coords=function(f,m,n){n||(n=new Float32Array(2));return e.client_to_canvas_coords(f,m,n)};z.client_to_element_coords=function(f,m,n,r){r||(r=new Float32Array(2));return e.client_to_element_coords(f,m,n,r)};z.get_coords_target_space=function(f,m,n){n||(n=new Float32Array(2));return e.get_coords_target_space(f,m,n)};z.force_offsets_updating=function(){m.Ma("container.force_offsets_updating() deprecated. Not needed anymore. Use the container.client_to_canvas_coords method.");
e.force_offsets_updating()};z.resize=function(f,m,n){e.resize(f,m,n)};z.resize_to_container=function(f){e.resize_to_container(f||!1)}});w.a=f},function(D,w,f){D=f(0);var M=f(25),U=f(9),n=f(19),z=f(1),e=f(8),m=f(13),C=f(6),v=f(2),q=f(3);f=Object(D.a)("transform",function(f,y){var a=Object(U.a)(f),r=Object(n.a)(f),k=Object(z.a)(f),c=Object(m.a)(f),l=C.b(),b=q.create(),g=q.create(),E=new Float32Array(4),w=e.create();y.set_translation=function(g,e,f,l){a.is_dynamic(g)?(b[0]=e,b[1]=f,b[2]=l,c.set_translation(g,
b),c.Ea(g),r.sync_transform(g)):k.error('Wrong object: "'+g.name+'" is not dynamic.')};y.set_translation_rel=function(g,e,f,l){a.is_dynamic(g)?(b[0]=e,b[1]=f,b[2]=l,c.set_translation_rel(g,b),c.Ea(g),r.sync_transform(g)):k.error('Wrong object: "'+g.name+'" is not dynamic.')};y.set_translation_v=function(b,g){a.is_dynamic(b)?(c.set_translation(b,g),c.Ea(b),r.sync_transform(b)):k.error('Wrong object: "'+b.name+'" is not dynamic.')};y.set_translation_rel_v=function(b,g){a.is_dynamic(b)?(c.set_translation_rel(b,
g),c.Ea(b),r.sync_transform(b)):k.error('Wrong object: "'+b.name+'" is not dynamic.')};y.set_translation_obj_rel=function(e,f,l,m,n){a.is_dynamic(e)?(b[0]=f,b[1]=l,b[2]=m,f=C.j(n.ka.na,g),n=C.g(n.ka.na,w),v._63(b,1,n,f,b),c.set_translation(e,b),c.Ea(e),r.sync_transform(e)):k.error('Wrong object: "'+e.name+'" is not dynamic.')};y.get_translation=function(a,b){b||(b=new Float32Array(3));c.get_translation(a,b);return b};y.get_translation_rel=function(a,b){b||(b=new Float32Array(3));c.get_translation_rel(a,
b);return b};y.set_rotation=function(b,g,e,f,l){a.is_dynamic(b)?(E[0]=g,E[1]=e,E[2]=f,E[3]=l,c.set_rotation(b,E),c.Ea(b),r.sync_transform(b)):k.error('Wrong object: "'+b.name+'" is not dynamic.')};y.set_rotation_rel=function(b,g,e,f,l){a.is_dynamic(b)?(E[0]=g,E[1]=e,E[2]=f,E[3]=l,c.set_rotation_rel(b,E),c.Ea(b),r.sync_transform(b)):k.error('Wrong object: "'+b.name+'" is not dynamic.')};y.set_rotation_v=function(b,g){a.is_dynamic(b)?(c.set_rotation(b,g),c.Ea(b),r.sync_transform(b)):k.error('Wrong object: "'+
b.name+'" is not dynamic.')};y.set_rotation_rel_v=function(b,g){a.is_dynamic(b)?(c.set_rotation_rel(b,g),c.Ea(b),r.sync_transform(b)):k.error('Wrong object: "'+b.name+'" is not dynamic.')};y.get_rotation_rel_v=function(b,g){if(a.is_dynamic(b))return c.get_rotation_rel(b,g),g;k.error('Wrong object: "'+b.name+'" is not dynamic.')};y.get_rotation=function(a,b){b||(b=new Float32Array(4));c.get_rotation(a,b);return b};y.get_rotation_rel=function(a,b){b||(b=new Float32Array(4));c.get_rotation_rel(a,b);
return b};y.set_rotation_euler=function(g,e,f,l){a.is_dynamic(g)?(b[0]=e,b[1]=f,b[2]=l,c.set_rotation_euler(g,b),c.Ea(g),r.sync_transform(g)):k.error('Wrong object: "'+g.name+'" is not dynamic.')};y.get_rotation_euler=function(a,b){b||(b=new Float32Array(3));c.get_rotation_euler(a,b);return b};y.get_rotation_euler_rel=function(a,b){b||(b=new Float32Array(3));c.get_rotation_euler_rel(a,b);return b};y.set_rotation_euler_rel=function(g,e,f,l){a.is_dynamic(g)?(b[0]=e,b[1]=f,b[2]=l,c.set_rotation_euler_rel(g,
b),c.Ea(g),r.sync_transform(g)):k.error('Wrong object: "'+g.name+'" is not dynamic.')};y.set_rotation_euler_v=function(b,g){a.is_dynamic(b)?(c.set_rotation_euler(b,g),c.Ea(b),r.sync_transform(b)):k.error('Wrong object: "'+b.name+'" is not dynamic.')};y.set_rotation_euler_rel_v=function(b,g){a.is_dynamic(b)?(c.set_rotation_euler_rel(b,g),c.Ea(b),r.sync_transform(b)):k.error('Wrong object: "'+b.name+'" is not dynamic.')};y.set_scale=function(b,g){a.is_dynamic(b)?(c.set_scale(b,g),c.Ea(b)):k.error('Wrong object: "'+
b.name+'" is not dynamic.')};y.set_scale_rel=function(b,g){a.is_dynamic(b)?(c.set_scale_rel(b,g),c.Ea(b)):k.error('Wrong object: "'+b.name+'" is not dynamic.')};y.get_scale=function(a,b){return c.get_scale(a,b)};y.get_scale_rel=function(a,b){return c.get_scale_rel(a,b)};y.empty_reset_transform=function(b){if("EMPTY"!=b.type)k.error("Wrong object: "+b.name);else{for(var g=0;g<b.bf.length;g++)if(!a.is_dynamic(b.bf[g])){k.error('Wrong object: "'+b.bf[g].name+'" is not dynamic.');return}c.set_translation(b,
[0,0,0]);c.set_rotation(b,[0,0,0,1]);c.set_scale(b,1);c.Ea(b);r.sync_transform(b)}};y.get_object_size=function(b){return a.is_mesh(b)?c.get_object_size(b):(k.error("Wrong object: "+b.name),0)};y.get_object_center=function(b,g,e){if(!a.is_mesh(b))return k.error("Wrong object: "+b.name),null;e||(e=new Float32Array(3));return c.get_object_center(b,g,e)};y.move_local=function(b,g,e,f){a.is_dynamic(b)?(c.move_local(b,g,e,f),c.Ea(b),r.sync_transform(b)):k.error('Wrong object: "'+b.name+'" is not dynamic.')};
y.rotate_x_local=function(b,g){a.is_dynamic(b)?(g=e.setAxisAngle(v.d,g,E),c.NB(b,g),c.Ea(b),r.sync_transform(b)):k.error('Wrong object: "'+b.name+'" is not dynamic.')};y.rotate_y_local=function(b,g){a.is_dynamic(b)?(g=e.setAxisAngle(v.b,g,E),c.NB(b,g),c.Ea(b),r.sync_transform(b)):k.error('Wrong object: "'+b.name+'" is not dynamic.')};y.rotate_z_local=function(b,g){a.is_dynamic(b)?(g=e.setAxisAngle(v.f,g,E),c.NB(b,g),c.Ea(b),r.sync_transform(b)):k.error('Wrong object: "'+b.name+'" is not dynamic.')};
y.get_object_bounding_box=function(a){return M.n(a.ka.bi)};y.set_tsr=function(b,g){a.is_dynamic(b)?(c.set_tsr(b,g),c.Ea(b),r.sync_transform(b)):k.error('Wrong object: "'+b.name+'" is not dynamic.')};y.set_tsr_rel=function(b,g){a.is_dynamic(b)?(c.set_tsr_rel(b,g),c.Ea(b),r.sync_transform(b)):k.error('Wrong object: "'+b.name+'" is not dynamic.')};y.get_tsr=function(a,b){b||(b=C.b());c.get_tsr(a,b);return b};y.get_tsr_rel=function(a,b){b||(b=C.b());c.get_tsr_rel(a,b);return b};y.distance=function(a,
b){return c.distance(a,b)};y.set_matrix=function(b,g){a.is_dynamic(b)?(C.d(g,l),c.set_tsr(b,l),c.Ea(b),r.sync_transform(b)):k.error('Wrong object: "'+b.name+'" is not dynamic.')};y.set_matrix_rel=function(b,g){a.is_dynamic(b)?(C.d(g,l),c.set_tsr_rel(b,l),c.Ea(b),r.sync_transform(b)):k.error('Wrong object: "'+b.name+'" is not dynamic.')};y.get_matrix=function(a,b){b||(b=new Float32Array(16));c.get_tsr(a,l);C.x(l,b);return b};y.get_matrix_rel=function(a,b){b||(b=new Float32Array(16));c.get_tsr_rel(a,
l);C.x(l,b);return b}});w.a=f},function(D,w,f){function M(a,c){for(var k=a[1],b=1,g=2;g<a.length;g++)4!=g&&8!=g&&Math.abs(a[g])>Math.abs(k)&&(k=a[g],b=g);var e=Math.floor(b/3);b%=3;a=.5*Math.atan(2*k/(a[3*e+e]-a[3*b+b]));for(g=0;g<c.length;g++)c[g]=0==g||4==g||8==g?1:0;c[b+3*e]=-Math.sin(a);c[e+3*b]=Math.sin(a);c[e+3*e]=Math.cos(a);c[b+3*b]=Math.cos(a);return c}function U(a){return Math.sqrt(a[1]*a[1]+a[2]*a[2]+a[5]*a[5])}function n(a,c){for(var k=a.content[c];0<c;){var b=(c+1>>1)-1,g=a.content[b];
if(a.Ms(k)<a.Ms(g))a.content[b]=k,a.content[c]=g,c=b;else break}}function z(a,c,f,b){return f-e(b-a,0,f,b)+c}function e(a,c,e,b){return(a/=b)<1/2.75?7.5625*e*a*a+c:a<2/2.75?e*(7.5625*(a-=1.5/2.75)*a+.75)+c:a<2.5/2.75?e*(7.5625*(a-=2.25/2.75)*a+.9375)+c:e*(7.5625*(a-=2.625/2.75)*a+.984375)+c}w.M=function(a,c){c=c||new Float32Array(3);c[0]=a[3];c[1]=a[4];c[2]=a[5];return c};w.N=function(a,c){c=c||new Float32Array(3);return C.copy(a,c)};w.R=function(a,c){C.copy(c,a)};w.Q=function(a,c){C.normalize(c,
v);a[3]=v[0];a[4]=v[1];a[5]=v[2]};w.f=function(a,c,e){e=e||new Float32Array(3);e[0]=a[0]+a[3]*c;e[1]=a[1]+a[4]*c;e[2]=a[2]+a[5]*c;return e};w.g=function(a,c){c[0]=0;c[1]=0;for(var k=c[2]=0;k<a.length;k+=3)c[0]+=a[k],c[1]+=a[k+1],c[2]+=a[k+2];return C.scale(c,3/a.length,c)};w.e=function(a,c,e){for(var b=0;b<e.length;b++)e[b]=0;for(b=0;b<a.length;b+=3){var g=a[b]-c[0],k=a[b+1]-c[1],f=a[b+2]-c[2];e[0]+=g*g;e[1]+=g*k;e[2]+=g*f;e[4]+=k*k;e[5]+=k*f;e[8]+=f*f}e[3]=e[1];e[6]=e[2];e[7]=e[5];for(b=0;b<e.length;b++)e[b]*=
3/a.length;return e};w.L=function(k,c,e){k=m.copy(k,q);if(U(k)<c)return m.identity(e);var b=M(k,r),g=m.transpose(b,y);m.multiply(k,g,a);m.multiply(b,a,k);e=m.copy(b,e);for(var f=1;c<=U(k)&&f<T;)b=M(k,r),g=m.transpose(b,y),m.multiply(k,g,a),m.multiply(b,a,k),m.multiply(b,e,e),f++;return e};w.P=function(a,c){return c[0]*a[0]+c[1]*a[1]+c[2]*a[2]+c[3]};w.a=function(a){return{content:[],Ms:a}};w.c=function(a,c){a.content.push(c);n(a,a.content.length-1)};w.b=function(a){var c=a.content[0],k=a.content.pop();
if(0<a.content.length){a.content[0]=k;k=0;for(var b=a.content.length,g=a.content[k],e=a.Ms(g);;){var f=k+1<<1,m=f-1,n=null;if(m<b){var r=a.Ms(a.content[m]);r<e&&(n=m)}f<b&&a.Ms(a.content[f])<(null===n?e:r)&&(n=f);if(null!==n)a.content[k]=a.content[n],a.content[n]=g,k=n;else break}}return c};w.d=function(a,c){n(a,a.content.indexOf(c))};w.O=function(a,c,e,b){return e*a/b+c};w.x=function(a,c,e,b){return e*(a/=b)*a+c};w.H=function(a,c,e,b){return-e*(a/=b)*(a-2)+c};w.t=function(a,c,e,b){return 1>(a/=b/
2)?e/2*a*a+c:-e/2*(--a*(a-2)-1)+c};w.k=function(a,c,e,b){return e*(a/=b)*a*a+c};w.E=function(a,c,e,b){return e*((a=a/b-1)*a*a+1)+c};w.q=function(a,c,e,b){return 1>(a/=b/2)?e/2*a*a*a+c:e/2*((a-=2)*a*a+2)+c};w.y=function(a,c,e,b){return e*(a/=b)*a*a*a+c};w.I=function(a,c,e,b){return-e*((a=a/b-1)*a*a*a-1)+c};w.u=function(a,c,e,b){return 1>(a/=b/2)?e/2*a*a*a*a+c:-e/2*((a-=2)*a*a*a-2)+c};w.z=function(a,c,e,b){return e*(a/=b)*a*a*a*a+c};w.J=function(a,c,e,b){return e*((a=a/b-1)*a*a*a*a+1)+c};w.v=function(a,
c,e,b){return 1>(a/=b/2)?e/2*a*a*a*a*a+c:e/2*((a-=2)*a*a*a*a+2)+c};w.A=function(a,c,e,b){return-e*Math.cos(a/b*(Math.PI/2))+e+c};w.K=function(a,c,e,b){return e*Math.sin(a/b*(Math.PI/2))+c};w.w=function(a,c,e,b){return-e/2*(Math.cos(Math.PI*a/b)-1)+c};w.m=function(a,c,e,b){return 0==a?c:e*Math.pow(2,10*(a/b-1))+c};w.G=function(a,c,e,b){return a==b?c+e:e*(-Math.pow(2,-10*a/b)+1)+c};w.s=function(a,c,e,b){return 0==a?c:a==b?c+e:1>(a/=b/2)?e/2*Math.pow(2,10*(a-1))+c:e/2*(-Math.pow(2,-10*--a)+2)+c};w.j=
function(a,c,e,b){return-e*(Math.sqrt(1-(a/=b)*a)-1)+c};w.D=function(a,c,e,b){return e*Math.sqrt(1-(a=a/b-1)*a)+c};w.p=function(a,c,e,b){return 1>(a/=b/2)?-e/2*(Math.sqrt(1-a*a)-1)+c:e/2*(Math.sqrt(1-(a-=2)*a)+1)+c};w.l=function(a,c,e,b){var g=0,k=e;if(0==a)return c;if(1==(a/=b))return c+e;g||(g=.3*b);k<Math.abs(e)?(k=e,e=g/4):e=g/(2*Math.PI)*Math.asin(e/k);return-(k*Math.pow(2,10*--a)*Math.sin(2*(a*b-e)*Math.PI/g))+c};w.F=function(a,c,e,b){var g=0,k=e;if(0==a)return c;if(1==(a/=b))return c+e;g||
(g=.3*b);if(k<Math.abs(e)){k=e;var f=g/4}else f=g/(2*Math.PI)*Math.asin(e/k);return k*Math.pow(2,-10*a)*Math.sin(2*(a*b-f)*Math.PI/g)+e+c};w.r=function(a,c,e,b){var g=0,k=e;if(0==a)return c;if(2==(a/=b/2))return c+e;g||(g=.3*b*1.5);if(k<Math.abs(e)){k=e;var f=g/4}else f=g/(2*Math.PI)*Math.asin(e/k);return 1>a?-.5*k*Math.pow(2,10*--a)*Math.sin(2*(a*b-f)*Math.PI/g)+c:k*Math.pow(2,-10*--a)*Math.sin(2*(a*b-f)*Math.PI/g)*.5+e+c};w.h=function(a,c,e,b,g){void 0==g&&(g=1.70158);return e*(a/=b)*a*((g+1)*a-
g)+c};w.B=function(a,c,e,b,g){void 0==g&&(g=1.70158);return e*((a=a/b-1)*a*((g+1)*a+g)+1)+c};w.n=function(a,c,e,b,g){void 0==g&&(g=1.70158);return 1>(a/=b/2)?e/2*a*a*(((g*=1.525)+1)*a-g)+c:e/2*((a-=2)*a*(((g*=1.525)+1)*a+g)+2)+c};w.i=z;w.C=e;w.o=function(a,c,f,b){return a<b/2?.5*z(2*a,0,f,b)+c:.5*e(2*a-b,0,f,b)+.5*f+c};var m=f(27),C=f(3),v=new Float32Array(3),q=new Float32Array(9),r=new Float32Array(9),y=new Float32Array(9),a=new Float32Array(9),T=100},function(D,w,f){D=f(0);var M=f(55),U=f(38),n=
f(5),z=f(44),e=f(16),m=f(4),C=f(59),v=f(53),q=f(70),r=f(46),y=f(28),a=f(31),T=f(39),k=f(65),c=f(74),l=f(94),b=f(52),g=f(60),E=f(47),ea=f(62),u=f(12),F=f(9),R=f(19),O=f(1),K=f(8),A=f(95),ca=f(22),L=f(10),ha=f(23),J=f(34),W=f(11),B=f(36),ba=f(17),I=f(18),P=f(13),p=f(6),da=f(2),H=f(3),t=f(7),d=f(48);f=Object(D.a)("__data",function(f,na){function la(a,b){Ob[b.id]=null;mc[b.id]=null}function w(a,b,c,d){a instanceof ArrayBuffer?(a=Rc.cG(a,d),d=a.width,a=a.height):(d=a.width,a=a.height);Z.log("%cLOAD IMAGE "+
d+"x"+a,"color: #"+(2048<d||2048<a?"a00":1024<d||1024<a?"aa0":"0a0"),b);-1==b.indexOf(fc)&&c&&Z.warn("image",b,"is not from app root.")}function D(a,b,c,d,h,g){function e(a){g(b,c,a)}function k(d,g,l,p){if(d){Z.log("%cLOAD METADATA","color: #616",p);g=da._58(d.b4w_format_version);switch(da._70(g,lb.nn)){case -1:g[0]<lb.nn[0]?Qb.va("JSON version is too old relative to B4W engine: "+da._71(g)+", required: "+da._71(lb.nn)+". Reexport scene with the latest B4W addon to fix it."):Z.warn("JSON version is a bit old relative to B4W engine: "+
da._71(g)+", required: "+da._71(lb.nn)+". Some compatibility issues can occur. Reexport scene with the latest B4W addon to fix it.");break;case 1:g[0]>lb.nn[0]?Qb.va("B4W engine version is too old relative to JSON. Can't load the scene. Update your engine version to fix it."):Z.error("B4W engine version is a bit old relative to JSON. Some compatibility issues can occur. Update your engine version to fix it.")}lb.QA=g;for(var t in d)a[t]=d[t];b.pc&&(Cb=Pa.cv(a.scenes));(d=a.binaries[0].binfile)?b.bE=
d:(Sa.qx(b,"load_binaries"),Sa.qx(b,"prepare_bindata"));lb.is_mobile_device||Sa.qx(b,"mobile_media_start");lb.antialiasing&&lb.smaa||Sa.qx(b,"load_smaa_textures");if(a.b4w_export_errors)for(d=0;d<a.b4w_export_errors.length;d++)t=a.b4w_export_errors[d],(b.pc&&"PRIMARY"==t.type||"ALL"==t.type)&&Z.jP(t.text+" See more details in https://www.blend4web.com/doc/en/addon.html#non-critical-export-errors");if(a.b4w_export_warnings)for(d=0;d<a.b4w_export_warnings.length;d++)t=a.b4w_export_warnings[d],(b.pc&&
"PRIMARY"==t.type||"ALL"==t.type)&&Z.kP(t.text+" See more details in https://www.blend4web.com/doc/en/addon.html#other-messages");b.Ug&&ta(a);h(b,c)}else l==G.AT_JSON_ZIP?(Z.warn("Compressed file ",p,"not found or invalid. Trying to load non-compressed",f),G.enqueue([{id:f,type:G.AT_JSON,url:f,jf:b.Ug}],k,null,e)):Sa.JD(b)}var f=b.Zi;f||Qb.va("Nothing requested");if(lb.assets_gzip_available){d=f+".gz";var l=G.AT_JSON_ZIP}else d=f,l=G.AT_JSON;G.enqueue([{id:d,type:l,url:d,jf:b.Ug}],k,null,e)}function N(a,
b,c,d,h,g){function e(a){g(b,c,a)}function k(d,g,l,t){d?(Z.log("%cLOAD BINARY","color: #616",t),a.bin_data=d,g=(new Uint32Array(d,4,1))[0],d=(new Uint32Array(d,8,1))[0],d=[g,d],g=da._58(a.b4w_format_version),d[0]!=g[0]&&Qb.va("BIN version does not match to JSON version: "+da._71(d)+", required: "+da._71(lb.nn)+". Couldn't load the scene. Reexport scene to fix it."),d[1]!=g[1]&&Z.warn("BIN version does not match to JSON version: "+ +da._71(d)+", required: "+da._71(lb.nn)+". Some compatibility issues can occur. Reexport scene to fix it."),
h(b,c)):l==G.AT_ARRAYBUFFER_ZIP?(Z.warn("Compressed file ",t,"not found or invalid. Trying to load non-compressed",f),G.enqueue([{id:f,type:G.AT_ARRAYBUFFER,url:f,jf:b.Ug}],k,null,e)):Sa.JD(b)}var f=hb(b.Zi)+b.bE;f||Qb.va("Binary data is missing");if(lb.assets_gzip_available){d=f+".gz";var l=G.AT_ARRAYBUFFER_ZIP}else d=f,l=G.AT_ARRAYBUFFER;G.enqueue([{id:d,type:l,url:d,jf:b.Ug}],k,null,e)}function oa(a,b,c,d,h){cd.vE()&&h(b,c)}function Y(a,b,c,d,h){d=a.bin_data;var g=a.binaries[0],e=a.objects,k=a.meshes;
a=a.actions;for(var f=da.K(),l=["indices"],p=["position","texcoord","texcoord2","shade_tangs"],m=["normal","tangent"],n=["group"],u=["color"],r=0;r<k.length;r++)for(var q=k[r].submeshes,v=0;v<q.length;v++){for(var A in q[v]){var y=q[v][A][1];if(-1!=l.indexOf(A)){var F=q[v][A][0]*da.i+g["int"]+12,P=q[v],E=A,z=d;if(f)var C=new Uint32Array(z,F,y);else{C=new Uint32Array(y);z=new DataView(z);for(var I=0;I<y;I++)C[I]=z.getUint32(F+I*da.i,!0)}P[E]=C}else if(-1!=p.indexOf(A))F=q[v][A][0]*da.h+g["float"]+
12,q[v][A]=Q(d,F,y,f);else if(-1!=m.indexOf(A)){F=q[v][A][0]*da.l+g["short"]+12;P=q[v];E=A;z=d;C=new Float32Array(y);z=new DataView(z);for(I=0;I<y;I++)C[I]=z.getInt16(F+I*da.l,!0)/32767;P[E]=C}else if(-1!=n.indexOf(A)){F=q[v][A][0]*da.l+g.ushort+12;P=q[v];E=A;z=d;C=new Float32Array(y);z=new DataView(z);for(I=0;I<y;I++)C[I]=z.getUint16(F+I*da.l,!0)/65535;P[E]=C}else if(-1!=u.indexOf(A)){F=q[v][A][0]*da.g+g.uchar+12;P=q[v];E=A;z=d;C=new Float32Array(y);z=new DataView(z);for(I=0;I<y;I++)C[I]=z.getUint8(F+
I*da.g)/255;P[E]=C}}y=q[v];if(k[r].b4w_shape_keys.length)for(F=y.base_length,P=y.normal.length/F/3,y.tbn=B.d(y.normal.subarray(0,3*F),y.tangent.subarray(0,4*F),B.c(y.normal.length/3)),E=1;E<P;E++)for(z=E*F,C=0;C<F;C++){var J=y.normal.subarray(3*C,3*(C+1)),G=H.add(y.normal.subarray(3*(z+C),3*(z+C+1)),J,Hc);I=B.i(Kb);if(y.tangent.length){var ba=y.tangent.subarray(4*C,4*(C+1)),na=t.add(y.tangent.subarray(4*(z+C),4*(z+C+1)),ba,ic);J=B.d(J,ba);G=B.d(G,na);B.l(G,J,I)}else G=K.rotationTo(J,G,tc),B.o(I,G,
0);B.n(y.tbn,I,z+C)}else y.tbn=B.d(y.normal,y.tangent);delete q[v].normal;delete q[v].tangent;"texcoord2"in q[v]&&(y=new Float32Array(q[v].texcoord.length+q[v].texcoord2.length),y.set(q[v].texcoord),y.set(q[v].texcoord2,q[v].texcoord.length),q[v].texcoord=y,delete q[v].texcoord2)}for(A=0;A<e.length;A++)for(k=e[A].particle_systems,l=0;l<k.length;l++)p=k[l],p.transforms=Q(d,p.transforms[0]*da.h+g["float"]+12,p.transforms[1],f);for(e=0;e<a.length;e++){A=a[e];k=A.fcurves;l=A.frame_range;m=l[0];n=l[1];
u=Ia.TP(m,n);l=null;0>u&&(u=0);q=r=!1;for(var O in k)r|=-1<O.indexOf("rotation_euler"),q|=-1<O.indexOf("rotation_quaternion");p=[];for(O in k)if(r&&q&&-1<O.indexOf("rotation_euler"))delete k[O];else{v=k[O];for(var T in v)y=v[T],F=Q(d,g["float"]+y.bin_data_pos[0]*da.h+12,y.bin_data_pos[1],f),P=new Float32Array(u),null===l&&(l=new Int8Array(u)),Ia.vM(y,F,P,l,m,n),y.Xf=P;-1<O.indexOf("rotation_euler")&&(Ia.rP(k[O]),p.push(O))}for(m=0;m<p.length;m++)n=p[m],u=n.replace("euler","quaternion"),k[u]=k[n],
delete k[n];A.SL=l}h(b,c)}function Q(a,b,c,d){if(d)d=new Float32Array(a,b,c);else{d=new Float32Array(c);a=new DataView(a);for(var h=0;h<c;h++)d[h]=a.getFloat32(b+h*da.h,!0)}return d}function Ha(a,b,d,h,g){var e=a.cameras,k=a.groups,f=a.materials,l=a.meshes,p=a.node_groups,t=a.objects,m=a.particles,n=a.scenes,u=a.speakers,q=a.lamps,r=a.textures,B=a.worlds;p||(Z.warn('"node_groups" datablock undefined. reexport main scene.'),p=a.node_groups=[]);for(var v="actions armatures cameras curves groups images lamps materials meshes node_groups objects particles scenes sounds speakers textures worlds".split(" "),
A={},y=0;y<v.length;y++)for(var F=a[v[y]],H=0;H<F.length;H++){var P=F[H];A[P.uuid]=P}for(var E=0;E<n.length;E++){for(var z=n[E],C=z.objects,I=0;I<C.length;I++)ma(C,I,A);z.camera&&ma(z,"camera",A);z.world&&ma(z,"world",A)}for(E=0;E<k.length;E++){var J=k[E].objects;for(I=0;I<J.length;I++)ma(J,I,A)}for(E=0;E<t.length;E++){var G=t[E];G.dupli_group&&ma(G,"dupli_group",A);G.parent&&ma(G,"parent",A);G.dg_parent&&ma(G,"dg_parent",A);var ba=G.animation_data;ba&&xa(ba,A);switch(G.type){case "MESH":G.data||
Qb.va("mesh not found for object "+G.name);ma(G,"data",A);var O=!1,na=G.modifiers;for(I=0;I<na.length;I++){var T=na[I];"ARMATURE"==T.type?(O&&Z.warn('Object "'+G.name+'" has more than one armature modifiers. Only the first one will be used.'),O=!0,ma(T,"object",A)):"CURVE"==T.type&&ma(T,"object",A)}var R=G.particle_systems;if(R)for(I=0;I<R.length;I++)ma(R[I],"settings",A);break;case "ARMATURE":ma(G,"data",A);var la=G.pose.bones,ya=G.data.bones;for(I=0;I<la.length;I++){var w=la[I];w.bone=ya[w.bone];
var K=w.constraints;if(K)for(var ea=0;ea<K.length;ea++){var W=K[ea];W.target&&ma(W,"target",A)}var Y=w.parent_recursive;for(ea=0;ea<Y.length;ea++)Y[ea]=la[Y[ea]]}break;case "LAMP":case "CAMERA":case "SPEAKER":case "CURVE":ma(G,"data",A)}if(K=G.constraints)for(I=0;I<K.length;I++)W=K[I],W.target&&ma(W,"target",A);var ia=G.lod_levels;if(ia)for(I=0;I<ia.length;I++){var N=ia[I];N.object&&ma(N,"object",A)}}for(E=0;E<l.length;E++){var pb=l[E].materials;for(I=0;I<pb.length;I++)ma(pb,I,A)}for(E=0;E<f.length;E++){var L=
f[E],oa=L.texture_slots;for(I=0;I<oa.length;I++)ma(oa[I],"texture",A);var V=L.node_tree;V&&ra(V,A)}for(E=0;E<p.length;E++)(V=p[E].node_tree)&&ra(V,A);for(E=0;E<r.length;E++){var ka=r[E],X=ka.type;"IMAGE"!=X&&"ENVIRONMENT_MAP"!=X||ma(ka,"image",A)}for(E=0;E<e.length;E++){var S=e[E];S.dof_object&&ma(S,"dof_object",A)}for(E=0;E<u.length;E++){var Q=u[E];Q.sound&&ma(Q,"sound",A);(ba=Q.animation_data)&&xa(ba,A)}for(E=0;E<m.length;E++){var ca=m[E];oa=ca.texture_slots;for(I=0;I<oa.length;I++)ma(oa[I],"texture",
A);ca.dupli_group&&ma(ca,"dupli_group",A);ca.dupli_object&&ma(ca,"dupli_object",A)}for(E=0;E<q.length;E++)(ba=q[E].animation_data)&&xa(ba,A);for(E=0;E<B.length;E++){var ha=B[E];if(oa=ha.texture_slots)for(I=0;I<oa.length;I++)ma(oa[I],"texture",A);(ba=ha.animation_data)&&xa(ba,A);(V=ha.node_tree)&&ra(V,A)}Jb.fN(a);ta(a);for(var Aa=hb(b.Zi),Ha=a.textures,pa=b.pc?a.scenes[0].b4w_anisotropic_filtering:Cb.b4w_anisotropic_filtering,D=0;D<Ha.length;D++){var M=Ha[D];b.pc||"SCENE"!=M.b4w_source_type||(M.b4w_source_id=
"");var ja=Bb.IO(M,pa,a.scenes,b.id,Aa);M.sa=ja}for(var Ta={},Va=a.objects,fa=0;fa<Va.length;fa++){var U=Va[fa];if("MESH"===U.type&&!U.particle_systems.length)for(var Ca=U.data,Ja=Ca.name,wa=Ca.submeshes,La=Ca.materials,vb=0;vb<wa.length;vb++)0!==wa[vb].base_length||Ta[Ja]||(La[vb]&&Z.warn('material "'+La[vb].name+'" is not assigned to any face (object "'+U.name+'").'),Ta[Ja]=!0)}var wb=[];a.materials=[];for(var Ka=a.meshes,Ra=0;Ra<Ka.length;Ra++){var Wa=Ka[Ra];if(0==Wa.materials.length){var Ya=c.b();
Wa.materials.push(Ya);-1==wb.indexOf(Ya.nd)&&(wb.push(Ya.nd),a.materials.push(Ya))}else for(var sb=0;sb<Wa.materials.length;sb++){var za=Wa.materials[sb],Nc=c.c();c.d(za,Nc);Wa.materials[sb]=Nc;-1==wb.indexOf(Nc.nd)&&(wb.push(Nc.nd),a.materials.push(Nc))}}for(var qa=a.actions,ab=b.id,Da=0;Da<qa.length;Da++){var Rc=qa[Da];Rc.TL=ab;Ia.cM(Rc)}for(var Oc={TG:[],lw:[]},Sb=a.scenes,Na=0;Na<Sb.length;Na++)for(var rb=Sb[Na],ua=Sb[Na].objects,cb=0;cb<ua.length;cb++)bb(rb,ua,ua[cb],null,Oc);for(Na=0;Na<Oc.lw.length;Na++){var Qc=
Oc.lw[Na];for(cb=0;cb<Qc.Gw.length;cb++){var Xb=Qc.Gw[cb],Pc=Qc.iH[cb],Wb=Qc.QB[cb],Sa=Qc.nB[cb];Qc.SG[cb].object=Pc;for(var Qa=0;Qa<Sa.length;Qa++)da.C(Sa[Qa],Pc);for(var va=Xb,ub=Wb,Gc=0;Gc<ub.length;Gc++){for(var Ba=ub[Gc].objects,Xa=0;Xa<Ba.length;Xa++){var Pb=Ba[Xa].dupli_group;Pb&&Ua(va,Pb)}var Ic=Ba.indexOf(va);-1<Ic&&Ba.splice(Ic,1)}}}!b.pc&&1<a.scenes.length&&(a.scenes=[Pa.cv(a.scenes)],Z.warn("loading data contains multiple scenes.","Only the first one will be loaded."));var ib=b.pc?Cb:
Pa.cv(a.scenes);nd.AT(Cb.fps);1<a.scenes.length&&(a.scenes.splice(a.scenes.indexOf(Cb),1),a.scenes.unshift(Cb));for(var Db=0;Db<a.scenes.length;Db++){var jb=a.scenes[Db];jb.sa={};jb.HD=jb==ib;jb.UL=b.pc;var Jc;if(Jc=lc.enabled){var Ab;if(Ab="OFF"!=jb.b4w_enable_physics){var bc;if(!(bc="AUTO"!=jb.b4w_enable_physics))a:{for(var mb=Ea(jb,"ALL"),fb=0;fb<mb.length;fb++){if(mb[fb].b4w_collision){bc=!0;break a}var Ac=mb[fb].data;if(Ac.materials)for(var nb=0;nb<Ac.materials.length;nb++)if(Ac.materials[nb].Fd.aq){bc=
!0;break a}}bc=!1}Ab=bc}Jc=Ab}Jc&&(b.pc||!Oa.Bp(Cb)&&jb==Pa.cv(a))&&Oa.ZQ(jb)}for(var kb=0;kb<a.scenes.length;kb++){var lb=a.scenes[kb];if(lb.b4w_use_logic_editor){var Kb=Ea(lb,"ALL");Jb.xM(Kb,lb)}}for(var eb=0;eb<a.scenes.length;eb++){for(var ob=a.scenes[eb],Ob=Ea(ob,"ALL"),id=0;id<Ob.length;id++){var $b=Ob[id];sa.gN($b,ob,a)&&($b.re||($b.re=[]),$b.re.push(b.pc?ob:Cb))}for(var Lb=Ob,ic=0;ic<Lb.length;ic++){var Fb=Lb[ic];if(Fb.re&&"WORLD"!=Fb.type)for(var db=Fb.particle_systems,Tb=0;Tb<db.length;Tb++){var zb=
db[Tb].settings;if("HAIR"==zb.type)if("OBJECT"==zb.render_type){var gb=zb.dupli_object;gb.re||(gb.re=Fb.re.slice())}else if("GROUP"==zb.render_type)for(var fc=zb.dupli_group,jc=0;jc<fc.objects.length;jc++)gb=fc.objects[jc],gb.re||(gb.re=Fb.re.slice())}}}for(var Yc=a.scenes,oc=[],Vb=0;Vb<Yc.length;Vb++)Ga(Yc[Vb].objects,0,b.pc,oc);mc[b.id]=[];for(Vb=0;Vb<oc.length;Vb++)for(var kc=oc[Vb],tc=0;tc<kc.length;tc++)for(var cd=kc[tc],Cc=0;Cc<cd.length;Cc++)mc[b.id].push(cd[Cc]);var Hc=a.particles;for(Vb=
0;Vb<Hc.length;Vb++){var Xd=Hc[Vb].dupli_object;Xd&&(Xd.GD=!0,mc[b.id].push(Xd));var Ce=Hc[Vb].dupli_group;if(Ce){var De=Ce.objects;for(tc=0;tc<De.length;tc++)Xd=De[tc],Xd.GD=!0,mc[b.id].push(Xd)}}var we=mc[b.id];for(Vb=we.length-1;0<=Vb;Vb--)we[Vb].re||we.splice(Vb,1);var Pd=mc[b.id];for(eb=0;eb<Pd.length;eb++){$b=Pd[eb];!b.pc&&$b.parent&&-1<pc.indexOf($b.parent.type)&&($b.parent="");if("MESH"==$b.type){var me=Jb.uM($b);me&&(a.meshes.push(me),$b.data=me)}$b.fo=sa.RF($b,!1);$b.Dj=sa.iE($b)}for(eb=
0;eb<Pd.length;eb++){$b=Pd[eb];var Mc=$b.Dj;for(id=0;id<$b.lod_levels.length;id++){var xd=$b.lod_levels[id].object;xd&&(Mc=Mc||xd.Dj)}if(Mc)for($b.Dj=!0,id=0;id<$b.lod_levels.length;id++)if(xd=$b.lod_levels[id].object)xd.Dj=!0}for(var bd=0;bd<a.scenes.length;bd++){var Ee=a.scenes[bd],Xc=Ee.world;Xc.re||(Xc.re=[]);Xc.re.push(b.pc?Ee:Cb)}var x=[];for(bd=0;bd<a.worlds.length;bd++)Xc=a.worlds[bd],Xc.re?(Xc.fo=sa.RF(Xc,!0),Xc.Dj=sa.iE(Xc)):x.push(Xc);for(bd=0;bd<x.length;bd++)Xc=x[bd],a.worlds.splice(a.worlds.indexOf(Xc),
1);for(var Yd=a.node_groups,ne=a.materials,md=0;md<Yd.length;md++){var Ed=Yd[md].node_tree;if(Ed){var aa=[];Ma(Ed,aa,!0);Ed.Cq=aa}}for(md=0;md<ne.length;md++)if(Ed=ne[md].ne)aa=[],Ma(Ed,aa,!1),Ed.Cq=aa;for(var he=0;he<a.scenes.length;he++){var Xe=a.scenes[he],Fe=b.pc?Xe:Cb;Fa(b.id,Fe,"SPEAKER").length&&!Fe.yd&&tb.BM(Fe)}g(b,d)}function ia(a,b,c,h,g){h=hb(b.Zi);for(var e=[],k=[],f=0;f<a.speakers.length;f++){var l=a.speakers[f],p=l.sound.uuid;if(-1==k.indexOf(p)){k.push(p);switch(l.b4w_behavior){case "POSITIONAL":case "BACKGROUND_SOUND":var t=
G.AT_AUDIOBUFFER;break;case "BACKGROUND_MUSIC":t=G.AT_AUDIO_ELEMENT}l=Object(d.b)(h+l.sound.filepath);Va(e,p,t,l,b.Ug)}}e.length?G.enqueue(e,function(){},function(){g(b,c)}):g(b,c)}function Ma(a,b,c){a=a.nodes;for(var d=0;d<a.length;d++){var h=a[d],g=h.type;if("GROUP"==g&&h.node_group){if(h=h.node_group.node_tree)if(c)Ma(h,b,!0);else for(h=h.Cq,g=0;g<h.length;g++){var e=h[g];-1==b.indexOf(e)&&b.push(e)}}else-1!=Cc.indexOf(g)&&-1==b.indexOf(g)&&b.push(g)}}function Ea(a,b){b||(b="ALL");var c=[];-1==
a.objects.indexOf(a.camera)&&a.objects.push(a.camera);X(a.objects,b,c);return c}function X(a,b,c){for(var d=0;d<a.length;d++){var h=a[d];"ALL"!=b&&b!=h.type||c.push(h);(h=h.dupli_group)&&X(h.objects,b,c)}}function Ga(a,b,c,d){d[b]=d[b]||[];for(var h=d[b],g=0;g<a.length;g++){var e=a[g],k=vb(e);h[k]=h[k]||[];(c||-1==pc.indexOf(e.type))&&-1==h[k].indexOf(e)&&h[k].push(e);(e=e.dupli_group)&&Ga(e.objects,b+1,c,d)}}function Fa(a,b,c){var d=[];a=mc[a];for(var h=0;h<a.length;h++){var g=a[h];if(g.type==c||
"ALL"==c)for(var e=0;e<g.re.length;e++)b==g.re[e]&&d.push(g)}return d}function wa(a,b,c,d,h){for(var g=mc[b.id],e=0;e<g.length;e++){var k=sa.WE(g[e]);k.ka.Rd=b.id}var f=a.worlds;for(e=0;e<f.length;e++)sa.WE(f[e],!0);d=sa.get_all_objects("ALL",b.id);for(e=0;e<g.length;e++){var l=g[e];k=l.rb;Ab.fy(l,k)}for(e=0;e<f.length;e++)k=f[e],Ab.fy(k,k.rb);b.pc&&La(a,b.id);for(e=0;e<g.length;e++)l=g[e],k=l.rb,k.Ur||(Sb.KS(l,k),sa.bV(l,k),eb.Ea(k)),"MESH"==k.type&&sa.NP(l,k);for(a=0;a<g.length;a++){var t=g[a];
f=t.rb;e=f.ka;if(Db.is_mesh(f)||Db.is_empty(f)){var m=t.lod_levels.length;if(m){f=[t];k=[0];var n=Infinity;for(l=0;l<m;l++){var u=t.lod_levels[l].object,q=t.lod_levels[l].distance;if(!u){n=q;break}f.push(u);k.push(q)}k.push(n);for(l=0;l<f.length;l++)u=f[l],t=u.rb.ka,t.dk=!0,"DYNAMIC"==e.type&&0<l&&H.subtract(e.Ye.Da,t.Ye.Da,t.pw),t.Wg=k[l],t.Vg=k[l+1],m=k[l+1]-k[l],n=l==f.length-1?Infinity:k[l+2]-k[l+1],t.ik=Math.min(0==l?0:k[l]-k[l-1],m),t.jk=Math.min(m,n)}}}for(g=0;g<d.length;g++)if(a=d[g],"MESH"==
a.type&&(e=a.au)){e=e.ka;f=a.ka.Oi;k=[];for(var r in f)l=f[r],k.push(4*l.Jz,4*l.Ni);e.tw.push(k);e.Fp.push(a.ka)}g=r=-1;a=Ia.VF();for(e=0;e<d.length;e++)f=d[e],k=f.ka,Db.is_mesh(f)&&k.wl&&(f=k.mi,f>r&&(r=f),a>=f&&f>g&&(g=f));for(e=0;e<d.length;e++)f=d[e],k=f.ka,Db.is_mesh(f)&&k.wl&&(k.Um=!0,r<a?k.mi=r:k.mi<=a?k.mi=g:(Z.warn('too many bones for "'+f.name+'" / '+k.mi+" bones (max "+a+" with blending, "+2*a+" without blending). Blending between frames will be disabled."),k.mi=r,k.Um=!1),k.Um=k.Um&&!Tb.EF);
for(r=0;r<d.length;r++)if(g=d[r],g.mg)if(a=g.xg,"CHASSIS"==a.og){g.Ba={};g.Ba.Fr=a.Fr;g.Ba.Tq=a.Tq;g.Ba.oC=a.oC;g.Ba.qC=a.qC;g.Ba.pC=a.pC;g.Ba.UC=a.UC;g.Ba.MB=a.MB;g.Ba.WA=a.WA;g.Ba.Do=0;g.Ba.Sq=1;g.Ba.Pp=0;g.Ba.speed=0;g.Ba.yn=[];g.Ba.Bs=[];g.Ba.Rp=null;f=(e=Db.get_dg_parent(g))?Db.dA(e,d):d;for(e=0;e<f.length;e++)k=f[e],k.mg&&(l=k.xg,Oa.dR(k)&&a.name==l.name?(l=Oa.QV(k.xg.og),g.Ba.yn[l]=k,g.Ba.Bs[l]=p.b()):Oa.BG(k)&&a.name==l.name?(g.Ba.Rp=k,g.Ba.Qp=l.Qp,g.Ba.bt=l.bt,g.Ba.Tr=l.Tr,l=p.p(g.ka.na,
p.b()),k=p.q(l,k.ka.na,l),g.Ba.EI=k,l=new Float32Array([1,0,0]),p.y(l,k,l),g.Ba.DI=l):Oa.AG(k)&&a.name==l.name?(g.Ba.eC=k,g.Ba.$s=l.$s,g.Ba.cp=l.cp,l=p.p(g.ka.na,p.b()),k=p.q(l,k.ka.na,l),g.Ba.zI=k,l=new Float32Array([1,0,0]),p.y(l,k,l),g.Ba.yI=l):Oa.CG(k)&&a.name==l.name&&(g.Ba.rC=k,g.Ba.rr=l.rr,l=p.p(g.ka.na,p.b()),k=p.q(l,k.ka.na,l),g.Ba.NI=k,l=new Float32Array([1,0,0]),p.y(l,k,l),g.Ba.MI=l));4!=g.Ba.yn.length&&Qb.va("Not enough wheels for chassis "+g.name)}else if("HULL"==a.og)for(g.Ba={},g.Ba.yn=
[],g.Ba.Bs=[],g.Ba.Fr=a.Fr,g.Ba.Tq=a.Tq,g.Ba.Qm=a.Qm,g.Ba.Sn=a.Sn,g.Ba.Tn=a.Tn,g.Ba.Do=0,g.Ba.Sq=1,g.Ba.Pp=0,g.Ba.speed=0,g.Ba.Rp=null,f=(e=Db.get_dg_parent(g))?Db.dA(e,d):d,e=0;e<f.length;e++)k=f[e],k.mg&&(l=k.xg,Oa.cR(k)&&a.name==l.name?(g.Ba.yn.push(k),g.Ba.Bs.push(p.b())):Oa.BG(k)&&a.name==l.name?(g.Ba.Rp=k,g.Ba.Qp=l.Qp,g.Ba.bt=l.bt,g.Ba.Tr=l.Tr,l=p.p(g.ka.na,p.b()),k=p.q(l,k.ka.na,l),g.Ba.EI=k,l=new Float32Array([1,0,0]),p.y(l,k,l),g.Ba.DI=l):Oa.AG(k)&&a.name==l.name?(g.Ba.eC=k,g.Ba.$s=l.$s,
g.Ba.cp=l.cp,l=p.p(g.ka.na,p.b()),k=p.q(l,k.ka.na,l),g.Ba.zI=k,l=new Float32Array([1,0,0]),p.y(l,k,l),g.Ba.yI=l):Oa.CG(k)&&a.name==l.name&&(g.Ba.rC=k,g.Ba.rr=l.rr,l=p.p(g.ka.na,p.b()),k=p.q(l,k.ka.na,l),g.Ba.NI=k,l=new Float32Array([1,0,0]),p.y(l,k,l),g.Ba.MI=l));for(r=0;r<d.length;r++)if(g=d[r],g.en&&(a=g.Go,"MAIN_BODY"==a.og))for(g.xh={},g.xh.Qm=a.Qm,g.xh.Sn=a.Sn,g.xh.Tn=a.Tn,g.xh.ju=[],e=(e=Db.get_dg_parent(g))?Db.dA(e,d):d,f=0;f<e.length;f++)k=e[f],k.en&&(l=k.Go,Oa.fR(k)&&a.name==l.name&&(g.xh.ju.push(k),
k.hz=k.Go.LI));h(b,c)}function La(a,b){for(var c=0;c<a.scenes.length;c++){for(var d=a.scenes[c],h=sa.tc(d,"LAMP",b),g=Array(h.length),k=0;k<h.length;k++)g[k]=k;g.sort(function(a,b){a=h[a].lc;b=h[b].lc;return b.In&&b.Nn&&(!a.In||!a.Nn)||!a.In&&(b.In||!a.Nn&&b.Nn)?1:0});for(k=0;k<g.length;k++)Db.kb(h[g[k]],d).es=k}}function ja(a,b,c,d,h){for(d=0;d<a.scenes.length;d++){var g=a.scenes[d];g.Ii=g.camera.rb}for(d=0;d<a.scenes.length;d++){g=b.pc?a.scenes[d]:Cb;var k=b.pc?sa.tc(g,"LAMP",b.id):sa.tc(g,"LAMP",
0),e=sa.tc(g,"ALL",b.id),f=Fa(b.id,g,"MESH"),l=Fa(b.id,g,"EMPTY");b.pc&&Pa.jM(g,e,k,f,l);for(var t=!1,p=0;p<l.length;p++){var m=l[p].rb;e=m.Aa;for(var n=0;n<e.length;n++){var u=e[n].Bb,r=Pa.dJ(u,m);g.name==u.name&&(t=t||r)}}b.pc&&g.sa.wd&&!t&&Z.warn('Scene "'+g.name+'" has water but has no wind. Using default settings.');l=[];Pa.set_active(g);Ka.LF(g,f,k,l);p=sa.tc(g,"LINE",b.id);Ka.KF(g,p);t=Pa.tv(g);if(b.pc){m=g.sa.ux;p=g.world;if(m.HB||m.procedural_skydome)e=p.rb,Ka.nM(g,m,e),Ka.Au(e,t,g);Pa.Xz(g,
t);(m=g.sa.Aj)&&(m.rt||m.Me)&&Ka.gM(g,p.rb)}if(!b.pc)for(e=sa.tc(Cb,"ALL",b.id),Pa.kV(a.scenes[d],g,e,f),e=sa.tc(Cb,"ALL",sa.DATA_ID_ALL),n=Pa.ug(g,[Lb.de,Lb.Ue,Lb.xd,Lb.Ge]),p=0;p<e.length;p++)if(m=e[p],m.ka.Rd!=b.id)switch(m.type){case "MESH":case "LINE":case "WORLD":for(d=0;d<n.length;d++)Pa.XL(n[d],m,t,n[d].type==Lb.Ue||n[d].type==Lb.Ge,g,!0);break;case "LAMP":Pa.$p(m,g)}for(p=0;p<f.length;p++)Ka.Au(f[p].rb,t,g);for(p=0;p<l.length;p++)Ka.Au(l[p],t,g),sa.lS(l[p]);e=sa.tc(g,"ALL",b.id);Pa.UD(g,
e,k);for(p=0;p<e.length;p++)m=e[p],m.ka.Rf&&!m.rG&&sa.update_boundings(m),Db.jN(m)&&(m.gH=!0),sa.YU(m,g)}Pa.kM(Cb,a.textures,b.id);b.pc&&Cb.sa.oq.length&&(b.vA=!0);h(b,c)}function ta(a){var b=a.materials;a=a.images;for(var c=0;c<a.length;c++){var d=a[c];d.nh="FILE"==d.source&&-1<d.filepath.indexOf(".dds")&&"dds"==lb.Fm?"dds":""}if((kc.Iz&&"dds"==lb.Fm||kc.Vw&&"pvr"==lb.Fm)&&lb.mJ)for(a=0;a<b.length;a++){d=b[a];var h=d.texture_slots;for(c=0;c<h.length;c++){var g=h[c],k=g.texture;if("IMAGE"==k.type||
"ENVIRONMENT_MAP"==k.type){var e=k.image;e&&!e.nh&&(g=!k.b4w_disable_compression&&!g.use_map_normal&&"ENVIRONMENT_MAP"!=k.type&&!k.b4w_shore_dist_map&&"MOVIE"!=e.source,ka(e,g))}}if(c=d.node_tree)for(d=c.nodes,c=0;c<d.length;c++){h=d[c];g=!1;if("TEXTURE"==h.type){if((k=h.texture)&&(e=k.image)&&!e.nh&&(g=!k.b4w_disable_compression&&"MOVIE"!=k.image.source&&"ENVIRONMENT_MAP"!=k.type)){a:{g=h.outputs;for(h=0;h<g.length;h++)if(k=g[h],k.is_linked&&"Normal"==k.identifier){g=!0;break a}g=!1}g=!g}}else"TEX_IMAGE"==
h.type?(e=h.image)&&!e.nh&&(g="MOVIE"!=e.source):"TEX_ENVIRONMENT"==h.type&&(g=!1);e&&!e.nh&&ka(e,g)}}}function ka(a,b){-1<a.filepath.indexOf(".dds")?a.nh="dds":b?(a.nh=lb.Fm,a.filepath="dds"==lb.Fm?a.filepath+".dds":a.filepath+".pvr"):a.nh=""}function qa(a,b,c,d,h){d=a.groups;for(var g=a.objects,k={},e={},f={},l={},p=0;p<d.length;p++){var t=d[p];k[t.uuid]=t;f[t.uuid]=t}for(p=0;p<g.length;p++)t=g[p],e[t.uuid]=t,l[t.uuid]=t;a=a.scenes;for(p=0;p<a.length;p++)S(a[p].objects,null,l,f,null);for(var m in f)m in
k||d.push(f[m]);for(m in l)m in e||g.push(l[m]);h(b,c)}function S(a,b,c,d,h){for(var g=[],k=0;k<a.length;k++){var e=a[k],f=c[e.uuid];if(e=f.proxy){b&&-1==g.indexOf(e.uuid)&&g.push(e.uuid);var p=c[e.uuid],t=p.constraints;for(e=0;e<t.length;e++){var m=da.O(t[e]);m.name=m.name+"_CLONE";f.constraints.push(m)}"b4w_proxy_inherit_anim"in f&&!f.b4w_proxy_inherit_anim||(f.animation_data&&(p.animation_data=da.O(f.animation_data)),p.b4w_use_default_animation=f.b4w_use_default_animation,p.b4w_auto_skel_anim=
f.b4w_auto_skel_anim,p.b4w_anim_behavior=f.b4w_anim_behavior,p.b4w_cyclic_animation=f.b4w_cyclic_animation)}}for(k=0;k<g.length;k++)f=da._9(a,"uuid",g[k]),-1<f&&a.splice(f,1);g={};if(b)for(k=0;k<a.length;k++)e=a[k],f=c[e.uuid],t=da.O(f),p="origin_name"in f?f.origin_name:f.name,t.name=Db.IF(b.name,p),t.origin_name=p,t.dg_parent={uuid:b.uuid},va(t),c[t.uuid]=t,g[e.uuid]=t.uuid,e.uuid=t.uuid,h&&h[f.uuid]&&(t.b4w_cluster_data=h[f.uuid]);for(k=0;k<a.length;k++)e=a[k],f=c[e.uuid],f.dupli_group&&(e=f.dupli_group,
h=d[e.uuid],t=da.O(h),t.name=Ic.mt(h.name+"_CLONE"),t.uuid=l.a("Group"+t.name),d[t.uuid]=t,e.uuid=t.uuid,S(t.objects,f,c,d,f.b4w_cluster_data));if(b)for(k=0;k<a.length;k++){e=a[k];f=c[e.uuid];f.parent&&f.parent.uuid in g?f.parent.uuid=g[f.parent.uuid]:f.parent&&(Z.warn("Object's \""+f.name+'" parent is not in dupli group. Disabling parenting.'),f.parent=null);t=f.constraints;for(e=0;e<t.length;e++)b=t[e],b.target&&b.target.uuid in g&&(b.target.uuid=g[b.target.uuid]);if(b=f.pose)for(d=b.bones,e=0;e<
d.length;e++)if(h=d[e].constraints)for(t=0;t<h.length;t++)b=h[t],b.target&&b.target.uuid in g&&(b.target.uuid=g[b.target.uuid]);b=f.modifiers;for(e=0;e<b.length;e++)d=b[e],d.object&&d.object.uuid in g&&(d.object.uuid=g[d.object.uuid]);if((f=f.lod_levels)&&f.length)for(e=0;e<f.length;e++)b=f[e],b.object&&b.object.uuid in g&&(b.object.uuid=g[b.object.uuid])}for(var n in g)oc[n]=g[n]}function va(a){a.uuid=l.a("Object"+a.name)}function xa(a,b){a.action&&ma(a,"action",b);if(a.nla_tracks)for(var c=0;c<
a.nla_tracks.length;c++)for(var d=a.nla_tracks[c],h=0;h<d.strips.length;h++)d.strips[h].action&&ma(d.strips[h],"action",b)}function ra(a,b){for(var c=a.nodes,d=0;d<c.length;d++){var h=c[d];"TEXTURE"==h.type&&h.texture&&ma(h,"texture",b);"LAMP"==h.type&&h.lamp&&(h.lamp.uuid in oc&&(h.lamp.uuid=oc[h.lamp.uuid]),b[h.lamp.uuid]||(h.lamp=null));"GROUP"==h.type&&h.node_group&&ma(h,"node_group",b);"TEX_IMAGE"!=h.type&&"TEX_ENVIRONMENT"!=h.type||!h.image||ma(h,"image",b)}h=a.links;for(d=0;d<h.length;d++){var g=
h[d];za(g,"from_node",c);za(g,"to_node",c);Da(g,"from_socket",g.from_node.outputs);Da(g,"to_socket",g.to_node.inputs)}(a=a.animation_data)&&xa(a,b)}function ma(a,b,c){a[b]&&((c=c[a[b].uuid])||Z.error("Dangling link found:",b,a),a[b]=c)}function za(a,b,c){c=da._19("name",a[b].name,c);a[b]=c}function Da(a,b,c){c=da._19("identifier",a[b].identifier,c);a[b]=c}function ua(a,b,c,g,e,k){var f=[],l=[],t={};g=a.images;for(var p=Bb.UF(),m=hb(b.Zi),n=0;n<g.length;n++){var u=g[n],r=u.uuid;if(r){var q=Object(d.b)(m+
u.filepath),B=G.Gx(q),v=B[1].toLowerCase(),A=u.source;if("FILE"===A){A=u.nh?G.AT_ARRAYBUFFER:G.AT_IMAGE_ELEMENT;if(!G.iN(v)){Z.error('image "'+u.name+'" has unsupported format or broken path.');continue}kc.$A&&lb.use_min50&&(q=h(B))}else if("MOVIE"===A)if(lb.Rs)q=B[0]+".altconv.seq",A=G.AT_SEQ_VIDEO_ELEMENT;else{A=tb.detect_video_container(v);if(""==A){Z.error("failed to load video file (unsupported format)",q);continue}q=A!=v?B[0]+".altconv."+A:B[0]+"."+B[1];A=G.AT_VIDEO_ELEMENT}else{Z.error('Image "'+
u.name+'" has unsupported format "'+A+'".');continue}r in t||(t[r]=[]);for(B=0;B<p.length;B++)v=p[B],(!Bb.WP(v)&&v.ol==u.nh&&v.Zm==r||b.Ug)&&t[r].push(v);u.nh&&lb.assets_gzip_available&&(A=G.AT_ARRAYBUFFER_ZIP,q+=".gz");t[r].length&&f.push({id:r,type:A,url:q,jf:b.Ug})}}if(f.length){var y=0,F=function(d,h,g,e){if(d){if(b.Ug)h=g;else{h=t[h];for(var p=0;p<h.length;p++){var m=h[p];if(g==G.AT_SEQ_VIDEO_ELEMENT)m.Ps=d.zh,Bb.ot(m,d.images,b.id);else if(Bb.ot(m,d,b.id),"ENVIRONMENT_MAP"==m.source&&b.pc)for(var n=
0;n<a.scenes.length;n++)Pa.hy(a.scenes[n]);Bb.qT(m)}h=h[0].ol}g==G.AT_VIDEO_ELEMENT||g==G.AT_SEQ_VIDEO_ELEMENT?(g==G.AT_VIDEO_ELEMENT?(h=d.videoWidth,d=d.videoHeight):(h=d.images[0].width,d=d.images[0].height),Z.log("%cLOAD VIDEO "+h+"x"+d,"color: #"+(2048<h||2048<d?"a00":1024<h||1024<d?"aa0":"0a0"),e),-1==e.indexOf(fc)&&Z.warn("video",e,"is not from app root.")):w(d,e,!0,h)}else{a:{d=b.Ug;e=e.split("?v")[0];g=G.Gx(e);if("gz"==g[1])e=g[0],g=G.AT_ARRAYBUFFER;else if("dds"==g[1]||"pvr"==g[1])for(e=
g[0],g=G.AT_IMAGE_ELEMENT,p=t[h],m=0;m<p.length;m++)p[m].ol="";else if(-1!=e.indexOf(".min50"))e=e.split(".min50"),e=e[0]+e[1],g=G.AT_IMAGE_ELEMENT;else{h=null;break a}h={id:h,type:g,url:e,jf:d}}h&&(Z.warn("Trying to load fallback image",h.url),l.push(h))}h=++y/(f.length+l.length);k(b,c,h)},H=function(){l.length?(G.enqueue(l,F,H),l.length=0):(Z.log("%cLOADED ALL IMAGES","color: #0a0"),e(b,c))};G.enqueue(f,F,H)}else e(b,c)}function h(a){return"dds"==a[1]?(a=G.Gx(a[0]),a[0]+".min50."+a[1]+".dds"):a[0]+
".min50."+a[1]}function ya(a,b,c,d,h){a=Pa.wv();for(d=0;d<a.length;d++){var g=a[d];if(g.b4w_use_nla){var e=g.b4w_nla_cyclic;g.b4w_use_logic_editor&&(e=!1);Ab.jV(g,e,b.id)}}h(b,c)}function Ta(a,b,c,h,g,e){a=hb(b.Zi);var k=[],f={};h=sa.get_all_objects("ALL",b.id);for(var l=0;l<h.length;l++){var t=h[l];if(Ca(t)){var p=t.Ra.nd;"BACKGROUND_MUSIC"==tb.hA(t)?(p=da._4(),b.sA=!0):"NONE"!=tb.hA(t)&&lb.BA&&(b.AA=!0);if(!(p in f)){f[p]=[];var m=Object(d.b)(a+t.Ra.Zi);switch(tb.xI(t)){case tb.Fy:var n=G.AT_AUDIOBUFFER;
break;case tb.WC:n=G.AT_AUDIO_ELEMENT}Va(k,p,n,m,b.Ug)}f[p].push(t)}}if(k.length){var u=0;G.enqueue(k,function(a,d,h,g){if(a)for(Z.log("%cLOAD SOUND","color: #0aa",g),-1==g.indexOf(fc)&&Z.warn("sound",g,"is not from app root."),d=f[d],h=0;h<d.length;h++)tb.oV(d[h],a);a=++u/k.length;e(b,c,a)},function(){Z.log("%cLOADED ALL SOUNDS","color: #0aa");g(b,c)})}else g(b,c)}function Va(a,b,c,d,h){var g=G.Gx(d),e=g[1].toLowerCase(),k=tb.detect_audio_container(e);""!=k?(d=k!=e?g[0]+".altconv."+k:g[0]+"."+g[1],
a.push({id:b,type:c,url:d,jf:h})):Z.error("failed to load audio file (unsupported format)",d)}function Ca(a){return Db.is_speaker(a)&&tb.xI(a)!=tb.XC}function Wa(a,b,c){a=sa.tc(a,"SPEAKER",b);for(b=0;b<a.length;b++){var d=a[b];Db.is_speaker(d)&&(tb.bR(d)||c)&&tb.play_def(d)}}function Ra(a,b){for(var c=a.sa.oq,d=0;d<c.length;d++){var h=c[d].sa;a.b4w_use_nla&&c[d].b4w_nla_video||!c[d].use_auto_refresh||b!=h.qq||(Bb.reset_video(h),Bb.play_video(h))}}function V(a,b,c,d,h){Ab.JS();h(b,c)}function ab(a,
b,c,d,h){Ab.start();Z.log("%cSTART NLA","color: #0a0");h(b,c)}function bb(a,b,c,d,h){for(var g=c.lod_levels.length,e=0;e<g;e++){var k=c.lod_levels[e],f=k.object;if(f){var l=h.TG.indexOf(c);if(-1==l){h.TG.push(c);var t={Gw:[],iH:[],SG:[],QB:[],nB:[]};h.lw.push(t)}else t=h.lw[l];var p=t.Gw.indexOf(f);-1!=l&&-1!=p?(t.QB[p].push(a),t.nB[p].push(b)):(l=da.N(f),l.name=c.name+"_LOD_"+String(e+1),l.b4w_cluster_data=c.b4w_cluster_data,va(l),l.lod_levels=[],d&&(l.dg_parent=d),t.Gw.push(f),t.iH.push(l),t.SG.push(k),
t.QB.push([a]),t.nB.push([b]))}}if(b=c.dupli_group)for(b=b.objects,d=0;d<b.length;d++)bb(a,b,b[d],c,h)}function Ua(a,b){var c=b.objects;b=c.indexOf(a);-1<b&&c.splice(b,1);for(var d=0;d<c.length;d++)(b=c[d].dupli_group)&&Ua(a,b)}function Qa(a,b,c,d,h){d=!0;for(var g=0;g<a.scenes.length;g++)if(!Oa.lN(a.scenes[g])){d=!1;break}d&&(h(b,c),Z.log("%cPHYSICS READY","color: #0a0"))}function Ba(a,b,c,d,h){for(d=0;d<a.scenes.length;d++){var g=a.scenes[d];if(b.pc)var e=Oa.Bp(g);else e=Oa.Bp(Cb)||Oa.Bp(g),g=Cb;
if(lc.enabled&&e)for(e=0;e<jc.length;e++)for(var k=sa.tc(g,jc[e],b.id),f=0;f<k.length;f++){var l=k[f];l.ka.Rd==b.id&&(Oa.append_object(l,g),b.OG&&Oa.eb(l)&&Oa.disable_simulation(l))}}h(b,c)}function fa(a,b,c,h,g){var e={};h=[];for(var k=a.scenes,f=0;f<a.scenes.length;f++){var l=k[f];if(l.sa.wd){var t=l.sa.wd.Sl;if(t&&"FILE"===t.source){l=t.uuid;var p=Object(d.b)(hb(b.Zi)+t.filepath);h.push({id:l,type:t.nh?G.AT_ARRAYBUFFER:G.AT_IMAGE_ELEMENT,url:p});e[l]=t}}}h.length?G.enqueue(h,function(a,c,d,h){if(a){w(a,
h,!0);d=[];h=Bb.UF();for(var g=0;g<h.length;g++){var f=h[g];f.uri===c&&d.push(f)}for(c=0;c<d.length;c++)Bb.ot(d[c],a,b.id);for(c=0;c<k.length;c++)if(d=k[c],d.sa.wd&&(h=d.sa.wd.Sl,h===t)){f=a;var l=document.createElement("canvas");h=t.size[0];g=t.size[1];l.width=h;l.height=g;l=l.getContext("2d");l.drawImage(f,0,0);f=l.getImageData(0,0,h,g).data;l=new Float32Array(4);l[0]=1/16581375;l[1]=1/65025;l[2]=1/255;l[3]=1;h*=g;g=new Float32Array(h);for(var p=0;p<h;p++)g[p]=l[1]*f[4*p+2]+l[2]*f[4*p+3];d.sa.$B=
g}}else for(a=e[c],c=0;c<k.length;c++)d=k[c],h=d.sa.wd.Sl,h===a&&(d.sa.wd.Sl=null,Z.warn("image",h.filepath," was not found. Disabling water shore effects."))},function(){g(b,c)}):g(b,c)}function Na(a,b,c,d,h){d=a.scenes[0];a=[];for(var g=[Lb.Lt,Lb.Aq,Lb.Mt,Lb.Ty],e=0;e<g.length;e++){var k=Pa.yc(d,g[e]);k&&a.push(k)}if(a.length){d=[];e=G.AT_IMAGE_ELEMENT;d.push({id:"SEARCH_TEXTURE",type:e,url:sb.Nf.smaa_search_texture_path,jf:b.Ug});d.push({id:"AREA_TEXTURE",type:e,url:sb.Nf.smaa_area_texture_path,
jf:b.Ug});for(e=0;e<a.length;e++)if(g=a[e],g.type==Lb.Aq){a=g.Nb;for(e=0;e<a.length;e++)if(g=a[e],"u_search_tex"==g.to)var f=g.yb;else if("u_area_tex"==g.to)var l=g.yb;break}d.length?G.enqueue(d,function(a,c,d,h){a&&(w(a,h,!1),c="SEARCH_TEXTURE"==c?f:l,c.source="IMAGE",Bb.ot(c,a,b.id),Bb.UB(c,Bb.Ca,Bb.Ca))},function(){h(b,c)}):h(b,c)}else h(b,c)}function Xa(a,b,c,d){for(c=0;c<a.scenes.length;c++){var h=a.scenes[c];b.pc||(h=Cb);for(var g=sa.tc(h,"LAMP",b.id),e=0;e<g.length;e++){var k=g[e];k.ka.Rd==
b.id&&d.Yy.push({Bb:h,obj:k})}g=sa.tc(h,"ALL",b.id);for(e=0;e<g.length;e++)k=g[e],"LAMP"!=k.type&&k.ka.Rd==b.id&&(b.OG&&Db.is_mesh(k)&&Pa.Cm(k,!0),d.Yy.push({Bb:h,obj:k}))}}function ib(a,b,c,d,h){if(b.pc){a=Pa.Bh();Pa.hy(a);d=Pa.wv();for(var g=0;g<d.length;g++){var e=d[g];Pa.hy(e);Pa.CH(e,a)}Pa.set_active(a)}else Pa.hJ(Cb);a=sa.get_all_objects("ALL",b.id);sa.cV(a);h(b,c)}function jb(a,b,c,d,h){if(b.pc)for(a=Pa.wv(),d=0;d<a.length;d++)for(var g=a[d],e=sa.tc(g,"WORLD",0),k=0;k<e.length;k++)Pa.XQ(g,
e[k]),Pa.hy(g);h(b,c)}function fb(a,b,c,d,h){if(b.pc)for(a=Pa.wv(),d=0;d<a.length;d++){var g=a[d];g.b4w_use_logic_editor&&Ac.YQ(g,b.id)}h(b,c)}function rb(a,b,c,d,h){if(b.pc)for(d=0;d<a.scenes.length;d++)Ra(a.scenes[d],b.id),Wa(a.scenes[d],b.id,!1);else Ra(Cb,b.id),Wa(Cb,b.id,!1);h(b,c)}function cb(a,b,c,d,h){for(d=0;d<a.scenes.length;d++)a.scenes[d].camera=null;lb.media_auto_activation&&(b.vA||b.sA||b.AA)?db||Wb(a,h,b,c):h(b,c)}function Wb(a,b,c,d){var h=bc.parentElement;Fb=h.style.zIndex;h.style.zIndex=
"999";db=document.createElement("div");db.style.position="relative";db.style.height="88px";db.style.width="88px";var g=Math.round(bc.offsetWidth/2-44);db.style.top=Math.round(bc.offsetHeight/2-44).toString()+"px";db.style.left=g.toString()+"px";db.style.backgroundImage="url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALAAAACwCAYAAACvt+ReAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAbrwAAG68BXhqRHAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAABVDSURBVHic7Z15kF1Vncc/v05Ys7JIQJZ0GLaAgCzCQARGFMIwZKTiqCPBAbTEEodBhYKALJKSVWYsCpTBcgCLAdQBHWZACCCyhCElIRiWEMOSBZAkCglJOoTQyW/++J3Xfe95971+273v3fvOp6qr+5573+vT3d8+93vP+Z3fTwjUhKoKsC0wLvKxDTA68rEVMNK9ZDiwpft6PdDvvl4LvA+sBt5zn1cCy4EVwDJgpYhouj9RMZB2d6ATUdWtgD2BXvcxARgPbJ5RFzYAS4BFwGL38YqIvJ/R988NQcCAqm4LHADsA+yLibannX1KYBMm6JeBBcA8EVnZ3i61n64UsKoOAyYCh7iPCeTvd6HA68BcYA6wQEQ2trdL2ZO3P1rDqGoPsD9wNHAkMKqBt1nNoFctfV7j2ldj/rbPXdsvIuvd994S88QAIzCfHPXOHyHurRvt21PALOAFEdnUwHvkjsILWFV7gcnAUcDYWl8GvAEsZNCDLhKR91rfw4RvrjoWuyv0us97ALtS+99rFfAEMFNElqTRx06hkAJ2I94ngRMwXzsUmzCxzsP85csisja9HtaPqo7CbM9EzK/vRW1/vwXATODJ0h2hSBRKwO5hbAom3KFuw2uAZzD/+JyIrEm5ey1FVUcDB2Ee/hPU9vM+ANwnIu+m3L3MKISAVXU3YCrwNwx6zSTWArOBJ7Gn+P4q1+YGVR0OfByzSX+N+exKfAg8DtwtIm9m0L1UybWAVfWjwJcw4Vb6WRT4A3YbnV0U0VZCVTfDRDwZOJDKv5dNwGPAXSLydja9az25FLCqbg9MA44FhlW4bDXwIPYgszyrvnUSqrojJuRqlqof+C1wp4i8k1XfWkWuBKyqmwN/D3wRW7ZN4m3gfzHhfpBV3zoZNyofBXwem81I4gPgHsxabMiqb82SGwGr6lHAV7A50yQWA3cCT4c4gmRcPMeRwCnY0ngSK4BbRGRWZh1rgo4XsJtZOAvzdUm8CfwSeKxbJu+bxQl5EnAqsEuFy+YAPxKRP2fWsQboWAG7X/JJwGkMRnVFWQXcDjwchNsYbnVyMibkMQmXvA/8DLi/U+9qHSlg95B2HvCxhNP9wG+AO0SkL+F8oE7cws9UzCNvlnDJAuA6EVmWacdqoOMErKpHA98keS7zReAGEXkr2151B6q6C3A2sF/C6bWYpXgy215Vp2MErKpbYMI9NuF0H3ArNrPQkbeyouCs2wnA6SQPIo8AN3XKDE9HCFhVdwK+iwWv+DwLXF+k5c88oKrbAecAByecfh24shMsRdsFrKqHYn53pHdqAzYtdk8YdduDG40nA18DtvBOrwP+TURmZ96xCG0VsKp+DrtV+f1YDFwrIkuz7lOgHBeSej6wm38KmzP+deadcrRFwG765kxsmszncexBrXChf3nGzVScg63o+cwEftyOHSGZC9htmLwAONQ71Y/9N/9P1n0K1I6qngycQXkMyjPANVkPPJkKWFVHApcDe3un1mIPBc9n2Z9AY6jqgcBFlM9SLAAuy3J+PjMBu20yM4DdvVPLge+JyBtZ9SXQPC4G+zJsD1+U14BLs9p+lYmAXTzDFZRHQi0EZojIqiz6EWgtqroNcCmWQyPKUuDiLKY+Uxewqo4BrqL8CfZF4PKQrCPfuIe7S7Dg+ShvARekPTilKmBVHYGNvHt4p54FrshT3GmgMm4V9SJsf16URcBFae43TE3Abrbh+5Q/sM0Gri761p5uwwXNTwcO904twOxEKrMTqaRPcvO851Eu3uewqZYg3oIhIh9iVnGOd2ofYLrLhtRy0sr/dSbl/4nzMdvwYUrfM9Bm3MB0JfCCd+pQbFNCy2m5gN3ysL/CthCbWgmrawXHPdfMAF7xTk12iyAtpaUCVtXDsNiGKMuxqbIg3i7BzSzNwPbXRfmqC95qGS0TsKqOA75N/MGwjzDP25W41K+XYausA83AeS58tiW0RMCRucBo7oF+zPMWOrlcoDJudfUqIBrkMxK40KVIaJpWjcBnUR6MfkuIbQiIyDzgNq95d+AbrXj/pgWsqpMo3wb0eIgqC5Rw8cL+Xrrj3P7HpmhKwKr6EeBfvOYlwA3NvG+gkFyPxUhEOcvtQG+YhgXstpucSzykbgO2kyLMOARiOE1ci2XHLDES+I7TUkM0MwJPoTxvw63hoS1QCRFZjCVKiXIAcGKj79mQgJ11+LLX/BxwX6MdCXQN92K7N6Kc1qiVaHQE/ibx7JB9wA/D7uHAUDiN3MhgMRyArWlwqbluAbsskf5qyq0hb0OgVlwe4tu85sPcjFZd1CVgN/l8htf8IrYrNRCohwexAK8oX3OxxTVT7wg8FdghctyPbYEP1iFQF04zNzBYQxpge+Cz9bxPzQJ2qYb+wWu+NyTaCzSKW2q+32v+gttDWRP1jMDTiOfpXYUllg4EmuFOrJ5JiS2xDPI1UZOAXTWgT3vNt4f8vIFmcRq63Wv+jCtQMyS1jsCnEM/E8haWZjO3qOrDqrp/u/sRAGwSIFqzbjjwj7W8cEgBuwQWftDFfxagMvpngLmqerNbmAm0CVci4ude87GquvNQr61lBP6cd90SrCJ6ERiO7d/7o6pe0KoY1UBDPI5lJS3Rg2mvKlUF7J4Gj/Ga7yjgtNk2wNXAC6r6+XZ3phtxmvqF1/wpl/2nIkONwFOI1x7+E/B0/d3LDXsBvwz+uG08hRWqLLEZySl4B6goYLdN6ASv+b8LOPomEfxxG3Be+F6v+cRqq3PVRuCjie9xWwM82nj3ckfwx+3hYeLzwqNITqoNVBfw8d7xg10aqB78cYa46kd+bM3kStcnCtjVRNgn2gQ81Gznck7wx9kxE9NciYluOreMSiOwr/g/iMjbiVd2H8Efp4wr3+XvaPcdAZAgYJeYz/ccIVwyTvDH6ePf8Y9x2oyRNALvD4yNHPdhKVED5QR/nB5PY7XoSmwD7OtflCRgf9n4/0I61CEJ/rjFuCSB/sBZNhsRE7DL4XqEd01Rlo2zIPjj1uJrb5JvI/wReCIwOnK8GpiXQseKTPDHrWMutv5QYix2txvAF7Bf42BOsA8NE/xxkzjtzfWaYxr1BezvNvbTxQfqJ/jj5njWO45pdEDALuqnN3JuE5asJNAagj9ujGeJL2rs4YpmAvER+EDiyakXplkeqUsJ/rhOXMXP16JNRFKaRQU80XtteHhLj+CP68PX4sB8cE9So+Pl1LoTKBH8cW34WowL2BUlHB+5QIE/pt+vgCP44+rMJ+6DJ7h49YEReE/io/Ebwf9mTvDHFRCR1dhO+BLDcOWLS6Lt9V7j1/gKZEfwx8ks9I4nwKCAd/dOLkq9O4GhCP44jp84vRcqj8BBwJ1D8MeGr8legB5Xn8CPdg9lAjqL4I/jOSMAxquq9ADbAtFfyJpQWbNj6Vp/7BKoR3PxbQmM7QHGedcuy6xXgUbpVn+83DselyRg/6JA59Jt/tjX5g5BwPmnm/xx4gjs5576S0adCbSWbvDHK7zj7XqI78AAy7weyC9F9serveNRSQIOS8jFoIj+2Bfw6CDgYlM0f+xrc3QPVnC52kWB/FMUf+yPwCN7sBysUT7IqDOB7Mm7P97gHW+eJOCwC7n45NUff+gdb5YkYP+iQDHJoz9OFPBwrzGMwN1FnvxxooADgRLvt7sD9dJD+Yjrj8iBYrMSmA7sLyL3tbszQ1Bmd4djw/Lm3kX+016gePQDtwAXi8if292ZGqko4ChhBC4+jwDfFpEX292ROqlJwBVLGgVyz0Lg3BxYhUr4MyUbeihfeRtFoGjkyedWoyzsYTgJ68sZdSaQPnn0udVIFHBZhE9GnQmkS159bjV8bb4XBFw88u5zq+Hb27XDMX8UZfuMOhNoLSuBa4AfugIpRWQH7/id4ZTvM9oxo84EWkPRfG41fG0uTxKwr/JA51JEn1sNX5uJAg4jcOdTZJ9bjbId9D3Au8SD2EdFaxAEOoqizOfWjapuC4yINL0PvNcjIgos9a7vzapjgZroB34C7C0i1xT4Ia0aE7zjJSIyUPUwMfNfoCN4BDhIRL7eBQ9p1ej1jhfBYODOYu+kr/ZA9nSrz63EeO94CQwK2B+B90y9O4FKdMN8biPs5R0vhkEBvwJsxGoPAOyqqqNCnYxM6ab53LpQ1dHAzpGmjcCr4DK0i8h64jZCgH0y6l8g+Nyh2Jd4Ec7XnWZjlYkq1uIKpMZCYIqIHNdFixGN4GvxpdIX1QScx8QXeaFr53Mb5EDveECr0e1Dz2PF5EpD9d6qOsbVqg20huBz60RVxxCvoqUkjcAishJ4PXKhAB9Pu4NdRPC5jXEIcf/7SrSGi58XYm7CiwPNEXxuc/ganBM98AU8xzs+TFXDLuXGCD63SZz2fAHHBllfwAuI79AYSbAR9RLiFlrHwcTT/67CKzkbE7CIbASe8t7kk6l0rZgEn9tajvaOZ4nIpmhDUm60Wd7xEarqJ5QIxAk+t8W4bJmHec2+NhMF/DwWI1xiBHB467pWKILPTY8jga0jx+8SmT4rUSZgFx/sK/2ElnYt/wSfmz7HecdPOG3GqJRedaZ3fKCq7tSSbuWf4HNTRlV3BA7wmh9KujZRwCKyBJuRGGgCjm9J7/JL8LnZMZn44sV8EfF3DQGVR2AoH4VPUNUtm+1ZDgk+N0NUdQvKLauvxQGqCfgJ4nnTRgHHNt613BF8bns4jngGnjUkzD6UqChgEfkA+I3XPFVVu6EsQfC5bcBp67Ne831Oi4kMJcb7iecP3hE4orHu5YLgc9vLJCA6WbAB02BFqgpYRN4FHveap6mqJF2fY4LPbTNu9D3Fa340GnmWRC124G4guny3G+VLfHkl+NzO4Rhg18jxRuBXQ71oSAGLyJvAY17zNFUdlnB5nngAOCD43PbjRt8ves2/E5E/DfXaWh/I7iJejuuj5HxeWEROFBF/G1WgPZwI7BI57gd+XssLaxKwiLwN/NZrPlVVRyRdHwjUiqqOBKZ5zQ+LyLJaXl/PlNidwPrI8RjgS3W8PhBIYhrxed/12B2/JmoWsIi8gz3QRTlJVXdJuj4QGApV3Q34W6/5F272qybqXZT4FfF8wsOBbxVwWi2QMk4z/0x8Z/wy4N563qcuAbtpplu95n0I4ZaB+jmR8oQlP613KrPuZWERmQX83ms+XVW3q/e9At2Jqm4PnOY1zxaR2fW+V6NxDTcCfZHjEQQrEaiBiHWI7rZYB/x7I+/XkICdyb7daz4ImNLI+wW6ipOBQ72220TkL428WTORZfcDL3htp6tqbxPvGSgwqro78E9e8zxsVbQhGhaw25/0r8DaSPPmwPldGvgeqIKqbgWcD0R3uK/BEnmX7XWrlaZie92wf4PXvBtwbvDDgRJOC+cQXy4G+HGj1qFE08HpIvIUFgAe5QjKA5MD3ctUyhPkzBSRJ5t941btrriJeGZLgDNU1c/rGugyVPUgyn3vq8DNrXj/lgjYbfn4PvG8asOA74aHuu7FLRVPZ7D2CpjvvapVsdct298mIiuAHxAPft8auERVt2nV9wnkA1dZ83vEq2sqcJ2I+OWNG6alGzRF5DnKl5rHAZe6p9BAF6CqWwOXUV6c+6ci8mwrv1fLdxiLyK8Bf1/ZnsCMML1WfFxeh0uBv/JOPSgidQXq1EJaW+R/Avjr2hOBi13WwUABcQmpLwQ+5p2agz3ot5xUBOxyuF5HPD0VWLLsC0K61uLh/qYXUb5MPB+42uWebjmpLja4LUdXAHt4p54HZpSK1QXyjbMNF2PxMFEWAReKyNryV7WG1FfLXJnQq7EVuigvAZeLyLq0+xBID/dccwnltdzeBKYPldehWVJPEyUiq7H/Tj+74H7AFWGKLb+4qbJrKBfvUuCitMULGYzAJdzu0xmUVx1/BxuJ/ZW8QAfjFim+R/lU2WvApVkVyMw04MZ54sspLyTeB1wpIvOy7E+gMdzy8HTiixRgD2yXi0hf+avSIfOIMeeZLgA+4Z3aiC2C3NtMeF0gPVxU2VQstsHPzPR74NqsH8zbEvLoUgmdCZyUcHo2FiOa2X9xYGjcwPMtksuuPQjclNZUWTXaGrOrqicDX03ox1Lsv3lx5p0KlOF2UpxPeTzvJuA/0lhhq5W2B52r6gHYL2esd+pD4A7gnmAp2oOzDFOAM4jvpACLKvuBiPj1tTOl7QIGUNVx2CqOv34OVhv3epcZKJARbuv7OZQvToDNNFzZyqiyRukIAcNAZcZvUF4fDGyW4mfAA2E0Thc36v4d9qC2dcIlM4GbOyWXcscIuISqTgLOJl7kucR84AYReSPbXnUHbm73bCzwymcNcKPbQtYxdJyAYeD29R3Ki92B5Y69D7grzFS0BrfIdAqW7ml4wiXzsJmhpjZgpkFHChhqupWtxpKrPNSO6Zsi4LLsnwCcSjzFaYl1wG10sHXrWAGXcOvtX8cq2CSxHPgvTMibKlwTiOAGh0nAl4GdK1z2DPCjThx1o3S8gEs4b/wVbItSEkuxxMizOnW0aDduAWkSZhd2rXDZMmxu9+nMOtYEuREwDET8n4jd8pJsBdiIfC82Iod4YwaCzY8CvkD5YkSJ9Vj+57s7ZYahFnIl4BLOVkwDPk3yQwfYU/ODmJDfzqpvnYSq7oQVzp5MsscFeyh+GHsorjkzeqeQSwGXUNUdsTodn6JybLNiO0BmYjloczO6NIKbTz8SqyK1P5X/xhuB32HCbfuCRKPkWsAlXJ2OqZiQq+23W4cFC80C5opIf5Vrc4OzCAdhNuFwKtsrsCX6R7El+iHrsHU6hRBwCbe74yTMJ1e6ZZbow56052JiTn33QCtR1bHAwcAh2EbKoUqercFS4t6Xt5+1GoUScAm3yfAo7Dbq12FIfAmWr+t5bLXvZbcVqmNQ1THYCtm+2Bae3ant7zcfeAh4slrV97xSSAFHccujx2P1nbet9WXAW1j1+iVY4sIlWT3kuHoj44EJQC+WGKaecmbvAk9gGSALvexeeAGXcJP3+2Ej8yTKwzdroQ+bJ12BTdetwFYE10Q+r8PiZPtL03guGHw49qC5NWZvRkc+74DNb5c+GqmAugrz9rOAl7plLrxrBBzFTejvhXnHQ7C8FXn7XSjwCvCs+1jYjSuRefujpYLzl/tj/nIi5i/9PV/tZiNmZV7Gcmq8mNXO304mCDgBd8vfA/OfvZgXHQ9klZxwPbAY89+L3NevhpXFcoKA68BN05V86g7Adgz62NGYd90KG72Hua8B3sdG0H5MnH2YZy755ncY9NTLijTNlTb/Dz+sKh/f1rAbAAAAAElFTkSuQmCC')";
db.style.backgroundSize="88px";kb=document.createElement("div");kb.style.position="relative";kb.style.height=bc.offsetHeight.toString()+"px";kb.style.width=bc.offsetWidth.toString()+"px";kb.style.background="rgba(0, 0, 0, 0.5)";kb.style.zIndex="999";h.appendChild(kb);kb.appendChild(db);zb=function(){c.vA&&(Bb.play(),Bb.pause(),Bb.reset());if(c.sA){if(c.pc)for(var h=0;h<a.scenes.length;h++)Wa(a.scenes[h],c.id,!0);else Wa(Cb,c.id,!0);tb.pause()}c.AA&&tb.zH();Pb();b(c,d)};Jc.add_click_listener(db,zb)}
function Pb(){if(db){var a=bc.parentElement;a.style.zIndex=Fb;Jc.remove_click_listener(db,zb);kb.removeChild(db);a.removeChild(kb);db=kb=null;Fb=0}}function hb(a){(a=a.split("/").slice(0,-1).join("/"))&&(a+="/");return a}function pb(a){Ia.is_animated(a)&&Ia.remove(a);mb.SS(a);sa.clear_outline_anim(a);Ya.check_sensor_manifold(a)&&Ya.remove_sensor_manifold(a);Oa.eb(a)&&Oa.remove_object(a);sa.IU(a);sa.HU(a);Pa.NH(a);Db.is_speaker(a)&&tb.hU(a);wb.is_anchor(a)&&wb.remove(a)}function vb(a){var b=Ia.QF(a);
return(a=b&&b.parent==a?null:a.parent||b)?1+vb(a):0}var Qb=Object(n.a)(f),wb=Object(M.a)(f),Ia=Object(U.a)(f),G=Object(z.a)(f),Ka=Object(e.a)(f),sb=Object(m.a)(f),Sb=Object(C.a)(f),Ya=Object(v.a)(f),Rc=Object(q.a)(f),Ic=Object(a.a)(f),Xb=Object(r.a)(f),ub=Object(y.a)(f),Jc=Object(T.a)(f),Sa=Object(k.a)(f),Ab=Object(b.a)(f),Ac=Object(g.a)(f),mb=Object(E.a)(f),nb=Object(ea.a)(f),sa=Object(u.a)(f),Db=Object(F.a)(f),Oa=Object(R.a)(f),Z=Object(O.a)(f),Jb=Object(A.a)(f),Yc=Object(ca.a)(f),Pa=Object(L.a)(f),
tb=Object(ha.a)(f),cd=Object(J.a)(f),Lb=Object(W.a)(f),Bb=Object(ba.a)(f),nd=Object(I.a)(f),eb=Object(P.a)(f),Tb=sb.Xk,lb=sb.wa,kc=sb.se,lc=sb.xa,ob=sb.Ra,Ob=null,mc=null,fc="",Cb=null,oc={},Hc=new Float32Array(3),ic=new Float32Array(4),tc=new Float32Array(4),Kb=B.c(),db=null,kb=null,Fb=0,gb=!1,zb=null,pc=["LAMP"],jc=["MESH","CAMERA","EMPTY"],Cc=["BSDF_PRINCIPLED","BSDF_GLOSSY","BSDF_DIFFUSE","BSDF_TRANSPARENT"],bc=null;na.is_primary_loaded=function(a){return Sa.is_primary_loaded(a)};na.update=function(){Sa.lV(Ob)};
var Vb=function(){var a=K.create(),b=H.create();return function(c,d,h,g,e,k){var f=g.Yy;e=g.nH;if(f.length){c=f[e].obj;var l=f[e].Bb;e=Db.kb(c,l);Pa.append_object(l,c);!c.anchor||l.sa.anaglyph_use||l.sa.Us||wb.append(c);g=++g.nH/f.length;c.ka.hG&&Pa.Zq(c,!0);f=e.Tj;if(-1!=c.ka.Qd&&f){var t=H.copy(c.ka.Ye.Da,b);Pa.cJ(f,t)}f=c.An;if(f.length&&l.sa.pg)for(l=p.j(c.ka.na,b),c=p.g(c.ka.na,a),e=e.oj,t=0;t<e.length;t++)Pa.eJ(e[t],l,c),Db.fJ(f,e[t].qa.ad)}else g=1;k(d,h,g)}}();na.UT=function(a){bc=a};na.$U=
function(a,b){db&&(kb.style.height=b.toString()+"px",kb.style.width=a.toString()+"px",a=Math.round(a/2-44),db.style.top=Math.round(b/2-44).toString()+"px",db.style.left=a.toString()+"px")};na.load=function(a,b,c,d,h){var g={load_main:{qc:Sa.kh,vc:!1,inputs:[],Ac:!1,Bc:500,Nc:!1,Dc:D},duplicate_objects:{qc:Sa.Ie,vc:!1,inputs:["load_main"],Ac:!1,Bc:50,Nc:!1,Dc:qa},load_binaries:{qc:Sa.kh,vc:!1,inputs:["load_main"],Ac:!1,Bc:500,Nc:!1,Dc:N},wait_for_shaders:{qc:Sa.Ie,vc:!1,inputs:[],Ac:!1,Bc:50,Nc:!0,
al:oa},prepare_bindata:{qc:Sa.Ie,vc:!1,inputs:["duplicate_objects","load_binaries"],Ac:!1,Bc:100,Nc:!1,Dc:Y},prepare_bpy_data:{qc:Sa.Ie,vc:!1,inputs:["duplicate_objects","prepare_bindata"],Ac:!1,Bc:100,Nc:!1,Dc:Ha},process_objects:{qc:Sa.Ie,vc:!1,inputs:["prepare_bpy_data"],Ac:!1,Bc:150,Nc:!1,Dc:wa},process_scenes:{qc:Sa.Ie,vc:!1,inputs:["process_objects","wait_for_shaders"],Ac:!1,Bc:300,Nc:!1,Dc:ja},load_smaa_textures:{qc:Sa.kh,vc:!1,inputs:["process_scenes"],Ac:!1,Bc:30,Nc:!0,Dc:Na},load_shoremap:{qc:Sa.kh,
vc:!1,inputs:["process_scenes"],Ac:!1,Bc:30,Nc:!0,Dc:fa},load_images:{qc:Sa.kh,vc:!0,inputs:["process_scenes"],Ac:!0,Bc:500,Nc:!1,Dc:ua},update_scenes_nla:{qc:Sa.Ie,vc:!1,inputs:["process_scenes","load_images"],Ac:!1,Bc:50,Nc:!1,Dc:ya},wait_physics_workers:{qc:Sa.Ie,vc:!1,inputs:["load_shoremap"],Ac:!1,Bc:20,Nc:!1,al:Qa},add_physics_objects:{qc:Sa.Ie,vc:!1,inputs:["wait_physics_workers"],Ac:!1,Bc:50,Nc:!1,Dc:Ba},add_objects:{qc:Sa.Ie,vc:!1,inputs:["add_physics_objects"],Ac:!1,Bc:600,Nc:!1,Dc:Xa,al:Vb,
Xq:ib,Yq:{Yy:[],nH:0}},init_cube_sky_dynamic_props:{qc:Sa.Ie,vc:!1,inputs:["add_objects","load_images"],Ac:!1,Bc:50,Nc:!1,Dc:jb},init_logic_nodes:{qc:Sa.Ie,vc:!1,inputs:["update_scenes_nla","add_objects"],Ac:!1,Bc:50,Nc:!1,Dc:fb},load_speakers:{qc:Sa.kh,vc:!0,inputs:["add_objects"],Ac:!0,Bc:100,Nc:!1,Dc:Ta},mobile_media_start:{qc:Sa.Ie,vc:!1,inputs:["load_images","update_scenes_nla","load_speakers","init_logic_nodes"],Ac:!0,Bc:5,Nc:!1,Dc:cb,al:cb},synchronize_media:{qc:Sa.Ie,vc:!0,inputs:["mobile_media_start"],
Ac:!0,Bc:50,Nc:!1,Dc:rb},prepare_nla:{qc:Sa.Ie,vc:!1,inputs:["mobile_media_start"],Ac:!1,Bc:5,Nc:!0,Dc:V},start_nla:{qc:Sa.Ie,vc:!0,inputs:["prepare_nla"],Ac:!1,Bc:5,Nc:!0,Dc:ab}},e=Sa.gA();e||(e=Sa.XE(),Ob={},mc={},oc={});Ob[e.wg.length]={};return Sa.bF(g,a,b,c,la,d||ob.XD,lb.do_not_load_resources,h,!1)};na.unload=function(a){var b=Sa.gA();if(!b||!b.wg.length||a&&!Sa.EU(b.wg[a]))Z.error("Unable to unload data!");else{if(0==a)Z.log("%cUNLOAD ALL","color: #00a"),wb.cleanup(),Ia.cleanup(),tb.cleanup(),
Ka.cleanup(),Pa.cleanup(),Sa.cleanup(),Ya.cleanup(),Oa.cleanup(),sa.cleanup(),Ic.cleanup(),Yc.cleanup(),nb.cleanup(),cd.cleanup(),ub.cleanup(),G.cleanup(),Bb.cleanup(),Ac.cleanup(),mb.cleanup(),Jc.cleanup(),Xb.cleanup(),mc=null,oc={},Ob=Cb=null,gb=!1;else{Z.log("%cUNLOAD DATA "+a,"color: #00a");Ia.QS(a);b=sa.get_all_objects("ALL",sa.DATA_ID_ALL);for(var c=0;c<b.length;c++){var d=b[c];Db.get_object_data_id(d)!=a&&sa.qp(d,!1,!1,!1)}b=sa.get_all_objects("ALL",a);for(c=b.length-1;0<=c;c--)d=b[c],pb(d),
sa.remove_object(d);b=sa.get_all_objects("ALL",sa.DATA_ID_ALL);for(c=0;c<b.length;c++)sa.qp(b[c],!0,!0,!0)}Ab.cleanup(a);Pb()}};na.BH=pb;na.set_debug_resources_root=function(a){fc=a};na.activate_media=function(){gb||lb.media_auto_activation||(Bb.play(),Bb.pause(),Bb.reset(),Wa(Cb,sa.DATA_ID_ALL,!0),tb.pause(),lb.BA&&tb.zH(),gb=!0)};na.reset=function(){bc=null};na.prefetch=function(a,b,c){var d={load_main:{qc:Sa.kh,vc:!1,inputs:[],Ac:!1,Bc:500,Nc:!1,Dc:D},load_binaries:{qc:Sa.kh,vc:!1,inputs:["load_main"],
Ac:!1,Bc:500,Nc:!1,Dc:N},load_images:{qc:Sa.kh,vc:!1,inputs:["load_main"],Ac:!1,Bc:500,Nc:!1,Dc:ua},preload_sounds:{qc:Sa.kh,vc:!1,inputs:["load_main"],Ac:!1,Bc:500,Nc:!1,Dc:ia}},h=Sa.gA();h||(h=Sa.XE(),Ob={},mc={},oc={});Ob[h.wg.length]={};return Sa.bF(d,a,b,c,la,!1,lb.do_not_load_resources,!1,!0)};na.unfetch=function(){G.rN()}});w.a=f},function(D,w,f){D=f(0);var M=f(5),U=f(4),n=f(35),z=f(91),e=f(1),m=f(23),C=f(2),v=f(48),q=f(37);f=Object(D.a)("__assets",function(f,y){function a(){return A.sG()?
b4w.require(A.Nf.nu).data:null}function r(){var b={Vt:null,VL:function(a){switch(b.responseType){case "json":case "text":return a;case "arraybuffer":a=atob(a);for(var c=a.length,d=new Int8Array(c),g=0;g<c;g++)d[g]=a.charCodeAt(g);return d.buffer;default:return a}},status:0,readyState:0,response:"",responseType:"",onreadystatechange:null,overrideMimeType:function(){},addEventListener:function(){},open:function(a,c){b.Vt=c;b.readyState=1},send:function(){b.status=404;b.readyState=4;var c=a();c&&b.Vt in
c&&(b.status=200,c[b.Vt]&&(b.response=b.VL(c[b.Vt])));if("[object Function]"==={}.toString.call(b.onreadystatechange))b.onreadystatechange()}};return b}function k(a){for(var d=0,e=0;e<a.length;e++){var k=a[e];20===k.state&&d++;if(d>=W.VR)break;if(10===k.state)switch(k.state=20,d++,k.type){case y.AT_JSON_ZIP:case y.AT_ARRAYBUFFER:case y.AT_ARRAYBUFFER_ZIP:c(k,"arraybuffer");break;case y.AT_JSON:c(k,"json");break;case y.AT_TEXT:c(k,"text");break;case y.AT_AUDIOBUFFER:l(k);break;case y.AT_IMAGE_ELEMENT:b(k);
break;case y.AT_AUDIO_ELEMENT:g(k);break;case y.AT_VIDEO_ELEMENT:E(k);break;case y.AT_SEQ_VIDEO_ELEMENT:w(k);break;default:K.va("Wrong asset type: "+k.type)}}}function c(b,c){var d=b.url.split("?v=")[0];if(d in P)"json"==c?b.Cc(C.O(P[d]),b.id,b.type,b.url,b.param):b.Cc(P[d],b.id,b.type,b.url,b.param);else{var g=a(),e=g&&b.url in g?new r:new XMLHttpRequest;g=null;if("GET"==b.request_method)e.open("GET",b.url,!0);else if("POST"==b.request_method)switch(e.open("POST",b.url,!0),b.type){case y.AT_TEXT:g=
"text/plain";break;case y.AT_JSON:g="application/json"}if(b.overwrite_header)for(var k in b.overwrite_header)"Content-Type"==k?g=b.overwrite_header[k]:e.setRequestHeader(k,b.overwrite_header[k]);g&&e.setRequestHeader("Content-Type",g);"text"==c?(e.overrideMimeType("text/plain"),e.responseType="text"):"json"==c?(e.overrideMimeType("application/json"),e.responseType="text"):e.responseType=c;e.onreadystatechange=function(){if(40!=b.state&&4==e.readyState){if(200==e.status||0==e.status){var a=e.response;
if(!a||"arraybuffer"==c&&0==a.byteLength)L.error("empty responce when trying to get "+b.url),b.Cc(null,b.id,b.type,b.url,b.param);else{switch(b.type){case y.AT_JSON_ZIP:try{a=z.a(a,{to:"string"})}catch(N){L.error(N+" (parsing gzipped file "+b.url+")");b.Cc(null,b.id,b.type,b.url,b.param);return}case y.AT_JSON:try{a=JSON.parse(a,b.mR)}catch(N){L.error(N+" (parsing JSON "+b.url+")");b.Cc(null,b.id,b.type,b.url,b.param);return}break;case y.AT_ARRAYBUFFER_ZIP:try{a=z.a(a).buffer}catch(N){L.error(N+" (parsing gzipped file "+
b.url+")");b.Cc(null,b.id,b.type,b.url,b.param);return}}b.jf&&(P[d]=b.type==y.AT_JSON||b.type==y.AT_JSON_ZIP?C.O(a):a);b.Cc(a,b.id,b.type,b.url,b.param)}}else L.error(e.status+" when trying to get "+b.url),b.Cc(null,b.id,b.type,b.url,b.param);b.state=30}};e.addEventListener("progress",function(a){a.lengthComputable&&b.EH(a.loaded/a.total)},!1);e.send(b.post_data)}}function l(b){var c=b.url.split("?v=")[0];if(c in H)b.Cc(H[c],b.id,b.type,b.url,b.param),b.state=30;else{"GET"!=b.request_method&&K.va("Unsupported request type for audio buffer");
var g=(c=a())&&b.url in c?new r:new XMLHttpRequest;g.open("GET",b.url,!0);g.responseType="arraybuffer";g.onreadystatechange=function(){if(40!=b.state&&4==g.readyState)if(200==g.status||0==g.status){var a=g.response;a?ha.UO(a,function(a){b.Cc(a,b.id,b.type,b.url,b.param);b.state=30;b.jf&&(H[b.url.split("?v=")[0]]=a)},function(){L.error("failed to decode "+b.url);b.Cc(null,b.id,b.type,b.url,b.param);b.state=30}):(L.error("empty responce when trying to get "+b.url),b.Cc(null,b.id,b.type,b.url,b.param),
b.state=30)}else L.error(g.status+" when trying to get "+b.url),b.Cc(null,b.id,b.type,b.url,b.param),b.state=30};g.send()}}function b(b){var c=b.url.split("?v=")[0];if(c in p)b.Cc(p[c],b.id,b.type,b.url,b.param),b.state=30;else{"GET"!=b.request_method&&K.va("Unsupported request type for image element");var g=document.createElement("img");J.allow_cors&&(g.crossOrigin="Anonymous");g.onload=function(){40!=b.state&&(b.Cc(g,b.id,b.type,b.url,b.param),b.state=30,b.jf&&(p[b.url.split("?v=")[0]]=g))};g.addEventListener("error",
function(){40!=b.state&&(L.error("could not load image: "+b.url),b.Cc(null,b.id,b.type,b.url,b.param),b.state=30)},!1);if((c=a())&&b.url in c)if(c[b.url]){var e=F(b.url);g.src="data:"+e+";base64,"+c[b.url]}else ca.is_ie11()?(c=document.createEvent("CustomEvent"),c.initCustomEvent("error",!1,!1,null)):c=new CustomEvent("error"),g.dispatchEvent(c);else g.src=b.url}}function g(b){var c=b.url.split("?v=")[0];if(c in da)b.Cc(da[c],b.id,b.type,b.url,b.param),b.state=30;else{"GET"!=b.request_method&&K.va("Unsupported request type for audio element");
var g=document.createElement("audio");J.allow_cors&&(g.crossOrigin="Anonymous");g.addEventListener("loadeddata",function(){40!=b.state&&(b.Cc(g,b.id,b.type,b.url,b.param),b.state=30,b.jf&&(da[b.url.split("?v=")[0]]=g))},!1);g.addEventListener("error",function(){40!=b.state&&(L.error("could not load sound: "+b.url),b.Cc(null,b.id,b.type,b.url,b.param),b.state=30)},!1);g.addEventListener("stalled",function(){40!=b.state&&(L.error("could not load sound: "+b.url),b.Cc(null,b.id,b.type,b.url,b.param),
b.state=30)},!1);if((c=a())&&b.url in c)if(c[b.url]){var e=R(b.url);g.src="data:"+e+";base64,"+c[b.url];40!=b.state&&(b.Cc(g,b.id,b.type,b.url,b.param),b.state=30)}else ca.is_ie11()?(c=document.createEvent("CustomEvent"),c.initCustomEvent("error",!1,!1,null)):c=new CustomEvent("error"),g.dispatchEvent(c);else g.src=b.url,J.is_mobile_device&&g.load();J.aB&&(g.autoplay=!0,g.pause());setTimeout(function(){g.Ey=1},5E3)}}function E(b){function c(){40!=b.state&&(L.error("could not load video: "+b.url,b.param),
b.Cc(null,b.id,b.type,b.url),b.state=30)}var g=b.url.split("?v=")[0];if(g in p)b.Cc(p[g],b.id,b.type,b.url,b.param),b.state=30;else{"GET"!=b.request_method&&K.va("Unsupported request type for video element");var e=document.createElement("video");e.muted=!0;J.allow_cors&&(e.crossOrigin="Anonymous");e.addEventListener("loadeddata",function(){e.removeEventListener("error",c,!1);40!=b.state&&(b.Cc(e,b.id,b.type,b.url,b.param),b.state=30,b.jf&&(p[b.url.split("?v=")[0]]=e))},!1);e.addEventListener("error",
c,!1);if((g=a())&&b.url in g)if(g[b.url]){var k=O(b.url);e.src="data:"+k+";base64,"+g[b.url];40!=b.state&&e.addEventListener("loadeddata",function(){b.Cc(e,b.id,b.type,b.url,b.param);b.state=30},!1)}else ca.is_ie11()?(g=document.createEvent("CustomEvent"),g.initCustomEvent("error",!1,!1,null)):g=new CustomEvent("error"),e.dispatchEvent(g);else e.src=b.url,J.is_mobile_device&&e.load();if(J.aB||J.pG)e.autoplay=!0,e.pause();setTimeout(function(){e.Ey=1},1E4)}}function w(b){function c(a){b.Cc(a,b.id,
b.type,b.url,b.param);b.state=30;b.jf&&(p[b.url.split("?v=")[0]]=a)}var g=b.url.split("?v=")[0];if(g in p)b.Cc(p[g],b.id,b.type,b.url,b.param),b.state=30;else{"GET"!=b.request_method&&K.va("Unsupported request type for seq video element");var e=(g=a())&&b.url in g?new r:new XMLHttpRequest;e.open("GET",b.url,!0);e.responseType="arraybuffer";e.onreadystatechange=function(){if(40!=b.state&&4==e.readyState)if(200==e.status||0==e.status){var a=e.response;a?u(a,c):(L.error("empty responce when trying to get "+
b.url),b.Cc(null,b.id,b.type,b.url,b.param),b.state=30)}else L.error(e.status+" when trying to get "+b.url),b.Cc(null,b.id,b.type,b.url,b.param),b.state=30};e.addEventListener("progress",function(a){a.lengthComputable&&b.EH(a.loaded/a.total)},!1);e.send()}}function u(a,b){var c=new Int32Array(a);a=new Int8Array(a);for(var d=c[3],g={images:[],eE:[],zh:c[4]},e=20,k=0;k<d;k++){var f=c[e/4],l=new Blob([a.subarray(e+4,e+4+f)],{type:"image/jpg"}),p=document.createElement("img");p.src=window.URL.createObjectURL(l);
g.images.push(p);g.eE.push(l);e+=f+8-f%4}p.onload=function(){for(var a=0;a<g.images.length;a++)window.URL.revokeObjectURL(g.images[a].src);delete g.eE;b(g)}}function F(a){var b="image";switch(v.a(a).toLowerCase()){case "jpeg":case "jpg":b+="/jpeg";break;case "png":b+="/png"}return b}function R(a){var b="audio";switch(v.a(a).toLowerCase()){case "ogv":case "ogg":b+="/ogg";break;case "mp3":b+="/mpeg";break;case "m4v":case "mp4":b+="/mp4";break;case "webm":b+="/webm"}return b}function O(a){var b="video";
switch(v.a(a).toLowerCase()){case "ogv":b+="/ogg";break;case "webm":b+="/webm";break;case "m4v":case "mp4":b+="/mp4"}return b}var K=Object(M.a)(f),A=Object(U.a)(f),ca=Object(n.a)(f),L=Object(e.a)(f),ha=Object(m.a)(f),J=A.wa,W=A.se;y.AT_ARRAYBUFFER=10;y.AT_ARRAYBUFFER_ZIP=20;y.AT_JSON=30;y.AT_JSON_ZIP=40;y.AT_TEXT=50;y.AT_AUDIOBUFFER=60;y.AT_IMAGE_ELEMENT=70;y.AT_AUDIO_ELEMENT=80;y.AT_VIDEO_ELEMENT=90;y.AT_SEQ_VIDEO_ELEMENT=100;var B=[],ba=0,I={},P={},p={},da={},H={};y.Gx=function(a){a=a.split(".");
var b=Array(2);b[0]=a.slice(0,-1).join(".");b[1]=String(a.slice(-1));return b};y.FX=function(a){if(I[a])return I[a];var b=W.prevent_caching?a+"?v="+Object(q.c)():a,c=new XMLHttpRequest;c.overrideMimeType("text/plain");c.open("GET",b,!1);c.send(null);if(200==c.status||0==c.status){b=c.responseText;if(b.length)return I[a]=b;K.va("Error XHR: responce is empty, GET "+a)}else K.va("Error XHR: "+c.status+", GET "+a)};y.cleanup=function(){for(var a=0;a<B.length;a++)B[a].state=40;B=[];ba=0;I={}};y.enqueue=
function(b,c,g,e,f){for(var d=0;d<b.length;d++){var l=b[d];l={id:l.id,type:l.type,url:l.url,jf:l.jf,request_method:l.request_method?l.request_method:"GET",overwrite_header:l.overwrite_header?l.overwrite_header:null,post_data:l.post_data?l.post_data:null,param:l.param?l.param:null,state:10,Cc:c||function(){},uH:g||function(){},EH:e||function(){},mR:f||null,vH:ba};if(W.prevent_caching){var p=a();p&&l.url in p||(l.url+="?v="+Object(q.c)())}B.push(l)}k(B);ba++};y.update=function(){k(B);for(var a=B,b=
0,c=!0,g=0;g<a.length;g++){var e=a[g];e.vH===a[b].vH?30!==e.state&&(c=!1):(c&&(a[g-1].uH(),c=g-b,a.splice(b,c),g-=c),b=g,c=30===a[g].state?!0:!1);g===a.length-1&&c&&(e=a[g],a.splice(b),e.uH())}};y.iN=function(a){return"png"==a||"jpg"==a||"jpeg"==a||"gif"==a||"bmp"==a||"dds"==a||"pvr"==a?!0:!1};y.rN=function(){P={};p={};da={};H={}}});w.a=f},function(D,w,f){D=f(0);var M=f(5),U=f(4),n=f(1),z=f(17),e=f(2);f=Object(D.a)("__debug_check",function(f,C){function m(a){return-1<navigator.userAgent.toLowerCase().indexOf(a)?
!0:!1}var q=Object(M.a)(f),r=Object(U.a)(f),y=Object(n.a)(f),a=Object(z.a)(f),T=r.wa,k=-1,c=-1,l=null,b=[];C.fh=function(a){for(var c="INVALID_ENUM INVALID_VALUE INVALID_OPERATION OUT_OF_MEMORY INVALID_FRAMEBUFFER_OPERATION CONTEXT_LOST_WEBGL".split(" "),g=0;g<c.length;g++){var e=c[g];e in a&&(b[a[e]]=e)}l=a};C.YW=function(a){switch(a.toLowerCase()){case "chrome":return m("mozilla")&&m("applewebkit")&&m("chrome");case "firefox":return m("mozilla")&&m("gecko")&&m("firefox");case "msie":return m("mozilla")&&
m("trident")&&m("msie");case "opera":return m("opera")&&m("presto");case "safari":return m("mozilla")&&m("applewebkit")&&m("safari")&&!m("chrome");default:return!1}};C.xP=function(a){if(e._16(a)){for(var b=0;b<a.length;b++)if(!isFinite(a[b]))return!1;return!!a.length}return isFinite(a)?!0:!1};C.nA=function(a){if(T.gl_debug){var c=l.getError();c!=l.NO_ERROR&&(c in b?q.va("GL Error: "+c+", gl."+b[c]+" ("+a+")"):q.va("Unknown GL error: "+c+" ("+a+")"))}};C.LM=function(){if(T.gl_debug||T.sE)switch(l.checkFramebufferStatus(l.FRAMEBUFFER)){case l.FRAMEBUFFER_COMPLETE:break;
case l.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:y.error("Incomplete framebuffer: FRAMEBUFFER_INCOMPLETE_ATTACHMENT");break;case l.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:y.error("Incomplete framebuffer: FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT");break;case l.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:y.error("Incomplete framebuffer: FRAMEBUFFER_INCOMPLETE_DIMENSIONS");break;case l.FRAMEBUFFER_UNSUPPORTED:y.error("Incomplete framebuffer: FRAMEBUFFER_UNSUPPORTED");break;case l.FRAMEBUFFER_INCOMPLETE_MULTISAMPLE:y.error("Incomplete framebuffer: FRAMEBUFFER_INCOMPLETE_MULTISAMPLE");
break;default:y.error("FRAMEBUFFER CHECK FAILED")}};C.WO=function(){if(-1!=c)return c;var b=l.createFramebuffer();l.bindFramebuffer(l.FRAMEBUFFER,b);var e=a.Sj(a.om,!1);a.resize(e,1,1);l.framebufferTexture2D(l.FRAMEBUFFER,l.DEPTH_ATTACHMENT,e.Vb,e.hc,0);l.checkFramebufferStatus(l.FRAMEBUFFER)!=l.FRAMEBUFFER_COMPLETE?(c=!0,y.warn("depth-only issue was found")):c=!1;l.bindFramebuffer(l.FRAMEBUFFER,null);l.deleteFramebuffer(b);return c};C.eS=function(){if(1==T.Jc)return!1;if(-1!=k)return k;l.bindRenderbuffer(l.RENDERBUFFER,
l.createRenderbuffer());l.renderbufferStorageMultisample(l.RENDERBUFFER,T.Jc,l.RGBA8,1,1);var a=l.getRenderbufferParameter(l.RENDERBUFFER,l.RENDERBUFFER_SAMPLES);a!=T.Jc?(k=!0,y.warn("multisample issue was found: requested "+T.Jc+", got "+a),l.getError()==l.INVALID_OPERATION&&y.warn("the error from multisample issue detected, ignoring")):k=!1;l.bindRenderbuffer(l.RENDERBUFFER,null);return k};C.sP=function(){return m("firefox")&&l.getError()==l.OUT_OF_MEMORY?(y.warn("Firefox/old GPUs cubemap issue was found."),
!0):!1};C.reset=function(){l=null}});w.a=f},function(D,w,f){D=f(0);D=Object(D.a)("__debug_subscene",function(f,w){w.DV_NONE=0;w.DV_OPAQUE_WIREFRAME=1;w.DV_TRANSPARENT_WIREFRAME=2;w.DV_FRONT_BACK_VIEW=3;w.DV_BOUNDINGS=4;w.DV_CLUSTERS_VIEW=5;w.DV_BATCHES_VIEW=6;w.DV_RENDER_TIME=7;var n=null;w.vT=function(f){n=f};w.eQ=function(){return n};w.cleanup=function(){n=null}});w.a=D},function(D,w,f){D=f(0);var M=f(5),U=f(4),n=f(16),z=f(31),e=f(20),m=f(36),C=f(17),v=f(18),q=f(6),r=f(2),y=f(3);f=Object(D.a)("__particles",
function(a,f){function k(){g.va("_rand() undefined")}function c(a,b){return{name:a,Mw:b,time:0,Tw:-1,gq:!1,ro:1,sb:0,$b:0,Yx:0,cs:0,fw:0,cyclic:0,mf:0,jp:0,Cv:0,Yj:0,Gf:0,By:0,size:0,Yt:0,Xt:0,xu:0,wu:new Float32Array(16),Bw:!1,positions:null,zs:null,Tx:null,et:null,xo:null,qr:null,Co:null,Lw:null,Wx:0,Xx:0}}function l(a,b,c,g,e,k){var f=a.xo,l=a.Co,n=a.time;a=a.Tw;for(var t=0;t<f.length;t+=4){var d=f[t];n>a&&n>=d&&d>a||n<a&&(d>a||n>=d)?(q.u(g,l,t),q.a(g,ca)):q.f(l,t,ca);d=L;d[0]=b[3*t];d[1]=b[3*
t+1];d[2]=b[3*t+2];q.D(d,ca,d);e[3*t]=d[0];e[3*t+1]=d[1];e[3*t+2]=d[2];d=m.e(c,t,A);m.m(d,ca,d);m.n(k,d,t);for(var u=1;4>u;u++)e[3*(t+u)]=e[3*t],e[3*(t+u)+1]=e[3*t+1],e[3*(t+u)+2]=e[3*t+2],m.n(k,d,t+u)}}function b(a){a?(u.pU(a),k=function(){return u.NS()}):k=function(){return Math.random()}}var g=Object(M.a)(a),E=Object(U.a)(a),w=Object(n.a)(a),u=Object(z.a)(a),F=Object(e.a)(a),R=Object(C.a)(a),O=Object(v.a)(a),T=E.wa,A=m.c(),ca=q.b(),L=new Float32Array(3),ha=[];f.JE=function(a){var b=c(a.name,a.type);
b.time=a.time;b.Tw=a.Tw;b.gq=a.gq;b.ro=a.ro;b.sb=a.sb;b.$b=a.$b;b.Yx=a.Yx;b.cs=a.cs;b.fw=a.fw;b.cyclic=a.cyclic;b.mf=a.mf;b.jp=a.jp;b.Cv=a.Cv;b.Yj=a.Yj;b.Gf=a.Gf;b.By=a.By;b.size=a.size;b.Yt=a.Yt;b.Xt=a.Xt;b.xu=a.xu;b.wu.set(a.wu);b.Bw=a.Bw;b.positions=r.O(a.positions);b.zs=r.O(a.zs);b.Tx=r.O(a.Tx);b.et=r.O(a.et);b.xo=r.O(a.xo);b.qr=r.O(a.qr);b.Co=r.O(a.Co);b.Lw=r.O(a.Lw);b.Wx=a.Wx;b.Xx=a.Xx;return b};f.update=function(){for(var a=0;a<ha.length;a++)for(var b=ha[a],c=b.Aa,g=0;g<c.length;g++)for(var e=
b,k=c[g].Ia,f=0;f<k.length;f++){var m=k[f],n=m.tb;n&&n.gq&&!m.yh&&(l(n,n.positions,n.Tx,e.ka.na,n.zs,n.et),n.Bw=!0)}};f.lB=function(a){a=a.Aa;for(var b=0;b<a.length;b++)for(var c=a[b].Ia,g=0;g<c.length;g++)if(c[g].tb)return!0;return!1};f.mB=function(a,b){a=a.Aa;for(var c=0;c<a.length;c++)for(var g=a[c].Ia,e=0;e<g.length;e++){var k=g[e].tb;if(k&&k.name==b)return!0}return!1};f.oH=function(a){a=a.Aa;for(var b=0;b<a.length;b++)for(var c=a[b].Ia,g=0;g<c.length;g++){var e=c[g].tb;if(e&&"EMITTER"==e.Mw)return!0}return!1};
f.OM=function(a){return 0<a.particle_systems.length};f.NM=function(a){for(var b=0;b<a.particle_systems.length;b++)if("EMITTER"==a.particle_systems[b].settings.type)return!0;return!1};f.MQ=function(a){for(var b=0;b<a.particle_systems.length;b++){var c=a.particle_systems[b].settings;if("HAIR"==c.type&&c.b4w_dynamic_grass)return!0}return!1};f.ZN=function(a,b,g){var e=a.tb=c(b.name,b.settings.type);e.sb=b.settings.frame_start;e.$b=b.settings.frame_end;e.Yx=(e.$b-e.sb)/O.ke();e.cs=b.settings.lifetime;
e.fw=e.cs/O.ke();e.cyclic=b.settings.b4w_cyclic?1:0;e.mf=b.settings.mass;e.jp=b.settings.normal_factor;e.Cv=9.81*b.settings.effector_weights.gravity;e.Yj=b.settings.b4w_fade_in/O.ke();e.Gf=b.settings.b4w_fade_out/O.ke();e.By=b.settings.effector_weights.wind;e.gq="WORLD"==b.settings.b4w_coordinate_system?!0:!1;if(a.Pr){var k=g.Oo.size;var f=g.Oo.Qr;if(30>f){f=.5;var l=.9}else 40>f?(f=.1,l=1):50>f?(f=0,l=.8):(f=0,l=.5)}else k=b.settings.particle_size,l=f=1;e.size=k;e.Yt=f;e.Xt=l;g.jh&&"BILLBOARD"==
b.settings.render_type&&(w.dc(a,"NODES",1),w.dc(a,"PARTICLE_BATCH",1),a.bc=!0);b=b.settings.texture_slots;b[0]&&b[0].use_map_size&&b[0].texture&&"BLEND"==b[0].texture.type&&b[0].texture.use_color_ramp&&T.Wt&&(b=b[0].texture,k=[],R.UM(b.color_ramp,R.vD,k),k=new Uint8Array(k.map(function(a){return r.M(255*a,0,255)})),k=R.VE(k,R.vD),w.ai(a,k,"u_color_ramp_tex",b.name),w.dc(a,"USE_COLOR_RAMP",1));g=g.hh;a=[-1,0,0,0,-1,0,0,0,-1,0,0,0,-1,0,0,0];if(g[0]&&"STRAND"==g[0].texture_coords&&g[0].texture&&"BLEND"==
g[0].texture.type&&g[0].texture.use_color_ramp){g=g[0].texture.color_ramp.elements;b=Math.min(4*g.length,a.length);for(k=0;k<b;k+=4)f=g[k/4],a[k]=f.position,a[k+1]=f.color[0],a[k+2]=f.color[1],a[k+3]=f.color[2];e.xu=g.length}e.wu.set(a)};f.IP=function(a,c,e,f){var n=a.tb,u=f.na;f=e.settings.count;var p=e.settings.frame_start/O.ke(),v=e.settings.frame_end/O.ke(),B=e.settings.lifetime/O.ke(),t=e.settings.lifetime_random,d=e.settings.emit_from,E=e.settings.factor_random;if(e.settings.use_rotations)var z=
e.settings.angular_velocity_mode,C=e.settings.angular_velocity_factor;else z="NONE",C=0;var ba=e.settings.b4w_randomize_emission,J=e.settings.b4w_cyclic;n.Wx=e.settings.billboard_tilt;n.Xx=e.settings.billboard_tilt_random;b(e.seed);c=F.zF(c,["a_position","a_tbn"],null);switch(d){case "VERT":var w=c.Va[0].a_position;var R=c.Va[0].a_tbn;e=w.length/3;c=[];for(d=0;d<f;d++){var T=Math.round((e-1)*k());c.push(T);c.push(T);c.push(T);c.push(T)}e=[];for(d=0;d<c.length;d++)e.push(w[3*c[d]]),e.push(w[3*c[d]+
1]),e.push(w[3*c[d]+2]);w=new Float32Array(e);e=m.c(c.length);for(d=0;d<c.length;d++)T=m.e(R,c[d],A),m.n(e,T,d);R=e;break;case "FACE":w=[];R=[];r._13(0,R);e=F.Zz(c,f,!1,R);r._13(0,R);c=F.Zz(c,f,!0,R);R=m.c(4*e.length);for(d=0;d<e.length;d++)w.push(e[d][0],e[d][1],e[d][2]),w.push(e[d][0],e[d][1],e[d][2]),w.push(e[d][0],e[d][1],e[d][2]),w.push(e[d][0],e[d][1],e[d][2]),m.n(R,c[d],4*d),m.n(R,c[d],4*d+1),m.n(R,c[d],4*d+2),m.n(R,c[d],4*d+3);w=new Float32Array(w);break;case "VOLUME":g.va("Particle emission from volume is not supported");
break;default:g.va("Wrong emit from option")}R=[w,R];w=R[0];R=R[1];n.positions=new Float32Array(w);n.Tx=new Float32Array(R);n.zs=new Float32Array(w.length);n.et=new Float32Array(R.length);c=[];v=(v-p)/f;for(e=0;e<f;e++)d=ba?v*e+10*v*(.5-k()):v*e,J||(d+=p),c.push(d),c.push(d),c.push(d),c.push(d);p=new Float32Array(c);n.xo=new Float32Array(p);n.qr=new Float32Array(p);if(n.gq){n.Co=new Float32Array(p.length*ca.length);for(ba=0;ba<8*p.length;ba++)q.u(u,n.Co,ba);l(n,w,R,u,w,R)}u=F.Hh("EMITTER_PARTICLES");
ba=F.Si();ba.a_position=w;ba.a_tbn=R;u.Va[0]=ba;a.gi=F.Ht;a=[];for(ba=0;ba<f;ba++)a.push(4*ba,4*ba+2,4*ba+1,4*ba,4*ba+3,4*ba+2);a=new Uint16Array(a);u.ab=a;u.hb.a_p_bb_vertex=F.GF(f);u.Gb=w.length/3;a=[];t=B*t;for(ba=0;ba<f;ba++)J=t*k(),a.push(B-J),a.push(B-J),a.push(B-J),a.push(B-J);B=u.hb;t=[];for(ba=0;ba<f;ba++)J=Math.random(),t.push(a[4*ba],p[4*ba],J),t.push(a[4*ba+1],p[4*ba+1],J),t.push(a[4*ba+2],p[4*ba+2],J),t.push(a[4*ba+3],p[4*ba+3],J);t=new Float32Array(t);B.a_p_data=t;B=u.hb;t=[];for(a=
0;a<f;a++){p=[k()-.5,k()-.5,k()-.5];y.normalize(p,p);t.push(E*p[0]);t.push(E*p[1]);t.push(E*p[2]);switch(z){case "NONE":t.push(0);break;case "SPIN":case "VELOCITY":t.push(C);break;case "RAND":t.push(2*C*(k()-.5));break;default:g.va("Undefined velocity factor")}p=t.slice(-4);for(ba=0;12>ba;ba++)t.push(p[ba%4])}f=new Float32Array(t);B.a_p_vels=f;n.Lw=new Float32Array(u.hb.a_p_data);return u};f.PT=function(a,b,c){a=a.Aa;for(var g=0;g<a.length;g++)for(var e=a[g].Ia,k=0;k<e.length;k++){var f=e[k].tb;f&&
f.name==b&&!e[k].yh&&(f.Tw=f.time,f.time=c)}};f.set_size=function(a,b,c){a=a.Aa;for(var g=0;g<a.length;g++)for(var e=a[g].Ia,k=0;k<e.length;k++){var f=e[k].tb;f&&f.name==b&&(f.size=c)}};f.set_normal_factor=function(a,b,c){a=a.Aa;for(var g=0;g<a.length;g++)for(var e=a[g].Ia,k=0;k<e.length;k++){var f=e[k].tb;f&&f.name==b&&(f.jp=c)}};f.DX=function(a,b){a=a.Aa;for(var c=0;c<a.length;c++)for(var g=a[c].Ia,e=0;e<g.length;e++){var k=g[e].tb;if(k&&k.name==b)return k.jp}return 0};f.set_factor=function(a,b,
c){a=a.Aa;for(var g=0;g<a.length;g++)for(var e=a[g].Ia,k=0;k<e.length;k++){var f=e[k],l=f.tb;if(l&&l.name==b){l.ro=c;var m=l.xo;if(1==c)var t=m;else if(0==c){t=l.qr;for(var d=0;d<t.length;d+=4)t[d]=1E4,t[d+1]=t[d],t[d+2]=t[d],t[d+3]=t[d]}else{var n=4/c;t=l.qr;var u=0;for(d=0;d<t.length;d+=4)d>=u?(t[d]=m[d],u+=n):t[d]=1E4,t[d+1]=t[d],t[d+2]=t[d],t[d+3]=t[d]}f=f.$a;if(f.mc.a_p_data){l=l.Lw;for(d=0;d<l.length;d+=3)l[d+1]=t[Math.round(d/3)];F.aJ(f,"a_p_data",3,l)}}}};f.pV=function(){var a=q.b();return function(b,
c,g,e){b=b.Aa;q.v(c,a);q.s(g,a);c=q.r(e,a);for(g=0;g<b.length;g++){e=b[g].Ia;for(var k=0;k<e.length;k++){var f=e[k].tb;if(f&&f.gq)for(var l=0;l<8*f.xo.length;l++)q.u(c,f.Co,l)}}}}();f.fV=function(a,b,c){a.hb.a_tbn=m.c(4*c);m.i(a.hb.a_tbn);if(b.rs){for(var g=[],e=0;e<c;e++)g.push(e,e,e,e);a.hb[b.rs.name]=new Float32Array(g)}};f.eV=function(a){-1==ha.indexOf(a)&&ha.push(a)};f.SS=function(a){a=ha.indexOf(a);-1!=a&&ha.splice(a,1)};f.cleanup=function(){ha.length=0}});w.a=f},function(D,w){function f(f){if(""==
f)return".";var w=0==f.indexOf("/")|0;w&&0==f.indexOf("//")&&0!=f.indexOf("///")&&(w=2);f=f.split("/");for(var n=[],z=0;z<f.length;z++){var e=f[z];""!=e&&"."!=e&&(".."!=e||!w&&!n.length||n.length&&".."==n[n.length-1]?n.push(e):n.length&&n.pop())}f=n.join("/");for(z=0;z<w;z++)f="/"+f;return f||"."}w.b=function(w){var D=w.split("://",2);return 1<D.length?(D[1]=f(D[1]),D.join("://")):f(w)};w.a=function(f){return/(?:\.([^.]+))?$/.exec(f)[1]}},function(D,w,f){D=f(0);var M=f(39),U=f(14),n=f(4),z=f(15),
e=f(9),m=f(1),C=f(10),v=f(7);f=Object(D.a)("input",function(f,r){function q(e){b.ef("enable_split_screen","screen.request_split_screen");var k=a.get_device_by_type_element(a.DEVICE_HMD);if(!k)return!1;if(u)return!0;var f=a.get_vector_param(k,a.aD,E),m=a.get_vector_param(k,a.bD,ea);w.set_hmd_fov(e,f,m);if(f=a.get_value_param(k,O))m=g.get_active(),e=l.kb(e,m).Qa,w.set_eye_distance(e,f);e={base_line_factor:.5,inter_lens_factor:.5,enable_hmd_stereo:!0};a.get_value_param(k,a.HMD_WEBVR_TYPE)&(a.HMD_NON_WEBVR|
a.HMD_WEBVR_MOBILE|a.HMD_WEBVR_DESKTOP)&&(e.distortion_coefs=[k.distortion_coefs[0],k.distortion_coefs[1]],e.chromatic_aberration_coefs=[k.chromatic_aberration_coefs[0],k.chromatic_aberration_coefs[1],k.chromatic_aberration_coefs[2],k.chromatic_aberration_coefs[3]],k.Vn||(k.Ki&&k.aj&&k.Li?e.base_line_factor=(k.Ki-k.Li)/k.aj:k.Li||(e.base_line_factor=k.Ki/k.aj)),k.ki&&k.mm&&!k.Vn&&(e.inter_lens_factor=k.ki/k.mm),F.enabled||(f=1+k.distortion_coefs[0]+k.distortion_coefs[1],g.Aw(f,f)));g.set_hmd_params(e);
c.resize_to_container(!0);a.reset_device(k);return u=!0}var a=Object(M.a)(f),w=Object(U.a)(f),k=Object(n.a)(f),c=Object(z.a)(f),l=Object(e.a)(f),b=Object(m.a)(f),g=Object(C.a)(f),E=v.create(),ea=v.create(),u=!1,F=k.Lm,R=k.wa;r.GMPD_BUTTON_12=a.GMPD_BUTTON_12;r.GMPD_BUTTON_13=a.GMPD_BUTTON_13;r.GMPD_BUTTON_15=a.GMPD_BUTTON_15;r.GMPD_BUTTON_14=a.GMPD_BUTTON_14;r.GMPD_BUTTON_3=a.GMPD_BUTTON_3;r.GMPD_BUTTON_0=a.GMPD_BUTTON_0;r.GMPD_BUTTON_1=a.GMPD_BUTTON_1;r.GMPD_BUTTON_2=a.GMPD_BUTTON_2;r.GMPD_BUTTON_5=
a.GMPD_BUTTON_5;r.GMPD_BUTTON_7=a.GMPD_BUTTON_7;r.GMPD_BUTTON_4=a.GMPD_BUTTON_4;r.GMPD_BUTTON_6=a.GMPD_BUTTON_6;r.GMPD_BUTTON_8=a.GMPD_BUTTON_8;r.GMPD_BUTTON_9=a.GMPD_BUTTON_9;r.GMPD_BUTTON_10=a.GMPD_BUTTON_10;r.GMPD_BUTTON_11=a.GMPD_BUTTON_11;r.GMPD_BUTTON_16=a.GMPD_BUTTON_16;r.GMPD_BUTTON_17=a.GMPD_BUTTON_17;r.GMPD_BUTTON_18=a.GMPD_BUTTON_18;r.GMPD_BUTTON_19=a.GMPD_BUTTON_19;r.GMPD_BUTTON_20=a.GMPD_BUTTON_20;r.GMPD_BUTTON_21=a.GMPD_BUTTON_21;r.GMPD_BUTTON_22=a.GMPD_BUTTON_22;r.GMPD_BUTTON_23=a.GMPD_BUTTON_23;
r.GMPD_BUTTON_24=a.GMPD_BUTTON_24;r.GMPD_BUTTON_25=a.GMPD_BUTTON_25;r.GMPD_TRACKPAD_BUTTON=a.GMPD_TRACKPAD_BUTTON;r.GMPD_TRIGGER_BUTTON=a.GMPD_TRIGGER_BUTTON;r.GMPD_GRIPS_BUTTON=a.GMPD_GRIPS_BUTTON;r.GMPD_MENU_BUTTON=a.GMPD_MENU_BUTTON;r.GMPD_AXIS_0=a.GMPD_AXIS_0;r.GMPD_AXIS_1=a.GMPD_AXIS_1;r.GMPD_AXIS_2=a.GMPD_AXIS_2;r.GMPD_AXIS_3=a.GMPD_AXIS_3;r.GMPD_AXIS_4=a.GMPD_AXIS_4;r.GMPD_AXIS_5=a.GMPD_AXIS_5;r.GMPD_AXIS_6=a.GMPD_AXIS_6;r.GMPD_AXIS_7=a.GMPD_AXIS_7;r.GMPD_AXIS_8=a.GMPD_AXIS_8;r.GMPD_AXIS_9=
a.GMPD_AXIS_9;r.GMPD_AXIS_10=a.GMPD_AXIS_10;r.GMPD_AXIS_11=a.GMPD_AXIS_11;r.HMD_ORIENTATION_QUAT=a.HMD_ORIENTATION_QUAT;r.HMD_POSITION=a.HMD_POSITION;r.HMD_WEBVR_TYPE=a.HMD_WEBVR_TYPE;r.HMD_WEBVR_DESKTOP=a.HMD_WEBVR_DESKTOP;r.HMD_WEBVR_MOBILE=a.HMD_WEBVR_MOBILE;r.HMD_NON_WEBVR=a.HMD_NON_WEBVR;r.HMD_WEBVR1=a.HMD_WEBVR1;r.HMD_WEBVR1_1=a.HMD_WEBVR1_1;var O=a.HMD_EYE_DISTANCE;r.HMD_EYE_DISTANCE=O;r.HMD_DISTORTION=a.HMD_DISTORTION;r.HMD_BASELINE_DIST=a.HMD_BASELINE_DIST;r.HMD_SCREEN_LENS_DIST=a.HMD_SCREEN_LENS_DIST;
r.HMD_SCREEN_WIDTH=a.HMD_SCREEN_WIDTH;r.HMD_SCREEN_HEIGHT=a.HMD_SCREEN_HEIGHT;r.HMD_BEVEL_SIZE=a.HMD_BEVEL_SIZE;r.MOUSE_LOCATION=a.MOUSE_LOCATION;r.MOUSE_DOWN_WHICH=a.MOUSE_DOWN_WHICH;r.MOUSE_UP_WHICH=a.MOUSE_UP_WHICH;r.MOUSE_WHEEL=a.MOUSE_WHEEL;r.KEYBOARD_UP=a.KEYBOARD_UP;r.KEYBOARD_DOWN=a.KEYBOARD_DOWN;r.TOUCH_START=a.TOUCH_START;r.TOUCH_MOVE=a.TOUCH_MOVE;r.TOUCH_END=a.TOUCH_END;r.GYRO_ORIENTATION_QUAT=a.GYRO_ORIENTATION_QUAT;r.GYRO_ORIENTATION_ANGLES=a.GYRO_ORIENTATION_ANGLES;var K={};K[a.DEVICE_HMD]=
[a.HMD_ORIENTATION_QUAT,a.HMD_POSITION];K[a.DEVICE_MOUSE]=[a.MOUSE_LOCATION];var A={};A[a.DEVICE_HMD]=[a.HMD_WEBVR_TYPE];var ca={};ca[a.DEVICE_MOUSE]=[a.MOUSE_LOCATION,a.MOUSE_DOWN_WHICH,a.MOUSE_UP_WHICH,a.MOUSE_WHEEL];ca[a.DEVICE_KEYBOARD]=[a.KEYBOARD_UP,a.KEYBOARD_DOWN];ca[a.DEVICE_TOUCH]=[a.TOUCH_START,a.TOUCH_MOVE,a.TOUCH_END];ca[a.DEVICE_GYRO]=[a.GYRO_ORIENTATION_QUAT,a.GYRO_ORIENTATION_ANGLES];var L={};L[a.DEVICE_HMD]=[a.HMD_DISTORTION,a.HMD_EYE_DISTANCE,a.HMD_BASELINE_DIST,a.HMD_SCREEN_LENS_DIST,
a.HMD_SCREEN_WIDTH,a.HMD_SCREEN_HEIGHT,a.HMD_BEVEL_SIZE];r.DEVICE_GYRO=a.DEVICE_GYRO;r.DEVICE_HMD=a.DEVICE_HMD;r.DEVICE_MOUSE=a.DEVICE_MOUSE;r.DEVICE_KEYBOARD=a.DEVICE_KEYBOARD;r.DEVICE_TOUCH=a.DEVICE_TOUCH;r.can_use_device=a.can_use_device;r.get_device_by_type_element=a.get_device_by_type_element;r.switch_prevent_default=function(b,c){b&&a.switch_prevent_default(b,c)};r.register_device=function(){b.Ma("input.register_device() deprecated")};r.reset_device=function(c){c&&c.type==a.DEVICE_HMD?a.reset_device(c):
b.error("reset_device is undefined for device.")};r.get_vector_param=function(c,g,e){if(c&&c.type in K&&0<=K[c.type].indexOf(g))return a.get_vector_param(c,g,e);b.error("device hasn't param: ",g);return null};r.get_value_param=function(c,g){if(c&&c.type in A&&0<=A[c.type].indexOf(g))return a.get_value_param(c,g);b.error("device hasn't param: ",g);return null};r.attach_param_cb=function(c,g,e){e=e||null;if(c&&c.type in ca&&0<=ca[c.type].indexOf(g))return a.attach_param_cb(c,g,e);b.error("device hasn't param: ",
g)};r.detach_param_cb=function(c,g,e){e=e||null;if(c&&c.type in ca&&0<=ca[c.type].indexOf(g))return a.detach_param_cb(c,g,e);b.error("device hasn't param: ",g)};r.set_config=function(c,g,e){if(c&&c.type in L&&0<=L[c.type].indexOf(g))return a.set_config(c,g,e);b.error("device hasn't config: ",g)};r.request_fullscreen_hmd=function(){b.ef("request_fullscreen_hmd","screen.request_fullscreen_hmd");if(g.zb()){var e=g.ml(g.get_active());if(e&&(q(e),e=a.get_device_by_type_element(a.DEVICE_HMD))){var k=e.ce;
k&&!k.isPresenting&&(k.capabilities.canPresent?(e=c.get_canvas(),k.requestPresent([{source:e}]).then(function(){if(!R.is_mobile_device){var a=k.getEyeParameters("left"),b=k.getEyeParameters("right");c.resize(2*Math.max(a.renderWidth,b.renderWidth),Math.max(a.renderHeight,b.renderHeight),!1)}},function(){b.error("HMD fullscreen request failed.")})):b.error("HMD fullscreen request failed."))}}};r.enable_split_screen=q;r.disable_split_screen=function(){b.ef("disable_split_screen","screen.exit_split_screen");
var e=a.get_device_by_type_element(a.DEVICE_HMD);if(!u||!e||!e.eh)return!1;g.set_hmd_params({enable_hmd_stereo:!1});e=1/(1+e.distortion_coefs[0]+e.distortion_coefs[1]);g.Aw(e,e);c.resize_to_container(!0);return!0};r.set_gamepad_key=function(b,c,g){switch(b){case 0:b=a.Gt;break;case 1:b=a.Ky;break;case 2:b=a.Ly;break;case 3:b=a.My;break;default:b=a.Gt}b=a.get_device_by_type_element(b);a.set_config(b,c,g)};r.get_pressed_gmpd_btn=a.get_pressed_gmpd_btn;r.get_moved_gmpd_axis=a.get_moved_gmpd_axis;r.get_gamepad_position=
a.get_gamepad_position;r.get_gamepad_orientation=a.get_gamepad_orientation;r.check_enable_gamepad_indices=function(){for(var a=navigator.getGamepads?navigator.getGamepads():navigator.webkitGetGamepads?navigator.webkitGetGamepads:[],b=[],c=0;c<a.length;c++)a[c]&&b.push(c);return b};r.get_vr_controller_id=function(a){for(var b=navigator.getGamepads?navigator.getGamepads():navigator.webkitGetGamepads?navigator.webkitGetGamepads:[],c=0,g=0;4>c;c++){var e=b[c];if(e&&(""==e.id||"OpenVR Gamepad"==e.id||
"Oculus Touch (Left)"==e.id||"Oculus Touch (Right)"==e.id)){if(g==a)return g;g++}}return a};r.add_click_listener=function(b,c){b&&c&&a.add_click_listener(b,c)};r.remove_click_listener=function(b,c){b&&c&&a.remove_click_listener(b,c)}});w.a=f},function(D,w,f){D=f(0);var M=f(14),U=f(15),n=f(4),z=f(51),e=f(39),m=f(79),C=f(9),v=f(1),q=f(10),r=f(7);f=Object(D.a)("screen",function(f,a){function y(){}function k(){}function c(a,b,c){function g(){document.fullscreenElement===a||document.webkitFullscreenElement===
a||document.mozFullScreenElement===a||document.webkitIsFullScreen||document.msFullscreenElement===a?b():(document.removeEventListener("fullscreenchange",g,!1),document.removeEventListener("webkitfullscreenchange",g,!1),document.removeEventListener("mozfullscreenchange",g,!1),document.removeEventListener("MSFullscreenChange",g,!1),c())}a=a||E.get_container();b=b||function(){};c=c||function(){};document.addEventListener("fullscreenchange",g,!1);document.addEventListener("webkitfullscreenchange",g,!1);
document.addEventListener("mozfullscreenchange",g,!1);document.addEventListener("MSFullscreenChange",g,!1);a.JB=a.JB||a.webkitRequestFullScreen||a.mozRequestFullScreen||a.msRequestFullscreen;a.JB?a.JB():K.error("B4W App: request fullscreen method is not supported")}function l(){var a=document.exitFullscreen||document.webkitExitFullscreen||document.mozCancelFullScreen||document.msExitFullscreen;"function"!=typeof a&&K.error("B4W App: exit fullscreen method is not supported");a.apply(document)}function b(a){var b=
F.get_device_by_type_element(F.DEVICE_HMD);if(!b)return!1;if(D)return!0;var c=F.get_value_param(b,F.HMD_WEBVR_TYPE);if(c&F.HMD_WEBVR1_1){var e=b.ce,k=e.getEyeParameters("left");e=e.getEyeParameters("right");E.resize(2*Math.max(k.renderWidth,e.renderWidth),Math.max(k.renderHeight,e.renderHeight),!1)}else k=E.get_canvas(),k=Math.max(2*k.height,k.width),E.resize(k,k/2,!1);k=F.get_vector_param(b,F.aD,ca);e=F.get_vector_param(b,F.bD,L);g.set_hmd_fov(a,k,e,!(c&F.HMD_WEBVR1_1));k={base_line_factor:.5,inter_lens_factor:.5,
enable_hmd_stereo:!0};c&(F.HMD_NON_WEBVR|F.HMD_WEBVR_MOBILE|F.HMD_WEBVR_DESKTOP)&&(k.distortion_coefs=[b.distortion_coefs[0],b.distortion_coefs[1]],k.chromatic_aberration_coefs=[b.chromatic_aberration_coefs[0],b.chromatic_aberration_coefs[1],b.chromatic_aberration_coefs[2],b.chromatic_aberration_coefs[3]],b.Vn||(b.Ki&&b.aj&&b.Li?k.base_line_factor=(b.Ki-b.Li)/b.aj:b.Li||(k.base_line_factor=b.Ki/b.aj)),b.ki&&b.mm&&!b.Vn&&(k.inter_lens_factor=b.ki/b.mm));J.enabled||A.Aw(.5,1);A.set_hmd_params(k);if(b=
F.get_value_param(b,F.HMD_EYE_DISTANCE))c=A.get_active(),a=O.kb(a,c).Qa,g.set_eye_distance(a,b);A.TS();return D=!0}var g=Object(M.a)(f),E=Object(U.a)(f),w=Object(n.a)(f),u=Object(z.a)(f),F=Object(e.a)(f),R=Object(m.a)(f),O=Object(C.a)(f),K=Object(v.a)(f),A=Object(q.a)(f),ca=r.create(),L=r.create(),D=!1,J=w.Lm;a.draw_mixer_strip=u.draw_mixer_strip;a.plot_array=u.plot_array;a.request_fullscreen=c;a.exit_fullscreen=l;a.check_fullscreen=F.check_fullscreen;a.request_fullscreen_hmd=function(a,b,g){if("HMD"!=
!w.get("stereo")||"NONE"==w.get("stereo")&&w.get("is_mobile_device")){var e=F.get_device_by_type_element(F.DEVICE_HMD);if(e&&F.get_value_param(e,F.HMD_WEBVR_TYPE)&F.HMD_WEBVR1){var k=e.ce;k&&!k.isPresenting&&(b=b||function(){},g=g||function(){},y=function(){k.isPresenting?b():(window.removeEventListener("vrdisplaypresentchange",y),g())},window.addEventListener("vrdisplaypresentchange",y,!1),k.capabilities.canPresent?(a=E.get_canvas(),k.requestPresent([{source:a}]).then(function(){},function(){K.error("HMD fullscreen request failed.")})):
K.error("HMD fullscreen request failed."))}else c(a,b,g)}};a.exit_fullscreen_hmd=function(){if("HMD"!=!w.get("stereo")||"NONE"==w.get("stereo")&&w.get("is_mobile_device")){var a=F.get_device_by_type_element(F.DEVICE_HMD);a&&F.get_value_param(a,F.HMD_WEBVR_TYPE)&F.HMD_WEBVR1?(a=a.ce)&&a.isPresenting&&(a.exitPresent(),E.resize_to_container(!0)):l()}};a.check_fullscreen_hmd=function(){var a=F.get_device_by_type_element(F.DEVICE_HMD),b=F.get_value_param(a,F.HMD_WEBVR_TYPE)&F.HMD_WEBVR1;return a&&(b&&
a.ce||!b&&F.check_fullscreen())?!0:!1};a.request_split_screen=function(a,c){var g=F.get_device_by_type_element(F.DEVICE_HMD);if(!g)return!1;if(D)return!0;k=c;if(A.zb()){var e=A.ml(A.get_active());e&&(g.eh?(b(e),a&&a()):(F.$S(g),g.Hs=function(){b(e);a&&a()}))}};a.exit_split_screen=function(){var a=F.get_device_by_type_element(F.DEVICE_HMD);if(!D||!a||!a.eh)return!1;A.set_hmd_params({enable_hmd_stereo:!1});D=!1;k&&k();A.US();J.enabled||A.Aw(2,1);E.resize_to_container(!0);return!0};a.shot=function(a,
b){a=a||"image/png";R.canvas_data_url(function(b){var c="screenshot."+a.split("/")[1];navigator.msSaveOrOpenBlob?navigator.msSaveOrOpenBlob(b,c):(c=window.document.createElement("a"),document.body.appendChild(c),c.style.display="none",c.href=b,c.download="screenshot."+a.split("/")[1],c.click(),document.body.removeChild(c))},a,b||1,!0)}});w.a=f},function(D,w,f){D=f(0);var M=f(29),U=f(11);f=Object(D.a)("__hud",function(f,z){function e(a){a.font="bold 15px Courier New";a.textBaseline="middle";a.shadowBlur=
0;a.shadowColor=null}function m(b){n(' SCENE "'+b.name+'"');n(" Active                 Subscene   Lamps   Size   RenderCalls   Time");if(b.sa){var c=0,e=0,k=0;a.Na(b.sa.Ya,function(a,b){if(b.type!=w.Uk){a=Math.round(b.qa.width)+"x"+Math.round(b.qa.height);for(var g=0,f=0;f<b.vb.length;f++)g+=b.vb[f].jb.length;f=b.el;if(b.type==w.xd||b.type==w.Ge)g*=6;var l=b.Ec&&!b.Sm,m=l?b.fg:0;b.enqueue||(b.fg=0);var u=l?" (\u2713)":" (\u2715)",r=w.Ox(b);n(u,r,b.op,a,f,"of",g,"  ",m.toFixed(3));b.el=0;c+=g;l&&(e+=
f,k+=m)}});return[c,e,k]}n("No INFO")}function n(){for(var a=80+20*l[0],g=arguments[0],e=1;e<arguments.length;e++){for(var f="",m=0;m<k[e]-String(arguments[e]).length;m++)f+=" ";g+=f+arguments[e]}l[0]++;c.fillText(g,30,a)}function v(a,c,e,k,f){f.x=a;f.y=c;f.pd=e;f.Fc=k;return f}function q(a,c,e){c=a.pd*c;e.x=a.x+c;e.y=a.y;e.pd=a.pd-2*c;e.Fc=a.Fc;return e}function r(a){return a.x+a.pd/2}function y(a){var b=c,e={x:0,y:0,pd:0,Fc:0};v(0,0,b.canvas.width,b.canvas.height,e);q(e,.01,e);b=.02*e.Fc;e.x=e.x;
e.y+=b;e.pd=e.pd;e.Fc=e.Fc-2*b;b=e.pd/8;e.x+=b*a;e.y=e.y;e.pd=b;e.Fc=e.Fc;q(e,.02,e);return e}var a=Object(M.a)(f),w=Object(U.a)(f),k=[5,30,4,10,5,3,5],c=null,l=[0,0];z.init=function(a){a=a.getContext("2d");e(a);return c=a};z.Hn=function(){c&&e(c)};z.reset=function(){var a=c;a&&(a.clearRect(0,0,a.canvas.width,a.canvas.height),a.fillStyle="rgba(0,0,0,0.5)",a.fillRect(0,0,a.canvas.width,a.canvas.height),l[0]=0,l[1]=0)};z.$T=function(a,g){var b=c;if(b){b.textAlign="left";b.fillStyle="rgba(0,255,0,255)";
n(" FPS",(1/g).toFixed(2));l[0]++;for(var e=b=g=0,k=0;k<a.length;k++){var f=m(a[k]);g+=f[0];b+=f[1];e+=f[2];l[0]++}n(" ----------------------------------------------------------------");n("    ","TOTAL ACTIVE","","",b,"of",g,"  ",e.toFixed(3))}};z.print=function(){var a=c;a&&(a.textAlign="left",a.fillStyle="rgba(0,255,0,255)",n.apply(Math,arguments))};z.plot_array=function(a,g,e,k,f,l,m){var b=c;if(b){g=y(g);var n=g.Fc/5;g.x=g.x;g.y+=4*n;g.pd=g.pd;g.Fc=n;b.textAlign="center";b.fillStyle="#00FF00";
c.fillText(a,r(g),g.y-10);b.strokeStyle="#00FF00";b.lineWidth=.5;b.beginPath();b.moveTo(g.x,g.y);b.lineTo(g.x+g.pd,g.y);b.lineTo(g.x+g.pd,g.y+g.Fc);b.lineTo(g.x,g.y+g.Fc);b.closePath();b.stroke();if(!l&&!m)for(l=1E6,m=-1E6,a=0;a<e.length;a++)l=Math.min(l,e[a]),m=Math.max(m,e[a]);b.textAlign="right";c.fillText(String(l),g.x-10,g.y+g.Fc);c.fillText(String(m),g.x-10,g.y);b.textAlign="center";c.fillText(String(k),g.x,g.y+g.Fc+15);c.fillText(String(f),g.x+g.pd,g.y+g.Fc+15);b.strokeStyle="#FF0000";b.lineWidth=
1.5;b.beginPath();k=g.pd/(e.length-1);m=g.Fc/(m-l);for(a=0;a<e.length;a++)f=g.x+k*a,n=g.y+g.Fc-(e[a]-l)*m,0==a?b.moveTo(f,n):b.lineTo(f,n);b.stroke()}};z.draw_mixer_strip=function(a,g,e,k,f,l,m){var b=c;if(b)for(b.textAlign="center",b.fillStyle="#00FF00",b.font="bold 12px Courier",e=y(e),c.fillText(g?"["+a+"]":a,r(e),e.y),0<=l&&c.fillText(l?"[M]":"[ ]",r(e)-15,e.y+30),0<=m&&c.fillText(m?"[S]":"[ ]",r(e)+15,e.y+30),a={x:0,y:0,pd:0,Fc:0},g=0;g<k.length;g++){var n=k[g];(m="VOLUME"==n[0])?v(e.x,e.y+350,
e.pd,250,a):v(e.x,e.y+50+50*g,e.pd,e.Fc,a);l=b;var u=a,q=g==f,F=n[0],z=n[1],C=n[2],E=n[3],B=(E-C)/n[4];B=1>B?Math.floor(1/B-1E-5).toFixed(0).length:0;n=n[5]?Math.log(z/C)/Math.log(E/C):(z-C)/(E-C);l.textAlign="center";q?l.fillText("["+F+"]",r(u),u.y):l.fillText(F,r(u),u.y);l.strokeStyle="#00FF00";l.lineWidth=m?3:1;m?(l.textAlign="right",l.fillText(E.toFixed(B),r(u)-10,u.y+15),l.textAlign="right",l.fillText(C.toFixed(B),r(u)-10,u.y+u.Fc-15)):(l.textAlign="right",l.fillText(C.toFixed(B),u.x+28,u.y+
15),l.textAlign="left",l.fillText(E.toFixed(B),u.x+u.pd-28,u.y+15));l.beginPath();if(m){var w=u.y+15+(u.Fc-30)*(1-n);l.moveTo(r(u),u.y+15);l.lineTo(r(u),u.y+u.Fc-15);l.moveTo(r(u)-5,u.y+15);l.lineTo(r(u)+5,u.y+15);l.moveTo(r(u)-5,u.y+u.Fc-15);l.lineTo(r(u)+5,u.y+u.Fc-15);l.moveTo(r(u)-5,w);l.lineTo(r(u)+5,w)}else{var I=u.x+30+(u.pd-60)*n;l.moveTo(u.x+30,u.y+15);l.lineTo(u.x+u.pd-30,u.y+15);l.moveTo(u.x+30,u.y+15-5);l.lineTo(u.x+30,u.y+15+5);l.moveTo(u.x+u.pd-30,u.y+15-5);l.lineTo(u.x+u.pd-30,u.y+
15+5);l.moveTo(I,u.y+15-5);l.lineTo(I,u.y+15+5)}l.stroke();"EQ_Q"==F?(n=Math.log(1+1/(2*z*z)+Math.sqrt((2+1/(z*z))*(2+1/(z*z))/4-1))/Math.log(2),m?(l.textAlign="left",l.fillText(z.toFixed(B),r(u)+10,w),l.textAlign="left",l.fillText("("+n.toFixed(B+1)+")",r(u)+10,w+10)):(l.textAlign="right",l.fillText(z.toFixed(B),I,u.y+30),l.textAlign="left",l.fillText("("+n.toFixed(B+1)+")",I,u.y+30))):m?(l.textAlign="left",l.fillText(z.toFixed(B),r(u)+10,w)):(l.textAlign="center",l.fillText(z.toFixed(B),I,u.y+30))}}});
w.a=f},function(D,w,f){D=f(0);var M=f(38),U=f(12),n=f(9),z=f(1),e=f(10),m=f(23),C=f(17),v=f(18),q=f(2);f=Object(D.a)("__nla",function(f,y){function a(a,b){for(var c=F.QP(),g=[],e=0,k=0;k<a.length;k++){var f=a[k];""!=f.Eq?f=q._19("uuid",f.Eq,c):(f=f.ph,f=q._19("name",f,c)||q._19("name",f+"_B4W_BAKED",c));if(f){f=f.fcurves;var l=[],d;for(d in f)l.push(d);g.push(l)}}for(k=0;k<g.length;k++){c=!1;for(d=0;d<k;d++)if(q.E(g[k],g[d])){a[k].dd=a[d].dd;c=!0;break}c||(a[k].dd=b+e++)}return e}function r(){return{type:"CLIP",
sb:0,$b:0,wk:!1,paused:!1,ph:"",Eq:"",dd:0,rn:null,Wk:0,qm:0,yF:0,xF:0,rJ:!1,scale:1,repeat:1,LD:0}}function k(a,b,c){if(a.animation_data){var g=a.animation_data.nla_tracks;if(g)for(var e=0;e<g.length;e++)g[e].rn=c,b.push(g[e])}a=a.nodes;for(e=0;e<a.length;e++)if(g=a[e],g.node_group){var f=g.node_group.node_tree;if(f){var l=c.slice();l.push(g.name);k(f,b,l)}}}function c(a,b){a=Math.round(a)-b.sb;b.Mk&&(a%=b.kl,0>a&&(a+=b.kl));return b.Mc+a}function l(a,b){b=(b-W)*D.ke()+a.Mc;b>a.sb?(b-=a.sb,a.cyclic&&
(b%=a.$b-a.sb+1),b+=a.sb):b=a.sb;return b}function b(a,b){a=q.M(a,b.sb,b.$b);a=a==b.$b?b.LD:b.Wk+(a-b.sb)/b.scale%(b.qm-b.Wk);b.rJ&&(a=b.qm-a+b.Wk);return a}function g(a,b){for(var c=[],g=0;g<a.length;g++){var e=a[g],k=e.strips;if(k)for(var f=0;f<k.length;f++){var l=k[f],d=r();d.type=l.type;d.sb=l.frame_start;d.$b=l.frame_end;d.dd=b;d.Wk=l.action_frame_start;d.qm=l.action_frame_end;d.rJ=l.use_reverse;d.scale=l.scale;d.repeat=l.repeat;l.action&&(d.ph=l.action.name,d.Eq=l.action.uuid,d.rn=e.rn);c.push(d)}}return c}
function E(a){return("SPEAKER"==a.type||"LAMP"==a.type)&&a.data.animation_data&&a.data.animation_data.nla_tracks.length?!0:!1}function w(a){if("MESH"!=a.type||!a.data)return!1;a=a.data.materials;if(!a)return!1;for(var b=0;b<a.length;b++){var c=a[b],g=c.ne;if(c=c.jh&&g)a:{if(g.animation_data&&(c=g.animation_data.nla_tracks)&&c.length){c=!0;break a}g=g.nodes;for(c=0;c<g.length;c++);c=!1}if(c)return!0}return!1}function u(a,b){var c=A.get_active();c.qb&&(b=l(c.qb,b),c.qb.Mc-=b-a,c.qb.Io=!0)}var F=Object(M.a)(f),
R=Object(U.a)(f),O=Object(n.a)(f),K=Object(z.a)(f),A=Object(e.a)(f),ca=Object(m.a)(f),L=Object(C.a)(f),D=Object(v.a)(f),J=[],W=-1;y.fy=function(b,c){for(var e,f=null,l=c.Aa.length-1;0<=l&&(e=c.Aa[l],!e.Bb.b4w_use_nla||(f=e,!e.Bb.HD));l--);if(e=f){e.pH=!0;f=0;if((l=b.animation_data)&&l.nla_tracks.length){var m=l.nla_tracks;if(O.is_armature(c)||O.is_camera(c)||O.is_mesh(c)||O.is_empty(c)||O.is_line(c)||O.is_lamp(c)||O.is_speaker(c)||O.is_world(c))m=g(m,f),m.length&&(c.Lf=c.Lf.concat(m),f++)}E(b)&&(m=
b.data.animation_data.nla_tracks,m=g(m,f),m.length&&(c.Lf=c.Lf.concat(m),f++));if(O.is_mesh(c)){var n=c.Sc;for(l=0;l<n.length;l++){var t=n[l];t.jh&&t.ne&&(m=[],k(t.ne,m,[t.name]),m=g(m,f),m.length&&(f+=a(m,f),c.Lf=c.Lf.concat(m)))}}if(O.is_world(c))b.use_nodes&&b.node_tree&&(m=[],k(b.node_tree,m,[b.name]),m=g(m,f),m.length&&(a(m,f),c.Lf=c.Lf.concat(m)));else{for(l=0;l<b.particle_systems.length;l++)m=b.particle_systems[l],n=m.settings,"EMITTER"==n.type&&n.b4w_allow_nla&&(n=r(),n.type="CLIP",n.sb=e.Bb.frame_start,
n.$b=e.Bb.frame_end+1,n.ph=m.name,n.dd=f,n.Wk=n.sb,n.qm=n.$b,c.Lf.push(n),f++);b=f+1;for(l=0;l<c.Ld.length;l++)e=c.Ld[l],e.ZL&&(f=b,n=r(),n.type="CLIP",n.sb=e.sb,n.$b=e.$b,n.ph=e.name,n.dd=f,n.Wk=n.sb,n.qm=n.$b,c.Lf.push(n))}}};y.jV=function(a,b,c){a.qb||(a.qb={sb:a.frame_start,$b:a.frame_end,Mc:0,$r:-1,Cs:a.frame_end,Ds:a.frame_start,Pn:null,cyclic:b,Qb:[],Ua:[],UH:a.name,xl:!1,Io:!1,LB:!0},J.push(a.qb));b=a.qb;for(var g=R.ZF(a,"ALL",c),e=0;e<g.length;e++){var k=g[e];if(k.Lf.length){b.Qb[c]||(b.Qb[c]=
[]);for(var f=0;f<k.Aa.length;f++){var l=k.Aa[f];l.Bb==a&&l.pH&&b.Qb[c].push(k)}f=k.Lf;l=b;for(var d=k.name,m=0;m<f.length;m++){var n=f[m];l.sb>n.$b||l.$b<n.sb?(K.warn("NLA: Strip is out of scene range: "+(d+" ["+n.sb+":"+n.$b+"]")),f.splice(m,1),m--):n.ph||"CLIP"!=n.type||(K.warn('NLA: no action in strip for object "'+d+'".'),f.splice(m,1),m--)}k=k.Lf;f=b;for(l=0;l<k.length;l++){d=k[l];m=f.sb;n=f.$b+1;for(var u=0;u<k.length;u++){var r=k[u];d.dd==r.dd&&(r.$b<=d.sb&&(m=d.sb),r.sb>=d.$b&&(n=Math.min(n,
r.sb)))}d.yF=m;d.xF=n;d.LD=0===d.repeat%1?d.qm:d.Wk+d.repeat%1*(d.qm-d.Wk)}}}a=a.sa.oq;for(e=0;e<a.length;e++)g=a[e].sa,g.im&&(g.Rb||g.pe)&&g.qq==c&&(g.Mk||(q.M(g.sb,0,b.$b),q.M(g.sb+g.kl,0,b.$b)),b.Ua.push(g))};y.JS=function(){for(var a=0;a<J.length;a++)for(var b=J[a],c=0;c<b.Qb.length;c++){var g=b.Qb[c];if(g)for(a=0;a<g.length;a++)for(var e=g[a],k=e.Lf,f=0;f<k.length;f++){var l=k[f];F.WQ(e,l.rn,l.nd,l.ph,l.dd)}}};y.start=function(){W=0};y.yQ=function(){return W};y.CX=function(a){return a.qb?a.qb.Mc:
null};y.EY=function(a,b){return a.qb?(a.qb.Mc=b,!0):!1};y.update=function(a,g){if(!(0>W)){0==W&&(W=a);for(var e=0;e<J.length;e++){var k=J[e];k.xl&&(k.Mc-=D.ke()*g);var f=l(k,a);if((!k.xl||k.Io)&&f>=k.Cs)if(k.cyclic){f=k;var m=a;f.Pn&&f.Pn();u(f.Ds,m);f.LB=!0;f=l(f,m)}else{m=k;var n=f;m.xl=!0;m.Mc-=n-m.Cs;m.Pn&&m.Pn()}if(!k.xl||k.Io){m=k;n=f;for(var t=0;t<m.Qb.length;t++){var d=m.Qb[t];if(d)for(var r=0;r<d.length;r++){for(var v=d[r],A=v.Lf,B=0;B<A.length;B++){var y=A[B];"SOUND"==y.type&&n<m.$r-1E-6&&
(y.wk=!1)}for(B=0;B<A.length;B++)switch(y=A[B],y.type){case "CLIP":if(y.yF<=n&&n<y.xF&&!y.wk){t=v;var z=y,C=z.rn;""!=z.Eq?F.sM(t,C,z.Eq,z.dd):F.apply(t,C,z.ph,z.dd);F.set_behavior(t,F.AB_FINISH_STOP,z.dd);C=b(z.sb,z);F.set_frame(t,C,z.dd);for(t=0;t<A.length;t++)A[t]!=y&&A[t].dd==y.dd&&(A[t].wk=!1);y.wk=!0}y.wk&&(z=v,C=b(n,y),1E-6<Math.abs(C-F.cA(z,y.dd))&&F.set_frame(z,C,y.dd));break;case "SOUND":if((n<m.$r-1E-6||m.$r<y.sb)&&y.sb<=n&&n<y.$b&&!y.wk){z=v;var E=y;C=(E.sb-n)/D.ke();E=(E.$b-E.sb)/D.ke();
ca.play(z,C,E);y.wk=!0}m.$r<y.$b&&y.$b<=n&&y.wk&&(y.wk=!1)}}}m=a;n=k;d=f;for(r=0;r<n.Ua.length;r++)if(v=n.Ua[r],v.Rb||v.pe){A=L.zJ(v);B=v;y=q.M(c(d,B),B.Mc,B.Mc+L.AJ(B)-1);B.pe&&(y=L.EV(B,y),y==B.Qs&&y--);B=y;y=L.BJ(v);z=t=!1;if(n.Io||n.LB)z=!0;n.xl||(C=c(d,v),C=v.Mc<=C&&C<=v.Mc+L.AJ(v),E=L.CJ(v),v.Mk&&B==y&&(z=!0),E||A==B||(z=!0),C&&!E?L.play_video(v):C&&E?t=!0:!C&&E&&(v.Rb&&A<B?t=!0:L.pause_video(v)));z?(L.zT(v.zt,B,v.qq),v.pe&&(v.Rl=L.ex(v,m))):t&&L.DJ(v)&&(v.Rb?L.jJ(v):(A=L.ex(v,m),A!=v.Rl&&(v.yk=
B,L.iJ(v)),v.Rl=A))}k.$r=f}k.Io=!1;k.LB=!1}}};y.cleanup=function(a){if(0==a)J.length=0,W=-1;else for(var b=0;b<J.length;b++)J[b].Qb[a]=null};y.hE=function(a){var b=a.animation_data;return b&&b.nla_tracks.length||E(a)||w(a)?!0:!1};y.set_frame=u;y.get_frame=function(a){var b=A.get_active();return b.qb?l(b.qb,a):-1};y.kC=function(){var a=A.get_active();if(a.qb){a.qb.xl=!0;a=a.qb.Ua;for(var b=0;b<a.length;b++)L.pause_video(a[b])}};y.AH=function(a){var b=A.get_active();b.qb&&(b.qb.xl=!1,a?b.qb.Pn=a:b.qb.Pn=
null)};y.get_frame_start=function(){var a=A.get_active();return a.qb?a.qb.sb:-1};y.get_frame_end=function(){var a=A.get_active();return a.qb?a.qb.$b:-1};y.is_play=function(){var a=A.get_active();return a.qb?!a.qb.xl:!1};y.check_nla=function(){var a=A.get_active();return a.qb?a.b4w_use_nla:!1};y.check_logic_nodes=function(){var a=A.get_active();return a.qb?0<a.b4w_logic_nodes.length:!1};y.set_range=function(a,b){var c=A.get_active();if(c.qb)c.qb.Ds=a,c.qb.Cs=b;else return!1};y.VB=function(a){var b=
A.get_active();b.qb&&(b.qb.Cs=a)};y.IT=function(a){var b=A.get_active();b.qb&&(b.qb.Ds=a)};y.reset_range=function(){var a=A.get_active();if(a.qb)a=a.qb,a.Ds=a.sb,a.Cs=a.$b;else return!1};y.set_cyclic=function(a){var b=A.get_active();if(b.qb)b.qb.cyclic=a;else return!1};y.clear_callback=function(){var a=A.get_active();a.qb&&(a.qb.Pn=null)};y.gI=function(a){var b=A.get_active().qb;b&&(b.Mc=-(a-W)*D.ke()+b.Ds,b.Io=!0)};y.get_frame_end=function(){var a=A.get_active().qb;return a?a.$b:null}});w.a=f},function(D,
w,f){D=f(0);var M=f(5),U=f(4),n=f(15),z=f(39),e=f(12),m=f(1),C=f(19),v=f(8),q=f(18),r=f(6),y=f(2),a=f(3);f=Object(D.a)("__controls",function(f,k){function c(b,c){c||(c=ca.get_container());return{type:b,value:0,Pa:null,element:c,Fb:!1,key:0,Sb:"",Qi:!1,uz:null,sz:function(){},rz:null,KE:function(){},tj:null,from:new Float32Array(3),to:new Float32Array(3),qG:!1,Rv:!1,Es:0,IH:function(){},axis:"",ih:0,Wp:new Float32Array(3),Ww:new Float32Array(4),threshold:0,GH:new Float32Array(4),eu:0,du:0,QH:0,fu:0,
bh:0,repeat:!1,wF:!1,gamepad_id:0,position:a.create(),orientation:v.create(),callback:function(){}}}function l(b){function c(){return{cl:new Float32Array(2),Zo:!0,obj:null,identifier:-1,vj:0}}b||(b=ca.get_container());for(var g=0;g<t.length;g++){var e=t[g];if(b==e.element)return e}e={element:b,Vr:!0,ng:0,GA:!0,xw:0,yw:0,pn:0,qn:0,ws:0,xs:0,yi:new Float32Array(2),vf:new Float32Array(2),zi:new Float32Array(2),Qf:new Float32Array(2),by:0,CC:0,TI:0,jg:new Uint8Array(256),Ay:0,oA:null,kj:c(),Jk:Array(10),
HA:!1,dG:v.create(),Gv:0,Fv:0,Ev:0,rA:0,qA:0,Dv:Infinity,qB:null,pB:null,fB:null,bB:null,dB:null,AC:null,zC:null,eB:null,cB:null,zB:null,hY:null,BC:null,yC:null,xC:null,uk:{}};for(g=0;10>g;++g)e.Jk[g]=c();e.qB=function(a){e.HA||(L.JQ(a,e.dG),e.HA=!0)};e.pB=function(b){b=a.copy(b,na);e.Ev=b[0];e.Fv=b[1];e.Gv=b[2];Infinity==e.Dv&&(e.Dv=b[0],e.qA=b[1],e.rA=b[2])};e.fB=function(a){e.Ay+=a*ba.bS};e.bB=function(a){var b=L.get_device_by_type_element(L.DEVICE_MOUSE,e.element);b=L.get_vector_param(b,L.MOUSE_LOCATION,
d);e.xw=b[0];e.yw=b[1];e.pn=b[0];e.qn=b[1];if(3==e.ng||0==e.ng)e.ng=1;e.which=a};e.dB=function(){var a=L.get_device_by_type_element(L.DEVICE_MOUSE,e.element);a=L.get_vector_param(a,L.MOUSE_LOCATION,d);a=ca.client_to_canvas_coords(a[0],a[1],d);e.kj.Zo=!1;e.kj.cl[0]=a[0];e.kj.cl[1]=a[1]};e.AC=function(a){for(var b=0;b<a.length;++b){for(var c=a[b],g=null,k=null,f=0;f<e.Jk.length;f++){var l=e.Jk[f],p=3==l.vj||0==l.vj;if(l.identifier==c.identifier){p&&(k=l);break}else!g&&p&&(g=l,g.identifier=c.identifier)}if(c=
k||g)g=ca.client_to_canvas_coords(a[b].clientX,a[b].clientY,d),c.Zo=!1,c.vj=1,c.cl[0]=g[0],c.cl[1]=g[1]}};e.zC=function(a){for(var b=0;b<e.Jk.length;++b){for(var c=e.Jk[b],d=!1,g=0;g<a.length;++g)if(a[g].identifier==c.identifier){d=!0;break}d||(0!=c.vj&&(c.vj=3),c.obj=null)}};e.eB=function(a){var b=L.get_device_by_type_element(L.DEVICE_MOUSE,e.element);b=L.get_vector_param(b,L.MOUSE_LOCATION,d);e.xw=b[0];e.yw=b[1];e.pn=b[0];e.qn=b[1];0!=e.ng&&(e.ng=3);e.which=a};e.cB=function(a){I.Qv&&0==e.ng||(e.pn=
a[0],e.qn=a[1])};e.zB=function(a){e.ws+=a[0];e.xs+=a[1]};e.EG=function(a){2!=e.jg[a]&&(e.jg[a]=1,e.Vr=!1)};e.GG=function(){for(var a=0;a<e.jg.length;a++)0!=e.jg[a]&&(e.jg[a]=3,e.Vr=!1)};e.HG=function(a){e.Vr=!1;e.jg[a]=3};e.BC=function(a){e.GA=!1;if(1==a.length)e.yi[0]=a[0].clientX,e.yi[1]=-1,e.zi[0]=a[0].clientY,e.zi[1]=-1;else if(1<a.length){e.by=e.CC=R(a);e.yi[0]=a[0].clientX;e.yi[1]=a[1].clientX;e.zi[0]=a[0].clientY;e.zi[1]=a[1].clientY;var b=a[0];a=a[1];e.TI=Math.atan2(b.clientY-a.clientY,b.clientX-
a.clientX)}e.vf.set(e.yi);e.Qf.set(e.zi)};e.yC=function(a){1===a.length?(e.vf[0]=a[0].clientX,e.vf[1]=-1,e.Qf[0]=a[0].clientY,e.Qf[1]=-1):1<a.length&&(e.vf[0]=a[0].clientX,e.vf[1]=a[1].clientX,e.Qf[0]=a[0].clientY,e.Qf[1]=a[1].clientY,e.by=R(a))};e.xC=function(a){0==a.length&&(e.GA=!0)};t.push(e);return e}function b(a,b){if(b in a.uk&&0<a.uk[b])a.uk[b]+=1;else switch(a.uk[b]=1,b){case "orientation_quat":(b=L.get_device_by_type_element(L.DEVICE_GYRO))&&L.attach_param_cb(b,L.GYRO_ORIENTATION_ANGLES,
a.qB);break;case "orientation_angles":(b=L.get_device_by_type_element(L.DEVICE_GYRO))&&L.attach_param_cb(b,L.GYRO_ORIENTATION_ANGLES,a.pB);break;case "mouse_wheel":(b=L.get_device_by_type_element(L.DEVICE_MOUSE,a.element))&&L.attach_param_cb(b,L.MOUSE_WHEEL,a.fB);break;case "mouse_down_which":(b=L.get_device_by_type_element(L.DEVICE_MOUSE,a.element))&&L.attach_param_cb(b,L.MOUSE_DOWN_WHICH,a.bB);break;case "mouse_select":(b=L.get_device_by_type_element(L.DEVICE_MOUSE,a.element))&&L.attach_param_cb(b,
L.MOUSE_DOWN_WHICH,a.dB);break;case "touch_select":if(b=L.get_device_by_type_element(L.DEVICE_TOUCH,a.element))L.attach_param_cb(b,L.TOUCH_START,a.AC),L.attach_param_cb(b,L.TOUCH_END,a.zC);break;case "mouse_up_which":(b=L.get_device_by_type_element(L.DEVICE_MOUSE,a.element))&&L.attach_param_cb(b,L.MOUSE_UP_WHICH,a.eB);break;case "mouse_location":(b=L.get_device_by_type_element(L.DEVICE_MOUSE,a.element))&&L.attach_param_cb(b,L.MOUSE_LOCATION,a.cB);break;case "mouse_pointerlock":(b=L.get_device_by_type_element(L.DEVICE_MOUSE,
a.element))&&L.attach_param_cb(b,L.iD,a.zB);break;case "keyboard_downed_keys":if(b=L.get_device_by_type_element(L.DEVICE_KEYBOARD,a.element))L.attach_param_cb(b,L.KEYBOARD_DOWN,a.EG),L.attach_param_cb(b,L.hD,a.GG),L.attach_param_cb(b,L.KEYBOARD_UP,a.HG);break;case "touch_start":(b=L.get_device_by_type_element(L.DEVICE_TOUCH,a.element))&&L.attach_param_cb(b,L.TOUCH_START,a.BC);break;case "touch_move":(b=L.get_device_by_type_element(L.DEVICE_TOUCH,a.element))&&L.attach_param_cb(b,L.TOUCH_MOVE,a.yC);
break;case "touch_end":(b=L.get_device_by_type_element(L.DEVICE_TOUCH,a.element))&&L.attach_param_cb(b,L.TOUCH_END,a.xC)}}function g(a,b){if(b in a.uk&&0<a.uk[b]&&(--a.uk[b],!a.uk[b]))switch(b){case "orientation_quat":(b=L.get_device_by_type_element(L.DEVICE_GYRO))&&L.detach_param_cb(b,L.GYRO_ORIENTATION_QUAT,a.qB);break;case "orientation_angles":(b=L.get_device_by_type_element(L.DEVICE_GYRO))&&L.detach_param_cb(b,L.GYRO_ORIENTATION_ANGLES,a.pB);break;case "mouse_wheel":(b=L.get_device_by_type_element(L.DEVICE_MOUSE,
a.element))&&L.detach_param_cb(b,L.MOUSE_WHEEL,a.fB);break;case "mouse_down_which":(b=L.get_device_by_type_element(L.DEVICE_MOUSE,a.element))&&L.detach_param_cb(b,L.MOUSE_DOWN_WHICH,a.bB);break;case "mouse_select":(b=L.get_device_by_type_element(L.DEVICE_MOUSE,a.element))&&L.detach_param_cb(b,L.MOUSE_DOWN_WHICH,a.dB);break;case "touch_select":if(b=L.get_device_by_type_element(L.DEVICE_TOUCH,a.element))L.detach_param_cb(b,L.TOUCH_START,a.AC),L.detach_param_cb(b,L.TOUCH_END,a.zC);break;case "mouse_up_which":(b=
L.get_device_by_type_element(L.DEVICE_MOUSE,a.element))&&L.detach_param_cb(b,L.MOUSE_UP_WHICH,a.eB);break;case "mouse_location":(b=L.get_device_by_type_element(L.DEVICE_MOUSE,a.element))&&L.detach_param_cb(b,L.MOUSE_LOCATION,a.cB);break;case "mouse_pointerlock":(b=L.get_device_by_type_element(L.DEVICE_MOUSE,a.element))&&L.detach_param_cb(b,L.iD,a.zB);break;case "keyboard_downed_keys":if(b=L.get_device_by_type_element(L.DEVICE_KEYBOARD,a.element))L.detach_param_cb(b,L.KEYBOARD_DOWN,a.EG),L.detach_param_cb(b,
L.hD,a.GG),L.detach_param_cb(b,L.KEYBOARD_UP,a.HG);break;case "touch_start":(b=L.get_device_by_type_element(L.DEVICE_TOUCH,a.element))&&L.detach_param_cb(b,L.TOUCH_START,a.BC);break;case "touch_move":(b=L.get_device_by_type_element(L.DEVICE_TOUCH,a.element))&&L.detach_param_cb(b,L.TOUCH_MOVE,a.yC);break;case "touch_end":(b=L.get_device_by_type_element(L.DEVICE_TOUCH,a.element))&&L.detach_param_cb(b,L.TOUCH_END,a.xC)}}function E(a,b){a.value=Number(b)}function w(a){for(var b=a.xk,c=a.mT,d=0;d<b.length;d++)c[d]=
b[d].value;return a.OR(c)}function u(a,b){a=a||p;var c=a.xi;if(c){var d=a.Bn;if(b){var g=c[b];if(g){for(var e=g.xk,k=0;k<e.length;k++){var f=e[k];var l=da.indexOf(f);l=-1<l?H[l]:[];1==l.length?(F(f),f=da.indexOf(f),-1<f?(da.splice(f,1),H.splice(f,1)):T.va("Sensors cache is corrupted")):1<l.length&&l.splice(l.indexOf(g),1)}delete c[b];b=d.indexOf(g);-1<b?d.splice(b,1):T.va("Incorrect manifolds array");Object.getOwnPropertyNames(c).length||(a=P.indexOf(a),-1<a?P.splice(a,1):J.error("Wrong object"))}}else{d=
[];for(k in c)d.push(k);for(k=0;k<d.length;k++)u(a,d[k])}Aa=!0}}function F(a){switch(a.type){case 90:W.remove_collision_test(a.uz,a.Sb,a.sz);a.Fb=!0;break;case 100:W.clear_collision_impulse_test(a.rz);a.Fb=!0;break;case 110:W.remove_ray_test(a.Es);a.Fb=!0;break;case 140:a.Fb=!0;break;case 20:var b=l(a.element);g(b,"keyboard_downed_keys");a.Fb=!0;break;case 30:b=l(a.element);g(b,"mouse_wheel");a.Fb=!0;break;case 40:b=l(a.element);g(b,"mouse_down_which");g(b,"mouse_up_which");g(b,"mouse_location");
a.Fb=!0;break;case 280:b=l(a.element);g(b,"mouse_pointerlock");a.Fb=!0;break;case 50:b=l(a.element);g(b,"mouse_down_which");g(b,"mouse_up_which");a.Fb=!0;break;case 60:b=l(a.element);g(b,"touch_start");g(b,"touch_move");g(b,"touch_end");a.Fb=!0;break;case 70:b=l(a.element);g(b,"touch_start");g(b,"touch_move");a.Fb=!0;break;case 75:b=l(a.element);g(b,"touch_start");g(b,"touch_move");a.Fb=!0;break;case 80:b=l(a.element);g(b,"touch_start");g(b,"touch_end");a.Fb=!0;break;case 170:b=l(a.element);g(b,"mouse_select");
g(b,"touch_select");g(b,"touch_start");g(b,"touch_end");g(b,"mouse_down_which");g(b,"mouse_up_which");a.Fb=!0;break;case 180:case 190:b=l(a.element);g(b,"orientation_angles");a.Fb=!0;break;case 200:b=l(a.element);g(b,"orientation_quat");a.Fb=!0;break;case 210:case 220:a.Fb=!0}}function R(a){var b=a[0],c=a[1];a=b.clientX-c.clientX;b=b.clientY-c.clientY;return Math.sqrt(a*a+b*b)}function O(a){return 0==a?L.get_device_by_type_element(L.Gt):1==a?L.get_device_by_type_element(L.Ky):2==a?L.get_device_by_type_element(L.Ly):
L.get_device_by_type_element(L.My)}var T=Object(M.a)(f),A=Object(U.a)(f),ca=Object(n.a)(f),L=Object(z.a)(f),D=Object(e.a)(f),J=Object(m.a)(f),W=Object(C.a)(f),B=Object(q.a)(f),ba=A.controls,I=A.wa,P=[],p={},da=[],H=[],t=[],d=new Float32Array(2),la=new Float32Array(2),na=a.create(),pa=v.create(),Aa=!1,Ja=0;k.CT_POSITIVE=10;k.CT_CONTINUOUS=20;k.CT_TRIGGER=30;k.CT_SHOT=40;k.CT_LEVEL=50;k.CT_CHANGE=60;k.PL_SINGLE_TOUCH_MOVE=0;k.PL_MULTITOUCH_MOVE_ZOOM=1;k.PL_MULTITOUCH_MOVE_PAN=2;k.PL_MULTITOUCH_MOVE_ROTATE=
3;var N=1;k.update=function(b,c){for(var g=0;g<t.length;g++){var e=t[g];e.kj.Zo||(e.kj.obj=D.pick_object(e.kj.cl[0],e.kj.cl[1]),e.kj.Zo=!0,e.oA=e.kj.obj);for(var f=0;10>f;++f){var m=e.Jk[f];m.Zo||(m.obj=D.pick_object(m.cl[0],m.cl[1]),m.Zo=!0,e.oA=m.obj)}}for(g=0;g<da.length;g++)if(e=da[g],m=b,f=c)switch(e.type){case 120:var n=e.tj,u=r.j(n.ka.na,na);n=r.g(n.ka.na,pa);var q=a.dist(e.Wp,u),A=e.GH;v.invert(e.Ww,A);v.multiply(n,A,A);v.normalize(A,A);A=Math.abs(2*Math.acos(A[3]));q/=f;e.eu=y._51(q,e.eu,
f,.3);e.Pa[0]=q;q=A/f;e.du=y._51(q,e.du,f,.3);e.Pa[1]=q;e.eu>=e.threshold||e.du>=e.QH?E(e,1):E(e,0);a.copy(u,e.Wp);v.copy(n,e.Ww);e.ih=m;break;case 130:n=e.tj;u=r.j(n.ka.na,na);n=Math.abs(u[1]-e.Wp[1])/f;e.fu=y._51(n,e.fu,f,.3);e.Pa=n;e.fu>=e.threshold?E(e,1):E(e,0);a.copy(u,e.Wp);e.ih=m;break;case 140:!e.Fb&&0<=e.bh&&m-e.ih>=e.bh&&(E(e,1),e.repeat?e.ih=m:e.bh=-e.bh);break;case 150:e.ih||(e.ih=m);E(e,m-e.ih);e.ih=m;break;case 160:E(e,m);break;case 180:m=l(e.element);e.Pa[0]=m.Gv-m.rA;e.Pa[1]=m.Fv-
m.qA;e.Pa[2]=m.Ev-m.Dv;break;case 190:m=l(e.element);e.Pa[0]=m.Gv;e.Pa[1]=m.Fv;e.Pa[2]=m.Ev;break;case 200:m=l(e.element);v.copy(m.dG,e.Pa);break;case 210:f=L.get_device_by_type_element(L.DEVICE_HMD);L.get_vector_param(f,L.HMD_ORIENTATION_QUAT,e.Pa);break;case 220:f=L.get_device_by_type_element(L.DEVICE_HMD);L.get_vector_param(f,L.HMD_POSITION,e.Pa);break;case 240:f=O(e.gamepad_id);e.value=L.qQ(f,e.key);break;case 250:f=O(e.gamepad_id);e.value=L.pQ(f,e.key);break;case 260:f=O(e.gamepad_id);L.get_gamepad_position(f,
e.Pa);E(e,1);break;case 270:f=O(e.gamepad_id);L.get_gamepad_orientation(f,e.Pa);E(e,1);break;case 230:E(e,e.callback());break;case 30:m=l(e.element);E(e,m.Ay);break;case 40:m=l(e.element);if(!I.Qv||1==m.ng||2==m.ng)switch(u=m.pn-m.xw,n=m.qn-m.yw,e.Pa.coords[0]=m.pn,e.Pa.coords[1]=m.qn,e.axis){case "X":E(e,u);break;case "Y":E(e,n);break;case "XY":f=Math.sqrt(u*u+n*n),E(e,f)}break;case 280:m=l(e.element);u=m.ws;n=m.xs;q=y._51(u,0,f,.1*N);f=y._51(n,0,f,.1*N);.01<Math.abs(u)||.01<Math.abs(n)?(m.ws-=q,
m.xs-=f,e.Pa.coords[0]=q,e.Pa.coords[1]=f):(e.Pa.coords[0]=0,e.Pa.coords[1]=0);E(e,Math.sqrt(u*u+n*n));break;case 50:m=l(e.element);E(e,0!=m.ng|0);e.Pa.which=m.which;e.Pa.coords[0]=m.pn;e.Pa.coords[1]=m.qn;break;case 170:m=l(e.element);E(e,0);if(e.wF)m.oA==e.tj&&E(e,1);else if(0!=m.ng&&m.kj.obj==e.tj)E(e,1);else for(f=0;10>f;++f)if(u=m.Jk[f],0!=u.vj&&u.obj==e.tj){E(e,1);break}break;case 20:m=l(e.element);e.Pa=m.jg[e.key];1==e.Pa||m.jg[0]&&16==e.key?E(e,1):e.Pa||E(e,0);break;case 60:m=l(e.element);
if(-1==m.vf[1]&&-1==m.Qf[1]){u=m.vf[0]-m.yi[0];n=m.Qf[0]-m.zi[0];f=Math.sqrt(u*u+n*n);if(-1!=m.yi[1]&&-1!=m.zi[1]){q=m.vf[0]-m.yi[1];A=m.Qf[0]-m.zi[1];var B=Math.sqrt(q*q+A*A);B<f&&(u=q,n=A,f=B)}e.Pa.gesture=k.PL_SINGLE_TOUCH_MOVE}else f=d,f[0]=(m.vf[0]+m.vf[1])/2,f[1]=(m.Qf[0]+m.Qf[1])/2,n=la,n[0]=(m.yi[0]+m.yi[1])/2,n[1]=(m.zi[0]+m.zi[1])/2,u=f[0]-n[0],n=f[1]-n[1],f=Math.sqrt(u*u+n*n),e.Pa.gesture=k.PL_MULTITOUCH_MOVE_PAN;e.Pa.coords[0]=m.vf[0];e.Pa.coords[1]=m.Qf[0];switch(e.axis){case "X":E(e,
u);break;case "Y":E(e,n);break;case "XY":E(e,f)}break;case 70:m=l(e.element);f=m.by-m.CC;e.Pa=k.PL_MULTITOUCH_MOVE_ZOOM;E(e,f);break;case 75:m=l(e.element);-1!=m.vf[1]&&(f=Math.atan2(m.Qf[0]-m.Qf[1],m.vf[0]-m.vf[1]),e.Pa=k.PL_MULTITOUCH_MOVE_ROTATE,E(e,f-m.TI));break;case 80:m=l(e.element),e.Pa.coords[0]=m.vf[0],e.Pa.coords[1]=m.Qf[0],m.GA?E(e,0):E(e,1)}for(g=0;g<P.length;g++)for(e=P[g],b=e.Bn,c=0;c<b.length;c++)if(f=b[c],f.gm!=Ja){f.gm=Ja;n=f;m=0;switch(n.type){case k.CT_POSITIVE:m=(u=w(n))?1:0;
break;case k.CT_CONTINUOUS:m=n.gk;(u=w(n))?(m=1,n.gk=1):1==m?(m=-1,n.gk=-1):m=0;break;case k.CT_TRIGGER:m=n.gk;(u=w(n))&&-1==m?(m=1,n.gk=1):u||1!=m?m=0:(m=-1,n.gk=-1);break;case k.CT_SHOT:m=n.gk;(u=w(n))&&-1==m?(m=1,n.gk=1):u||1!=m?m=0:(m=0,n.gk=-1);break;case k.CT_LEVEL:u=w(n);n.JG!=u?(m=1,n.JG=u):m=0;break;case k.CT_CHANGE:u=n.xk;n=n.qR;for(q=0;q<u.length;q++)A=u[q].value,m||A==n[q]||(m=1),n[q]=A;break;default:T.va("Wrong sensor manifold type: "+n.type)}if(m&&(u=e==p?null:e,Aa=!1,f.callback(u,f.id,
m,f.XM),Aa)){g=-1;break}}for(g=0;g<P.length;g++)for(e=P[g],b=e.Bn,c=0;c<b.length;c++)for(f=b[c],e=f.xk,f=0;f<e.length;f++)switch(m=e[f],m.type){case 30:E(m,0);break;case 40:E(m,0);break;case 60:E(m,0);break;case 70:E(m,0);break;case 75:E(m,0);break;case 80:E(m,0);break;case 140:E(m,0)}for(g=0;g<t.length;g++){b=e=t[g];if(!b.Vr){for(c=0;c<b.jg.length;c++)1==b.jg[c]?b.jg[c]=2:3==b.jg[c]&&(b.jg[c]=0);b.Vr=!0}1==b.ng?b.ng=2:3==b.ng&&(b.ng=0);for(c=0;c<b.Jk.length;c++)e=b.Jk[c],1==e.vj?e.vj=2:3==e.vj&&
(e.vj=0);b.Ay=0;b.xw=b.pn;b.yw=b.qn;b.jg[0]=0;b.yi.set(b.vf);b.zi.set(b.Qf);b.CC=b.by;b.rA=b.Gv;b.qA=b.Fv;b.Dv=b.Ev;b.HA=!1}Ja++};k.create_custom_sensor=function(a){var b=c(10);E(b,a);return b};k.create_keyboard_sensor=function(a){var b=c(20,document);b.key=a;b.Fb=!0;return b};k.create_gamepad_btn_sensor=function(a,b){var d=c(240,document);b=b||L.rv();d.gamepad_id=b;d.key=a;d.Fb=!0;return d};k.create_gamepad_axis_sensor=function(a,b){var d=c(250,document);b=void 0==b?L.rv():b;d.gamepad_id=b;d.key=
a;d.Fb=!0;return d};k.create_gamepad_position_sensor=function(b){var d=c(260,document);b=void 0===b?L.rv():b;d.gamepad_id=b;d.Fb=!0;d.Pa=a.create();return d};k.create_gamepad_orientation_sensor=function(a){var b=c(270,document);a=void 0===a?L.rv():a;b.gamepad_id=a;b.Fb=!0;b.Pa=v.create();return b};k.create_collision_sensor=function(a,b,d){if(!a||!W.eb(a))return J.error("Wrong collision object"),null;var g=c(90);g.uz=a;g.Sb=b;g.Qi=d;g.Pa={coll_obj:null,coll_pos:d?new Float32Array(3):null,coll_norm:d?
new Float32Array(3):null,coll_dist:0};g.sz=function(a,b,c,d,e){E(g,a);a=g.Pa;a.coll_obj=b;g.Qi&&(a.coll_pos.set(c),a.coll_norm.set(d),a.coll_dist=e)};g.Fb=!0;return g};k.create_collision_impulse_sensor=function(a){if(!a||!a.xa)return J.error("Wrong collision impulse object"),null;var b=c(100);b.rz=a;b.KE=function(a){E(b,a)};b.Fb=!0;return b};k.create_ray_sensor=function(a,b,d,g,e,k,f){var l=c(110);l.tj=a;l.from=b;l.to=d;l.Sb=g;l.qG=e;l.Qi=k;l.Rv=f;l.Pa={hit_fract:0,obj_hit:null,hit_time:0,hit_pos:new Float32Array(3),
hit_norm:new Float32Array(3),Es:0};l.IH=function(a,b,c,d,g,e){l.qG?E(l,-1==b?0:1):E(l,b);l.Pa.hit_fract=b;l.Pa.obj_hit=c;l.Pa.hit_time=d;l.Qi&&(l.Pa.hit_pos.set(g),l.Pa.hit_norm.set(e))};l.Fb=!0;return l};k.create_mouse_click_sensor=function(a){a=c(50,a);a.Fb=!0;a.Pa={coords:new Float32Array(2),which:null};return a};k.create_mouse_wheel_sensor=function(a){a=c(30,a);a.Fb=!0;return a};k.create_mouse_move_sensor=function(a,b){b=c(40,b);b.axis=a||"XY";b.Pa={coords:new Float32Array(2)};b.Fb=!0;return b};
k.create_touch_move_sensor=function(a,b){b=c(60,b);b.axis=a||"XY";b.Pa={coords:new Float32Array(2),gesture:0};b.Fb=!0;return b};k.create_touch_zoom_sensor=function(a){a=c(70,a);a.Pa=0;a.Fb=!0;return a};k.create_touch_rotate_sensor=function(a){a=c(75,a);a.Pa=0;a.Fb=!0;return a};k.create_touch_click_sensor=function(a){a=c(80,a);a.Pa={coords:new Float32Array(2)};a.Fb=!0;return a};k.create_motion_sensor=function(){var b=v.create(),d=a.create();return function(a,g,e){if(!a)return J.error("Wrong collision object"),
null;var k=c(120);k.tj=a;var f=r.j(a.ka.na,d);a=r.g(a.ka.na,b);k.GH=new Float32Array(4);k.Wp=new Float32Array(f);k.Ww=new Float32Array(a);k.eu=0;k.du=0;k.threshold=g||.1;k.QH=e||.1;k.ih=0;k.Pa=new Float32Array([0,0]);return k}}();k.create_vertical_velocity_sensor=function(){var b=v.create(),d=a.create();return function(a,g){if(!a)return J.error("Wrong collision object"),null;var e=c(130);e.tj=a;var k=r.j(a.ka.na,d);a=r.g(a.ka.na,b);e.Wp=new Float32Array(k);e.Ww=new Float32Array(a);e.fu=0;e.threshold=
g||1;e.ih=0;e.Pa=0;return e}}();k.create_timer_sensor=function(a,b){var d=c(140);d.bh=a;d.repeat=b;d.Fb=!0;return d};k.reset_timer_sensor=function(a,b,c,d){a=a||p;a=a.xi;if(!a||!a[b])return J.error("reset_timer_sensor(): wrong object"),null;b=a[b].xk[c];if(!b)return J.error("reset_timer_sensor(): sensor not found"),null;b.ih=B.get_timeline();b.bh=d};k.create_elapsed_sensor=function(){var a=c(150);a.ih=0;return a};k.create_gyro_delta_sensor=function(){var a=c(180,window);a.Pa=new Float32Array(3);L.get_device_by_type_element(L.DEVICE_GYRO)?
E(a,1):E(a,0);a.Fb=!0;return a};k.create_gyro_angles_sensor=function(){var a=c(190,window);a.Pa=new Float32Array(3);L.get_device_by_type_element(L.DEVICE_GYRO)?E(a,1):E(a,0);a.Fb=!0;return a};k.create_gyro_quat_sensor=function(){var a=c(200,window);a.Pa=v.create();L.get_device_by_type_element(L.DEVICE_GYRO)?E(a,1):E(a,0);a.Fb=!0;return a};k.create_hmd_quat_sensor=function(){var a=c(210,window);a.Pa=v.create();L.get_device_by_type_element(L.DEVICE_HMD)?E(a,1):E(a,0);a.Fb=!0;return a};k.create_hmd_position_sensor=
function(){var b=c(220,window);b.Pa=a.create();L.get_device_by_type_element(L.DEVICE_HMD)?E(b,1):E(b,0);b.Fb=!0;return b};k.create_timeline_sensor=function(){return c(160)};k.create_selection_sensor=function(a,b){var d=c(170);d.tj=a;d.wF=b;d.Fb=!0;return d};k.create_callback_sensor=function(a,b){var d=c(230);d.callback=a;E(d,b);return d};k.create_plock_mouse_sensor=function(a){a=c(280,a);a.Pa={coords:new Float32Array(2)};a.Fb=!0;return a};k.create_plock_sensor=function(a){a=c(290,a);a.Fb=!0;return a};
k.lT=E;k.get_sensor_value=function(a,b,c){a=a||p;a=a.xi;if(!a||!a[b])return J.error("get_sensor_value(): wrong object"),null;b=a[b].xk[c];return b?b.value:(J.error("get_sensor_value(): sensor not found"),null)};k.get_sensor_payload=function(a,b,c){a=a||p;a=a.xi;if(!a||!a[b])return J.error("get_sensor_payload(): wrong object"),null;b=a[b].xk[c];return b?b.Pa:(J.error("get_sensor_payload(): sensor not found"),null)};k.cleanup=function(){P=[];p={};for(var a=0;a<da.length;a++)F(da[a]);da.length=0;H.length=
0};k.check_sensor_manifold=function(a,b){a=a||p;if(!a.xi)return!1;if(b&&a.xi[b])return!0;if(!b)for(var c in a.xi)return!0;return!1};k.create_sensor_manifold=function(a,c,d,g,e,k,f){a=a||p;a.Bn=a.Bn||[];a.xi=a.xi||{};var m=a.xi,t=a.Bn;m[c]&&u(a,c);d={id:c,type:d,xk:g.slice(0),OR:e,mT:Array(g.length),callback:k,XM:f,gk:-1,JG:0,qR:Array(g.length),gm:-1};m[c]=d;t.push(d);-1==P.indexOf(a)&&P.push(a);for(a=0;a<d.xk.length;a++){m=c=d.xk[a];if(m.Fb){switch(m.type){case 90:W.append_collision_test(m.uz,m.Sb,
m.sz,m.Qi);break;case 100:W.apply_collision_impulse_test(m.rz,m.KE);break;case 110:m.Es=W.append_ray_test(m.tj,m.from,m.to,m.Sb,m.IH,!1,!1,m.Qi,m.Rv);m.Pa.Es=m.Es;break;case 140:m.ih=B.get_timeline();0>m.bh&&(m.bh=-m.bh);break;case 20:t=l(m.element);b(t,"keyboard_downed_keys");break;case 30:t=l(m.element);b(t,"mouse_wheel");break;case 40:t=l(m.element);b(t,"mouse_down_which");b(t,"mouse_up_which");b(t,"mouse_location");break;case 280:t=l(m.element);b(t,"mouse_pointerlock");break;case 290:L.WL(m);
break;case 50:t=l(m.element);b(t,"mouse_down_which");b(t,"mouse_up_which");break;case 60:t=l(m.element);b(t,"touch_start");b(t,"touch_move");b(t,"touch_end");break;case 70:t=l(m.element);b(t,"touch_start");b(t,"touch_move");break;case 75:t=l(m.element);b(t,"touch_start");b(t,"touch_move");break;case 80:t=l(m.element);b(t,"touch_start");b(t,"touch_end");break;case 170:t=l(m.element);b(t,"mouse_select");b(t,"touch_select");b(t,"touch_start");b(t,"touch_end");b(t,"mouse_down_which");b(t,"mouse_up_which");
break;case 180:case 190:t=l(m.element);b(t,"orientation_angles");break;case 200:t=l(m.element);b(t,"orientation_quat");break;case 240:case 260:case 270:0==m.gamepad_id?L.get_device_by_type_element(L.Gt):1==m.gamepad_id?L.get_device_by_type_element(L.Ky):2==m.gamepad_id?L.get_device_by_type_element(L.Ly):L.get_device_by_type_element(L.My)}m.Fb=!1}m=da.indexOf(c);-1==m?(da.push(c),H.push([d])):H[m].push(d)}Aa=!0};k.default_AND_logic_fun=function(a){for(var b=0;b<a.length;b++)if(!a[b])return a[b];return a[a.length-
1]};k.default_OR_logic_fun=function(a){for(var b=0;b<a.length;b++)if(a[b])return a[b];return a[a.length-1]};k.remove_sensor_manifold=u;k.reset=function(){for(var a=0;a<P.length;a++){var b=P[a],c=b.xi;b=b.Bn;for(var d in c)delete c[d];b.length=0}for(a=0;a<da.length;a++)F(da[a]);P.length=0;da.length=0;H.length=0};k.debug=function(){J.log(String(P.length)+" objects with manifolds",P);J.log(String(da.length)+" sensors",da);for(var a=[],b=[],c=0;c<da.length;c++){var d=da[c];90==d.type&&a.push(d);110==
d.type&&b.push(d)}J.log(String(a.length)+" collision sensors",a);J.log(String(b.length)+" ray sensors",b)};k.set_plock_smooth_factor=function(a){N=a}});w.a=f},function(D,w,f){D=f(0);var M=f(19),U=f(1),n=f(2),z=f(73);f=Object(D.a)("physics",function(e,f){function m(a,e,k,c){return n.V(a,c[k[0]],c[k[1]],c[k[2]])}function v(a,e,k,c,f){e=Math.abs(a[2]-e[2]);return e<f&&y.kR(a,k,c)?e:Number.MAX_VALUE}var q=Object(M.a)(e),r=Object(U.a)(e),y=Object(z.a)(e);f.CM_WALK=0;f.CM_RUN=1;f.CM_CLIMB=2;f.CM_FLY=3;
f.enable_simulation=function(a){q.eb(a)?q.enable_simulation(a):r.Ma("No physics for object "+a.name)};f.disable_simulation=function(a){q.eb(a)?q.disable_simulation(a):r.Ma("No physics for object "+a.name)};f.has_physics=function(a){return q.eb(a)};f.has_simulated_physics=function(a){return q.has_simulated_physics(a)};f.has_dynamic_physics=function(a){return q.has_dynamic_physics(a)};f.set_gravity=function(a,e){r.ef("set_gravity","set_object_gravity");q.eb(a)?q.set_gravity(a,0,0,-e):r.Ma("No physics for object "+
a.name)};f.set_object_gravity=function(a,e){q.eb(a)?q.set_gravity(a,e[0],e[1],e[2]):r.Ma("No physics for object "+a.name)};f.set_transform=function(a,e,k){q.eb(a)?q.set_transform(a,e,k):r.Ma("No physics for object "+a.name)};f.sync_transform=function(a){q.eb(a)?q.sync_transform(a):r.Ma("No physics for object "+a.name)};f.apply_velocity=function(a,e,k,c){q.eb(a)?q.apply_velocity(a,e,k,c):r.Ma("No physics for object "+a.name)};f.apply_velocity_world=function(a,e,k,c){q.eb(a)?q.apply_velocity_world(a,
e,k,c):r.Ma("No physics for object "+a.name)};f.apply_force=function(a,e,k,c){q.eb(a)?q.apply_force(a,e,k,c,!1):r.Ma("No physics for object "+a.name)};f.apply_force_world=function(a,e,k,c){q.eb(a)?q.apply_force(a,e,k,c,!0):r.Ma("No physics for object "+a.name)};f.apply_torque=function(a,e,k,c){q.eb(a)?q.apply_torque(a,e,k,c):r.Ma("No physics for object "+a.name)};f.set_angular_velocity=function(a,e,k,c){q.eb(a)?q.set_angular_velocity(a,e,k,c):r.Ma("No physics for object "+a.name)};f.vehicle_throttle=
function(a,e){q.eb(a)?(q.is_vehicle_chassis(a)||q.is_vehicle_hull(a)||r.error("Wrong object"),q.vehicle_throttle(a,n.M(e,-1,1))):r.Ma("No physics for object "+a.name)};f.vehicle_throttle_inc=function(a,e,k){if(q.eb(a)){q.is_vehicle_chassis(a)||q.is_vehicle_hull(a)||r.error("Wrong object");e=n.M(e,0,1);var c=a.Ba.Do;-1==k||1==k?c=Math.max(-1,Math.min(c+k*e,1)):0==k&&0<=c?c=Math.max(0,c-e):0==k&&0>c?c=Math.min(0,c+e):r.error("Wrong steering direction");q.vehicle_throttle(a,n.M(c,-1,1))}else r.Ma("No physics for object "+
a.name)};f.vehicle_steer=function(a,e){q.eb(a)?(q.is_vehicle_chassis(a)||q.is_vehicle_hull(a)||r.error("Wrong object"),q.vehicle_steer(a,n.M(e,-1,1))):r.Ma("No physics for object "+a.name)};f.vehicle_steer_inc=function(a,e,k){if(q.eb(a)){q.is_vehicle_chassis(a)||q.is_vehicle_hull(a)||r.error("Wrong object");e=n.M(e,0,1);var c=a.Ba.Pp;-1==k||1==k?c=Math.max(-1,Math.min(c+k*e,1)):0==k&&0<=c?c=Math.max(0,c-e):0==k&&0>c?c=Math.min(0,c+e):r.error("Wrong steering direction");q.vehicle_steer(a,n.M(c,-1,
1))}else r.Ma("No physics for object "+a.name)};f.vehicle_brake=function(a,e){q.eb(a)?(q.is_vehicle_chassis(a)||q.is_vehicle_hull(a)||r.error("Wrong object"),q.vehicle_brake(a,n.M(e,0,1))):r.Ma("No physics for object "+a.name)};f.vehicle_brake_inc=function(a,e){if(q.eb(a)){q.is_vehicle_chassis(a)||q.is_vehicle_hull(a)||r.error("Wrong object");e=n.M(e,-1,1);var k=a.Ba.Sq;q.vehicle_brake(a,n.M(k+k*e,0,1))}else r.Ma("No physics for object "+a.name)};f.is_vehicle_chassis=function(a){return q.is_vehicle_chassis(a)};
f.is_vehicle_hull=function(a){return q.is_vehicle_hull(a)};f.get_vehicle_name=function(a){if(!q.eb(a))return r.Ma("No physics for object "+a.name),null;if(q.is_vehicle_chassis(a)||q.is_vehicle_hull(a))return a.xg.name;r.error("Wrong object");return null};f.get_vehicle_throttle=function(a){if(!q.eb(a))return r.Ma("No physics for object "+a.name),null;if(q.is_vehicle_chassis(a)||q.is_vehicle_hull(a))return a.Ba.Do;r.error("Wrong object");return null};f.get_vehicle_steering=function(a){if(!q.eb(a))return r.Ma("No physics for object "+
a.name),0;if(q.is_vehicle_chassis(a)||q.is_vehicle_hull(a))return a.Ba.Pp;r.error("Wrong object");return 0};f.get_vehicle_brake=function(a){if(!q.eb(a))return r.Ma("No physics for object "+a.name),0;if(q.is_vehicle_chassis(a)||q.is_vehicle_hull(a))return a.Ba.Sq;r.error("Wrong object");return 0};f.get_vehicle_speed=function(a){if(!q.eb(a))return r.Ma("No physics for object "+a.name),0;if(q.is_vehicle_chassis(a)||q.is_vehicle_hull(a))return q.get_vehicle_speed(a);r.error("Wrong object");return 0};
f.is_character=function(a){return q.eG(a)};f.set_character_move_dir=function(a,e,k){q.eb(a)?q.set_character_move_dir(a,e,k):r.Ma("No physics for object "+a.name)};f.set_character_move_type=function(a,e){q.eb(a)?q.set_character_move_type(a,e):r.Ma("No physics for object "+a.name)};f.set_character_walk_velocity=function(a,e){q.eb(a)?q.set_character_walk_velocity(a,e):r.Ma("No physics for object "+a.name)};f.set_character_run_velocity=function(a,e){q.eb(a)?q.set_character_run_velocity(a,e):r.Ma("No physics for object "+
a.name)};f.set_character_fly_velocity=function(a,e){q.eb(a)?q.set_character_fly_velocity(a,e):r.Ma("No physics for object "+a.name)};f.character_jump=function(a){q.eb(a)?q.character_jump(a):r.Ma("No physics for object "+a.name)};f.character_rotation_inc=function(a,e,k){q.eb(a)?q.character_rotation_inc(a,e,k):r.Ma("No physics for object "+a.name)};f.set_character_rotation=function(a,e,k){q.eb(a)?q.set_character_rotation(a,e,k):r.Ma("No physics for object "+a.name)};f.set_character_rotation_v=function(a,
e){q.eb(a)?q.set_character_rotation_v(a,e):r.Ma("No physics for object "+a.name)};f.set_character_rotation_h=function(a,e){q.eb(a)?q.set_character_rotation_h(a,e):r.Ma("No physics for object "+a.name)};f.set_character_vert_move_dir_angle=function(a,e){q.eb(a)?q.set_character_vert_move_dir_angle(a,e):r.Ma("No physics for object "+a.name)};f.append_collision_test=function(a,e,k,c){q.eb(a)?q.append_collision_test(a,e||"ANY",k,c||!1):r.Ma("No physics for object "+a.name)};f.remove_collision_test=function(a,
e,k){q.eb(a)?q.remove_collision_test(a,e||"ANY",k):r.Ma("No physics for object "+a.name)};f.apply_collision_impulse_test=function(a,e){q.eb(a)?q.apply_collision_impulse_test(a,e):r.Ma("No physics for object "+a.name)};f.clear_collision_impulse_test=function(a){q.eb(a)?q.clear_collision_impulse_test(a):r.Ma("No physics for object "+a.name)};f.append_ray_test=function(a,e,k,c,f,b){a=a||null;return null==a||q.eb(a)?q.append_ray_test(a,e,k,c||"ANY",f,b||!1,!1,!1,!1):(r.Ma("No physics for object "+a.name),
0)};f.append_ray_test_ext=function(a,e,k,c,f,b,g,m,n){a=a||null;return null==a||q.eb(a)?q.append_ray_test(a,e,k,c||"ANY",f,b||!1,g||!1,m||!1,n||!1):(r.Ma("No physics for object "+a.name),0)};f.remove_ray_test=function(a){q.zG(a)?q.remove_ray_test(a):r.error("Wrong ray test ID")};f.change_ray_test_from_to=function(a,e,k){q.zG(a)?q.change_ray_test_from_to(a,e,k):r.error("Wrong ray test ID")};f.apply_constraint=function(a,e,k,c,f,b,g,m,n,u){q.eb(e)&&q.eb(f)?q.apply_constraint(a,e,k,c,f,b,g,m,n,u):r.error("Wrong objects")};
f.clear_constraint=function(a){q.eb(a)&&q.LQ(a)?q.clear_constraint(a):r.error("Wrong object")};f.pull_to_constraint_pivot=function(a,e,k,c,f,b){q.eb(a)&&q.eb(c)?q.pull_to_constraint_pivot(a,e,k,c,f,b):r.error("Wrong objects")};f.navmesh_get_island=function(a,e,k){k||(k=m);if(q.eb(a)){var c=a.xa.ks;return c?y.navmesh_get_island(c,e,k):(r.error(a.name+" is not a navigation mesh object"),null)}r.Ma("No physics for object "+a.name)};f.navmesh_find_path=function(a,e,k,c){if(q.eb(a)){var f=a.xa.ks;if(!f)return r.error(a.name+
" is not a navigation mesh object"),null;c=c||{};a={};a.do_not_pull_string=!!c.do_not_pull_string;a.distance_to_closest=c.distance_to_closest||m;a.distance_to_farthest=c.distance_to_farthest||v;a.island=c.island||0;a.allowed_distance=c.allowed_distance||Number.MAX_VALUE;a.return_normals=c.return_normals||!1;return y.navmesh_find_path(f,e,k,a)}r.Ma("No physics for object "+a.name)};f.sync_bounding=function(a,e){e||(e=a.Aa[0].Bb);q.Bp(e)&&q.sync_bounding(a,e)};f.sync_mesh=function(a,e){e||(e=a.Aa[0].Bb);
q.Bp(e)&&q.sync_mesh(a,e)}});w.a=f},function(D,w,f){D=f(0);var M=f(16),U=f(14),n=f(4),z=f(15),e=f(39),m=f(12),C=f(9),v=f(1),q=f(22),r=f(10),y=f(11),a=f(18),T=f(13),k=f(6),c=f(3);f=Object(D.a)("__anchors",function(f,b){function g(){if(!Aa&&!la){var a=na;if(a)if("visible"==a.lastElementChild.style.visibility)l(),na=null;else if(1==a.style.opacity){var b=a.lastElementChild;a=a.firstElementChild;var c=b.firstElementChild,d=Math.ceil(b.getBoundingClientRect().width),g=Math.ceil(b.getBoundingClientRect().height),
e=Math.ceil(a.getBoundingClientRect().width),k=Math.ceil(a.getBoundingClientRect().height);b.style.position="absolute";b.style.visibility="visible";var f=!0,m=!0;a.style.display="none";Aa=!0;e!=d?da.animate(e,d,200,function(a){a==d&&(f=!1,m||(Aa=!1,c.style.visibility="visible"));b.style.width=a+"px"}):(f=!1,m||(Aa=!1));k!=g?da.animate(k,g,200,function(a){a==g&&(m=!1,f||(Aa=!1,c.style.visibility="visible"));b.style.height=a+"px"}):(m=!1,f||(Aa=!1))}}}function l(){var a=na.lastElementChild;na.firstElementChild.style.display=
"";a.style.visibility="hidden";a.style.position="relative";a.firstElementChild.style.visibility="hidden"}function w(a){a.style.cssText+="color:       #fff;font-family: Arial;font-size:   12px;font-weight: bold;line-height: 1.25;"}function u(a,b,c){var d=document.createElement("div"),g=document.createElement("span");c&&(d.style.maxWidth=c+"px");d.style.cssText+="background-color:   #000;border-radius:      20px 20px 20px 0px;bottom:             -0.1;box-shadow:         0px 0px 10px rgb(180, 180, 200);-webkit-box-shadow: 0px 0px 10px rgb(180, 180, 200);left:               0;box-sizing:         border-box;opacity:            1.0;padding:            6px 12px 6px 12px;position:           relative;z-index:            2;";
w(g);g.innerHTML=a;d.style.visibility="hidden";g.style.visibility="hidden";d.appendChild(g);b.appendChild(d);J.add_click_listener(b,function(){Aa||b==na||1!=b.style.opacity||la||(na&&"visible"==na.lastElementChild.style.visibility&&l(),na=b)})}function F(){for(var a=0,b=0;b<d.length;b++)d[b].zo&&a++;Ja=new Float32Array(3*a)}function R(a,b){return b.depth-a.depth}function O(a,b,c){a=a.element;t.lG&&(b=Math.floor(b),c=Math.floor(c));"transform"in a.style?a.style.transform="translate3d("+b+"px, "+c+
"px, 0px)":"webkitTransform"in a.style?a.style.webkitTransform="translate3d("+b+"px, "+c+"px, 0px)":(a.style.left=b+"px",a.style.top=c+"px")}function K(a){for(var b=0;b<d.length;b++)if(d[b].obj==a)return!0;return!1}var A=Object(M.a)(f),ca=Object(U.a)(f),L=Object(n.a)(f),D=Object(z.a)(f),J=Object(e.a)(f),W=Object(m.a)(f),B=Object(C.a)(f),ba=Object(v.a)(f),I=Object(q.a)(f),P=Object(r.a)(f),p=Object(y.a)(f),da=Object(a.a)(f),H=Object(T.a)(f),t=L.wa,d=[],la=!1,na=null,pa=!1,Aa=!1,Ja=new Float32Array(0),
N=new Uint8Array(16),oa=new Float32Array(2),Y=new Float32Array(3),Q=new Float32Array(3);b.append=function(a){if(!K(a)){var b=a.anchor.zo&&!!P.yc(P.Bh(),p.Xn);b={type:a.anchor.type,obj:a,x:0,y:0,depth:0,wm:"out",zo:b,element:null,fp:null,aM:a.anchor.WR,hl:a.anchor.hl};switch(b.type){case "ANNOTATION":var c=b.obj;a=D.get_container();var e=W.get_meta_tags(c);c=c.name;var k="",f=document.createElement("div"),l=f.cloneNode(!1),m=document.createElement("span");f.style.cssText+="position:        absolute;height:          0;top:             0;left:            0;transform-style: preserve-3d;";
f.style.visibility="hidden";e&&(k=e.description||k,c=e.title||c);m.innerHTML=c;m.style.cssText+="-webkit-touch-callout: none;-webkit-user-select:   none;-khtml-user-select:    none;-moz-user-select:      none;-ms-user-select:       none;user-select:           none;cursor:                default;";w(m);m.style.whiteSpace="nowrap";l.appendChild(m);f.appendChild(l);k&&u(k,f,b.aM);a.appendChild(f);b.element=f;break;case "ELEMENT":if(b.element=document.getElementById(a.anchor.hl),b.element)for(e=0;e<d.length;e++)"ELEMENT"==
d[e].type&&d[e].hl==a.anchor.hl&&(ba.warn("Anchor with the id '"+a.anchor.hl+"' already exists, making the new anchor generic."),b.type="GENERIC");else ba.warn("Anchor HTML element with the id '"+a.anchor.hl+"' was not found, making it generic."),b.type="GENERIC"}d.push(b);F();pa||(pa=!0,D.get_container().addEventListener("mouseup",g))}};b.remove=function(a){for(var b=0;b<d.length;b++){var c=d[b];if(c.obj==a){"ANNOTATION"==c.type&&(a=c,D.get_container().removeChild(a.element));d.splice(b,1);F();break}}};
b.update=function(a){for(var b=0,c=d.length;c--;){var g=d[c];if(g.zo){var e=k.j(g.obj.ka.na,Y);Ja.set(e,3*b++)}var f=Ha(g,Y);e=f[0];var l=f[1];f=f[2];if(a||e!=g.x||l!=g.y||f!=g.depth){switch(g.type){case "ANNOTATION":var m=e,t=l;O(g,m,t);break;case "ELEMENT":t=g.element.getBoundingClientRect(),m=e-t.width/2,t=l-t.height/2,O(g,m,t)}g.x=e;g.y=l;g.depth=f;g.fp&&g.fp(e,l,g.wm,g.obj,g.element)}}d.sort(R);for(c=0;c<d.length;c++)g=d[c],"GENERIC"!=g.type&&(g.element.style.zIndex=na==g.element?d.length:c);
0<b&&(a=P.yc(P.Bh(),p.Xn),b=a.vb[0].jb[0],A.KU(b.fb,Ja),p.zd(a,b))};var Ha=function(){var a=c.create();return function(b,c){var d=P.ml(P.Bh()),g=k.j(b.obj.ka.na,a);ca.project_point(d,g,c);k.v(g,b.obj.ka.na);return c}}();b.rV=function(){var a=D.get_container(),b=P.get_active();b=P.yc(b,p.mh);b=!(!b||!b.enable_hmd_stereo);for(var g=d.length;g--;){var e=d[g],k=e.obj,f=k.ka,m=e.x,t=e.y,n=e.depth,u=P.ml(P.Bh()),r=H.get_translation(k,Y);u=H.get_translation(u,Q);r=c.dist(r,u);(n=0>m||0>t||0>n||1<n||P.is_hidden(k)||
m>=a.clientWidth||t>=a.clientHeight)||(f.dk?(n=f.Vg,f=r<f.Wg?!1:n==B.Qy||r<n?!0:!1):f=!0,n=!f);f=n?"out":"visible";e.zo&&"out"!=f&&(f=e,n=P.yc(P.Bh(),p.Xn).qa,r=D.Wq(f.x,f.y,oa,n),I.Xw(n.Hf,r[0],n.height-r[1],2,2,N),f=255<=N[0]+N[4]+N[8]+N[12]?"visible":"out"==f.wm||0==N[0]+N[4]+N[8]+N[12]?"covered":f.wm);b&&(f="out");if(f!=e.wm){switch(e.type){case "ANNOTATION":case "ELEMENT":var q=e.element;q&&("out"==f?(q.style.visibility="hidden",q.children.length&&(q.children[0].style.visibility="hidden")):"visible"==
f?(q.style.visibility="visible",q.children.length&&(q.children[0].style.visibility="visible"),q.style.opacity=1):(q.style.visibility="visible",q.style.opacity=.1,q.children.length&&(q.children[0].style.visibility="visible"),"ANNOTATION"==e.type&&1<q.children.length&&"visible"==q.lastElementChild.style.visibility&&(l(),q==na&&(na=null))))}e.wm=f;e.fp&&e.fp(m,t,e.wm,k,q)}}};b.attach_move_cb=function(a,b){for(var c=0;c<d.length;c++)d[c].obj==a&&(d[c].fp=b)};b.detach_move_cb=function(a){for(var b=0;b<
d.length;b++)d[b].obj==a&&(d[b].fp=null)};b.cleanup=function(){for(var a=0;a<d.length;a++){var b=d[a];"ANNOTATION"==b.type&&D.get_container().removeChild(b.element)}d.length=0};b.is_anchor=K;b.get_element_id=function(a){for(var b=0;b<d.length;b++)if(d[b].obj==a)return d[b].hl;return!1};b.pause=function(){la=!0};b.resume=function(){la=!1};b.xS=function(a,b){for(var c=-1,g=0;g<d.length;g++){var e;if(e="visible"==d[g].wm){var k=d[g];if(k.element){e=Math.round(k.element.offsetWidth)||0;var f=Math.round(k.element.offsetHeight)||
0}else f=e=0;var l=k.x;k=k.y;e=a>=l&&a<=l+e&&b<k&&b>=k-f?!0:!1}if(e)if(0>c){var m=d[g].depth;c=g}else d[g].depth<m&&(c=g,m=d[g].depth)}return 0>c?null:d[c].obj}});w.a=f},function(D,w,f){function M(a){a=a.ka;for(var c=a.Fp,e=a.tw,b=0;b<c.length;b++){for(var g=c[b],k=e[b],f=0;f<k.length;f+=2)for(var m=k[f],n=k[f+1],q=0;4>q;q++)g.ye[m+q]=a.ye[n+q],g.qf[m+q]=a.qf[n+q],g.De[m+q]=a.De[n+q],g.wf[m+q]=a.wf[n+q];g.lg=a.lg}}w.e=function(a,c){var k=a.data.bones;a=a.pose.bones;for(var b={},g=0;g<a.length;g++){var f=
a[g],q=f.bone,u=q.name,r=b[u]={Ni:0,yJ:-1,vn:null,Lu:[],ru:[],Yc:null,Yp:n.b(),EC:n.b(),Ai:n.b(),GC:n.b(),lt:n.b(),ey:n.b(),dy:n.b(),kt:n.b(),FC:n.b(),cy:!1,OI:new Float32Array(3)};u=new Float32Array(q.matrix_local);var y=new Float32Array(16);e.invert(u,y);f=new Float32Array(f.matrix_basis);var z=r.OI;m.subtract(U._1(q.tail_local),U._1(q.head_local),z);U._68(z,y,z);n.d(u,r.Ai);n.d(f,r.kt);n.a(r.Ai,r.lt);n.p(r.Ai,r.GC)}for(g=0;g<k.length;g++){u=k[g].name;f=U._19("name",u,a);r=b[u];q=f.parent_recursive;
r.ru.push(r);for(y=0;y<q.length;y++)f=q[y],f=f.name,f=b[f],r.ru.push(f);q.length?(f=q[0],f=f.name,f=b[f],r.vn=f,n.p(f.Ai,v),n.q(v,r.Ai,r.Yp),f.Lu.push(r)):n.a(r.Ai,r.Yp);r.Ni=g;r.name=u;n.q(r.Yp,r.kt,r.EC)}c.ka.Mg=b};w.b=function(e,c,f,b,g){var k=e.ka,l=k.lg;c=k.Mg[c];var m=c.Ni;e=c.Ai;var F=r,C=k.De,w=k.wf,K=k.ye;k=k.qf;var A=C[4*m+1],T=C[4*m+2],L=C[4*m+3],D=w[4*m+1],J=w[4*m+2],W=w[4*m+3];F[0]=(1-l)*C[4*m]+l*w[4*m];F[1]=(1-l)*A+l*D;F[2]=(1-l)*T+l*J;F[3]=(1-l)*L+l*W;C=y;w=a;C[0]=K[4*m];C[1]=K[4*m+
1];C[2]=K[4*m+2];C[3]=K[4*m+3];w[0]=k[4*m];w[1]=k[4*m+1];w[2]=k[4*m+2];w[3]=k[4*m+3];z.slerp(C,w,l,C);l=v;n.w(F,l);n.r(C,l);f?(f=q,n.G(e,c.OI,f),n.q(l,f,l)):n.q(l,e,l);if(b){if(b=c.vn)f=q,n.p(b.lt,f),n.q(f,l,l);b=q;n.p(c.Yp,b);n.q(b,l,l)}n.a(l,g)};w.c=function(a,c,e,b){var g=a.ka;c=g.Mg[c];var k=g.De,f=g.ye;b?n.q(c.Yp,e,c.EC):n.a(e,c.lt);T(c,b,k,f);g.lg=0;M(a)};w.f=M;f.d(w,"d",function(){return T});w.a=function(a,c){return c in a.ka.Mg};var U=f(2),n=f(6),z=f(8),e=f(21),m=f(3),C=f(7),v=n.b(),q=n.b(),
r=new Float32Array(4),y=new Float32Array(4),a=new Float32Array(4),T=function(){var a=z.create(),c=n.b(),e=n.b(),b=C.create();return function R(k,f,l,m){var u=k.EC,q=k.Ai,r=k.lt,v=k.vn;v?(v=v.lt,f?n.q(v,u,r):(n.p(v,e),n.q(e,r,u))):f?n.a(u,r):n.a(r,u);n.p(q,c);n.q(r,c,c);f=k.Ni;n.l(c,b);l[4*f]=b[0];l[4*f+1]=b[1];l[4*f+2]=b[2];l[4*f+3]=b[3];n.g(c,a);m[4*f]=a[0];m[4*f+1]=a[1];m[4*f+2]=a[2];m[4*f+3]=a[3];k=k.Lu;for(f=0;f<k.length;f++)u=k[f],u.Yc||R(u,!0,l,m)}}()},function(D,w,f){function M(f){e.scale(f.color,
f.Qg,f.dr)}f.d(w,"a",function(){return m});w.b=function(e,f){e.color[0]=f[0];e.color[1]=f[1];e.color[2]=f[2];M(e)};w.e=function(e,f){e.at=f};w.c=function(e,f){e.distance=f};w.f=function(e,f){e.En=f};w.d=function(e,f){e.Qg=f;M(e)};f.d(w,"g",function(){return C});var U=f(8),n=f(6),z=f(2),e=f(3),m=function(){var f=U.create(),m=e.create();return function(r,q){r=r.data;var a=q.lc={name:"",type:r.type,DH:new Float32Array(3),direction:new Float32Array(3),color:new Float32Array(3),dr:new Float32Array(3),
kF:0,MC:!1,En:0,at:0,br:.1,ar:30,MF:!1,hH:!1,vF:!1,In:!0,Nn:!0,Qg:1,distance:25,sX:"INVERSE_SQUARE"};a.name=q.name;a.In=r.use_diffuse;a.Nn=r.use_specular;q=n.g(q.ka.na,f);q=z._34(q,z.f,m);e.normalize(q,q);a.direction.set(q);a.color[0]=r.color[0];a.color[1]=r.color[1];a.color[2]=r.color[2];a.Qg=a.kF=r.energy;M(a);a.distance=r.distance;a.MC=r.use_sphere;a.br=r.clip_start;a.ar=r.clip_end;if("POINT"===a.type||"SPOT"===a.type)a.distance=r.distance;"SPOT"===a.type?(a.at=r.spot_blend,a.En=r.spot_size):"POINT"===
a.type&&(a.En=Math.PI/2);a.MF=r.b4w_generate_shadows;a.vF=r.b4w_dynamic_intensity}}(),C=function(){var f=U.create();return function(m){var r=m.lc;if(r){m=n.g(m.ka.na,f);z._34(m,z.f,r.direction);e.normalize(r.direction,r.direction);if("SUN"==r.type){m=Math.acos(e.dot(r.DH,z.n));var q=Math.acos(e.dot(r.direction,z.n));r.hH=Math.floor(m/.025)!=Math.floor(q/.025)?!0:!1}e.copy(r.direction,r.DH)}}}()},function(D,w,f){D=f(0);var M=f(5),U=f(14),n=f(4),z=f(45),e=f(46),m=f(31),C=f(29),v=f(22),q=f(11),r=f(17),
y=f(2);f=Object(D.a)("__scenegraph",function(a,f){function k(a,b){var c=[];N.Uh(a,function(b,d,g){-1<c.indexOf(g)?N.YS(a,b,d,g,ba(g)):c.push(g)});N.Na(a,function(a,d){for(a=0;a<d.Nb.length;a++){var g=d.Nb[a];b||d.type!=Y.de&&d.type!=Y.xd&&d.type!=Y.lh||(g.Kd=!0);-1<c.indexOf(g)?d.Nb[a]=ba(g):c.push(g)}})}function c(a,b){N.Na(a,function(c,d){d.type==Y.VC&&N.Lk(a,c,function(a,b){if(b.type==Y.Gi)for(a=0;a<b.Nb.length;a++){var c=b.Nb[a];c.Ka=Q.Ca;c.La=Q.Ca}});b||N.Lk(a,c,function(a,b,c){"DEPTH"==c.from&&
(c.Kd=!0)})});N.Na(a,function(b){var c={};l(a,b,c);for(var d in c){b=c[d];for(var g=b[0],e=0;e<b.length;e++)if(b[e].Ka==Q.Ca){g=b[e];break}var k=b[0];for(e=0;e<b.length;e++)if(b[e].La==Q.Ca){k=b[e];break}var f=b[0];for(e=0;e<b.length;e++)if(!b[e].Kd){f=b[e];break}for(e=0;e<b.length;e++)b[e].Ka=g.Ka,b[e].La=k.La,b[e].Kd=f.Kd}})}function l(a,b,c){N.Lk(a,b,function(b,d,g){g.active&&g.from==g.to&&(c[g.from]=c[g.from]||[],-1==c[g.from].indexOf(g)&&c[g.from].push(g),l(a,b,c))});N.cm(a,b,function(a,b,d){d.active&&
(c[d.from]=c[d.from]||[],-1==c[d.from].indexOf(d)&&c[d.from].push(d))});b=N.Kb(a,b);if(b.type==Y.Gi)for(var d=0;d<b.Nb.length;d++){var g=b.Nb[d];c[g.from].push(g)}}function b(a){var b=[Y.Gi,Y.Ty,Y.Mt,Y.de,Y.xd,Y.zq];ia.Ib||b.push(Y.YC);var c=N.uC(a),d=[];N.Na(c,function(a,e){for(var k=0;k<e.Nb.length;k++){var f=e.Nb[k];-1<b.indexOf(e.type)&&(f.fm=!0);var l=F(d,f,g(f));f.yb=l;e.Th[k]=l}for(k=0;k<e.Th.length;k++)l=e.Th[k],u(d,l);N.cm(c,a,function(k,f,l){if(!l.yb){if(-1<b.indexOf(e.type))l.fm=!0;else if((k=
E(c,a,l.from))&&l.active&&!l.yb){w(d,k);l.yb=k;return}k=F(d,l,g(l));l.yb=k}});N.Lk(c,a,function(a,b,c){u(d,c.yb)});N.cm(c,a,function(a,b,c){c.yb&&"NONE"==c.to&&u(d,c.yb)})})}function g(a){var b=a.to,c=a.active,d=a.yb;a.to="";a.active=!1;a.yb=null;var g=Ja.mE(a);a.to=b;a.active=c;a.yb=d;return g}function E(a,b,c){var d=null;N.Lk(a,b,function(a,b,g){if(g.active&&g.from==g.to&&g.from==c&&g.yb)return d=g.yb,!0});N.cm(a,b,function(a,b,g){if(g.active&&g.from==c&&g.yb)return d=g.yb,!0});return d}function w(a,
b){for(var c=0;c<a.length;c++){var d=a[c];d.tC===b&&d.Gs++}}function u(a,b){for(var c=0;c<a.length;c++){var d=a[c];d.tC===b&&d.Gs&&d.Gs--}}function F(a,b,c){if(b.wn)return w(a,b.wn.yb),b.wn.yb;if(b.fm)return R(b);for(var d=null,g=0;g<a.length;g++){var e=a[g];if(e.id==c&&0===e.Gs){d=e;break}}if(d&&!ia.AF)return d.Gs++,d.tC;b=R(b);a.push({id:c,Gs:1,tC:b});return b}function R(a){var b=a.zk*a.size,c=a.Ak*a.size,g=a.ky,e=a.Ee;switch(a.from){case "COLOR":return a.Kd?(g=Q.Sj(a.Zg?Q.Rt:Q.Qt,g,e),Q.resize(g,
b,c)):(g=a.Dr?Q.Sj(Q.pm,g,e):Q.Sj(Q.Yh,g,e),Q.resize(g,b,c),Q.UB(g,a.Ka,a.La)),g;case "DEPTH":return a.Kd?(g=Q.Sj(a.Zg?Q.Pt:Q.Ot,g,e),Q.resize(g,b,c)):(g=Q.Sj(Q.om,g,e),Q.resize(g,b,c),Q.UB(g,a.Ka,a.La)),g;case "CUBEMAP":return g=Q.ON(b,e);case "SCREEN":case "NONE":return null;default:d.va("Wrong slink param: "+a.from)}}function O(a,b){var c=!1;N.Uh(a,function(d,g,e){if(e&&(d=N.Kb(a,d),g=N.Kb(a,g),b(e,!1,d,g)))return c=!0});c||N.Na(a,function(a,c){for(a=0;a<c.Nb.length;a++)if(b(c.Nb[a],!0,c,null))return!0})}
function K(a){N.Na(a,function(b,c){if(c.type!=Y.Uk){var d=c.qa;N.cm(a,b,function(a,b,c){c.yb&&c.active&&c.yb&&(la.fx(d,c.from,c.yb),c.from==c.to&&b.qa&&la.fx(b.qa,c.from,c.yb))});for(b=0;b<c.Nb.length;b++){var g=c.Nb[b];g.active&&g.from==g.to&&la.fx(d,g.from,c.Th[b])}!d.wc&&!d.gg||d.Hf||(d.Hf=oa.WS(d.wc,d.gg))}});N.Na(a,function(b,c){if(c.type==Y.Kt||c.type==Y.Jy)b=p(a,c),c.qa.Hr=b[0].qa.Hf})}function A(a,b,c,d,g,e,k,f){var l=k.Qa[0],m=c.LA,p=c.wd,t=c.Cy,n=c.Aj,u=e.KH,r=e.LH,h=g.nC,q=g.dC;g=g.cC;
if(a&&0<a.$w.length&&!f)for(f=0;f<a.$w.length;f++){var v=la.sd(l,!0);v.ad=new Float32Array(4);k.Qa.push(v);var A=Y.Im(Y.de,v,!1,p,m,t,n,null,c.Yl);A.xp=a.$w[f];N.Fa(d,A);var y=B("COLOR","u_plane_reflection",1,c.dh,c.dh,!0,!0);y.Ka=Q.Ca;y.La=Q.Ca;u.push(y);a!=b&&(y=B("COLOR","u_plane_reflection",1,c.dh,c.dh,!0,!0),y.Ka=Q.Ca,y.La=Q.Ca,e.PS.push(y));h&&(N.ra(d,h,A,q),N.ra(d,h,A,g));if(a.Ov||b.Ov){v=Y.Im(Y.Ue,v,!1,p,m,t,n,null,c.Yl);v.xp=a.$w[f];N.Fa(d,v);y=B("DEPTH","DEPTH",1,c.dh,c.dh,!0,!0);var z=
B("COLOR","COLOR",1,c.dh,c.dh,!0,!0);z.Ka=Q.We;z.La=Q.We;N.ra(d,A,v,y);N.ra(d,A,v,z);b.Rw.push([v]);r.push(v);h&&(N.ra(d,h,v,q),N.ra(d,h,v,g))}else A.Nb.push(B("DEPTH","DEPTH",1,c.dh,c.dh,!0,!0)),r.push(A);b.oj.push([A])}}function T(a,b,c,d,g,e,k){var f=c.LA,l=c.wd,m=c.Cy,p=c.Aj,t=g.nC,n=g.dC;g=g.cC;var u=e.dF,r=e.cF;if(a&&a.Zw.length&&!k)for(k=0;k<a.Zw.length;k++){var h=la.jd(la.qd);h.width=c.Ui;h.height=c.Ui;la.aI(h,Math.PI/2,.1,100);la.set_projection(h,!1);var q=Y.Im(Y.xd,h,!1,l,f,m,p,null,c.Yl);
q.xp=a.Zw[k];q.th=y._6();for(var v=0;6>v;v++)q.Jm.push(la.RN());N.Fa(d,q);v=B("CUBEMAP","u_cube_reflection",c.Ui,1,1,!1,!1);v.Ka=Q.Ca;v.La=Q.Ca;u.push(v);a!=b&&(v=B("CUBEMAP","u_cube_reflection",c.Ui,1,1,!1,!1),v.Ka=Q.Ca,v.La=Q.Ca,e.OO.push(v));a!=b||a.tA||(v=B("CUBEMAP","u_sky_reflection",1,1,1,!1),v.Ee=!0,v.Ka=Q.Hi,v.La=Q.Ca,sky_reflect_links.push(v));t&&(N.ra(d,t,q,n),N.ra(d,t,q,g));a.Ov||b.Ov?(h=Y.Im(Y.Ge,h,!1,l,f,m,p,null,c.Yl),h.xp=a.Zw[k],h.th=q.th,h.Jm=q.Jm,N.Fa(d,h),v=B("COLOR","COLOR",c.Ui,
1,1,!1,!1),N.ra(d,q,h,B("DEPTH","DEPTH",c.Ui,1,1,!1,!1)),N.ra(d,q,h,v),r.push(h),b.Ez.push(h),t&&(N.ra(d,t,h,n),N.ra(d,t,h,g))):(q.Nb.push(B("DEPTH","DEPTH",c.Ui,1,1,!1,!1)),r.push(q));b.Tj.push(q)}}function L(a){var b=null,c=0;N.Na(a,function(a,d){if(d.type==Ha.dt){if(c==Ha.yU)return b=d,!0;c++}});return b}function D(a,b){var c=N.pk(a,b),d=Y.kd("NONE"),g=N.Fa(a,d),e=N.Or(a)[0];N.Uh(a,function(b,c){c==e&&N.OS(a,b,e,b,g)});var k=J(b,a);N.Uh(a,function(g,e,f){if(g==c){if(k){g=Y.kr();N.Fa(a,g);e=B("COLOR",
"RESOLVE",1,1,1,!0,!0);e.Zg=!0;e.Kd=!0;var l=B("DEPTH","RESOLVE",1,1,1,!0,!0);l.Zg=!0;l.Kd=!0;N.ra(a,b,g,e);N.ra(a,b,g,l);b=g}N.ra(a,b,d,B(Ha.aU,"u_color",f.size,f.zk,f.Ak,f.Hn,f.Zt));return!0}});N.gd(a,g,e,B("SCREEN","NONE",.5,.5,.5,!0,!0))}function J(a,b){var c=!1;a=N.pk(b,a);N.ah(b,a)&&(c=N.Ch(b,a,0),a=N.td(b,a,c,0),"COLOR"==a.from&&"COLOR"==a.to||"DEPTH"==a.from&&"DEPTH"==a.to?(c=N.Kb(b,c),c=J(c,b)):c="RESOLVE"==a.to);return c}function W(a,b,c,d){var g=c.Qa,e=b.Pv,k=b.anaglyph_use,f=b.pg.oj,l=
b.pg.Rw;b=N.Xl(a,N.fA(a,d),N.Sk);var m=[],p=[],t=[];b=N.clone(b,function(b){if(-1<Ea.indexOf(b.type)){p.push(b);var d=b}else{d=Y.xN(b);if(d.type==Y.de)for(var h=0;h<f.length;h++)if(f[h][0]==b){f[h]=[b,d];d.qa.ad=b.qa.ad;c.Qa.push(d.qa);break}if(b.type==Y.Ue)for(h=0;h<f.length;h++){if(l[h][0]==b){l[h]=[b,d];d.qa=f[h][1].qa;break}}else-1<g.indexOf(b.qa)&&(e?(la.qw(b.qa,la.Vf),la.qw(d.qa,la.Af),d.Sm=!0):(la.qw(b.qa,la.fd),la.qw(d.qa,la.rd)),g.push(d.qa));var k=N.pk(a,b);N.Lk(a,k,function(a,b,c){-1<Ea.indexOf(b.type)&&
m.push([b,d,c])});if(b.type!==Y.Gi)for(h=0;h<b.Nb.length;h++)d.Nb[h].wn=b.Nb[h];b=!0;for(h=0;h<N.bj(a,k);h++){var n=N.Tg(a,k,h);n=N.Kb(a,n);-1==Ea.indexOf(n.type)&&(b=!1)}b&&t.push(d)}return d},function(a){var b=ba(a,!0);b.wn=a;return b});for(var n=0;n<p.length;n++)N.rf(b,N.pk(b,p[n]));N.$q(b);k=Y.HO(e,k);n=N.Fa(a,k);if(ia.Tv)var u=Y.kd("NONE"),q=B("COLOR","u_color",1,1,1,!0,!0);else u=Y.Bz(),q=B("COLOR","COPY",1,1,1,!0,!0);q.Ka=Q.Ca;q.La=Q.Ca;N.Fa(a,u);N.ra(a,d,u,q);var h=B("COLOR","u_sampler_left",
1,1,1,!0,!0);h.fm=!0;h.Ka=Q.Ca;h.La=Q.Ca;N.ra(a,u,k,h);if(!d.Gc){if(ia.Tv){h=Y.kd("NONE");var r=B("COLOR","u_color",1,1,1,!0,!0)}else h=Y.Bz(),r=B("COLOR","COPY",1,1,1,!0,!0);N.Fa(b,h);r.wn=q;var v=N.Or(b)[0];v=N.Kb(b,v);N.ra(b,v,h,r)}h=B("COLOR","u_sampler_right",1,1,1,!0,!0);d.Gc&&(h.wn=q);h.Ka=Q.Ca;h.La=Q.Ca;N.RD(b,a,[N.Or(b)[0],n,h]);for(n=0;n<m.length;n++)N.ra(a,m[n][0],m[n][1],m[n][2]);d=B("SCREEN","NONE",0,0,0,!1,!1);for(n=0;n<t.length;n++)N.ra(a,u,t[n],d);N.Uh(a,function(b,c,d){N.Kb(a,b).type===
Y.Gi&&(d.wn=null)});return k}function B(a,b,c,d,g,e,k){return{from:a,to:b,size:c,zk:d,Ak:g,Hn:e,Zt:k,active:!0,yb:null,Zg:!1,Dr:!1,Kd:!1,Ka:Q.We,La:Q.We,fm:!1,ky:!1,Ee:!1}}function ba(a,b){var c=B(a.from,a.to,a.size,a.zk,a.Ak,a.Hn,a.Zt);c.active=a.active;!b&&a.yb&&d.va("Failed to clone slink with attached texture");c.yb=a.yb;c.Zg=a.Zg;c.Kd=a.Kd;c.Ka=a.Ka;c.La=a.La;c.fm=a.fm;c.ky=a.ky;c.Ee=a.Ee;return c}function I(a,b,c){if(b.type==c)return!0;b=da(a,b);for(var d=0;d<b.length;d++)if(I(a,b[d],c))return!0;
return!1}function P(a,b,c){if(b.type==c)return!0;b=p(a,b);for(var d=0;d<b.length;d++)if(P(a,b[d],c))return!0;return!1}function p(a,b){b=N.pk(a,b);b==N.Sy&&d.va("Subscene not in graph");for(var c=[],g=N.bj(a,b),e=0;e<g;e++){var k=N.Tg(a,b,e);k!=b&&c.push(N.Kb(a,k))}return c}function da(a,b){b=N.pk(a,b);b==N.Sy&&d.va("Subscene not in graph");for(var c=[],g=N.ah(a,b),e=0;e<g;e++){var k=N.Ch(a,b,e);k!=b&&c.push(N.Kb(a,k))}return c}function H(a){var b=[],c=[];O(a,function(a){a.yb&&-1==b.indexOf(a.yb)&&
(b.push(a.yb),c.push(a.yb,b.length-1))});return c}function t(a,b,c,d){b=a.from+"\\n";b+="NONE"!=a.to?a.to+"\\n":"";b+="(";if(a.Hn){c=a.zk;var g=a.Ak;Math.round(c)!=c&&(c=c.toFixed(2));Math.round(g)!=g&&(g=g.toFixed(2));b=b+((1==c?"":c)+"Sx"+((1==g?"":g)+"S"))+(a.Zt?" FACT":" VIEW")}else c=a.zk,g=a.Ak,b+=a.size*c+"x"+a.size*g;if("SCREEN"!=a.from){b+=" ";if(a.Kd)b+="RR";else{c=a.Ka;g=a.La;var e="";c==Q.Ca?e+="L":c==Q.We&&(e+="N");g==Q.Ca?e+="L":g==Q.We&&(e+="N");b+=e}for(c=0;c<d.length;c+=2)d[c]==a.yb&&
(b+=" "+d[c+1])}return b+")\\n"}var d=Object(M.a)(a),la=Object(U.a)(a),na=Object(n.a)(a),pa=Object(z.a)(a),Aa=Object(e.a)(a),Ja=Object(m.a)(a),N=Object(C.a)(a),oa=Object(v.a)(a),Y=Object(q.a)(a),Q=Object(r.a)(a),Ha=na.Lm,ia=na.wa,Ma=na.Pl,Ea=[Y.Bj,Y.ee,Y.xd,Y.Ge];f.kN=function(a){switch(a.to){case "COLOR":case "CUBEMAP":case "DEPTH":case "SCREEN":case "OFFSCREEN":case "RESOLVE":case "COPY":case "NONE":return!1;default:return!0}};f.Xp=O;f.iV=function(a,d,g){function e(a,b,c){if(a.length)for(var d=
0;d<a.length;d++)N.ra(f,a[d],b,c[d])}var f=a.Ya;g=g.pg;var l=a.pg,m=[],p=[],t=[],n=[],u=[],q=[];if(a.ld){var r=Y.$E();N.Fa(f,r);var v=Ma.No;r.qa.width=v;r.qa.height=v;var y=B("DEPTH","u_grass_map_depth",v,1,1,!1,!1);ia.Ib||(y.Ka=Q.Ca,y.La=Q.Ca);v=B("COLOR","u_grass_map_color",v,1,1,!1,!1);v.Ka=Q.Ca;v.La=Q.Ca}else v=y=r=null;r={nC:r,dC:y,cC:v};T(g,l,a,f,r,{dF:t,cF:q,OO:n});A(g,l,a,f,r,{KH:m,LH:u,PS:p},d);e(q,X,t);e(q,Ga,n);e(u,X,m);e(u,Ga,p);a.rj=[];a=a.nF;k(f,a);c(f,a);Ha.enabled&&(a=L(f))&&D(f,a);
b(f);K(f)};var X=null,Ga=null;f.bO=function(a,d,g,e){function f(b){var c=la.sd(Ia,!0);d.Qa.push(c);c=Y.Im(b,c,!1,C,h,ca,ea,M,a.Yl);N.Fa(l,c);b==Y.lh?(N.ra(l,m[0],c,B("COLOR","COLOR",1,1,1,!0,!0)),c.Nb.push(B("DEPTH","DEPTH",1,1,1,!0,!0))):(b=hb&&m[0].type==Y.Kt?eb:m[0],N.ra(l,eb,c,Qb),N.ra(l,b,c,vb));G&&(N.ra(l,G,c,sb),N.ra(l,G,c,Sb));for(b=0;b<n.length;b++)N.ra(l,n[b],c,u[b]);ic&&N.ra(l,ic,c,tc);if(r.length){var g=r.length;for(b=0;b<g;b++)N.ra(l,r[b],c,q[b])}if(v.length)for(b=0;b<v.length;b++)N.ra(l,
v[b],c,y[b]);fc&&N.ra(l,fc,c,oc);return c}var l=N.create(),m=[],t=[],n=[],u=[],r=[],q=[],v=[],y=[],z=[],h=a.LA,C=a.wd,F=a.shore_smoothing,H=a.cU,E=a.ssao,w=a.god_rays,P=a.pg,I=a.ZG,O=a.JM,R=a.motion_blur,na=a.compositing,J=a.antialiasing,ea=a.Aj,ca=a.Cy,M=a.Id,ha=a.XR,U=a.dN,Ja=a.HQ,ja=a.oS,oa=a.dof,cb=a.nF,Ea=a.refractions,wa=!!e.length,hb=1<ia.Jc;ia.zp=ia.zp&&!!M&&!(hb&&E);var pb=ia.zp,vb=B("COLOR","COLOR",1,1,1,!0,!0),Qb=B("DEPTH","DEPTH",1,1,1,!0,!0);if(hb){var wb=ba(Qb);vb.Zg=!0;vb.Kd=!0;Qb.Zg=
!0;Qb.Kd=!0}var Ia=d.Qa[0];if(a.ld){var G=Y.$E();N.Fa(l,G);var Ka=Ma.No;G.qa.width=Ka;G.qa.height=Ka;var sb=B("DEPTH","u_grass_map_depth",Ka,1,1,!1,!1);ia.Ib||(sb.Ka=Q.Ca,sb.La=Q.Ca);var Sb=B("COLOR","u_grass_map_color",Ka,1,1,!1,!1);Sb.Ka=Q.Ca;Sb.La=Q.Ca}else Sb=sb=G=null;if(M){la.HC(Ia,M);for(var Ya=0;Ya<M.li.length;Ya++)for(var Rc=M.csm_num,Fa=0;Fa<Rc;Fa++){var Xb=Y.CO(Fa,Ya,M,h);N.Fa(l,Xb);n.push(Xb);Ka=M.csm_resolution;var ub=Xb.qa;d.sI.push(ub);ub.width=Ka;ub.height=Ka;Xb.Ub=!0;var La=0<Ya?
Ya:Fa;if(ia.Ks){u.push(B("COLOR","u_shadow_map"+La,Ka,1,1,!1,!1));var Sa=B("DEPTH","DEPTH",Ka,1,1,!1,!1);Sa.Kd=!0;Xb.Nb.push(Sa)}else{var Ab=B("DEPTH","u_shadow_map"+La,Ka,1,1,!1,!1);ia.er&&(Ab.Ka=Q.Ca,Ab.La=Q.Ca,Ab.ky=!0);u.push(Ab);(pa.WO()||ia.tI)&&Xb.Nb.push(B("COLOR","COLOR",Ka,1,1,!1,!1))}G&&(N.ra(l,G,Xb,sb),N.ra(l,G,Xb,Sb))}}var Ac={nC:G,dC:sb,cC:Sb};T(P,P,a,l,Ac,{dF:y,cF:v},wa);A(P,P,a,l,Ac,{KH:q,LH:r},d);if(M){var mb=la.sd(Ia,!0);d.Qa.push(mb);var nb=Y.DO(mb,h);N.Fa(l,nb);nb.self_shadow_normal_offset=
M.self_shadow_normal_offset;for(Fa=0;Fa<n.length;Fa++)Xb=n[Fa],N.ra(l,Xb,nb,u[Fa]);if(pb){if(Ab=B("DEPTH","DEPTH",1,1,1,!0,!0),hb){Ab.Zg=!0;Ab.Kd=!0;var sa=Y.kr();N.Fa(l,sa);var Db=B("COLOR","RESOLVE",1,1,1,!0,!0);Db.Zg=!0;Db.Kd=!0;var Oa=B("DEPTH","RESOLVE",1,1,1,!0,!0);Oa.Zg=!0;Oa.Kd=!0;N.ra(l,nb,sa,Db);N.ra(l,nb,sa,Oa)}}else hb?Ab=B("DEPTH","DEPTH",1,1,1,!0,!0):ia.Ks?(Ab=B("DEPTH","DEPTH",1,1,1,!0,!0),Ab.Kd=!0):Ab=Qb;if(E){var Z=B("COLOR","u_color",1,1,1,!0,!0),Jb=B("DEPTH","u_depth",1,1,1,!0,
!0),Yc=la.sd(Ia,!0);d.Qa.push(Yc);var Pa=a.qU,tb=Y.FO(Yc,ca,Pa);N.Fa(l,tb);var cd=B("COLOR","u_ssao_mask",1,1,1,!0,!0);N.ra(l,nb,tb,Z);N.ra(l,nb,tb,Jb);var Lb=la.sd(Ia,!0);d.Qa.push(Lb);var Bb=Y.GO(Lb,Pa);N.Fa(l,Bb);var nd=B("COLOR","u_shadow_mask",1,1,1,!0,!0);N.ra(l,tb,Bb,cd);N.ra(l,nb,Bb,Jb)}G&&(N.ra(l,G,nb,sb),N.ra(l,G,nb,Sb))}else nb=null;var eb=Y.Im(Y.ic,Ia,!pb,C,h,ca,ea,null,a.Yl);X=eb;N.Fa(l,eb);M&&(pb?N.ra(l,nb,eb,Ab):nb.Nb.push(Ab));if(hb){var Tb=Y.kr();N.Fa(l,Tb);t.push(Tb);var lb=B("COLOR",
"RESOLVE",1,1,1,!0,!0);lb.Zg=!0;lb.Kd=!0;var kc=B("DEPTH","RESOLVE",1,1,1,!0,!0);kc.Zg=!0;kc.Kd=!0;N.ra(l,eb,Tb,lb);N.ra(l,eb,Tb,kc)}else t.push(eb);nb&&(cd?N.ra(l,Bb,eb,nd):N.ra(l,pb&&hb?sa:nb,eb,B("COLOR","u_shadow_mask",1,1,1,!0,!0)));G&&(N.ra(l,G,eb,sb),N.ra(l,G,eb,Sb));if(r.length){var lc=r.length;for(Ya=0;Ya<lc;Ya++)N.ra(l,r[Ya],eb,q[Ya])}if(v.length)for(Ya=0;Ya<v.length;Ya++)N.ra(l,v[Ya],eb,y[Ya]);m=t;t=[];if(!wa&&a.yN){var ob=Ha.enabled&&(Ha.dt===Y.zf||Ha.dt===Y.Vh);ub=la.sd(Ia,!0);ob||(ub.width=
ub.height=1);d.Qa.push(ub);var Ob=Y.YE(ub,!1,h);N.Fa(l,Ob);if(a.Fi){ub=la.sd(Ia,!0);ob||(ub.width=ub.height=1);d.Qa.push(ub);var mc=Y.YE(ub,!0,h);N.Fa(l,mc);N.ra(l,Ob,mc,B("COLOR","COLOR",1,1,1,ob,!0));N.ra(l,Ob,mc,B("DEPTH","DEPTH",1,1,1,ob,!0))}}else Ob=null;if(!I.refractions&&!Ea||wa)fc=null;else{if(hb)fc=Tb;else{if(ia.Tv)var fc=Y.kd("NONE"),Cb=B("COLOR","u_color",1,1,1,!0,!0);else fc=Y.Bz(),Cb=B("COLOR","COPY",1,1,1,!0,!0);N.Fa(l,fc);N.ra(l,m[0],fc,Cb)}var oc=B("COLOR","u_refractmap",1,1,1,!0,
!0);ia.Ib&&(oc.Ee=!0,oc.Ka=Q.Hi,oc.La=Q.Ca)}if(cb&&(Ea||F||H)){var Hc=la.sd(Ia,!0);d.Qa.push(Hc);var ic=Y.rO(Hc);N.Fa(l,ic);N.ra(l,hb?Tb:eb,ic,B("DEPTH","u_depth",1,1,1,!0,!0));var tc=B("COLOR","u_scene_depth",1,1,1,!0,!0);tc.Ka=Q.We;tc.La=Q.We}else ic=null;if(a.Av){var Kb=f(Y.Md);Ga=Kb;t.push(Kb);m=t;t=[]}if(a.glow_materials){var db=la.sd(Ia,!0);d.Qa.push(db);var kb=Y.Im(Y.He,db,!1,C,h,ca,ea);N.Fa(l,kb);ic&&N.ra(l,ic,kb,tc);fc&&N.ra(l,fc,kb,oc);G&&(N.ra(l,G,kb,sb),N.ra(l,G,kb,Sb));if(r.length)for(lc=
r.length,Ya=0;Ya<lc;Ya++)N.ra(l,r[Ya],kb,q[Ya]);if(v.length)for(Ya=0;Ya<v.length;Ya++)N.ra(l,v[Ya],kb,y[Ya]);a.Av&&N.ra(l,kb,Kb,B("SCREEN","NONE",0,0,0,!1,!1));N.ra(l,hb?Tb:eb,kb,hb?wb:Qb);var Fb=Y.kd("X_GLOW_BLUR");Fb.fc="GLOW_MASK_SMALL";Fb.uf=a.$i.small_glow_mask_width;var gb=B("COLOR","u_color",1,1,1,!0,!0);gb.Ka=Q.Ca;gb.La=Q.Ca;N.Fa(l,Fb);N.ra(l,kb,Fb,gb);var zb=Y.kd("Y_GLOW_BLUR");zb.fc="GLOW_MASK_SMALL";zb.uf=a.$i.small_glow_mask_width;var pc=B("COLOR","u_color",1,.5,.5,!0,!0);pc.Ka=Q.Ca;pc.La=
Q.Ca;N.Fa(l,zb);N.ra(l,Fb,zb,pc);var jc=Y.kd("X_GLOW_BLUR");jc.fc="GLOW_MASK_LARGE";jc.uf=a.$i.large_glow_mask_width;var Cc=B("COLOR","u_color",1,.5,.5,!0,!0);Cc.Ka=Q.Ca;Cc.La=Q.Ca;N.Fa(l,jc);N.ra(l,zb,jc,Cc);var bc=Y.kd("Y_GLOW_BLUR");bc.fc="GLOW_MASK_LARGE";bc.uf=a.$i.large_glow_mask_width;var Vb=B("COLOR","u_color",1,.25,.25,!0,!0);Vb.Ka=Q.Ca;Vb.La=Q.Ca;N.Fa(l,bc);N.ra(l,jc,bc,Vb);var Nc=la.sd(Ia,!0);d.Qa.push(Nc);var Oc=Y.sO(Nc,a);N.Fa(l,Oc);var Pc=B("COLOR","u_src_color",1,1,1,!0,!0);Pc.Ka=Q.Ca;
Pc.La=Q.Ca;if(a.Av)if(hb){var Qc=Y.kr();N.Fa(l,Qc);N.ra(l,Kb,Qc,lb);N.ra(l,Kb,Qc,kc);N.ra(l,Qc,Oc,Pc)}else N.ra(l,Kb,Oc,Pc);else N.ra(l,hb?Tb:eb,Oc,Pc);var Gc=B("COLOR","u_glow_mask_small",1,.5,.5,!0,!0);Gc.Ka=Q.Ca;Gc.La=Q.Ca;N.ra(l,zb,Oc,Gc);var Qd=B("COLOR","u_glow_mask_large",1,.25,.25,!0,!0);Qd.Ka=Q.Ca;Qd.La=Q.Ca;N.ra(l,bc,Oc,Qd);m=[Oc];t=[]}a.Av||(Ga=Kb=f(Y.Md),t.push(Kb),m=t,t=[]);if(ia.debug_view){ub=la.sd(Ia,!0);d.Qa.push(ub);var jd=Y.qO(ub);t.push(jd);N.Fa(l,jd);N.ra(l,m[0],jd,vb);N.ra(l,
m[0],jd,Qb);G&&(N.ra(l,G,jd,sb),N.ra(l,G,jd,Sb));Aa.vT(jd);m=t;t=[]}if(hb){var Fd=Y.kr();N.Fa(l,Fd);t.push(Fd);N.ra(l,m[0],Fd,lb);N.ra(l,m[0],Fd,kc);m=t;t=[]}var oe=m.slice(0);if(!wa&&a.$L){ub=la.sd(Ia,!0);d.Qa.push(ub);var Zd=Y.lO(ub);N.Fa(l,Zd);N.ra(l,m[0],Zd,hb?wb:Qb)}if(w&&cb&&!wa){var Gd=Ja.Al,xe=Ja.intensity,Hd=Ja.Vl,Rb=m[0],ie=C?!0:!1,ye=B("DEPTH","u_input",1,1,1,!0,!0),Za=B("COLOR","u_input",1,.25,.25,!0,!0);Za.Ka=Q.Ca;Za.La=Q.Ca;var Rd=Gd/Hd,$d=la.sd(Ia,!0);d.Qa.push($d);var Dc=Y.Cz($d,ie,
Gd,!0,Rd,h,Hd);N.Fa(l,Dc);N.ra(l,Rb,Dc,ye);Rd=Gd/Hd*.5;var dd=la.sd(Ia,!0);d.Qa.push(dd);var Gb=Y.Cz(dd,ie,Gd,!1,Rd,h,Hd);N.Fa(l,Gb);N.ra(l,Dc,Gb,Za);Rd=Gd/Hd*.25;var od=la.sd(Ia,!0);d.Qa.push(od);var yd=Y.Cz(od,ie,Gd,!1,Rd,h,Hd);N.Fa(l,yd);N.ra(l,Gb,yd,Za);var ed=Y.tO(xe,h);t.push(ed);N.Fa(l,ed);var Sc=B("COLOR","u_main",1,1,1,!0,!0);Sc.Ka=Q.Ca;Sc.La=Q.Ca;N.ra(l,Rb,ed,Sc);var gc=B("COLOR","u_god_rays",1,1,1,!0,!0);gc.Ka=Q.Ca;gc.La=Q.Ca;N.ra(l,yd,ed,gc);m=t;t=[]}if(O&&!wa){Rb=m[0];var Ub=Y.vO();N.Fa(l,
Ub);Sc=B("COLOR","u_input",1,1,1,!0,!0);Sc.Ka=Q.Ca;Sc.La=Q.Ca;N.ra(l,Rb,Ub,Sc);var pd=O.key,qd=O.edge_lum,xc=la.sd(Ia,!0);d.Qa.push(xc);var qc=Y.wO(pd,qd,h,xc);N.Fa(l,qc);var Mb=B("COLOR","u_luminance",1,.25,.25,!0,!0);Mb.Ka=Q.Ca;Mb.La=Q.Ca;if(O.adaptive){var Tc=Y.mO();N.Fa(l,Tc);Tc.qa.width=1;Tc.qa.height=1;var Kc=B("COLOR","u_input",1,.25,.25,!0,!0);Kc.Ee=!0;Kc.Ka=Q.Hi;Kc.La=Q.Ca;if(ia.Ib)Mb.Ee=!0,Mb.Ka=Q.Hi,N.ra(l,Ub,Tc,Kc);else{var hc=Y.cO(),uc=B("COLOR","u_color",1,.25,.25,!0,!0);N.Fa(l,hc);
N.ra(l,Ub,hc,uc);N.ra(l,hc,Tc,Kc)}N.ra(l,Tc,qc,B("COLOR","u_average_lum",1,1,1,!1,!1));qc.sm=!0}else qc.sm=!1,qc.average_luminance=O.average_luminance;N.ra(l,Rb,qc,B("COLOR","u_main",1,1,1,!0,!0));N.ra(l,Ub,qc,Mb);var Yb=qc,Ec=1,vc=[];for(Fa=0;5>Fa;Fa++)Fb=Y.kd("X_BLOOM_BLUR"),Fb.uf=a.$i.small_glow_mask_width,gb=B("COLOR","u_color",1,Ec,Ec,!0,!0),gb.Ka=Q.Ca,gb.La=Q.Ca,N.Fa(l,Fb),N.ra(l,Yb,Fb,gb),Ec/=2,zb=Y.kd("Y_BLOOM_BLUR"),zb.uf=a.$i.small_glow_mask_width,pc=B("COLOR","u_color",1,Ec,Ec,!0,!0),pc.Ka=
Q.Ca,pc.La=Q.Ca,N.Fa(l,zb),N.ra(l,Fb,zb,pc),Yb=zb,zb.mo=Ec,Fb.mo=Ec,vc.push(zb,Ec);var Zb=Y.nO(O.blur);N.Fa(l,Zb);for(Fa=0;Fa<vc.length;Fa+=2){zb=vc[Fa];var kd=vc[Fa+1];Gc=B("COLOR","u_bloom_level_"+(Fa/2).toString(),1,kd,kd,!0,!0);Gc.Ka=Q.Ca;Gc.La=Q.Ca;N.ra(l,zb,Zb,Gc)}N.ra(l,Rb,Zb,B("COLOR","u_main",1,1,1,!0,!0));t.push(Zb);m=t;t=[]}if(oa&&cb&&!wa){Rb=m[0];var xb=la.sd(Ia,!0);d.Qa.push(xb);var Hb=ia.RI&&ia.qE,qb=g.dof_bokeh&&Hb;if(qb){var Nb=Q.We,Bc=B("COLOR","u_color",1,1,1,!0,!0);Bc.Ka=Nb;Bc.La=
Nb;var nc=B("DEPTH","u_depth",1,1,1,!0,!0),cc=B("COLOR","u_color",1,.5,.5,!0,!0);cc.Dr=!0;cc.Ka=Q.We;cc.La=Q.We;var dc=B("COLOR","u_color",1,.5,.5,!0,!0);dc.Dr=!0;dc.Ka=Q.We;dc.La=Q.We;var $a=B("COLOR","u_blurred1",1,.5,.5,!0,!0);$a.Dr=!0;$a.Ka=Nb;$a.La=Nb;var ec=B("COLOR","u_blurred2",1,.5,.5,!0,!0);ec.Dr=!0;ec.Ka=Nb;ec.La=Nb;var rc=oe[0];if(g.te){var yc=la.sd(Ia,!0);d.Qa.push(yc);var yb=Y.Az(yc,"COC_FOREGROUND");yc.dof_distance=g.dof_distance;yc.dof_object=g.dof_object;yc.dof_front_start=g.dof_front_start;
yc.dof_front_end=g.dof_front_end;yc.dof_rear_start=g.dof_rear_start;yc.dof_rear_end=g.dof_rear_end;yc.dof_power=g.dof_power;yc.dof_bokeh=g.dof_bokeh;yc.dof_bokeh_intensity=g.dof_bokeh_intensity;yc.te=g.te;yc.dof_on=!0;N.Fa(l,yb);N.ra(l,Rb,yb,Bc);N.ra(l,rc,yb,nc);var ae=Y.kd("X_ALPHA_BLUR");N.Fa(l,ae);N.ra(l,yb,ae,cc);var be=Y.kd("Y_ALPHA_BLUR");N.Fa(l,be);N.ra(l,ae,be,dc);var Eb=la.sd(Ia,!0),Uc=Y.Az(Eb,"COC_COMBINE");d.Qa.push(Eb);Eb.dof_distance=g.dof_distance;Eb.dof_object=g.dof_object;Eb.dof_front_start=
g.dof_front_start;Eb.dof_front_end=g.dof_front_end;Eb.dof_rear_start=g.dof_rear_start;Eb.dof_rear_end=g.dof_rear_end;Eb.dof_power=g.dof_power;Eb.dof_bokeh=g.dof_bokeh;Eb.dof_bokeh_intensity=g.dof_bokeh_intensity;Eb.te=g.te;Eb.dof_on=!0;N.Fa(l,Uc);N.ra(l,Rb,Uc,Bc);N.ra(l,rc,Uc,nc);N.ra(l,be,Uc,B("COLOR","u_coc_fg",1,.5,.5,!0,!0))}else Eb=la.sd(Ia,!0),d.Qa.push(Eb),Uc=Y.Az(Eb,"COC_ALL"),Eb.dof_distance=g.dof_distance,Eb.dof_object=g.dof_object,Eb.dof_front_start=g.dof_front_start,Eb.dof_front_end=g.dof_front_end,
Eb.dof_rear_start=g.dof_rear_start,Eb.dof_rear_end=g.dof_rear_end,Eb.dof_power=g.dof_power,Eb.dof_bokeh=g.dof_bokeh,Eb.dof_bokeh_intensity=g.dof_bokeh_intensity,Eb.te=g.te,Eb.dof_on=!0,N.Fa(l,Uc),N.ra(l,Rb,Uc,Bc),N.ra(l,rc,Uc,nc);var sc=Y.kd("X_DOF_BLUR");sc.qa.dof_bokeh_intensity=g.dof_bokeh_intensity;N.Fa(l,sc);N.ra(l,Uc,sc,cc);var fd=Y.kd("Y_DOF_BLUR");fd.qa.dof_bokeh_intensity=g.dof_bokeh_intensity;N.Fa(l,fd);N.ra(l,sc,fd,dc);var rd=Y.kd("Y_DOF_BLUR");rd.qa.dof_bokeh_intensity=g.dof_bokeh_intensity;
N.Fa(l,rd);N.ra(l,sc,rd,dc);var wc=Y.ZE(xb,qb);xb.dof_distance=g.dof_distance;xb.dof_object=g.dof_object;xb.dof_front_start=g.dof_front_start;xb.dof_front_end=g.dof_front_end;xb.dof_rear_start=g.dof_rear_start;xb.dof_rear_end=g.dof_rear_end;xb.dof_power=g.dof_power;xb.dof_bokeh=g.dof_bokeh;xb.dof_bokeh_intensity=g.dof_bokeh_intensity;xb.te=g.te;xb.dof_on=!0;t.push(wc);N.Fa(l,wc);N.ra(l,Rb,wc,B("COLOR","u_sharp",1,1,1,!0,!0));N.ra(l,fd,wc,$a);N.ra(l,rd,wc,ec)}else{var Id=B("COLOR","u_color",1,1,1,
!0,!0);Id.Ka=Q.Ca;Id.La=Q.Ca;var Jd=B("COLOR","u_color",1,1,1,!0,!0);Jd.Ka=Q.Ca;Jd.La=Q.Ca;sc=Y.kd("X_BLUR");N.Fa(l,sc);N.ra(l,Rb,sc,Id);var Zc=Y.kd("Y_BLUR");N.Fa(l,Zc);N.ra(l,sc,Zc,Jd);var ce=oe[0];wc=Y.ZE(xb,qb);xb.dof_distance=g.dof_distance;xb.dof_object=g.dof_object;xb.dof_front_start=g.dof_front_start;xb.dof_front_end=g.dof_front_end;xb.dof_rear_start=g.dof_rear_start;xb.dof_rear_end=g.dof_rear_end;xb.dof_power=g.dof_power;xb.dof_bokeh=g.dof_bokeh;xb.dof_bokeh_intensity=g.dof_bokeh_intensity;
xb.te=g.te;xb.dof_on=!0;t.push(wc);N.Fa(l,wc);N.ra(l,Rb,wc,B("COLOR","u_sharp",1,1,1,!0,!0));N.ra(l,Zc,wc,B("COLOR","u_blurred",1,1,1,!0,!0));N.ra(l,ce,wc,B("DEPTH","u_depth",1,1,1,!0,!0))}m=t;t=[]}if(a.Fi){var Fc=f(Y.lh);t.push(Fc);m=t;t=[]}if(R&&!wa){var Lc=m[0],gd=Y.xO(ha.mb_decay_threshold,ha.mb_factor);t.push(gd);N.Fa(l,gd);N.ra(l,Lc,gd,B("COLOR","u_mb_tex_curr",1,1,1,!0,!0));gd.Nb.push(B("COLOR","u_mb_tex_accum",1,1,1,!0,!0));m=t;t=[]}if(!wa&&a.outline){Rb=m[0];var ld=la.sd(Ia,!0);d.Qa.push(ld);
var Sd=Y.zO(ld,h);N.Fa(l,Sd);var Kd=Y.kd("X_EXTEND"),Vc=B("COLOR","u_color",1,1,1,!0,!0),zd=B("COLOR","u_outline_mask",1,1,1,!0,!0);zd.Ka=Q.Ca;zd.La=Q.Ca;Kd.fn=!0;N.Fa(l,Kd);N.ra(l,Sd,Kd,Vc);var sd=B("COLOR","u_color",1,.5,.5,!0,!0);sd.Ka=Q.Ca;sd.La=Q.Ca;var $c=Y.kd("Y_EXTEND");$c.fn=!0;N.Fa(l,$c);N.ra(l,Kd,$c,sd);sc=Y.kd("X_BLUR");sc.fn=!0;N.Fa(l,sc);N.ra(l,$c,sc,sd);var zc=B("COLOR","u_color",1,.25,.25,!0,!0);zc.Ka=Q.Ca;zc.La=Q.Ca;var Td=B("COLOR","u_outline_mask_blurred",1,.25,.25,!0,!0);Td.Ka=
Q.Ca;Td.La=Q.Ca;Zc=Y.kd("Y_BLUR");Zc.fn=!0;N.Fa(l,Zc);N.ra(l,sc,Zc,zc);var Ld=Y.yO(ja);N.Fa(l,Ld);var Ud=B("COLOR","u_outline_src",1,1,1,!0,!0);Ud.Ka=Q.Ca;Ud.La=Q.Ca;N.ra(l,Rb,Ld,Ud);N.ra(l,Sd,Ld,zd);N.ra(l,Zc,Ld,Td);t.push(Ld);m=t;t=[]}k(l,cb);if((a.anaglyph_use||a.Pv||a.Us)&&!wa){var Vd=W(l,a,d,m[0]);t.push(Vd);m=t;t=[]}if(na&&!wa){Rb=m[0];var Ad=Y.pO(U.brightness,U.contrast,U.exposure,U.saturation),Bd=B("COLOR","u_color",1,1,1,!0,!0);Bd.Ka=Q.Ca;Bd.La=Q.Ca;(a.anaglyph_use||a.Pv||a.Us)&&!wa&&(Bd.fm=
!0);N.Fa(l,Ad);N.ra(l,Rb,Ad,Bd);t.push(Ad);m=t;t=[]}if(!m[0].Gc||m[0].type==Y.Gi||m[0].type==Y.Kt){var Md=Y.kd("NONE");N.Fa(l,Md);var ud=B("COLOR","u_color",1,1,1,!0,!0);ud.Ka=Q.Ca;ud.La=Q.Ca;N.ra(l,m[0],Md,ud);t.push(Md);m=t;t=[]}if(J){Rb=m[0];if(ia.smaa){var hd=B("COLOR","u_color",1,1,1,!0,!1);hd.Ka=Q.Ca;hd.La=Q.Ca;var Ib=Y.Dz(Y.Lt,a);N.Fa(l,Ib);N.ra(l,Rb,Ib,hd);var td=Y.Dz(Y.Aq,a);N.Fa(l,td);N.ra(l,Ib,td,hd);var de=B("COLOR","u_search_tex",1,1,1,!1,!1),je=B("COLOR","u_area_tex",1,1,1,!1,!1);de.Ka=
Q.Ca;de.La=Q.Ca;je.Ka=Q.Ca;je.La=Q.Ca;td.Nb.push(de);td.Nb.push(je);var ee=Y.Dz(Y.Mt,a);N.Fa(l,ee);N.ra(l,Rb,ee,hd);var pe=B("COLOR","u_blend",1,1,1,!0,!1);pe.Ka=Q.Ca;pe.La=Q.Ca;N.ra(l,td,ee,pe);t.push(ee)}else{var qe=Y.kO(a);N.Fa(l,qe);var ke=B("COLOR","u_color",1,1,1,!0,!1);ke.Ka=Q.Ca;ke.La=Q.Ca;(a.anaglyph_use||a.Pv||a.Us)&&!wa&&(ke.fm=!0);N.ra(l,Rb,qe,ke);t.push(qe)}m=t;t=[]}t.push(m[0]);Ob&&(mc?t.push(mc):t.push(Ob));Zd&&t.push(Zd);Ka=1;if(a.ux.HB){var ze=a.ux,Ae=a.Aj,re=Ae.Cn;Ka=re?re.SI:Ka;
var ad=Y.EO(Ae,h,ze,Ka);N.Fa(l,ad);t.push(ad);z.length&&(N.ra(l,ad,eb,z[0]),Kb&&N.ra(l,ad,Kb,z[0]),kb&&N.ra(l,ad,kb,z[0]),Fc&&N.ra(l,ad,Fc,z[0]));if(P.OQ)if(ia.Ib&&!ia.is_mobile_device){var vd=Y.uO(h,Ka);N.Fa(l,vd);var Wc=B("CUBEMAP","u_sky_reflection",Ka,1,1,!1);Wc.Ee=!0;Wc.Ka=Q.Hi;Wc.La=Q.Ca;N.ra(l,ad,vd,Wc);var Cd=B("CUBEMAP","u_irradiance",32,1,1,!1);Cd.Ee=!1;Cd.Ka=Q.Ca;Cd.La=Q.Ca;N.ra(l,vd,eb,Cd);Kb&&N.ra(l,vd,Kb,Cd);kb&&N.ra(l,vd,kb,Cd);Fc&&N.ra(l,vd,Fc,Cd);t.push(vd);var Wd=Y.BO(h);N.Fa(l,
Wd);N.ra(l,ad,Wd,Wc);var Dd=B("CUBEMAP","u_cube_r_convolution",128,1,1,!1);Dd.Ee=!1;Dd.Ka=Q.Hi;Dd.La=Q.Ca;N.ra(l,Wd,eb,Dd);Kb&&N.ra(l,Wd,Kb,Dd);kb&&N.ra(l,Wd,kb,Dd);Fc&&N.ra(l,Wd,Fc,Dd);var fe=Y.oO();N.Fa(l,fe);var Nd=B("COLOR","u_brdf",512,1,1,!1);Nd.Ka=Q.Ca;Nd.La=Q.Ca;N.ra(l,fe,eb,Nd);Kb&&N.ra(l,fe,Kb,Nd);kb&&N.ra(l,fe,kb,Nd);Fc&&N.ra(l,fe,Fc,Nd)}else Wc=B("CUBEMAP","u_sky_reflection",Ka,1,1,!1),Wc.Ee=!0,Wc.Ka=Q.Hi,Wc.La=Q.Ca,N.ra(l,ad,eb,Wc),Kb&&N.ra(l,ad,Kb,Wc),kb&&N.ra(l,ad,kb,Wc),Fc&&N.ra(l,
ad,Fc,Wc)}var wd=Y.aF();N.Fa(l,wd);for(Fa=0;Fa<t.length;Fa++){var Od=t[Fa];Od.Ob=!0;switch(Od.type){case Y.zf:case Y.Vh:N.ra(l,Od,wd,B("COLOR","NONE",1,1,1,ob,!1));N.ra(l,Od,wd,B("DEPTH","NONE",1,1,1,ob,!1));break;case Y.Ve:N.ra(l,Od,wd,B("CUBEMAP","u_sky",Ka,1,1,!1));break;case Y.Tk:var le=B("CUBEMAP","u_irradiance",Ka,1,1,!1);le.Ee=!0;le.Ka=Q.We;le.La=Q.We;N.ra(l,vd,wd,le);break;case Y.Xn:N.ra(l,Od,wd,B("COLOR","NONE",1,1,1,!0,!1));break;default:if(wa){var se=e[0],ge=B("COLOR","OFFSCREEN",1,1,1,
!0,!0);ge.yb=se;N.ra(l,t[Fa],wd,ge);for(Ya=1;Ya<e.length;Ya++){var te=e[Ya],ue=Y.kd("NONE");N.Fa(l,ue);N.ra(l,t[Fa],ue,B("COLOR","SCALE",1,1,1,!0,!0));var ve=te.Bk/se.Bk;ge=B("COLOR","OFFSCREEN",1,ve,ve,!0,!0);ge.yb=te;N.ra(l,ue,wd,ge)}}else N.ra(l,t[Fa],wd,B("SCREEN","NONE",1,1,1,!0,!1))}}Tb&&!da(l,Tb).length&&(N.rf(l,N.pk(l,Tb)),N.$q(l));k(l,cb);c(l,cb);if(Ha.enabled){var Be=L(l);Be&&D(l,Be)}b(l);K(l);M&&N.Na(l,function(a,b){if(b.type==Y.Gg||b.type==Y.Md||b.type==Y.lh){a=0;for(var c=p(l,b),d=0,
g=0;g<c.length;g++){var h=c[g];h.type==Y.ee&&(d++,b.rk=b.rk||[],b.rk[0<h.gh?h.gh:a]=h.qa.gc,a++)}b.iq&&b.hq||(ia.ow?b.vt=new Float32Array(9*d):(b.iq=new Float32Array(4*d),b.hq=new Float32Array(4*d)))}});if(!P.tA)for(Fa=0;Fa<y.length;Fa++)y[Fa].active=!1;return l};f.dS=function(a,b,c){var d=[];N.Na(a,function(b,c){if(-1==Ea.indexOf(c.type)&&c.Nb.length&&I(a,c,Y.mh))for(b=0;b<c.Nb.length;b++){var g=c.Nb[b];-1==d.indexOf(g)&&d.push(g)}});N.Uh(a,function(b,c,g){b=N.Kb(a,b);c=N.Kb(a,c);-1==Ea.indexOf(b.type)&&
I(a,c,Y.mh)&&-1==d.indexOf(g)&&d.push(g)});for(var g=0;g<d.length;g++)d[g].zk*=b,d[g].Ak*=c};f.Ae=function(a,b,c){var d=a.uf;a.ft[0]=b*a.nc[0]*d;a.ft[1]=c*a.nc[1]*d};f.Zd=function(a,b){a.uf=b};f.aO=function(){var a=N.create(),c=Y.AO(),d=la.jd(la.Wc);d.width=512;d.height=512;c.qa=d;N.Fa(a,c);c.Nb.push(B("COLOR","u_color",512,1,1,!1,!1));d=Y.aF();N.Fa(a,d);N.ra(a,c,d,B("COLOR","NONE",512,1,1,!1,!1));b(a);K(a);return a};f.wP=function(a){var b=null;N.Na(a,function(a,c){return c.qa&&null===c.qa.Hf?(b=
c,!0):!1});return b};f.Bd=function(a,b,c){a=p(a,b);for(b=0;b<a.length;b++)if(a[b].type==c)return a[b];return null};f.uv=function(a,b,c){a=p(a,b);b=[];for(var d=0;d<a.length;d++)a[d].type==c&&b.push(a[d]);return b};f.MX=I;f.OX=P;f.sQ=p;f.wQ=da;f.xc=function(a,b){var c=null;N.Na(a,function(a,d){return d.type==b?(c=d,!0):!1});return c};f.RO=function(a){var b="digraph scenegraph {\n";b+="    ";b+='size="11.7,16.5";\n';b+="    ";b+='ratio="fill";\n';b+="    ";b+='node [shape=box margin="0.25,0.055"];\n';
var c=H(a);N.Na(a,function(a,d){var g=b+="    ",e=Y.Ox(d);if(d.qa){e+="\\n";for(var k=0;k<c.length;k+=2){var f=d.qa.wc;c[k]==f&&(e=Q.Wo(f)?e+("CR"+c[k+1]+" "):e+("C"+c[k+1]+" "))}for(k=0;k<c.length;k+=2)f=d.qa.gg,c[k]==f&&(e=Q.Wo(f)?e+("DR"+c[k+1]):e+("D"+c[k+1]))}d.Nb.length&&(e+="\\n-----\\n");for(k=0;k<d.Nb.length;k++)e+=t(d.Nb[k],a,null,c);b=g+(String(a)+' [label="'+e+'" color="black" style="'+((d.type==Y.Uk?"dotted":d.enqueue?"solid":"dashed")+",bold")+'"];\n')});N.Uh(a,function(a,d,g){b+="    ";
b+=String(a)+" -> "+String(d)+' [label="'+t(g,a,d,c)+'" style="'+(g.active?"solid":"dotted")+'"];\n'});return b+="}"};f.zz=function(a){a=N.FU(a);for(var b=[],c=0;c<a.length;c++){var d=a[c];d.enqueue&&b.push(d)}return b}});w.a=f},function(D,w,f){D=f(0);var M=f(5),U=f(19),n=f(56),z=f(14),e=f(6),m=f(2),C=f(8),v=f(3);f=Object(D.a)("__constraints",function(f,r){function q(a){return{type:a,xb:null,target:null,fq:!1,ae:null,ob:null,Yi:null,axes:null,UI:null,od:null,uJ:!1,influence:0,Zk:"",wI:0,BE:0,DE:0,
EE:0,AE:0,Mz:0,dist_max:0,ew:!1,bs:0,ay:!1,ht:0,distance:0,hor_units:"",vert_units:""}}function a(a,b){a.Yc&&a.Yc.xb&&w(a.Yc.xb,a);if(b.xb){var c=b.xb;-1==c.bf.indexOf(a)?c.bf.push(a):F.va("Descendant object override is forbidden")}a.Yc=b}function w(a,b){b=a.bf.indexOf(b);-1!=b?a.bf.splice(b,1):F.va("No descendant object")}function k(b,c,g,e,k,f){var l=q(3);l.xb=c;l.UI=new Float32Array(g);l.od=new Float32Array(e);l.uJ=k;l.ae=new Float32Array(b.ka.na);l.influence=f;a(b,l);J(b,l,0)}function c(b,c,g,
k,f,l){var m=q(8);m.xb=c;m.ob=e.b();e.v(g,m.ob);m.axes=new Float32Array(k);m.influence=l;m.fq=f;m.ae=new Float32Array(b.ka.na);a(b,m);J(b,m,0)}function l(b,c,g){var k=q(11);k.xb=c;k.ob=e.b();e.a(b.ka.na,k.ob);k.ae=new Float32Array(b.ka.na);k.influence=g;a(b,k);J(b,k,0)}function b(b,c,g){var e=q(13);e.xb=c;e.ob=new Float32Array(g);a(b,e);J(b,e,0)}function g(b,c,g,e){var k=q(14);k.xb=c;k.Zk=g;k.ob=new Float32Array(e);a(b,k);J(b,k,0)}function E(b,c,g){var k=q(17);k.xb=c;k.ae=new Float32Array(b.ka.na);
k.ob=e.b();m._17(g.right)?(k.ew=!1,k.bs=g.right):m._17(g.left)?(k.ew=!0,k.bs=g.left):(k.ew=!0,k.bs=0);m._17(g.bottom)?(k.ay=!1,k.ht=g.bottom):m._17(g.top)?(k.ay=!0,k.ht=g.top):(k.ay=!0,k.ht=0);m._17(g.distance)?k.distance=g.distance:k.distance=0;c=m._17(g.rotation)?new Float32Array(g.rotation):C.create();e.r(c,k.ob);m._17(g.hor_units)?k.hor_units=g.hor_units:k.hor_units="widths";m._17(g.vert_units)?k.vert_units=g.vert_units:k.vert_units="heights";a(b,k);J(b,k,0)}function ea(a,b){switch(b.type){case 18:var c=
b.target.ka.na,g=ca;e.p(a.ka.na,g);e.q(g,c,g);n.c(a,b.Zk,g,!1)}a.iB=!0}function u(a,b){for(var c=0;c<a.length;c++){var g=a[c];if(!u(g.bf,b)||g.name==b.name)return!1}return!0}var F=Object(M.a)(f),R=Object(U.a)(f),O=Object(z.a)(f);r.$V=1;r.ZV=2;r.dW=3;r.WV=5;r.aW=7;r.VV=8;r.YV=12;r.TV=13;r.UV=14;r.XV=15;r.bW=16;r.cW=17;r.SV=18;var K=new Float32Array(3),A=new Float32Array(4),ca=e.b(),L=new Float32Array(3);r.QD=function(b,c,g,k,f){var l=q(1);l.xb=c;l.ob=e.b();k=k?k:C.create();e.v(g,l.ob);e.s(f,l.ob);
e.r(k,l.ob);l.ae=new Float32Array(b.ka.na);a(b,l);J(b,l,0)};r.oM=function(b,c,g,k,f,l){var m=q(2);m.xb=c;m.Zk=g;m.ae=new Float32Array(b.ka.na);m.ob=e.b();e.v(new Float32Array(k),m.ob);e.r(new Float32Array(f),m.ob);e.s(l,m.ob);a(b,m);J(b,m,0)};r.mM=function(){var b=C.create(),c=C.create();return function(g,k,f,l,n,t,d,u){var p=q(12),r=e.g(k.ka.na,c);if(l){var v=C.copy(l,b);C.multiply(r,v,v);e.r(v,g.ka.na)}else l=C.create();p.xb=k;p.ob=e.b();e.v(f,p.ob);e.r(l,p.ob);p.uB=new Float32Array(r);p.BE=m.A(n);
p.DE=m.A(t);p.EE=m.B(d,-Math.PI,Math.PI);p.AE=m.B(u,-Math.PI,Math.PI);p.ae=new Float32Array(g.ka.na);a(g,p);J(g,p,0)}}();r.lM=function(b,c,g,k){var f=q(15);f.xb=c;f.wI=k;f.ae=new Float32Array(b.ka.na);f.ob=e.b();e.v(new Float32Array(g),f.ob);a(b,f);J(b,f,0)};r.qM=function(b,c,g,k){var f=q(16);f.xb=c;f.ae=new Float32Array(b.ka.na);f.ob=e.b();e.v(new Float32Array(g),f.ob);e.r(new Float32Array(k),f.ob);e.s(1,f.ob);a(b,f);J(b,f,0)};r.vY=w;r.rM=k;r.iM=function(b,c,g,e){var k=q(5);k.xb=c;k.Mz=g;k.dist_max=
e;k.ae=new Float32Array(b.ka.na);a(b,k);J(b,k,0)};r.pM=function(b,c,g){var k=q(7);k.xb=c;k.ob=e.b();k.ae=new Float32Array(b.ka.na);e.v(new Float32Array(g),k.ob);a(b,k);J(b,k,0)};r.dM=c;var D=function(){var b=C.create();return function(c,g,k,f,l){var p=q(9);p.xb=g;g=e.g(c.ka.na,b);p.Yi=m._36(g,new Float32Array(3));p.axes=new Float32Array(k);p.influence=l;p.fq=f;p.ae=new Float32Array(c.ka.na);a(c,p);J(c,p,0)}}();r.eM=D;r.fM=l;r.QW=b;r.RW=g;r.append_stiff_viewport=E;r.TU=function(a,b){a.Yc&&J(a,a.Yc,
b)};var J=function(){var a=C.create(),b=C.create(),c=C.create(),g=e.b(),k=v.create(),f=v.create(),l=v.create();return function(p,d,u){switch(d.type){case 1:e.q(d.xb.ka.na,d.ob,p.ka.na);break;case 12:var t=e.j(p.ka.na,k),q=e.g(p.ka.na,a),r=e.j(d.ob,f),A=d.xb.ka.na;u=e.g(d.xb.ka.na,b);C.multiply(C.invert(d.uB,d.uB),q,q);C.multiply(u,q,q);e.r(q,p.ka.na);e.D(r,A,t);e.v(t,p.ka.na);C.copy(u,d.uB);W(p,d);break;case 15:t=e.j(p.ka.na,k);q=e.g(p.ka.na,a);A=d.xb.ka.na;var y=e.j(A,f),B=d.wI,z=C.copy(q,b);r=e.j(d.ob,
l);r=e.D(r,A,l);m._54(r,t,u,B,t);e.v(t,p.ka.na);m._31(t,z,y,m.c);e.v(y,A);m._52(z,q,u,.16*B,q);e.r(q,p.ka.na);break;case 2:r=e.j(d.ob,f);y=e.i(d.ob);t=e.g(d.ob,b);A=n.b(d.xb,d.Zk,!0,!1,g);e.q(d.xb.ka.na,A,A);q=e.g(A,a);C.multiply(q,t,q);e.r(q,p.ka.na);e.s(y*e.i(A),p.ka.na);t=e.j(p.ka.na,k);e.D(r,A,t);e.v(t,p.ka.na);break;case 3:t=e.j(p.ka.na,k);q=e.g(p.ka.na,a);r=e.j(d.xb.ka.na,f);A=d.influence;d.uJ?(y=e.g(d.xb.ka.na,b),y=v.transformQuat(m.f,y,l)):y=m.f;m._31(t,q,r,d.UI);r=v.subtract(r,t,f);v.normalize(r,
r);m._32(q,d.od,y,r);r=e.g(d.ae,b);C.slerp(r,q,A,q);e.r(q,p.ka.na);e.v(t,d.ae);break;case 5:t=e.j(p.ka.na,k);q=e.g(p.ka.na,a);r=e.j(d.xb.ka.na,f);m._31(t,q,r,m.c);e.v(r,d.xb.ka.na);q=v.dist(t,r);if(q=q>d.dist_max?q-d.dist_max:q<d.Mz?q-d.Mz:0)v.sub(r,t,l),v.normalize(l,l),v.scale(k,q,l),v.add(t,l,t),e.v(t,p.ka.na);break;case 7:A=d.xb.ka.na;t=e.j(p.ka.na,k);r=e.j(d.ob,f);e.D(r,A,t);e.v(t,p.ka.na);e.r(e.g(p.ka.na,a),d.ae);break;case 8:y=e.j(d.xb.ka.na,k);q=d.axes;u=e.j(d.ob,f);r=v.set(0,0,0,l);d.fq&&
v.add(r,u,r);A=d.influence;t=k;q[0]&&(t[0]=(1-A)*u[0]+A*(m._50(q[0])*y[0]+r[0]));q[1]&&(t[1]=(1-A)*u[1]+A*(m._50(q[1])*y[1]+r[1]));q[2]&&(t[2]=(1-A)*u[2]+A*(m._50(q[2])*y[2]+r[2]));e.v(t,p.ka.na);e.r(e.g(p.ka.na,a),d.ae);break;case 9:q=d.axes;u=e.g(d.xb.ka.na,a);t=m._35(u,d.Yi,f);m.Q(t,d.Yi);q[0]?(d.fq&&(A=v.set(d.Yi[0],0,0,k),m._45(t,A,t)),t[0]*=m._50(q[0])):t[0]=d.Yi[0];q[1]?(d.fq&&(A=v.set(0,d.Yi[1],0,k),m._45(t,A,t)),t[1]*=m._50(q[1])):t[1]=d.Yi[1];q[2]?(d.fq&&(A=v.set(0,0,d.Yi[2],k),m._45(t,
A,t)),t[2]*=m._50(q[2])):t[2]=d.Yi[2];m.Q(t,d.Yi);A=d.influence;t=m.Y(t,a);r=e.g(d.ae,b);q=C.slerp(r,t,A,a);e.r(q,p.ka.na);e.v(e.j(p.ka.na,k),d.ae);break;case 11:A=d.influence;y=e.j(d.xb.ka.na,k);u=e.g(d.xb.ka.na,a);t=e.j(d.ob,f);r=e.g(d.ob,b);t=m.G(t,y,A,k);e.v(t,p.ka.na);q=C.slerp(r,u,A,a);e.r(q,p.ka.na);e.v(e.j(p.ka.na,k),d.ae);break;case 16:q=e.g(p.ka.na,a);A=d.xb.ka.na;u=e.g(d.xb.ka.na,b);r=e.j(d.ob,f);t=e.g(d.ob,c);C.multiply(u,t,q);e.r(q,p.ka.na);t=e.D(r,A,k);e.v(t,p.ka.na);break;case 13:e.q(d.xb.ka.na,
d.ob,p.ka.na);break;case 14:t=d.ob;A=g;n.b(d.xb,d.Zk,!0,!1,A);e.q(d.xb.ka.na,A,A);e.q(A,t,p.ka.na);break;case 17:q=d.xb,A=O.jQ(q),t=k,u=O.pv(A,"LEFT"),B=O.pv(A,"RIGHT"),r=O.pv(A,"TOP"),y=O.pv(A,"BOTTOM"),z="heights"==d.hor_units?r-y:B-u,t[0]=d.ew?u+z*d.bs:B-z*d.bs,u="heights"==d.vert_units?r-y:B-u,t[1]=d.ay?r-u*d.ht:y+u*d.ht,O.jR(A)?t[2]=-d.distance:(t[2]=-1,v.normalize(t,t),v.scale(t,d.distance/Math.abs(t[2]),t)),e.y(t,q.ka.na,t),A=e.j(q.ka.na,f),v.add(A,t,t),e.v(t,p.ka.na),r=e.g(p.ka.na,a),q=e.g(q.ka.na,
b),t=e.g(d.ob,c),C.multiply(q,t,r),e.r(r,p.ka.na)}"CAMERA"==p.ka.type&&p.ka.cc!=O.MS_STATIC&&(t=p.ka.od,12==d.type&&(u=e.g(d.xb.ka.na,a),t=v.transformQuat(t,u,L)),O.correct_up(p,t))}}();r.PU=function(a,b){b=a.ka.Mg[b];b.Yc&&ea(a,b.Yc)};var W=function(){var a=C.create(),b=C.create(),c=C.create(),g=C.create(),k=new Float32Array(2),f=new Float32Array(2);return function(l,p){var d=e.g(l.ka.na,a),t=e.g(p.xb.ka.na,b),n=e.g(p.ob,c);t=C.multiply(t,n,g);n=O.bA(t,l.ka.od,k);var u=O.bA(d,l.ka.od,f);t=m.H(u[0],
n[0]+p.DE,n[0]+p.BE);p=m.H(u[1],n[1]+p.AE,n[1]+p.EE);m._47(d,l.ka.od,t,p,d);e.r(d,l.ka.na)}}();r.hN=function(a){return a.Yc?!0:!1};r.remove=function(a,b){a.Yc.xb&&w(a.Yc.xb,a);b&&e.a(a.Yc.ae,a.ka.na);a.Yc=null};r.GX=function(a){return a.Yc?a.Yc.type:null};r.Dh=function(a){a=a.Yc;return!a||13!=a.type&&14!=a.type?!1:!0};r.ov=function(a){if((a=a.Yc)&&13==a.type)return a.xb.ka.na;if(a&&14==a.type){var b=ca;n.b(a.xb,a.Zk,!0,!1,b);e.q(a.xb.ka.na,b,b);return b}return null};r.Ah=function(a){a=a.Yc;return!a||
13!=a.type&&14!=a.type?null:a.ob};r.KS=function(a,f){for(var n=f.ka,u=0;u<a.constraints.length;u++){var p=a.constraints[u],r=p.type;if(p.target){var v=p.target.rb;if("COPY_LOCATION"==r){r=new Float32Array(e.j(f.ka.na,K));var t=new Float32Array(p.axes);c(f,v,r,t,p.use_offset,p.influence)}else if("COPY_ROTATION"==r)t=new Float32Array(p.axes),D(f,v,t,p.use_offset,p.influence);else if("COPY_TRANSFORMS"==r)l(f,v,p.influence);else if("TRACK_TO"==r){r=p.track_axis;if("TRACK_Y"==r)var d=m.e;else"TRACK_NEGATIVE_Y"==
r?d=m.b:"TRACK_X"==r?d=m.d:"TRACK_NEGATIVE_X"==r?d=m.a:"TRACK_Z"==r?d=m.f:"TRACK_NEGATIVE_Z"==r&&(d=m.c);r=p.up_axis;if("UP_X"==r)var y=m.d;else"UP_Y"==r?y=m.e:"UP_Z"==r&&(y=m.f);k(f,v,d,y,p.use_target_z,p.influence)}}}if(f.parent){!f.Kl&&f.Fd.bq&&f.parent.Fd.bq&&(f.Jn=!1);p=!1;for(u=0;u<f.Aa.length;u++)if(f.Aa[u].Bb.cd){p=!0;break}if(p&&R.NQ(f))u=f.Kl?e.a(n.na,e.b()):n.na,e.q(f.parent.ka.na,u,n.na);else if(f.Kl||!f.qs)if(u=e.a(n.na,e.b()),f.uy&&"CAMERA"==f.parent.type){u={distance:f.uy.distance,
rotation:e.g(u,A)};switch(f.uy.YL){case "TOP_LEFT":u.top=0;u.left=0;break;case "TOP":u.top=0;u.left=.5;break;case "TOP_RIGHT":u.top=0;u.right=0;break;case "LEFT":u.top=.5;u.left=0;break;case "CENTER":u.top=.5;u.left=.5;break;case "RIGHT":u.top=.5;u.right=0;break;case "BOTTOM_LEFT":u.bottom=0;u.left=0;break;case "BOTTOM":u.bottom=0;u.left=.5;break;case "BOTTOM_RIGHT":u.bottom=0,u.right=0}E(f,f.parent,u)}else b(f,f.parent,u);else u=e.a(n.na,e.b()),g(f,f.parent,f.qs,u)}if("ARMATURE"==f.type)for(a=a.pose.bones,
u=0;u<a.length;u++)if(n=a[u],p=n.constraints)for(d=0;d<p.length;d++)if(y=p[d],"COPY_TRANSFORMS"==y.type&&!y.subtarget&&!y.mute){v=y.target.rb;y=f;r=v;t=m.m;var B=m.k;v=q(18);v.Zk=n.name;v.target=r;v.ob=e.b();e.v(new Float32Array(t),v.ob);e.r(new Float32Array(B),v.ob);e.s(1,v.ob);r=y;t=v;B=t.target;for(var z=t.Zk,C=r.ka.Mg[z],F=B.wz,w=0;w<F;w++){var O=F[w];if(O[0]==r&&O[1]==z){F.splice(w,1);break}}B.wz.push([r,z]);C.Yc=t;ea(y,v)}};r.ci=function(a,b){return u(a.bf,b)};r.di=function(a,b){return a.name!=
b.name}});w.a=f},function(D,w,f){D=f(0);var M=f(38),U=f(5),n=f(44),z=f(14),e=f(52),m=f(12),C=f(1),v=f(10),q=f(4),r=f(53),y=f(16),a=f(20),T=f(27),k=f(21),c=f(19),l=f(8),b=f(23),g=f(18),E=f(13),ea=f(6),u=f(2),F=f(3),R=f(9);f=Object(D.a)("__logic_nodes",function(f,w){function A(){return function(a,b,c,d){c=d[1];var g=d[2];d=K(d[0],g.oc);if(-1==d.state){for(var h=0;h<d.kT;h++)if(Ma.get_sensor_value(a,b,h)){for(var e=0;e<d.dx.length;e++)if(d.dx[e]==h){c.kp==d.DU?(oa.is_play(c.qb)&&(d.state=-3),g.oc.Gh||
(d.state=1,d.Ws=d.PA[e])):(d.state=1,d.Ws=d.PA[e]);d.TB=h;return}d.TB=h}d.state=0}}}function O(a,b){return{name:a.name,type:a.type,label:a.label,ub:a.slot_idx_order,Ws:a.slot_idx_jump,sb:a.frame_range[0],$b:a.frame_range[1],DP:a.frame_range_mask?a.frame_range_mask[0]:!0,CP:a.frame_range_mask?a.frame_range_mask[1]:!0,sS:a.param_name,mS:a.operation,mute:a.mute,tF:a.object,ph:a.anim_name,uS:a.parse_json_vars,tS:a.parse_json_paths,Xd:a.objects_paths,lH:a.nodes_paths,ib:a.floats,za:a.bools,ya:a.variables,
Fk:a.strings,zl:a.logic_functions,UG:a.logic_node_trees,SA:a.materials_names,qI:a.shader_nd_type,hd:a.common_usage_names,hP:a.encode_json_vars,gP:a.encode_json_paths,DU:b,BB:za[a.type]?za[a.type]:B,Uw:!1,NG:a.links,Uo:[],Wz:-1,jw:null,TB:-1}}function K(a,b,c){var d=b.am+1-a.Uo.length;if(0<d)for(var g=0;g<d;g++)a.Uo.push(0);a.Uo[b.am]||(a.Uo[b.am]={Qb:{},Ws:-1,state:-1,dx:[],$x:-1,ed:{},dd:pa.SLOT_ALL,Zc:null},c&&c(a,a.Uo[b.am],b));return a.Uo[b.am]}function D(a,b,c){return a[0]?b[a[1]]:c[a[1]]}function J(a,
b,c,d){a[0]?b[a[1]]=d:c[a[1]]=d}function W(a,b,c){switch(b.state){case 2:c.Xa=a.ub}}function B(a,b,c){switch(b.state){case 1:Q.error("Unknown node type: "+a.type);break;case 2:c.Xa=a.ub}}function ba(a,b){for(var c=a.Ha,d=0;d<c.length;d++){var g=c[d];"SWITCH_SELECT"==g.type&&g!=b&&(K(g,a.oc).state=-3)}}function I(a,b,c){var d=Y.get_selectable_objects(),g=K(a,c.oc);g.dx=[];g.PA=[];for(var h in a.Xd){var e=a.za[h]?D(a.ya[h],b.pa,c.oc.pa):Y.Cd(Y.qe,a.Xd[h],0);e=d.indexOf(e);if(-1==e)return Q.error("logic script error: non-selectable object:",
a.Xd[h][a.Xd[h].length-1]),-1;g.dx.push(e);g.PA.push(a.NG[h])}g.kT=d.length;g=[];for(h=0;h<d.length;h++)g.push(Ma.create_selection_sensor(d[h],!1));d=A();Ma.create_sensor_manifold(null,"LOGIC_NODES_SWITCH_SELECT_"+la(a.label),Ma.CT_SHOT,g,Ma.default_OR_logic_fun,d,[a,b,c])}function P(a,b,c,d,g){return c?D(a.ya[b],d,g):Y.Cd(Y.qe,a.Xd[b],0)}function p(a){var b=a.oc.$k;return 1>=b.length?a.Ha:b[b.length-1].mw.Ir.Ha}function da(a,b,c,d,g,h){a.oc.JC=!1;var e=a.oc.$k,k=1>=e.length?a.Ha:e[e.length-1].mw.Ir.Ha;
if(k.length){if(!h)for(h=0;h<k.length;h++)k[h].Uw=!1;for(h=0;h<k.length;h++){if(0<=a.oc.Xa)var f=k[a.oc.Xa];else{if(1<a.oc.$k.length){k=a.oc.$k.pop().pE;e=e[e.length-1];a.oc.Xa=k.ub;k=a.oc.pa;a.oc.pa=e.pa;for(var l in a.oc.py)e=a.oc.py[l],void 0===a.oc.pa[l]?b.pa[l]=k[e]:a.oc.pa[l]=k[e];da(a,b,c,d,g,!0)}return}if(f.Uw)return;if(f.mute){if("ENTRYPOINT"==f.type)return;a.oc.Xa=f.ub;f.Uw=!0}else if(f.BB(f,b,a.oc,c,d,g),f.Uw=!0,a.oc.JC)return}e.splice(0,e.length)}}function H(a,b){var c=a.b4w_logic_nodes,
d=b.Jf,g=b.zl;b.state=1;for(var h=-1,e=0;e<c.length;e++){for(var k={Ha:[],oc:{Bb:a,Xa:0,Gh:!1,JC:!1,am:e,$k:[],pa:{R1:0,R2:0,R3:0,R4:0,R5:0,R6:0,R7:0,R8:0}}},f=c[e],l=0;l<f.length;l++){var m=O(f[l],k);k.Ha.push(m)}switch(k.Ha[0].type){case "ENTRYPOINT":h++;k.oc.am=h;d.push(k);break;case "DEF_FUNC":m=k.Ha[0],k.oc=null,g.push({id:[m.UG.id0,m.zl.id0],Ir:k})}}for(e=0;e<d.length;e++)for(k=d[e],c=0;c<k.Ha.length;c++)m=k.Ha[c],m.mute||m.BB(m,b,k.oc,0,0);for(e=0;e<g.length;e++)for(d=g[e].Ir,c=0;c<d.Ha.length;c++)m=
d.Ha[c],m.mute||m.BB(m,b,0,0,0);a=a.timeline_markers;for(var p in a)b.Xs.push(a[p]);b.Xs.sort(function(a,b){return a-b});b.state=2;Da.push(b)}function t(a,b){switch(b){case 0:return Number(a)?Number(a):0;case 1:return String(a);case 2:return a;default:return null}}function d(a){switch(typeof a){case "string":return t(a,1);case "number":return t(a,0);default:return t(a,1)}}function la(a){h[a]||(h[a]=0);var b=a+"_"+h[a];b=b.replace(/ /g,"_").replace(/\//g,"_");h[a]++;return b}function na(a,b){switch(b){case 0:return a.ib;
case 1:return a.Fk;case 2:return a.Xd}}var pa=Object(M.a)(f),Aa=Object(U.a)(f),Ja=Object(n.a)(f),N=Object(z.a)(f),oa=Object(e.a)(f),Y=Object(m.a)(f),Q=Object(C.a)(f),Ha=Object(v.a)(f),ia=Object(q.a)(f),Ma=Object(r.a)(f),Ea=Object(y.a)(f),X=Object(a.a)(f),Ga=Object(c.a)(f),Fa=Object(b.a)(f),wa=Object(g.a)(f),La=Object(E.a)(f),ja=Object(R.a)(f),ta=new Float32Array(4),ka=new Float32Array(3),qa=new Float32Array(3),S=F.create(),va=F.create(),xa=new Float32Array(2),ra=new Float32Array(9),ma=new Float32Array(16);
w.Ry=0;w.qD=1;w.pD=2;w.sK=0;w.BK=1;w.xK=2;w.nK=3;w.yK=4;w.AK=5;w.rK=6;w.CK=7;w.pK=8;w.oK=9;w.qK=10;w.tK=11;w.vK=12;w.uK=13;w.zK=14;w.wK=15;w.mK=16;w.IK=0;w.HK=1;w.JK=2;w.KK=3;w.GK=4;w.kD=0;w.mD=1;w.lD=2;w.nD=3;w.oD=4;w.jD=5;w.NK=0;w.MK=1;w.LK=2;w.iK=0;w.jK=1;w.gK=2;w.hK=3;w.kK=0;w.lK=1;var za={ENTRYPOINT:function(a,b,c){switch(b.state){case 2:0==c.$k.length&&c.$k.push({pE:null,pa:c.pa,mw:null}),c.Xa=a.ub}},HIDE:function(a,b,c){function d(a,b){g||(b.obj=Y.Cd(Y.qe,a.Xd.id0,0),b.obj||(Q.error("Logic script error: object not found. Node: ",
a.name),a.mute=!0))}var g=a.za.id0;switch(b.state){case 2:var h=K(a,c,d);b=g?D(a.ya.id0,b.pa,c.pa):h.obj;a.za.ch?Ha.Zq(b,!0):Ha.Cm(b,!0);c.Xa=a.ub}},SHOW:function(a,b,c){function d(a,b){g||(b.obj=Y.Cd(Y.qe,a.Xd.id0,0),b.obj||(Q.error("Logic script error: object not found. Node: ",a.name),a.mute=!0))}var g=a.za.id0;switch(b.state){case 2:var h=K(a,c,d);b=g?D(a.ya.id0,b.pa,c.pa):h.obj;a.za.ch?Ha.Zq(b,!1):Ha.Cm(b,!1);c.Xa=a.ub}},PAGEPARAM:function(a,b,c){switch(b.state){case 2:var d=a.ya.id0;b=b.pa;
var g=c.pa;a:{var h=a.sS;var e=a.ib.ptp,k=a.za.hsh,f=ia.get("url_params");if(f&&h in f)h=Number(f[h]);else{if(k=k?location.hash:location.search)for(k=k.slice(1).split("&"),f=0;f<k.length;f++){var l=k[f].split("=");if(1<l.length&&l[0]==h){h=t(l[1],e);break a}}h=0}}J(d,b,g,h);c.Xa=a.ub}},SWITCH_SELECT:function(a,b,c){function d(a,b){b.state=-3}switch(b.state){case 2:var g=K(a,c,d);if(-3==g.state)g.state=-2,ba(b.Jf[c.am],a),I(a,b,b.Jf[c.am]);else if(-2==g.state)g.state=-1;else if(0==g.state||1==g.state){if(a.ya.vd&&
a.ya.vd[1]){var h=Y.get_selectable_objects();J(a.ya.vd,b.pa,c.pa,h[g.TB])}c.Xa=g.state?g.Ws:a.ub;g.state=-3;Ma.remove_sensor_manifold(null,"LOGIC_NODES_SWITCH_SELECT_"+la(a.label))}}},SELECT:function(a,b){switch(b.state){case 1:Q.error("Logic script error: node is deprecated. Node: ",a.name),a.mute=!0}},PLAY:function(a,b,c,d){switch(b.state){case 1:oa.kC();a.za.not_wait||(a.za.not_wait=!1);break;case 2:var g=K(a,c);switch(g.state){case -1:if(oa.is_play(b.qb))if(b.Fz==b.kp&&c.Gh)break;else{var h=b.kp;
if(h){h.oc.Xa=p(h)[h.oc.Xa].ub;h=b.kp;var e=h.oc.$k,k=e.length,f=[];1>=k&&f.push(h.Ha);for(var l=1;l<k;l++)f.push(e[l].mw.Ir.Ha);for(l=0;l<f.length;l++)for(e=0;e<f[l].length;e++)k=f[l][e],"PLAY"==k.type&&(K(k,h.oc).state=-1)}}c.Gh=!a.za.not_wait;b.kp=b.Fz;g.state=0;a.DP&&(oa.IT(a.sb),oa.gI(d));if(a.CP)oa.VB(a.$b);else{d=oa.get_frame(d);h=-1;for(var m in b.Xs)if(d<b.Xs[m]){h=m;break}0<=h?oa.VB(b.Xs[h]):oa.VB(oa.get_frame_end())}oa.AH(null);a.za.not_wait&&(c.Xa=a.ub,g.state=-1,c.Gh=!1);break;case 0:oa.is_play()||
(c.Xa=a.ub,g.state=-1,c.Gh=!1);break;case 1:c.Xa=a.ub;g.state=-1;b.kp=null;c.Gh=!1;break;default:Aa.va("Unknown state of "+a.name),g.state=-1}}},REDIRECT:function(a,b,c){switch(b.state){case 2:window.location.href=a.za.url?t(D(a.ya.url,b.pa,c.pa),1):a.Fk.url,b.state=3}},MATH:function(a,b,c){switch(b.state){case 2:var d=-1==a.ya.id0[1]?a.ib.inp1:t(D(a.ya.id0,b.pa,c.pa),0),g=-1==a.ya.id1[1]?a.ib.inp2:t(D(a.ya.id1,b.pa,c.pa),0),h=0;switch(a.mS){case 3:h=d+g;break;case 2:h=d*g;break;case 1:h=d-g;break;
case 0:0==g&&Aa.va("Division by zero in Logic script");h=d/g;break;case 4:h=Math.random()*(g-d)+d;break;case 5:h=Math.sin(d);break;case 6:h=Math.cos(d);break;case 7:h=Math.tan(d);break;case 8:h=Math.asin(d);break;case 9:h=Math.acos(d);break;case 10:h=Math.atan(d);break;case 11:h=Math.log(d);break;case 12:h=Math.min(d,g);break;case 13:h=Math.max(d,g);break;case 14:h=Math.round(d);break;case 15:h=d%g;break;case 16:h=Math.abs(d)}J(a.ya.vd,b.pa,c.pa,h);c.Xa=a.ub}},CONDJUMP:function(a,b,c){switch(b.state){case 2:var d=
a.hd.variable_type,g=na(a,d),h=!1;if(2==d){var e=a.za.id0?D(a.ya.id0,b.pa,c.pa):Y.Cd(Y.qe,a.Xd.id0,0);b=a.za.id1?D(a.ya.id1,b.pa,c.pa):Y.Cd(Y.qe,a.Xd.id1,0);switch(a.hd.condition){case 5:e==b&&(h=!0);break;case 4:e!=b&&(h=!0)}}else switch(e=-1==a.ya.id0[1]?g.inp1:t(D(a.ya.id0,b.pa,c.pa),d),b=-1==a.ya.id1[1]?g.inp2:t(D(a.ya.id1,b.pa,c.pa),d),a.hd.condition){case 5:e==b&&(h=!0);break;case 4:e!=b&&(h=!0);break;case 3:e<b&&(h=!0);break;case 2:e>b&&(h=!0);break;case 1:e<=b&&(h=!0);break;case 0:e>=b&&(h=
!0)}c.Xa=h?a.Ws:a.ub}},REGSTORE:function(a,b,c){switch(b.state){case 2:if(a.za.vs)var d=D(a.ya.vs,b.pa,c.pa);else{d=a.hd.variable_type;var g=na(a,d);d=2==d?Y.Cd(Y.qe,g.id0,0):g.inp1}J([a.za["new"]&&a.za.gl||a.ya.vd[0],a.ya.vd[1]],b.pa,c.pa,d);c.Xa=a.ub}},PLAY_ANIM:function(a,b,c){function d(a,b){for(var c=-1,d=0;8>d;d++){var g=a.Za[d];if(g&&g.Hj&&pa.HI(g.Hj)==pa.HI(b))if(-1!=c)c=d;else return-1}return c}function g(a,c,d){c.obj=e?Y.get_world_by_name(a.tF[0],0):P(a,"id0",h,b.pa,d.pa);c.obj||h||(Q.error("Logic script error: object not found. Node: ",
a.name),a.mute=!0)}var h=a.za.id0,e=a.za.env;switch(b.state){case 2:var k=K(a,c,g);e||(k.obj=h?D(a.ya.id0,b.pa,c.pa):k.obj);0!=k.state||pa.is_play(k.obj,k.dd)||(k.state=1);switch(k.state){case -1:for(var f in b.Jf){var l=b.Jf[f],m=p(l),t=l.oc.Xa;-1!=t&&(m=m[t],l=K(m,l.oc),"PLAY_ANIM"==m.type&&m!=a&&0==l.state&&l.obj==k.obj&&(l.state=1))}f=a.hd.param_anim_behavior;""==a.ph?(pa.apply_def(k.obj),pa.set_behavior(k.obj,f,pa.SLOT_ALL)):(l=d(k.obj,a.ph),-1==l?(k.dd=pa.bU(k.obj,a.ph),pa.apply(k.obj,null,
a.ph,k.dd)):k.dd=l,pa.set_behavior(k.obj,f,k.dd));a.za.not_wait||(c.Gh=!0);pa.play(k.obj,null,k.dd);k.state=0;a.za.not_wait&&(c.Xa=a.ub,k.state=-1);break;case 0:break;case 1:a.za.not_wait||(c.Gh=!1);c.Xa=a.ub;k.state=-1;break;default:Aa.va("Unknown state of "+a.name),k.state=-1}}},SELECT_PLAY:W,SEND_REQ:function(a,b,c){function d(a,c,d,g,h){a=JSON.stringify(a);c=h[1];d=K(h[0],c);J(h[0].ya.dst,b.pa,c.pa,a);d.state=1}var g=K(a,c);switch(b.state){case 2:switch(g.state){case -1:g.state=0;g=a.za.url?t(D(a.ya.url,
b.pa,c.pa),1):a.Fk.url;var h={};a.za.ct&&(h["Content-Type"]=a.Fk.ct);"GET"==a.hd.request_type?Ja.enqueue([{id:g,type:Ja.AT_JSON,url:g,overwrite_header:h,param:[a,c]}],d,null,null,null):"POST"==a.hd.request_type&&Ja.enqueue([{id:g,type:Ja.AT_JSON,url:g,overwrite_header:h,request_method:"POST",post_data:t(D(a.ya.dst1,b.pa,c.pa),1),param:[a,c]}],d,null,null,null);break;case 1:g.state=-1,c.Xa=a.ub}}},INHERIT_MAT:function(a,b,c){function d(a,b){for(var c=0;2>c;c++)b.Qb["id"+c]=Y.Cd(Y.qe,a.Xd["id"+c],0),
b.Qb["id"+c]||(Q.error("Logic script error: object not found. Node: ",a.name),a.mute=!0)}switch(b.state){case 2:b=K(a,c,d),Y.inherit_material(b.Qb.id0,a.SA.id0,b.Qb.id1,a.SA.id1),c.Xa=a.ub}},SET_SHADER_NODE_PARAM:function(a,b,c){function d(a,b){a.Xd.id0&&(b.Qb.id0=Y.Cd(Y.qe,a.Xd.id0,0),a.Xd.id0||(Q.error("Logic script error: object not found. Node: ",a.name),a.mute=!0),a.lH.id0.unshift(a.SA.id0))}switch(b.state){case 2:var g=K(a,c,d).Qb.id0,h=a.lH.id0,e=h[0];h=Ea.hs(h,1);var k=Ea.Zb(g,e,"MAIN");c.Xa=
a.ub;null===k?Q.error('Material "'+e+'" was not found in the object "'+g.name+'".'):("ShaderNodeRGB"==a.qI&&Y.set_nodemat_rgb(g,e,h,a.za.id0?t(D(a.ya.id0,b.pa,c.pa),0):a.ib.id0,a.za.id1?t(D(a.ya.id1,b.pa,c.pa),0):a.ib.id1,a.za.id2?t(D(a.ya.id2,b.pa,c.pa),0):a.ib.id2),"ShaderNodeValue"==a.qI&&Y.set_nodemat_value(g,e,h,a.za.id0?t(D(a.ya.id0,b.pa,c.pa),0):a.ib.id0))}},DELAY:function(a,b,c,d,g){d=K(a,c);switch(b.state){case 2:-1==d.state?(d.state=0,d.$x=0,c.Gh=!0):0==d.state&&(d.$x+=g,(a.za.dl?t(D(a.ya.dl,
b.pa,c.pa),0):a.ib.dl)<d.$x&&(d.state=-1,c.Xa=a.ub,c.Gh=!1))}},APPLY_SHAPE_KEY:function(a,b,c){function d(a,b){b=b.Qb.id0=Y.Cd(Y.qe,a.Xd.id0,0);b||(Q.error("Logic script error: object not found. Node: ",a.name),a.mute=!0);var c=a.hd.sk;X.check_shape_keys(b)?X.uA(b,c)||(Q.error("Wrong key name:",c),a.mute=!0):(Q.error("No shape keys in object:",b.name),a.mute=!0)}switch(b.state){case 2:var g=K(a,c,d);X.cz(g.Qb.id0,a.hd.sk,a.za.skv?t(D(a.ya.skv,b.pa,c.pa),0):a.ib.skv);c.Xa=a.ub}},OUTLINE:function(a,
b,c){function d(a,b){g||(b.obj=Y.Cd(Y.qe,a.Xd.id0,0),b.obj||(Q.error("Logic script error: object not found. Node: ",a.name),a.mute=!0),b.obj&&b.obj.ka&&b.obj.ka.Ed||(Q.error("Can't evaluate 'Outline' logic node: wrong object"),a.mute=!0))}var g=a.za.id0;switch(b.state){case 2:var h=K(a,c,d);h=g?D(a.ya.id0,b.pa,c.pa):h.obj;switch(a.hd.outline_operation){case "PLAY":b=h.ka.lj;Y.apply_outline_anim(h,b.Gl,b.Hl,b.Il);break;case "STOP":Y.clear_outline_anim(h);break;case "INTENSITY":Y.set_outline_intensity(h,
a.za["in"]?t(D(a.ya["in"],b.pa,c.pa),0):a.ib["in"])}c.Xa=a.ub}},MOVE_CAMERA:function(a,b,c){function d(a,b,c,d){switch(N.get_move_style(a)){case N.MS_TARGET_CONTROLS:N.WB(a,b,c);break;case N.MS_EYE_CONTROLS:case N.MS_STATIC:La.set_tsr(a,d);break;case N.MS_HOVER_CONTROLS:F.sub(c,b,ka),F.normalize(ka,ka),N.eI(a,c),qa[0]=ka[0],qa[1]=0,qa[2]=ka[2],b=F.dot(qa,ka),c=Math.acos(b/(F.length(qa)*F.length(ka))),b=ka[2]?Math.atan(ka[0]/ka[2]):0<ka[0]?0:Math.PI,0<ka[2]&&0<ka[0]?xa[1]=-(Math.PI+xa[1]):0<ka[2]&&
0>ka[0]?xa[1]=-(Math.PI+xa[1]):0>ka[2]&&0>ka[0]?(xa[0]+=Math.PI,b=-(Math.PI-b)):0>ka[2]&&0<ka[0]&&(xa[0]+=Math.PI,b-=Math.PI),N.LT(a,b+Math.PI,-c)}La.Ea(a);Ga.sync_transform(a)}function g(a,b,c,d){k.lookAt(b,c,u.f,ma);k.invert(ma,ma);T.fromMat4(ma,ra);l.fromMat3(ra,ta);l.normalize(ta,ta);a=ea.i(a.ka.na);ea.t(b,a,ta,d)}function h(a,c,d){(c.Qb.ca=P(a,"id0",e,b.pa,d.pa))||e||(Q.error("Logic script error: object not found. Node: ",a.name),a.mute=!0);c.Qb.tr=P(a,"id1",f,b.pa,d.pa);c.Qb.tr||f||(Q.error("Logic script error: object not found. Node: ",
a.name),a.mute=!0);c.Qb.ta=P(a,"id2",m,b.pa,d.pa);c.Qb.ta||m||(Q.error("Logic script error: object not found. Node: ",a.name),a.mute=!0);c.state=-1;c.ed={WI:new Float32Array(3),VI:new Float32Array(3),EA:new Float32Array(3),sC:new Float32Array(3),QI:new Float32Array(3),DA:new Float32Array(3),dm:ea.b(),wj:ea.b(),Sr:ea.b()}}var e=a.za.id0,f=a.za.id1,m=a.za.id2;switch(b.state){case 2:var p=K(a,c,h),n=e?D(a.ya.id0,b.pa,c.pa):p.Qb.ca,r=m?D(a.ya.id2,b.pa,c.pa):p.Qb.ta,q=ea.j((f?D(a.ya.id1,b.pa,c.pa):p.Qb.tr).ka.na,
ka);r=ea.j(r.ka.na,S);switch(p.state){case -1:var v=a.za.dur?t(D(a.ya.dur,b.pa,c.pa),0):a.ib.dur;if(0==v){g(n,q,r,p.ed.wj);d(n,q,r,p.ed.wj);c.Xa=a.ub;break}a=ea.j(n.ka.na,va);F.copy(a,p.ed.WI);var A=N.get_move_style(n);A==N.MS_HOVER_CONTROLS?F.copy(n.ka.$c,p.ed.sC):A==N.MS_STATIC||A==N.MS_EYE_CONTROLS?(ea.a(n.ka.na,p.ed.dm),g(n,q,r,p.ed.wj)):F.copy(n.ka.pivot,p.ed.sC);F.copy(q,p.ed.VI);F.copy(r,p.ed.QI);p.state=0;v=wa.animate(0,1,1E3*v,function(a){Ha.zb()&&(A==N.MS_STATIC||A==N.MS_EYE_CONTROLS?ea.o(p.ed.dm,
p.ed.wj,u._53(a),p.ed.Sr):(p.ed.DA=F.lerp(p.ed.sC,p.ed.QI,u._53(a),p.ed.DA),p.ed.EA=F.lerp(p.ed.WI,p.ed.VI,u._53(a),p.ed.EA)),d(n,p.ed.EA,p.ed.DA,p.ed.Sr),1==a&&(p.state=1))});break;case 1:wa.clear_animation(v),p.state=-1,c.Xa=a.ub}}},SET_CAMERA_MOVE_STYLE:function(a,b,c){function d(a,b){g.id0||(b.Qb.id0=Y.Cd(Y.qe,a.Xd.id0,0))||(Q.error("Logic script error: object not found. Node: ",a.name),a.mute=!0);g.pvo&&!g.id1&&(b.Qb.id1=Y.Cd(Y.qe,a.Xd.id1,0))}var g=a.za;switch(b.state){case 2:var h=K(a,c,d),
e=g.id0?D(a.ya.id0,b.pa,c.pa):h.Qb.id0,k=e.ka;h.YM={Sx:k.Sx,use_panning:k.use_panning,zc:k.zc,Hb:k.Hb,rc:k.rc,le:k.le,me:k.me,Oe:k.Oe,Xi:k.Xi};if(ja.is_camera(e)){k=e.ka;var f=h.YM;N.Dt(e);switch(a.hd.camera_move_style){case 0:k.cc=N.MS_STATIC;break;case 2:k.cc=N.MS_EYE_CONTROLS;var l=ea.j(k.na,ka);N.mI(e,l,null,f.zc,f.Hb);break;case 3:k.cc=N.MS_HOVER_CONTROLS;l=ea.j(k.na,ka);var m=S;a.za.pvo?(h=g.id1?D(a.ya.id1,b.pa,c.pa):h.Qb.id1,m=ea.j(h.ka.na,S)):(m[0]=a.za.pvx?t(D(a.ya.pvx,b.pa,c.pa),0):a.ib.pvx,
m[1]=a.za.pvy?t(D(a.ya.pvy,b.pa,c.pa),0):a.ib.pvy,m[2]=a.za.pvz?t(D(a.ya.pvz,b.pa,c.pa),0):a.ib.pvz);N.nI(e,l,m,f.rc,f.Hb,f.le,f.me,f.Xi);break;case 1:k.cc=N.MS_TARGET_CONTROLS,l=ea.j(k.na,ka),m=S,a.za.pvo?(h=g.id1?D(a.ya.id1,b.pa,c.pa):h.Qb.id1,m=ea.j(h.ka.na,S)):(m[0]=a.za.pvx?t(D(a.ya.pvx,b.pa,c.pa),0):a.ib.pvx,m[1]=a.za.pvy?t(D(a.ya.pvy,b.pa,c.pa),0):a.ib.pvy,m[2]=a.za.pvz?t(D(a.ya.pvz,b.pa,c.pa),0):a.ib.pvz),N.oI(e,l,m,f.zc,f.Hb,f.rc,f.Oe,f.use_panning)}qa[0]=a.za.vtr?t(D(a.ya.vtr,b.pa,c.pa),
0):a.ib.vtr;qa[1]=a.za.vro?t(D(a.ya.vro,b.pa,c.pa),0):a.ib.vro;qa[2]=a.za.vzo?t(D(a.ya.vzo,b.pa,c.pa),0):a.ib.vzo;qa[0]=u.M(qa[0],0,Infinity);qa[1]=u.M(qa[1],0,Infinity);qa[2]=u.M(qa[2],0,.99);k.kq=qa[0];k.jq=qa[1];k.lq=qa[2];La.Ea(e);Ga.sync_transform(e);N.To(e)}else Q.error("Logic script error: object is not a Camera. Node: ",a.name);c.Xa=a.ub}},SET_CAMERA_LIMITS:function(a,b,c){function d(a,b){g.id0||(b=b.Qb.id0=Y.Cd(Y.qe,a.Xd.id0,0),b||(Q.error("Logic script error: object not found. Node: ",a.name),
a.mute=!0))}var g=a.za;switch(b.state){case 2:var h=K(a,c,d);h=g.id0?D(a.ya.id0,b.pa,c.pa):h.Qb.id0;if(ja.is_camera(h)){switch(h.ka.cc){case N.MS_TARGET_CONTROLS:if(a.za.dsl){var e=a.za.dslmin?t(D(a.ya.dslmin,b.pa,c.pa),0):a.ib.dslmin,k=a.za.dslmax?t(D(a.ya.dslmax,b.pa,c.pa),0):a.ib.dslmax,f={};f.min=Math.max(e,0);f.max=Math.max(k,0);N.WH(h,f)}a.za.vrl&&(e=a.za.vrldown?t(D(a.ya.vrldown,b.pa,c.pa),0):a.ib.vrldown,k=a.za.vrlup?t(D(a.ya.vrlup,b.pa,c.pa),0):a.ib.vrlup,f={},f.down=e,f.up=k,f.camera_space=
"CAMERA"==a.hd.cam_lim_vert_rot_space_type,N.ix(h,f));a.za.hrl&&(e=a.za.hrlleft?t(D(a.ya.hrlleft,b.pa,c.pa),0):a.ib.hrlleft,k=a.za.hrlright?t(D(a.ya.hrlright,b.pa,c.pa),0):a.ib.hrlright,f={},f.left=e,f.right=k,f.camera_space="CAMERA"==a.hd.cam_lim_hor_rot_space_type,N.hx(h,f));a.za.pvl&&(e=a.za.pvlmin?t(D(a.ya.pvlmin,b.pa,c.pa),0):a.ib.pvlmin,b=a.za.pvlmax?t(D(a.ya.pvlmax,b.pa,c.pa),0):a.ib.pvlmax,f={},f.min_z=e,f.max_z=b,N.hI(h,f));break;case N.MS_HOVER_CONTROLS:a.za.htl&&(e=a.za.htlmin?t(D(a.ya.htlmin,
b.pa,c.pa),0):a.ib.htlmin,k=a.za.htlmax?t(D(a.ya.htlmax,b.pa,c.pa),0):a.ib.htlmax,f={},f.min=e,f.max=k,N.dI(h,f));a.za.vtl&&(e=a.za.vtlmin?t(D(a.ya.vtlmin,b.pa,c.pa),0):a.ib.vtlmin,k=a.za.vtlmax?t(D(a.ya.vtlmax,b.pa,c.pa),0):a.ib.vtlmax,f={},f.min=e,f.max=k,N.kI(h,f));a.za.vrl&&(e=a.za.vrldown?t(D(a.ya.vrldown,b.pa,c.pa),0):a.ib.vrldown,k=a.za.vrlup?t(D(a.ya.vrlup,b.pa,c.pa),0):a.ib.vrlup,f={},f.down=e,f.up=k,f.camera_space="CAMERA"==a.hd.cam_lim_vert_rot_space_type,N.hover_set_vertical_limits(h,
f));a.za.dsl&&(e=a.za.dslmin?t(D(a.ya.dslmin,b.pa,c.pa),0):a.ib.dslmin,k=a.za.dslmax?t(D(a.ya.dslmax,b.pa,c.pa),0):a.ib.dslmax,f={},f.min=Math.max(e,0),f.max=Math.max(k,0),N.hover_set_distance_limits(h,f));break;case N.MS_EYE_CONTROLS:a.za.vrl&&(e=a.za.vrldown?t(D(a.ya.vrldown,b.pa,c.pa),0):a.ib.vrldown,k=a.za.vrlup?t(D(a.ya.vrlup,b.pa,c.pa),0):a.ib.vrlup,f={},f.down=e,f.up=k,f.camera_space="CAMERA"==a.hd.cam_lim_vert_rot_space_type,N.ix(h,f)),a.za.hrl&&(e=a.za.hrlleft?t(D(a.ya.hrlleft,b.pa,c.pa),
0):a.ib.hrlleft,k=a.za.hrlright?t(D(a.ya.hrlright,b.pa,c.pa),0):a.ib.hrlright,f={},f.left=e,f.right=k,f.camera_space="CAMERA"==a.hd.cam_lim_hor_rot_space_type,N.hx(h,f))}La.Ea(h);Ga.sync_transform(h)}else Q.error("Logic script error: object is not a Camera. Node: ",a.name);c.Xa=a.ub}},MOVE_TO:function(a,b,c){function d(a,b){La.set_tsr(a,b);La.Ea(a);Ga.sync_transform(a)}function g(a,c,d){c.Qb.id0=P(a,"id0",e,b.pa,d.pa);c.Qb.id0||e||(Q.error("Logic script error: object not found. Node: ",a.name),a.mute=
!0);c.Qb.id1=P(a,"id1",k,b.pa,d.pa);c.Qb.id1||k||(Q.error("Logic script error: object not found. Node: ",a.name),a.mute=!0);c.state=-1;c.Zc={oF:ea.b(),Kz:ea.b(),oG:ea.b()}}var h=a.za,e=h.id0,k=h.id1;switch(b.state){case 2:var f=K(a,c,g),l=h.id0?D(a.ya.id0,b.pa,c.pa):f.Qb.id0;if(l.is_dynamic)switch(ea.a(l.ka.na,f.Zc.oF),ea.a((h.id1?D(a.ya.id1,b.pa,c.pa):f.Qb.id1).ka.na,f.Zc.Kz),f.state){case -1:h=a.za.dur?t(D(a.ya.dur,b.pa,c.pa),0):a.ib.dur;if(0==h){d(l,f.Zc.Kz);c.Xa=a.ub;break}f.state=0;var m=wa.animate(0,
1,1E3*h,function(a){Ha.zb()&&(f.Zc.aY=ea.o(f.Zc.oF,f.Zc.Kz,u._53(a),f.Zc.oG),d(l,f.Zc.oG),1==a&&(f.state=1))});break;case 1:wa.clear_animation(m),f.state=-1,c.Xa=a.ub}else Q.error("Logic script error: object '"+l.name+"' must be dynamic. Node: ",a.name),c.Xa=a.ub}},TRANSFORM_OBJECT:function(a,b,c){function d(a,b,c){0==c?La.set_tsr(a,b):La.set_tsr_rel(a,b);La.Ea(a);Ga.sync_transform(a)}function g(a,c,d){c.obj=P(a,"id0",h,b.pa,d.pa);c.obj||h||(Q.error("Logic script error: object not found. Node: ",
a.name),a.mute=!0);c.state=-1;c.Zc={Bx:0,dm:ea.b(),wj:ea.b(),Sr:ea.b()}}var h=a.za.id0;switch(b.state){case 2:var e=K(a,c,g),k=h?D(a.ya.id0,b.pa,c.pa):e.obj;switch(e.state){case -1:qa[0]=a.za.trx?t(D(a.ya.trx,b.pa,c.pa),0):a.ib.trx;qa[1]=a.za["try"]?t(D(a.ya["try"],b.pa,c.pa),0):a.ib["try"];qa[2]=a.za.trz?t(D(a.ya.trz,b.pa,c.pa),0):a.ib.trz;ka[0]=a.za.rox?t(D(a.ya.rox,b.pa,c.pa),0)*Math.PI/180:a.ib.rox;ka[1]=a.za.roy?t(D(a.ya.roy,b.pa,c.pa),0)*Math.PI/180:a.ib.roy;ka[2]=a.za.roz?t(D(a.ya.roz,b.pa,
c.pa),0)*Math.PI/180:a.ib.roz;var f=a.za.sc?D(a.ya.sc,b.pa,c.pa):a.ib.sc;u.Y(ka,ta);ea.t(qa,f,ta,e.Zc.wj);e.Zc.Bx=a.hd.space_type;switch(e.Zc.Bx){case 0:La.get_tsr(k,e.Zc.dm);break;case 1:La.get_tsr_rel(k,e.Zc.dm);break;case 2:La.get_tsr_rel(k,e.Zc.dm),ea.q(e.Zc.dm,e.Zc.wj,e.Zc.wj)}f=a.za.dur?t(D(a.ya.dur,b.pa,c.pa),0):a.ib.dur;if(0==f){d(k,e.Zc.wj,e.Zc.Bx);c.Xa=a.ub;break}e.state=0;f=wa.animate(0,1,1E3*f,function(a){Ha.zb()&&(ea.o(e.Zc.dm,e.Zc.wj,u._53(a),e.Zc.Sr),d(k,e.Zc.Sr,e.Zc.Bx),1==a&&(e.state=
1))});break;case 1:wa.clear_animation(f),e.state=-1,c.Xa=a.ub}}},SPEAKER_PLAY:function(a,b,c){function d(a,c,d){c.obj=P(a,"id0",g,b.pa,d.pa);c.obj||g||(Q.error("Logic script error: object not found. Node: ",a.name),a.mute=!0)}var g=a.za.id0;switch(b.state){case 1:void 0==a.za.not_wait&&(a.za.not_wait=!0);break;case 2:var h=K(a,c,d);h.obj=g?D(a.ya.id0,b.pa,c.pa):h.obj;Fa.is_playing(h.obj)||0!=h.state||(h.state=1);switch(h.state){case -1:for(var e in b.Jf){var k=b.Jf[e].oc.Xa;-1!=k&&(k=b.Jf[e].Ha[k],
"SPEAKER_PLAY"==k.type&&k!=a&&0==h.state&&k.obj==a.obj&&(k.state=1))}a.za.not_wait||(c.Gh=!0);Fa.play_def(h.obj);h.state=0;break;case 0:a.za.not_wait&&(c.Xa=a.ub,h.state=-1);break;case 1:a.za.not_wait||(c.Gh=!1);c.Xa=a.ub;h.state=-1;break;default:Aa.va("Unknown state of "+a.name),h.state=-1}}},SPEAKER_STOP:function(a,b,c){function d(a,c,d){c.obj=P(a,"id0",g,b.pa,d.pa);c.obj||g||(Q.error("Logic script error: object not found. Node: ",a.name),a.mute=!0)}var g=a.za.id0;switch(b.state){case 2:var h=K(a,
c,d);Fa.stop(g?D(a.ya.id0,b.pa,c.pa):h.obj);c.Xa=a.ub}},STOP_ANIM:function(a,b,c){function d(a,c,d){c.obj=h?Y.get_world_by_name(a.tF[0],0):P(a,"id0",g,b.pa,d.pa);c.obj||g||(Q.error("Logic script error: object not found. Node: ",a.name),a.mute=!0)}var g=a.za.id0,h=a.za.env;switch(b.state){case 2:var e=K(a,c,d);e.obj=g?D(a.ya.id0,b.pa,c.pa):e.obj;pa.stop(e.obj,pa.SLOT_ALL);a.za.rst&&pa.set_first_frame(e.obj,pa.SLOT_ALL);c.Xa=a.ub}},STOP_TIMELINE:function(a,b,c,d){switch(b.state){case 2:a.za.rst&&oa.gI(d),
oa.kC(),c.Xa=a.ub}},CONSOLE_PRINT:function(a,b,c){switch(b.state){case 2:var d=0,g="{",h;for(h in a.ya){0<d&&(g+=", ");var e=D(a.ya[h],b.pa,c.pa);g+='"'+a.ya[h][1]+'": ';try{g+=JSON.stringify(e)}catch(ab){g=e?g+('{"name": "'+e.name+'", "type": "'+e.type+'"}'):g+"Object"}++d}Q.log(a.hd.msg,g+"}");c.Xa=a.ub}},STRING:function(a,b,c){switch(b.state){case 2:var d=a.za.id0?t(D(a.ya.id0,b.pa,c.pa),1):a.Fk.id0,g=a.za.id1?t(D(a.ya.id1,b.pa,c.pa),1):a.Fk.id1,h=0;switch(a.hd.string_operation){case 0:h=d+g;break;
case 1:h=d.indexOf(g);break;case 2:h=d.replace(g,a.za.id2?t(D(a.ya.id2,b.pa,c.pa),1):a.Fk.id2);break;case 3:var e=a.ya;h=d.substring(0,d.indexOf(g));J(e.dst1,b.pa,c.pa,d.substring(d.indexOf(g)+1,d.length));""==D(e.dst,b.pa,c.pa)&&(h=D(e.dst1,b.pa,c.pa),J(e.dst1,b.pa,c.pa,""));break;case 4:switch(a.hd.condition){case 5:h=d==g?1:0;break;case 4:h=d!=g?1:0;break;case 3:h=d<g?1:0;break;case 2:h=d>g?1:0;break;case 1:h=d<=g?1:0;break;case 0:h=d>=g?1:0}}J(a.ya.dst,b.pa,c.pa,h);c.Xa=a.ub}},GET_TIMELINE:function(a,
b,c,d){switch(b.state){case 2:d=a.za.nla?t(oa.get_frame(d),0):t(wa.get_frame(d),0),J(a.ya.vd,b.pa,c.pa,d),c.Xa=a.ub}},JSON:function(a,b,c){function g(a,b,c,g){for(var h=0;h<b.length;h++){for(var e=b[h].split("."),k=a,f=c[h],l=0;l<e.length&&(k=k[e[l]],void 0!==k&&null!==k);l++);k=d(k);g[f]=k}}function h(a,b,c,g){g||(g={});for(var h=0;h<b.length;h++){var e=b[h].split("."),k=g,f=c[h];if(f in a){for(var l=0;l<e.length-1;l++)void 0===k[e[l]]&&(k[e[l]]=isNaN(e[l+1])?{}:[]),k=k[e[l]];k[e[e.length-1]]=d(a[f])}}}
switch(b.state){case 2:switch(a.hd.json_operation){case "PARSE":try{var e=JSON.parse(t(D(a.ya.jsn,b.pa,c.pa),1));g(e,a.tS,a.uS,c.pa)}catch(V){Q.error("logic script error: non valid JSON string")}break;case "ENCODE":e={},h(c.pa,a.gP,a.hP,e),e=t(JSON.stringify(e),1),J(a.ya.jsn,b.pa,c.pa,e)}c.Xa=a.ub}},JS_CALLBACK:function(a,b,c){switch(b.state){case 2:for(var g=a.za.cb?t(D(a.ya.cb,b.pa,c.pa),1):a.Fk.cb,h=[],e=0,k="id"+e,f=a.hd.js_cb_params;k in f;)k=0==f[k]?Y.Cd(Y.qe,a.Xd[k],0):D(a.ya[k],b.pa,c.pa),
h.push(k),e++,k="id"+e;f=[];e=0;for(k="out"+e;k in a.ya;)k=D(a.ya[k],b.pa,c.pa),f.push(k),e++,k="out"+e;e=1;if(g in ua){if(e=!ua[g](h,f))for(g=0;g<f.length;g++)k="out"+g,k in a.ya&&J(a.ya[k],b.pa,c.pa,d(f[g]))}else Q.error("logic script error: no custom callback with id "+g);e&&(c.Xa=a.ub)}},EMPTY:W,DATE_TIME:function(a,b,c){switch(b.state){case 2:var d=new Date;if("L"==a.hd.time_type){var g=d.getFullYear();var h=d.getMonth();var e=d.getDate();var k=d.getHours();var f=d.getMinutes();d=d.getSeconds()}else g=
d.getUTCFullYear(),h=d.getUTCMonth(),e=d.getUTCDate(),k=d.getUTCHours(),f=d.getUTCMinutes(),d=d.getUTCSeconds();a.za.y&&J(a.ya.y,b.pa,c.pa,g);a.za.M&&J(a.ya.M,b.pa,c.pa,h);a.za.d&&J(a.ya.d,b.pa,c.pa,e);a.za.h&&J(a.ya.h,b.pa,c.pa,k);a.za.m&&J(a.ya.m,b.pa,c.pa,f);a.za.s&&J(a.ya.s,b.pa,c.pa,d);c.Xa=a.ub}},ELAPSED:function(a,b,c,d,g){switch(b.state){case 2:J(a.ya.s,b.pa,c.pa,g),c.Xa=a.ub}},CALL_FUNC:function(a,b,c){switch(b.state){case 1:c=a.UG.id0;for(var d=a.zl.id0,g=0;g<b.zl.length;g++){var h=b.zl[g];
if(h.id[0][0]==c[0]&&h.id[0][1]==c[1]&&h.id[1]==d){a.Wz=g;break}}break;case 2:d={};c.py={};for(g in a.ya){h=a.ya[g][1];var e=a.Fk[g];d[e]=a.ya[g][0]?b.pa[h]:c.pa[h];g.startsWith("out")&&(c.py[h]=e)}c.$k.push({pE:a,pa:d,mw:b.zl[a.Wz]});c.pa=d;c.JC=!0;c.Xa=b.zl[a.Wz].Ir.Ha[0].ub}},DEF_FUNC:W,SWITCH:function(a,b,c){switch(b.state){case 1:b=Object.keys(a.ya);for(var d in b)b[d].startsWith("id")||b.splice(d,1);a.jw=b;break;case 2:var g=D(a.ya.v,b.pa,c.pa);for(d in a.jw)if(g==D(a.ya[a.jw[d]],b.pa,c.pa)){c.Xa=
a.NG[a.jw[d]];return}c.Xa=a.ub}}},Da=[],ua={},h={};w.YQ=function(a,b){b={Rd:b,UH:a.name,state:0,kp:null,Bb:a,Fz:null,Jf:[],zl:[],Xs:[],pa:{},py:{}};a.OW=b;H(a,b)};w.update=function(a,b){var c=oa.yQ();if(!(0>=c))for(var d=0;d<Da.length;d++)for(var g=d,h=a,e=b,k=c,f=Da[g],l=0;l<Da[g].Jf.length;l++)f.Fz=Da[g].Jf[l],da(Da[g].Jf[l],f,h,e,k)};w.hM=function(a,b){ua[a]=b};w.RS=function(a){delete ua[a]};w.dT=function(a,b){for(var c=0;c<Da.length;c++)if(Da[c].UH==a){a=Da[c];for(c=0;c<a.Jf.length;c++){var d=
a.Jf[c].Ha[0];if(d.name==b){d.za.js&&0<=[0,-1].indexOf(a.Jf[c].oc.Xa)&&(d.mute=!1,a.Jf[c].oc.Xa=0);break}}break}};w.cleanup=function(){Da.length=0;ua={};h={}}});w.a=f},function(D,w,f){D=f(0);var M=f(55),U=f(38),n=f(44),z=f(4),e=f(35),m=f(15),C=f(66),v=f(53),q=f(43),r=f(45),y=f(63),a=f(28),T=f(20),k=f(39),c=f(51),l=f(52),b=f(79),g=f(60),E=f(12),ea=f(19),u=f(1),F=f(22),R=f(10),O=f(23),K=f(34),A=f(17),ca=f(18),L=f(13),ha=f(2),J=f(37),W=f(47);f=Object(D.a)("main",function(f,w){function B(){}function P(){}
function p(){}function da(){window.performance||(xa.log("Apply performance workaround"),window.performance={});var a=Date.now();window.performance.now||(xa.log("Apply performance.now() workaround"),window.performance.now=function(){return Date.now()-a});h.jI(0)}function H(a,b){var c=null;b=b?Ua:bb;for(var d=0;d<b.length;d++){var g=b[d];try{c=a.getContext(g,Va)}catch(fb){}if(c)break}c&&Q.XO(c);return c}function t(a,b,c){a.addEventListener("webglcontextlost",function(a){a.preventDefault();xa.error("WebGL context lost");
la()},!1);Fa.fh(c);var d=Fa.get_renderer_info();d&&xa.log("%cRENDERER INFO:","color: #00a",c.getParameter(d.UNMASKED_VENDOR_WEBGL)+", "+c.getParameter(d.UNMASKED_RENDERER_WEBGL));ra.fh(c);wa.fh(c);ua.fh(c);Da.fh(c);Ha.fh(c);ia.TT(c);X.fh(c);Ea.UT(a);Ha.init(a,b);ma.lI(a.width,a.height,1);za.init();La.init();P=ba();D()}function d(){B=function(){}}function la(){na()||(Ra=performance.now()/1E3,za.pause(),va.pause(),ua.pause(),Ja.pause())}function na(){return V<Ra}function D(){var a="HMD"===Ca.stereo&&
La.GQ();a?a.requestAnimationFrame(D):Ba(D);var b=performance.now()/1E3;Wa||(Wa=b);var c=b-Wa;if(!(c<1/Ca.max_fps)){for(var d=h.get_timeline(),g=0;g<ab.length;g++)ab[g](d,c);na()||(V>Wa&&(c-=V-Math.max(Ra,Wa)),h.xT(c),d+=c,h.jI(d),Ga.update(),oa.update(),Ea.update(),g=c,Ea.is_primary_loaded()&&(ja.reset(),ya.update(g),qa.update(d,g),ta.update(d,g),za.update(d,g),g&&N.update(g),Ea.is_primary_loaded()&&(va.update(d,g),Ea.is_primary_loaded()&&(La.update(d),Ma.update(d,g),Ea.is_primary_loaded()&&(Ja.update(!1),
S.update(d,g),Ta.update(),B(g,d),Ea.is_primary_loaded()&&(ma.update(d,g),Ja.rV(),ka.frame()))))),P(c));Wa=b;a&&a.isPresenting&&a.submitFrame()}}function ba(){var a=60,b=0,c=Ca.DF,d=Ca.BP;return function(g){g<1/Ca.max_fps||(a=ha._51(1/g,a,g,c),g=va.oQ(),b=(b+1)%d,0==b&&p(Math.round(a),g))}}var Ja=Object(M.a)(f),N=Object(U.a)(f),oa=Object(n.a)(f),Y=Object(z.a)(f),Q=Object(e.a)(f),Ha=Object(m.a)(f),ia=Object(C.a)(f),Ma=Object(v.a)(f),Ea=Object(q.a)(f),X=Object(r.a)(f),Ga=Object(y.a)(f),Fa=Object(a.a)(f),
wa=Object(T.a)(f),La=Object(k.a)(f),ja=Object(c.a)(f),ta=Object(l.a)(f),ka=Object(b.a)(f),qa=Object(g.a)(f),S=Object(E.a)(f),va=Object(ea.a)(f),xa=Object(u.a)(f),ra=Object(F.a)(f),ma=Object(R.a)(f),za=Object(O.a)(f),Da=Object(K.a)(f),ua=Object(A.a)(f),h=Object(ca.a)(f),ya=Object(L.a)(f),Ta=Object(W.a)(f),Va=Y.context,Ca=Y.wa,Wa=0,Ra=0,V=0,ab=[],bb=["webgl","experimental-webgl"],Ua=["webgl2","experimental-webgl2"],Qa=null,Ba=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||
window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){return window.setTimeout(a,1E3/Ca.max_fps)}}();w.init=function(a,b){xa.QT(Ca.console_verbose);var c=Object(J.f)()+" "+Object(J.d)()+" ("+Object(J.b)()+")";xa.log("%cINIT ENGINE","color: #00a",c);xa.log("%cUSER AGENT:","color: #00a",navigator.userAgent);if(!window.WebGLRenderingContext)return null;da();b?ja.init(b):(Y.wa.show_hud_debug_info=!1,Y.Ra.vw=!1);Q.tM();Q.xE("Chrome")||Q.xE("Firefox")||
(Ca.Ib=!1);c=H(a,Ca.Ib);!c&&Ca.Ib&&(Ca.Ib=!1,c=H(a,!1));if(!c)return null;xa.log("%cINIT WEBGL "+(Ca.Ib?"2":"1"),"color: #00a");Qa=c;t(a,b,c);Y.apply_quality();Q.cI(c,!0);Y.GT();Da.GR();Ca.Qv&&(a.style["touch-action"]="none");xa.log("%cSET PRECISION:","color: #00a",Ca.precision);return c};w.set_fps_callback=function(a){p=a};w.clear_fps_callback=function(){p=function(){}};w.set_render_callback=function(a){B=a};w.clear_render_callback=function(){d()};w.pause=la;w.resume=function(){na()&&(V=performance.now()/
1E3,za.resume(),va.resume(),ua.play(!0),Ja.resume())};w.is_paused=na;w.reset=function(){Ea.unload(0);ia.reset();Ea.reset();Fa.reset();ra.reset();wa.reset();ua.aT();Da.reset();X.reset();Ha.reset();Ea.reset();Ha.reset();h.reset();za.reset();V=Ra=Wa=0;p=function(){};P=function(){};B=function(){};ab.length=0;Qa=null};w.canvas_data_url=function(a,b,c,d){ka.canvas_data_url(a,b,c,d)};w.detect_mobile=function(){return Q.detect_mobile()};w.append_loop_cb=function(a){for(var b=0;b<ab.length;b++)if(ab[b]==a)return;
ab.push(a)};w.remove_loop_cb=function(a){for(var b=0;b<ab.length;b++)if(ab[b]==a){ab.splice(b,1);break}};w.get_renderer_info=function(){var a=Fa.get_renderer_info();return a?{vendor:Qa.getParameter(a.UNMASKED_VENDOR_WEBGL),renderer:Qa.getParameter(a.UNMASKED_RENDERER_WEBGL)}:null}});w.a=f},function(D,w,f){D=f(0);var M=f(5),U=f(4),n=f(88),z=f(29),e=f(27),m=f(21),C=f(1),v=f(34),q=f(2),r=f(3),y=f(17);f=Object(D.a)("__nodemat",function(a,f){function k(a,b,d,h,e,f){if(b in fb)return fb[b];var l={Ya:null,
id:b,FE:!0};d||(cb={},Wb=0);if("SHADOW"!=h&&"COLOR_ID"!=h){for(var m=fa.create(),p=a.nodes,t=0;t<p.length;t++)if(null==ia(m,p[t],0,h,e,f))return fb[b]=null,l;if(d&&-1==Y(a,m,"GROUP_OUTPUT","group"))return l;t=ya(m);e=d?a.links:a.links.slice();if(!Ta(m,e,t))return l;if(d)return l.Ya=m,l;for(t=0;t<e.length;t++){d=e[t];p=I(d.from_node,m);for(var n=I(d.to_node,m),u=0;u<p.length;u++)for(var r=0;r<n.length;r++){var v=p[u],y=n[r],z=fa.Kb(m,v),C=fa.Kb(m,y);if(!ua(m,v,y,z,C,d))return fb[b]=null,l}}ba(m);t=
!1;e=-1;"GLOW"==h?e=Y(a,m,"B4W_GLOW_OUTPUT","material",!0):(e=Y(a,m,"OUTPUT","material",!1,!0),-1==e&&(e=Y(a,m,"OUTPUT_MATERIAL","material",!1,!0)),-1==e&&(e=Y(a,m,"OUTPUT_WORLD","material",!1,!0),t=!0));-1==e&&(m=ha(),e=0);P(m);a=fa.Xl(m,e,fa.Sk);t?(O(a,h),K(a,h),A(a),T(a)):(c(a,h,f),g(a,h,f));J(a);da(a);Ja(a);B(a,h);ab(a)}else h=k(a,b,d,"MAIN",e,f),h=fa.clone(h.Ya,function(a){var b=q.N(a);b.inputs=q.O(a.inputs);b.outputs=q.O(a.outputs);return b}),e=Y(a,h,"OUTPUT","material",!1,!0),-1==e&&(e=Y(a,
h,"OUTPUT_MATERIAL","material",!1,!0)),D(h,e),a=fa.Xl(h,e,fa.Sk),J(a);l.Ya=a;return fb[b]=l}function c(a,b,c){var d=[];fa.Na(a,function(a,b){"MATERIAL"!=b.type&&"MATERIAL_EXT"!=b.type||d.push({pf:a,node:b})});for(b=0;b<d.length;++b){var g=d[b].pf,h=d[b].node,e=fa.ak(a);fa.$h(a,e,h.data.RR);var k=fa.ak(a);fa.$h(a,k,h.data.SR);fa.gd(a,e,k,[4,2]);for(var f={5:["LIGHTING_APPLY",10],6:["LIGHTING_APPLY",6],7:["MATERIAL_END",3],8:["MATERIAL_END",4],9:["MATERIAL_END",5]},m=fa.bj(a,g),p=[],t=[],n=[],u={},
r=0;r<m;r++){var q=fa.Tg(a,g,r);q in u||(u[q]=0);var v=fa.td(a,q,g,u[q]++);p.push([q,g,v]);var A=f[v[1]];if(A)switch(A[0]){case "MATERIAL_END":t.push([q,k,[v[0],A[1]]]);break;case "LIGHTING_APPLY":n.push([q,[v[0],A[1]]])}else t.push([q,e,v])}l(a,h.data.value,e,k,n,c);for(r=0;r<p.length;r++)fa.vi(a,p[r][0],p[r][1],p[r][2]);for(r=0;r<t.length;r++)fa.gd(a,t[r][0],t[r][1],t[r][2]);h=fa.ah(a,g);e=[];f=[];m={};for(r=0;r<h;r++)p=fa.Ch(a,g,r),p in m||(m[p]=0),v=fa.td(a,g,p,m[p]++),e.push([g,p,v]),f.push([k,
p,v]);for(r=0;r<e.length;r++)fa.vi(a,e[r][0],e[r][1],e[r][2]);for(r=0;r<f.length;r++)fa.gd(a,f[r][0],f[r][1],f[r][2]);fa.rf(a,g)}}function l(a,c,d,g,h,e){var k={name:"LIGHTING_AMBIENT",type:"LIGHTING_AMBIENT"},f=ia(a,k,0,null,null,[]),l=f;b(a,d,f,"E");b(a,d,f,"A");b(a,d,f,"D");if(!c.bd)for(var m,p=0;p<e.length;p++){var t=e[p];k={name:"LIGHTING_LAMP",type:"LIGHTING_LAMP"};m=ia(a,k,0,null,null,[]);k={name:"LIGHTING_APPLY",type:"LIGHTING_APPLY"};f=ia(a,k,0,null,null,[]);b(a,l,f,"color");b(a,l,f,"specular");
b(a,m,f,"ldir");b(a,d,f,"normal");b(a,d,f,"D");b(a,d,f,"S");b(a,m,f,"lcolorint");b(a,d,m,"shadow_factor");k="SPECULAR_"+c.Pf;k={name:k,type:k,use_tangent_shading:c.Se};k=ia(a,k,0,null,null,[]);b(a,m,k,"ldir");b(a,m,k,"lfac");b(a,d,k,"normal");b(a,k,f,"sfactor");b(a,m,k,"norm_fac");b(a,d,k,"sp_params");t="HEMI"==t.type?"DIFFUSE_LAMBERT":"DIFFUSE_"+c.Ff;k={name:t,type:t,use_tangent_shading:c.Se};k=ia(a,k,0,null,null,[]);b(a,m,k,"ldir");b(a,m,k,"lfac");b(a,d,k,"normal");b(a,m,k,"norm_fac");b(a,k,f,"lfactor");
"DIFFUSE_LAMBERT"!=t&&b(a,d,k,"dif_params");for(m=0;m<h.length;m++)fa.gd(a,h[m][0],f,h[m][1]);l=f}b(a,l,g,"color");b(a,l,g,"specular")}function b(a,b,c,d){for(var g=fa.Kb(a,b),h=-1,e=fa.Kb(a,c).inputs,k=0;k<e.length;k++)if(d==e[k].identifier){h=k;break}if(-1!=h){var f=-1;g=g.outputs;for(k=0;k<g.length;k++)if(d==g[k].identifier){f=k;break}-1!=f&&(fa.gd(a,b,c,[f,h]),g[f].lb=!0,e[h].lb=!0)}}function g(a,b,c){var d=[];fa.Na(a,function(a,b){"OUTPUT_MATERIAL"==b.type&&d.push({pf:a,node:b})});for(var g=
0;g<d.length;++g){var h=d[g].pf,e=d[g].node,k=!1,f=!1,l=fa.ak(a);fa.$h(a,l,e.data.pS);for(var m=fa.bj(a,h),p=[],t=[],n={},u=0;u<m;u++){var r=fa.Tg(a,h,u);r in n||(n[r]=0);var q=fa.td(a,r,h,n[r]++);p.push([r,h,q]);switch(q[1]){case 0:k=!0;t.push([r,l,q]);break;case 2:f=!0;var v=fa.ak(a);fa.$h(a,v,e.data.YO);t.push([r,v,[q[0],0]])}}for(u=0;u<p.length;u++)fa.vi(a,p[u][0],p[u][1],p[u][2]);for(u=0;u<t.length;u++)fa.gd(a,t[u][0],t[u][1],t[u][2]);fa.rf(a,h);k?(f&&w(a,l,v),F(a,b,c)):(h=fa.Kb(a,l),a.Ha=[0,
h],a.nb=[])}}function w(a,c,d){c=fa.Xl(a,c,fa.Sk);var g=u(c);if(g.length){d=fa.Xl(a,d,fa.Sk);d=fa.clone(d,Ha,Da);fa.Na(d,function(a,b){b.name="displacement%join%"+b.name});fa.RD(d,c,[],[]);var h=-1;fa.Na(c,function(a,b){if("DISPLACEMENT_BUMP"==b.type)return h=a,1});for(d=0;d<g.length;d++){var e=g[d],k=fa.Kb(c,e);b(c,h,e,"Normal");ea(k,"USE_NORMAL_IN",1)}}a.Ha=c.Ha;a.nb=c.nb}function ea(a,b,c){a=a.Jb;for(var d=0;d<a.length;d++){var g=a[d];g[0]==b&&(g[1]=c)}}function u(a){var b=[];fa.Na(a,function(a,
c){var d=!1;c=c.inputs;for(var g=0;g<c.length;g++)if("Normal"==c[g].identifier){d=!c[g].lb;break}d&&b.push(a)});return b}function F(a,b,c){var d=[];fa.Na(a,function(a,b){"OUTPUT_SURFACE"==b.type&&d.push({pf:a,node:b})});var g=[];d.length&&fa.Na(a,function(a,b){"MIX_SHADER"==b.type&&g.push({pf:a,node:b})});for(b=0;b<d.length;++b){var h=d[b].pf,e=d[b].node,k=fa.ak(a);fa.$h(a,k,e.data.PM);var f=fa.ak(a);fa.$h(a,f,e.data.QM);fa.gd(a,k,f,[4,2]);for(var l=fa.bj(a,h),m=[],p=[],t={},n=0;n<l;n++){var u=fa.Tg(a,
h,n),r=fa.Kb(a,u);u in t||(t[u]=0);var q=fa.td(a,u,h,t[u]++);m.push([u,h,q]);p.push([u,k,q]);if("BSDF_GLOSSY"==r.type||"BSDF_DIFFUSE"==r.type||"MIX_SHADER"==r.type||"EMISSION"==r.type||"BSDF_TRANSPARENT"==r.type||"BSDF_PRINCIPLED"==r.type)for(p.push([u,k,[1,1]]),p.push([u,k,[2,2]]),p.push([u,k,[3,3]]),p.push([u,k,[4,4]]),p.push([u,k,[5,5]]),p.push([u,k,[6,6]]),p.push([u,k,[7,7]]),p.push([u,k,[8,8]]),p.push([u,k,[9,9]]),p.push([u,k,[10,10]]),p.push([u,k,[11,11]]),p.push([u,k,[12,12]]),u=0;u<g.length;++u){r=
g[u].pf;q=fa.bj(a,r);for(var v=0;v<q;v++){var A=fa.Tg(a,r,v),y=fa.Kb(a,A),B=fa.td(a,A,r,0);0==B[1]||"BSDF_GLOSSY"!=y.type&&"BSDF_DIFFUSE"!=y.type&&"MIX_SHADER"!=y.type&&"EMISSION"!=y.type&&"BSDF_TRANSPARENT"!=y.type&&"BSDF_PRINCIPLED"!=y.type||(y=1==B[1]?3:15,p.push([A,r,[1,y]]),p.push([A,r,[2,y+1]]),p.push([A,r,[3,y+2]]),p.push([A,r,[4,y+3]]),p.push([A,r,[5,y+4]]),p.push([A,r,[6,y+5]]),p.push([A,r,[7,y+6]]),p.push([A,r,[8,y+7]]),p.push([A,r,[9,y+8]]),p.push([A,r,[10,y+9]]),p.push([A,r,[11,y+10]]),
p.push([A,r,[12,y+11]]))}}}R(a,e.data.value,k,f,[],c);p.push([f,h,[0,0]]);p.push([f,h,[1,1]]);for(n=0;n<m.length;n++)fa.vi(a,m[n][0],m[n][1],m[n][2]);for(n=0;n<p.length;n++)fa.gd(a,p[n][0],p[n][1],p[n][2])}}function R(a,c,d,g,h,e){var k={name:"LIGHTING_AMBIENT",type:"LIGHTING_AMBIENT"},f=ia(a,k,0,null,null,[]),l=f;b(a,d,f,"E");b(a,d,f,"A");b(a,d,f,"D");for(var m,p=0;p<e.length;p++){k={name:"LIGHTING_LAMP",type:"LIGHTING_LAMP"};m=ia(a,k,0,null,null,[]);k={name:"LIGHTING_APPLY",type:"LIGHTING_APPLY"};
f=ia(a,k,0,null,null,[]);b(a,l,f,"color");b(a,l,f,"specular");b(a,m,f,"ldir");b(a,d,f,"normal");b(a,d,f,"D");b(a,d,f,"S");b(a,m,f,"lcolorint");b(a,d,m,"shadow_factor");l=c.RM;k={name:l,type:l};l=ia(a,k,0,null,null,[]);b(a,m,l,"ldir");b(a,m,l,"lfac");b(a,d,l,"normal");b(a,m,l,"norm_fac");b(a,d,l,"bsdf_params");b(a,l,f,"lfactor");b(a,l,f,"sfactor");for(m=0;m<h.length;m++)fa.gd(a,h[m][0],f,h[m][1]);l=f}b(a,d,g,"bsdf_params");b(a,d,g,"refract_params");b(a,d,g,"d_color");b(a,d,g,"s_color");b(a,d,g,"e_color");
b(a,d,g,"emission");b(a,d,g,"a_color");b(a,d,g,"alpha");b(a,l,g,"color");b(a,l,g,"specular")}function O(a){var b=[];fa.Na(a,function(a,c){"OUTPUT_WORLD"==c.type&&b.push({pf:a,node:c})});for(var c=0;c<b.length;++c){var d=b[c].pf,g=b[c].node,h=fa.ak(a);fa.$h(a,h,g.data.qS);g=fa.bj(a,d);for(var e=[],k=[],f={},l=0;l<g;l++){var m=fa.Tg(a,d,l);m in f||(f[m]=0);var p=fa.td(a,m,d,f[m]++);e.push([m,d,p]);switch(p[1]){case 0:k.push([m,h,p])}}for(l=0;l<e.length;l++)fa.vi(a,e[l][0],e[l][1],e[l][2]);for(l=0;l<
k.length;l++)fa.gd(a,k[l][0],k[l][1],k[l][2]);fa.rf(a,d)}}function K(a,b){var c=[];fa.Na(a,function(a,b){"MIX_SHADER"!=b.type&&"ADD_SHADER"!=b.type||c.push({pf:a,node:b})});if(c.length)for(var d={name:"RGB_WORLD_NODE",type:"RGB_WORLD_NODE",factor:.5},g=0;g<c.length;g++){var h=c[g].pf,e=c[g].node;d.name=e.name;d.fac=e.inputs[0].mb;d.fac_is_linked=e.inputs[0].lb;d.color1_is_linked=e.inputs[1].lb;d.color2_is_linked=e.inputs[2].lb;switch(e.type){case "ADD_SHADER":d.type="ADD_WORLD_RGB";break;case "MIX_SHADER":d.type=
"MIX_WORLD_RGB"}e=ia(a,d,0,b,null,[]);for(var k=fa.bj(a,h),f=[],l=[],m={},p=0;p<k;p++){var t=fa.Tg(a,h,p);t in m||(m[t]=0);var n=fa.td(a,t,h,m[t]++);f.push([t,h,n]);l.push([t,e,n])}for(p=0;p<f.length;p++)fa.vi(a,f[p][0],f[p][1],f[p][2]);for(p=0;p<l.length;p++)fa.gd(a,l[p][0],l[p][1],l[p][2]);k=fa.ah(a,h);f=[];l=[];m={};for(p=0;p<k;p++)t=fa.Ch(a,h,p),t in m||(m[t]=0),n=fa.td(a,h,t,m[t]++),f.push([h,t,n]),l.push([e,t,n]);for(p=0;p<f.length;p++)fa.vi(a,f[p][0],f[p][1],f[p][2]);for(p=0;p<l.length;p++)fa.gd(a,
l[p][0],l[p][1],l[p][2]);fa.rf(a,h)}}function A(a){var b=-1,c=[],d=[],g="OUTPUT_WORLD_SURFACE BACKGROUND RGB VALUE ADD_WORLD_RGB MIX_WORLD_RGB TEXTURE_ENVIRONMENT_EQUIRECTANGULAR TEXTURE_ENVIRONMENT_MIRROR_BALL GEOMETRY_NO GEOMETRY_TRN GEOMETRY_GL GEOMETRY_IN TEXTURE_COLOR TEX_COORD_GE TEX_COORD_OB TEX_COORD_NO COMBRGB COMBHSV CURVE_RGB CURVE_VEC B4W_LINEAR_TO_SRGB B4W_NORMAL_VIEW B4W_VECTOR_VIEW B4W_SRGB_TO_LINEAR B4W_REFLECT B4W_CLAMP B4W_TIME B4W_SMOOTHSTEP NORMAL MAPPING MATH_ADD MATH_SUBTRACT MATH_MULTIPLY MATH_DIVIDE MATH_SINE MATH_COSINE MATH_TANGENT MATH_ARCSINE MATH_ARCCOSINE MATH_ARCTANGENT MATH_POWER MATH_LOGARITHM MATH_MINIMUM MATH_MAXIMUM MATH_ROUND MATH_LESS_THAN MATH_GREATER_THAN MATH_MODULO MATH_ABSOLUTE MIX_RGB_MIX MIX_RGB_ADD MIX_RGB_MULTIPLY MIX_RGB_SUBTRACT MIX_RGB_SCREEN MIX_RGB_DIVIDE MIX_RGB_DIFFERENCE MIX_RGB_DARKEN MIX_RGB_LIGHTEN MIX_RGB_OVERLAY MIX_RGB_DODGE MIX_RGB_BURN MIX_RGB_HUE MIX_RGB_SATURATION MIX_RGB_VALUE MIX_RGB_COLOR MIX_RGB_SOFT_LIGHT MIX_RGB_LINEAR_LIGHT SEPRGB SEPHSV VALTORGB VECT_TRANSFORM VECT_MATH_ADD VECT_MATH_SUBTRACT VECT_MATH_AVERAGE VECT_MATH_DOT_PRODUCT VECT_MATH_CROSS_PRODUCT VECT_MATH_NORMALIZE".split(" ");
fa.Na(a,function(a,d){switch(g.indexOf(d.type)){case -1:c.push({pf:a,node:d});break;case 0:b=a}});for(var h=0;h<c.length;h++)for(var e=c[h].pf,k=fa.ah(a,e),f={},l=0;l<k;l++){var m=fa.Ch(a,e,l);m in f||(f[m]=0);var p=fa.td(a,e,m,f[m]++);d.push([e,m,p])}for(h=0;h<d.length;h++)fa.vi(a,d[h][0],d[h][1],d[h][2]);d.length&&(d=fa.Xl(a,b,fa.Sk),a.Ha=d.Ha,a.nb=d.nb)}function T(a){var b=-1,c=[],d=[];fa.Na(a,function(a,d){switch(d.type){case "ADD_WORLD_RGB":case "MIX_WORLD_RGB":a={pf:a,node:d};c.push(a);break;
case "OUTPUT_WORLD_SURFACE":b=a,a={pf:a,node:d},c.push(a)}});for(var g=0;g<c.length;g++)for(var h=c[g].pf,e=c[g].node,k=fa.bj(a,h),f={},l=0;l<k;l++){var m=fa.Tg(a,h,l),p=fa.Kb(a,m);m in f||(f[m]=0);var t=fa.td(a,m,h,f[m]++);"OUTPUT_WORLD_SURFACE"!=e.type&&0==t[1]||"ADD_WORLD_RGB"==p.type||"MIX_WORLD_RGB"==p.type||"BACKGROUND"==p.type||d.push([m,h,t])}for(g=0;g<d.length;g++)fa.vi(a,d[g][0],d[g][1],d[g][2]);d.length&&(d=fa.Xl(a,b,fa.Sk),a.Ha=d.Ha,a.nb=d.nb)}function D(a,b){fa.Uh(a,function(c,d,g){var h=
fa.Kb(a,d);d==b&&"Color"==h.inputs[g[1]].identifier&&fa.vi(a,c,d,g)})}function ha(){var a=fa.create();fa.$h(a,0,{data:null,Jb:[],Oa:[],inputs:[{mb:new Float32Array([0,0,0]),identifier:"Color",lb:!1,name:"Color"},{mb:1,identifier:"Alpha",lb:!1,name:"Alpha"}],outputs:[],type:"OUTPUT",xf:[]});return a}function J(a){fa.Na(a,function(b,c){var d=c.inputs;c=c.outputs;for(var g=0;g<d.length;g++)W(a,d[g],b,g,1);for(g=0;g<c.length;g++)W(a,c[g],b,g,0)})}function W(a,b,c,d,g){if(b.lb){var h=!0;fa.Uh(a,function(a,
b,e){if(!g&&a==c&&e[0]==d||g&&b==c&&e[1]==d)h=!1});h&&(b.lb=!1)}}function B(a,b){var c=[];fa.Uh(a,function(d,g,h){var e=fa.Kb(a,d),k=fa.Kb(a,g);e=q._16(e.outputs[h[0]].mb);k=q._16(k.inputs[h[1]].mb);if(e!=k){var f,l={default_value:[0,0,0],identifier:"Vector",is_linked:!0,name:"Vector"},m={default_value:0,identifier:"Value",is_linked:!0,name:"Value"};e&&!k?f=Q("vector_to_scalar","B4W_VECTOSCAL",[l],[m]):!e&&k&&(f=Q("scalar_to_vector","B4W_SCALTOVEC",[m],[l]));ia(a,f,0,b,null,[]);c.push([d,g,a.Ha[a.Ha.length-
2],h])}});for(var d=0;d<c.length;++d)fa.vi(a,c[d][0],c[d][1],c[d][3]),fa.gd(a,c[d][0],c[d][2],[c[d][3][0],0]),fa.gd(a,c[d][2],c[d][1],[0,c[d][3][1]])}function ba(a){var b=[];fa.Na(a,function(c,d){switch(d.type){case "B4W_TRANSLUCENCY":fa.Uh(a,function(g,h,e){var k=fa.Kb(a,h);g==c&&"MATERIAL_EXT"==k.type&&"Translucency"==d.outputs[e[0]].name&&b.push(g,h,[e[0]+1,e[1]+1])})}});for(var c=0;c<b.length;c+=3)fa.gd(a,b[c],b[c+1],b[c+2])}function I(a,b){var c=[];fa.Na(b,function(b,d){d.name==a.name&&c.push(b)});
if(c.length)return c;Ua.va("Node not found")}function P(a){var b=[];fa.Na(a,function(a,c){"B4W_PARALLAX"!=c.type&&"REROUTE"!=c.type||b.push(a,c)});for(var c=0;c<b.length;c+=2){var d=b[c],g=b[c+1];if("B4W_PARALLAX"==g.type)p(a,d,g);else if("REROUTE"==g.type){for(var h=fa.Tg(a,d,0),e=fa.ah(a,d),k=[],f=[],l=[],m=0;m<e;m++){var t=fa.Ch(a,d,m),n=f.indexOf(t),u=fa.td(a,d,t,0<=n?l[n]:0);if(u){u=u[1];var r=g.inputs[0].mb;u=fa.Kb(a,t).inputs[u];switch(typeof r){case "number":if("object"==typeof u.mb){var q=
u.mb;for(u=0;u<q.length;u++)q[u]=r}else"number"==typeof u.mb&&(u.mb=r);break;case "object":if("object"==typeof u.mb)for(q=u.mb,u=0;u<q.length;u++)q[u]=r[u];else"number"==typeof u.mb&&(u.mb=.35*r[0]+.45*r[1]+.2*r[2])}}r=g.outputs;for(u=0;u<r.length;u++)r[u].mb=g.inputs[0].mb;-1!=n?l[n]+=1:(f.push(t),l.push(1),k.push(d,t))}if(-1!=h)for(g=fa.td(a,h,d,0)[0],m=0;m<f.length;m++)for(u=0;u<l[m];u++)e=fa.td(a,d,f[m],u)[1],fa.gd(a,h,f[m],[g,e]);for(m=0;m<k.length;m+=2)fa.Ol(a,k[m],k[m+1],-1)}}}function p(a,
b,c){a:{var d=a.nb;for(var g=0;g<d.length;g+=3)if(d[g+1]==b&&1==d[g+2][1]){d=d[g];break a}d=-1}-1!=d&&(g=fa.Kb(a,d),c.data=g.data,fa.Ol(a,d,b,-1),0==fa.ah(a,d)&&(b=fa.Tg(a,d,0),-1!=b&&fa.Ol(a,b,d,-1),fa.rf(a,d)));c.inputs.splice(1,1)}function da(a){d(a);pa(a);H(a)}function H(a,b){var c={};fa.Na(a,function(a,b){if("GEOMETRY_UV"==b.type||"UVMAP"==b.type||"TEX_COORD_UV"==b.type){var d=b.data.value;d in c||(c[d]=[]);c[d].push(a,b)}});for(var d in c){var g=c[d];if(2<g.length){var h=t(d);h=ia(a,h,0,b,null,
[]);for(var e=fa.Kb(a,h),k=0;k<g.length;k+=2){for(var f=g[k],l=g[k+1],m=[],p={},n=fa.ah(a,f),u=0;u<n;u++){var r=fa.Ch(a,f,u);r in p||(p[r]=0);var q=fa.td(a,f,r,p[r]);p[r]++;m.push(f,r,q);q=q.splice(0,q.length);switch(l.type){case "GEOMETRY_UV":q[0]=0;e.outputs[0].lb=!0;break;case "UVMAP":case "TEX_COORD_UV":q[0]=1,e.outputs[1].lb=!0}fa.gd(a,h,r,q)}for(u=0;u<m.length;u+=3)fa.Ol(a,m[u],m[u+1],0);fa.rf(a,f)}}}}function t(a){var b=Q("merged_uv","UV_MERGED",[],[{default_value:[0,0,0],identifier:"UV_geom",
is_linked:!1,name:"UV_geom"},{default_value:[0,0,0],identifier:"UV_cycles",is_linked:!1,name:"UV_cycles"}]);b.uv_layer=a;return b}function d(a){var b=[];fa.Na(a,function(a,c){"GEOMETRY_VC"!=c.type&&"GEOMETRY_NO"!=c.type&&"GEOMETRY_FB"!=c.type&&"GEOMETRY_VW"!=c.type&&"GEOMETRY_GL"!=c.type&&"GEOMETRY_LO"!=c.type&&"GEOMETRY_OR"!=c.type&&"GEOMETRY_BF"!=c.type&&"GEOMETRY_IN"!=c.type||b.push(a,c)});for(var c=[],d=0;d<b.length;d+=2){for(var g=b[d],h=b[d+1],e=!0,k=0;k<c.length;k++){var f=c[k];if(Aa(h,f.Jg)){e=
[];k=fa.ah(a,g);for(var l=0;l<k;l++){var m=fa.Ch(a,g,l),p=fa.td(a,g,m,0);e.push(g,m,p);fa.gd(a,f.id,m,p)}for(l=0;l<e.length;l+=3)fa.Ol(a,e[l],e[l+1],0);fa.rf(a,g);e=!1;break}}e&&(f={id:g,Jg:h},c.push(f))}}function la(a){for(var b={},c=0;c<a.Ha.length;c+=2){var d=a.Ha[c];b[d]={Hq:{},uG:!1}}for(c=0;c<a.nb.length;c+=3)b[a.nb[c+1]].Hq[a.nb[c]]=!0;for(d in b)na(d,b);for(d in b)b[d]=Object.keys(b[d].Hq).map(function(a){return parseInt(a,10)});return b}function na(a,b){var c=b[a];if(!c.uG){var d=q.O(c),
g;for(g in c.Hq){na(g,b);c=b[g];for(var h in c.Hq)d.Hq[h]=!0}d.uG=!0;b[a]=d}}function pa(a){var b=[];fa.Na(a,function(a,c){"TEXTURE_COLOR"!=c.type&&"TEXTURE_NORMAL"!=c.type||b.push(a,c)});if(b.length){for(var c=la(a),d=[],g=0;g<b.length;g+=2){for(var h=b[g],e=b[g+1],k=!0,f=0;f<d.length;f++){var l=d[f];if(!(3<=l.ep.length||!Aa(e,l.Jg)||-1<c[h].indexOf(l.id)||-1<c[l.id].indexOf(h))){for(var m=!1,p=0;p<l.ep.length;p++){var t=l.ep[p].id;if(-1<c[h].indexOf(t)||-1<c[t].indexOf(h)){m=!0;break}}if(!m){f=
[];t=fa.bj(a,h);var n={};for(p=0;p<t;p++)m=fa.Tg(a,h,p),m in n||(n[m]=0),k=fa.td(a,m,h,n[m]++),f.push(m,h,k);t=[];n=fa.ah(a,h);var u={};for(p=0;p<n;p++)m=fa.Ch(a,h,p),m in u||(u[m]=0),k=fa.td(a,h,m,u[m]++),t.push(h,m,k);k=f.concat(t);for(p=0;p<k.length;p+=3)fa.Ol(a,k[p],k[p+1],0);fa.rf(a,h);p={id:h,Jg:e,eP:f,fP:t};l.ep.push(p);k=!1;break}}}k&&(l={id:h,Jg:e,ep:[]},d.push(l))}for(g=0;g<d.length;g++){l=d[g];c=l.ep.length;for(f=0;f<c;f++){e=l.ep[f];p=e.Jg;h=e.eP;e=e.fP;l.Jg.inputs[f+1].lb=p.inputs[0].lb;
l.Jg.inputs[f+1].mb=p.inputs[0].mb;l.Jg.outputs[2*(f+1)].lb=p.outputs[0].lb;l.Jg.outputs[2*(f+1)].mb=p.outputs[0].mb;l.Jg.outputs[2*(f+1)+1].lb=p.outputs[1].lb;l.Jg.outputs[2*(f+1)+1].mb=p.outputs[1].mb;for(p=0;p<h.length;p+=3)m=h[p],k=h[p+2],k[1]+=f+1,fa.gd(a,m,l.id,k);for(p=0;p<e.length;p+=3)m=e[p+1],k=e[p+2],k[0]+=2*(f+1),fa.gd(a,l.id,m,k);l.Jg.Jb.push(["USE_uv"+(f+2),1])}fa.rf(a,l.id);fa.$h(a,l.id,l.Jg)}}}function Aa(a,b){if(a.type!==b.type)return!1;switch(a.type){case "GEOMETRY_VC":return a.data.value==
b.data.value;case "GEOMETRY_NO":var c=a.Jb;a=-1;for(var d=0;d<c.length;d++){var g=c[d];if("USE_NORMAL_IN"==g[0]){a=g[1];break}}b=b.Jb;c=-1;for(d=0;d<b.length;d++)if(g=b[d],"USE_NORMAL_IN"==g[0]){c=g[1];break}return a===c;case "GEOMETRY_FB":case "GEOMETRY_VW":case "GEOMETRY_GL":case "GEOMETRY_LO":case "GEOMETRY_OR":case "GEOMETRY_BF":case "GEOMETRY_IN":return!0;case "TEXTURE_COLOR":case "TEXTURE_NORMAL":return a.data.ku==b.data.ku&&a.data.value.Zm==b.data.value.Zm;case "VALUE":case "RGB":return a.oe==
b.oe;default:return!1}}function Ja(a){var b=[],c=[];fa.Na(a,function(a,d){"GEOMETRY_VC"==d.type&&b.push(a,d);"GEOMETRY_VW"==d.type&&c.push(a,d)});N(a,b);oa(a,c)}function N(a,b){for(var c=0;c<b.length;c+=2){for(var d=b[c],g=b[c+1],h=!1,e=[],k=[],f=[[],[],[]],l=fa.ah(a,d),m=0;m<l;m++){var p=fa.Ch(a,d,m);if("SEPRGB"!=fa.Kb(a,p).type){h=!1;break}e.push(d,p);var t={},n=fa.ah(a,p);for(h=0;h<n;h++){var u=fa.Ch(a,p,h);u in t||(t[u]=0);var r=fa.td(a,p,u,t[u]++);e.push(p,u);f[r[0]].push(d,u,r)}k.push(p);h=
!0}if(h){for(m=d=l=0;m<f.length;m++)f[m].length&&(l++,d|=1<<2-m);if(l){g.type+=l;g.outputs=[];for(m=0;m<f.length;m++)if(f[m].length)for(g.outputs.push({mb:0,identifier:"RGB"[m],lb:!0,name:"RGB"[m]}),h=0;h<f[m].length;h+=3)f[m][h+2][0]=q._42(d,m);for(m=0;m<e.length;m+=2)fa.Ol(a,e[m],e[m+1],0);for(m=0;m<k.length;m++)fa.rf(a,k[m]);for(m=0;m<f.length;m++)for(h=0;h<f[m].length;h+=3)fa.gd(a,f[m][h],f[m][h+1],f[m][h+2])}}}}function oa(a,b){for(var c=0;c<b.length;c+=2){for(var d=b[c],g=!0,h=[],e=fa.ah(a,
d),k=0;k<e;k++){var f=fa.Ch(a,d,k);if("B4W_REFLECT"==fa.Kb(a,f).type){var l=fa.td(a,d,f,0),m=fa.td(a,d,f,1);l&&1==l[1]||m&&1==m[1]?g=!1:h.push(d,f)}else g=!1}for(k=0;k<h.length;k+=2)e=a,l=h[k],f=h[k+1],m=fa.Kb(e,f),m.type+="_WORLD",fa.Ol(e,l,f,0),m.inputs.splice(0,1),l=fa.Tg(e,f,0),l!=fa.Sy&&(fa.td(e,l,f,0)[1]=0);g&&fa.rf(a,d)}}function Y(a,b,c,d,g,h){a=a.nodes;for(var e=null,k=0;k<a.length;k++){var f=a[k];g?"GROUP"==f.type&&f.node_tree_name==c&&(e=f):f.type==c&&(e=f)}return e?I(e,b)[0]:(h||Na.error('No "'+
c+'" node in node '+d),-1)}function Q(a,b,c,d){return{name:a,type:b,inputs:c,outputs:d}}function Ha(a){var b={name:"",oe:"",type:"",xf:[],inputs:[],outputs:[],Oa:[],data:null,Jb:[]};b.name=a.name;b.oe=a.oe;b.type=a.type;for(var c=b.xf,d=a.xf,g=0;g<d.length;g++)c.push(za(d[g]));c=b.Oa;d=a.Oa;for(g=0;g<d.length;g++)c.push(za(d[g]));c=b.inputs;d=a.inputs;for(g=0;g<d.length;g++)c.push(va(d[g]));c=b.outputs;d=a.outputs;for(g=0;g<d.length;g++)c.push(va(d[g]));c=b.Jb;d=a.Jb;for(g=0;g<d.length;g++)c.push(d[g].slice());
b.data=a.data;return b}function ia(a,b,c,d,g,h){var k=b.name,f=b.name,l=b.type,p=[],t=[],n=[],u=[],v=null,A="uv_layer"in b?b.uv_layer||g&&g.NC||"":"",y="color_layer"in b?b.color_layer||g&&g.OC||"":"",B=[];switch(l){case "BSDF_ANISOTROPIC":case "BSDF_GLASS":case "BSDF_HAIR":case "BSDF_TRANSLUCENT":case "BSDF_REFRACTION":case "BSDF_TOON":case "BSDF_VELVET":case "SUBSURFACE_SCATTERING":case "AMBIENT_OCCLUSION":case "VOLUME_ABSORPTION":case "VOLUME_SCATTER":case "BLACKBODY":case "WAVELENGTH":case "SEPXYZ":case "COMBXYZ":case "LIGHT_FALLOFF":case "TEX_SKY":case "TEX_NOISE":case "TEX_WAVE":case "TEX_MUSGRAVE":case "TEX_GRADIENT":case "TEX_MAGIC":case "TEX_CHECKER":case "TEX_BRICK":case "WIREFRAME":case "TANGENT":case "LIGHT_PATH":case "HOLDOUT":case "HAIR_INFO":case "SCRIPT":t=
xa(b);n=ra(b);Na.warn(l+" node is not fully supported.");break;case "BRIGHTCONTRAST":case "ADD_SHADER":t=xa(b);n=ra(b);break;case "MIX_SHADER":t.push(ta(b,"Fac"));var z=ta(b,"Shader"),C=z.lb;t.push(z);var F=ta(b,"Shader_001");F||(F=ta(b,"Shader.001"));var w=F.lb;t.push(F);t.push(S("d_color1","d_color1",[0,0,0],C));t.push(S("d_roughness1","d_roughness1",0,C));t.push(S("s_color1","s_color1",[0,0,0],C));t.push(S("s_roughness1","s_roughness1",0,C));t.push(S("metalness1","metalness1",0,C));t.push(S("normal1",
"normal1",[0,0,0],C));t.push(S("ior1","ior1",0,C));t.push(S("transmission1","transmission1",0,C));t.push(S("e_color1","e_color1",[0,0,0],C));t.push(S("emission1","emission1",0,C));t.push(S("a_color1","a_color1",[0,0,0],C));t.push(S("alpha1","alpha1",1,C));t.push(S("d_color2","d_color2",[0,0,0],w));t.push(S("d_roughness2","d_roughness2",0,w));t.push(S("s_color2","s_color2",[0,0,0],w));t.push(S("s_roughness2","s_roughness2",0,w));t.push(S("metalness2","metalness2",0,w));t.push(S("normal2","normal2",
[0,0,0],w));t.push(S("ior2","ior2",0,w));t.push(S("transmission2","transmission2",0,w));t.push(S("e_color2","e_color2",[0,0,0],w));t.push(S("emission2","emission2",0,w));t.push(S("a_color2","a_color2",[0,0,0],w));t.push(S("alpha2","alpha2",1,w));var E=ka(b,"Shader"),H=E.lb;n=[E,S("d_color","d_color",[0,0,0],H),S("d_roughness","d_roughness",0,H),S("s_color","s_color",[0,0,0],H),S("s_roughness","s_roughness",0,H),S("metalness","metalness",0,H),S("normal","normal",[0,0,0],H),S("ior","ior",0,H),S("transmission",
"transmission",0,H),S("e_color","e_color",[0,0,0],H),S("emission","emission",0,H),S("a_color","a_color",[0,0,0],H),S("alpha","alpha",1,H)];break;case "OBJECT_INFO":t=xa(b);n=[];var O=ka(b,"Location"),R=ka(b,"Object Index"),I=ka(b,"Material Index"),P=ka(b,"Random");n.push(O);n.push(R);n.push(I);n.push(P);B.push(["USE_LOCATION_OUT",O.lb|0]);B.push(["USE_OBJ_IND_OUT",R.lb|0]);B.push(["USE_MAT_IND_OUT",I.lb|0]);B.push(["USE_RANDOM_OUT",P.lb|0]);break;case "UVMAP":A||(l="EMPTY_UV");if("EMPTY_UV"!=l){var K=
Ga("param_"+l+"_a"),J=Ga("param_"+l+"_v");p.push(ma(K));p.push(ma(J));u.push(ma(J));v={name:K,value:A}}n=ra(b);break;case "UV_MERGED":K=Ga("param_UV_MERGED_a");J=Ga("param_UV_MERGED_v");p.push(ma(K));p.push(ma(J));n.push(ka(b,"UV_geom"));n.push(ka(b,"UV_cycles"));u.push(ma(J));v={name:K,value:A};break;case "CAMERA":t=[];n=ra(b);break;case "COMBRGB":case "COMBHSV":t=xa(b);n=ra(b);break;case "CURVE_RGB":case "CURVE_VEC":"CURVE_RGB"==l?(bb(b,0,0,1)&&B.push(["READ_R",1]),bb(b,1,0,1)&&B.push(["READ_G",
1]),bb(b,2,0,1)&&B.push(["READ_B",1]),bb(b,3,0,1)&&B.push(["READ_A",1])):(bb(b,0,-1,1)&&B.push(["READ_R",1]),bb(b,1,-1,1)&&B.push(["READ_G",1]),bb(b,2,-1,1)&&B.push(["READ_B",1]));t=xa(b);n=ra(b);v={value:b};break;case "PARTICLE_INFO":t=xa(b);n=ra(b);for(var ea=0;ea<b.outputs.length;ea++){var T=b.outputs[ea],na=T.identifier,la=ma("v_param_PART_INFO_"+na.replace(" ",""));if(T.is_linked)switch(na){case "Size":B.push(["PART_INFO_SIZE",Xa.Ga(1)]);break;case "Age":B.push(["PART_INFO_AGE",Xa.Ga(1)]);break;
case "Lifetime":B.push(["PART_INFO_LT",Xa.Ga(1)]);break;case "Location":B.push(["PART_INFO_LOC",Xa.Ga(1)]);break;case "Index":var D=ma("a_param_PART_INFO_"+T.identifier.replace(" ",""));v=D;B.push(["PART_INFO_IND",Xa.Ga(1)]);break;case "Velocity":B.push(["PART_INFO_VEL",Xa.Ga(1)]);break;case "Angular Velocity":B.push(["PART_INFO_A_VEL",Xa.Ga(1)])}"Age"!=na&&"Lifetime"!=na&&"Size"!=na&&(p.push(la),u.push(la))}D&&p.push(D);break;case "NEW_GEOMETRY":case "GEOMETRY":if(!Fa(b))return!0;l=wa(b,c);if(!l)return Na.error("Geometry output is not supported"),
null;switch(l){case "GEOMETRY_UV":A||(l="EMPTY_UV");"EMPTY_UV"!=l&&(K=Ga("param_GEOMETRY_UV_a"),J=Ga("param_GEOMETRY_UV_v"),p.push(ma(K)),p.push(ma(J)),u.push(ma(J)),v={name:K,value:A});n.push(ka(b,"UV"));break;case "GEOMETRY_VC":y||(l="EMPTY_VC");if("EMPTY_VC"!=l){var da=Ga("param_GEOMETRY_VC_a"),L=Ga("param_GEOMETRY_VC_v");p.push(ma(da));p.push(ma(L));u.push(ma(L));v={name:da,value:y}}n.push(ka(b,"Vertex Color"));break;case "GEOMETRY_NO":t.push(S("Normal","Normal",[0,0,0],!1));B.push(["USE_NORMAL_IN",
0]);n.push(ka(b,"Normal"));break;case "GEOMETRY_TRN":l="GEOMETRY_NO";t.push(S("Normal","Normal",[0,0,0],!1));n.push(ka(b,"True Normal"));B.push(["USE_NORMAL_IN",0]);Na.warn("Geometry True Normal output is not fully supported.");break;case "GEOMETRY_FB":n.push(ka(b,"Front/Back"));break;case "GEOMETRY_VW":n.push(ka(b,"View"));break;case "GEOMETRY_GL":n.push(ka(b,"Global")||ka(b,"Position"));break;case "GEOMETRY_LO":n.push(ka(b,"Local"));break;case "GEOMETRY_OR":var N=Ga("param_GEOMETRY_OR_v");p.push(ma(N));
n.push(ka(b,"Orco"));u.push(ma(N));break;case "GEOMETRY_IN":n.push(ka(b,"Incoming"));break;case "GEOMETRY_BF":n.push(ka(b,"Backfacing"))}break;case "ATTRIBUTE":if(!Fa(b))return!0;l=y?"GEOMETRY_VC":"EMPTY_VC";"EMPTY_VC"!=l&&(da=Ga("param_GEOMETRY_VC_a"),L=Ga("param_GEOMETRY_VC_v"),p.push(ma(da)),p.push(ma(L)),u.push(ma(L)),v={name:da,value:y});n.push(ka(b,"Color"));break;case "TEX_COORD":if(!Fa(b))return!0;l=La(b,c);switch(l){case "TEX_COORD_UV":A||(l="EMPTY_UV");"EMPTY_UV"!=l&&(K=Ga("param_TEX_COORD_UV_a"),
J=Ga("param_TEX_COORD_UV_v"),p.push(ma(K)),p.push(ma(J)),u.push(ma(J)),v={name:K,value:A});n.push(ka(b,"UV"));break;case "TEX_COORD_NO":n.push(ka(b,"Normal"));break;case "TEX_COORD_GE":var ba=Ga("param_TEX_COORD_GE_v");p.push(ma(ba));n.push(ka(b,"Generated"));u.push(ma(ba));break;case "TEX_COORD_OB":n.push(ka(b,"Object"));break;case "TEX_COORD_CA":n.push(ka(b,"Camera"));break;case "TEX_COORD_WI":n.push(ka(b,"Window"));break;case "TEX_COORD_RE":n.push(ka(b,"Reflection"))}break;case "GROUP":var ca=
b.node_tree_name;switch(ca){case "B4W_LINEAR_TO_SRGB":if(!Ma(b,[1],[1])){v=Ea(b,d,g,[]);break}l="B4W_LINEAR_TO_SRGB";break;case "B4W_NORMAL_VIEW":case "B4W_VECTOR_VIEW":if(!Ma(b,[1],[1])){v=Ea(b,d,g,[]);break}l="B4W_VECTOR_VIEW";break;case "B4W_SRGB_TO_LINEAR":if(!Ma(b,[1],[1])){v=Ea(b,d,g,[]);break}l="B4W_SRGB_TO_LINEAR";break;case "B4W_REFLECT":if(!Ma(b,[1,1],[1])){v=Ea(b,d,g,[]);break}l="B4W_REFLECT";break;case "B4W_REFRACTION":if(!Ma(b,[1,0],[1])){v=Ea(b,d,g,[]);break}l="B4W_REFRACTION";break;
case "B4W_PARALLAX":if(!Ma(b,[1,1,0,0,0],[1])){v=Ea(b,d,g,[]);break}var W=Ga("param_B4W_PARALLAX_texture");u.push(ma(W));l="B4W_PARALLAX";break;case "B4W_CLAMP":if(!Ma(b,[1],[1])){v=Ea(b,d,g,[]);break}l="B4W_CLAMP";break;case "B4W_TRANSLUCENCY":if(!Ma(b,[0,0,0,0,0],[0])){v=Ea(b,d,g,[]);break}l="B4W_TRANSLUCENCY";break;case "B4W_TIME":if(!Ma(b,[],[0])){v=Ea(b,d,g,[]);break}l="B4W_TIME";break;case "B4W_SMOOTHSTEP":if(!Ma(b,[0,0,0],[0])){v=Ea(b,d,g,[]);break}l="B4W_SMOOTHSTEP";break;case "B4W_GLOW_OUTPUT":l=
"B4W_GLOW_OUTPUT";break;default:v=Ea(b,d,g,h)}t=xa(b);n=ra(b);if("B4W_TRANSLUCENCY"==ca){var M=S("TranslucencyParams","TranslucencyParams",[0,0,0,0]);M.lb=n[0].lb;n.push(M)}break;case "LAMP":var Q=b.lamp;Q?(Q.uuid in cb?B.push(["LAMP_INDEX",String(cb[Q.uuid])]):(cb[Q.uuid]=Wb,B.push(["LAMP_INDEX",String(Wb++)])),v=cb):(Na.error("There is no lamp in node: "+b.name),B.push(["LAMP_INDEX",-1]));n.push(ka(b,"Color"));n.push(ka(b,"Light Vector"));n.push(ka(b,"Distance"));n.push(ka(b,"Visibility Factor"));
break;case "LIGHTING_AMBIENT":t=[S("E","E",[0,0,0],!0),S("A","A",[0,0,0],!0),S("D","D",[0,0,0],!0)];n=[S("color","color",[0,0,0],!0),S("specular","specular",[0,0,0],!0)];break;case "LIGHTING_BEGIN":n=[S("E","E",[0,0,0],!0),S("A","A",[0,0,0],!0),S("D","D",[0,0,0],!0),S("S","S",[0,0,0],!0),S("normal","normal",[0,0,0],!0),S("dif_params","dif_params",[0,0],!0),S("sp_params","sp_params",[0,0],!0),S("shadow_factor","shadow_factor",0,!0),S("translucency_color","translucency_color",0,!0),S("translucency_params",
"translucency_params",[0,0,0,0],!0)];break;case "LIGHTING_END":t=[S("color","color",[0,0,0],!0),S("specular","specular",[0,0,0],!0)];break;case "LIGHTING_LAMP":t=[S("shadow_factor","shadow_factor",0,!0)];n=[S("ldir","ldir",[0,0,0],!0),S("lfac","lfac",[0,0],!0),S("lcolorint","lcolorint",[0,0,0],!0),S("norm_fac","norm_fac",0,!0)];break;case "DIFFUSE_LAMBERT":t=[S("ldir","ldir",[0,0,0],!0),S("lfac","lfac",[0,0],!0),S("normal","normal",[0,0,0],!0),S("norm_fac","norm_fac",0,!0)];n=[S("lfactor","lfactor",
0,!0)];B.push(["MAT_USE_TBN_SHADING",b.use_tangent_shading|0]);break;case "DIFFUSE_FRESNEL":case "DIFFUSE_MINNAERT":case "DIFFUSE_OREN_NAYAR":case "DIFFUSE_TOON":t=[S("ldir","ldir",[0,0,0],!0),S("lfac","lfac",[0,0],!0),S("normal","normal",[0,0,0],!0),S("norm_fac","norm_fac",0,!0),S("dif_params","dif_params",[0,0],!0)];n=[S("lfactor","lfactor",0,!0)];B.push(["MAT_USE_TBN_SHADING",b.use_tangent_shading|0]);break;case "SPECULAR_BLINN":case "SPECULAR_PHONG":case "SPECULAR_COOKTORR":t=[S("ldir","ldir",
[0,0,0],!0),S("lfac","lfac",[0,0],!0),S("normal","normal",[0,0,0],!0),S("norm_fac","norm_fac",0,!0),S("sp_params","sp_params",[0,0],!0)];n=[S("sfactor","sfactor",0,!0)];B.push(["MAT_USE_TBN_SHADING",b.use_tangent_shading|0]);break;case "SPECULAR_TOON":case "SPECULAR_WARDISO":t=[S("ldir","ldir",[0,0,0],!0),S("lfac","lfac",[0,0],!0),S("normal","normal",[0,0,0],!0),S("norm_fac","norm_fac",0,!0),S("sp_params","sp_params",[0,0],!0)];n=[S("sfactor","sfactor",0,!0)];B.push(["MAT_USE_TBN_SHADING",b.use_tangent_shading|
0]);break;case "BSDF_COMPUTE":t=[S("ldir","ldir",[0,0,0],!0),S("lfac","lfac",[0,0],!0),S("normal","normal",[0,0,0],!0),S("norm_fac","norm_fac",0,!0),S("bsdf_params","bsdf_params",[0,0,0,0],!0)];n=[S("lfactor","lfactor",0,!0),S("sfactor","sfactor",0,!0)];break;case "LIGHTING_APPLY":t=[S("color","color",[0,0,0,0],!0),S("specular","specular",[0,0,0],!0),S("lfactor","lfactor",0,!0),S("sfactor","sfactor",0,!0),S("ldir","ldir",[0,0,0],!0),S("normal","normal",[0,0,0],!0),S("translucency_params","translucency_params",
[0,0,0,0],!0),S("D","D",[0,0,0],!0),S("S","S",[0,0,0],!0),S("lcolorint","lcolorint",[0,0,0],!0),S("translucency_color","translucency_color",0,!0)];n=[S("color","color",[0,0,0,0],!0),S("specular","specular",[0,0,0],!0)];break;case "NORMAL":t=xa(b);n=ra(b);var Y=ka(b,"Normal");u.push(ma(Ga("param_NORMAL_Normal"),Y.mb,3));break;case "MAPPING":var Aa=b.vector_type;l="MAPPING";t.push(ta(b,"Vector"));n.push(ka(b,"Vector"));var U=q._1(b.rotation),V=q._1(b.scale),pa=q._1(b.translation),X=e.create(),ha=q.Z(U,
e.create());if("TEXTURE"==Aa||"NORMAL"==Aa)V[0]=V[0]||1,V[1]=V[1]||1,V[2]=V[2]||1;e.multiply(ha,new Float32Array([V[0],0,0,0,V[1],0,0,0,V[2]]),X);X=q._23(X,m.create());switch(Aa){case "POINT":X[12]=pa[0];X[13]=pa[1];X[14]=pa[2];break;case "TEXTURE":X[12]=pa[0];X[13]=pa[1];X[14]=pa[2];X=m.invert(X,X);break;case "NORMAL":m.invert(X,X),m.transpose(X,X)}switch(Aa){case "NORMAL":B.push(["MAPPING_IS_NORMAL",1]);case "TEXTURE":B.push(["MAPPING_TRS_MATRIX_DEF",1]);B.push(["MAPPING_TRS_MATRIX",Xa.Ga(X,16)]);
break;case "POINT":0!==r.length(U)?(B.push(["MAPPING_TRS_MATRIX_DEF",1]),B.push(["MAPPING_TRS_MATRIX",Xa.Ga(X,16)])):(0!==r.sqrDist(V,q.n)&&(B.push(["MAPPING_SCALE_DEF",1]),B.push(["MAPPING_SCALE",Xa.Ga(V,3)])),0!==r.length(pa)&&(B.push(["MAPPING_TRANS_DEF",1]),B.push(["MAPPING_TRANS",Xa.Ga(pa,3)])));break;case "VECTOR":0!==r.length(U)?(B.push(["MAPPING_TRS_MATRIX_DEF",1]),B.push(["MAPPING_TRS_MATRIX",Xa.Ga(X,16)])):0!==r.sqrDist(V,q.n)&&(B.push(["MAPPING_SCALE_DEF",1]),B.push(["MAPPING_SCALE",Xa.Ga(V,
3)]))}b.use_min&&(B.push(["MAPPING_MIN_CLIP_DEF",1]),B.push(["MAPPING_MIN_CLIP",Xa.Ga(b.min,3)]));b.use_max&&(B.push(["MAPPING_MAX_CLIP_DEF",1]),B.push(["MAPPING_MAX_CLIP",Xa.Ga(b.max,3)]));break;case "MATERIAL":case "MATERIAL_EXT":var hb=[],za=[],Ja=[],Da=[S("E","E",[0,0,0],!0),S("A","A",[0,0,0],!0),S("D","D",[0,0,0],!0),S("S","S",[0,0,0],!0),S("normal","normal",[0,0,0],!0),S("dif_params","dif_params",[0,0],!0),S("sp_params","sp_params",[0,0],!0),S("shadow_factor","shadow_factor",0,!0)],pb=[S("color",
"color",[0,0,0],!0),S("specular","specular",[0,0,0],!0),S("normal","normal",[0,0,0],!0)],Ia=[ka(b,"Color"),ka(b,"Alpha"),ka(b,"Normal")],Ha=[],oa=ta(b,"Color");oa.mb.splice(3);Ja.push(oa);t.push(oa);oa=ta(b,"Spec");oa.mb.splice(3);Ja.push(oa);t.push(oa);(oa=ta(b,"DiffuseIntensity"))||(oa=ta(b,"Refl"));oa.mb=b.diffuse_intensity;Ja.push(oa);t.push(oa);var rb=ta(b,"Normal");rb.mb.splice(3);Ja.push(rb);t.push(rb);if("MATERIAL_EXT"==l){(oa=ta(b,"Emit"))||(oa=S("Emit","Emit",0));Ja.push(oa);t.push(oa);
(oa=ta(b,"Translucency"))?(oa.mb=0,oa.name="Translucency",oa.identifier="Translucency"):oa=S("Translucency","Translucency",0);t.push(oa);(oa=ta(b,"Translucency"))?(oa.mb=[0,0,0,0],oa.name="TranslucencyParams",oa.identifier="TranslucencyParams"):oa=S("TranslucencyParams","TranslucencyParams",[0,0,0,0]);t.push(oa);var ua=ta(b,"Reflectivity"),Qb=ta(b,"Ray Mirror");if(ua){oa=ua;var vb="Reflectivity"}else Qb?(oa=Qb,vb="Ray Mirror"):(oa=ua,vb="Reflectivity");oa||(oa=S(vb,vb,0));t.push(oa);pb.push(oa);(oa=
ta(b,"SpecTra"))||(oa=S("SpecTra","SpecTra",0));t.push(oa);pb.push(oa);(oa=ta(b,"Alpha"))||(oa=S("Alpha","Alpha",b.alpha));t.push(oa);pb.push(oa);Ia.push(ka(b,"Diffuse"));Ia.push(ka(b,"Spec"));hb.push(["MATERIAL_EXT",1]);za.push(["MATERIAL_EXT",1])}else Ja.push(S("emit_intensity","emit_intensity",0)),pb.push(S("reflect_factor","reflect_factor",0)),pb.push(S("specular_alpha","specular_alpha",0)),pb.push(S("alpha_in","alpha_in",0)),Ia.push(S("diffuse_out","diffuse_out",0)),Ia.push(S("spec_out","spec_out",
0)),hb.push(["MATERIAL_EXT",0]),za.push(["MATERIAL_EXT",0]);Ha.push(ma(Ga("param_MATERIAL_alpha"),b.alpha));Ha.push(ma(Ga("param_MATERIAL_spec_alpha"),b.specular_alpha));n=Ia;hb.push(["USE_MATERIAL_NORMAL",rb.lb|0]);b.use_diffuse&&(hb.push(["USE_MATERIAL_DIFFUSE",1]),za.push(["USE_MATERIAL_DIFFUSE",1]));b.use_specular&&za.push(["USE_MATERIAL_SPECULAR",1]);var ya=[],Ca=0;switch(b.specular_shader){case "COOKTORR":case "PHONG":var wb=b.specular_hardness;break;case "WARDISO":wb=b.specular_slope;break;
case "TOON":wb=b.specular_toon_size;Ca=b.specular_toon_smooth;break;case "BLINN":wb=b.specular_ior;Ca=b.specular_hardness;break;default:Na.error("unsupported specular shader: "+b.specular_shader+' (material "'+b.material_name+'")'),wb=b.specular_hardness}var qa;switch(b.diffuse_shader){case "LAMBERT":var va=qa=0;break;case "OREN_NAYAR":qa=b.roughness;va=0;break;case "FRESNEL":qa=b.diffuse_fresnel;va=b.diffuse_fresnel_factor;break;case "MINNAERT":qa=b.darkness;va=0;break;case "TOON":qa=b.diffuse_toon_size;
va=b.diffuse_toon_smooth;break;default:Na.error("unsupported diffuse shader: "+b.diffuse_shader+' (material "'+b.material_name+'")'),va=qa=0}ya.push(ma(Ga("param_MATERIAL_diffuse"),[qa,va],2));ya.push(ma(Ga("param_MATERIAL_spec"),[b.specular_intensity,wb,Ca],3));hb.push(["SHADELESS_MAT",b.use_shadeless?1:0]);var Wa={name:b.name,value:{Pf:b.specular_shader,Ff:b.diffuse_shader,bd:b.use_shadeless,Se:b.use_tangent_shading}};v={name:b.name,value:{Pf:b.specular_shader,Ff:b.diffuse_shader,bd:b.use_shadeless,
Se:b.use_tangent_shading},RR:{name:"material_begin",type:"MATERIAL_BEGIN",inputs:Ja,outputs:Da,Oa:ya,data:Wa,Jb:hb,xf:[]},SR:{name:"material_end",type:"MATERIAL_END",inputs:pb,outputs:Ia,Oa:Ha,data:Wa,Jb:za,xf:[]}};break;case "BSDF_PRINCIPLED":t=xa(b);var Ra=ta(b,"Base Color"),Ba=ta(b,"Metallic"),Va=ta(b,"Roughness"),Ta=ta(b,"IOR"),ab=ta(b,"Transmission"),Qa=ta(b,"Normal");t=[Ra,Ba,Va,Ta,ab,Qa];B.push(["USE_NORMAL_IN",Qa.lb|0]);var Ua=ka(b,"BSDF"),Za=Ua.lb;n=[Ua,S("d_color","d_color",[0,0,0],Za),
S("d_roughness","d_roughness",0,Za),S("s_color","s_color",[0,0,0],Za),S("s_roughness","s_roughness",0,Za),S("metalness","metalness",1,Za),S("normal","normal",[0,0,0],Za),S("ior","ior",0,Za),S("transmission","transmission",0,Za),S("e_color","e_color",[0,0,0],Za),S("emisson","emisson",0,Za),S("a_color","a_color",[0,0,0],Za),S("alpha","alpha",1,Za)];v={value:{CV:ab.lb||ab.mb}};break;case "BSDF_DIFFUSE":t=xa(b);B.push(["USE_NORMAL_IN",t[2].lb|0]);Ua=ka(b,"BSDF");Za=Ua.lb;n=[Ua,S("d_color","d_color",[0,
0,0],Za),S("d_roughness","d_roughness",0,Za),S("s_color","s_color",[0,0,0],Za),S("s_roughness","s_roughness",0,Za),S("metalness","metalness",0,Za),S("normal","normal",[0,0,0],Za),S("ior","ior",0,Za),S("transmission","transmission",0,Za),S("e_color","e_color",[0,0,0],Za),S("emisson","emisson",0,Za),S("a_color","a_color",[0,0,0],Za),S("alpha","alpha",1,Za)];break;case "BSDF_GLOSSY":t=xa(b);B.push(["USE_NORMAL_IN",t[2].lb|0]);Ua=ka(b,"BSDF");Za=Ua.lb;n=[Ua,S("d_color","d_color",[0,0,0],Za),S("d_roughness",
"d_roughness",0,Za),S("s_color","s_color",[0,0,0],Za),S("s_roughness","s_roughness",0,Za),S("metalness","metalness",1,Za),S("normal","normal",[0,0,0],Za),S("ior","ior",0,Za),S("transmission","transmission",0,Za),S("e_color","e_color",[0,0,0],Za),S("emisson","emisson",0,Za),S("a_color","a_color",[0,0,0],Za),S("alpha","alpha",1,Za)];break;case "BSDF_TRANSPARENT":var fb=b.b4w_use_alpha;t=xa(b);Ua=ka(b,"BSDF");Za=Ua.lb;n=[Ua,S("d_color","d_color",[0,0,0],Za),S("d_roughness","d_roughness",0,Za),S("s_color",
"s_color",[0,0,0],Za),S("s_roughness","s_roughness",0,Za),S("metalness","metalness",0,Za),S("normal","normal",[0,0,0],Za),S("ior","ior",0,Za),S("transmission","transmission",0,Za),S("e_color","e_color",[0,0,0],Za),S("emisson","emisson",0,Za),S("a_color","a_color",[0,0,0],Za),S("alpha","alpha",fb?0:1,Za)];v={value:{uV:fb}};B.push(["USE_ALPHA",fb|0]);break;case "EMISSION":t=xa(b);var jb=ka(b,"Emission"),Dc=jb.lb;n=[jb,S("d_color","d_color",[0,0,0],Dc),S("d_roughness","d_roughness",0,Dc),S("s_color",
"s_color",[0,0,0],Dc),S("s_roughness","s_roughness",0,Dc),S("metalness","metalness",1,Dc),S("normal","normal",[0,0,0],Dc),S("ior","ior",0,Za),S("transmission","transmission",0,Za),S("e_color","e_color",[0,0,0],Dc),S("emisson","emisson",1,Dc),S("a_color","a_color",[0,0,0],Za),S("alpha","alpha",1,Za)];break;case "MATH":switch(b.operation){case "ADD":l="MATH_ADD";break;case "SUBTRACT":l="MATH_SUBTRACT";break;case "MULTIPLY":l="MATH_MULTIPLY";break;case "DIVIDE":l="MATH_DIVIDE";break;case "SINE":l="MATH_SINE";
break;case "COSINE":l="MATH_COSINE";break;case "TANGENT":l="MATH_TANGENT";break;case "ARCSINE":l="MATH_ARCSINE";break;case "ARCCOSINE":l="MATH_ARCCOSINE";break;case "ARCTANGENT":l="MATH_ARCTANGENT";break;case "POWER":l="MATH_POWER";break;case "LOGARITHM":l="MATH_LOGARITHM";break;case "MINIMUM":l="MATH_MINIMUM";break;case "MAXIMUM":l="MATH_MAXIMUM";break;case "ROUND":l="MATH_ROUND";break;case "LESS_THAN":l="MATH_LESS_THAN";break;case "GREATER_THAN":l="MATH_GREATER_THAN";break;case "MODULO":l="MATH_MODULO";
break;case "ABSOLUTE":l="MATH_ABSOLUTE";break;default:return Na.error("Unsupported MATH operation: "+b.operation),null}B.push(["MATH_USE_CLAMP",Number(b.use_clamp)]);t=xa(b);n=ra(b);break;case "MIX_RGB":switch(b.blend_type){case "MIX":l="MIX_RGB_MIX";break;case "ADD":l="MIX_RGB_ADD";break;case "MULTIPLY":l="MIX_RGB_MULTIPLY";break;case "SUBTRACT":l="MIX_RGB_SUBTRACT";break;case "SCREEN":l="MIX_RGB_SCREEN";break;case "DIVIDE":l="MIX_RGB_DIVIDE";break;case "DIFFERENCE":l="MIX_RGB_DIFFERENCE";break;
case "DARKEN":l="MIX_RGB_DARKEN";break;case "LIGHTEN":l="MIX_RGB_LIGHTEN";break;case "OVERLAY":l="MIX_RGB_OVERLAY";break;case "DODGE":l="MIX_RGB_DODGE";break;case "BURN":l="MIX_RGB_BURN";break;case "HUE":l="MIX_RGB_HUE";break;case "SATURATION":l="MIX_RGB_SATURATION";break;case "VALUE":l="MIX_RGB_VALUE";break;case "COLOR":l="MIX_RGB_COLOR";break;case "SOFT_LIGHT":l="MIX_RGB_SOFT_LIGHT";break;case "LINEAR_LIGHT":l="MIX_RGB_LINEAR_LIGHT";break;default:return Na.error("Unsupported MIX_RGB blend type: "+
b.blend_type),null}B.push(["MIX_RGB_USE_CLAMP",Number(b.use_clamp)]);t=xa(b);n=ra(b);break;case "MIX_WORLD_RGB":case "ADD_WORLD_RGB":t=[S("Factor","Factor",b.fac,b.fac_is_linked),S("Color1","Color1",[0,0,0],b.color1_is_linked),S("Color2","Color1",[0,0,0],b.color2_is_linked)];n=[S("Color","Color",[0,0,0],!0)];break;case "OUTPUT":t=xa(b);n=[];break;case "OUTPUT_MATERIAL":t=xa(b);n=[];var dd=ta(b,"Surface"),Gb=dd.lb,od={name:"output_surface",type:"OUTPUT_SURFACE",inputs:[dd,S("alpha","alpha",1,Gb)],
outputs:[],Oa:[],data:{value:{RM:"BSDF_COMPUTE"},PM:{name:"bsdf_begin",type:"BSDF_BEGIN",inputs:[dd,S("d_color","d_color",[0,0,0],Gb),S("d_roughness","d_roughness",0,Gb),S("s_color","s_color",[0,0,0],Gb),S("s_roughness","s_roughness",0,Gb),S("metalness","metalness",0,Gb),S("normal","normal",[0,0,0],Gb),S("ior","ior",0,Gb),S("transmission","transmission",0,Gb),S("e_color","e_color",[0,0,0],Gb),S("emission","emission",0,Gb),S("a_color","a_color",[0,0,0],Gb),S("alpha","alpha",0,Gb)],outputs:[S("E","E",
[0,0,0],!0),S("A","A",[0,0,0],!0),S("D","D",[0,0,0],!0),S("S","S",[0,0,0],!0),S("normal","normal",[0,0,0],!0),S("bsdf_params","bsdf_params",[0,0,0,0],!0),S("refract_params","refract_params",[0,0,0,0],!0),S("shadow_factor","shadow_factor",0,!0),S("d_color","d_color",[0,0,0],!0),S("s_color","s_color",[0,0,0],!0),S("e_color","e_color",[0,0,0],!0),S("emission","emission",0,!0),S("a_color","a_color",[0,0,0],!0),S("alpha","alpha",0,!0)],Oa:[],data:null,Jb:[],xf:[]},QM:{name:"bsdf_end",type:"BSDF_END",inputs:[S("color",
"color",[0,0,0],!0),S("specular","specular",[0,0,0],!0),S("normal","normal",[0,0,0],!0),S("bsdf_params","bsdf_params",[0,0,0,0],!0),S("refract_params","refract_params",[0,0,0,0],!0),S("d_color","d_color",[0,0,0],!0),S("s_color","s_color",[0,0,0],!0),S("e_color","e_color",[0,0,0],!0),S("emission","emission",0,!0),S("a_color","a_color",[0,0,0],!0),S("alpha","alpha",0,!0)],outputs:[S("color","color",[0,0,0],Gb),S("alpha","alpha",1,Gb)],Oa:[],data:null,Jb:[],xf:[]}},Jb:[],xf:[]};v={name:b.name,pS:od,
YO:{name:"displacement_bump",type:"DISPLACEMENT_BUMP",inputs:[S("Height","Height",0,!0)],outputs:[S("Normal","Normal",[0,0,0],!1)],Oa:[],data:null,Jb:[],xf:[]}};break;case "OUTPUT_WORLD":t=xa(b);n=ra(b);dd=ta(b,"Surface");od={name:"output_world_surface",type:"OUTPUT_WORLD_SURFACE",inputs:[dd],outputs:[],Oa:[],data:null,Jb:[],xf:[]};v={name:b.name,qS:od};break;case "RGB":var yd=b.name,ed={name:"-1",value:yd};u.push(ed);n.push(ka(b,"Color"));break;case "SEPRGB":case "SEPHSV":t=xa(b);n=ra(b);break;case "TEX_ENVIRONMENT":var Sc=
b.image;if(Sc){l="TEXTURE_ENVIRONMENT_"+b.projection;"NONE"==b.color_space?B.push(["NON_COLOR",1]):B.push(["NON_COLOR",0]);t.push(ta(b,"Vector"));B.push(["USE_VECTOR_IN",t[0].lb|0]);n.push(ka(b,"Color"));W=Ga("param_TEXTURE_texture");u.push(ma(W));var gc=ib.Sj(ib.Yh,!1);gc.repeat=!0;gc.source="IMAGE";Pb.bz&&(gc.anisotropic_filtering=16);ib.PD(gc,Sc);v={Rq:b.name,ku:"",name:W,value:gc}}else l="TEXTURE_EMPTY";break;case "TEX_IMAGE":if(Sc=b.image){l="TEXTURE_COLOR";"NONE"==b.color_space?B.push(["NON_COLOR",
1]):B.push(["NON_COLOR",0]);B.push(["CONVERT_UV",0]);for(var Ub=0;4>Ub;++Ub){if(Ub){oa=S("Vector"+Ub,"Vector"+Ub,[0,0,0],!1);var pd=S("Color"+Ub,"Color"+Ub,[0,0,0],!1);var qd=S("Alpha"+Ub,"Alpha"+Ub,0,!1)}else oa=ta(b,"Vector"),pd=ka(b,"Color"),qd=ka(b,"Alpha");t.push(oa);n.push(pd);n.push(qd)}W=Ga("param_TEXTURE_texture");u.push(ma(W));gc=ib.Sj(ib.Yh,!1);gc.repeat="REPEAT"==b.extension;gc.source="IMAGE";ib.PD(gc,Sc);v={Rq:b.name,ku:"",name:W,value:gc}}else l="TEXTURE_EMPTY";break;case "TEXTURE":l=
ja(b);if("TEXTURE_EMPTY"==l)n.push(ka(b,"Color")),n.push(ka(b,"Normal")),n.push(ka(b,"Value"));else if("TEXTURE_ENVIRONMENT_CUBE"==l)t.push(ta(b,"Vector")),n.push(ka(b,"Color")),n.push(ka(b,"Value"));else{if("TEXTURE_NORMAL"==l&&"ENVIRONMENT_MAP"==b.texture.type)return Na.error("Wrong output for ENVIRONMENT_MAP texture: "+b.name),null;if("TEXTURE_COLOR"==l){var xc=!1,qc=b.texture.image;!qc||"Non-Color"!=qc.colorspace_settings_name&&"Non-Colour Data"!=qc.colorspace_settings_name||(xc=!0);B.push(["NON_COLOR",
Number(xc)]);B.push(["CONVERT_UV",1])}for(Ub=0;4>Ub;++Ub){var Mb="TEXTURE_COLOR"==l?"Color":"Normal";Ub?(oa=S("Vector"+Ub,"Vector"+Ub,[0,0,0],!1),pd=S(Mb+Ub,Mb+Ub,[0,0,0],!1),qd=S("Value"+Ub,"Value"+Ub,0,!1)):(oa=ta(b,"Vector"),pd=ka(b,Mb),qd=ka(b,"Value"));t.push(oa);n.push(pd);n.push(qd)}}"TEXTURE_EMPTY"!=l&&(W=Ga("param_TEXTURE_texture"),u.push(ma(W)),gc=b.texture.sa,v={Rq:b.texture.name,ku:b.texture.uuid,name:W,value:gc});break;case "VALTORGB":t=xa(b);n=ra(b);v={value:b};var Tc=b.color_ramp.interpolation;
"CONSTANT"!=Tc&&"LINEAR"!=Tc&&Na.warn("Color Ramp node is not fully supported.");break;case "VALUE":l="VALUE";yd=b.name;ed={name:"-1",value:yd};u.push(ed);n.push(ka(b,"Value"));break;case "VECT_MATH":switch(b.operation){case "ADD":l="VECT_MATH_ADD";break;case "SUBTRACT":l="VECT_MATH_SUBTRACT";break;case "AVERAGE":l="VECT_MATH_AVERAGE";break;case "DOT_PRODUCT":l="VECT_MATH_DOT_PRODUCT";break;case "CROSS_PRODUCT":l="VECT_MATH_CROSS_PRODUCT";break;case "NORMALIZE":l="VECT_MATH_NORMALIZE";break;default:return Na.error("Unsupported VECT_MATH operation: "+
b.operation),null}t=xa(b);n=ra(b);break;case "VECT_TRANSFORM":switch(b.vector_type){case "POINT":B.push(["VECTOR_TYPE",Xa.Ga(0)]);break;case "VECTOR":B.push(["VECTOR_TYPE",Xa.Ga(1)]);break;case "NORMAL":B.push(["VECTOR_TYPE",Xa.Ga(2)]);break;default:return Na.error("Unsupported VECT_TRANSFORM vector_type: "+b.vector_type),null}var Kc=b.convert_from,hc=b.convert_to,uc=0;if("WORLD"==Kc)if("WORLD"==hc)uc=0;else if("OBJECT"==hc)uc=1;else if("CAMERA"==hc)uc=2;else return Na.error("Unsupported VECT_TRANSFORM convert_to: "+
b.convert_to),null;else if("OBJECT"==Kc)if("WORLD"==hc)uc=3;else if("OBJECT"==hc)uc=4;else if("CAMERA"==hc)uc=5;else return Na.error("Unsupported VECT_TRANSFORM convert_to: "+b.convert_to),null;else if("CAMERA"==Kc)if("WORLD"==hc)uc=6;else if("OBJECT"==hc)uc=7;else if("CAMERA"==hc)uc=8;else return Na.error("Unsupported VECT_TRANSFORM convert_to: "+b.convert_to),null;else return Na.error("Unsupported VECT_TRANSFORM convert_from: "+b.convert_from),null;B.push(["CONVERT_TYPE",Xa.Ga(uc)]);t=xa(b);n=ra(b);
break;case "NORMAL_MAP":var Yb=0;switch(b.space){case "TANGENT":Yb=0;break;case "OBJECT":Yb=1;break;case "WORLD":Yb=2;break;case "BLENDER_OBJECT":Yb=3;break;case "BLENDER_WORLD":Yb=4;break;default:return Na.error("Unsupported NORMAL_MAP space: "+b.space),null}B.push(["SPACE",Xa.Ga(Yb)]);t.push(ta(b,"Strength"));t.push(ta(b,"Color"));t.push(S("Normal","Normal",[0,0,0],!1));B.push(["USE_NORMAL_IN",0]);n.push(ka(b,"Normal"));break;case "FRESNEL":rb=ta(b,"Normal");t.push(ta(b,"IOR"));t.push(rb);n.push(ka(b,
"Fac"));B.push(["USE_FRESNEL_NORMAL",rb.lb|0]);break;case "LAYER_WEIGHT":rb=ta(b,"Normal");t.push(ta(b,"Blend"));t.push(rb);n=ra(b);B.push(["USE_NORMAL_IN",rb.lb|0]);break;case "BUMP":rb=ta(b,"Normal");B.push(["INVERT",b.invert?1:0]);B.push(["USE_NORMAL_IN",rb.lb|0]);t=xa(b);n=ra(b);break;case "BACKGROUND":t=xa(b);n=ra(b);break;default:t=xa(b),n=ra(b)}var Ec={name:k,oe:f,type:l,xf:p,inputs:t,outputs:n,Oa:u,data:v,Jb:B},vc=fa.ak(a);fa.$h(a,vc,Ec);var Zb;if(!(Zb="GEOMETRY"!=b.type&&"TEX_COORD"!=b.type&&
"NEW_GEOMETRY"!=b.type)){a:{for(var kd=b.outputs,xb=0,Hb=0;Hb<kd.length;Hb++)if(kd[Hb].is_linked&&xb++>c){var qb=!0;break a}qb=!1}Zb=!qb}return Zb||null!=ia(a,b,++c,d,g,h)?vc:null}function Ma(a,b,c){for(var d=a.inputs,g=a.outputs,h=a.node_tree_name,e=0;e<b.length;e++){var k=d[e],f=b[e];if(!k||k.default_value instanceof Array!=f)return Na.warn('Wrong inputs for custom node group "'+a.name+'" of type: "',h,'".Processing as general node group.'),!1}for(e=0;e<c.length;e++)if(b=g[e],d=c[e],!b||b.default_value instanceof
Array!=d)return Na.warn('Wrong outputs for custom node group "'+a.name+'" of type: "',h,'".Processing as general node group.'),!1;return!0}function Ea(a,b,c,d){var g=a.node_group.node_tree,e={};for(p in g)if("links"==p||"nodes"==p){e[p]=[];for(var f=0;f<g[p].length;f++){e[p][f]={};for(var l in g[p][f])if("links"==p){e[p][f][l]={};for(var m in g[p][f][l])e[p][f][l][m]=X(g[p][f][l][m])}else e[p][f][l]=X(g[p][f][l])}}else e[p]=X(g[p]);f=a.node_tree_name;if("B4W_REPLACE"==f||"B4W_LEVELS_OF_QUALITY"==
f){g=Q("Group input","GROUP_INPUT",[],a.inputs);var p=Q("Group output","GROUP_OUTPUT",a.outputs,[]);f="B4W_REPLACE"==f||"B4W_LEVELS_OF_QUALITY"==f&&(Pb.quality==Qa.P_LOW||Pb.CF)?{from_node:g,from_socket:g.outputs[1],to_node:p,to_socket:p.inputs[0]}:{from_node:g,from_socket:g.outputs[0],to_node:p,to_socket:p.inputs[0]};e.nodes=[g,p];e.links=[f]}g=a.name;p=e.nodes;f=e.links;for(l=0;l<p.length;l++)p[l].name=h(p[l].type,g,p[l].name);for(l=0;l<f.length;l++)f[l].from_node.name=h(f[l].from_node.type,g,f[l].from_node.name),
f[l].to_node.name=h(f[l].to_node.type,g,f[l].to_node.name);return{iS:k(e,a.node_group.uuid,!0,b,c,d).Ya,jS:e.links}}function X(a){var b=typeof a;return"string"!=b&&"number"!=b&&"boolean"!=b&&a?q.N(a):a}function Ga(a){jb[a]||(jb[a]=0);var b=a+"_"+jb[a];b=b.replace(/ /g,"_").replace(/\//g,"_");jb[a]++;return b}function Fa(a){a=a.outputs;for(var b=0;b<a.length;b++)if(a[b].is_linked)return!0;return!1}function wa(a,b){a=a.outputs;for(var c=0,d=0;d<a.length;d++){var g=a[d];if(g.is_linked&&!(c++<b))switch(g.identifier){case "UV":return"GEOMETRY_UV";
case "Vertex Color":return"GEOMETRY_VC";case "Normal":return"GEOMETRY_NO";case "True Normal":return"GEOMETRY_TRN";case "Front/Back":return"GEOMETRY_FB";case "View":return"GEOMETRY_VW";case "Global":case "Position":return"GEOMETRY_GL";case "Local":return"GEOMETRY_LO";case "Orco":return"GEOMETRY_OR";case "Incoming":return"GEOMETRY_IN";case "Backfacing":return"GEOMETRY_BF";default:return null}}}function La(a,b){a=a.outputs;for(var c=0,d=0;d<a.length;d++){var g=a[d];if(g.is_linked&&!(c++<b))switch(g.identifier){case "Camera":return"TEX_COORD_CA";
case "Generated":return"TEX_COORD_GE";case "Normal":return"TEX_COORD_NO";case "Object":return"TEX_COORD_OB";case "Reflection":return"TEX_COORD_RE";case "UV":return"TEX_COORD_UV";case "Window":return"TEX_COORD_WI";default:return null}}}function ja(a){if(!a.texture||!a.texture.sa)return"TEXTURE_EMPTY";for(var b=a.outputs,c=!1,d=!1,g=!1,h=0;h<b.length;h++){var e=b[h];if(e.is_linked)switch(e.identifier){case "Color":c=!0;break;case "Normal":d=!0;break;case "Value":g=!0;break;default:Ua.va("Unknown texture output")}}if(c)return d&&
Na.warn('Node "'+a.name+'" has both Color and Normal outputs. Normal will be omitted.'),"ENVIRONMENT_MAP"==a.texture.type?"TEXTURE_ENVIRONMENT_CUBE":"TEXTURE_COLOR";if(d)return"TEXTURE_NORMAL";if(g)return"ENVIRONMENT_MAP"==a.texture.type?"TEXTURE_ENVIRONMENT_CUBE":"TEXTURE_COLOR"}function ta(a,b){a=a.inputs;for(var c=0;c<a.length;c++){var d=a[c];if(d.identifier==b)return qa(d)}return null}function ka(a,b){a=a.outputs;for(var c=0;c<a.length;c++){var d=a[c];if(d.identifier==b)return qa(d)}return null}
function qa(a){var b=a.name,c=a.identifier,d=a.is_linked;a=a.default_value;a=q._16(a)?a.slice(0):a;return{name:b,identifier:c,lb:d,mb:a}}function S(a,b,c,d){return{name:a,identifier:b,lb:d,mb:c}}function va(a){return S(a.name,a.identifier,a.mb,a.lb)}function xa(a){for(var b=[],c=0;c<a.inputs.length;c++){var d=qa(a.inputs[c]);d.mb.length&&d.mb.splice(3);b.push(d)}return b}function ra(a){for(var b=[],c=0;c<a.outputs.length;c++){var d=qa(a.outputs[c]);b.push(d)}return b}function ma(a,b,c){b=null===b||
void 0===b?null:Xa.Ga(b,c);return{name:a,value:b}}function za(a){return{name:a.name,value:a.value}}function Da(a){return a.slice()}function ua(a,b,c,d,g,h){var e=[],k=h.from_socket.identifier;h=h.to_socket.identifier;var f=d.outputs;for(d=0;d<f.length;d++)if(f[d].identifier==k){e.push(d);break}g=g.inputs;for(d=0;d<g.length;d++)if(g[d].identifier==h){e.push(d);break}2==e.length&&fa.gd(a,b,c,e);return!0}function h(a,b,c){return"GROUP_INPUT"==a?b+"*GI*"+c:"GROUP_OUTPUT"==a?b+"*GO*"+c:b+"%join%"+c}function ya(a){var b=
[];fa.Na(a,function(a,c){"GROUP"==c.type&&b.push(c)});return b}function Ta(a,b,c){for(var d=0;d<c.length;d++){var g=c[d].data.iS,h=c[d].data.jS;if(!g)return!1;fa.Na(g,function(b,c){fa.$h(a,fa.ak(a),c)});for(g=0;g<h.length;g++)b.push(h[g]);V(c[d],b,a)}return!0}function Va(a,b,c,d,g,h){switch(a.type){case "GROUP":a.name==b&&d.push(c);break;case "GROUP_INPUT":a.name.indexOf(b+"*GI*")||g.push(c);break;case "GROUP_OUTPUT":a.name.indexOf(b+"*GO*")||h.push(c)}}function Ca(a,b,c){for(var d=[],g=0;g<c.length;g++){for(var h=
c[g],e=null,k=0;k<b.length;k++)if(h.from_socket.identifier==b[k].to_socket.identifier){e=b[k];break}e?(h.from_node=e.from_node,h.from_socket=e.from_socket):d.push(h)}for(g=0;g<b.length;g++)a.splice(a.indexOf(b[g]),1);return d}function Wa(a,b){if(b.length)for(var c=b[0].from_node.name,d=0;d<a.length;d++)a[d].from_node.name==c&&b.push(a[d])}function Ra(a,b,c,d){for(var g=0;g<d.length;g++){for(var h=d[g],e,k=0;k<c.inputs.length;k++)if(h.from_socket.identifier==c.inputs[k].identifier){e=c.inputs[k].mb;
break}k=h;for(var f=b,l=e,m=I(k.to_node,f),p=0;p<m.length;p++)for(var t=fa.Kb(f,m[p]),n=0;n<t.inputs.length;n++){var u=t.inputs[n];if(u.identifier==k.to_socket.identifier){t=u.mb instanceof Object?0:1;if((l instanceof Object?0:1)==t)u.mb=l;else switch(t){case 0:u=u.mb;u[0]=u[1]=u[2]=l;break;case 1:u.mb=(l[0]+l[1]+l[2])/3}break}}h=a.indexOf(h);-1!=h&&a.splice(h,1)}}function V(a,b,c){for(var d=a.name,g=[],h=[],e=[],k=[],f=0;f<b.length;f++){var l=b[f];Va(l.from_node,d,l,g,e,k);Va(l.to_node,d,l,h,e,k)}h=
Ca(b,h,e);g=Ca(b,k,g);Wa(b,h);Ra(b,c,a,h);if(g.length){var m;fa.Na(c,function(a,b){"GROUP_OUTPUT"!=b.type||b.name.indexOf(d+"*GO*")||(m=b)});Ra(b,c,m,g)}}function ab(a){var b=[],c=[];fa.Na(a,function(a,d){switch(d.type){case "VALTORGB":b.push(d);break;case "CURVE_VEC":case "CURVE_RGB":c.push(d)}});var d=0,g=a=null,h=b.length+c.length;if(b.length){a=ib.lP(b,ib.NJ);for(var e=0;e<b.length;e++)b[e].Jb.push(["NODE_TEX_ROW",Xa.Ga((d+.5)/h)]),d++}if(c.length)for(g=ib.pP(c,ib.ZC),e=0;e<c.length;e++)c[e].Jb.push(["NODE_TEX_ROW",
Xa.Ga((d+.5)/h)]),d++;e=null;a&&g?(e=new Uint8Array(a.length+g.length),e.set(a),e.set(g,a.length)):a?e=a:e=g;a=e?ib.VE(e,ib.ZC):null;for(e=0;e<b.length;e++)b[e].data.yb=a;for(e=0;e<c.length;e++)c[e].data.yb=a}function bb(a,b,c,d){a=a.curve_mapping.curves_data[b];return 2==a.length&&a[0][0]<c+.01&&a[0][1]<c+.01&&a[1][0]>d-.01&&a[1][1]>d-.01?!1:!0}var Ua=Object(M.a)(a),Qa=Object(U.a)(a),Ba=Object(n.a)(a),fa=Object(z.a)(a),Na=Object(C.a)(a),Xa=Object(v.a)(a),ib=Object(y.a)(a),jb={},fb={},rb={},cb={},
Wb=0,Pb=Qa.wa;f.rW=0;f.DD=1;f.CD=2;f.BD=3;f.qW=4;f.AD=5;f.zD=6;f.yD=7;f.pW=8;f.FK=0;f.EK=1;f.jW=2;f.DK=3;f.iW=4;f.vv=function(a){return fb[a]};f.oN=function(a){delete fb[a]};f.OE=function(a,b,c,d,g){return k(a,b,!1,c,d,g)};f.yz=function(a,b,c){if(a in rb)return rb[a];var d=fa.create(),g={name:"LIGHTING_BEGIN",type:"LIGHTING_BEGIN"},h=ia(d,g,0,null,null,c);g={name:"LIGHTING_END",type:"LIGHTING_END"};g=ia(d,g,0,null,null,c);l(d,b,h,g,[[h,[8,10]],[h,[9,6]]],c);J(d);return rb[a]=d};f.LP=function(a,b,
c,d){a+=c;switch(b){case "GLOW":a+="11";case "COLOR_ID":case "SHADOW":a+="00";default:a+="10"}d&&d.OC&&(a+=d.OC);d&&d.NC&&(a+=d.NC);return a};f.fr=function(a){var b=[],c={};jb={};var d=fa.uC(a);fa.Na(d,function(a,d){for(var g=[],h=[],e=[],k=[],f=[],l=[],m=0;m<d.inputs.length;m++){var p=d.inputs[m];if(p.lb)g.push(null),h.push(null);else{g.push(Ga("in_"+d.type+"_"+p.identifier.replace(/\./g,"")));var t=Xa.Ga(p.mb,0);Pb.YB&&(0<=d.type.indexOf("MIX_RGB_")&&("Color1"==p.identifier||"Color2"==p.identifier||
"Fac"==p.identifier)||0<=d.type.indexOf("MATH_")&&("Value"==p.identifier||"Value_001"==p.identifier||"Value.001"==p.identifier)||0<=d.type.indexOf("VECT_MATH_")&&("Vector_001"==p.identifier||"Vector.001"==p.identifier)||0<=d.type.indexOf("LIGHTING_APPLY")||0<=d.type.indexOf("MATERIAL_END")||0<=d.type.indexOf("MATERIAL_BEGIN"))&&(p=t,p=p.replace(/(,)/g,"$1 "),p=p.replace(/(^|[^0-9]|\s)(0\.0)($|[^0-9]|\s)/g,"$1_0_0$3"),p=p.replace(/(^|[^0-9]|\s)(1\.0)($|[^0-9]|\s)/g,"$1_1_0$3"),t=p=p.replace(/\s+/g,
""));h.push(t)}}for(m=0;m<d.outputs.length;m++)p=d.outputs[m],p.lb?e.push(null):e.push(Ga("out_"+d.type+"_"+p.identifier.replace(/\./g,"")));for(m=0;m<d.Oa.length;m++)p=d.Oa[m],k.push(p.name),f.push(p.value);for(m=0;m<d.xf.length;m++)l.push(d.xf[m].name);d={id:d.type,inputs:g,CA:h,outputs:e,Oa:k,rp:f,xf:l,Jb:JSON.parse(JSON.stringify(d.Jb))};b.push(d);c[a]=d});fa.Uh(d,function(a,b,g){var h=fa.Kb(d,a),e=h.outputs[g[0]];a=c[a].outputs;b=c[b].inputs;h=a[g[0]]||Ga("out_"+h.type+"_"+e.identifier.replace(/\./g,
""));a[g[0]]=h;b[g[1]]=h});return b};f.tE=function(a){if(a.ne)for(var b=0;b<a.ne.nodes.length;b++){var c=a.ne.nodes[b];if("GROUP"==c.type&&"B4W_GLOW_OUTPUT"==c.node_tree_name)return!0}return!1};f.uY=function(a,b,c){Na.log("\n====== USER: "+b+", MATERIAL: "+c+" ======\n"+Ba.kS(a)+"\n=============================================================")};f.cleanup=function(){for(var a in fb)delete fb[a];for(a in rb)delete rb[a];for(var b in cb)delete cb[b];Wb=0};f.vQ=function(a){var b=-1;fa.Na(a,function(a,
c){if("TEXTURE_ENVIRONMENT_EQUIRECTANGULAR"==c.type||"TEXTURE_ENVIRONMENT_MIRROR_BALL"==c.type)b=Math.max(b,c.data.value.height)});return b}});w.a=f},function(D,w,f){D=f(0);var M=f(1),U=f(2);f=Object(D.a)("__debug_telemetry",function(f,z){var e=Object(M.a)(f),m=[],n={},v=["color: #3366FF","color: #CC33FF","color: #FF3366","color: #33FF66","color: #FFCC33"];z.fbmsg=function(){for(var e=[performance.now()],f=0;f<arguments.length;f++){var n=arguments[f];if(U._16(n))for(var a=0;a<n.length;a++)e.push(n[a]);
else e.push(arguments[f])}m.push(e)};z.msg=function(){for(var e=1,f=0;f<m.length;f++){var n=m[f];n[1]==arguments[0]&&e++}n=[e];for(f=0;f<arguments.length;f++)if(e=arguments[f],U._16(e))for(var a=0;a<e.length;a++)n.push(e[a]);else n.push(arguments[f]);m.push(n)};z.print_telemetry=function(f){f||(f=1);for(var n=0,q={},a=Math.max(0,performance.now()-1E3*f),z=0;z<m.length;z++){var k=m[z];f=k[0];if(!(f<a)){var c=String(k[1]);q[c]||(q[c]=v[n++%v.length]);f=["%c"+(f/1E3).toFixed(6),q[c],c];for(c=2;c<k.length;c++)f.push(k[c]);
e.log.apply(this,f)}}m.splice(0)};z.plot_telemetry=function(f){f||(f=1);for(var n={},q=Math.max(0,performance.now()-1E3*f),a=0;a<m.length;a++){var v=m[a];f=v[0];if(!(f<q))for(var k=2;k<v.length;k++){var c=String(v[1]);3<v.length&&(c+="_"+String(k-2));n[c]||(n[c]=c+"\n");n[c]+=String(f)+" "+v[k]+"\n"}}f="";for(c in n)f+=n[c]+"\n\n";e.log(f);m.splice(0)};z.qX=function(e){n[e]=e in n?n[e]+1:1};z.update=function(){for(var f in n)e.log(f,n[f]),n[f]=0}});w.a=f},function(D,w,f){D=f(0);var M=f(5),U=f(4),
n=f(20),z=f(36),e=f(2);f=Object(D.a)("__primitives",function(f,C){function m(a,b,c,e){for(var g=[],f=[],l=[],m=a*b,n=2*c/(a-1),r=2*e/(b-1),q=0;q<a;q++)for(var v=-c+q*n,y=0;y<b;y++)if(f.push(v,-e+y*r,0),l.push(q/(a-1),y/(b-1)),q&&y){var C=q*b+y,w=C-1,E=(q-1)*b+y,B=E-1;g.push(C,w,E);g.push(w,B,E)}a=k.Si();a.a_position=new Float32Array(f);a.a_tbn=z.c(m);m=k.Hh("GRID_PLANE");m.Va[0]=a;m.hb.a_texcoord=new Float32Array(l);m.ab=new Uint32Array(g);m.Gb=f.length/3;return m}function q(c){var b=c.length;b%4&&
a.va("Wrong array");for(var g=[],e=[],f=0;f<b;f+=4){var l=c[f+1],m=c[f+2],n=c[f+3];y(c[f],e);y(l,e);y(m,e);y(n,e);g.push(f,f+1,f+2);g.push(f,f+2,f+3)}c=k.Si();c.a_position=new Float32Array(e);c.a_tbn=z.c(b/4);b=k.Hh("FROM_QUADS");b.Va[0]=c;b.ab=new Uint32Array(g);b.Gb=e.length/3;return b}function r(a,b){b*=3;return[a[b],a[b+1],a[b+2]]}function y(a,b){b.push(a[0],a[1],a[2])}var a=Object(M.a)(f),w=Object(U.a)(f),k=Object(n.a)(f),c=w.wa;C.MP=function(){var a=k.Hh("LINE"),b=k.Si();b.a_position=new Float32Array(3);
b.a_direction=new Float32Array(3);a.Va[0]=b;a.ab=new Uint32Array(1);a.Gb=1;return a};C.nv=function(){var a=m(2,2,1,1);a.name="PLANE";return a};C.vX=m;C.HP=function(a,b,g){function e(a,b){return 1==a%2&&(0==b||b==n-1)||1==b%2&&(0==a||a==m-1)?!0:!1}var f=g/=Math.pow(2,a-1),l=g,m=b+1,n=b+1;b=[];g=[];for(var r=0,q=0,v=0,y=-1,C=[],w=0;w<a;w++){for(var J=2*f/(m-1),T=2*l/(n-1),B=[],D=[],I=0,P=0;P<m;P++){for(var p=-f+P*J,da=[],H=0;H<n;H++){var t=-l+H*T;if(p>-q&&p<q&&t>-v&&t<v)da.push(-1),I++;else{for(var d=
null,la=0;la<C.length;la+=3)if(p==C[la]&&t==C[la+1]){d=C[la+2];break}la=null!==d?d:y+1;e(P,H)?(da.push(-2),I++):(null==d&&(0==H||H==n-1||0==P||P==m-1?(d=w==a-1?J:2*J,B.push(p,t,la)):d=J,g.push(p,t,d),r++,y++),da.push(la));if(P&&H)if(1==P)if(e(P-1,H)){if(1<H){t=la-1;d=D[P-1][H+1];var na=d-1;b.push(na,t,la)}else d=D[P-1][H+1],na=d-1;b.push(d,na,la)}else e(P,H)||(t=la-1,d=D[P-1][H],b.push(d,t,la));else if(P==m-1){if(!e(P,H))if(H==n-1)t=la-1,d=D[P-1][H-1],na=D[P-2][H],b.push(d,t,la),b.push(na,d,la);else{t=
la-1;d=D[P-1][H];na=d-1;var M=d+1;b.push(na,t,la);b.push(d,na,la);b.push(M,d,la);2==H&&(M=D[P-2][H-2],b.push(na,M,t))}}else 1==H?e(P,H-1)?(t=D[P-1][H],d=D[P-1][H-1],b.push(t,d,la)):(t=da[H-1],d=D[P-1][H],na=D[P-2][H-1],b.push(d,t,la),b.push(d,na,t)):H==n-1?e(P,H)||(t=da[H-1],d=D[P-1][H-1],na=D[P-2][H],b.push(d,t,la),b.push(na,d,la)):-1!=D[P-1][H]&&-1!=D[P-1][H-1]&&-1!=da[H-1]?(t=da[H-1],d=D[P-1][H],na=D[P-1][H-1],b.push(d,t,la),b.push(d,na,t),H==n-2&&e(P,H+1)&&(M=D[P-1][H+1],b.push(M,d,la))):H==n-
2&&e(P,H+1)&&(d=D[P-1][H],M=D[P-1][H+1],b.push(M,d,la))}}D.push(da)}C=B;q=f;v=l;f*=2;l*=2}2E4>q&&(a=-(2*q)/(m-1),g.push(-2E4,-2E4,a),g.push(-2E4,2E4,a),g.push(-q,-v,a),g.push(-q,v,a),g.push(2E4,-2E4,a),g.push(2E4,2E4,a),g.push(q,-v,a),g.push(q,v,a),la=y+1,b.push(la+1,la+2,la+3,la+1,la,la+2,la+2,la+4,la+6,la+2,la,la+4,la+1,la+7,la+5,la+1,la+3,la+7,la+7,la+4,la+5,la+6,la+4,la+7),r+=8);a=k.Si();a.a_position=new Float32Array(g);a.a_tbn=z.c(r);z.j(a.a_tbn,[.707,0,0,.707],a.a_tbn);f=k.Hh("MULTIGRID_PLANE");
f.Va[0]=a;f.ab=new Uint32Array(b);f.Gb=g.length/3;c.GJ&&(k.Mx(f,1,!0),a.a_polyindex=k.av(f));return f};C.uX=function(c){var b=c.length;b%3&&a.va("Wrong array");for(var g=[],e=[],f=0;f<b;f+=3){var l=c[f+1],m=c[f+2];y(c[f],e);y(l,e);y(m,e);g.push(f,f+1,f+2)}c=k.Si();c.a_position=new Float32Array(e);b=k.Hh("FROM_TRIANGLES");b.Va[0]=c;b.ab=new Uint32Array(g);b.Gb=e.length/3;return b};C.tX=q;C.JP=function(a){a=e._69(a,[]);var b=[];b.push(a[0],a[1],a[2],a[3]);b.push(a[0],a[3],a[5],a[4]);b.push(a[3],a[2],
a[6],a[5]);b.push(a[1],a[7],a[6],a[2]);b.push(a[0],a[4],a[7],a[1]);b.push(a[4],a[5],a[6],a[7]);a=q(b);a.name="FRUSTUM";return a};C.Sd=function(){var a=k.Hh("FULLSCREEN_TRI"),b=k.Si();b.a_position=new Float32Array([0,0,1,0,0,1]);a.Va[0]=b;a.ab=new Uint32Array([0,1,2]);a.Gb=3;return a};C.KP=function(){var a=k.Hh("FULLSCREEN_QUAD"),b=k.Si();b.a_position=new Float32Array([-1,1,1,1,-1,-1,1,-1]);a.Va[0]=b;a.ab=new Uint32Array([0,2,1,1,2,3]);a.Gb=4;return a};C.GP=function(){var a=k.Hh("BILLBOARD"),b=k.Si();
b.a_bb_vertex=k.GF(1);a.Va[0]=b;a.ab=new Uint32Array([0,2,1,0,3,2]);a.Gb=4;return a};C.Yz=function(a,b){var c=k.Hh("UV_SPHERE"),e,f,l=[],m=[],n=[];for(f=0;8>=f;f++)for(e=0;16>=e;e++){var q=e/16,v=f/8;m.push(-a*Math.cos(2*q*Math.PI)*Math.sin(v*Math.PI)+b[0],a*Math.cos(v*Math.PI)+b[1],a*Math.sin(2*q*Math.PI)*Math.sin(v*Math.PI)+b[2])}for(f=q=0;8>f;f++)for(e=0;16>e;e++){v=r(m,17*f+e+1);var A=r(m,17*f+e),C=r(m,17*(f+1)+e),w=r(m,17*(f+1)+e+1);Math.abs(v[1])==a+b[1]?(y(v,l),y(C,l),y(w,l),n.push(q,q+1,q+
2),q+=3):Math.abs(C[1])==a+b[1]?(y(v,l),y(A,l),y(C,l),n.push(q,q+1,q+2),q+=3):(y(v,l),y(A,l),y(C,l),y(w,l),n.push(q,q+1,q+2),n.push(q,q+2,q+3),q+=4)}a={};a.a_position=l;m=k.kE(n,m,l);m=k.jE(n,l,m);a.a_tbn=z.d(m);c.Va[0]=a;c.ab=n;c.Gb=l.length/3;return c};C.JF=function(a){var b=k.Hh("INDEX"),c=k.Si();c.a_index=new Float32Array(3*a);for(var e=new Uint16Array(3*a),f=0;f<3*a;f++)c.a_index[f]=f,e[f]=f;b.Va[0]=c;b.ab=e;b.Gb=3*a;return b}});w.a=f},function(D,w,f){D=f(0);var M=f(29),U=f(1),n=f(2),z=f(4);
f=Object(D.a)("__loader",function(e,f){function m(a,b,c,g){var e=R,k=D.create();for(m in b){var l=v(b[m]);if(g&&l.Ac||!a&&l.Nc)l.Vs=!0;D.Fa(k,l)}for(m in b)for(l=b[m],l.name=m,a=0;a<l.inputs.length;a++)D.ra(k,b[l.inputs[a]],l,null);b=v({name:"out",qc:f.PJ,Dc:function(a,b,c,g,f){b.pc&&(e.hC=!0);E(b)||(b.status=2);b.QG(b.id,!0);f(b,c);u.log("%cTHREAD "+b.id+": LOADED CALLBACK","color: #f0f;")},Bc:5});if(c)c=D.Or(k);else{var m=D.clone(k);do{c=D.Or(m);l=[];for(a=0;a<c.length;a++){g=c[a];var n=D.Kb(m,
g);n.vc&&l.push(g)}for(a=0;a<l.length;a++)D.rf(m,l[a]);l.length&&D.$q(m)}while(l.length)}D.Fa(k,b);for(a=0;a<c.length;a++)g=c[a],n=D.Kb(k,g),b.inputs.push(n.name),D.ra(k,n,b,null);return k}function v(a){a.vc=a.vc||!1;a.qc||0===a.qc||(a.qc=a.Ie);a.inputs=a.inputs||[];a.dn=a.dn||!1;a.Vs=a.Vs||!1;a.Bc=a.Bc||0;a.Ac=a.Ac||!1;a.Nc=a.Nc||!1;a.status=0;a.kY=0;a.PG=0;a.Yq=a.Yq||null;return a}function q(a,b,c){b.ME(c,b);b.status=3;a.Xy--;F.debug_loading&&u.log("%cTHREAD "+b.id+": 100% LOADING END "+Math.round(performance.now()-
b.gt)+"ms","color: #f0f;");b.fC=null;b.ME=null;F.debug_loading||(b.Rh=null);b.Ek=null}function r(a,b){for(var c=[],g=[],e=0;e<b.length;e++){var f=b[e];D.Kb(a.Rh,f).dn&&(D.cm(a.Rh,f,function(g){var e=!0;D.Lk(a.Rh,g,function(a,b){if(!b.dn)return e=!1,1});e&&-1==c.indexOf(g)&&-1==b.indexOf(g)&&c.push(g)}),g.push(e))}for(e=g.length-1;0<=e;e--)b.splice(g[e],1);return c}function y(a){function b(b,c){b=D.Kb(a.Rh,b);c=D.Kb(a.Rh,c);var g=c.qc-b.qc;0==g&&(g=b.vc-c.vc);return g}var c=[],g=a.Ek,e=!1;do{var f=
r(a,g);c.push.apply(c,g);0<f.length&&(e=!0);g=f}while(0<f.length);e&&c.sort(b);a.Ek=c;return a.Ek.length}function a(a,b,g){if(b.Vs)return b.dn=!0,F.debug_loading&&u.log("%cTHREAD "+a.id+": SKIP STAGE "+b.name,"color: #f0f;"),k(a,b),!1;if(F.debug_loading&&0==b.status){var e=w(a);u.log("%cTHREAD "+a.id+": "+e+"% "+("LOADING START "+b.name)+" "+Math.round(performance.now()-a.gt)+"ms ","color: #f0f;")}if(!b.Dc&&!b.al&&!b.Xq)return k(a,b),!1;if(0==b.status&&(b.status++,b.Dc))return b.Dc(g,a,b,b.Yq,k,c),
!0;if(1==b.status){if(b.al)return b.al(g,a,b,b.Yq,k,c),!0;b.status++}return 2==b.status&&(b.status++,b.Xq)?(b.Xq(g,a,b,b.Yq,k,c),!0):!1}function w(a){if(0==a.Hx)return 100;var b=0;D.Na(a.Rh,function(c,g){a.do_not_load_resources&&g.Ac||(b+=g.PG*g.Bc)});return n._64(100*b/a.Hx)}function k(a,b){b.dn=!0;b.status=3;l(a,b,1);if(F.debug_loading){var c=w(a);u.log("%cTHREAD "+a.id+": "+c+"% "+("LOADING END "+b.name)+" "+Math.round(performance.now()-a.gt)+"ms ","color: #f0f;")}}function c(a,b,c){1>c?l(a,b,
c):b.status++}function l(a,b,c){var g=R;if(b.Dc||b.al||b.Xq)if(b.PG=c,b=w(a),a.gF!=b||1==c)a.fC(b,performance.now()-a.gt,a.id),a.gF=b,g.RA=!0}function b(a,b){var c=null;D.Na(a.Rh,function(a,g){if(g.name==b)return c=g,1});return c}function g(){return 0==R.Xy}function E(a){return a&&(3==a.status||4==a.status)}var D=Object(M.a)(e),u=Object(U.a)(e),F=Object(z.a)(e).wa;f.Ie=0;f.kh=1;f.PJ=2;var R=null;f.gA=function(){return R};f.XE=function(){var a={wg:[],Hz:0,Xy:0,hC:!1,RA:!1};return R=a};f.bF=function(a,
b,c,g,e,f,k,l,n){var u=R,r=u.wg.length,q={id:r,pc:0==r,status:0,Zi:b,bE:"",QG:c||function(){},OG:l||!1,WY:f,gt:0,gF:0,Hx:0,KB:!1,fC:g||function(){},ME:e||function(){},Rh:null,Ek:null,vA:!1,sA:!1,AA:!1,Ug:n};a=m(q.pc,a,f,k);q.Rh=a;b=[];c=D.xQ(a);for(g=0;g<c.length;g++)b.push(c[g]);q.Ek=b;D.Na(a,function(a,b){!(b.Dc||b.al||b.Xq)||q.do_not_load_resources&&b.Ac||(q.Hx+=b.Bc)});u.wg.push(q);u.Xy++;return q.id};f.lV=function(b){var c=R;if(c&&!g())if(c.RA)c.RA=!1;else{var e=performance.now();do{var k=c.wg[c.Hz],
l=b[k.id];if(!E(k))if(0==k.status&&(k.status=1,k.gt=performance.now(),k.fC(0,0,k.id),F.debug_loading&&u.log("%cTHREAD "+k.id+": 0% LOADING START 0ms","color: #f0f;")),y(k)){var m=k,n=m.Ek.length;do{var r=D.Kb(m.Rh,m.Ek[0]),v=a(m,r,l);r.qc==f.kh&&(m.KB=!0);r=m.Ek.shift();m.Ek.push(r);n--}while(!v&&0!=n)}else q(c,k,l);c.hC&&(c.Hz=(c.Hz+1)%c.wg.length);if(k.KB){k.KB=!1;break}}while(16>performance.now()-e)}};f.JD=function(a){var b=R;q(b,a,null);a.status=4;a.pc&&(b.hC=!0);a.QG(a.id,!1)};f.NY=c;f.qx=function(a,
c){a=b(a,c);null!==a&&(a.Vs=!0)};f.dn=g;f.EU=E;f.is_primary_loaded=function(a){var b=R;if(!b)return!1;a|=0;return b.wg[a]&&(3==b.wg[a].status||2==b.wg[a].status)};f.IQ=function(a){if(F.debug_loading){var b=R;return b&&b.wg[a]&&b.wg[a].Rh?D.iF(b.wg[a].Rh,function(a,b){if(b.Vs)return"SKIPPED\n("+b.name+")";a=b.name+"\n";var c=[];c.push(b.qc==f.kh?"ASYNC":"SYNC");b.vc&&c.push("BKG");b.Ac&&c.push("RES");return a+c.join(" | ")},null):null}u.error("Debug mode isn't enabled. Can not retrieve the graph.")};
f.cleanup=function(){R=null}});w.a=f},function(D,w,f){D=f(0);D=Object(D.a)("__context",function(f,w){var n=null;w.TT=function(f){n=f};w.sv=function(){return n};w.reset=function(){n=null}});w.a=D},function(D,w,f){D=f(0);var M=f(14),U=f(59),n=f(9),z=f(19),e=f(1),m=f(13),C=f(2),v=f(3);f=Object(D.a)("constraints",function(f,r){var q=Object(M.a)(f),a=Object(U.a)(f),w=Object(n.a)(f),k=Object(z.a)(f),c=Object(e.a)(f),l=Object(m.a)(f);r.append_stiff=function(b,g,e,f,m){w.is_dynamic(b)?a.di(b,g)?a.ci(b,g)?
(e=e||new Float32Array(3),m=m||1,f=f?f:[0,0,0,1],g instanceof Array&&2==g.length?a.oM(b,g[0],g[1],e,f,m):a.QD(b,g,e,f,m),l.Ea(b),k.sync_transform(b)):c.error("Constraint recursion is forbidden."):c.error("Can not apply constraint. Object and target must be different."):c.error('Wrong object: "'+b.name+'" is not dynamic.')};r.append_semi_stiff=function(b,g,e,f,m,n,r,q){w.is_dynamic(b)?a.di(b,g)?a.ci(b,g)?(m=C._17(m)?m:Math.PI/2,n=C._17(n)?n:-Math.PI/2,r=C._17(r)?r:Math.PI/2,q=C._17(q)?q:-Math.PI/2,
e=e||new Float32Array(3),f=f?new Float32Array(f):null,a.mM(b,g,e,f,m,n,r,q),l.Ea(b),k.sync_transform(b)):c.error("Constraint recursion is forbidden."):c.error("Can not apply constraint. Object and target must be different."):c.error('Wrong object: "'+b.name+'" is not dynamic.')};r.append_semi_stiff_cam=function(a,g,e,f,k,l,m,n){c.ef("append_semi_stiff_cam","append_semi_stiff");q.is_eye_camera(a)?r.append_semi_stiff(a,g,e,f,k,l,m,n):c.error("append_semi_stiff_cam(): wrong object type, only EYE camera objects can be parented.")};
r.append_semi_soft_cam=function(a,g,e,f){c.ef("append_semi_soft_cam","append_semi_soft");q.is_eye_camera(a)?r.append_semi_soft(a,g,e,f):c.error("append_semi_soft_cam(): wrong object type, only EYE camera objects can be parented.")};r.append_semi_soft=function(b,g,e,f){if(w.is_dynamic(b))if(a.di(b,g))if(a.ci(b,g)){if(!C._17(f)||0>f)f=.25;e=e||new Float32Array(3);a.lM(b,g,e,f);l.Ea(b);k.sync_transform(b)}else c.error("Constraint recursion is forbidden.");else c.error("Can not apply constraint. Object and target must be different.");
else c.error('Wrong object: "'+b.name+'" is not dynamic.')};r.append_stiff_trans=function(b,g,e){w.is_dynamic(b)?a.di(b,g)?a.ci(b,g)?(e=e||new Float32Array(3),a.pM(b,g,e),l.Ea(b),k.sync_transform(b)):c.error("Constraint recursion is forbidden."):c.error("Can not apply constraint. Object and target must be different."):c.error('Wrong object: "'+b.name+'" is not dynamic.')};r.append_copy_loc=function(b,g,e,f,m){if(w.is_dynamic(b))if(a.di(b,g))if(a.ci(b,g)){f=f||!1;e=e||"XYZ";m=m||1;var n=l.get_translation(b,
new Float32Array(3)),u=new Float32Array(3);u[0]=-1!=e.indexOf("-X")?-1:-1!=e.indexOf("X")?1:0;u[1]=-1!=e.indexOf("-Y")?-1:-1!=e.indexOf("Y")?1:0;u[2]=-1!=e.indexOf("-Z")?-1:-1!=e.indexOf("Z")?1:0;a.dM(b,g,n,u,f,m);l.Ea(b);k.sync_transform(b)}else c.error("Constraint recursion is forbidden.");else c.error("Can not apply constraint. Object and target must be different.");else c.error('Wrong object: "'+b.name+'" is not dynamic.')};r.append_copy_trans=function(b,g,e){w.is_dynamic(b)?a.di(b,g)?a.ci(b,
g)?(a.fM(b,g,e||1),l.Ea(b),k.sync_transform(b)):c.error("Constraint recursion is forbidden."):c.error("Can not apply constraint. Object and target must be different."):c.error('Wrong object: "'+b.name+'" is not dynamic.')};r.append_copy_rot=function(b,g,e,f,m){if(w.is_dynamic(b))if(a.di(b,g))if(a.ci(b,g)){e=e||"XYZ";var n=new Float32Array(3);n[0]=-1!=e.indexOf("-X")?-1:-1!=e.indexOf("X")?1:0;n[1]=-1!=e.indexOf("-Y")?-1:-1!=e.indexOf("Y")?1:0;n[2]=-1!=e.indexOf("-Z")?-1:-1!=e.indexOf("Z")?1:0;a.eM(b,
g,n,f||!1,m||1);l.Ea(b);k.sync_transform(b)}else c.error("Constraint recursion is forbidden.");else c.error("Can not apply constraint. Object and target must be different.");else c.error('Wrong object: "'+b.name+'" is not dynamic.')};r.append_stiff_trans_rot=function(b,g,e,f){w.is_dynamic(b)?a.di(b,g)?a.ci(b,g)?(e=e||new Float32Array(3),f=f?new Float32Array(f):[0,0,0,1],a.qM(b,g,e,f),l.Ea(b),k.sync_transform(b)):c.error("Constraint recursion is forbidden."):c.error("Can not apply constraint. Object and target must be different."):
c.error('Wrong object: "'+b.name+'" is not dynamic.')};r.append_track=function(b,g,e,f,m,n){if(w.is_dynamic(b))if(a.di(b,g))if(a.ci(b,g)){var u=C.e;"-Y"==e?u=C.b:"Y"==e?u=C.e:"-X"==e?u=C.a:"X"==e?u=C.d:"-Z"==e?u=C.c:"Z"==e&&(u=C.f);e=C.f;"X"==f?e=C.d:"Y"==f&&(e=C.e);1==Math.abs(v.dot(u,e))?c.error("Can not use parallel vectors for track and up axes."):(a.rM(b,g,u,e,m||!1,n||1),l.Ea(b),k.sync_transform(b))}else c.error("Constraint recursion is forbidden.");else c.error("Can not apply constraint. Object and target must be different.");
else c.error('Wrong object: "'+b.name+'" is not dynamic.')};r.append_follow=function(b,g,e,f){w.is_dynamic(b)?a.di(b,g)?a.ci(b,g)?(a.iM(b,g,e,f),l.Ea(b),k.sync_transform(b)):c.error("Constraint recursion is forbidden."):c.error("Can not apply constraint. Object and target must be different."):c.error('Wrong object: "'+b.name+'" is not dynamic.')};r.append_stiff_viewport=function(b,g,e){w.is_dynamic(b)?a.di(b,g)?a.ci(b,g)?(e=e||{},a.append_stiff_viewport(b,g,e),l.Ea(b),k.sync_transform(b)):c.error("Constraint recursion is forbidden."):
c.error("Can not apply constraint. Object and target must be different."):c.error('Wrong object: "'+b.name+'" is not dynamic.')};r.remove=function(b,c){c=c||!1;b.Yc&&a.remove(b,c);c&&l.Ea(b)}});w.a=f},function(D,w,f){D=f(0);var M=f(18);f=Object(D.a)("time",function(f,n){f=Object(M.a)(f);n.set_timeout=f.set_timeout;n.clear_timeout=f.clear_timeout;n.get_timeline=f.get_timeline;n.animate=f.animate;n.clear_animation=f.clear_animation});w.a=f},function(D,w,f){D=f(0);var M=f(1);f=Object(D.a)("storage",
function(f,n){function z(e){return C[e?e:m]?JSON.parse(C[e?e:m]):{}}var e=Object(M.a)(f),m="b4w",C=null;n.init=function(f){f?"b4w"!==f?m=f:e.error("b4w prefix denied"):e.warn("Prefix should be a string. Last declared storage prefix will be used.")};n.set=function(e,f,n){var r=z(n);r[e]=String(f);C[n?n:m]=JSON.stringify(r)};n.cleanup=function(e){delete C[e?e:m]};n.get=function(e,f){f=z(f);return f[e]?f[e]:""};n.debug=function(f){e.log(z(f?f:m))};try{C=window.localStorage;try{C.tmp=null,delete C.tmp}catch(v){e.warn("localStorage quota is limited. Disabling localStorage"),
C=null}}catch(v){e.warn("Applying chrome localStorage bug workaround"),C=null}C||(e.warn("localStorage is not available, initializing temporary storage"),C={})});w.a=f},function(D,w,f){D=f(0);var M=f(5),U=f(1);f(2);f=Object(D.a)("__texcomp",function(f,z){function e(e,c,f,b){var g=new Int32Array(f,0,31);if(542327876!=g[0])return r.error("Invalid magic number in DDS header"),0;if(!g[20]&4)return r.error("Unsupported format, must contain a FourCC code"),0;var k=g[21];switch(k){case y:var l=8;var m=c?
c.COMPRESSED_RGB_S3TC_DXT1_EXT:null;break;case a:l=16;m=c?c.COMPRESSED_RGBA_S3TC_DXT3_EXT:null;break;case w:l=16;m=c?c.COMPRESSED_RGBA_S3TC_DXT5_EXT:null;break;default:return r.error("Unsupported FourCC code:",v(k)),null}var n=1;g[2]&131072&&!1!==b&&(n=Math.max(1,g[7]));var q=g[4];var z=g[3];g=g[1]+4;if(c)for(k=0;k<n;++k)b=Math.max(4,q)/4*Math.max(4,z)/4*l,c=new Uint8Array(f,g,b),e.compressedTexImage2D(e.TEXTURE_2D,k,m,q,z,0,c),g+=b,q=Math.max(.5*q,1),z=Math.max(.5*z,1);else if(k==y){f=c=new Uint16Array(f);
l=g/2;m=q;g=new Uint16Array(4);c=new Uint16Array(m*z);for(var C,A,D,T,M,J,W=m/4,B=z/4,ba=0;ba<B;ba++)for(var I=0;I<W;I++)k=l+4*(ba*W+I),g[0]=f[k],g[1]=f[k+1],C=g[0]&31,A=g[0]&2016,D=g[0]&63488,T=g[1]&31,M=g[1]&2016,J=g[1]&63488,g[2]=5*C+3*T>>3|5*A+3*M>>3&2016|5*D+3*J>>3&63488,g[3]=5*T+3*C>>3|5*M+3*A>>3&2016|5*J+3*D>>3&63488,C=f[k+2],A=4*ba*m+4*I,c[A]=g[C&3],c[A+1]=g[C>>2&3],c[A+2]=g[C>>4&3],c[A+3]=g[C>>6&3],A+=m,c[A]=g[C>>8&3],c[A+1]=g[C>>10&3],c[A+2]=g[C>>12&3],c[A+3]=g[C>>14],C=f[k+3],A+=m,c[A]=
g[C&3],c[A+1]=g[C>>2&3],c[A+2]=g[C>>4&3],c[A+3]=g[C>>6&3],A+=m,c[A]=g[C>>8&3],c[A+1]=g[C>>10&3],c[A+2]=g[C>>12&3],c[A+3]=g[C>>14];e.texImage2D(e.TEXTURE_2D,0,e.RGB,q,z,0,e.RGB,e.UNSIGNED_SHORT_5_6_5,c);b&&e.generateMipmap(e.TEXTURE_2D)}else return r.error("No manual decoder for",v(k),"and no native support"),0;return n}function m(a,c,f,b,g,m){var k=new XMLHttpRequest;k.open("GET",f,!0);k.responseType="arraybuffer";k.onload=function(){if(200==k.status){a.bindTexture(a.TEXTURE_2D,b);var f=e(a,c,k.response,
g);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,1<f?a.LINEAR_MIPMAP_LINEAR:a.LINEAR)}m&&m(b)};k.send(null);return b}function n(a){return a.charCodeAt(0)+(a.charCodeAt(1)<<8)+(a.charCodeAt(2)<<16)+(a.charCodeAt(3)<<24)}function v(a){return String.fromCharCode(a&255,a>>8&255,a>>16&255,a>>24&255)}var q=Object(M.a)(f),r=Object(U.a)(f),y=n("DXT1"),a=n("DXT3"),w=n("DXT5");z.sV=e;z.tV=function(a,c,e){var b=new Uint32Array(e,0,13);if(55727696==
b[0]){var g=b[7],f=b[6],k=b[11],l=52+b[12];switch(b[2]){case 0:var m=2,n=1;break;case 1:m=2;n=3;break;case 2:m=4;n=0;break;case 3:m=4;n=2;break;default:q.va("Unsupported PVR V3 format.")}}else if(559044176==b[11]){g=b[2];f=b[1];k=b[3];l=b[0];k++;var r=b[4]&255;b=0<b[10];25==r?(m=4,n=b?2:0):24==r?(m=2,n=b?3:1):q.va("Unsupported PVR V2 format.")}else q.va("Unsupported PVR version.");2==m?(r=8,b=4):b=r=4;switch(n){case 0:var v=c.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;break;case 1:v=c.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;
break;case 2:v=c.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;break;case 3:v=c.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}c=r*b*m/8;for(m=0;m<k;m++){n=Math.max(g>>m,1);var A=Math.max(f>>m,1),y=n/r,z=A/b;2>y&&(y=2);2>z&&(z=2);y=y*z*c;z=new Uint8Array(e,l,y);a.compressedTexImage2D(a.TEXTURE_2D,m,v,n,A,0,z);l+=y}};z.cG=function(a,c){switch(c){case "dds":return c=new Int32Array(a,0,31),{width:c[4],height:c[3]};case "pvr":return c=new Uint32Array(a,0,13),55727696==c[0]?(a=c[7],c=c[6]):(a=c[2],c=c[1]),{width:a,height:c}}};z.aQ=
function(e,c){var f=1;if("dds"==c)switch(c=new Int32Array(e,0,31),e=c[21],e){case y:f=6;break;case a:case w:f=4;break;default:r.error("Unsupported FourCC code:",v(e))}else if("pvr"==c)if(c=new Uint32Array(e,0,13),55727696==c[0])switch(c[2]){case 0:f=12;break;case 1:f=16;break;case 2:f=6;break;case 3:f=8}else e=c[4]&255,c=0<c[10],25==e?f=c?8:6:24==e&&(f=c?16:12);return f};z.iY=function(a,c,e,b){var g=a.createTexture();m(a,c,e,g,!0,b);return g}});w.a=f},function(D,w,f){D=f(0);var M=f(1);f=Object(D.a)("__debug",
function(f,n){var z=Object(M.a)(f),e={};n.tP=function(f,n,v,q,r){e[f]||(e[f]={XT:n,$f:{}});v in e[f].$f||(e[f].$f[v]=q);r&&(e[f].$f[v]=0)};n.calc_vbo_garbage_byte_size=function(){var f=0,n;for(n in e)for(var v in e[n].$f)f+=e[n].$f[v];return f};n.show_vbo_garbage_info=function(){var f={},n;for(n in e)for(var v in e[n].$f){var q=e[n].$f[v];if(q){var r=e[n].XT;r in f||(f[r]={wC:0,$f:{}});v in f[r].$f||(f[r].$f[v]=0);f[r].$f[v]+=q;f[r].wC+=q}}for(r in f){z.groupCollapsed(r,f[r].wC);for(v in f[r].$f)z.Wd(v,
f[r].$f[v]);z.groupEnd()}};n.cleanup=function(){e={}}});w.a=f},function(D,w,f){D=f(0);var M=f(4),U=f(46),n=f(28),z=f(11),e=f(2);f=Object(D.a)("__debug_rendertime",function(f,C){function m(){var a=w.eA();if(a){var b=a.createQuery();a.beginQuery(b)}else b=performance.now();return b}function q(){var c=a.eQ();return c&&c.debug_view_mode==a.DV_RENDER_TIME}function r(a,b,c){var g=w.eA(),f=0;if(g)for(c&&g.endQuery(),c=0;c<a.length;c++){var k=a[c],l=g.OF(k),m=g.NF();l&&!m&&(f=g.PF(k)/1E6,b&&(f=e._51(f,b,
1,10)),a.splice(c,1),c--)}else f=performance.now()-a.pop(),b&&(f=e._51(f,b,1,10));return f}var y=Object(M.a)(f),a=Object(U.a)(f),w=Object(n.a)(f),k=Object(z.a)(f),c=y.wa;C.iC=function(a){if(c.show_hud_debug_info||a.type==k.zq)a.vr||a.fl.push(m())};C.rU=function(a){"MAIN"==a.type&&q()&&a.fl.push(m())};C.lC=function(a){if((c.show_hud_debug_info||a.type==k.zq)&&!a.vr){var b=r(a.fl,a.fg,!0);b&&(a.fg=b)}};C.tU=function(a){if("MAIN"==a.type&&q()){var b=r(a.fl,a.fg,!0);b&&(a.fg=b)}};C.wG=q;C.LS=function(a){var b=
r(a.fl,a.fg,!1);b&&(a.fg=b)}});w.a=f},function(D,w,f){D=f(0);var M=f(20),U=f(42),n=f(21),z=f(2),e=f(3),m=f(7);f=Object(D.a)("__navmesh",function(f,v){function q(a,b){function c(a){var b=a[0];a[0]=a[1];a[1]=a[2];a[2]=b}a=a.km;b=b.km;for(var g=[],d=0;d<a.length;d++)0<=y(b,a[d])&&g.push(a[d]);if(2>g.length)return[];0<=y(g,a[0])&&0<=y(g,a[a.length-1])&&c(a);0<=y(g,b[0])&&0<=y(g,b[b.length-1])&&c(b);g=[];for(d=0;d<a.length;d++)0<=y(b,a[d])&&g.push(a[d]);return g}function r(a){function b(a){for(var c=a.Lh,
d=0;d<c.length;d++){var g=c[d];void 0==g.island&&(g.island=a.island,b(g))}}a=a.FS;for(var c=[],g=0,d=0;d<a.length;d++){var e=a[d];void 0==e.island&&(e.island=g++,b(e));c[e.island]||(c[e.island]=[]);c[e.island].push(a[d])}return c}function y(a,b){if(a.indexOf)return a.indexOf(b);for(var c=0;c<a.length;c++)if(a[c]==b)return c;return-1}function a(a){function b(a,b){for(var c=0;c<a.length;c++)if(b===a[c])return c}for(var c={},g=a.nq,d=0;d<g.length;d++)g[d][0]=parseFloat(g[d][0].toFixed(2)),g[d][1]=parseFloat(g[d][1].toFixed(2)),
g[d][2]=parseFloat(g[d][2].toFixed(2));c.nq=a.nq;a=r(a);c.IA=[];for(d=0;d<a.length;d++){g=[];for(var e=a[d],f=0;f<e.length;f++){for(var k=[],l=e[f],m=0;m<l.Lh.length;m++)k.push(b(e,l.Lh[m]));var p=[];for(m=0;m<l.Lh.length;m++)p.push(q(l,l.Lh[m]));l.Pd[0]=parseFloat(l.Pd[0].toFixed(2));l.Pd[1]=parseFloat(l.Pd[1].toFixed(2));l.Pd[2]=parseFloat(l.Pd[2].toFixed(2));g.push({id:b(e,l),Lh:k,km:l.km,Pd:l.Pd,Dd:l.Dd,GS:p,Uz:0,Jr:0,Fc:0,DN:1,RC:!1,closed:!1,parent:null})}c.IA.push(g)}return c}function C(a,
b,c,g,d){function f(a,b){e.subtract(a,b,R);return e.dot(R,R)}function k(a,b){for(var c=[],d=0;d<b.Lh.length;d++)c.push(a[b.Lh[d]]);return c}(function(a){for(var b=0;b<a.length;b++){var c=a[b];c.Uz=0;c.Jr=0;c.Fc=0;c.DN=1;c.RC=!1;c.closed=!1;c.parent=null}})(a);var l=U.a(function(a){return a.Uz});for(U.c(l,b);0<l.content.length;){var m=U.b(l);if(m===c){a=m;for(c=[];a.parent;)c.push(a),a=a.parent;c.push(b);return c.reverse()}m.closed=!0;for(var p=k(a,m),t=0,n=p.length;t<n;t++){var u=p[t];if(!u.closed){var r=
m.Jr+e.dist(u.Pd,m.Pd),q=u.RC;if(!q||r<u.Jr)u.RC=!0,u.parent=m,u.Fc=u.Fc||f(u.Pd,d)+f(u.Pd,g),u.Jr=r,u.Uz=u.Jr+u.Fc,q?U.d(l,u):U.c(l,u)}}}return[]}function k(a,b){a.push(b[0]);a.push(b[1]);a.push(b[2])}function c(a,b,c,g){b=e.subtract(b,a,R);a=e.subtract(c,a,O);a=e.cross(b,a,R);return z._50(e.dot(g,a))}function l(a,b){e.subtract(a,b,R);return 1E-5>e.dot(R,R)}function b(a,b,c){var g=e.subtract(b.right,b.left,R),d=c.Dd,f=b.Dd;c=Math.acos(e.dot(d,f));d=z._50(e.dot(g,e.cross(d,f,O)));c*=-d;d=n.identity(J);
n.translate(d,b.left,d);n.rotate(d,c,g,d);n.translate(d,e.scale(b.left,-1,O),d);n.multiply(a,d,a);return a}function g(a,c,g,f,d,l,u,r,q){for(var p=n.identity(L),t=d;t<g;t++)if(a[t].vG&&(t>d||!t)){var v=c,y=f;var B=a[t].left;var z=a[t].right,C=l,w=p,F=e.create(),H=e.transformMat4(B,w,K);H[3]=1;w=e.transformMat4(z,w,R);w=e.subtract(w,H,A);v=e.subtract(y,v,R);C=e.cross(C,v,ca);.01>Math.abs(e.dot(C,w))?y=.5:(e.normalize(C,C),C[3]=-e.dot(C,y),y=-m.dot(C,H)/m.dot(C,w));z=e.subtract(z,B,R);B=e.scaleAndAdd(B,
z,y,F);k(u,B);r&&k(q,a[t].Dd);t&&b(p,a[t],a[t-1])}}function w(a,f){function m(b,c){q=r=u=c;y=A=v=b;e.copy(b,z);e.copy(b,C);e.copy(a[u].Dd,w)}var p=[],d=[],u=0,r=0,q=0;var v=a[0].right;var A=a[0].left;var y=a[0].right;var z=e.copy(A,W);var C=e.copy(y,B);var w=e.copy(a[0].Dd,P);k(p,v);f&&k(d,a[0].Dd);for(var F=n.identity(ha),E=1;E<a.length;E++){var R=a[E].left,D=a[E].right,J=e.transformMat4(R,F,ba),O=e.transformMat4(D,F,I);a[E].vG&&b(F,a[E],a[E-1]);if(0>=c(v,C,O,w)){var T=l(v,y);if(T||0<c(v,z,O,w))y=
D,e.copy(O,C),q=E;else{(R=l(z,v))||g(a,z,r,v,u,w,p,f,d);F=n.identity(F);m(A,r);E=u;R||(k(p,v),f&&k(d,a[E].Dd));continue}}0<=c(v,z,J,w)&&((T=l(v,A))||0>c(v,C,J,w)?(A=R,e.copy(J,z),r=E):((R=l(C,v))||g(a,C,q,v,u,w,p,f,d),F=n.identity(F),m(y,q),E=u,R||(k(p,v),f&&k(d,a[E].Dd))))}F=a.length-1;E=a[F].left;(R=l(v,E))||g(a,z,F,v,u,w,p,f,d);R&&u||k(p,E);return f?(k(d,a[F].Dd),{positions:new Float32Array(p),normals:new Float32Array(d)}):{positions:new Float32Array(p),normals:null}}function D(a,b,c,g,d){for(var e=
null,f=Number.MAX_VALUE,k=0;k<a.length;k++){var l=a[k],m=d(c,l.Pd,l.km,b,f);m<f&&(e=l,f=m)}return 0<g&&f>g?null:e}function u(a,b,c,g,d){a.push({left:b,right:c,vG:g,Dd:d})}var F=Object(M.a)(f),R=e.create(),O=e.create(),K=m.create(),A=m.create(),ca=m.create(),L=n.create(),ha=n.create(),J=n.create(),W=e.create(),B=e.create(),ba=e.create(),I=e.create(),P=e.create();v.gS=function(b){var c=F.kA(b.Pc,F.bo),g=b.Ke;b=[];for(var f=0;f<g.length;f+=3)b.push({ab:new Uint32Array([g[f],g[f+1],g[f+2]]),Pd:new Float32Array(3),
Dd:new Float32Array(3)});g=[];for(f=0;f<c.length;f+=3){var d=new Float32Array(3);d[0]=c[f];d[1]=c[f+1];d[2]=c[f+2];g.push(d)}for(c=0;c<b.length;c++)f=b[c],e.add(g[f.ab[0]],g[f.ab[1]],R),e.add(R,g[f.ab[2]],R),e.scale(R,1/3,f.Pd);for(c=0;c<b.length;c++){f=b[c];d=e.subtract(g[f.ab[1]],g[f.ab[0]],R);var k=e.subtract(g[f.ab[2]],g[f.ab[0]],O);d=e.cross(d,k,R);e.normalize(d,d);e.copy(d,f.Dd)}var l={};c=[];f=[];var m=Math.pow(10,4);d=0;for(k=g.length;d<k;d++){var p=g[d];var n=Math.round(p[0]*m)+"_"+Math.round(p[1]*
m)+"_"+Math.round(p[2]*m);void 0===l[n]?(l[n]=d,c.push(p),f[d]=c.length-1):f[d]=f[l[n]]}l=[];d=0;for(k=b.length;d<k;d++)for(p=b[d],p.ab[0]=f[p.ab[0]],p.ab[1]=f[p.ab[1]],p.ab[2]=f[p.ab[2]],p=[p.ab[0],p.ab[1],p.ab[2]],n=0;3>n;n++)if(p[n]==p[(n+1)%3]){l.push(d);break}for(d=l.length-1;0<=d;d--)b.splice(l[d],1);for(d=g.length=0;d<c.length;d++)g.push(c[d]);f=[];for(c=d=0;c<b.length;c++)k=b[c],f.push({id:d++,km:k.ab,Pd:k.Pd,Dd:k.Dd,Lh:[]});b={FS:f,nq:g};g={};for(c=0;c<f.length;c++)for(d=0;3>d;d++)k=f[c].km[d],
l=f[c].km[(d+1)%3],k=k>l?l+"-"+k:k+"-"+l,k in g||(g[k]=[]),g[k].push(f[c]);f=Object.keys(g);c=0;for(l=f.length;c<l;c++)for(k=f[c],d=0;d<g[k].length;d++)for(p=d+1;p<g[k].length;p++)g[k][d].Lh.push(g[k][p]),g[k][p].Lh.push(g[k][d]);return a(b)};v.navmesh_get_island=function(a,b,c){for(var g=null,d=Number.MAX_VALUE,f=a.IA,k=0;k<f.length;k++)for(var l=0;l<f[k].length;l++){var m=f[k][l];e.subtract(m.Pd,b,R);m=c(b,m.Pd,m.km,a.nq,d);m<d&&(g=k,d=m)}return g};v.kR=function(a,b,c){for(var g=[],d=0;d<b.length;d++)g.push(c[b[d]]);
b=!1;c=-1;d=g.length;for(var e=d-1;++c<d;e=c)(g[c][1]<=a[1]&&a[1]<g[e][1]||g[e][1]<=a[1]&&a[1]<g[c][1])&&a[0]<(g[e][0]-g[c][0])*(a[1]-g[c][1])/(g[e][1]-g[c][1])+g[c][0]&&(b=!b);return b?!0:!1};v.navmesh_find_path=function(a,b,c,g){var d=a.IA[g.island];var f=a.nq,k=D(d,f,b,g.allowed_distance,g.distance_to_closest);if(k){var l=D(d,f,c,g.allowed_distance,g.distance_to_farthest);d=l?C(d,k,l,b,c,f):null}else d=null;if(d&&d.length)if(g.do_not_pull_string)if(c=d,g.return_normals){b=new Float32Array(3*c.length);
for(d=0;d<c.length;d++)b.set(c[d].Pd,3*d);c={positions:b,normals:null}}else{b=new Float32Array(3*c.length);a=new Float32Array(3*c.length);for(d=0;d<c.length;d++)b.set(c[d].Pd,3*d),a.set(c[d].Dd,3*d);c={positions:b,normals:a}}else{a=a.nq;g=g.return_normals;f=[];u(f,b,b,!1,d[0]&&d[0].Dd||z.f);for(b=0;b<d.length;b++){var m=d[b];if(k=d[b+1]){l=.999>Math.abs(e.dot(m.Dd,k.Dd));a:{for(var p=0;p<m.Lh.length;p++)if(m.Lh[p]===k.id){m=m.GS[p];break a}m=void 0}u(f,a[m[0]],a[m[1]],l,k.Dd)}}u(f,c,c,!1,f[f.length-
1].Dd);c=w(f,g)}else c=null;return c}});w.a=f},function(D,w,f){function M(){return{name:"",type:"",nd:"",jh:!1,ne:null,hh:[],Pb:"",bd:!1,my:!1,pb:!1,Se:!1,ly:!1,tt:!1,cq:!1,cf:!1,vk:!1,dj:!1,Wr:!1,gn:!1,Oh:0,nj:0,Yd:0,Ff:"",Qc:new Float32Array(3),Je:0,Pu:0,Qu:0,cx:0,Nu:0,Ou:0,Gu:0,alpha:0,Pf:"",Re:new Float32Array(3),Zs:0,Ex:0,Fx:0,Dn:0,Cx:0,Dx:0,rg:0,ie:0,fe:0,Sa:{fj:!1,shore_smoothing:!1,absorb_factor:0,foam_factor:0,jx:new Float32Array(3),mx:new Float32Array(3),kx:0,nx:0,Rm:new Float32Array(3),
hv:0,sss_strength:0,sss_width:0,norm_uv_velocity:0,is_dynamic:!1,waves_height:0,waves_length:0,dst_noise_scale0:0,dst_noise_scale1:0,dst_noise_freq0:0,dst_noise_freq1:0,dir_min_shore_fac:0,dir_freq:0,dir_noise_scale:0,dir_noise_freq:0,dir_min_noise_fac:0,dst_min_fac:0,waves_hor_fac:0,Wv:!1,Ew:0,Fw:0,Mu:0,Xu:!1,Nj:0,Mj:0},uj:{Xo:!1,zr:"",yr:""},zn:{reflect_factor:0,fresnel:0,fresnel_factor:0},Oo:{size:0,Qr:0,bx:new Float32Array(3),iw:new Float32Array(3),ax:0,gw:0,Ix:0,Yv:!1,Jx:0,Kx:0},Fd:{aq:!1,Bi:!1,
ve:0,uh:0,Sb:"",$e:0,Ze:0,af:0}}}w.c=M;w.b=function(){var f=M();f.name="DEFAULT";f.type="SURFACE";f.nd=U._4();f.jh=!1;f.ne=null;f.hh=[];f.Pb="OPAQUE";f.bd=!1;f.my=!1;f.pb=!0;f.tt=!1;f.cq=!1;f.vk=!1;f.gn=!1;f.Oh=0;f.nj=0;f.Yd=0;f.Ff="LAMBERT";f.Qc.set([.8,.8,.8]);f.Je=.8;f.alpha=1;f.Pf="COOKTORR";f.Re.set([1,1,1]);f.Zs=.5;f.Dn=50;f.rg=1;f.ie=0;f.fe=1;f.Sa.fj=!1;f.uj.Xo=!1;f.zn.reflect_factor=0;f.zn.fresnel=0;f.zn.fresnel_factor=1.25;f.Fd.aq=!1;return f};w.d=function(f,z){z.name=f.name;z.type=f.type;
z.nd=f.uuid;z.jh=f.use_nodes;z.ne=f.node_tree;z.hh=f.texture_slots;z.Pb=f.game_settings.alpha_blend;z.bd=f.use_shadeless;z.my=f.use_transparency;z.pb=f.game_settings.use_backface_culling;z.Se=f.use_tangent_shading;z.ly=f.use_orco_tex_coord;z.tt=f.use_vertex_color_paint;z.cq=f.b4w_double_sided_lighting;z.cf=f.b4w_do_not_render;z.vk=f.b4w_render_above_all;z.dj=f.b4w_lens_flares;z.Wr=f.b4w_wettable;z.gn=f.b4w_refractive;z.Oh=f.b4w_refr_bump;z.nj=f.pass_index;z.Yd=f.offset_z;z.Ff=f.diffuse_shader;z.Qc.set(f.diffuse_color);
z.Je=f.diffuse_intensity;z.Pu=f.diffuse_toon_size;z.Qu=f.diffuse_toon_smooth;z.cx=f.roughness;z.Nu=f.diffuse_fresnel;z.Ou=f.diffuse_fresnel_factor;z.Gu=f.darkness;z.alpha=f.alpha;z.Pf=f.specular_shader;z.Re.set(f.specular_color);z.Zs=f.specular_intensity;z.Ex=f.specular_toon_size;z.Fx=f.specular_toon_smooth;z.Dn=f.specular_hardness;z.Cx=f.specular_ior;z.Dx=f.specular_slope;z.rg=f.specular_alpha;z.ie=f.emit;z.fe=f.ambient;var e=z.Sa;e.fj=f.b4w_water;e.shore_smoothing=f.b4w_water_shore_smoothing;e.absorb_factor=
f.b4w_water_absorb_factor;e.foam_factor=f.b4w_foam_factor;e.jx.set(f.b4w_shallow_water_col);e.mx.set(f.b4w_shore_water_col);e.kx=f.b4w_shallow_water_col_fac;e.nx=f.b4w_shore_water_col_fac;e.Rm.set(f.b4w_water_fog_color);e.hv=f.b4w_water_fog_density;e.sss_strength=f.b4w_water_sss_strength;e.sss_width=f.b4w_water_sss_width;e.norm_uv_velocity=f.b4w_water_norm_uv_velocity;e.is_dynamic=f.b4w_water_dynamic;e.waves_height=f.b4w_waves_height;e.waves_length=f.b4w_waves_length;e.dst_noise_scale0=f.b4w_water_dst_noise_scale0;
e.dst_noise_scale1=f.b4w_water_dst_noise_scale1;e.dst_noise_freq0=f.b4w_water_dst_noise_freq0;e.dst_noise_freq1=f.b4w_water_dst_noise_freq1;e.dir_min_shore_fac=f.b4w_water_dir_min_shore_fac;e.dir_freq=f.b4w_water_dir_freq;e.dir_noise_scale=f.b4w_water_dir_noise_scale;e.dir_noise_freq=f.b4w_water_dir_noise_freq;e.dir_min_noise_fac=f.b4w_water_dir_min_noise_fac;e.dst_min_fac=f.b4w_water_dst_min_fac;e.waves_hor_fac=f.b4w_water_waves_hor_fac;e.Wv=f.b4w_generated_mesh;e.Ew=f.b4w_water_num_cascads;e.Fw=
f.b4w_water_subdivs;e.Mu=f.b4w_water_detailed_dist;e.Xu=f.b4w_water_enable_caust;e.Nj=f.b4w_water_caust_scale;e.Mj=f.b4w_water_caust_brightness;e=z.uj;e.Xo=f.b4w_terrain;e.zr=f.b4w_dynamic_grass_size;e.yr=f.b4w_dynamic_grass_color;e=z.zn;e.reflect_factor=f.raytrace_mirror.reflect_factor;e.fresnel=f.raytrace_mirror.fresnel;e.fresnel_factor=f.raytrace_mirror.fresnel_factor;e=z.Oo;e.size=f.halo.size;e.Qr=f.halo.hardness;e.bx.set(f.halo.b4w_halo_rings_color);e.iw.set(f.halo.b4w_halo_lines_color);e.ax=
f.halo.ring_count;e.gw=f.halo.line_count;e.Ix=f.halo.star_tip_count;e.Yv=f.b4w_halo_sky_stars;e.Jx=f.b4w_halo_stars_blend_height;e.Kx=f.b4w_halo_stars_min_height;z=z.Fd;z.aq=f.b4w_collision;z.Bi=f.b4w_use_ghost;z.ve=f.physics.friction;z.uh=f.physics.elasticity;z.Sb=f.b4w_collision_id;z.$e=f.b4w_collision_margin;z.Ze=f.b4w_collision_group;z.af=f.b4w_collision_mask};w.a=function(f){f.name=f.name;f.type=f.type;f.nd=f.nd;f.jh=f.jh;f.ne=f.ne;f.hh=f.hh.slice();f.Pb=f.Pb;f.bd=f.bd;f.my=f.my;f.pb=f.pb;f.Se=
f.Se;f.ly=f.ly;f.tt=f.tt;f.cq=f.cq;f.cf=f.cf;f.vk=f.vk;f.dj=f.dj;f.Wr=f.Wr;f.gn=f.gn;f.Oh=f.Oh;f.nj=f.nj;f.Yd=f.Yd;f.Ff=f.Ff;f.Qc.set(f.Qc);f.Je=f.Je;f.Pu=f.Pu;f.Qu=f.Qu;f.cx=f.cx;f.Nu=f.Nu;f.Ou=f.Ou;f.Gu=f.Gu;f.alpha=f.alpha;f.Pf=f.Pf;f.Re.set(f.Re);f.Zs=f.Zs;f.Ex=f.Ex;f.Fx=f.Fx;f.Dn=f.Dn;f.Cx=f.Cx;f.Dx=f.Dx;f.rg=f.rg;f.ie=f.ie;f.fe=f.fe;var n=f.Sa,e=f.Sa;e.fj=n.fj;e.shore_smoothing=n.shore_smoothing;e.absorb_factor=n.absorb_factor;e.foam_factor=n.foam_factor;e.jx.set(n.jx);e.mx.set(n.mx);e.kx=n.kx;
e.nx=n.nx;e.Rm=n.Rm;e.hv=n.hv;e.sss_strength=n.sss_strength;e.sss_width=n.sss_width;e.norm_uv_velocity=n.norm_uv_velocity;e.is_dynamic=n.is_dynamic;e.waves_height=n.waves_height;e.waves_length=n.waves_length;e.dst_noise_scale0=n.dst_noise_scale0;e.dst_noise_scale1=n.dst_noise_scale1;e.dst_noise_freq0=n.dst_noise_freq0;e.dst_noise_freq1=n.dst_noise_freq1;e.dir_min_shore_fac=n.dir_min_shore_fac;e.dir_freq=n.dir_freq;e.dir_noise_scale=n.dir_noise_scale;e.dir_noise_freq=n.dir_noise_freq;e.dir_min_noise_fac=
n.dir_min_noise_fac;e.dst_min_fac=n.dst_min_fac;e.waves_hor_fac=n.waves_hor_fac;e.Wv=n.Wv;e.Ew=n.Ew;e.Fw=n.Fw;e.Mu=n.Mu;e.Xu=n.Xu;e.Nj=n.Nj;e.Mj=n.Mj;e=n=f.uj;e.Xo=n.Xo;e.zr=n.zr;e.yr=n.yr;e=n=f.zn;e.reflect_factor=n.reflect_factor;e.fresnel=n.fresnel;e.fresnel_factor=n.fresnel_factor;e=n=f.Oo;e.size=n.size;e.Qr=n.Qr;e.bx.set(n.bx);e.iw.set(n.iw);e.ax=n.ax;e.gw=n.gw;e.Ix=n.Ix;e.Yv=n.Yv;e.Jx=n.Jx;e.Kx=n.Kx;e=n=f.Fd;e.aq=n.aq;e.Bi=n.Bi;e.ve=n.ve;e.uh=n.uh;e.Sb=n.Sb;e.$e=n.$e;e.Ze=n.Ze;e.af=n.af;return f};
var U=f(2)},function(D,w,f){D=f(0);var M=f(5),U=f(2),n=f(3);f=Object(D.a)("__curve",function(f,e){function m(a,e,f,c,l){var b=c.length;l||(l=new Float32Array(b));for(var g=b+a,k=new Float32Array(g),m=1;m<=g-1;m++)k[m-1]=e>=f[m-1]&&e<f[m+1-1]?1:0;for(var n=2;n<=a;n++)for(m=1;m<=g-n;m++)k[m-1]=(0!=k[m-1]?(e-f[m-1])*k[m-1]/(f[m+n-1-1]-f[m-1]):0)+(0!=k[m+1-1]?(f[m+n-1]-e)*k[m+1-1]/(f[m+n-1]-f[m+1-1]):0);e==f[g-1]&&(k[b-1]=1);a=0;for(m=1;m<=b;m++)a+=k[m-1]*c[m-1];for(m=1;m<=b;m++)l[m-1]=0!=a?k[m-1]*c[m-
1]/a:0;return l}function C(a){a=a.aw;return a[a.length-1]}function v(a){a=a.fF;return a[a.length-1]}function q(a,e,f,c,l,b,g,m){var k=a+(e-a)/2,n=r(k,c,l,b,g)-f;m=m?m:.01;return Math.abs(n)<m?k:0<n?q(a,k,f,c,l,b,g,m):q(k,e,f,c,l,b,g,m)}function r(a,e,f,c,l){var b=1-a;return e*b*b*b+3*f*b*b*a+3*c*b*a*a+l*a*a*a}var y=Object(M.a)(f);e.gO=function(a){var e={},f=a.data;a=f.splines[0];if(!a||"NURBS"!=a.type||!a.use_endpoint_u)return null;var c=a.order_u;e.order=c;a=a.points;var l=a.length/5,b=[],g=l+c;
l+=2;b[0]=0;for(var n=2;n<=g;n++)b[n-1]=n>c&&n<l?b[n-2]+1:b[n-2];e.aw=b;"2D"==f.dimensions?e.sl=!1:"3D"==f.dimensions?e.sl=!0:y.va("Wrong curve dimensions");c=[];b=[];for(f=0;f<a.length;f+=5)c.push(a[f]),c.push(a[f+1]),c.push(a[f+2]),e.sl&&c.push(a[f+3]),b.push(a[f+4]);e.xz=c;e.TC=b;a=[];f=e.xz;c=e.sl?4:3;b=e.TC;g=e.aw;l=e.order;n=f.length/c;for(var r=n+l,u=0,q=g[r-1]/999,v=0;1E3>v;v++){5E-6>g[r-1]-u&&(u=g[r-1]);for(var C=m(l,u,g,b),z=0;z<c;z++)for(var A=a[c*v+z]=0;A<n;A++)a[c*v+z]+=C[A]*f[c*A+z];
u+=q}c=e.sl?4:3;b=new Float32Array(1E3);b[0]=0;for(f=1;1E3>f;f+=1)g=a[(f-1)*c],l=a[(f-1)*c+1],n=a[(f-1)*c+2],r=a[f*c],u=a[f*c+1],q=a[f*c+2],b[f]=b[f-1]+Math.sqrt((r-g)*(r-g)+(u-l)*(u-l)+(q-n)*(q-n));e.fF=b;return e};e.oU=function(a,e,f){f||(f=[]);e=Math.min(e,C(a));var c=a.xz,k=a.sl?4:3,b=a.TC,g=a.aw,n=a.order;a=c.length/k;var r=a+n;5E-6>g[r-1]-e&&(e=g[r-1]);r=new Float32Array(a);m(n,e,g,b,r);for(e=0;e<k;e++)for(b=f[e]=0;b<a;b++)f[e]+=r[b]*c[k*b+e]};e.lU=function(a,e,f){f||(f=[]);var c=a.xz,k=a.sl?
4:3,b=a.TC,g=a.aw,m=a.order;a=c.length/k;var n=a+m;5E-6>g[n-1]-e&&(e=g[n-1]);n=new Float32Array(a);var u=e;e=n;var r=b.length;e||(e=new Float32Array(r));var q=new Float32Array(r),v=new Float32Array(r),y=q,A=v;y||(y=new Float32Array(r));A||(A=new Float32Array(r));for(var C=r+m,z=new Float32Array(C),w=new Float32Array(C),D=1;D<=C-1;D++)z[D-1]=u>=g[D-1]&&u<g[D+1-1]?1:0;u==g[C-1]&&(z[r-1]=1);for(var T=2;T<=m;T++)for(D=1;D<=C-T;D++){var B=0!=z[D-1]?z[D-1]/(g[D+T-1-1]-g[D-1]):0,ba=0!=z[D+1-1]?-z[D+1-1]/
(g[D+T-1]-g[D+1-1]):0,I=0!=w[D-1]?(u-g[D-1])*w[D-1]/(g[D+T-1-1]-g[D-1]):0,P=0!=w[D+1-1]?(g[D+T-1]-u)*w[D+1-1]/(g[D+T-1]-g[D+1-1]):0;z[D-1]=(0!=z[D-1]?(u-g[D-1])*z[D-1]/(g[D+T-1-1]-g[D-1]):0)+(0!=z[D+1-1]?(g[D+T-1]-u)*z[D+1-1]/(g[D+T-1]-g[D+1-1]):0);w[D-1]=B+ba+I+P}for(D=1;D<=r;D++)y[D-1]=z[D-1],A[D-1]=w[D-1];g=0;for(m=1;m<=r;m++)g+=q[m-1]*b[m-1];u=0;for(m=1;m<=r;m++)u+=v[m-1]*b[m-1];for(m=1;m<=r;m++)e[m-1]=0!=g?v[m-1]*b[m-1]/g+q[m-1]*b[m-1]*u/(g*g):0;for(b=0;b<k;b++)for(g=f[b]=0;g<a;g++)f[b]+=n[g]*
c[k*g+b]};e.MY=C;e.nU=v;e.mU=function(a,e){if(0>=e)return 0;var f=C(a);if(e>=v(a))return f;a=a.fF;var c=U.F(a,e,0,a.length-1);return f*(c+(e-a[c])/(a[c+1]-a[c]))/1E3};e.hw=function(a,e,f,c,l){return f+(l-c)*(a-f)/(e-c)};e.MG=function(a,e,f){var c=e[0];e=e[1];f=(f[1]-e)/(f[0]-c);return f*a+(e-f*c)};e.HM=function(a,e,f,c,l){return r(q(0,1,a,e[0],f[0],c[0],l[0],.001),e[1],f[1],c[1],l[1])};e.mz=function(a,e,f,c,l){var b=new Float32Array(3),g=new Float32Array(3),k=new Float32Array(3),m=new Float32Array(3),
u=new Float32Array(3),r=new Float32Array(3);n.copy(a[1],g);null==e?(n.copy(f[1],k),b[0]=2*g[0]-k[0],b[1]=2*g[1]-k[1]):n.copy(e[1],b);null==f?(n.copy(e[1],b),k[0]=2*g[0]-b[0],k[1]=2*g[1]-b[1]):n.copy(f[1],k);n.subtract(g,b,m);n.subtract(k,g,u);e=n.length(m);f=n.length(u);0==e&&(e=1);0==f&&(f=1);if("AUTO"==c||"AUTO"==l)r[0]=u[0]/f+m[0]/e,r[1]=u[1]/f+m[1]/e,b=2.5614*n.length(r),0!=b&&("AUTO"==c&&n.scaleAndAdd(g,r,-(e/b),a[0]),"AUTO"==l&&n.scaleAndAdd(g,r,f/b,a[2]));"VECTOR"==c&&n.scaleAndAdd(g,m,-1/
3,a[0]);"VECTOR"==l&&n.scaleAndAdd(g,u,1/3,a[2])};e.CN=function(a,e,f,c){var k=[],b=[];k[0]=a[0]-e[0];k[1]=a[1]-e[1];b[0]=c[0]-f[0];b[1]=c[1]-f[1];var g=c[0]-a[0];var m=Math.abs(k[0]);var n=Math.abs(b[0]);0!=m+n&&m+n>g&&(m=g/(m+n),e[0]=a[0]-m*k[0],e[1]=a[1]-m*k[1],f[0]=c[0]-m*b[0],f[1]=c[1]-m*b[1])}});w.a=f},function(D,w,f){D=f(0);var M=f(4),U=f(66),n=f(35),z=f(43),e=f(1);f=Object(D.a)("config",function(f,C){var m=Object(M.a)(f),q=Object(n.a)(f),r=Object(U.a)(f),y=Object(z.a)(f),a=Object(e.a)(f);
C.P_LOW=m.P_LOW;C.P_HIGH=m.P_HIGH;C.P_ULTRA=m.P_ULTRA;C.P_CUSTOM=m.P_CUSTOM;C.P_AUTO=m.P_AUTO;C.set=m.set;C.get=m.get;C.reset=m.reset;C.reset_limits=m.reset_limits;C.get_std_assets_path=m.get_assets_path;C.get_assets_path=m.get_assets_path;C.apply_quality=function(e){y.is_primary_loaded()?a.error("Cannot change quality profile after a scene is loaded."):(m.set("quality",e),r.sv()&&(m.apply_quality(),q.cI(r.sv(),!1)))}});w.a=f},function(D,w,f){D=f(0);var M=f(43),U=f(65);f=Object(D.a)("data",function(f,
z){var e=Object(M.a)(f);f=Object(U.a)(f);z.load=e.load;z.unload=function(f){e.unload(f|0)};z.set_debug_resources_root=e.set_debug_resources_root;z.is_primary_loaded=e.is_primary_loaded;z.is_idle=f.dn;z.load_and_add_new=e.load;z.cleanup=z.unload;z.activate_media=e.activate_media;z.prefetch=e.prefetch;z.unfetch=e.unfetch});w.a=f},function(D,w,f){var M=f(32);D=f(0);var U=f(5),n=f(16),z=f(4),e=f(66),m=f(35),C=f(53),v=f(15),q=f(43),r=f(71),y=f(96),a=f(45),T=f(46),k=f(63),c=f(72),l=f(28),b=f(20),g=f(65),
E=f(12),ea=f(9),u=f(19),F=f(1),R=f(22),O=f(10),K=f(58),A=f(23),ca=f(34),L=f(11),ha=f(17),J=f(18),W=f(13),B=f(6),ba=f(2),I=f(3);f=Object(D.a)("debug",function(f,p){function w(a,b,c,d){ra.group(ya.Ox(a),d);for(a=0;a<c.length;a++){var g=c[a],e=g.ka;if(e.type==d)for(var h=!1,f=0;f<b.length;f++){for(var k=b[f].jb,l=0;l<k.length;l++){var m=k[l];if(m.Ec&&m.$g==e){"STATIC"==d?ra.Wd(g.oe,g):ra.Wd(g.name,g);h=!0;break}}if(h)break}}ra.groupEnd()}function H(a){var b={};if(!a)return b;a=a.split("\n");for(var c=
0;c<a.length;c++){var d=a[c];if(-1!=d.search(new RegExp(/^[A-Z.]+ ?/))){var g=d.split(" ")[0];g in b||(b[g]=0);b[g]++}}d=c=a=0;for(g in b)switch(g){case "KIL":case "TEX":case "TXB":case "TXP":case "KIL.F":case "TEX.F":case "TXB.F":case "TXD.F":case "TXL.F":case "TXQ.F":case "TXP.F":c+=b[g];a+=b[g];break;case "ATTRIB":d+=b[g];break;case "ADDRESS":case "PARAM":case "TEMP":case "ALIAS":case "OUTPUT":break;case "END":break;default:a+=b[g]}b.ALL_OPS=a;b.TEX_OPS=c;b.ATTRIBS=d;return b}function t(a,b){var c=
new XMLHttpRequest;c.open("POST",a,!1);c.send(b);if(200==c.status)return c.responseText;ra.error(c.responseText);throw"Error POST XHR: "+c.status;}function d(a){a.sort(function(a,b){return b.Vz.ALL_OPS-a.Vz.ALL_OPS});for(var b=0;b<a.length;b++){var c=a[b],d=c.Vz,g=c.KV,e=D(c.LO);e=e.length?"\t\t("+e.join(", ")+")":"\t\t(NA)";ra.groupCollapsed("VERT ->","OPS",g.ALL_OPS,"ATT",g.ATTRIBS,"TEX",g.TEX_OPS,"\t\tFRAG ->","OPS",d.ALL_OPS,"TEX",d.TEX_OPS,e);ra.groupCollapsed("directives");var h=c.Mb.fi.slice().sort();
for(e=0;e<h.length;e++){var f=h[e];ra.Wd(f[0],f[1])}ra.groupEnd();ra.groupCollapsed("node elements");h=c.Mb.Mf;for(e=0;e<h.length;e++)ra.Wd(h[e]);ra.groupEnd();ra.groupCollapsed("vert source");ra.Wd(c.IV);ra.groupEnd();ra.groupCollapsed("vert translated source");ra.Wd(c.JV);ra.groupEnd();e=["ALL_OPS","TEX_OPS","ATTRIBS"];ra.groupCollapsed("vert ops stats");for(var k in g)-1==e.indexOf(k)&&ra.Wd(k,g[k]);ra.groupEnd();ra.groupCollapsed("vert assembly");ra.Wd(c.HV);ra.groupEnd();ra.groupCollapsed("frag source");
ra.Wd(c.EP);ra.groupEnd();ra.groupCollapsed("frag translated source");ra.Wd(c.FP);ra.groupEnd();ra.groupCollapsed("frag ops stats");for(k in d)-1==e.indexOf(k)&&ra.Wd(k,d[k]);ra.groupEnd();ra.groupCollapsed("frag assembly");ra.Wd(c.AP);ra.groupEnd();ra.groupEnd()}}function D(a){for(var b=[],c=za.Mr(),d=0;d<c.length;d++)for(var g=c[d],e=S.tc(g,"MESH",S.DATA_ID_ALL),h=0;h<e.length;h++){var f=va.kb(e[h],g);if(f&&f.Ia.length){f=f.Ia;for(var k=0;k<f.length;k++){var l=f[k];if(l.ec==a)for(var m=0;m<l.Hc.length;m++){var p=
l.Hc[m];-1==b.indexOf(p)&&b.push(p)}}}}return b}function P(a){function b(){Ba.push(b);return a.apply(a,arguments)}return b}function pa(a,b,c,d,g){if(typeof b!=typeof a)throw"debug.eqv: wrong expected data type";if(a.length!=b.length)throw"debug.eqv: wrong expected vector length";c=c?c:1E-6;for(var e=0;e<a.length;e++){if("number"!=typeof b[e]||isNaN(b[e]))throw"debug.eqv: wrong expected data type";if("number"!=typeof a[e]||isNaN(a[e]))throw"debug.eqv: wrong result data type";if(b[e]>a[e]+c||b[e]<a[e]-
c)throw"debug.eqv: wrong result";}Aa(d,g,"eqv")}function Aa(a,b,c){a=a||"";b=b||"";if(ib){if(""==a)throw"debug."+c+': no error is expected, but got "'+Na+'"';if(Na!=a)throw"debug."+c+': error "'+a+'" is expected, but got "'+Na+'"';}else if(""!=a)throw"debug."+c+': error "'+a+'" is expected, but got nothing';if(Xa){if(""==b)throw"debug."+c+': no warning is expected, but got "'+fa+'"';if(fa!=b)throw"debug."+c+': warning "'+b+'" is expected, but got "'+fa+'"';}else if(""!=b)throw"debug."+c+': warning "'+
b+'" is expected, but got nothing';ib=Xa=!1}function Ja(){Ua&&(S.qp(Ua,!1,!1,!1),Ea.BH(Ua),S.qp(Ua,!0,!0,!0),S.remove_object(Ua),Ua=null)}var N=Object(U.a)(f),oa=Object(n.a)(f),Y=Object(z.a)(f),Q=Object(m.a)(f),Ha=Object(C.a)(f),ia=Object(v.a)(f),Ma=Object(e.a)(f),Ea=Object(q.a)(f),X=Object(r.a)(f),Ga=Object(y.a)(f),Fa=Object(a.a)(f),wa=Object(T.a)(f),La=Object(k.a)(f),ja=Object(c.a)(f),ta=Object(l.a)(f),ka=Object(b.a)(f),qa=Object(g.a)(f),S=Object(E.a)(f),va=Object(ea.a)(f),xa=Object(u.a)(f),ra=
Object(F.a)(f),ma=Object(R.a)(f),za=Object(O.a)(f),Da=Object(K.a)(f),ua=Object(A.a)(f),h=Object(ca.a)(f),ya=Object(L.a)(f),Ta=Object(J.a)(f),Va=Object(ha.a)(f),Ca=Object(W.a)(f),Wa=B.b(),Ra=new Float32Array(2),V=I.create(),ab=I.create(),bb=I.create(),Ua=null,Qa=Y.wa,Ba=[],fa="",Na="",Xa=!1,ib=!1,jb=!0,fb=new Uint8Array(4);p.DV_NONE=wa.DV_NONE;p.DV_OPAQUE_WIREFRAME=wa.DV_OPAQUE_WIREFRAME;p.DV_TRANSPARENT_WIREFRAME=wa.DV_TRANSPARENT_WIREFRAME;p.DV_FRONT_BACK_VIEW=wa.DV_FRONT_BACK_VIEW;p.DV_BOUNDINGS=
wa.DV_BOUNDINGS;p.DV_CLUSTERS_VIEW=wa.DV_CLUSTERS_VIEW;p.DV_BATCHES_VIEW=wa.DV_BATCHES_VIEW;p.DV_RENDER_TIME=wa.DV_RENDER_TIME;p.physics_stats=function(){xa.TO()};p.physics_id=function(a){ra.log("O",xa.vP(a));var b=xa.PP();if(b){b=b.cd.jb;for(var c=0;c<b.length;c++){var d=b[c];d.xa.Ja==a&&ra.log("B",d)}}else ra.error("No active physics scene.")};p.visible_objects=function(){var a=za.get_active(),b=S.tc(a,"MESH",S.DATA_ID_ALL);a=za.ug(a,[ya.ic,ya.Md,ya.He]);for(var c=0;c<a.length;c++){var d=a[c],g=
d.vb;g.length&&(w(d,g,b,"DYNAMIC"),w(d,g,b,"STATIC"))}};p.object_info=function(a){for(var b=za.get_active(),c=S.tc(b,"MESH",S.DATA_ID_ALL),d=0;d<c.length;d++){var g=c[d];if(g.name==a){ra.log("Object",g);for(var e=za.$z(b),h=0;h<e.length;h++){for(var f=e[h],k=[],l=f.vb,m=0;m<l.length;m++)for(var p=l[m].jb,t=0;t<p.length;t++)p[t].$g==g.ka&&k.push(p[t]);ra.log("Subscene "+f.type,k)}}}};p.objects_stat=function(){var a=za.get_active();ra.log("Armatures: "+S.tc(a,"ARMATURE",S.DATA_ID_ALL).length);ra.log("Cameras: "+
S.tc(a,"CAMERA",S.DATA_ID_ALL).length);ra.log("Curves: "+S.tc(a,"CURVE",S.DATA_ID_ALL).length);ra.log("Empties: "+S.tc(a,"EMPTY",S.DATA_ID_ALL).length);ra.log("Lamps: "+S.tc(a,"LAMP",S.DATA_ID_ALL).length);ra.log("Meshes: "+S.tc(a,"MESH",S.DATA_ID_ALL).length);ra.log("Speakers: "+S.tc(a,"SPEAKER",S.DATA_ID_ALL).length)};p.num_vertices=function(){var a=0,b=za.get_active();b=za.ug(b,[ya.ic,ya.Md,ya.He]);for(var c=0;c<b.length;c++)for(var d=b[c].vb,g=0;g<d.length;g++)for(var e=d[g].jb,h=0;h<e.length;h++){var f=
e[h].fb;f&&(a+=f.num_vertices)}return a};p.num_triangles=function(){var a=0,b=za.get_active();b=za.ug(b,[ya.ic,ya.Md,ya.He]);for(var c=0;c<b.length;c++)for(var d=b[c].vb,g=0;g<d.length;g++)for(var e=d[g].jb,h=0;h<e.length;h++){var f=e[h].fb;f&&(a+=f.num_triangles)}return a};p.num_draw_calls=function(){for(var a=za.get_active(),b=za.ug(a,[ya.ic,ya.Md,ya.He,ya.de,ya.Ue]),c=0,d=0;d<b.length;d++){var g=b[d];g=g.vb;for(var e=0;e<g.length;e++)c+=g[e].jb.length}a=za.ug(a,[ya.xd,ya.Ge]);for(d=0;d<a.length;d++)for(g=
a[d],g=g.vb,e=0;e<g.length;e++)c+=6*g[e].jb.length;return c};p.num_shaders=function(){return ba._8(h.SF())};p.geometry_stats=function(){var a=za.get_active(),b=za.$z(a);a={};for(var c=0;c<b.length;c++){var d=b[c];if(d.type!=ya.Uk&&d.type!=ya.Wh)for(var g=d.vb,e=0;e<g.length;e++)for(var h=g[e].jb,f=0;f<h.length;f++){var k=h[f].fb,l=h[f].$g;k&&(d.type!=ya.zf&&d.type!=ya.Xh||l.Jw||l.Iw)&&(a[k.id]=k)}}c=b=0;for(var m in a)d=a[m].$a,d.uo&&(c+=d.uo/1048576),b+=d.wo/1048576;return{vbo_memory:b,ibo_memory:c}};
p.num_textures=function(){var a=[],b=0,c=za.get_active();c=za.ug(c,[ya.ic,ya.Md,ya.He]);for(var d=0;d<c.length;d++)for(var g=c[d].vb,e=0;e<g.length;e++)for(var h=g[e].jb,f=0;f<h.length;f++){var k=h[f].fb;if(k){k=k.Ua;for(var l=0;l<k.length;l++){var m=k[l];if("IMAGE"===m.source||"ENVIRONMENT_MAP"===m.source){var p=m.hc;-1===a.indexOf(p)&&(a.push(p),m=m.width*m.height*4/1048576/m.gr,m*=1.3333,b+=m)}}}}return{number:a.length,memory:b}};p.num_render_targets=function(){var a=[],b=0,c=za.get_active();c=
za.$z(c);for(var d=0;d<c.length;d++){var g=c[d];if(g.type!=ya.Uk){var e=g.qa,h=[e.wc,e.gg];h.push.apply(h,g.Th);for(g=0;g<h.length;g++){var f=h[g];Va.Yo(f)&&-1==a.indexOf(f)&&(a.push(f),b+=e.width*e.height*Va.DQ(f))}}}return{number:a.length,memory:b/1024/1024}};p.make_camera_frustum_shot=function(){var a=za.get_active();(a=za.yc(a,ya.ic))&&za.WG(a.qa,a,[1,1,0])};p.make_light_frustum_shot=function(){var a=za.get_active(),b=za.yc(a,ya.ic);a=za.ug(a,[ya.ee]);if(b)for(var c=0;c<a.length;c++){var d=a[c];
switch(c){case 0:var g=[1,0,0];break;case 1:g=[0,1,0];break;case 2:g=[0,0,1];break;default:g=[1,0,1]}za.WG(d.qa,b,g)}};p.scenegraph_to_dot=function(){for(var a=za.Mr(),b=0;b<a.length;b++)ra.log("\n"+Da.RO(za.tv(a[b])))};p.loading_graph_to_dot=function(a){ra.log("\n"+qa.IQ(a|0))};p.controls_info=Ha.debug;p.object_distance=function(a,b){a=B.j(a.ka.na,V);b=B.j(b.ka.na,ab);return I.dist(a,b)};p.msg=function(){La.msg.apply(La,arguments)};p.fbmsg=function(){La.fbmsg.apply(La,arguments)};p.print_telemetry=
function(){La.print_telemetry.apply(La,arguments)};p.plot_telemetry=function(){La.plot_telemetry.apply(La,arguments)};p.fbres=function(a,b){function c(){La.fbmsg("FBRES",a());setTimeout(c,b)}b||(b=16);c()};p.assert_constants=function(){var a=new Float32Array([0,0,0,1]),b=new Float32Array([1,0,0]),c=new Float32Array([0,1,0]),d=new Float32Array([0,0,1]),g=new Float32Array([-1,0,0]),e=new Float32Array([0,-1,0]),h=new Float32Array([0,0,-1]);if(!ba.P(new Float32Array(3),ba.m))throw"Wrong VEC3_IDENT";if(!ba.P(a,
ba.k))throw"Wrong QUAT4_IDENT";if(!ba.P(b,ba.d))throw"Wrong AXIS_X";if(!ba.P(c,ba.e))throw"Wrong AXIS_Y";if(!ba.P(d,ba.f))throw"Wrong AXIS_Z";if(!ba.P(g,ba.a))throw"Wrong AXIS_MX";if(!ba.P(e,ba.b))throw"Wrong AXIS_MY";if(!ba.P(h,ba.c))throw"Wrong AXIS_MZ";};p.mute_music=function(){for(var a=ua.get_speaker_objects(),b=0;b<a.length;b++){var c=a[b];"BACKGROUND_MUSIC"==ua.hA(c)&&ua.mute(c,!0)}};p.check_finite=function(a){return Fa.xP(a)};p.set_debug_params=function(a){var b=za.get_active();b=za.ug(b,
[ya.Wh]);if(b.length)for(var c=0;c<b.length;c++){var d=b[c];if("number"==typeof a.debug_view_mode)switch(a.debug_view_mode){case wa.DV_NONE:case wa.DV_OPAQUE_WIREFRAME:case wa.DV_TRANSPARENT_WIREFRAME:case wa.DV_FRONT_BACK_VIEW:case wa.DV_BOUNDINGS:case wa.DV_CLUSTERS_VIEW:case wa.DV_BATCHES_VIEW:case wa.DV_RENDER_TIME:za.uT(d,a.debug_view_mode);break;default:ra.error("set_debug_params(): Wrong debug view mode")}"number"==typeof a.debug_colors_seed&&za.tT(d,a.debug_colors_seed);"number"==typeof a.XS&&
za.JT(d,a.XS);"object"==typeof a.wireframe_edge_color&&za.ST(d,ba._1(a.wireframe_edge_color))}else ra.error("Debugging is not available on the scene.")};p.get_error_quantity=function(){return ra.iQ()};p.get_warning_quantity=function(){return ra.FQ()};p.clear_errors_warnings=function(){return ra.clear_errors_warnings()};p.analyze_shaders=function(a){var b=h.SF(),c=0,g;for(g in b)a&&-1===g.indexOf(a)||c++;c="of "+c+" analyzing...";var e={};for(g in b)if(!a||-1!==g.indexOf(a)){var f=b[g];var k=f.vy;
var l=f.kv,m=ta.dQ();if(m){var p=m.getTranslatedShaderSource(k);m=m.getTranslatedShaderSource(l);if(Q.detect_mobile()){p=p.replace("#version","#version 300 //");m=m.replace("#version","#version 300 //");var n=t("/analyze_shader/vert_gles",p),u=t("/analyze_shader/frag_gles",m)}else p=p.replace("#version","#version 400 //"),m=m.replace("#version","#version 400 //"),n=t("/analyze_shader/vert",p),u=t("/analyze_shader/frag",m);var r=H(n),q=H(u);k={IV:Ma.sv().getShaderSource(k),JV:p,HV:n,KV:r,EP:Ma.sv().getShaderSource(l),
FP:m,AP:u,Vz:q}}else ra.warn("WEBGL_debug_shaders extension not found"),k=void 0;if(k){l=f.Mb;var v=l.yg+" + "+l.ff;k.LO=f;k.Mb=l;f=e[v]=e[v]||[];f.push(k);ra.Wd(c)}}for(v in e)ra.group("%c"+v,"color: #800"),f=e[v],d(f),ra.groupEnd()};p.fake_load=function(a,b,c,d,g){(a=a||null)||N.va("Stage load callback is undefined");b=b||5E3;c=c||0;d=d||100;100<d&&N.va("Max percentage must be less than 100");0>c&&N.va("Min percentage must be greater than 0");c>d&&N.va("Max percentage must be greater than min percentage");
var e=Ta.animate(c,d,b,function(b){b=b.toFixed();a(b);100==b&&(Ta.clear_animation(e),g&&g())})};p.test_performance=function(a){if(h.vE())if(ta.eA()){var b=Qa.gl_debug;Qa.gl_debug=!0;var c=Da.aO();za.Xz(null,c);var d=Da.xc(c,ya.zq),g=d.qa;for(c=0;5>c;c++)ma.Xj(d);Qa.gl_debug=b;window.setTimeout(function(){ja.LS(d);var b=d.fg;a(b,g.width*g.height*40/(b/1E3)/Math.pow(10,9))},100)}else a(0,0);else window.setTimeout(function(){p.test_performance(a)},100)};p.calc_vbo_garbage_byte_size=X.calc_vbo_garbage_byte_size;
p.show_vbo_garbage_info=X.show_vbo_garbage_info;p.print_batches_stat=function(){Ga.print_batches_stat()};p.start_debug=function(a){Ba=[];jb=!0;"string"===typeof a&&(a=M.a.require(a));for(var b in a)"function"===typeof a[b]&&(a[b]=P(a[b],b))};p.check_debug_result=function(){return jb};p.test=function(a,b){var c=ra.error,d=ra.Ma,g=ra.warn;ra.error=ra.Ma=function(){Na=ra.NE(arguments,"B4W ERROR").join(" ");ib=!0};ra.warn=function(){fa=ra.NE(arguments,"B4W WARN").join(" ");Xa=!0};ib=Xa=!1;try{b(),a=!0}catch(pb){jb=
!1,console.error('Test "'+a+'" failed with exception: "'+pb+'"'),ib=Xa=a=!1}ra.error=c;ra.Ma=d;ra.warn=g;return a};p.pix=function(a){var b=ia.bG(),c=ia.aG(),d=b/2,g=c/2;ia.resize(b,c,!1);b=za.get_active().sa.Ya;(c=Da.wP(b))||N.va("Couldn't find onscreen subscene");b=c.qa;d=ia.Wq(d,g,Ra,c.qa);d[1]=b.height-d[1];d=ma.Xw(b.Hf,d[0],d[1],1,1,fb);pa(a,d,1)};p.eqs=function(a,b,c,d){if(JSON.stringify(a)!=JSON.stringify(b))throw"debug.eqs: wrong result";Aa(c,d,"eqs")};p.eqv=pa;p.eqf=function(a,b,c,d,g){if("number"!=
typeof b||isNaN(b))throw"debug.eqf: wrong expected data type";if("number"!=typeof a||isNaN(a))throw"debug.eqf: wrong result data type";c=c?c:1E-6;if(b>a+c||b<a-c)throw"debug.eqf: wrong result";Aa(d,g,"eqf")};p.eq=function(a,b,c,d){if(a!==b)throw"debug.eq: wrong result";Aa(c,d,"eq")};p.ok=function(a,b,c){if(!a)throw"debug.ok: wrong result";Aa(b,c,"ok")};p.stat=function(a){var b=[];"string"===typeof a&&(a=M.a.require(a));for(var c in a)-1==Ba.indexOf(a[c])&&"function"===typeof a[c]&&b.push(c);if(b.length){ra.groupCollapsed(b.length+
" function(s) not tested.");for(a=0;a<b.length;a++)ra.Wd(b[a]);ra.groupEnd()}else ra.group("All functions were tested.")};p.show_normals=function(a,b,c,d){Ja();b=oa.Zb(a,b,"MAIN");if(!ka.ck(a)||!b)return ra.error("Normals are not avaliable for the dynamic object:",a.name),!1;var g=b.$a;if(!(g&&g.mc&&g.mc.a_position&&g.mc.a_tbn))return ra.error("Normals are not avaliable for the object:",a.name),!1;b=ka.Tz(g,"a_position");g=ka.Tz(g,"a_normal");a=Ca.get_tsr(a,Wa);var e=B.i(a,bb);e=I.inverse(e,bb);var h=
I.multiply(e,e,bb);Ua=S.create_line("normal_line");e=new Float32Array(2*b.length);for(var f=0;f<b.length;f+=3){var k=V;k[0]=b[f];k[1]=b[f+1];k[2]=b[f+2];var l=B.D(k,a,ab);e[2*f]=l[0];e[2*f+1]=l[1];e[2*f+2]=l[2];l=g.subarray(f,f+3);l=I.multiply(l,h,ab);l=I.normalize(l,l);l=I.scale(l,c,ab);k=I.add(k,l,ab);k=B.D(k,a,ab);e[2*f+3]=k[0];e[2*f+4]=k[1];e[2*f+5]=k[2]}c=oa.qv(Ua);ka.draw_line(c,e,!0);ma.bu(c);c.Qc.set([1,1,1,1]);c.ln=d};p.hide_normals=Ja});w.a=f},function(D,w,f){D=f(0);var M=f(15);f=Object(D.a)("__main",
function(f,n){function z(a,f,k){var c=e.get_canvas();if(c.toBlob)c.toBlob(a,f,k);else{k=atob(c.toDataURL(f,k).split(",")[1]);c=new Uint8Array(k.length);for(var l=0;l<k.length;l++)c[l]=k.charCodeAt(l);a(new Blob([c],{type:f||"image/png"}))}}var e=Object(M.a)(f),m=null,C="image/png",v=1,q="",r=!1,y=!1;n.canvas_data_url=function(a,e,f,c){r=y="undefined"===typeof c?c:!0;m=a;C=e||C;v=f||v};n.frame=function(){var a=m;a&&(r&&q&&URL.revokeObjectURL(q),z(function(e){navigator.msSaveOrOpenBlob?a(e):(q=URL.createObjectURL(e),
a(q))},C,v),m=null,C="image/png",v=1)}});w.a=f},function(D,w,f){D=f(0);var M=f(21),U=f(6),n=f(1);f=Object(D.a)("tsr",function(f,e){var m=Object(n.a)(f);e.create=U.b;e.from_values=U.e;e.copy=U.a;e.identity=U.m;e.set_sep=U.t;e.set_trans=U.v;e.set_scale=U.s;e.set_transcale=function(e,f){m.Ma("set_transcale is deprecated, use the tsr.set_trans and tsr.set_scale functions instead.");return U.w(e,f)};e.set_quat=U.r;e.get_trans_view=function(e){m.Ma("get_trans_view is deprecated, use the tsr.get_trans functions.");
return U.k(e)};e.get_trans=U.j;e.get_scale=U.i;e.get_quat_view=function(e){m.Ma("get_quat_view is deprecated, use the tsr.get_quat functions.");return U.h(e)};e.get_quat=U.g;e.invert=U.p;e.to_mat4=function(e,f){f||(f=M.create());U.x(e,f);return f};e.from_mat4=U.d;e.multiply=U.q;e.transform_vec3=U.D;e.transform_vec3_inv=U.E;e.transform_vectors=U.F;e.transform_dir_vectors=U.z;e.transform_dir_vec3=U.y;e.transform_tangents=U.C;e.translate=U.G;e.interpolate=function(e,f,m,n){n||(n=U.b());U.o(e,f,m,n);
return n}});w.a=f},function(D,w,f){D=f(0);var M=f(33),U=f(24),n=f(49),z=f(8),e=f(30),m=f(50),C=f(41),v=f(26),q=f(3);f=Object(D.a)("hmd",function(f,y){function a(){c.remove_sensor_manifold(null,"VR_CONTROLLERS")}function r(a,e){function f(d,g,e){if(0<e&&(e=b.get_active_camera())&&k.is_eye_camera(e)){var f=c.get_sensor_payload(d,g,1);d=c.get_sensor_payload(d,g,2);d=q.add(d,I,A);w.set_translation_v(e,d);if(f)if(1==a){f=z.multiply(ba,f,B);var l=q.transformQuat(D.AXIS_MY,f,A);k.set_vertical_axis(e,l);
w.set_rotation_v(e,f)}else if(2==a||3==a){d=w.get_rotation(e,J);d=z.invert(d,J);g=z.multiply(u,d,J);d=k.get_vertical_axis(e,A);Math.abs(d[2])<Math.PI/4?l=q.cross(d,D.AXIS_MY,ca):Math.abs(d[1])<Math.PI/4&&(l=q.cross(d,D.AXIS_Z,ca));q.normalize(l,l);g=q.transformQuat(l,g,L);var m=q.dot(d,g);g=q.scaleAndAdd(g,d,-m,L);q.normalize(g,g);d=q.cross(d,l,A);l=Math.acos(D.clamp(q.dot(l,g),0,1));d=D.sign(q.dot(g,d));F+=l*d;l=z.setAxisAngle(D.AXIS_Z,-F,J);3==a?f=z.multiply(l,f,ha):(d=D.quat_project(f,D.AXIS_MZ,
D.AXIS_Z,D.AXIS_Y,W),d=z.invert(d,W),f=z.multiply(d,f,W),f=z.multiply(l,f,ha));l=q.transformQuat(D.AXIS_MY,f,A);k.set_vertical_axis(e,l);w.set_rotation_v(e,f);z.copy(f,u)}}}if(e){var l=b.get_active_camera();l&&g.request_split_screen(function(){k.is_eye_camera(l)||(R=k.is_target_camera(l),O=k.is_hover_camera(l),K=k.is_static_camera(l),k.eye_setup(l));var a=c.create_elapsed_sensor(),b=c.create_hmd_position_sensor();u=w.get_rotation(l,u);c.create_sensor_manifold(null,"HMD_ROTATE_CAMERA",c.CT_CONTINUOUS,
[a,e,b],null,f)})}}var k=Object(M.a)(f),c=Object(U.a)(f),l=Object(n.a)(f),b=Object(e.a)(f),g=Object(m.a)(f),w=Object(C.a)(f),D=Object(v.a)(f),u=z.create(),F=0,R=!1,O=!1,K=!1,A=q.create(),ca=q.create(),L=q.create(),ha=z.create(),J=z.create(),W=z.create(),B=z.create(),ba=z.create(),I=q.create(),P={pivot:q.create()};y.HMD_NONE_MOUSE_ALL_AXES=0;y.HMD_ALL_AXES_MOUSE_NONE=1;y.HMD_ROLL_PITCH_MOUSE_YAW=2;y.HMD_ALL_AXES_MOUSE_YAW=3;y.enable_hmd=function(a){var b;if(b=l.get_device_by_type_element(l.DEVICE_HMD))b=
l.get_value_param(b,l.HMD_WEBVR_TYPE)&(l.HMD_WEBVR_MOBILE|l.HMD_WEBVR_DESKTOP|l.HMD_WEBVR1)?c.create_hmd_quat_sensor():c.create_gyro_quat_sensor(),r(a,b)};y.check_browser_support=function(){return!!l.can_use_device(l.DEVICE_HMD)};y.enable_controllers=function(b,g){a();if(b||g){var e=l.get_vr_controller_id(0),f=c.create_gamepad_position_sensor(e);e=c.create_gamepad_orientation_sensor(e);var d=l.get_vr_controller_id(1),k=c.create_gamepad_position_sensor(d);d=c.create_gamepad_orientation_sensor(d);c.create_sensor_manifold(null,
"VR_CONTROLLERS",c.CT_CONTINUOUS,[f,k,e,d],null,function(a,d){if(b){var e=c.get_sensor_payload(a,d,0),f=c.get_sensor_payload(a,d,2);q.add(I,e,e);w.set_translation_v(b,e);w.set_rotation_v(b,f)}g&&(e=c.get_sensor_payload(a,d,1),a=c.get_sensor_payload(a,d,3),q.add(I,e,e),w.set_translation_v(g,e),w.set_rotation_v(g,a))})}};y.disable_controllers=a;y.disable_hmd=function(){if(c.check_sensor_manifold(null,"HMD_ROTATE_CAMERA")){c.remove_sensor_manifold(null,"HMD_ROTATE_CAMERA");g.exit_split_screen();var a=
b.get_active_camera();R?k.target_setup(a,P):O?k.hover_setup(a,P):K&&k.static_setup(a,P);k.set_vertical_axis(a,D.AXIS_Z);var e=w.get_rotation(a,ha);w.set_rotation_v(a,e)}};y.set_rotate_quat=function(a){z.copy(a,ba)};y.get_rotate_quat=function(a){z.copy(ba,a);return a};y.set_position=function(a){z.copy(a,I)};y.get_position=function(a){z.copy(I,a);return a}});w.a=f},function(D,w,f){D=f(0);var M=f(9),U=f(10),n=f(23),z=f(1);f=Object(D.a)("sfx",function(e,f){var m=Object(M.a)(e),v=Object(U.a)(e),q=Object(n.a)(e),
r=Object(z.a)(e);f.play=function(e,a,f){q.play(e,a||0,f||0)};f.play_def=function(e){q.play_def(e)};f.is_playing=function(e){return q.is_playing(e)};f.stop=function(e){q.stop(e)};f.pause=function(e){q.gU(e)};f.resume=function(e){q.iU(e)};f.loop_stop=function(e,a,f){q.loop_stop(e,a||0,f||!1)};f.playrate=function(e,a){q.playrate(e,a)};f.get_playrate=function(e){return q.get_playrate(e)};f.cyclic=function(e,a){q.cyclic(e,a)};f.is_cyclic=function(e){return q.is_cyclic(e)};f.listener_reset_speed=function(){q.listener_stride()};
f.listener_stride=function(){q.listener_stride()};f.speaker_reset_speed=function(e){q.speaker_stride(e)};f.speaker_stride=function(e){q.speaker_stride(e)};f.get_volume=function(e){return e&&"object"===typeof e?q.get_volume(e):q.uQ()};f.set_volume=function(e,a){e&&"object"===typeof e?q.set_volume(e,a):q.FT(a)};f.mute=function(e,a){e&&"object"===typeof e?q.mute(e,a):q.fS(a)};f.is_muted=function(e){return e&&"object"===typeof e?q.is_muted(e):q.iR()};f.get_speaker_objects=function(){return q.get_speaker_objects().slice(0)};
f.check_active_speakers=q.check_active_speakers;f.set_compressor_params=function(e){q.set_compressor_params(v.get_active(),e)};f.get_compressor_params=function(){return q.get_compressor_params(v.get_active())};f.duck=function(e,a,f){e&&"object"===typeof e?q.duck(e,a,f):q.cP(a,f)};f.unduck=function(e){e&&"object"===typeof e?q.unduck(e):q.GU()};f.apply_playlist=q.apply_playlist;f.clear_playlist=q.clear_playlist;f.detect_audio_container=q.detect_audio_container;f.detect_video_container=q.detect_video_container;
f.set_positional_params=q.set_positional_params;f.get_positional_params=q.get_positional_params;f.set_filter_params=q.set_filter_params;f.get_filter_params=q.get_filter_params;f.get_filter_freq_response=q.get_filter_freq_response;f.get_duration=function(e){return e&&m.is_speaker(e)?q.get_duration(e):(r.error('Object "'+(e?e.name:void 0)+'" is not a valid speaker'),0)}});w.a=f},function(D,w,f){D=f(0);var M=f(38),U=f(9),n=f(1);f=Object(D.a)("animation",function(f,e){var m=Object(M.a)(f),C=Object(U.a)(f),
v=Object(n.a)(f);e.SLOT_0=m.SLOT_0;e.SLOT_1=m.SLOT_1;e.SLOT_2=m.SLOT_2;e.SLOT_3=m.SLOT_3;e.SLOT_4=m.SLOT_4;e.SLOT_5=m.SLOT_5;e.SLOT_6=m.SLOT_6;e.SLOT_7=m.SLOT_7;e.SLOT_ALL=m.SLOT_ALL;e.OBJ_ANIM_TYPE_NONE=m.OBJ_ANIM_TYPE_NONE;e.OBJ_ANIM_TYPE_ARMATURE=m.OBJ_ANIM_TYPE_ARMATURE;e.OBJ_ANIM_TYPE_OBJECT=m.OBJ_ANIM_TYPE_OBJECT;e.OBJ_ANIM_TYPE_VERTEX=m.OBJ_ANIM_TYPE_VERTEX;e.OBJ_ANIM_TYPE_SOUND=m.OBJ_ANIM_TYPE_SOUND;e.OBJ_ANIM_TYPE_PARTICLES=m.OBJ_ANIM_TYPE_PARTICLES;e.OBJ_ANIM_TYPE_MATERIAL=m.OBJ_ANIM_TYPE_MATERIAL;
e.OBJ_ANIM_TYPE_STATIC=m.OBJ_ANIM_TYPE_STATIC;e.AB_CYCLIC=m.AB_CYCLIC;e.AB_FINISH_RESET=m.AB_FINISH_RESET;e.AB_FINISH_STOP=m.AB_FINISH_STOP;e.is_animated=function(e){return m.is_animated(e)};e.get_anim_names=function(e){return m.qH(e)?m.get_anim_names(e):[]};e.get_current_anim_name=function(e,f){if(!m.is_animated(e))return null;f=f||m.SLOT_0;return m.SP(e,f)};e.apply=function(e,f,n){if(n>m.SLOT_7)v.error("Can't apply animation to slot "+n+' for object "'+e.name+'". Object can have maximum of 8 animation slots');
else{n=n||m.SLOT_0;if(m.is_animated(e)){var a=m.get_slot_num_by_anim(e,f);if(-1!=a&&a!=n){v.error('Animation "'+f+'" is already applied to object "'+e.name+'" (slot "'+a+'").');return}}m.wJ(e,f)?m.apply(e,null,f,n):v.error('No fcurves in action "'+f+'"')}};e.apply_ext=function(e,f,n){if(n>m.SLOT_7)v.error("Can't apply animation to slot "+n+' for object "'+e.name+'". Object can have maximum of 8 animation slots');else{n=n||m.SLOT_0;var a=f[0];m.wJ(e,a)?m.apply(e,f.slice(1),a,n):v.error('No fcurves in action "'+
a+'"')}};e.remove=function(e){m.remove(e)};e.remove_slot_animation=function(e,f){m.is_animated(e)&&(f=f||m.SLOT_0,m.remove_slot_animation(e,f))};e.apply_def=function(e){m.apply_def(e)};e.play=function(e,f,n){m.is_animated(e)?(n=n||m.SLOT_0,m.play(e,f,n),m.aV(e,0,n,!0)):v.error('Object "'+e.name+'" has no applied animation')};e.stop=function(e,f){m.is_animated(e)&&(f=f||m.SLOT_0,m.stop(e,f))};e.is_play=function(e,f){if(!m.is_animated(e))return!1;f=f||m.SLOT_0;return m.is_play(e,f)};e.set_frame=function(e,
f,n){m.is_animated(e)&&(n=n||m.SLOT_0,m.set_frame(e,f,n))};e.set_first_frame=function(e,f){m.is_animated(e)&&m.set_first_frame(e,f)};e.set_last_frame=function(e,f){if(m.is_animated(e)){f=f||m.SLOT_0;var n=m.get_anim_start_frame(e,f),a=m.get_anim_length(e,f);m.set_frame(e,n+a-m.fK,f)}};e.get_frame=function(e,f){if(!m.is_animated(e))return 0;f=f||m.SLOT_0;return m.cA(e,f)};e.set_speed=function(e,f,n){m.is_animated(e)&&(n=n||m.SLOT_0,m.set_speed(e,f||1,n))};e.get_speed=function(e,f){if(!m.is_animated(e))return 0;
f=f||m.SLOT_0;return e.Za[f]?m.get_speed(e,f):0};e.get_anim_start_frame=function(e,f){return m.is_animated(e)&&(f=f||m.SLOT_0,e.Za[f])?m.get_anim_start_frame(e,f):-1};e.get_anim_length=function(e,f){return m.is_animated(e)&&(f=f||m.SLOT_0,e.Za[f])?m.get_anim_length(e,f):-1};e.set_behavior=function(e,f,n){m.is_animated(e)&&(n=n||m.SLOT_0,m.set_behavior(e,f,n))};e.get_behavior=function(e,f){if(!m.is_animated(e))return null;f=f||m.SLOT_0;return m.get_behavior(e,f)};e.apply_smoothing=function(e,f,n,a){a=
a||m.SLOT_0;m.is_animated(e)&&m.apply_smoothing(e,f,n,a)};e.frame_to_sec=function(e){return m.frame_to_sec(e)};e.get_slot_num_by_anim=function(e,f){return m.is_animated(e)&&f?m.get_slot_num_by_anim(e,f):-1};e.get_anim_type=function(e,f){return m.is_animated(e)?m.get_anim_type(e,f):null};e.apply_to_first_empty_slot=function(e,f){return m.apply_to_first_empty_slot(e,f)};e.get_skel_mix_factor=function(e){return e.ka.Zf};e.set_skel_mix_factor=function(e,f,n,a){C.is_armature(e)?(f=Math.min(Math.max(f,
0),1),e.ka.Zf!=f&&m.set_skel_mix_factor(e,f,n||0,a||null)):v.error("Can't blend animation. Object \""+e.name+'" is not armature')};e.set_skeletal_slots=function(e,f,m,a){f=void 0==f?-1:f;m=void 0==f?-1:m;var n=e.ka.Mi;0<=f&&(n[0]=f);0<=m&&(n[1]=m);e.ka.Zf=a||0};e.get_first_skeletal_slot=function(e){return e.ka.Mi[0]};e.get_second_skeletal_slot=function(e){return e.ka.Mi[1]};e.mix_from_cur_pos=function(e,f,n,a){m.mix_from_cur_pos(e,f,n||0,a||null)}});w.a=f},function(D,w,f){D.exports=f(85)},function(D,
w,f){function M(){var a=L,b=c.get_url_params();b&&"show_fps"in b&&(a=!0);c.init({canvas_container_id:"main_canvas_container",callback:U,physics_enabled:!0,show_fps:a,alpha:!0,assets_dds_available:!L,assets_min50_available:!L,console_verbose:L})}function U(c,d){d?(O.create_preloader(),c.addEventListener("mousedown",y),c.addEventListener("touchstart",y),c.addEventListener("mouseup",a),c.addEventListener("touchend",a),c.addEventListener("mousemove",T),c.addEventListener("touchmove",T),window.onresize=
b.resize_to_container,b.resize_to_container(),E.load(H+"environment.json",z,n)):console.log("b4w init failure")}function n(a){O.update_preloader(a)}function z(){c.enable_camera_controls(!1,!1,!1,b.get_canvas());e();var a=K.get_object_by_name("spawner");A.get_translation(a,d);var g=document.getElementById("hienthongtin"),f=document.getElementById("hienthongtin_childaudio");g.style.display="block";var k=document.getElementById("nuttat");k.style.display="block";k.addEventListener("click",function(){k.style.bottom=
"-100px";g.style.top="-100%";document.getElementById("noidungthongtin").src="";document.getElementById("audio1").src="";f.style.display="none"},!1);document.getElementById("diemthongtin").addEventListener("click",function(){k.style.bottom="0px";g.style.top="45%";f.style.display="none";document.getElementById("noidungthongtin").src="https://dienmaycholon.vn/sofa/sofa-3-cho-bobby-v1212-xam";document.getElementById("audio1").src="./assets/audio/hoboi-vitrinhin.mp3";f.style.display="block"==f.style.display?
"none":"block"},!1)}function e(){document.getElementById("controls-container").style.display="block";m();document.getElementById("caiban").addEventListener("click",function(){E.load(H+"bed.json",C,null,null,!0)});document.getElementById("caighe").addEventListener("click",function(){E.load(H+"chair.json",C,null,null,!0)});document.getElementById("delete").addEventListener("click",function(){if(Y){var a=K.get_object_data_id(Y);E.unload(a);Y=null}});document.getElementById("phongto").addEventListener("click",
function(){if(Y){var a=++ba/20;A.set_scale_rel(Y,a)}});document.getElementById("thunho").addEventListener("click",function(){if(Y){var a=--ba/20;A.set_scale_rel(Y,a)}});document.getElementById("xoay1").addEventListener("click",function(){Y&&r(Y,B)});document.getElementById("xoay2").addEventListener("click",function(){Y&&r(Y,-B)})}function m(){for(var a=["delete","phongto","thunho","xoay1","xoay2"],b=0;b<a.length;b++){var c=a[b];document.getElementById(c).addEventListener("mousedown",function(a){a.target.parentNode.classList.add("active")});
document.getElementById(c).addEventListener("mouseup",function(a){a.target.parentNode.classList.remove("active")});document.getElementById(c).addEventListener("touchstart",function(a){a.target.parentNode.classList.add("active")});document.getElementById(c).addEventListener("touchend",function(a){a.target.parentNode.classList.remove("active")})}}function C(a){a=K.get_all_objects("ALL",a);for(var b=0;b<a.length;b++){var c=a[b];if(R.has_physics(c)){R.enable_simulation(c);var e=g.create_collision_sensor(c,
"FURNITURE"),f=g.create_selection_sensor(c,!0);c==Y&&g.set_custom_sensor(f,1);g.create_sensor_manifold(c,"COLLISION",g.CT_CONTINUOUS,[e,f],v,q);(e=F.get_parent(c))&&F.is_armature(e)?A.set_translation_v(e,d):A.set_translation_v(c,d)}F.is_mesh(c)&&K.show_object(c)}}function v(a){return a[1]}function q(a,b,c){1==c&&(g.get_sensor_value(a,b,0)?K.set_outline_color(J):K.set_outline_color(ha))}function r(a,b){var c=F.get_parent(a);if(c&&F.is_armature(c)){var d=A.get_rotation(c,Aa);ca.rotateZ(d,b,d);A.set_rotation_v(c,
d)}else d=A.get_rotation(a,Aa),ca.rotateZ(d,b,d),A.set_rotation_v(a,d);k(a)}function y(a){N=!0;a.preventDefault&&a.preventDefault();var b=ea.get_coords_x(a);a=ea.get_coords_y(a);var c=K.pick_object(b,a);Y!=c&&(Y&&K.clear_outline_anim(Y),c&&K.apply_outline_anim(c,1,1,0),Y=c);if(Y){c=K.get_active_camera();var d=F.get_parent(Y);d&&F.is_armature(d)?A.get_translation(d,la):A.get_translation(Y,la);l.project_point(c,la,t);t[0]=b-t[0];t[1]=a-t[1]}}function a(){N=!1;oa||(c.enable_camera_controls(),oa=!0)}
function T(a){if(N&&Y){oa&&(c.disable_camera_controls(),oa=!1);var b=K.get_active_camera(),d=ea.get_coords_x(a);a=ea.get_coords_y(a);0<=d&&0<=a&&(d-=t[0],a-=t[1],d=l.calc_ray(b,d,a,Ja),d=u.get_pline_directional_vec(d,la),b=A.get_translation(b,na),u.set_pline_initial_point(Ja,b),u.set_pline_directional_vec(Ja,d),(b=u.line_plane_intersect(W,0,Ja,pa))&&0>d[2]&&((d=F.get_parent(Y))&&F.is_armature(d)?A.set_translation_v(d,b):A.set_translation_v(Y,b),k(Y)))}}function k(a){var b=A.get_object_bounding_box(a),
c=F.get_parent(a),d=c&&F.is_armature(c)?A.get_translation(c,la):A.get_translation(a,la);b.max_x>I?d[0]-=b.max_x-I:b.min_x<P&&(d[0]+=P-b.min_x);b.max_y>p?d[1]-=b.max_y-p:b.min_y<da&&(d[1]+=da-b.min_y);c&&F.is_armature(c)?A.set_translation_v(c,d):A.set_translation_v(a,d)}Object.defineProperty(w,"__esModule",{value:!0});w.init=M;D=f(86);var c=D.a.bM,l=D.a.qa;w=D.a.zN;var b=D.a.BN,g=D.a.controls,E=D.a.data,ea=D.a.aS,u=D.a.TR,F=D.a.Qb,R=D.a.xa,O=D.a.IS,K=D.a.Pl,A=D.a.transform,ca=D.a.quat,L="DEBUG"===
D.a.version.type(),ha=[0,1,0],J=[1,0,0],W=[0,0,1],B=Math.PI/20,ba=20,I=8,P=-8,p=8,da=-8,H=w.get_std_assets_path()+"tutorials/cartoon_interior/",t=new Float32Array(2),d=new Float32Array(3),la=new Float32Array(3),na=new Float32Array(3),pa=new Float32Array(3),Aa=new Float32Array(4),Ja=u.create_pline(),N=!1,oa=!0,Y=null;M()},function(D,w,f){D=f(32);var M=f(87),U=f(97),n=f(98),z=f(99),e=f(100),m=f(81),C=f(101),v=f(102),q=f(103),r=f(104),y=f(105),a=f(106),T=f(69),k=f(107),c=f(83),l=f(108),b=f(109),g=f(33),
E=f(76),ea=f(67),u=f(40),F=f(24),R=f(77),O=f(78),K=f(110),A=f(111),ca=f(49),L=f(112),ha=f(113),J=f(61),W=f(114),B=f(115),ba=f(116),I=f(117),P=f(118),p=f(54),da=f(119),H=f(30),t=f(50),d=f(82),la=f(120),na=f(68),pa=f(41),Aa=f(80),Ja=f(26),N=f(121),oa=f(1),Y=f(3),Q=f(7),Ha=f(27),ia=f(21),Ma=f(8);D.a.bM=M.a;D.a.$W=U.a;D.a.zh=n.a;D.a.KX=z.a;D.a.LX=e.a;D.a.PX=m.a;D.a.QX=C.a;D.a.oY=v.a;D.a.aS=q.a;D.a.rY=r.a;D.a.IS=y.a;D.a.DY=a.a;D.a.Lx=T.a;D.a.anchors=k.a;D.a.Xk=c.a;D.a.SW=l.a;D.a.se=b.a;D.a.qa=g.a;D.a.zN=
E.a;D.a.dX=ea.a;D.a.BN=u.a;D.a.controls=F.a;D.a.data=R.a;D.a.debug=O.a;D.a.gf=K.a;D.a.RX=A.a;D.a.input=ca.a;D.a.hj=L.a;D.a.jY=ha.a;D.a.lY=J.a;D.a.nY=W.a;D.a.TR=B.a;D.a.qY=ba.a;D.a.Qb=I.a;D.a.tY=P.a;D.a.xa=p.a;D.a.xY=da.a;D.a.Pl=H.a;D.a.screen=t.a;D.a.Ra=d.a;D.a.Ua=la.a;D.a.time=na.a;D.a.transform=pa.a;D.a.PY=Aa.a;D.a.TY=Ja.a;D.a.version=N.a;D.a.print=oa.a;D.a.vec3=Y;D.a.vec4=Q;D.a.mat3=Ha;D.a.mat4=ia;D.a.quat=Ma;D.a.register("vec3",function(a){for(var b in Y)a[b]=Y[b]});D.a.register("vec4",function(a){for(var b in Q)a[b]=
Q[b]});D.a.register("mat3",function(a){for(var b in Ha)a[b]=Ha[b]});D.a.register("mat4",function(a){for(var b in ia)a[b]=ia[b]});D.a.register("quat",function(a){for(var b in Ma)a[b]=Ma[b]});w.a=D.a},function(D,w,f){D=f(0);var M=f(33),U=f(76),n=f(67),z=f(40),e=f(24),m=f(77),C=f(78),v=f(49),q=f(61),r=f(54),y=f(1),a=f(50),T=f(30),k=f(41),c=f(26),l=f(3);f=Object(D.a)("app",function(b,g){function f(){var a=Aa.is_paused();document.addEventListener("visibilitychange",function(){document.hidden?(a=Aa.is_paused(),
Aa.pause()):a||Aa.resume()},!1)}function w(){var a=0,b=t.get_container(),c=Aa.is_paused(),d=!0;Aa.append_loop_cb(function(){if(0==a%10){var g=b.getBoundingClientRect();g.top>window.innerHeight||0>g.bottom?(d&&(c=Aa.is_paused()),Aa.pause(),d=!1):c||d||(Aa.resume(),d=!0)}a++})}function u(a,b,c,d){var g=document.createElement("canvas"),e=document.getElementById(a);e||(N.error('Warning: canvas container "'+a+'" not found, appending to body'),e=document.body);g.style.position="absolute";g.style.left=0;
g.style.top=0;g.style.width=e.offsetWidth+"px";g.style.height=e.offsetHeight+"px";g.width=e.offsetWidth*window.devicePixelRatio;g.height=e.offsetHeight*window.devicePixelRatio;b?(a=document.createElement("canvas"),a.style.position="absolute",g.style.left=0,g.style.top=0,a.style.pointerEvents="none"):a=null;e.appendChild(g);if(!Aa.init(g,a))return c&&I("Browser could not initialize WebGL","For more info visit","https://www.blend4web.com/doc/en/problems_and_solutions.html#problems-upon-startup",d),
!1;a&&t.insert_to_container(a,"LAST");return!0}function F(a,b){a?(b&&(document.getElementById(b).style.display="block"),Ma=document.getElementById(a)):(Ma=document.createElement("div"),Ma.innerHTML=0,Ma.style.cssText="position:absolute;font-family: Arial, sans-serif;top: 20px;right: 20px;text-shadow: 0px 0px 6px #000;font-size: 40px;line-height: 50px;font-weight: bold;color: #fff;",t.insert_to_container(Ma,"JUST_AFTER_CANVAS"))}function D(a,b){a=String(a);b&&(a+="/"+String(b));Ma.innerHTML=a}function O(a){a=
document.getElementById(a);var b=a.cloneNode(!0);a.parentNode.replaceChild(b,a);return b}function K(a,b,c){var d=Math.max(p.hover_get_distance(a),1),g=Q.get_rotation(a,S);b=Ha.quat_to_dir(g,b,ka);b[2]=0;l.normalize(b,b);l.scale(b,d*c,b);c=Q.get_translation(a,qa);l.add(c,b,c);p.set_translation(a,c)}function A(a,b){var c=p.hover_get_vertical_limits(a,xa);if(c.up!=c.down){var d=p.get_camera_angles(a,ta)[1];c=(c.down-d)/(c.down-c.up);d=p.hover_get_distance_limits(a,xa);c=Math.max(c,2/d.max);p.rotate_camera(a,
0,c*b)}}function ca(a,b,c,d){Q.move_local(a,5*b,5*c,5*d)}function L(a,b,c){var d=p.target_get_distance(a),g=Math.abs(b);c=Math.pow(g*c,1-Math.pow(g*c,.15));Q.move_local(a,0,0,0>b?.001<d?-d*c:0:c/(1-c)*d)}function ha(a,b,c,d,g){for(a=d*c;0<b;--b)d+=a,g+=a,a=d*c;return g}function J(a,b,c,d,g,e){e?(g=p.target_get_pivot(a,ka),e=p.get_translation(a),g=l.dist(g,e)+d,d=0<b?ha(a,b,-c,g,d):ha(a,-b,c/(1-c),g,d)):d-=b*g*c;return d}function W(a,b,c,g,e,f){function h(a,b,c,g){if(1==c){p.get_velocities(a,w);var e=
z?.003*w.trans:.003*w.rot;c=d.get_sensor_value(a,b,0);d.get_sensor_payload(a,b,0).gesture===d.PL_SINGLE_TOUCH_MOVE?(Da+="X"==g?-c*e:0,ua+="Y"==g?-c*e:0):d.get_sensor_payload(a,b,0).gesture===d.PL_MULTITOUCH_MOVE_PAN&&(a=z?.003*w.rot:7.5E-4*w.trans,Ma+="X"==g?-c*a:0,nb+="Y"==g?-c*a:0)}}function k(a,b,c,g){if(1==c){c=d.get_sensor_value(a,b,1);p.get_velocities(a,w);if(z)e=.003*w.trans,f=7.5E-4*w.rot;else var e=.003*w.rot,f=7.5E-4*w.trans;if(1===d.get_sensor_payload(a,b,0).which)ra+="X"==g?-c*e:0,ma+=
"Y"==g?-c*e:0;else if(2===d.get_sensor_payload(a,b,0).which||3===d.get_sensor_payload(a,b,0).which)Aa+="X"==g?-c*f:0,ha+="Y"==g?-c*f:0}}function m(a){return a[0]&&(a[1]||a[2]||-.1>a[3])}function t(a){return a[0]&&(a[1]||a[2]||.1<a[3])}function n(a){return a[0]&&(a[1]||-.1>a[2])}function u(a){return a[0]&&(a[1]||.1<a[2])}function r(a){return a[0]&&(a[1]||a[2]||a[3])}function q(a,b,c){if(1==c)switch(c=d.get_sensor_value(a,b,0),p.get_velocities(a,w),b){case "FORWARD":C?D[0]=1:z?(b=p.get_camera_angles(a,
ta)[1],b=Math.abs(b)>=Math.PI/4?Ha.AXIS_Y:Ha.AXIS_MZ,K(a,b,.5*w.trans*c)):y?L(a,-w.zoom,c):ca(a,0,0,-w.trans*c);break;case "BACKWARD":C?D[0]=-1:z?(b=p.get_camera_angles(a,ta)[1],b=Math.abs(b)>=Math.PI/4?Ha.AXIS_MY:Ha.AXIS_Z,K(a,b,.5*w.trans*c)):y?L(a,w.zoom,c):ca(a,0,0,w.trans*c);break;case "UP":z?A(a,30*-w.zoom*c):C||ca(a,0,w.trans*c,0);break;case "DOWN":z?A(a,30*w.zoom*c):C||ca(a,0,-w.trans*c,0);break;case "LEFT":C?D[1]=1:z?K(a,Ha.AXIS_MX,.5*w.trans*c):ca(a,-w.trans*c,0,0);break;case "RIGHT":C?
D[1]=-1:z?K(a,Ha.AXIS_X,.5*w.trans*c):ca(a,w.trans*c,0,0);break;case "ROT_LEFT":y?p.rotate_camera(a,.75*-w.rot*c,0):p.rotate_camera(a,.75*w.rot*c,0);break;case "ROT_RIGHT":y?p.rotate_camera(a,.75*w.rot*c,0):p.rotate_camera(a,.75*-w.rot*c,0);break;case "ROT_UP":y?p.rotate_camera(a,0,.75*-w.rot*c):p.rotate_camera(a,0,.75*w.rot*c);break;case "ROT_DOWN":y?p.rotate_camera(a,0,.75*w.rot*c):p.rotate_camera(a,0,.75*-w.rot*c)}else switch(b){case "FORWARD":case "BACKWARD":C&&(D[0]=0);break;case "LEFT":case "RIGHT":C&&
(D[1]=0)}C&&(Ja.set_character_move_dir(C,D[0],D[1]),a=p.get_camera_angles_char(a,ja),Ja.set_character_rotation_h(C,a[0]),Ja.set_character_vert_move_dir_angle(C,a[1]))}Ea=a;X=b;Ga=c;Fa=g;wa=e;La=f;var v=Y.get_active_camera();B(v);var y=!1,C=null,z=!1;switch(p.get_move_style(v)){case p.MS_TARGET_CONTROLS:y=!a;break;case p.MS_EYE_CONTROLS:C=Y.get_first_character();break;case p.MS_STATIC:return;case p.MS_HOVER_CONTROLS:z=!0}var w=p.get_velocities(v,va);a=d.create_elapsed_sensor();if(Ja.has_simulated_physics(v)){var F=
d.create_collision_sensor(v,null,!0);d.create_sensor_manifold(v,"CAMERA_COLLISION",d.CT_POSITIVE,[F],null,function(a,b){var c=d.get_sensor_payload(a,b,0).coll_dist;if(0>c){var g=d.get_sensor_payload(a,b,0).coll_norm;b=ka;l.scale(g,-.25*c,b);c=Q.get_translation(a,qa);l.add(c,b,c);Q.set_translation_v(a,c)}})}if(C){F=Q.get_translation(v);var I=Q.get_rotation(v);I=Ha.cam_quat_to_mesh_quat(I);F[2]-=.5;Ja.set_transform(C,F,I);H.append_stiff_trans(v,C,[0,0,.5]);var D=new Float32Array(2),E=!0;Ja.set_character_move_type(C,
Ja.CM_FLY);d.create_kb_sensor_manifold(v,"TOGGLE_CHAR_MOVE_TYPE",d.CT_SHOT,d.KEY_C,function(){E=!E;Ja.set_character_move_type(C,E?Ja.CM_FLY:Ja.CM_WALK)})}var P,R,O,N,na,ba,T,la,da;f?F=I=ba=T=la=da=d.create_custom_sensor(0):(da=pa.check_enable_gamepad_indices(),I=da.length?da[da.length-1]:0,F=d.create_gamepad_btn_sensor(pa.GMPD_BUTTON_6,I),I=d.create_gamepad_btn_sensor(pa.GMPD_BUTTON_7,I),ba=d.create_gamepad_axis_sensor(pa.GMPD_AXIS_0,da),T=d.create_gamepad_axis_sensor(pa.GMPD_AXIS_1,da),la=d.create_gamepad_axis_sensor(pa.GMPD_AXIS_2,
da),da=d.create_gamepad_axis_sensor(pa.GMPD_AXIS_3,da));b?b=P=R=O=N=na=d.create_custom_sensor(0):(b=d.create_keyboard_sensor(d.KEY_W),P=d.create_keyboard_sensor(d.KEY_S),R=d.create_keyboard_sensor(d.KEY_A),O=d.create_keyboard_sensor(d.KEY_D),N=d.create_keyboard_sensor(d.KEY_R),na=d.create_keyboard_sensor(d.KEY_F));var W=d.create_keyboard_sensor(d.KEY_UP),M=d.create_keyboard_sensor(d.KEY_DOWN),G=d.create_keyboard_sensor(d.KEY_LEFT),ea=d.create_keyboard_sensor(d.KEY_RIGHT);z||(d.create_sensor_manifold(v,
"FORWARD",d.CT_CONTINUOUS,[a,b,T],n,q),d.create_sensor_manifold(v,"BACKWARD",d.CT_CONTINUOUS,[a,P,T],u,q));y?(d.create_sensor_manifold(v,"ROT_UP",d.CT_CONTINUOUS,[a,W,N,da],m,q),d.create_sensor_manifold(v,"ROT_DOWN",d.CT_CONTINUOUS,[a,M,na,da],t,q),d.create_sensor_manifold(v,"ROT_LEFT",d.CT_CONTINUOUS,[a,G,R,la],m,q),d.create_sensor_manifold(v,"ROT_RIGHT",d.CT_CONTINUOUS,[a,ea,O,la],t,q)):z?(d.create_sensor_manifold(v,"LEFT",d.CT_CONTINUOUS,[a,G,R,ba],m,q),d.create_sensor_manifold(v,"RIGHT",d.CT_CONTINUOUS,
[a,ea,O,ba],t,q),d.create_sensor_manifold(v,"FORWARD",d.CT_CONTINUOUS,[a,W,b,T],m,q),d.create_sensor_manifold(v,"BACKWARD",d.CT_CONTINUOUS,[a,M,P,T],t,q),d.create_sensor_manifold(v,"UP",d.CT_CONTINUOUS,[a,na,da],u,q),d.create_sensor_manifold(v,"DOWN",d.CT_CONTINUOUS,[a,N,da],n,q)):(d.create_sensor_manifold(v,"UP",d.CT_CONTINUOUS,[a,N,F],r,q),d.create_sensor_manifold(v,"DOWN",d.CT_CONTINUOUS,[a,na,I],r,q),d.create_sensor_manifold(v,"LEFT",d.CT_CONTINUOUS,[a,R,ba],n,q),d.create_sensor_manifold(v,"RIGHT",
d.CT_CONTINUOUS,[a,O,ba],u,q),d.create_sensor_manifold(v,"ROT_UP",d.CT_CONTINUOUS,[a,W,da],n,q),d.create_sensor_manifold(v,"ROT_DOWN",d.CT_CONTINUOUS,[a,M,da],u,q),d.create_sensor_manifold(v,"ROT_LEFT",d.CT_CONTINUOUS,[a,G,la],n,q),d.create_sensor_manifold(v,"ROT_RIGHT",d.CT_CONTINUOUS,[a,ea,la],u,q));if(!c){var S=0;c=d.create_mouse_wheel_sensor(g);var U=0;T=d.create_touch_zoom_sensor(g);d.create_sensor_manifold(v,"MOUSE_WHEEL",d.CT_LEVEL,[c],null,function(a,b,c){1==c&&(b=d.get_sensor_value(a,b,0),
p.get_velocities(a,w),y||z?S=J(a,b,w.zoom,S,2,y):(w.trans*=1+b*w.zoom,p.set_velocities(a,w)))});d.create_sensor_manifold(v,"TOUCH_ZOOM",d.CT_LEVEL,[T],null,function(a,b,c){1==c&&(c=d.get_sensor_value(a,b,0),p.get_velocities(a,w),d.get_sensor_payload(a,b,0)===d.PL_MULTITOUCH_MOVE_ZOOM&&(U=J(a,c,.03*w.zoom,U,2,y)))});d.create_sensor_manifold(v,"ZOOM_INTERPOL",d.CT_POSITIVE,[a],null,function(a,b){if(y||z)if(1E-5<Math.abs(S)||1E-5<Math.abs(U)){var c=d.get_sensor_value(a,b,0);b=Ha.smooth(S,0,c,.1*ia);
S-=b;c=Ha.smooth(U,0,c,.15*ia);U-=c;z?A(a,-(b+c)):(b=p.target_get_distance(a)+b+c,b=Math.max(b,.001),p.target_set_distance(a,b))}else U=S=0})}var ra=0,ma=0,Aa=0,ha=0,xa=0,oa=0;f||(f=function(a){p.get_velocities(a,w);xa+=.002*w.trans},c=function(a){p.get_velocities(a,w);oa+=.05*w.zoom},T=function(a){p.get_velocities(a,w);xa-=.002*w.trans},da=function(a){p.get_velocities(a,w);oa-=.05*w.zoom},y?(d.create_sensor_manifold(v,"GMPD_PAN_Y_POS",d.CT_CONTINUOUS,[F],null,c),d.create_sensor_manifold(v,"GMPD_PAN_Y_NEG",
d.CT_CONTINUOUS,[I],null,da),d.create_sensor_manifold(v,"GMPD_PAN_X_POS",d.CT_CONTINUOUS,[ba],function(a){return-.1>a[0]},T),d.create_sensor_manifold(v,"GMPD_PAN_X_NEG",d.CT_CONTINUOUS,[ba],function(a){return.1<a[0]},f)):z&&(d.create_sensor_manifold(v,"GMPD_PAN_X_POS",d.CT_CONTINUOUS,[la],function(a){return-.1>a[0]},T),d.create_sensor_manifold(v,"GMPD_PAN_X_NEG",d.CT_CONTINUOUS,[la],function(a){return.1<a[0]},f)));if(e){e=d.create_mouse_move_sensor("X",window);f=d.create_mouse_move_sensor("Y",window);
F=d.create_mouse_click_sensor(g);c=d.create_mouse_click_sensor(window);var za=!1;I=function(a){a[2]?za=!0:a[0]||(za=!1);return za&&a[0]};d.create_sensor_manifold(v,"MOUSE_X",d.CT_POSITIVE,[c,e,F],I,k,"X");d.create_sensor_manifold(v,"MOUSE_Y",d.CT_POSITIVE,[c,f,F],I,k,"Y");e=pa.get_device_by_type_element(pa.DEVICE_MOUSE,window);pa.switch_prevent_default(e,!1)}else e=d.create_mouse_move_sensor("X",g),f=d.create_mouse_move_sensor("Y",g),F=d.create_mouse_click_sensor(g),d.create_sensor_manifold(v,"MOUSE_X",
d.CT_POSITIVE,[F,e],null,k,"X"),d.create_sensor_manifold(v,"MOUSE_Y",d.CT_POSITIVE,[F,f],null,k,"Y");var Da=0,ua=0,Ma=0,nb=0;e=d.create_touch_move_sensor("X",g);g=d.create_touch_move_sensor("Y",g);d.create_sensor_manifold(v,"TOUCH_X",d.CT_POSITIVE,[e],null,h,"X");d.create_sensor_manifold(v,"TOUCH_Y",d.CT_POSITIVE,[g],null,h,"Y");d.create_sensor_manifold(v,"ROT_TRANS_INTERPOL",d.CT_POSITIVE,[a],null,function(a,b){if(1E-5<Math.abs(ra)||1E-5<Math.abs(ma)||1E-5<Math.abs(Da)||1E-5<Math.abs(ua)||1E-5<Math.abs(Aa)||
1E-5<Math.abs(ha)||1E-5<Math.abs(Ma)||1E-5<Math.abs(nb)||1E-5<Math.abs(xa)||1E-5<Math.abs(oa)){var c=d.get_sensor_value(a,b,0),g=Ha.smooth(ra,0,c,.08*ia),e=Ha.smooth(ma,0,c,.08*ia);ra-=g;ma-=e;var f=Ha.smooth(Da,0,c,.12*ia),h=Ha.smooth(ua,0,c,.12*ia);Da-=f;ua-=h;b=Ha.smooth(Aa,0,c,.08*ia);var k=Ha.smooth(ha,0,c,.08*ia);Aa-=b;ha-=k;var l=Ha.smooth(Ma,0,c,.12*ia),m=Ha.smooth(nb,0,c,.12*ia);Ma-=l;nb-=m;var t=Ha.smooth(xa,0,c,.08*ia);c=Ha.smooth(oa,0,c,.08*ia);xa-=t;oa-=c;y?(p.rotate_camera(a,g+f,e+h),
e=p.target_get_distance(a),p.target_pan_pivot(a,e*(b+l+t),e*(k+m+c))):z?(g+f&&K(a,Ha.AXIS_X,.2*(g+f)),e+h&&(k=p.get_camera_angles(a,ta)[1],K(a,Math.abs(k)>Math.PI/4?Ha.AXIS_MY:Ha.AXIS_Z,.2*(e+h))),p.rotate_camera(a,b+l+t,0)):(p.rotate_camera(a,.5*(g+f),.5*(e+h)),C&&(a=p.get_camera_angles_char(a,ja),Ja.set_character_rotation_h(C,a[0]),Ja.set_character_vert_move_dir_angle(C,a[1])))}});d.create_kb_sensor_manifold(v,"DEC_STEREO_DIST",d.CT_SHOT,d.KEY_LEFT_SQ_BRACKET,function(a){var b=p.get_stereo_distance(a);
p.set_stereo_distance(a,.9*b)});d.create_kb_sensor_manifold(v,"INC_STEREO_DIST",d.CT_SHOT,d.KEY_RIGHT_SQ_BRACKET,function(a){var b=p.get_stereo_distance(a);p.set_stereo_distance(a,1.1*b)})}function B(a){var b=p.get_move_style(a),c=d.create_callback_sensor(function(){var c=p.get_move_style(a),d=c!=b;b=c;return d});d.create_sensor_manifold(a,"CHANGE_MOVE_STYLE",d.CT_POSITIVE,[c],null,function(){ba();W(Ea,X,Ga,Fa,wa,La)})}function ba(){var a=Y.get_active_camera();d.check_sensor_manifold(a,"TOGGLE_CHAR_MOVE_TYPE")&&
Y.get_first_character()&&H.remove(a);for(var b="FORWARD BACKWARD ROT_UP ROT_DOWN ROT_LEFT ROT_RIGHT UP DOWN LEFT RIGHT MOUSE_WHEEL TOUCH_ZOOM ZOOM_INTERPOL MOUSE_X MOUSE_Y TOUCH_X TOUCH_Y ROT_TRANS_INTERPOL CHANGE_MOVE_STYLE TOGGLE_CHAR_MOVE_TYPE".split(" "),c=0;c<b.length;c++)d.remove_sensor_manifold(a,b[c])}function I(a,b,c,d){var g=document.createElement("div"),e=document.createElement("div"),f=document.createElement("div");if(d)for(var k=0;k<d.length;k++){var l=document.getElementById(d[k]);l&&
l.parentNode.removeChild(l)}g.style.cssText="z-index:10;width:100%;height:auto;position:absolute;top:50%;margin-top:150px;text-align:center;";e.style.cssText="color:#fff;font-size:24px;";f.style.cssText="color:#fff;font-size:20px;";e.innerHTML=a;f.innerHTML=b+'   <a style="color:#fff;font-size:20px;width:100%;" href="'+c+'">'+c.replace("https://www.","")+"</a>";g.appendChild(e);g.appendChild(f);document.body.appendChild(g)}function P(a,b,c,d,g){function e(){var h=performance.now()-f;g(b+h*(c-b)/d);
(h>=d||!a.parentNode)&&Aa.remove_loop_cb(e)}var f=performance.now();Aa.append_loop_cb(e)}var p=Object(M.a)(b),da=Object(U.a)(b),H=Object(n.a)(b),t=Object(z.a)(b),d=Object(e.a)(b),la=Object(m.a)(b),na=Object(C.a)(b),pa=Object(v.a)(b),Aa=Object(q.a)(b),Ja=Object(r.a)(b),N=Object(y.a)(b),oa=Object(a.a)(b),Y=Object(T.a)(b),Q=Object(k.a)(b),Ha=Object(c.a)(b),ia=1,Ma=null,Ea=!1,X=!1,Ga=!1,Fa=null,wa=!1,La=!1,ja=new Float32Array(2),ta=new Float32Array(2),ka=new Float32Array(3),qa=new Float32Array(3),S=new Float32Array(4),
va={},xa={};g.init=function(a){function b(){var a=u(h,I,v,k),b=t.get_canvas();if(a){var c=t.get_container();t.resize_to_container();y&&(F(l,p),Aa.set_fps_callback(D));q&&(f(),w());m&&Aa.append_loop_cb(function(){c.style.height=c.clientWidth/m+"px"});e&&Aa.append_loop_cb(function(){t.resize_to_container()});C&&Aa.append_loop_cb(function(){t.force_offsets_updating()});r&&da.reset_limits();z==da.P_AUTO?na.test_performance(function(a,c){0==a?(N.log("QUALITY TEST RESULT: UNSUPPORTED, using HIGH"),da.apply_quality(da.P_HIGH)):
1.5>c?(N.log("QUALITY TEST RESULT: LOW ("+c.toFixed(1)+" GB/s)"),da.apply_quality(da.P_LOW)):(N.log("QUALITY TEST RESULT: HIGH ("+c.toFixed(1)+" GB/s)"),da.apply_quality(da.P_HIGH));g(b,!0)}):g(b,!0)}else g(b,!1)}function c(a){a.keyCode==d.KEY_P&&(Aa.is_paused()?Aa.resume():Aa.pause())}function g(){}a=a||{};var e=!1,h=null,k=null,l=null,m=0,p=null,n=!0,r=!1,q=!0,v=!0,A=!1,y=!1,B=!1,C=!1,z=da.get("quality"),H;for(H in a)switch(H){case "canvas_container_id":h=a.canvas_container_id;break;case "callback":g=
a.callback;break;case "autoresize":e=a.autoresize;break;case "show_hud_debug_info":B=a.show_hud_debug_info;break;case "sfx_mix_mode":A=a.sfx_mix_mode;break;case "show_fps":y=a.show_fps;break;case "track_container_position":C=a.track_container_position;N.Ma("track_container_position deprecated. Not needed anymore. Use the container.get_coords_target_space method.");break;case "fps_wrapper_id":p=a.fps_wrapper_id;break;case "fps_elem_id":l=a.fps_elem_id;break;case "error_purge_elements":k=a.error_purge_elements;
break;case "report_init_failure":v=a.report_init_failure;break;case "pause_invisible":q=a.pause_invisible;break;case "key_pause_enabled":n=a.key_pause_enabled;break;case "force_container_ratio":m=a.force_container_ratio;break;case "min_capabilities":r=a.min_capabilities;break;case "quality":z=a.quality;break;default:da.set(H,a[H])}z!=da.P_AUTO&&da.set("quality",z);n&&document.addEventListener("keydown",c,!1);da.set("show_hud_debug_info",B);da.set("sfx_mix_mode",A);var I=B||A||null;"complete"==document.readyState?
window.setTimeout(b,0):window.addEventListener("load",b,!1);window.addEventListener("unload",function(){la.cleanup()},!1)};g.set_onclick=function(a,b){var c=O(a);c.addEventListener("mouseup",function(){b(c.value)},!1)};g.set_onchange=function(a,b){var c=O(a);c.addEventListener("change",function(){var a=c.checked;b(void 0!=a?a:c.value)},!1)};g.set_onkeypress=function(a,b){var c=O(a);c.addEventListener("keypress",function(a){b(a.keyCode,c.value)},!1)};g.enable_camera_controls=W;g.disable_camera_controls=
ba;g.enable_object_controls=function(a){function b(a){return a[0]&&(a[1]||a[2])}function c(a,b,c){if(1==c)switch(c=d.get_sensor_value(a,b,0),b){case "FORWARD":g?Ja.vehicle_throttle(a,1):Q.move_local(a,0,-1*c,0);break;case "BACKWARD":g?Ja.vehicle_throttle(a,-1):Q.move_local(a,0,1*c,0);break;case "LEFT":g?Ja.vehicle_steer(a,-1):Q.move_local(a,1*c,0,0);break;case "RIGHT":g?Ja.vehicle_steer(a,1):Q.move_local(a,-1*c,0,0)}else switch(b){case "FORWARD":case "BACKWARD":g&&Ja.vehicle_throttle(a,0);break;case "LEFT":case "RIGHT":g&&
Ja.vehicle_steer(a,0)}}var g=Ja.is_vehicle_chassis(a)||Ja.is_vehicle_hull(a),e=d.create_elapsed_sensor(),f=d.create_keyboard_sensor(d.KEY_W),k=d.create_keyboard_sensor(d.KEY_S),l=d.create_keyboard_sensor(d.KEY_A),m=d.create_keyboard_sensor(d.KEY_D),p=d.create_keyboard_sensor(d.KEY_UP),t=d.create_keyboard_sensor(d.KEY_DOWN),n=d.create_keyboard_sensor(d.KEY_LEFT),u=d.create_keyboard_sensor(d.KEY_RIGHT);d.create_sensor_manifold(a,"FORWARD",d.CT_CONTINUOUS,[e,f,p],b,c);d.create_sensor_manifold(a,"BACKWARD",
d.CT_CONTINUOUS,[e,k,t],b,c);d.create_sensor_manifold(a,"LEFT",d.CT_CONTINUOUS,[e,l,n],b,c);d.create_sensor_manifold(a,"RIGHT",d.CT_CONTINUOUS,[e,m,u],b,c)};g.disable_object_controls=function(a){for(var b=["FORWARD","BACKWARD","LEFT","RIGHT"],c=0;c<b.length;c++)d.remove_sensor_manifold(a,b[c])};g.enable_debug_controls=function(){d.create_kb_sensor_manifold(null,"CAMERA_SHOT",d.CT_SHOT,d.KEY_K,function(){na.make_camera_frustum_shot()});d.create_kb_sensor_manifold(null,"LIGHT_SHOT",d.CT_SHOT,d.KEY_L,
function(){na.make_light_frustum_shot()});d.create_kb_sensor_manifold(null,"TELEMETRY",d.CT_SHOT,d.KEY_T,function(){na.plot_telemetry()})};g.request_fullscreen=function(a,b,c){N.ef("request_fullscreen","screen.request_fullscreen");oa.request_fullscreen(a,b,c)};g.exit_fullscreen=function(){N.ef("exit_fullscreen","screen.exit_fullscreen");oa.exit_fullscreen()};g.check_fullscreen=function(){N.ef("check_fullscreen","screen.check_fullscreen");return oa.check_fullscreen()};g.report_app_error=I;g.get_url_params=
function(a){a=!!a;var b=decodeURIComponent(location.href.toString());if(-1==b.indexOf("?"))return null;b=b.split("?")[1].split("&");for(var c={},d=0;d<b.length;d++){var g=b[d].split("="),e=g[0];1<g.length?(g=g[1],a?e in c?c[e].push(g):c[e]=[g]:c[e]=g):a?e in c||(c[e]=[]):c[e]=""}return c};g.css_animate=function(a,b,c,d,g,e,f,k){if(a&&b&&isFinite(c)&&isFinite(d)&&isFinite(g)){e=e||"";f=f||"";k=k||function(){};var h=a.style,l=b.charAt(0).toUpperCase()+b.slice(1);if(void 0==h[b])if(void 0!=h["webkit"+
l])b="webkit"+l;else if(void 0!=h["ms"+l])b="ms"+l;else if(void 0!=h["moz"+l])b="moz"+l;else return;P(a,c,d,g,function(g){a&&(h[b]=e+g+f,c>d&&g<=d||c<d&&g>=d)&&(h[b]=e+d+f,k())})}};g.attr_animate=function(a,b,c,d,g,e){a&&b&&isFinite(c)&&isFinite(d)&&isFinite(g)&&(e=e||function(){},P(a,c,d,g,function(g){a&&(0<=g&&a.setAttribute(b,g),c>d&&g<=d||c<d&&g>=d)&&(a.setAttribute(b,d),e())}))};g.queue_animate=function(a){if(a.length){var b=a.shift(),c=b.elem,d=b.prop,e=b.from,f=b.to,k=b.duration,l=b.opt_prefix,
m=b.opt_suffix,p=function(){b.cb&&b.cb();g.queue_animate(a)};"css"==b.type?g.css_animate(c,d,e,f,k,l,m,p):"attr"==b.type&&g.attr_animate(c,d,e,f,k,p)}};g.set_camera_smooth_factor=function(a){ia=a};g.get_camera_smooth_factor=function(){return ia}});w.a=f},function(D,w,f){D=f(0);var M=f(29);f=Object(D.a)("__debug_nodegraph",function(f,n){var w=Object(M.a)(f);n.kS=function(e){return w.iF(e,function(e,f){e=f.type+"("+f.name+")";var m=f.inputs;e+="\n\nINPUTS:";if(m.length)for(var n=0;n<m.length;n++)e+=
"\n"+m[n].identifier+": ",e=m[n].lb?e+"linked":e+m[n].mb;else e+="\n---";m=f.outputs;e+="\n\nOUTPUTS:";if(m.length)for(n=0;n<m.length;n++)e+="\n"+m[n].identifier+": ",e=m[n].lb?e+("linked(default "+m[n].mb+")"):e+"not used";else e+="\n---";n="";switch(f.type){case "GEOMETRY_UV":n="\nuv_layer: "+f.data.value;break;case "TEXTURE_COLOR":case "TEXTURE_NORMAL":n="\ntexture: "+f.data.value.name+"\n("+f.data.value.So+")"}""==n&&(n="\n---");return e+"\n\nDATA:"+n},function(f,n,v){f=w.Kb(e,f);n=w.Kb(e,n);
return f.outputs[v[0]].identifier+"\n==>\n"+n.inputs[v[1]].identifier})}});w.a=f},function(D,w,f){D=f(0);var M=f(32),U=f(5),n=f(31),z=f(48);f=Object(D.a)("__ipc",function(e,f){function m(a){var b=document.getElementsByTagName("script");a=Object(z.b)(a);for(var c=0;c<b.length;c++)if(b[c].src==a)return b[c];return null}function v(a,b,c){for(var g=0;g<u.length;g+=2)u[g+1]==a&&(ea[g+Number(!b)]=c)}function q(a){for(var b=0;b<a.length;b++){var c=a[b],g=0,e;for(e in c){var f=c[e];switch(f.constructor){case Float32Array:g+=
f.length;break;case Number:g+=1}}--g;c.len=g}}var r=Object(U.a)(e),y=Object(n.a)(e),a=!0;f.aK=0;f.cD=1;f.dD=2;f.VJ=3;f.XJ=4;f.YJ=5;f.ZJ=6;f.bK=7;f.eD=8;f.Py=9;f.fD=10;f.dK=11;f.gD=12;f.eK=13;f.cK=14;f.$J=15;f.WJ=16;var w=f.cD,k=f.dD,c=f.eD,l=f.Py,b=f.fD,g=f.gD;f.oL=100;f.QK=101;f.RK=102;f.SK=103;f.TK=104;f.VK=105;f.UK=106;f.WK=107;f.XK=108;f.YK=109;f.ZK=110;f.$K=111;f.aL=112;f.cL=113;f.dL=114;f.rL=115;f.eL=116;f.fL=117;f.gL=118;f.iL=119;f.jL=120;f.kL=121;f.mL=122;f.nL=123;f.pL=124;f.bL=125;f.tL=126;
f.hL=127;f.tD=128;f.sL=129;f.uL=130;f.wL=131;f.xL=132;f.yL=133;f.zL=134;f.AL=135;f.BL=136;f.DL=137;f.EL=138;f.FL=139;f.uD=140;f.yq=141;f.GL=142;f.sD=143;f.HL=144;f.JL=145;f.qL=146;f.lL=147;f.LL=148;f.vL=149;f.CL=150;f.IL=151;f.KL=152;var D=f.yq,ea=M.a.worker_listeners,u=M.a.worker_namespaces,F={Yg:g,Ja:0,time:0,trans:new Float32Array(3),quat:new Float32Array(4),ij:new Float32Array(3),Ji:new Float32Array(3),len:0},R={Yg:c,oz:0,CB:0,trans:new Float32Array(3),quat:new Float32Array(4),len:0},O={Yg:l,
id:0,po:0,hit_fract:0,hit_time:0,len:0},K={Yg:b,id:0,po:0,hit_fract:0,hit_time:0,hit_pos:new Float32Array(3),hit_norm:new Float32Array(3),len:0},A={Yg:w,Am:0,Bm:0,result:0,len:0},ca={Yg:k,Am:0,Bm:0,result:0,Em:new Float32Array(3),coll_norm:new Float32Array(3),coll_dist:0,len:0},L={Yg:D,Ja:0,trans:new Float32Array(3),quat:new Float32Array(4),len:0},ha=[F,R,O,K,A,ca,L];f.KO=function(b,c){var g={Xv:b?!0:!1,Pk:null,Pi:[],vh:""};c?(g.Pk={addEventListener:function(a,b){"message"!=a&&r.va("Wrong web worker event");
v(g.vh,g.Xv,b)},removeEventListener:function(a){"message"!=a&&r.va("Wrong web worker event");v(g.vh,g.Xv,null)},postMessage:function(a){var b;a:{for(b=0;b<u.length;b+=2)if(u[b+1]==g.vh){b=ea[b+Number(!!g.Xv)];break a}b=null}b({data:a})},terminate:function(){for(var a=0;a<u.length;a+=2)if(u[a+1]==g.vh){ea.splice(a,2);u.splice(a,2);break}}},g.Xv?(c=y.mt(e+"_worker"),u.push(e),u.push(c),ea.push(null),ea.push(null),g.vh=c,(c=m(b))?a?c.addEventListener("load",function(){M.a.require("__bindings",g.vh)},
!1):(M.a.cleanup("__bindings",g.vh),M.a.cleanup("__ipc",g.vh),M.a.require("__bindings",g.vh)):(c=document.createElement("script"),c.src=b,c.defer="defer",c.async="async",c.addEventListener("load",function(){a=!1;M.a.require("__bindings",g.vh)},!1),document.head.appendChild(c))):g.vh=e):b?g.Pk=new Worker(b):g.Pk=self;return g};f.AM=function(a,e){function f(m){if(m.constructor==ArrayBuffer)m=new Float32Array(m);else if(m[0].constructor==ArrayBuffer){for(var n=0;n<m.length;n++)f(m[n]);return}n=m[0]|
0;switch(n){case g:var u=F;u.Ja=m[1]|0;u.time=m[2];u.trans[0]=m[3];u.trans[1]=m[4];u.trans[2]=m[5];u.quat[0]=m[6];u.quat[1]=m[7];u.quat[2]=m[8];u.quat[3]=m[9];u.ij[0]=m[10];u.ij[1]=m[11];u.ij[2]=m[12];u.Ji[0]=m[13];u.Ji[1]=m[14];u.Ji[2]=m[15];break;case c:u=R;u.oz=m[1]|0;u.CB=m[2]|0;u.trans[0]=m[3];u.trans[1]=m[4];u.trans[2]=m[5];u.quat[0]=m[6];u.quat[1]=m[7];u.quat[2]=m[8];u.quat[3]=m[9];break;case l:u=O;u.id=m[1]|0;u.po=m[2]|0;u.hit_fract=m[3];u.hit_time=m[4];break;case b:u=K;u.id=m[1]|0;u.po=m[2]|
0;u.hit_fract=m[3];u.hit_time=m[4];u.hit_pos[0]=m[5];u.hit_pos[1]=m[6];u.hit_pos[2]=m[7];u.hit_norm[0]=m[8];u.hit_norm[1]=m[9];u.hit_norm[2]=m[10];break;case w:u=A;u.Am=m[1]|0;u.Bm=m[2]|0;u.result=!!m[3];break;case k:u=ca;u.Am=m[1]|0;u.Bm=m[2]|0;u.result=!!m[3];u.Em[0]=m[4];u.Em[1]=m[5];u.Em[2]=m[6];u.coll_norm[0]=m[7];u.coll_norm[1]=m[8];u.coll_norm[2]=m[9];u.coll_dist=m[10];break;case D:u=L;u.Ja=m[1]|0;u.trans[0]=m[2];u.trans[1]=m[3];u.trans[2]=m[4];u.quat[0]=m[5];u.quat[1]=m[6];u.quat[2]=m[7];
u.quat[3]=m[8];break;default:u=m}e(a,n,u)}q(ha);a.Pk.addEventListener("message",function(a){f(a.data)},!1)};f.cleanup=function(){};f.Ta=function(a,e){if(a)switch(e){case g:var f=F,m=new Float32Array(f.len);m[0]=f.Yg;m[1]=f.Ja;m[2]=f.time;m[3]=f.trans[0];m[4]=f.trans[1];m[5]=f.trans[2];m[6]=f.quat[0];m[7]=f.quat[1];m[8]=f.quat[2];m[9]=f.quat[3];m[10]=f.ij[0];m[11]=f.ij[1];m[12]=f.ij[2];m[13]=f.Ji[0];m[14]=f.Ji[1];m[15]=f.Ji[2];a.Pi.push(m.buffer);break;case c:f=R;m=new Float32Array(f.len);m[0]=f.Yg;
m[1]=f.oz;m[2]=f.CB;m[3]=f.trans[0];m[4]=f.trans[1];m[5]=f.trans[2];m[6]=f.quat[0];m[7]=f.quat[1];m[8]=f.quat[2];m[9]=f.quat[3];a.Pi.push(m.buffer);break;case l:f=O;m=new Float32Array(f.len);m[0]=f.Yg;m[1]=f.id;m[2]=f.po;m[3]=f.hit_fract;m[4]=f.hit_time;a.Pi.push(m.buffer);break;case b:f=K;m=new Float32Array(f.len);m[0]=f.Yg;m[1]=f.id;m[2]=f.po;m[3]=f.hit_fract;m[4]=f.hit_time;m[5]=f.hit_pos[0];m[6]=f.hit_pos[1];m[7]=f.hit_pos[2];m[8]=f.hit_norm[0];m[9]=f.hit_norm[1];m[10]=f.hit_norm[2];a.Pi.push(m.buffer);
break;case w:f=A;m=new Float32Array(f.len);m[0]=f.Yg;m[1]=f.Am;m[2]=f.Bm;m[3]=f.result;a.Pi.push(m.buffer);break;case k:f=ca;m=new Float32Array(f.len);m[0]=f.Yg;m[1]=f.Am;m[2]=f.Bm;m[3]=f.result;m[4]=f.Em[0];m[5]=f.Em[1];m[6]=f.Em[2];m[7]=f.coll_norm[0];m[8]=f.coll_norm[1];m[9]=f.coll_norm[2];m[10]=f.coll_dist;a.Pi.push(m.buffer);break;case D:f=L;m=new Float32Array(f.len);m[0]=f.Yg;m[1]=f.Ja;m[2]=f.trans[0];m[3]=f.trans[1];m[4]=f.trans[2];m[5]=f.quat[0];m[6]=f.quat[1];m[7]=f.quat[2];m[8]=f.quat[3];
a.Pi.push(m.buffer);break;default:m=[];for(f=1;f<arguments.length;f++)m.push(arguments[f]);a.Pk.postMessage(m)}};f.HS=function(a){a&&a.Pi.length&&(a.Pk.postMessage(a.Pi),a.Pi.length=0)};f.WF=function(a){switch(a){case g:return F;case c:return R;case l:return O;case b:return K;case w:return A;case k:return ca;case D:return L;default:return null}};f.terminate=function(a){a.Pk.terminate();a.Pk=null};f.Uv=function(a){return!!a.Pk};f.xG=function(a){return!!a.vh}});w.a=f},function(D,w,f){D=f(0);var M=f(46),
U=f(20),n=f(12),z=f(22),e=f(11),m=f(6),C=f(2),v=f(3);f=Object(D.a)("__prerender",function(f,r){function q(a,b){return a.Rk-b.Rk}function a(a,b){var c=a.$g;c.is_visible=!1;if(c.hide)return!1;var e=b.qa,f=b.type==g.ee?e.kw:m.j(e.na,ea),n=a.fb;if(!l.ZU(n,c,f))return!1;c.is_visible=!0;b.type==g.Wh?n=b.debug_view_mode==k.DV_BOUNDINGS?n.Uj:!n.Uj:(!(b=b.type==g.Xh&&0==c.mj)&&(b=!n.Wj&&a.Ft)&&(e=e.Vm,b=a.Ft.Cf,a=a.Ft.ag,c=n.hm,n=b.Da,C._56(n,e,b.Lb)?b=!0:c?(b=a.Cb,c=a.Db,f=a.Eb,n=a.Da,b=C.X(n,e,b,c,f)):b=
!1),n=b?!1:!0);return n}function w(a){var b=a.tb;if(b&&b.Bw){a=a.$a;c.PR(a);var g=a.mc;c.wt(a.Pc,"a_position",b.zs,g.a_position.offset);c.wt(a.Pc,"a_tbn",b.et,g.a_tbn.offset);c.IC(a)}}var k=Object(M.a)(f),c=Object(U.a)(f),l=Object(n.a)(f),b=Object(z.a)(f),g=Object(e.a)(f),D=[g.ic,g.Md,g.de,g.xd,g.Ue,g.Ge,g.He,g.lh,g.ee,g.Gg,g.Xh,g.Wh,g.zf,g.Vh],ea=new Float32Array(3);r.xn=function(c){if(-1<D.indexOf(c.type)){for(var e=!1,f=c.type==g.xd||c.type==g.Ge,k=c.vb,l=0;l<k.length;l++){for(var n=k[l],u=n.jb,
r=!1,y=0;y<u.length;y++){var C=u[y],z=C.fb;if(f)for(var B=0;6>B;B++)c.qa.Vm=c.Jm[B],C.Nz[B]=a(C,c),C.Nz[B]&&(r=e=!0,w(z));else C.Ec=a(C,c),C.Ec&&(r=e=!0,w(z));c.wb&&(z.ec.ip=!0);C.Ec?(z=m.j(c.qa.na,ea),C.Ft?(B=C.Ft.Cf,z=v.squaredDistance(B.Da,z)+B.Lb*B.Lb):z=Infinity,C.Rk=z):C.Rk=Infinity}0<u.length&&!u[0].fb.Ob&&(u.sort(q),k.Rk=u[0].Rk);n.Ec=r}c.wb=!1;switch(c.type){case g.Wh:break;default:c.type==g.ic||c.type==g.Gg||c.type==g.He||c.type==g.de||c.type==g.xd||e?c.Ec=!0:(c.Ec&&b.clear(c),c.Ec=!1)}}else if(c.wb){k=
c.vb;for(l=0;l<k.length;l++)for(u=k[l].jb,y=0;y<u.length;y++)C=u[y],z=C.fb,z.ec.ip=!0;c.wb=!1}c.ms&&g.eU(c)}});w.a=f},function(D,w,f){f.d(w,"a",function(){return M});(function(f){if("object"===typeof exports&&"undefined"!==typeof D)D.exports=f();else{var n;"undefined"!==typeof window?n=window:"undefined"!==typeof self?n=self:n=this;n.rS=f()}})(function(){return function m(f,w,e){function n(r){if(!w[r]){if(!f[r]){if(v)return v(r,!0);var q=Error("Cannot find module '"+r+"'");throw q.code="MODULE_NOT_FOUND",
q;}q=w[r]={exports:{}};f[r][0].call(q.exports,function(a){var e=f[r][1][a];return n(e?e:a)},q,q.exports,m,f,w,e)}return w[r].exports}for(var v=!1,q=0;q<e.length;q++)n(e[q]);return n}({1:[function(f,w,e){f="undefined"!==typeof Uint8Array&&"undefined"!==typeof Uint16Array&&"undefined"!==typeof Int32Array;e.assign=function(e){for(var f=Array.prototype.slice.call(arguments,1);f.length;){var m=f.shift();if(m){if("object"!==typeof m)throw new TypeError(m+"must be non-object");for(var n in m)m.hasOwnProperty(n)&&
(e[n]=m[n])}}return e};e.uI=function(e,f){if(e.length===f)return e;if(e.subarray)return e.subarray(0,f);e.length=f;return e};var m={xm:function(e,f,m,n,a){if(f.subarray&&e.subarray)e.set(f.subarray(m,m+n),a);else for(var r=0;r<n;r++)e[a+r]=f[m+r]},BF:function(e){var f,m;var n=m=0;for(f=e.length;n<f;n++)m+=e[n].length;var a=new Uint8Array(m);n=m=0;for(f=e.length;n<f;n++){var v=e[n];a.set(v,m);m+=v.length}return a}},n={xm:function(e,f,m,n,a){for(var r=0;r<n;r++)e[a+r]=f[m+r]},BF:function(e){return[].concat.apply([],
e)}};e.nT=function(f){f?(e.nm=Uint8Array,e.tq=Uint16Array,e.uq=Int32Array,e.assign(e,m)):(e.nm=Array,e.tq=Array,e.uq=Array,e.assign(e,n))};e.nT(f)},{}],2:[function(f,w,e){function m(e,a){if(65537>a&&(e.subarray&&q||!e.subarray&&v))return String.fromCharCode.apply(null,n.uI(e,a));for(var f="",k=0;k<a;k++)f+=String.fromCharCode(e[k]);return f}var n=f("./common"),v=!0,q=!0,r=new n.nm(256);for(f=0;256>f;f++)r[f]=252<=f?6:248<=f?5:240<=f?4:224<=f?3:192<=f?2:1;r[254]=r[254]=1;e.uU=function(e){var a,f,k=
e.length,c=0;for(a=0;a<k;a++){var l=e.charCodeAt(a);if(55296===(l&64512)&&a+1<k){var b=e.charCodeAt(a+1);56320===(b&64512)&&(l=65536+(l-55296<<10)+(b-56320),a++)}c+=128>l?1:2048>l?2:65536>l?3:4}var g=new n.nm(c);for(a=f=0;f<c;a++)l=e.charCodeAt(a),55296===(l&64512)&&a+1<k&&(b=e.charCodeAt(a+1),56320===(b&64512)&&(l=65536+(l-55296<<10)+(b-56320),a++)),128>l?g[f++]=l:(2048>l?g[f++]=192|l>>>6:(65536>l?g[f++]=224|l>>>12:(g[f++]=240|l>>>18,g[f++]=128|l>>>12&63),g[f++]=128|l>>>6&63),g[f++]=128|l&63);return g};
e.ZW=function(e){return m(e,e.length)};e.IM=function(e){for(var a=new n.nm(e.length),f=0,k=a.length;f<k;f++)a[f]=e.charCodeAt(f);return a};e.SM=function(e,a){var f,k=a||e.length,c=Array(2*k);for(a=f=0;a<k;){var l=e[a++];if(128>l)c[f++]=l;else{var b=r[l];if(4<b)c[f++]=65533,a+=b-1;else{for(l&=2===b?31:3===b?15:7;1<b&&a<k;)l=l<<6|e[a++]&63,b--;1<b?c[f++]=65533:65536>l?c[f++]=l:(l-=65536,c[f++]=55296|l>>10&1023,c[f++]=56320|l&1023)}}}return m(c,f)};e.DV=function(e,a){var f;a=a||e.length;a>e.length&&
(a=e.length);for(f=a-1;0<=f&&128===(e[f]&192);)f--;return 0>f||0===f?a:f+r[e[f]]>a?f:a}},{"./common":1}],3:[function(f,w){w.exports=function(e,f,n,v){var m=e&65535|0;e=e>>>16&65535|0;for(var r;0!==n;){r=2E3<n?2E3:n;n-=r;do m=m+f[v++]|0,e=e+m|0;while(--r);m%=65521;e%=65521}return m|e<<16|0}},{}],4:[function(f,w){w.exports={ED:0,HW:1,FD:2,EW:3,Tt:4,vW:5,LW:6,co:0,Ut:1,RL:2,AW:-1,JW:-2,wW:-3,QL:-5,GW:0,tW:1,sW:9,xW:-1,BW:1,FW:2,IW:3,DW:4,yW:0,uW:0,KW:1,MW:2,zW:8}},{}],5:[function(f,w){var e=function(){for(var e,
f=[],n=0;256>n;n++){e=n;for(var q=0;8>q;q++)e=e&1?3988292384^e>>>1:e>>>1;f[n]=e}return f}();w.exports=function(f,n,v,q){v=q+v;for(f^=-1;q<v;q++)f=f>>>8^e[(f^n[q])&255];return f^-1}},{}],6:[function(f,w){w.exports=function(){this.nS=this.RV=this.time=this.text=0;this.je=null;this.Sz=0;this.vz=this.name="";this.PQ=0;this.done=!1}},{}],7:[function(f,w){w.exports=function(e,f){var m=e.state;var n=e.Dl;var q=e.input;var r=n+(e.Kg-5);var y=e.nf;var a=e.ui;f=y-(f-e.ge);var w=y+(e.ge-257);var k=m.Ru;var c=
m.Fg;var l=m.Qk;var b=m.Eg;var g=m.window;var z=m.nl;var D=m.Od;var u=m.hk;var F=m.Nm;var R=(1<<m.gj)-1;var O=(1<<m.Ao)-1;a:do{15>D&&(z+=q[n++]<<D,D+=8,z+=q[n++]<<D,D+=8);var K=u[z&R];b:for(;;){var A=K>>>24;z>>>=A;D-=A;A=K>>>16&255;if(0===A)a[y++]=K&65535;else if(A&16){var M=K&65535;if(A&=15)D<A&&(z+=q[n++]<<D,D+=8),M+=z&(1<<A)-1,z>>>=A,D-=A;15>D&&(z+=q[n++]<<D,D+=8,z+=q[n++]<<D,D+=8);K=F[z&O];c:for(;;){A=K>>>24;z>>>=A;D-=A;A=K>>>16&255;if(A&16){K&=65535;A&=15;D<A&&(z+=q[n++]<<D,D+=8,D<A&&(z+=q[n++]<<
D,D+=8));K+=z&(1<<A)-1;if(K>k){e.msg="invalid distance too far back";m.mode=30;break a}z>>>=A;D-=A;A=y-f;if(K>A){A=K-A;if(A>l&&m.PB){e.msg="invalid distance too far back";m.mode=30;break a}var L=0;var ha=g;if(0===b){if(L+=c-A,A<M){M-=A;do a[y++]=g[L++];while(--A);L=y-K;ha=a}}else if(b<A){if(L+=c+b-A,A-=b,A<M){M-=A;do a[y++]=g[L++];while(--A);L=0;if(b<M){A=b;M-=A;do a[y++]=g[L++];while(--A);L=y-K;ha=a}}}else if(L+=b-A,A<M){M-=A;do a[y++]=g[L++];while(--A);L=y-K;ha=a}for(;2<M;)a[y++]=ha[L++],a[y++]=
ha[L++],a[y++]=ha[L++],M-=3;M&&(a[y++]=ha[L++],1<M&&(a[y++]=ha[L++]))}else{L=y-K;do a[y++]=a[L++],a[y++]=a[L++],a[y++]=a[L++],M-=3;while(2<M);M&&(a[y++]=a[L++],1<M&&(a[y++]=a[L++]))}}else if(0===(A&64)){K=F[(K&65535)+(z&(1<<A)-1)];continue c}else{e.msg="invalid distance code";m.mode=30;break a}break}}else if(0===(A&64)){K=u[(K&65535)+(z&(1<<A)-1)];continue b}else{A&32?m.mode=12:(e.msg="invalid literal/length code",m.mode=30);break a}break}}while(n<r&&y<w);M=D>>3;n-=M;D-=M<<3;e.Dl=n;e.nf=y;e.Kg=n<
r?5+(r-n):5-(n-r);e.ge=y<w?257+(w-y):257-(y-w);m.nl=z&(1<<D)-1;m.Od=D}},{}],8:[function(f,w,e){function m(a){return(a>>>24&255)+(a>>>8&65280)+((a&65280)<<8)+((a&255)<<24)}function n(){this.mode=0;this.cw=!1;this.Ei=0;this.wA=!1;this.total=this.check=this.Ru=this.flags=0;this.head=null;this.Eg=this.Qk=this.Fg=this.rq=0;this.window=null;this.je=this.offset=this.length=this.Od=this.nl=0;this.Nm=this.hk=null;this.Eh=this.ls=this.lp=this.fH=this.Ao=this.gj=0;this.next=null;this.kf=new z.tq(320);this.Et=
new z.tq(288);this.rF=this.KG=null;this.MV=this.back=this.PB=0}function v(a){if(!a||!a.state)return-2;var b=a.state;a.vC=a.it=b.total=0;a.msg="";b.Ei&&(a.tm=b.Ei&1);b.mode=1;b.cw=0;b.wA=0;b.Ru=32768;b.head=null;b.nl=0;b.Od=0;b.hk=b.KG=new z.uq(852);b.Nm=b.rF=new z.uq(592);b.PB=1;b.back=-1;return 0}function q(a){if(!a||!a.state)return-2;var b=a.state;b.Fg=0;b.Qk=0;b.Eg=0;return v(a)}function r(a,b){if(!a||!a.state)return-2;var c=a.state;if(0>b){var g=0;b=-b}else g=(b>>4)+1,48>b&&(b&=15);if(b&&(8>b||
15<b))return-2;null!==c.window&&c.rq!==b&&(c.window=null);c.Ei=g;c.rq=b;return q(a)}function y(a,b){if(!a)return-2;var c=new n;a.state=c;c.window=null;b=r(a,b);0!==b&&(a.state=null);return b}function a(a,b,c,g){var e=a.state;null===e.window&&(e.Fg=1<<e.rq,e.Eg=0,e.Qk=0,e.window=new z.nm(e.Fg));g>=e.Fg?(z.xm(e.window,b,c-e.Fg,e.Fg,0),e.Eg=0,e.Qk=e.Fg):(a=e.Fg-e.Eg,a>g&&(a=g),z.xm(e.window,b,c-g,a,e.Eg),(g-=a)?(z.xm(e.window,b,c-g,g,0),e.Eg=g,e.Qk=e.Fg):(e.Eg+=a,e.Eg===e.Fg&&(e.Eg=0),e.Qk<e.Fg&&(e.Qk+=
a)));return 0}var z=f("../utils/common"),k=f("./adler32"),c=f("./crc32"),l=f("./inffast"),b=f("./inftrees"),g=!0,D,M;e.XX=q;e.YX=r;e.ZX=v;e.VX=function(a){return y(a,15)};e.UQ=y;e.zA=function(e,f){var n,u=new z.nm(4),r=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.ui||!e.input&&0!==e.Kg)return-2;var q=e.state;12===q.mode&&(q.mode=13);var v=e.nf;var y=e.ui;var w=e.ge;var C=e.Dl;var F=e.input;var B=e.Kg;var E=q.nl;var I=q.Od;var P=B;var p=w;var da=0;a:for(;;)switch(q.mode){case 1:if(0===
q.Ei){q.mode=13;break}for(;16>I;){if(0===B)break a;B--;E+=F[C++]<<I;I+=8}if(q.Ei&2&&35615===E){q.check=0;u[0]=E&255;u[1]=E>>>8&255;q.check=c(q.check,u,2,0);I=E=0;q.mode=2;break}q.flags=0;q.head&&(q.head.done=!1);if(!(q.Ei&1)||(((E&255)<<8)+(E>>8))%31){e.msg="incorrect header check";q.mode=30;break}if(8!==(E&15)){e.msg="unknown compression method";q.mode=30;break}E>>>=4;I-=4;var H=(E&15)+8;if(0===q.rq)q.rq=H;else if(H>q.rq){e.msg="invalid window size";q.mode=30;break}q.Ru=1<<H;e.tm=q.check=1;q.mode=
E&512?10:12;I=E=0;break;case 2:for(;16>I;){if(0===B)break a;B--;E+=F[C++]<<I;I+=8}q.flags=E;if(8!==(q.flags&255)){e.msg="unknown compression method";q.mode=30;break}if(q.flags&57344){e.msg="unknown header flags set";q.mode=30;break}q.head&&(q.head.text=E>>8&1);q.flags&512&&(u[0]=E&255,u[1]=E>>>8&255,q.check=c(q.check,u,2,0));I=E=0;q.mode=3;case 3:for(;32>I;){if(0===B)break a;B--;E+=F[C++]<<I;I+=8}q.head&&(q.head.time=E);q.flags&512&&(u[0]=E&255,u[1]=E>>>8&255,u[2]=E>>>16&255,u[3]=E>>>24&255,q.check=
c(q.check,u,4,0));I=E=0;q.mode=4;case 4:for(;16>I;){if(0===B)break a;B--;E+=F[C++]<<I;I+=8}q.head&&(q.head.RV=E&255,q.head.nS=E>>8);q.flags&512&&(u[0]=E&255,u[1]=E>>>8&255,q.check=c(q.check,u,2,0));I=E=0;q.mode=5;case 5:if(q.flags&1024){for(;16>I;){if(0===B)break a;B--;E+=F[C++]<<I;I+=8}q.length=E;q.head&&(q.head.Sz=E);q.flags&512&&(u[0]=E&255,u[1]=E>>>8&255,q.check=c(q.check,u,2,0));I=E=0}else q.head&&(q.head.je=null);q.mode=6;case 6:if(q.flags&1024){var t=q.length;t>B&&(t=B);t&&(q.head&&(H=q.head.Sz-
q.length,q.head.je||(q.head.je=Array(q.head.Sz)),z.xm(q.head.je,F,C,t,H)),q.flags&512&&(q.check=c(q.check,F,t,C)),B-=t,C+=t,q.length-=t);if(q.length)break a}q.length=0;q.mode=7;case 7:if(q.flags&2048){if(0===B)break a;t=0;do H=F[C+t++],q.head&&H&&65536>q.length&&(q.head.name+=String.fromCharCode(H));while(H&&t<B);q.flags&512&&(q.check=c(q.check,F,t,C));B-=t;C+=t;if(H)break a}else q.head&&(q.head.name=null);q.length=0;q.mode=8;case 8:if(q.flags&4096){if(0===B)break a;t=0;do H=F[C+t++],q.head&&H&&65536>
q.length&&(q.head.vz+=String.fromCharCode(H));while(H&&t<B);q.flags&512&&(q.check=c(q.check,F,t,C));B-=t;C+=t;if(H)break a}else q.head&&(q.head.vz=null);q.mode=9;case 9:if(q.flags&512){for(;16>I;){if(0===B)break a;B--;E+=F[C++]<<I;I+=8}if(E!==(q.check&65535)){e.msg="header crc mismatch";q.mode=30;break}I=E=0}q.head&&(q.head.PQ=q.flags>>9&1,q.head.done=!0);e.tm=q.check=0;q.mode=12;break;case 10:for(;32>I;){if(0===B)break a;B--;E+=F[C++]<<I;I+=8}e.tm=q.check=m(E);I=E=0;q.mode=11;case 11:if(0===q.wA)return e.nf=
v,e.ge=w,e.Dl=C,e.Kg=B,q.nl=E,q.Od=I,2;e.tm=q.check=1;q.mode=12;case 12:if(5===f||6===f)break a;case 13:if(q.cw){E>>>=I&7;I-=I&7;q.mode=27;break}for(;3>I;){if(0===B)break a;B--;E+=F[C++]<<I;I+=8}q.cw=E&1;E>>>=1;--I;switch(E&3){case 0:q.mode=14;break;case 1:H=q;if(g){D=new z.uq(512);M=new z.uq(32);for(t=0;144>t;)H.kf[t++]=8;for(;256>t;)H.kf[t++]=9;for(;280>t;)H.kf[t++]=7;for(;288>t;)H.kf[t++]=8;b(1,H.kf,0,288,D,0,H.Et,{Od:9});for(t=0;32>t;)H.kf[t++]=5;b(2,H.kf,0,32,M,0,H.Et,{Od:5});g=!1}H.hk=D;H.gj=
9;H.Nm=M;H.Ao=5;q.mode=20;if(6===f){E>>>=2;I-=2;break a}break;case 2:q.mode=17;break;case 3:e.msg="invalid block type",q.mode=30}E>>>=2;I-=2;break;case 14:E>>>=I&7;for(I-=I&7;32>I;){if(0===B)break a;B--;E+=F[C++]<<I;I+=8}if((E&65535)!==(E>>>16^65535)){e.msg="invalid stored block lengths";q.mode=30;break}q.length=E&65535;I=E=0;q.mode=15;if(6===f)break a;case 15:q.mode=16;case 16:if(t=q.length){t>B&&(t=B);t>w&&(t=w);if(0===t)break a;z.xm(y,F,C,t,v);B-=t;C+=t;w-=t;v+=t;q.length-=t;break}q.mode=12;break;
case 17:for(;14>I;){if(0===B)break a;B--;E+=F[C++]<<I;I+=8}q.lp=(E&31)+257;E>>>=5;I-=5;q.ls=(E&31)+1;E>>>=5;I-=5;q.fH=(E&15)+4;E>>>=4;I-=4;if(286<q.lp||30<q.ls){e.msg="too many length or distance symbols";q.mode=30;break}q.Eh=0;q.mode=18;case 18:for(;q.Eh<q.fH;){for(;3>I;){if(0===B)break a;B--;E+=F[C++]<<I;I+=8}q.kf[r[q.Eh++]]=E&7;E>>>=3;I-=3}for(;19>q.Eh;)q.kf[r[q.Eh++]]=0;q.hk=q.KG;q.gj=7;t={Od:q.gj};da=b(0,q.kf,0,19,q.hk,0,q.Et,t);q.gj=t.Od;if(da){e.msg="invalid code lengths set";q.mode=30;break}q.Eh=
0;q.mode=19;case 19:for(;q.Eh<q.lp+q.ls;){for(;;){var d=q.hk[E&(1<<q.gj)-1];t=d>>>24;d&=65535;if(t<=I)break;if(0===B)break a;B--;E+=F[C++]<<I;I+=8}if(16>d)E>>>=t,I-=t,q.kf[q.Eh++]=d;else{if(16===d){for(H=t+2;I<H;){if(0===B)break a;B--;E+=F[C++]<<I;I+=8}E>>>=t;I-=t;if(0===q.Eh){e.msg="invalid bit length repeat";q.mode=30;break}H=q.kf[q.Eh-1];t=3+(E&3);E>>>=2;I-=2}else if(17===d){for(H=t+3;I<H;){if(0===B)break a;B--;E+=F[C++]<<I;I+=8}E>>>=t;I-=t;H=0;t=3+(E&7);E>>>=3;I-=3}else{for(H=t+7;I<H;){if(0===
B)break a;B--;E+=F[C++]<<I;I+=8}E>>>=t;I-=t;H=0;t=11+(E&127);E>>>=7;I-=7}if(q.Eh+t>q.lp+q.ls){e.msg="invalid bit length repeat";q.mode=30;break}for(;t--;)q.kf[q.Eh++]=H}}if(30===q.mode)break;if(0===q.kf[256]){e.msg="invalid code -- missing end-of-block";q.mode=30;break}q.gj=9;t={Od:q.gj};da=b(1,q.kf,0,q.lp,q.hk,0,q.Et,t);q.gj=t.Od;if(da){e.msg="invalid literal/lengths set";q.mode=30;break}q.Ao=6;q.Nm=q.rF;t={Od:q.Ao};da=b(2,q.kf,q.lp,q.ls,q.Nm,0,q.Et,t);q.Ao=t.Od;if(da){e.msg="invalid distances set";
q.mode=30;break}q.mode=20;if(6===f)break a;case 20:q.mode=21;case 21:if(6<=B&&258<=w){e.nf=v;e.ge=w;e.Dl=C;e.Kg=B;q.nl=E;q.Od=I;l(e,p);v=e.nf;y=e.ui;w=e.ge;C=e.Dl;F=e.input;B=e.Kg;E=q.nl;I=q.Od;12===q.mode&&(q.back=-1);break}for(q.back=0;;){d=q.hk[E&(1<<q.gj)-1];t=d>>>24;H=d>>>16&255;d&=65535;if(t<=I)break;if(0===B)break a;B--;E+=F[C++]<<I;I+=8}if(H&&0===(H&240)){var la=t;var na=H;for(n=d;;){d=q.hk[n+((E&(1<<la+na)-1)>>la)];t=d>>>24;H=d>>>16&255;d&=65535;if(la+t<=I)break;if(0===B)break a;B--;E+=F[C++]<<
I;I+=8}E>>>=la;I-=la;q.back+=la}E>>>=t;I-=t;q.back+=t;q.length=d;if(0===H){q.mode=26;break}if(H&32){q.back=-1;q.mode=12;break}if(H&64){e.msg="invalid literal/length code";q.mode=30;break}q.je=H&15;q.mode=22;case 22:if(q.je){for(H=q.je;I<H;){if(0===B)break a;B--;E+=F[C++]<<I;I+=8}q.length+=E&(1<<q.je)-1;E>>>=q.je;I-=q.je;q.back+=q.je}q.MV=q.length;q.mode=23;case 23:for(;;){d=q.Nm[E&(1<<q.Ao)-1];t=d>>>24;H=d>>>16&255;d&=65535;if(t<=I)break;if(0===B)break a;B--;E+=F[C++]<<I;I+=8}if(0===(H&240)){la=t;
na=H;for(n=d;;){d=q.Nm[n+((E&(1<<la+na)-1)>>la)];t=d>>>24;H=d>>>16&255;d&=65535;if(la+t<=I)break;if(0===B)break a;B--;E+=F[C++]<<I;I+=8}E>>>=la;I-=la;q.back+=la}E>>>=t;I-=t;q.back+=t;if(H&64){e.msg="invalid distance code";q.mode=30;break}q.offset=d;q.je=H&15;q.mode=24;case 24:if(q.je){for(H=q.je;I<H;){if(0===B)break a;B--;E+=F[C++]<<I;I+=8}q.offset+=E&(1<<q.je)-1;E>>>=q.je;I-=q.je;q.back+=q.je}if(q.offset>q.Ru){e.msg="invalid distance too far back";q.mode=30;break}q.mode=25;case 25:if(0===w)break a;
t=p-w;if(q.offset>t){t=q.offset-t;if(t>q.Qk&&q.PB){e.msg="invalid distance too far back";q.mode=30;break}t>q.Eg?(t-=q.Eg,H=q.Fg-t):H=q.Eg-t;t>q.length&&(t=q.length);la=q.window}else la=y,H=v-q.offset,t=q.length;t>w&&(t=w);w-=t;q.length-=t;do y[v++]=la[H++];while(--t);0===q.length&&(q.mode=21);break;case 26:if(0===w)break a;y[v++]=q.length;w--;q.mode=21;break;case 27:if(q.Ei){for(;32>I;){if(0===B)break a;B--;E|=F[C++]<<I;I+=8}p-=w;e.it+=p;q.total+=p;p&&(e.tm=q.check=q.flags?c(q.check,y,p,v-p):k(q.check,
y,p,v-p));p=w;if((q.flags?E:m(E))!==q.check){e.msg="incorrect data check";q.mode=30;break}I=E=0}q.mode=28;case 28:if(q.Ei&&q.flags){for(;32>I;){if(0===B)break a;B--;E+=F[C++]<<I;I+=8}if(E!==(q.total&4294967295)){e.msg="incorrect length check";q.mode=30;break}I=E=0}q.mode=29;case 29:da=1;break a;case 30:da=-3;break a;case 31:return-4;default:return-2}e.nf=v;e.ge=w;e.Dl=C;e.Kg=B;q.nl=E;q.Od=I;if((q.Fg||p!==e.ge&&30>q.mode&&(27>q.mode||4!==f))&&a(e,e.ui,e.nf,p-e.ge))return q.mode=31,-4;P-=e.Kg;p-=e.ge;
e.vC+=P;e.it+=p;q.total+=p;q.Ei&&p&&(e.tm=q.check=q.flags?c(q.check,y,p,e.nf-p):k(q.check,y,p,e.nf-p));e.QO=q.Od+(q.cw?64:0)+(12===q.mode?128:0)+(20===q.mode||15===q.mode?256:0);(0===P&&0===p||4===f)&&0===da&&(da=-5);return da};e.SQ=function(a){if(!a||!a.state)return-2;var b=a.state;b.window&&(b.window=null);a.state=null;return 0};e.TQ=function(a,b){a&&a.state&&(a=a.state,0!==(a.Ei&2)&&(a.head=b,b.done=!1))};e.VQ=function(b,c){var g=c.length;if(!b||!b.state)return-2;var e=b.state;if(0!==e.Ei&&11!==
e.mode)return-2;if(11===e.mode){var f=k(1,c,g,0);if(f!==e.check)return-3}if(a(b,c,g,g))return e.mode=31,-4;e.wA=1;return 0};e.UX="pako inflate (from Nodeca project)"},{"../utils/common":1,"./adler32":3,"./crc32":5,"./inffast":7,"./inftrees":9}],9:[function(f,w){var e=f("../utils/common"),m=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],n=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],v=[1,2,3,4,5,7,9,13,17,
25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],q=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];w.exports=function(f,y,a,w,k,c,l,b){var g=b.Od,r,z,u,C,D,O,K=0,A=new e.tq(16);var M=new e.tq(16);var L,T=0;for(r=0;15>=r;r++)A[r]=0;for(z=0;z<w;z++)A[y[a+z]]++;var J=g;for(u=15;1<=u&&0===A[u];u--);J>u&&(J=u);if(0===u)return k[c++]=20971520,k[c++]=20971520,b.Od=1,0;for(g=1;g<u&&0===A[g];g++);J<g&&(J=g);for(r=
C=1;15>=r;r++)if(C<<=1,C-=A[r],0>C)return-1;if(0<C&&(0===f||1!==u))return-1;M[1]=0;for(r=1;15>r;r++)M[r+1]=M[r]+A[r];for(z=0;z<w;z++)0!==y[a+z]&&(l[M[y[a+z]]++]=z);if(0===f){var W=L=l;var B=19}else 1===f?(W=m,K-=257,L=n,T-=257,B=256):(W=v,L=q,B=-1);z=D=0;r=g;var ba=c;w=J;M=0;var I=-1;var P=1<<J;var p=P-1;if(1===f&&852<P||2===f&&592<P)return 1;for(;;){var da=r-M;if(l[z]<B){var H=0;var t=l[z]}else l[z]>B?(H=L[T+l[z]],t=W[K+l[z]]):(H=96,t=0);C=1<<r-M;g=O=1<<w;do O-=C,k[ba+(D>>M)+O]=da<<24|H<<16|t|0;
while(0!==O);for(C=1<<r-1;D&C;)C>>=1;0!==C?(D&=C-1,D+=C):D=0;z++;if(0===--A[r]){if(r===u)break;r=y[a+l[z]]}if(r>J&&(D&p)!==I){0===M&&(M=J);ba+=g;w=r-M;for(C=1<<w;w+M<u;){C-=A[w+M];if(0>=C)break;w++;C<<=1}P+=1<<w;if(1===f&&852<P||2===f&&592<P)return 1;I=D&p;k[I]=J<<24|w<<16|ba-c|0}}0!==D&&(k[ba+D]=r-M<<24|4194304);b.Od=J;return 0}},{"../utils/common":1}],10:[function(f,w){w.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory",
"-5":"buffer error","-6":"incompatible version"}},{}],11:[function(f,w){w.exports=function(){this.input=null;this.vC=this.Kg=this.Dl=0;this.ui=null;this.it=this.ge=this.nf=0;this.msg="";this.state=null;this.QO=2;this.tm=0}},{}],"/lib/inflate.js":[function(f,w,e){function m(c){if(!(this instanceof m))return new m(c);var b=this.options=q.assign({mN:16384,Te:0,to:""},c||{});b.raw&&0<=b.Te&&16>b.Te&&(b.Te=-b.Te,0===b.Te&&(b.Te=-15));!(0<=b.Te&&16>b.Te)||c&&c.Te||(b.Te+=32);15<b.Te&&48>b.Te&&0===(b.Te&
15)&&(b.Te|=15);this.Qz=0;this.msg="";this.ended=!1;this.su=[];this.Gn=new z;this.Gn.ge=0;c=v.UQ(this.Gn,b.Te);if(c!==y.co)throw Error(a[c]);this.QQ=new k;v.TQ(this.Gn,this.QQ)}function n(c,b){b=new m(b);b.push(c,!0);if(b.Qz)throw b.msg||a[b.Qz];return b.result}var v=f("./zlib/inflate"),q=f("./utils/common"),r=f("./utils/strings"),y=f("./zlib/constants"),a=f("./zlib/messages"),z=f("./zlib/zstream"),k=f("./zlib/gzheader"),c=Object.prototype.toString;m.prototype.push=function(a,b){var g=this.Gn,e=this.options.mN,
f=this.options.lX,k,l=!1;if(this.ended)return!1;b=b===~~b?b:!0===b?y.Tt:y.ED;"string"===typeof a?g.input=r.IM(a):"[object ArrayBuffer]"===c.call(a)?g.input=new Uint8Array(a):g.input=a;g.Dl=0;g.Kg=g.input.length;do{0===g.ge&&(g.ui=new q.nm(e),g.nf=0,g.ge=e);a=v.zA(g,y.ED);a===y.RL&&f&&("string"===typeof f?k=r.uU(f):"[object ArrayBuffer]"===c.call(f)?k=new Uint8Array(f):k=f,a=v.VQ(this.Gn,k));a===y.QL&&!0===l&&(a=y.co,l=!1);if(a!==y.Ut&&a!==y.co)return this.oB(a),this.ended=!0,!1;if(g.nf&&(0===g.ge||
a===y.Ut||0===g.Kg&&(b===y.Tt||b===y.FD)))if("string"===this.options.to){var m=r.DV(g.ui,g.nf);var n=g.nf-m;var w=r.SM(g.ui,m);g.nf=n;g.ge=e-n;n&&q.xm(g.ui,g.ui,m,n,0);this.sH(w)}else this.sH(q.uI(g.ui,g.nf));0===g.Kg&&0===g.ge&&(l=!0)}while((0<g.Kg||0===g.ge)&&a!==y.Ut);a===y.Ut&&(b=y.Tt);if(b===y.Tt)return a=v.SQ(this.Gn),this.oB(a),this.ended=!0,a===y.co;b===y.FD&&(this.oB(y.co),g.ge=0);return!0};m.prototype.sH=function(a){this.su.push(a)};m.prototype.oB=function(a){a===y.co&&(this.result="string"===
this.options.to?this.su.join(""):q.BF(this.su));this.su=[];this.Qz=a;this.msg=this.Gn.msg};e.hW=m;e.zA=n;e.WX=function(a,b){b=b||{};b.raw=!0;return n(a,b)};e.QY=n},{"./utils/common":1,"./utils/strings":2,"./zlib/constants":4,"./zlib/gzheader":6,"./zlib/inflate":8,"./zlib/messages":10,"./zlib/zstream":11}]},{},[])("/lib/inflate.js")});var M=window.rS.zA},function(D,w,f){f(32).a.module.shader_texts=function(f){f["anchors.glslf"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"include",oa:"precision_statement.glslf"},
{$:"include",oa:"std.glsl"},{$:"txt",aa:"GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { GLSL_OUT_FRAG_COLOR = vec4 ( 1.0 ) ; }".split(" ")}]};f["anchors.glslv"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"var",ba:"ANCHOR_NUM",aa:["0"]},{$:"include",oa:"std.glsl"},{$:"txt",aa:"uniform vec3 u_position [ ANCHOR_NUM ] ; uniform mat4 u_view_proj_matrix ; uniform vec2 u_texel_size ; GLSL_IN float a_index ; void main ( ) { int c = int ( mod ( a_index , 3.0 ) ) ; int d = int ( a_index / 3.0 ) ; vec2 e ; if ( c == 0 ) { e = vec2 ( - 4.0 * u_texel_size [ 0 ] , - u_texel_size [ 1 ] ) ; } else if ( c == 1 ) { e = vec2 ( 4.0 * u_texel_size [ 0 ] , - u_texel_size [ 1 ] ) ; } else { e = vec2 ( 0.0 , 5.0 * u_texel_size [ 1 ] ) ; } vec4 f = u_view_proj_matrix * vec4 ( u_position [ d ] , 1.0 ) ; f . xy += e * f . w ; gl_Position = f ; }".split(" ")}]};
f["color_id.glslf"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"var",ba:"PRECISION",aa:["highp"]},{$:"var",ba:"NODES",aa:["0"]},{$:"var",ba:"USE_TBN_SHADING",aa:["0"]},{$:"var",ba:"ALPHA",aa:["0"]},{$:"var",ba:"ALPHA_CLIP",aa:["0"]},{$:"var",ba:"TEXTURE_COLOR",aa:["0"]},{$:"var",ba:"SHADOW_USAGE",aa:["NO_SHADOWS"]},{$:"var",ba:"USE_OUTLINE",aa:["0"]},{$:"var",ba:"USE_VIEW_TSR",aa:["0"]},{$:"var",ba:"USE_VIEW_TSR_INVERSE",aa:["0"]},{$:"var",ba:"USE_MODEL_TSR",aa:["0"]},{$:"var",ba:"USE_MODEL_TSR_INVERSE",
aa:["0"]},{$:"var",ba:"CALC_TBN_SPACE",aa:["0"]},{$:"var",ba:"CAMERA_TYPE",aa:["CAM_TYPE_PERSP"]},{$:"var",ba:"USE_POSITION_CLIP",aa:["0"]},{$:"var",ba:"USE_REFRACTION",aa:["0"]},{$:"var",ba:"USE_REFRACTION_CORRECTION",aa:["0"]},{$:"var",ba:"USE_ENVIRONMENT_LIGHT",aa:["0"]},{$:"var",ba:"TEXTURE_BLEND_TYPE",aa:["TEXTURE_BLEND_TYPE_MIX"]},{$:"var",ba:"NUM_LIGHTS",aa:["0"]},{$:"var",ba:"NUM_LAMP_LIGHTS",aa:["0"]},{$:"var",ba:"SKY_TEXTURE",aa:["0"]},{$:"var",ba:"SKY_COLOR",aa:["0"]},{$:"var",ba:"NUM_VALUES",
aa:["0"]},{$:"var",ba:"NUM_RGBS",aa:["0"]},{$:"var",ba:"REFLECTION_TYPE",aa:["REFL_NONE"]},{$:"var",ba:"POISSON_DISK_NUM",aa:["NO_SOFT_SHADOWS"]},{$:"var",ba:"USE_DERIVATIVES_EXT",aa:["0"]},{$:"var",ba:"USE_LOD_SMOOTHING",aa:["0"]},{$:"cond",da:[{$:"if",ga:["GLSL1","USE_DERIVATIVES_EXT",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"extension",aa:["GL_OES_standard_derivatives",":","enable"]}]}}]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"cond",da:[{$:"if",ga:["NODES",
"ALPHA",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"include",oa:"math.glslv"}]}}]},{$:"cond",da:[{$:"if",ga:["USE_LOD_SMOOTHING"],ha:{$:"grp",da:[{$:"include",oa:"coverage.glslf"}]}}]},{$:"cond",da:[{$:"if",ga:["NODES","ALPHA",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"uniform float u_time ; uniform float u_environment_energy ;".split(" ")},{$:"cond",da:[{$:"if",ga:["NUM_LIGHTS",0,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec4 u_light_positions [ NUM_LIGHTS ] ; uniform vec3 u_light_directions [ NUM_LIGHTS ] ; uniform vec4 u_light_color_intensities [ NUM_LIGHTS ] ;".split(" ")}]}}]},
{$:"txt",aa:["uniform","vec3","u_camera_eye_frag",";"]},{$:"cond",da:[{$:"if",ga:["USE_NODE_FRESNEL","USE_NODE_LAYER_WEIGHT",{$:"logical_or_expr",ia:2},"CAMERA_TYPE","CAM_TYPE_ORTHO",{$:"equal_expr",ia:2},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec3","u_camera_direction",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2},"USE_VIEW_TSR",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat3","u_view_tsr_frag",";"]}]}}]},
{$:"cond",da:[{$:"if",ga:["USE_VIEW_TSR_INVERSE"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat3","u_view_tsr_inverse",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_MODEL_TSR"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat3","u_model_tsr",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_MODEL_TSR_INVERSE"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat3","u_model_tsr_inverse",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform",
"samplerCube","u_sky_texture",";"]}]}},{$:"elif",ga:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec3 u_horizon_color ; uniform vec3 u_zenith_color ;".split(" ")}]}}]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec4","u_diffuse_color",";"]},{$:"cond",da:[{$:"if",ga:["TEXTURE_COLOR"],ha:{$:"grp",da:[{$:"txt",aa:"uniform sampler2D u_sampler ; uniform float u_alpha_factor ;".split(" ")}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_OUTLINE",
{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec3","u_color_id",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_CURVE_VEC","USE_NODE_CURVE_RGB","USE_NODE_VALTORGB",{$:"logical_or_expr",ia:3}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","sampler2D","u_nodes_texture",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["NODES","ALPHA",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform",
"sampler2D","u_plane_reflection",";"]}]}},{$:"elif",ga:["REFLECTION_TYPE","REFL_CUBE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","samplerCube","u_cube_reflection",";"]}]}},{$:"elif",ga:["REFLECTION_TYPE","REFL_MIRRORMAP",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_B4W_REFRACTION"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","sampler2D","u_refractmap",";"]},{$:"cond",da:[{$:"if",ga:["USE_REFRACTION",
"USE_REFRACTION_CORRECTION",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","PRECISION","sampler2D","u_scene_depth",";"]}]}}]}]}}]},{$:"txt",aa:"uniform float u_emit ; uniform float u_ambient ; uniform vec2 u_fresnel_params ;".split(" ")},{$:"cond",da:[{$:"if",ga:["REFLECTION_TYPE","REFL_MIRRORMAP",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","float","u_mirror_factor",";"]}]}},{$:"elif",ga:["REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",
aa:["uniform","vec4","u_refl_plane",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_LAMP"],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec3 u_lamp_light_positions [ NUM_LAMP_LIGHTS ] ; uniform vec3 u_lamp_light_directions [ NUM_LAMP_LIGHTS ] ; uniform vec3 u_lamp_light_color_intensities [ NUM_LAMP_LIGHTS ] ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_VALUE"],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec4 u_node_values [ NUM_VALUES ] ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_RGB"],ha:{$:"grp",
da:[{$:"txt",aa:"uniform vec3 u_node_rgbs [ NUM_RGBS ] ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["POISSON_DISK_NUM","NO_SOFT_SHADOWS",{$:"non_equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec4","u_pcf_blur_radii",";"]}]}}]},{$:"txt",aa:"uniform vec4 u_csm_center_dists ; uniform PRECISION GLSL_SMPLR2D_SHDW u_shadow_map0 ; uniform PRECISION GLSL_SMPLR2D_SHDW u_shadow_map1 ; uniform PRECISION GLSL_SMPLR2D_SHDW u_shadow_map2 ; uniform PRECISION GLSL_SMPLR2D_SHDW u_shadow_map3 ; uniform sampler2D u_shadow_mask ;".split(" ")}]}}]}]}}]},
{$:"cond",da:[{$:"if",ga:["USE_OUTLINE"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","float","u_outline_intensity",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_OBJECT_INFO"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec3","u_obj_info",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_LOD_SMOOTHING"],ha:{$:"grp",da:[{$:"txt",aa:"uniform float u_lod_coverage ; uniform float u_lod_cmp_logic ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["NODES","ALPHA",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"GLSL_IN vec3 h ; GLSL_IN vec4 i ; GLSL_IN vec3 j ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["CALC_TBN_SPACE"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec4","k",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2},"USE_POSITION_CLIP",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec3","l",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_B4W_REFRACTION","USE_REFRACTION",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","float","m",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SHADOW_USAGE","SHADOW_MASK_GENERATION",
{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"GLSL_IN vec4 n ; GLSL_IN vec4 o ; GLSL_IN vec4 u ; GLSL_IN vec4 v ;".split(" ")}]}}]}]}},{$:"else",ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["TEXTURE_COLOR"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec2","A",";"]}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_TBN_SHADING"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec3","B",";"]}]}}]},{$:"txt",aa:["GLSL_OUT","vec4","GLSL_OUT_FRAG_COLOR",";"]},{$:"cond",da:[{$:"if",ga:["NODES","ALPHA",{$:"logical_and_expr",
ia:2}],ha:{$:"grp",da:[{$:"include",oa:"nodes.glslf"}]}}]},{$:"txt",aa:["void","main","(",")","{"]},{$:"cond",da:[{$:"if",ga:["USE_LOD_SMOOTHING"],ha:{$:"grp",da:[{$:"txt",aa:"if ( ! C ( u_lod_coverage , u_lod_cmp_logic ) ) discard ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["ALPHA"],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["NODES"],ha:{$:"grp",da:[{$:"txt",aa:"vec3 D = normalize ( u_camera_eye_frag - h ) ; vec3 E ; vec3 F ; vec3 G ; vec4 H ; float I ; J ( D , E , F , G , H , I ) ; float L = I ;".split(" ")}]}},
{$:"else",ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["TEXTURE_COLOR"],ha:{$:"grp",da:[{$:"txt",aa:"float L = ( GLSL_TEXTURE ( u_sampler , A ) ) . a ;".split(" ")},{$:"cond",da:[{$:"if",ga:["TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MIX",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"float M = u_alpha_factor * L ; M += ( 1.0 - step ( 0.0 , M ) ) ; L = mix ( M , 1.0 , u_diffuse_color . a ) ;".split(" ")}]}}]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"float L = u_diffuse_color . a ;".split(" ")}]}}]}]}}]},
{$:"cond",da:[{$:"if",ga:["ALPHA_CLIP"],ha:{$:"grp",da:[{$:"txt",aa:"if ( L < 0.5 ) discard ; L = 1.0 ;".split(" ")}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_OUTLINE"],ha:{$:"grp",da:[{$:"txt",aa:"GLSL_OUT_FRAG_COLOR = vec4 ( 1.0 , 1.0 , 1.0 , u_outline_intensity ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"GLSL_OUT_FRAG_COLOR = vec4 ( u_color_id , 1.0 ) ;".split(" ")}]}}]},{$:"txt",aa:["}"]}]};f["color_id.glslv"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"var",ba:"PRECISION",
aa:["highp"]},{$:"var",ba:"NODES",aa:["0"]},{$:"var",ba:"CAUSTICS",aa:["0"]},{$:"var",ba:"CALC_TBN_SPACE",aa:["0"]},{$:"var",ba:"MAIN_BEND_COL",aa:["0"]},{$:"var",ba:"DETAIL_BEND",aa:["0"]},{$:"var",ba:"CALC_TBN",aa:["0"]},{$:"var",ba:"USE_TBN_SHADING",aa:["0"]},{$:"var",ba:"USE_POSITION_CLIP",aa:["0"]},{$:"var",ba:"ALPHA",aa:["0"]},{$:"var",ba:"TEXTURE_COLOR",aa:["0"]},{$:"var",ba:"AU_QUALIFIER",aa:["GLSL_IN"]},{$:"var",ba:"STATIC_BATCH",aa:["0"]},{$:"var",ba:"WIND_BEND",aa:["0"]},{$:"var",ba:"BEND_CENTER_ONLY",
aa:["0"]},{$:"var",ba:"BILLBOARD",aa:["0"]},{$:"var",ba:"BILLBOARD_JITTERED",aa:["0"]},{$:"var",ba:"DYNAMIC_GRASS",aa:["0"]},{$:"var",ba:"SKINNED",aa:["0"]},{$:"var",ba:"FRAMES_BLENDING",aa:["0"]},{$:"var",ba:"VERTEX_ANIM",aa:["0"]},{$:"var",ba:"SMAA_JITTER",aa:["0"]},{$:"var",ba:"VERTEX_ANIM_MIX_NORMALS_FACTOR",aa:["u_va_frame_factor"]},{$:"var",ba:"MAX_BONES",aa:["0"]},{$:"var",ba:"REFLECTION_TYPE",aa:["REFL_NONE"]},{$:"var",ba:"REFRACTIVE",aa:["0"]},{$:"include",oa:"std.glsl"},{$:"include",oa:"math.glslv"},
{$:"include",oa:"to_world.glslv"},{$:"include",oa:"scale_texcoord.glslv"},{$:"cond",da:[{$:"if",ga:["STATIC_BATCH"],ha:{$:"grp",da:[{$:"txt",aa:"const mat3 u_model_tsr = mat3 ( 0.0 , 0.0 , 0.0 , 1.0 , 1.0 , 1.0 , 0.0 , 0.0 , 0.0 ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["uniform","PRECISION","mat3","u_model_tsr",";"]}]}}]},{$:"txt",aa:"uniform mat3 u_view_tsr ; uniform mat4 u_proj_matrix ;".split(" ")},{$:"cond",da:[{$:"if",ga:["BILLBOARD","DYNAMIC_GRASS",{$:"logical_or_expr",ia:2}],
ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec3","u_camera_eye",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["NODES","ALPHA",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["SMAA_JITTER"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec2","u_subpixel_jitter",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_B4W_REFRACTION"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","PRECISION","float","u_view_max_depth",";"]}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["SKINNED"],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec4 u_quatsb [ MAX_BONES ] ; uniform vec4 u_transb [ MAX_BONES ] ; uniform vec4 u_arm_rel_trans ; uniform vec4 u_arm_rel_quat ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["FRAMES_BLENDING"],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec4 u_quatsa [ MAX_BONES ] ; uniform vec4 u_transa [ MAX_BONES ] ; uniform float u_frame_factor ;".split(" ")}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["WIND_BEND"],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["BILLBOARD_JITTERED"],ha:{$:"grp",da:[{$:"txt",aa:"uniform float u_jitter_amp ; uniform float u_jitter_freq ;".split(" ")}]}}]},{$:"txt",aa:"uniform vec3 u_wind ; uniform PRECISION float u_time ;".split(" ")}]}}]},{$:"cond",
da:[{$:"if",ga:["VERTEX_ANIM"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","float","u_va_frame_factor",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["TEXTURE_COLOR"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec3","u_texture_scale",";"]}]}}]},{$:"txt",aa:"GLSL_IN vec3 a_position ; GLSL_IN vec4 a_tbn ;".split(" ")},{$:"cond",da:[{$:"if",ga:["NODES","ALPHA",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["USE_TBN_SHADING"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec3","a_shade_tangs",";"]}]}}]}]}}]},
{$:"cond",da:[{$:"if",ga:["SKINNED"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec4","a_influence",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["WIND_BEND"],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["MAIN_BEND_COL"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","float","a_bending_col_main",";"]},{$:"cond",da:[{$:"if",ga:["DETAIL_BEND"],ha:{$:"grp",da:[{$:"txt",aa:"GLSL_IN vec3 a_bending_col_detail ; AU_QUALIFIER float au_detail_bending_amp ; AU_QUALIFIER float au_branch_bending_amp ; AU_QUALIFIER float au_detail_bending_freq ;".split(" ")}]}}]}]}}]},
{$:"txt",aa:"AU_QUALIFIER float au_wind_bending_amp ; AU_QUALIFIER float au_wind_bending_freq ;".split(" ")},{$:"cond",da:[{$:"if",ga:["BEND_CENTER_ONLY"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec3","a_emitter_center",";"]}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["WIND_BEND","BILLBOARD",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["VERTEX_ANIM"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec3","a_position_next",";"]},
{$:"cond",da:[{$:"if",ga:["NODES","ALPHA",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","USE_NODE_NORMAL_MAP","CAUSTICS","CALC_TBN_SPACE",{$:"logical_or_expr",ia:5}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec4","a_tbn_next",";"]}]}}]}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["TEXTURE_COLOR"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec2","a_texcoord",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_TBN_SHADING"],ha:{$:"grp",da:[{$:"txt",
aa:["GLSL_OUT","vec3","B",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["NODES","ALPHA",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"GLSL_OUT vec3 h ; GLSL_OUT vec4 i ; GLSL_OUT vec3 j ;".split(" ")},{$:"cond",da:[{$:"if",ga:["CALC_TBN_SPACE"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec4","k",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2},"USE_POSITION_CLIP",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec3","l",";"]}]}}]},{$:"cond",
da:[{$:"if",ga:["USE_NODE_B4W_REFRACTION","REFRACTIVE",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","float","m",";"]}]}}]}]}},{$:"else",ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["TEXTURE_COLOR"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec2","A",";"]}]}}]}]}}]},{$:"include",oa:"skin.glslv"},{$:"include",oa:"wind_bending.glslv"},{$:"cond",da:[{$:"if",ga:["NODES","ALPHA",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"include",oa:"nodes.glslv"}]}}]},{$:"txt",aa:"void main ( ) { mat3 N = u_view_tsr ; vec3 O = a_position ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["NODES","ALPHA","CALC_TBN_SPACE","USE_NODE_MATERIAL_BEGIN","USE_NODE_NORMAL_MAP","USE_NODE_GEOMETRY_NO","CAUSTICS","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{$:"logical_and_expr",ia:3},{$:"logical_or_expr",ia:6},{$:"logical_and_expr",ia:3},"USE_TBN_SHADING","CALC_TBN",{$:"logical_and_expr",ia:2},"USE_NODE_BSDF_BEGIN","USE_NODE_FRESNEL","USE_NODE_TEX_COORD_NO","USE_NODE_LAYER_WEIGHT","USE_NODE_BUMP",{$:"logical_or_expr",ia:7}],ha:{$:"grp",da:[{$:"txt",aa:"float P , Q ; vec4 S = R ( a_tbn , P , Q ) ; vec3 U = T ( S , vec3 ( 0.0 , 1.0 , 0.0 ) ) ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["CALC_TBN_SPACE"],ha:{$:"grp",da:[{$:"txt",aa:"vec3 V = T ( S , vec3 ( 1.0 , 0.0 , 0.0 ) ) ; vec3 W = Q * cross ( U , V ) ; vec4 Y = X ( W , Q * P ) ; V = T ( Y , U ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec3 V = vec3 ( 0.0 ) ; vec3 W = vec3 ( 0.0 ) ;".split(" ")}]}}]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec3 U = vec3 ( 0.0 ) ; vec3 V = vec3 ( 0.0 ) ; vec3 W = vec3 ( 0.0 ) ;".split(" ")}]}}]},{$:"txt",aa:["mat3","Z","=","u_model_tsr",";"]},{$:"cond",
da:[{$:"if",ga:["USE_TBN_SHADING"],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["CALC_TBN"],ha:{$:"grp",da:[{$:"txt",aa:"vec3 ac = normalize ( _ ( u_model_tsr , U ) ) ; vec3 ad = cross ( vec3 ( 0.0 , 0.0 , 1.0 ) , ac ) ; vec3 ae = cross ( ac , ad ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["vec3","ae","=","a_shade_tangs",";"]}]}}]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec3 ae = vec3 ( 0.0 ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["VERTEX_ANIM"],ha:{$:"grp",da:[{$:"txt",aa:"O = mix ( O , a_position_next , u_va_frame_factor ) ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["NODES","ALPHA",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","USE_NODE_NORMAL_MAP","CAUSTICS","CALC_TBN_SPACE",{$:"logical_or_expr",ia:5}],ha:{$:"grp",da:[{$:"txt",aa:"float af , ah ; vec4 ai = R ( a_tbn_next , af , ah ) ; vec3 aj = T ( ai , vec3 ( 0.0 , 1.0 , 0.0 ) ) ; U = mix ( U , aj , VERTEX_ANIM_MIX_NORMALS_FACTOR ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["CALC_TBN_SPACE"],ha:{$:"grp",da:[{$:"txt",
aa:"vec3 ak = T ( ai , vec3 ( 1.0 , 0.0 , 0.0 ) ) ; vec3 al = ah * cross ( aj , ak ) ; vec4 am = X ( al , ah * af ) ; ak = T ( am , aj ) ; V = mix ( V , ak , u_va_frame_factor ) ; W = mix ( W , al , u_va_frame_factor ) ;".split(" ")}]}}]}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["SKINNED"],ha:{$:"grp",da:[{$:"txt",aa:"an ( O , V , W , U ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["WIND_BEND","BILLBOARD",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["vec3","ao","=","au_center_pos",";"]}]}},
{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec3 ao = vec3 ( 0.0 ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["BILLBOARD"],ha:{$:"grp",da:[{$:"txt",aa:"vec3 aq = ap ( Z , ao ) ; Z = as ( u_camera_eye , aq , N , Z ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["WIND_BEND","BILLBOARD_JITTERED",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"Z = at ( u_wind , u_time , u_jitter_amp , u_jitter_freq , aq , Z ) ;".split(" ")}]}}]},{$:"txt",aa:"au aw = av ( O - ao , ao , V , ae , W , U , Z ) ; aw . ao = aq ;".split(" ")}]}},
{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"au aw = av ( O , ao , V , ae , W , U , Z ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["WIND_BEND"],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["NODES","ALPHA",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"ax ( aw . O , aw . ao , U , mat4 ( 0.0 ) ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["MAIN_BEND_COL","DETAIL_BEND",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 ay = T ( a_tbn , vec3 ( 0.0 , 1.0 , 0.0 ) ) ;".split(" ")}]}},
{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec3 ay = vec3 ( 0.0 ) ;".split(" ")}]}}]},{$:"txt",aa:"ax ( aw . O , aw . ao , ay , mat4 ( 0.0 ) ) ;".split(" ")}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["NODES","ALPHA",{$:"logical_and_expr",ia:2},{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["TEXTURE_COLOR"],ha:{$:"grp",da:[{$:"txt",aa:"A = az ( a_texcoord , u_texture_scale ) ;".split(" ")}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["NODES","ALPHA",{$:"logical_and_expr",ia:2}],ha:{$:"grp",
da:[{$:"txt",aa:"h = aw . O ;".split(" ")},{$:"cond",da:[{$:"if",ga:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","USE_NODE_NORMAL_MAP","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{$:"logical_and_expr",ia:3},"USE_NODE_TEX_COORD_NO","USE_NODE_BSDF_BEGIN","USE_NODE_FRESNEL","USE_NODE_TEX_COORD_RE","USE_NODE_LAYER_WEIGHT","USE_NODE_BUMP",{$:"logical_or_expr",ia:12}],ha:{$:"grp",da:[{$:"txt",aa:"j = aw . U ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["CALC_TBN_SPACE"],ha:{$:"grp",
da:[{$:"txt",aa:"float aA = ( dot ( cross ( aw . U , aw . V ) , aw . W ) < 0.0 ) ? - 1.0 : 1.0 ; k = vec4 ( aw . V , aA ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["USE_TBN_SHADING"],ha:{$:"grp",da:[{$:"txt",aa:"B = aw . aB ;".split(" ")}]}}]},{$:"txt",aa:"i = vec4 ( ap ( N , aw . O ) , 1.0 ) ; vec4 f = u_proj_matrix * i ;".split(" ")},{$:"cond",da:[{$:"if",ga:["SMAA_JITTER"],ha:{$:"grp",da:[{$:"txt",aa:"f . xy += u_subpixel_jitter * f . w ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["REFLECTION_TYPE",
"REFL_PLANE",{$:"equal_expr",ia:2},"USE_POSITION_CLIP",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"l = aC ( f ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_B4W_REFRACTION","REFRACTIVE",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"m = - i . z / u_view_max_depth ;".split(" ")}]}}]},{$:"txt",aa:["J","(",")",";"]}]}}]},{$:"txt",aa:"gl_Position = u_proj_matrix * vec4 ( ap ( N , aw . O ) , 1.0 ) ; }".split(" ")}]};f["debug_view.glslf"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},
{$:"var",ba:"DEBUG_SPHERE",aa:["0"]},{$:"var",ba:"WIREFRAME_QUALITY",aa:["0"]},{$:"var",ba:"ALPHA",aa:["0"]},{$:"var",ba:"DEBUG_SPHERE_DYNAMIC",aa:["0"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"include",oa:"color_util.glslf"},{$:"cond",da:[{$:"if",ga:["DEBUG_SPHERE",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:"uniform int u_debug_view_mode ; uniform float u_cluster_id ; uniform float u_batch_debug_id_color ; uniform float u_batch_debug_main_render_time ; uniform float u_debug_colors_seed ; uniform float u_debug_render_time_threshold ; uniform vec3 u_wireframe_edge_color ;".split(" ")}]}}]},
{$:"txt",aa:"GLSL_IN vec3 aD ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; const float aE = 1.0 ;".split(" ")},{$:"cond",da:[{$:"if",ga:["DEBUG_SPHERE"],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["DEBUG_SPHERE_DYNAMIC"],ha:{$:"grp",da:[{$:"txt",aa:"const vec3 aF = vec3 ( 1.0 , 0.05 , 0.05 ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"const vec3 aF = vec3 ( 0.05 , 0.05 , 1.0 ) ;".split(" ")}]}}]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"const vec3 aG = vec3 ( 0.4 , 0.4 , 1.0 ) ; const vec3 aH = vec3 ( 1.0 , 0.4 , 0.4 ) ; const vec3 aI = vec3 ( 1.0 , 1.0 , 1.0 ) ; const vec3 aJ = vec3 ( 0.0 , 133.0 / 255.0 , 66.0 / 255.0 ) ; const vec3 aK = vec3 ( 160.0 / 255.0 , 38.0 / 255.0 , 33.0 / 255.0 ) ;".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["DEBUG_SPHERE",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:"float aP ( ) { float aL = 1.0 ;".split(" ")},{$:"cond",da:[{$:"if",ga:["WIREFRAME_QUALITY",0,{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 aM = sign ( aD - vec3 ( 0.02 * aE ) ) ; if ( aM . x < 0.0 || aM . y < 0.0 || aM . z < 0.0 ) aL = 0.0 ;".split(" ")}]}},{$:"elif",ga:["WIREFRAME_QUALITY",1,{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["GLSL1"],ha:{$:"grp",da:[{$:"extension",
aa:["GL_OES_standard_derivatives",":","enable"]}]}}]},{$:"txt",aa:"vec3 aN = fwidth ( aD ) ; vec3 aO = smoothstep ( vec3 ( 0.0 ) , aN * aE , aD ) ; aL = min ( min ( aO . x , aO . y ) , aO . z ) ; aL = clamp ( aL , 0.0 , 1.0 ) ;".split(" ")}]}}]},{$:"txt",aa:["return","aL",";","}"]}]}}]},{$:"txt",aa:"void main ( ) { vec3 aQ = vec3 ( 0.0 ) ; float L = 0.0 ;".split(" ")},{$:"cond",da:[{$:"if",ga:["DEBUG_SPHERE"],ha:{$:"grp",da:[{$:"txt",aa:"vec3 aM = sign ( aD - vec3 ( 0.02 * aE ) ) ; if ( aM . x < 0.0 || aM . y < 0.0 || aM . z < 0.0 ) { aQ = aF ; L = 1.0 ; } else discard ;".split(" ")}]}},
{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"if ( u_debug_view_mode == DV_OPAQUE_WIREFRAME ) { float aL = aP ( ) ; aQ = vec3 ( mix ( u_wireframe_edge_color , aI , aL ) ) ; L = 1.0 ; } else if ( u_debug_view_mode == DV_TRANSPARENT_WIREFRAME ) { float aL = aP ( ) ; aQ = u_wireframe_edge_color ; L = mix ( 1.0 , 0.0 , aL ) ; } else if ( u_debug_view_mode == DV_FRONT_BACK_VIEW ) { float aL = aP ( ) ; if ( gl_FrontFacing ) aQ = mix ( u_wireframe_edge_color , aG , aL ) ; else aQ = mix ( u_wireframe_edge_color , aH , aL ) ; L = 1.0 ; } else if ( u_debug_view_mode == DV_CLUSTERS_VIEW ) { float aR = u_cluster_id + u_debug_colors_seed + 2.0 ; aQ = vec3 ( fract ( aR * 19.73 ) , fract ( aR * 6.34 ) , fract ( aR * 1.56 ) ) ; L = 1.0 ; } else if ( u_debug_view_mode == DV_BATCHES_VIEW ) { float aR = u_batch_debug_id_color + u_debug_colors_seed ; aQ = vec3 ( fract ( aR * 19.73 ) , fract ( aR * 6.34 ) , fract ( aR * 1.56 ) ) ; L = 1.0 ; } else if ( u_debug_view_mode == DV_RENDER_TIME ) { float aS ; if ( u_debug_render_time_threshold > 0.0 ) aS = clamp ( u_batch_debug_main_render_time , 0.0 , u_debug_render_time_threshold ) / u_debug_render_time_threshold ; else aS = 1.0 ; float aT = clamp ( 2.0 * aS , 0.0 , 1.0 ) ; float aU = clamp ( 2.0 * aS - 1.0 , 0.0 , 1.0 ) ; float aV = aS ; aQ = mix ( aJ , aK , vec3 ( aT , aU , aV ) ) ; L = 1.0 ; }".split(" ")}]}}]},
{$:"txt",aa:["aW","(","aQ",")",";"]},{$:"cond",da:[{$:"if",ga:["ALPHA"],ha:{$:"grp",da:[{$:"txt",aa:"aX ( aQ , L ) ;".split(" ")}]}}]},{$:"txt",aa:"GLSL_OUT_FRAG_COLOR = vec4 ( aQ , L ) ; }".split(" ")}]};f["debug_view.glslv"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"var",ba:"PRECISION",aa:["highp"]},{$:"var",ba:"USE_INSTANCED_PARTCLS",aa:["0"]},{$:"var",ba:"DEBUG_VIEW_SPECIAL_SKYDOME",aa:["0"]},{$:"var",ba:"DEBUG_SPHERE",aa:["0"]},{$:"var",ba:"WIND_BEND",aa:["0"]},{$:"var",ba:"DYNAMIC_GRASS",
aa:["0"]},{$:"var",ba:"BILLBOARD",aa:["0"]},{$:"var",ba:"VERTEX_ANIM",aa:["0"]},{$:"var",ba:"SKINNED",aa:["0"]},{$:"var",ba:"STATIC_BATCH",aa:["0"]},{$:"var",ba:"AU_QUALIFIER",aa:["GLSL_IN"]},{$:"var",ba:"BEND_CENTER_ONLY",aa:["0"]},{$:"var",ba:"FRAMES_BLENDING",aa:["0"]},{$:"var",ba:"MAIN_BEND_COL",aa:["0"]},{$:"var",ba:"MAX_BONES",aa:["0"]},{$:"var",ba:"DETAIL_BEND",aa:["0"]},{$:"var",ba:"BILLBOARD_JITTERED",aa:["0"]},{$:"include",oa:"std.glsl"},{$:"include",oa:"math.glslv"},{$:"include",oa:"to_world.glslv"},
{$:"txt",aa:"GLSL_IN vec3 a_position ; GLSL_IN vec4 a_tbn ; GLSL_IN float a_polyindex ;".split(" ")},{$:"cond",da:[{$:"if",ga:["USE_INSTANCED_PARTCLS"],ha:{$:"grp",da:[{$:"txt",aa:"GLSL_IN vec4 a_part_ts ; GLSL_IN vec4 a_part_r ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["DEBUG_SPHERE",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["WIND_BEND"],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["MAIN_BEND_COL"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","float","a_bending_col_main",
";"]},{$:"cond",da:[{$:"if",ga:["DETAIL_BEND"],ha:{$:"grp",da:[{$:"txt",aa:"GLSL_IN vec3 a_bending_col_detail ; AU_QUALIFIER float au_detail_bending_amp ; AU_QUALIFIER float au_branch_bending_amp ; AU_QUALIFIER float au_detail_bending_freq ;".split(" ")}]}}]}]}}]},{$:"txt",aa:"AU_QUALIFIER float au_wind_bending_amp ; AU_QUALIFIER float au_wind_bending_freq ;".split(" ")},{$:"cond",da:[{$:"if",ga:["BEND_CENTER_ONLY"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec3","a_emitter_center",";"]}]}}]}]}}]},
{$:"cond",da:[{$:"if",ga:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{$:"logical_or_expr",ia:3},"USE_INSTANCED_PARTCLS",{$:"logic_negative_expr",ia:1},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["VERTEX_ANIM"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec3","a_position_next",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SKINNED"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec4","a_influence",";"]}]}}]}]}}]},{$:"txt",aa:["GLSL_OUT",
"vec3","aD",";"]},{$:"cond",da:[{$:"if",ga:["STATIC_BATCH"],ha:{$:"grp",da:[{$:"txt",aa:"const mat3 u_model_tsr = mat3 ( 0.0 , 0.0 , 0.0 , 1.0 , 1.0 , 1.0 , 0.0 , 0.0 , 0.0 ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat3","u_model_tsr",";"]}]}}]},{$:"txt",aa:"uniform mat3 u_view_tsr ; uniform mat4 u_proj_matrix ;".split(" ")},{$:"cond",da:[{$:"if",ga:["DEBUG_SPHERE",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["WIND_BEND"],ha:{$:"grp",da:[{$:"txt",
aa:"uniform vec3 u_wind ; uniform float u_time ;".split(" ")},{$:"cond",da:[{$:"if",ga:["BILLBOARD","BILLBOARD_JITTERED",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"uniform float u_jitter_amp ; uniform float u_jitter_freq ;".split(" ")}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["DYNAMIC_GRASS","BILLBOARD",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec3","u_camera_eye",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["VERTEX_ANIM"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","float",
"u_va_frame_factor",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SKINNED"],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec4 u_quatsb [ MAX_BONES ] ; uniform vec4 u_transb [ MAX_BONES ] ; uniform vec4 u_arm_rel_trans ; uniform vec4 u_arm_rel_quat ;".split(" ")},{$:"cond",da:[{$:"if",ga:["FRAMES_BLENDING"],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec4 u_quatsa [ MAX_BONES ] ; uniform vec4 u_transa [ MAX_BONES ] ; uniform float u_frame_factor ;".split(" ")}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["DYNAMIC_GRASS"],ha:{$:"grp",
da:[{$:"txt",aa:"uniform PRECISION sampler2D u_grass_map_depth ; uniform sampler2D u_grass_map_color ; uniform vec4 u_camera_quat ; uniform vec3 u_grass_map_dim ; uniform float u_grass_size ; uniform float u_scale_threshold ;".split(" ")}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["DEBUG_SPHERE",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"include",oa:"skin.glslv"},{$:"include",oa:"wind_bending.glslv"},{$:"include",oa:"dynamic_grass.glslv"}]}}]},{$:"txt",aa:"void main ( ) { if ( a_polyindex == 0.0 ) aD = vec3 ( 1.0 , 0.0 , 0.0 ) ; else if ( a_polyindex == 1.0 ) aD = vec3 ( 0.0 , 0.0 , 1.0 ) ; else aD = vec3 ( 0.0 , 1.0 , 0.0 ) ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["DEBUG_VIEW_SPECIAL_SKYDOME"],ha:{$:"grp",da:[{$:"txt",aa:"gl_Position = vec4 ( a_position . xy , 0.9999999 , 1.0 ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["USE_INSTANCED_PARTCLS"],ha:{$:"grp",da:[{$:"txt",aa:"mat3 Z = aZ ( a_part_ts . xyz , aY ( ) ) ; Z = a_ ( vec3 ( a_part_ts . w ) , Z ) ; Z = bc ( a_part_r , Z ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["STATIC_BATCH",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:"Z = bd ( u_model_tsr , Z ) ;".split(" ")}]}}]}]}},
{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["mat3","Z","=","u_model_tsr",";"]}]}}]},{$:"txt",aa:"mat3 N = u_view_tsr ; vec3 O = a_position ; vec4 S = R ( a_tbn ) ; vec3 U = T ( S , vec3 ( 0.0 , 1.0 , 0.0 ) ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["DEBUG_SPHERE"],ha:{$:"grp",da:[{$:"txt",aa:"au aw = av ( O , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , Z ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["VERTEX_ANIM"],ha:{$:"grp",da:[{$:"txt",aa:"O = mix ( O , a_position_next , u_va_frame_factor ) ;".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["SKINNED"],ha:{$:"grp",da:[{$:"txt",aa:"vec3 V = vec3 ( 0.0 ) ; vec3 W = vec3 ( 0.0 ) ; an ( O , V , W , U ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{$:"logical_or_expr",ia:3},"USE_INSTANCED_PARTCLS",{$:"logic_negative_expr",ia:1},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["vec3","ao","=","au_center_pos",";"]}]}},{$:"elif",ga:["DYNAMIC_GRASS","USE_INSTANCED_PARTCLS",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",
aa:"vec3 ao = a_part_ts . xyz ; O = ap ( Z , O ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec3 ao = vec3 ( 0.0 ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["DYNAMIC_GRASS"],ha:{$:"grp",da:[{$:"txt",aa:"au aw = be ( O , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , ao , u_grass_map_depth , u_grass_map_color , u_grass_map_dim , u_grass_size , u_camera_eye , u_camera_quat , N , Z ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["BILLBOARD"],ha:{$:"grp",
da:[{$:"txt",aa:"vec3 aq = ap ( Z , ao ) ; Z = as ( u_camera_eye , aq , N , Z ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["WIND_BEND","BILLBOARD_JITTERED",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 bf = aq ; Z = at ( u_wind , u_time , u_jitter_amp , u_jitter_freq , bf , Z ) ;".split(" ")}]}}]},{$:"txt",aa:"au aw = av ( O - ao , ao , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , Z ) ; aw . ao = aq ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"au aw = av ( O , ao , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , Z ) ;".split(" ")}]}}]}]}}]},
{$:"cond",da:[{$:"if",ga:["WIND_BEND"],ha:{$:"grp",da:[{$:"txt",aa:"ax ( aw . O , aw . ao , U , mat4 ( 0.0 ) ) ;".split(" ")}]}}]}]}}]},{$:"txt",aa:"gl_Position = u_proj_matrix * vec4 ( ap ( N , aw . O ) , 1.0 ) ;".split(" ")}]}}]},{$:"txt",aa:["}"]}]};f["error.glslf"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"txt",aa:"GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { GLSL_OUT_FRAG_COLOR = vec4 ( 1.0 , 0.0 , 1.0 , 1.0 ) ; }".split(" ")}]};
f["error.glslv"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"include",oa:"std.glsl"},{$:"include",oa:"math.glslv"},{$:"txt",aa:"GLSL_IN vec3 a_position ; uniform mat3 u_view_tsr ; uniform mat4 u_proj_matrix ; void main ( ) { gl_Position = u_proj_matrix * bh ( u_view_tsr ) * vec4 ( a_position , 1.0 ) ; }".split(" ")}]};f["grass_map.glslf"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"var",ba:"DYNAMIC_GRASS_SIZE",aa:["0"]},{$:"var",ba:"DYNAMIC_GRASS_COLOR",aa:["0"]},{$:"include",oa:"precision_statement.glslf"},
{$:"include",oa:"std.glsl"},{$:"cond",da:[{$:"if",ga:["DYNAMIC_GRASS_SIZE"],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["DYNAMIC_GRASS_COLOR"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec4","bi",";"]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","float","bi",";"]}]}}]}]}},{$:"else",ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["DYNAMIC_GRASS_COLOR"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec3","bi",";"]}]}}]}]}}]},{$:"txt",aa:"GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) {".split(" ")},{$:"cond",
da:[{$:"if",ga:["DYNAMIC_GRASS_SIZE"],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["DYNAMIC_GRASS_COLOR"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT_FRAG_COLOR","=","bi",";"]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"GLSL_OUT_FRAG_COLOR = vec4 ( bi , vec3 ( 1.0 ) ) ;".split(" ")}]}}]}]}},{$:"else",ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["DYNAMIC_GRASS_COLOR"],ha:{$:"grp",da:[{$:"txt",aa:"GLSL_OUT_FRAG_COLOR = vec4 ( 1.0 , bi ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"GLSL_OUT_FRAG_COLOR = vec4 ( 1.0 ) ;".split(" ")}]}}]}]}}]},
{$:"txt",aa:["}"]}]};f["grass_map.glslv"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"var",ba:"DYNAMIC_GRASS_SIZE",aa:["0"]},{$:"var",ba:"DYNAMIC_GRASS_COLOR",aa:["0"]},{$:"var",ba:"WIND_BEND",aa:["0"]},{$:"var",ba:"STATIC_BATCH",aa:["0"]},{$:"var",ba:"BILLBOARD",aa:["0"]},{$:"var",ba:"BILLBOARD_JITTERED",aa:["0"]},{$:"include",oa:"std.glsl"},{$:"include",oa:"math.glslv"},{$:"include",oa:"to_world.glslv"},{$:"txt",aa:["GLSL_IN","vec3","a_position",";"]},{$:"cond",da:[{$:"if",ga:["DYNAMIC_GRASS_SIZE"],
ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","float","a_grass_size",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["DYNAMIC_GRASS_COLOR"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec3","a_grass_color",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["DYNAMIC_GRASS_SIZE"],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["DYNAMIC_GRASS_COLOR"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec4","bi",";"]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","float","bi",";"]}]}}]}]}},{$:"else",ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["DYNAMIC_GRASS_COLOR"],
ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec3","bi",";"]}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["STATIC_BATCH"],ha:{$:"grp",da:[{$:"txt",aa:"const mat3 u_model_tsr = mat3 ( 0.0 , 0.0 , 0.0 , 1.0 , 1.0 , 1.0 , 0.0 , 0.0 , 0.0 ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat3","u_model_tsr",";"]}]}}]},{$:"txt",aa:"uniform mat3 u_view_tsr ; uniform mat4 u_proj_matrix ;".split(" ")},{$:"cond",da:[{$:"if",ga:["BILLBOARD"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec3","u_camera_eye",
";"]}]}}]},{$:"cond",da:[{$:"if",ga:["WIND_BEND","BILLBOARD_JITTERED",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec3 u_wind ; uniform float u_time ; uniform float u_jitter_amp ; uniform float u_jitter_freq ;".split(" ")}]}}]},{$:"txt",aa:"void main ( ) { mat3 N = u_view_tsr ; mat3 Z = u_model_tsr ;".split(" ")},{$:"cond",da:[{$:"if",ga:["BILLBOARD"],ha:{$:"grp",da:[{$:"txt",aa:"vec3 aq = ap ( Z , vec3 ( 0.0 ) ) ; Z = as ( u_camera_eye , aq , N , u_model_tsr ) ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["WIND_BEND","BILLBOARD_JITTERED",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"Z = at ( u_wind , u_time , u_jitter_amp , u_jitter_freq , vec3 ( 0.0 ) , Z ) ;".split(" ")}]}}]},{$:"txt",aa:"au aw = av ( a_position , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , Z ) ; aw . ao = aq ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"au aw = av ( a_position , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , Z ) ;".split(" ")}]}}]},
{$:"txt",aa:"vec4 f = u_proj_matrix * vec4 ( ap ( N , aw . O ) , 1.0 ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["DYNAMIC_GRASS_SIZE"],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["DYNAMIC_GRASS_COLOR"],ha:{$:"grp",da:[{$:"txt",aa:"bi = vec4 ( a_grass_size , a_grass_color ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["bi","=","a_grass_size",";"]}]}}]}]}},{$:"else",ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["DYNAMIC_GRASS_COLOR"],ha:{$:"grp",da:[{$:"txt",aa:["bi","=","a_grass_color",";"]}]}}]}]}}]},
{$:"txt",aa:["gl_Position","=","f",";","}"]}]};f["halo.glslf"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"var",ba:"SKY_STARS",aa:["0"]},{$:"var",ba:"WATER_EFFECTS",aa:["0"]},{$:"var",ba:"DISABLE_FOG",aa:["0"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"txt",aa:"uniform vec4 u_diffuse_color ; uniform vec3 u_halo_rings_color ; uniform vec3 u_halo_lines_color ; uniform float u_halo_hardness ; uniform float u_halo_size ;".split(" ")},{$:"cond",da:[{$:"if",ga:["SKY_STARS"],
ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec3","u_sun_intensity",";"]},{$:"cond",da:[{$:"if",ga:["WATER_EFFECTS","DISABLE_FOG",{$:"logic_negative_expr",ia:1},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"uniform float u_halo_stars_blend ; uniform float u_halo_stars_height ; uniform float u_cam_water_depth ;".split(" ")}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["SKY_STARS","WATER_EFFECTS","DISABLE_FOG",{$:"logic_negative_expr",ia:1},{$:"logical_and_expr",ia:3}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN",
"vec4","bj",";"]}]}}]},{$:"txt",aa:"GLSL_IN vec2 A ; GLSL_IN float bk ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ;".split(" ")},{$:"include",oa:"color_util.glslf"},{$:"include",oa:"halo_color.glslf"},{$:"txt",aa:"void main ( ) { vec4 bm = bl ( ) ; vec3 aQ = bm . rgb ; float aM = bm . a ; aW ( aQ ) ; aX ( aQ , aM ) ; GLSL_OUT_FRAG_COLOR = vec4 ( aQ , aM ) ; }".split(" ")}]};f["halo.glslv"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"var",ba:"PRECISION",aa:["highp"]},{$:"var",ba:"WATER_EFFECTS",aa:["0"]},
{$:"var",ba:"DISABLE_FOG",aa:["0"]},{$:"var",ba:"SKY_STARS",aa:["0"]},{$:"var",ba:"STATIC_BATCH",aa:["0"]},{$:"include",oa:"std.glsl"},{$:"include",oa:"math.glslv"},{$:"include",oa:"to_world.glslv"},{$:"txt",aa:"uniform mat3 u_view_tsr ; uniform mat4 u_proj_matrix ; uniform PRECISION float u_halo_size ; uniform vec3 u_camera_eye ;".split(" ")},{$:"cond",da:[{$:"if",ga:["STATIC_BATCH"],ha:{$:"grp",da:[{$:"txt",aa:"const mat3 u_model_tsr = mat3 ( 0.0 , 0.0 , 0.0 , 1.0 , 1.0 , 1.0 , 0.0 , 0.0 , 0.0 ) ;".split(" ")}]}},
{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat3","u_model_tsr",";"]}]}}]},{$:"txt",aa:"GLSL_IN vec3 a_position ; GLSL_IN vec2 a_halo_bb_vertex ; GLSL_IN float a_random_vals ; GLSL_OUT vec2 A ; GLSL_OUT float bk ;".split(" ")},{$:"cond",da:[{$:"if",ga:["WATER_EFFECTS","DISABLE_FOG",{$:"logic_negative_expr",ia:1},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec4","bj",";"]}]}}]},{$:"txt",aa:"void main ( ) { mat3 N = u_view_tsr ; mat3 Z = u_model_tsr ; vec3 O = ap ( Z , a_position ) ; A = a_halo_bb_vertex * 2.0 - 1.0 ; bk = a_random_vals ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["SKY_STARS"],ha:{$:"grp",da:[{$:"txt",aa:"mat3 bo = bn ( O , N ) ; mat3 bp = N ; bp [ 0 ] [ 0 ] = 0.0 ; bp [ 0 ] [ 1 ] = 0.0 ; bp [ 0 ] [ 2 ] = 0.0 ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"mat3 bo = bn ( O , N ) ;".split(" ")}]}}]},{$:"txt",aa:"vec2 bq = ( a_halo_bb_vertex * 2.0 - 1.0 ) * u_halo_size ; vec3 bs = vec3 ( bq [ 0 ] , 0.0 , bq [ 1 ] ) ; vec3 bt = ap ( bo , bs ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["SKY_STARS"],ha:{$:"grp",da:[{$:"txt",aa:"vec4 f = u_proj_matrix * vec4 ( ap ( bp , bt ) , 1.0 ) ; f . z = 0.99999 * f . w ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["WATER_EFFECTS","DISABLE_FOG",{$:"logic_negative_expr",ia:1},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"bj = vec4 ( bt , 1.0 ) ;".split(" ")}]}}]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec4 f = u_proj_matrix * vec4 ( ap ( N , bt ) , 1.0 ) ;".split(" ")}]}}]},{$:"txt",aa:["gl_Position","=","f",";","}"]}]};f["irradiance_skybox.glslf"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"include",
oa:"color_util.glslf"},{$:"txt",aa:"uniform samplerCube u_sky_reflection ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; GLSL_IN vec3 bu ; void main ( ) { vec3 bv = normalize ( bu ) ; vec3 bw ; vec3 bx = vec3 ( 0.0 ) ; vec3 by = vec3 ( 0.0 , 0.0 , 1.0 ) ; vec3 bz = vec3 ( 1.0 , 0.0 , 0.0 ) ; const float bA = 0.025 ; float bB = 0.0 ; for ( float bC = 0.0 ; bC < 2.0 * M_PI ; bC += bA ) { for ( float bD = 0.0 ; bD < 0.5 * M_PI ; bD += bA ) { vec3 bE = vec3 ( sin ( bD ) * cos ( bC ) , sin ( bD ) * sin ( bC ) , cos ( bD ) ) ; vec3 bF = bE . x * bz + bE . y * by + bE . z * bv ; vec3 bw = GLSL_TEXTURE_CUBE ( u_sky_reflection , bF ) . rgb ; bG ( bw ) ; bx += bw * cos ( bD ) * sin ( bD ) ; bB ++ ; } } bx = M_PI * bx * ( 1.0 / float ( bB ) ) ; GLSL_OUT_FRAG_COLOR = vec4 ( bx , 1.0 ) ; }".split(" ")}]};
f["lens_flares.glslf"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"include",oa:"color_util.glslf"},{$:"txt",aa:"uniform sampler2D u_sampler ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec4 aQ = GLSL_TEXTURE ( u_sampler , A ) ; aW ( aQ . rgb ) ; aX ( aQ . rgb , aQ . a ) ; GLSL_OUT_FRAG_COLOR = aQ ; }".split(" ")}]};f["lens_flares.glslv"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"var",
ba:"NUM_LIGHTS",aa:["0"]},{$:"define",ba:"LIGHT_INDEX",aa:["0"]},{$:"include",oa:"std.glsl"},{$:"include",oa:"math.glslv"},{$:"txt",aa:"uniform mat3 u_view_tsr ; uniform mat4 u_proj_matrix ; uniform vec3 u_light_directions [ NUM_LIGHTS ] ; GLSL_IN float a_lf_dist ; GLSL_IN vec2 a_lf_bb_vertex ; GLSL_IN vec2 a_texcoord ; GLSL_OUT vec2 A ; void main ( ) { A = a_texcoord ; vec3 bH = normalize ( u_light_directions [ LIGHT_INDEX ] ) ; vec4 f = u_proj_matrix * vec4 ( bI ( u_view_tsr , bH ) , 0.0 ) ; f . x /= f . w ; f . y /= f . w ; f += 99999.0 * step ( f . z , 0.0 ) ; f += 100.0 * ( step ( 1.0 , abs ( f . x ) ) + step ( 1.0 , abs ( f . y ) ) ) ; f . x = a_lf_dist * f . x ; f . y = a_lf_dist * f . y ; float bJ = u_proj_matrix [ 1 ] [ 1 ] / u_proj_matrix [ 0 ] [ 0 ] ; vec2 bK = vec2 ( a_lf_bb_vertex . x / bJ , a_lf_bb_vertex . y ) ; if ( a_lf_dist < 0.999 ) { const float bL = 1.9 ; bK *= ( 1.0 + bL * length ( f . xy ) ) ; } gl_Position = vec4 ( f . xy + bK , 0.999999 , 1.0 ) ; }".split(" ")}]};
f["line.glslf"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"var",ba:"ALPHA",aa:["0"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"include",oa:"color_util.glslf"},{$:"txt",aa:"uniform vec4 u_diffuse_color ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec3 aQ = u_diffuse_color . xyz ; float L = u_diffuse_color . a ; aW ( aQ ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["ALPHA"],ha:{$:"grp",da:[{$:"txt",aa:"aX ( aQ , L ) ;".split(" ")}]}}]},{$:"txt",aa:"GLSL_OUT_FRAG_COLOR = vec4 ( aQ , L ) ; }".split(" ")}]};
f["line.glslv"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"include",oa:"std.glsl"},{$:"include",oa:"math.glslv"},{$:"include",oa:"to_world.glslv"},{$:"txt",aa:"GLSL_IN vec3 a_position ; GLSL_IN vec3 a_direction ; uniform mat3 u_model_tsr ; uniform mat3 u_view_tsr ; uniform mat4 u_proj_matrix ; uniform float u_height ; uniform float u_line_width ; void main ( ) { mat3 N = u_view_tsr ; mat3 Z = u_model_tsr ; au aw = av ( a_position , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , normalize ( a_direction ) , Z ) ; vec4 bM = u_proj_matrix * vec4 ( ap ( N , aw . O ) , 1.0 ) ; bM . xyz /= bM . w ; vec4 bN = u_proj_matrix * vec4 ( ap ( N , aw . O + aw . U ) , 1.0 ) ; bN . xyz /= bN . w ; float bJ = u_proj_matrix [ 1 ] [ 1 ] / u_proj_matrix [ 0 ] [ 0 ] ; vec2 bO = ( bN - bM ) . xy ; bO . x *= bJ ; float bP = M_PI / 2.0 ; mat2 bQ = mat2 ( cos ( bP ) , sin ( bP ) , - sin ( bP ) , cos ( bP ) ) ; bO = bQ * bO ; bO = normalize ( bO ) ; vec2 bR = ( u_line_width / u_height ) * vec2 ( 1.0 / bJ , 1.0 ) ; gl_Position = vec4 ( bM . xy + bO . xy * bR / 2.0 , bM . z , 1.0 ) ; gl_Position *= bM . w ; }".split(" ")}]};
f["main.glslf"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"var",ba:"PRECISION",aa:["highp"]},{$:"var",ba:"SHADELESS",aa:["0"]},{$:"var",ba:"CAUSTICS",aa:["0"]},{$:"var",ba:"USE_ENVIRONMENT_LIGHT",aa:["0"]},{$:"var",ba:"SKY_TEXTURE",aa:["0"]},{$:"var",ba:"SKY_COLOR",aa:["0"]},{$:"var",ba:"NORMAL_TEXCOORD",aa:["0"]},{$:"var",ba:"USE_VIEW_TSR",aa:["0"]},{$:"var",ba:"USE_VIEW_TSR_INVERSE",aa:["0"]},{$:"var",ba:"USE_MODEL_TSR",aa:["0"]},{$:"var",ba:"USE_MODEL_TSR_INVERSE",aa:["0"]},{$:"var",ba:"USE_PROJ_MATRIX_FRAG",
aa:["0"]},{$:"var",ba:"WATER_EFFECTS",aa:["0"]},{$:"var",ba:"USE_FOG",aa:["0"]},{$:"var",ba:"CALC_TBN_SPACE",aa:["0"]},{$:"var",ba:"TEXTURE_NORM_CO",aa:["TEXTURE_COORDS_NONE"]},{$:"var",ba:"PARALLAX",aa:["0"]},{$:"var",ba:"USE_TBN_SHADING",aa:["0"]},{$:"var",ba:"CAMERA_TYPE",aa:["CAM_TYPE_PERSP"]},{$:"var",ba:"USE_POSITION_CLIP",aa:["0"]},{$:"var",ba:"RGBA_SHADOWS",aa:["0"]},{$:"var",ba:"USE_BSDF_SKY_DIM",aa:["0"]},{$:"var",ba:"NODES",aa:["0"]},{$:"var",ba:"ALPHA",aa:["0"]},{$:"var",ba:"ALPHA_CLIP",
aa:["0"]},{$:"var",ba:"WETTABLE",aa:["0"]},{$:"var",ba:"NUM_VALUES",aa:["0"]},{$:"var",ba:"NUM_RGBS",aa:["0"]},{$:"var",ba:"DISABLE_FOG",aa:["0"]},{$:"var",ba:"SHADOW_USAGE",aa:["NO_SHADOWS"]},{$:"var",ba:"NUM_LIGHTS",aa:["0"]},{$:"var",ba:"NUM_LAMP_LIGHTS",aa:["0"]},{$:"var",ba:"SSAO_ONLY",aa:["0"]},{$:"var",ba:"REFLECTION_TYPE",aa:["REFL_NONE"]},{$:"var",ba:"PROCEDURAL_FOG",aa:["0"]},{$:"var",ba:"REFRACTIVE",aa:["0"]},{$:"var",ba:"USE_REFRACTION",aa:["0"]},{$:"var",ba:"USE_REFRACTION_CORRECTION",
aa:["0"]},{$:"var",ba:"CSM_SECTION1",aa:["0"]},{$:"var",ba:"CSM_SECTION2",aa:["0"]},{$:"var",ba:"CSM_SECTION3",aa:["0"]},{$:"var",ba:"NUM_CAST_LAMPS",aa:["0"]},{$:"var",ba:"WATER_LEVEL",aa:["0.0"]},{$:"var",ba:"POISSON_DISK_NUM",aa:["NO_SOFT_SHADOWS"]},{$:"var",ba:"USE_DERIVATIVES_EXT",aa:["0"]},{$:"var",ba:"USE_TEXTURE_LOD_EXT",aa:["0"]},{$:"var",ba:"USE_LOD_SMOOTHING",aa:["0"]},{$:"cond",da:[{$:"if",ga:["GLSL1","USE_DERIVATIVES_EXT",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"extension",aa:["GL_OES_standard_derivatives",
":","enable"]}]}}]},{$:"cond",da:[{$:"if",ga:["GLSL1","USE_TEXTURE_LOD_EXT",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"extension",aa:["GL_EXT_shader_texture_lod",":","enable"]}]}}]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"include",oa:"color_util.glslf"},{$:"include",oa:"math.glslv"},{$:"cond",da:[{$:"if",ga:["USE_LOD_SMOOTHING"],ha:{$:"grp",da:[{$:"include",oa:"coverage.glslf"}]}}]},{$:"cond",da:[{$:"if",ga:["SHADELESS",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",
da:[{$:"cond",da:[{$:"if",ga:["CAUSTICS"],ha:{$:"grp",da:[{$:"include",oa:"caustics.glslf"}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["RGBA_SHADOWS","USE_REFRACTION_CORRECTION",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"include",oa:"pack.glslf"}]}}]},{$:"txt",aa:"uniform float u_time ; uniform vec2 u_texel_size ;".split(" ")},{$:"cond",da:[{$:"if",ga:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","samplerCube","u_sky_texture",";"]}]}},{$:"elif",
ga:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec3 u_horizon_color ; uniform vec3 u_zenith_color ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["GLSL1","USE_BSDF_SKY_DIM",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","float","u_bsdf_cube_sky_dim",";"]}]}}]},{$:"txt",aa:["uniform","float","u_environment_energy",";"]},{$:"cond",da:[{$:"if",ga:["SHADELESS",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",
ga:["NUM_LIGHTS",0,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec4 u_light_positions [ NUM_LIGHTS ] ; uniform vec3 u_light_directions [ NUM_LIGHTS ] ; uniform vec4 u_light_color_intensities [ NUM_LIGHTS ] ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["CAUSTICS"],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec4 u_sun_quaternion ; uniform vec3 u_sun_intensity ; uniform vec3 u_sun_direction ;".split(" ")}]}}]}]}}]},{$:"txt",aa:["uniform","vec3","u_camera_eye_frag",";"]},{$:"cond",da:[{$:"if",ga:["USE_NODE_FRESNEL",
"USE_NODE_LAYER_WEIGHT",{$:"logical_or_expr",ia:2},"CAMERA_TYPE","CAM_TYPE_ORTHO",{$:"equal_expr",ia:2},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec3","u_camera_direction",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["NORMAL_TEXCOORD","REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2},"USE_VIEW_TSR",{$:"logical_or_expr",ia:3}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat3","u_view_tsr_frag",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_VIEW_TSR_INVERSE"],ha:{$:"grp",da:[{$:"txt",
aa:["uniform","mat3","u_view_tsr_inverse",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_MODEL_TSR"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat3","u_model_tsr",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_MODEL_TSR_INVERSE"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat3","u_model_tsr_inverse",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_PROJ_MATRIX_FRAG"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat4","u_proj_matrix_frag",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["DISABLE_FOG",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",
da:[{$:"txt",aa:["uniform","vec4","u_fog_color_density",";"]},{$:"cond",da:[{$:"if",ga:["WATER_EFFECTS"],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec4 u_underwater_fog_color_density ; uniform float u_cam_water_depth ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["PROCEDURAL_FOG"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat4","u_cube_fog",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_FOG"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec4","u_fog_params",";"]}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_LOD_SMOOTHING"],
ha:{$:"grp",da:[{$:"txt",aa:"uniform float u_lod_coverage ; uniform float u_lod_cmp_logic ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","sampler2D","u_plane_reflection",";"]}]}},{$:"elif",ga:["REFLECTION_TYPE","REFL_CUBE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","samplerCube","u_cube_reflection",";"]}]}},{$:"elif",ga:["REFLECTION_TYPE","REFL_MIRRORMAP",{$:"equal_expr",ia:2}],ha:{$:"grp",
da:[{$:"txt",aa:["uniform","samplerCube","u_mirrormap",";"]}]}},{$:"elif",ga:["REFLECTION_TYPE","REFL_PBR_SIMPLE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","samplerCube","u_sky_reflection",";"]}]}},{$:"elif",ga:["REFLECTION_TYPE","REFL_PBR_STANDARD",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"uniform samplerCube u_cube_irradiance ; uniform samplerCube u_cube_r_convolution ; uniform sampler2D u_brdf ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",
{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","sampler2D","u_shadow_mask",";"]}]}},{$:"elif",ga:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["POISSON_DISK_NUM","NO_SOFT_SHADOWS",{$:"non_equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec4","u_pcf_blur_radii",";"]}]}}]},{$:"txt",aa:"uniform vec4 u_csm_center_dists ; uniform PRECISION GLSL_SMPLR2D_SHDW u_shadow_map0 ;".split(" ")},{$:"cond",da:[{$:"if",ga:["CSM_SECTION1",
"NUM_CAST_LAMPS",1,{$:"g_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","PRECISION","GLSL_SMPLR2D_SHDW","u_shadow_map1",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["CSM_SECTION2","NUM_CAST_LAMPS",2,{$:"g_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","PRECISION","GLSL_SMPLR2D_SHDW","u_shadow_map2",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["CSM_SECTION3","NUM_CAST_LAMPS",3,{$:"g_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform",
"PRECISION","GLSL_SMPLR2D_SHDW","u_shadow_map3",";"]}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["REFRACTIVE","USE_NODE_B4W_REFRACTION",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","sampler2D","u_refractmap",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_B4W_REFRACTION","USE_NODE_BSDF_PRINCIPLED",{$:"logical_or_expr",ia:2},"USE_REFRACTION","REFRACTIVE","USE_REFRACTION_CORRECTION",{$:"logical_and_expr",ia:4}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","PRECISION","sampler2D","u_scene_depth",
";"]}]}}]},{$:"txt",aa:"uniform float u_emit ; uniform float u_ambient ; uniform vec2 u_fresnel_params ;".split(" ")},{$:"cond",da:[{$:"if",ga:["REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2},"REFLECTION_TYPE","REFL_CUBE",{$:"equal_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[]}},{$:"elif",ga:["REFLECTION_TYPE","REFL_MIRRORMAP",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","float","u_mirror_factor",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["REFLECTION_TYPE","REFL_PLANE",
{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec4","u_refl_plane",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_LAMP","NUM_LAMP_LIGHTS",0,{$:"non_equal_expr",ia:2},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec3 u_lamp_light_positions [ NUM_LAMP_LIGHTS ] ; uniform vec3 u_lamp_light_directions [ NUM_LAMP_LIGHTS ] ; uniform vec3 u_lamp_light_color_intensities [ NUM_LAMP_LIGHTS ] ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_VALUE"],ha:{$:"grp",da:[{$:"txt",
aa:"uniform vec4 u_node_values [ NUM_VALUES ] ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_RGB"],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec3 u_node_rgbs [ NUM_RGBS ] ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_CURVE_VEC","USE_NODE_CURVE_RGB","USE_NODE_VALTORGB",{$:"logical_or_expr",ia:3}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","sampler2D","u_nodes_texture",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_OBJECT_INFO"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec3","u_obj_info",";"]}]}}]},
{$:"txt",aa:"GLSL_IN vec3 h ; GLSL_IN vec3 j ;".split(" ")},{$:"cond",da:[{$:"if",ga:["NODES","DISABLE_FOG",{$:"logic_negative_expr",ia:1},"TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{$:"non_equal_expr",ia:2},"PARALLAX",{$:"logical_and_expr",ia:2},"SHADELESS",{$:"logic_negative_expr",ia:1},"CAUSTICS","WATER_EFFECTS",{$:"logical_and_expr",ia:3},"SHADOW_USAGE","SHADOW_MASK_GENERATION",{$:"equal_expr",ia:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{$:"equal_expr",ia:2},{$:"logical_or_expr",ia:6}],ha:{$:"grp",
da:[{$:"txt",aa:["GLSL_IN","vec4","i",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{$:"non_equal_expr",ia:2},"CALC_TBN_SPACE",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec4","k",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_TBN_SHADING"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec3","B",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec4","n",";"]},{$:"cond",
da:[{$:"if",ga:["CSM_SECTION1","NUM_CAST_LAMPS",1,{$:"g_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec4","o",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["CSM_SECTION2","NUM_CAST_LAMPS",2,{$:"g_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec4","u",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["CSM_SECTION3","NUM_CAST_LAMPS",3,{$:"g_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec4","v",";"]}]}}]}]}}]},{$:"cond",
da:[{$:"if",ga:["REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2},"SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{$:"equal_expr",ia:2},"REFRACTIVE","USE_POSITION_CLIP",{$:"logical_or_expr",ia:4}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec3","l",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["REFRACTIVE","USE_NODE_B4W_REFRACTION",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","float","m",";"]}]}}]},{$:"txt",aa:["GLSL_OUT","vec4","GLSL_OUT_FRAG_COLOR",";"]},{$:"include",oa:"nodes.glslf"},{$:"cond",
da:[{$:"if",ga:["DISABLE_FOG",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"include",oa:"fog.glslf"}]}}]},{$:"txt",aa:["void","main","(",")","{"]},{$:"cond",da:[{$:"if",ga:["USE_LOD_SMOOTHING"],ha:{$:"grp",da:[{$:"txt",aa:"if ( ! C ( u_lod_coverage , u_lod_cmp_logic ) ) discard ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["NODES","DISABLE_FOG",{$:"logic_negative_expr",ia:1},"TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{$:"non_equal_expr",ia:2},"PARALLAX",{$:"logical_and_expr",ia:2},"SHADELESS",
{$:"logic_negative_expr",ia:1},"CAUSTICS","WATER_EFFECTS",{$:"logical_and_expr",ia:3},{$:"logical_or_expr",ia:4}],ha:{$:"grp",da:[{$:"txt",aa:"float bS = length ( i ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["WATER_EFFECTS"],ha:{$:"grp",da:[{$:"txt",aa:"float bT = h . z - WATER_LEVEL ;".split(" ")}]}}]},{$:"txt",aa:"vec3 D = normalize ( u_camera_eye_frag - h ) ; vec3 E ; vec3 F ; vec3 G ; vec4 H ; float I ; J ( D , E , F , G , H , I ) ; vec3 aQ = E ; float L = I ; vec3 U = G ; vec4 bU = H ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["SHADELESS",{$:"logic_negative_expr",ia:1},"WATER_EFFECTS",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["WETTABLE"],ha:{$:"grp",da:[{$:"txt",aa:"aQ = max ( aQ - sqrt ( 0.01 * - min ( bT , 0.0 ) ) , 0.5 * aQ ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["CAUSTICS"],ha:{$:"grp",da:[{$:"txt",aa:"bV ( aQ , bT , u_time , bU , U , u_sun_direction , u_sun_intensity , u_sun_quaternion , h , bS ) ;".split(" ")}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["ALPHA"],
ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["ALPHA_CLIP"],ha:{$:"grp",da:[{$:"txt",aa:"if ( L < 0.5 ) discard ; L = 1.0 ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"L = min ( 1.0 , L ) ;".split(" ")}]}}]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["L","=","1.0",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["DISABLE_FOG",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["WATER_EFFECTS"],ha:{$:"grp",da:[{$:"txt",aa:"bW ( aQ , bS , D , bT ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",
da:[{$:"txt",aa:"bW ( aQ , bS , D , 1.0 ) ;".split(" ")}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["SSAO_ONLY","SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{$:"equal_expr",ia:2},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"float bX = GLSL_TEXTURE_PROJ ( u_shadow_mask , l ) . a ; aQ = vec3 ( bX ) ;".split(" ")}]}}]},{$:"txt",aa:"aQ = max ( vec3 ( 0.0 ) , aQ ) ; aW ( aQ ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["ALPHA","ALPHA_CLIP",{$:"logic_negative_expr",ia:1},{$:"logical_and_expr",ia:2}],ha:{$:"grp",
da:[{$:"txt",aa:"aX ( aQ , L ) ;".split(" ")}]}}]},{$:"txt",aa:"GLSL_OUT_FRAG_COLOR = vec4 ( aQ , L ) ; }".split(" ")}]};f["main.glslv"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"var",ba:"PRECISION",aa:["highp"]},{$:"var",ba:"SHADELESS",aa:["0"]},{$:"var",ba:"CAUSTICS",aa:["0"]},{$:"var",ba:"CALC_TBN_SPACE",aa:["0"]},{$:"var",ba:"MAIN_BEND_COL",aa:["0"]},{$:"var",ba:"DETAIL_BEND",aa:["0"]},{$:"var",ba:"CALC_TBN",aa:["0"]},{$:"var",ba:"USE_INSTANCED_PARTCLS",aa:["0"]},{$:"var",ba:"TEXTURE_NORM_CO",
aa:["TEXTURE_COORDS_NONE"]},{$:"var",ba:"USE_TBN_SHADING",aa:["0"]},{$:"var",ba:"PARALLAX",aa:["0"]},{$:"var",ba:"WATER_EFFECTS",aa:["0"]},{$:"var",ba:"SMAA_JITTER",aa:["0"]},{$:"var",ba:"USE_POSITION_CLIP",aa:["0"]},{$:"var",ba:"NODES",aa:["0"]},{$:"var",ba:"AU_QUALIFIER",aa:["GLSL_IN"]},{$:"var",ba:"STATIC_BATCH",aa:["0"]},{$:"var",ba:"WIND_BEND",aa:["0"]},{$:"var",ba:"BEND_CENTER_ONLY",aa:["0"]},{$:"var",ba:"BILLBOARD",aa:["0"]},{$:"var",ba:"BILLBOARD_JITTERED",aa:["0"]},{$:"var",ba:"DYNAMIC_GRASS",
aa:["0"]},{$:"var",ba:"SKINNED",aa:["0"]},{$:"var",ba:"FRAMES_BLENDING",aa:["0"]},{$:"var",ba:"VERTEX_ANIM",aa:["0"]},{$:"var",ba:"DISABLE_FOG",aa:["0"]},{$:"var",ba:"SHADOW_USAGE",aa:["NO_SHADOWS"]},{$:"var",ba:"REFLECTION_PASS",aa:["REFL_PASS_NONE"]},{$:"var",ba:"REFLECTION_TYPE",aa:["REFL_NONE"]},{$:"var",ba:"REFRACTIVE",aa:["0"]},{$:"var",ba:"MAC_OS_SHADOW_HACK",aa:["0"]},{$:"var",ba:"CSM_SECTION1",aa:["0"]},{$:"var",ba:"CSM_SECTION2",aa:["0"]},{$:"var",ba:"CSM_SECTION3",aa:["0"]},{$:"var",ba:"NUM_CAST_LAMPS",
aa:["0"]},{$:"var",ba:"TEXCOORD",aa:["0"]},{$:"var",ba:"VERTEX_COLOR",aa:["0"]},{$:"var",ba:"VERTEX_ANIM_MIX_NORMALS_FACTOR",aa:["u_va_frame_factor"]},{$:"var",ba:"MAX_BONES",aa:["0"]},{$:"include",oa:"std.glsl"},{$:"include",oa:"math.glslv"},{$:"include",oa:"to_world.glslv"},{$:"include",oa:"scale_texcoord.glslv"},{$:"txt",aa:"GLSL_IN vec3 a_position ; GLSL_IN vec4 a_tbn ;".split(" ")},{$:"cond",da:[{$:"if",ga:["USE_INSTANCED_PARTCLS"],ha:{$:"grp",da:[{$:"txt",aa:"GLSL_IN vec4 a_part_ts ; GLSL_IN vec4 a_part_r ;".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["USE_TBN_SHADING"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec3","a_shade_tangs",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SKINNED"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec4","a_influence",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{$:"logical_or_expr",ia:3},"USE_INSTANCED_PARTCLS",{$:"logic_negative_expr",ia:1},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{$:"cond",da:[{$:"if",
ga:["WIND_BEND"],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["MAIN_BEND_COL"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","float","a_bending_col_main",";"]},{$:"cond",da:[{$:"if",ga:["DETAIL_BEND"],ha:{$:"grp",da:[{$:"txt",aa:"GLSL_IN vec3 a_bending_col_detail ; AU_QUALIFIER float au_detail_bending_amp ; AU_QUALIFIER float au_branch_bending_amp ; AU_QUALIFIER float au_detail_bending_freq ;".split(" ")}]}}]}]}}]},{$:"txt",aa:"AU_QUALIFIER float au_wind_bending_amp ; AU_QUALIFIER float au_wind_bending_freq ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["BEND_CENTER_ONLY"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec3","a_emitter_center",";"]}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["VERTEX_ANIM"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec3","a_position_next",";"]},{$:"cond",da:[{$:"if",ga:["NODES",{$:"logic_negative_expr",ia:1},"USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","USE_NODE_NORMAL_MAP","CAUSTICS","CALC_TBN_SPACE","USE_NODE_TEX_COORD_NO","USE_NODE_BSDF_BEGIN","USE_NODE_TEX_COORD_RE",{$:"logical_or_expr",ia:9}],ha:{$:"grp",
da:[{$:"txt",aa:["GLSL_IN","vec4","a_tbn_next",";"]}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["NODES",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["TEXCOORD"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec2","a_texcoord",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["VERTEX_COLOR"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec3","a_color",";"]}]}}]}]}}]},{$:"txt",aa:"GLSL_OUT vec3 h ; GLSL_OUT vec3 j ;".split(" ")},{$:"cond",da:[{$:"if",ga:["NODES","DISABLE_FOG",{$:"logic_negative_expr",
ia:1},"TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{$:"non_equal_expr",ia:2},"PARALLAX",{$:"logical_and_expr",ia:2},"SHADELESS",{$:"logic_negative_expr",ia:1},"CAUSTICS","WATER_EFFECTS",{$:"logical_and_expr",ia:3},"SHADOW_USAGE","SHADOW_MASK_GENERATION",{$:"equal_expr",ia:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{$:"equal_expr",ia:2},{$:"logical_or_expr",ia:6}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec4","i",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{$:"non_equal_expr",
ia:2},"CALC_TBN_SPACE",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec4","k",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["NODES",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec3","bY",";"]},{$:"cond",da:[{$:"if",ga:["TEXCOORD"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec2","A",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["VERTEX_COLOR","DYNAMIC_GRASS",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec3","bZ",";"]}]}}]}]}}]},{$:"cond",da:[{$:"if",
ga:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec4","n",";"]},{$:"cond",da:[{$:"if",ga:["CSM_SECTION1","NUM_CAST_LAMPS",1,{$:"g_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec4","o",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["CSM_SECTION2","NUM_CAST_LAMPS",2,{$:"g_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec4","u",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["CSM_SECTION3","NUM_CAST_LAMPS",
3,{$:"g_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec4","v",";"]}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2},"SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{$:"equal_expr",ia:2},"REFRACTIVE","USE_POSITION_CLIP",{$:"logical_or_expr",ia:4}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec3","l",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["REFRACTIVE","NODES",{$:"logic_negative_expr",ia:1},"USE_NODE_B4W_REFRACTION",{$:"logical_or_expr",
ia:2},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","float","m",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_TBN_SHADING"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec3","B",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["STATIC_BATCH"],ha:{$:"grp",da:[{$:"txt",aa:"const mat3 u_model_tsr = mat3 ( 0.0 , 0.0 , 0.0 , 1.0 , 1.0 , 1.0 , 0.0 , 0.0 , 0.0 ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["uniform","PRECISION","mat3","u_model_tsr",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["REFLECTION_PASS",
"REFL_PASS_PLANE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat4","u_view_refl_matrix",";"]}]}}]},{$:"txt",aa:"uniform mat3 u_view_tsr ; uniform mat4 u_proj_matrix ;".split(" ")},{$:"cond",da:[{$:"if",ga:["NODES",{$:"logic_negative_expr",ia:1},"BILLBOARD","DYNAMIC_GRASS",{$:"logical_or_expr",ia:3}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec3","u_camera_eye",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SMAA_JITTER"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec2","u_subpixel_jitter",";"]}]}}]},
{$:"cond",da:[{$:"if",ga:["DYNAMIC_GRASS"],ha:{$:"grp",da:[{$:"txt",aa:"uniform PRECISION sampler2D u_grass_map_depth ; uniform sampler2D u_grass_map_color ; uniform vec4 u_camera_quat ; uniform vec3 u_grass_map_dim ; uniform float u_grass_size ; uniform float u_scale_threshold ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["SKINNED"],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec4 u_quatsb [ MAX_BONES ] ; uniform vec4 u_transb [ MAX_BONES ] ; uniform vec4 u_arm_rel_trans ; uniform vec4 u_arm_rel_quat ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["FRAMES_BLENDING"],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec4 u_quatsa [ MAX_BONES ] ; uniform vec4 u_transa [ MAX_BONES ] ; uniform float u_frame_factor ;".split(" ")}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["WIND_BEND"],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["BILLBOARD_JITTERED"],ha:{$:"grp",da:[{$:"txt",aa:"uniform float u_jitter_amp ; uniform float u_jitter_freq ;".split(" ")}]}}]},{$:"txt",aa:"uniform vec3 u_wind ; uniform PRECISION float u_time ;".split(" ")}]}}]},{$:"cond",
da:[{$:"if",ga:["VERTEX_ANIM"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","float","u_va_frame_factor",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["NODES",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec3","u_texture_scale",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","float","u_normal_offset",";"]},{$:"cond",da:[{$:"if",ga:["MAC_OS_SHADOW_HACK"],ha:{$:"grp",da:[{$:"txt",aa:"uniform mat3 u_v_light_tsr [ NUM_CAST_LAMPS ] ;".split(" ")}]}},
{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"uniform vec4 u_v_light_ts [ NUM_CAST_LAMPS ] ; uniform vec4 u_v_light_r [ NUM_CAST_LAMPS ] ;".split(" ")}]}}]},{$:"txt",aa:["uniform","mat4","u_p_light_matrix0",";"]},{$:"cond",da:[{$:"if",ga:["CSM_SECTION1","NUM_CAST_LAMPS",1,{$:"g_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat4","u_p_light_matrix1",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["CSM_SECTION2","NUM_CAST_LAMPS",2,{$:"g_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",
da:[{$:"txt",aa:["uniform","mat4","u_p_light_matrix2",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["CSM_SECTION3","NUM_CAST_LAMPS",3,{$:"g_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat4","u_p_light_matrix3",";"]}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["REFRACTIVE","USE_NODE_B4W_REFRACTION",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","PRECISION","float","u_view_max_depth",";"]}]}}]},{$:"include",oa:"dynamic_grass.glslv"},{$:"include",oa:"shadow.glslv"},
{$:"include",oa:"skin.glslv"},{$:"include",oa:"wind_bending.glslv"},{$:"cond",da:[{$:"if",ga:["NODES"],ha:{$:"grp",da:[{$:"include",oa:"nodes.glslv"}]}}]},{$:"txt",aa:["void","main","(",")","{"]},{$:"cond",da:[{$:"if",ga:["REFLECTION_PASS","REFL_PASS_PLANE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["mat4","b_","=","u_view_refl_matrix",";"]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"mat4 b_ = mat4 ( 0.0 ) ;".split(" ")}]}}]},{$:"txt",aa:["mat3","N","=","u_view_tsr",";"]},{$:"cond",da:[{$:"if",
ga:["USE_INSTANCED_PARTCLS"],ha:{$:"grp",da:[{$:"txt",aa:"mat3 Z = aZ ( a_part_ts . xyz , aY ( ) ) ; Z = a_ ( vec3 ( a_part_ts . w ) , Z ) ; Z = bc ( a_part_r , Z ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["STATIC_BATCH",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:"Z = bd ( u_model_tsr , Z ) ;".split(" ")}]}}]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["mat3","Z","=","u_model_tsr",";"]}]}}]},{$:"txt",aa:["vec3","O","=","a_position",";"]},{$:"cond",da:[{$:"if",ga:["CALC_TBN_SPACE",
"USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","USE_NODE_NORMAL_MAP","CAUSTICS","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{$:"logical_and_expr",ia:3},"NODES",{$:"logic_negative_expr",ia:1},"USE_TBN_SHADING","CALC_TBN",{$:"logical_and_expr",ia:2},"USE_NODE_BSDF_BEGIN","USE_NODE_FRESNEL","USE_NODE_TEX_COORD_NO","USE_NODE_TEX_COORD_RE","USE_NODE_LAYER_WEIGHT","USE_NODE_BUMP",{$:"logical_or_expr",ia:14}],ha:{$:"grp",da:[{$:"txt",aa:"float P , Q ; vec4 S = R ( a_tbn , P , Q ) ; vec3 ca = T ( S , vec3 ( 0.0 , 1.0 , 0.0 ) ) ;".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["CALC_TBN_SPACE","USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","USE_NODE_NORMAL_MAP","CAUSTICS","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{$:"logical_and_expr",ia:3},"NODES",{$:"logic_negative_expr",ia:1},"USE_NODE_BSDF_BEGIN","USE_NODE_FRESNEL","USE_NODE_TEX_COORD_NO","USE_NODE_TEX_COORD_RE","USE_NODE_LAYER_WEIGHT","USE_NODE_BUMP",{$:"logical_or_expr",ia:13}],ha:{$:"grp",da:[{$:"txt",aa:["vec3","U","=","ca",";"]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec3 U = vec3 ( 0.0 ) ;".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["CALC_TBN_SPACE","NODES",{$:"logic_negative_expr",ia:1},"TEXTURE_NORM_CO","TEXTURE_COORDS_UV_ORCO",{$:"equal_expr",ia:2},{$:"logical_and_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 V = T ( S , vec3 ( 1.0 , 0.0 , 0.0 ) ) ; vec3 W = Q * cross ( U , V ) ; vec4 Y = X ( W , Q * P ) ; V = T ( Y , U ) ;".split(" ")}]}},{$:"elif",ga:["NODES",{$:"logic_negative_expr",ia:1},"TEXTURE_NORM_CO","TEXTURE_COORDS_NORMAL",{$:"equal_expr",ia:2},{$:"logical_and_expr",
ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 cb = ap ( Z , O ) ; vec3 ac = normalize ( bI ( Z , ca ) ) ; vec3 D = cb - u_camera_eye ; vec3 W = cross ( D , ac ) ; vec3 V = cross ( ac , W ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec3 V = vec3 ( 0.0 ) ; vec3 W = vec3 ( 0.0 ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["USE_TBN_SHADING"],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["CALC_TBN"],ha:{$:"grp",da:[{$:"txt",aa:"vec3 ac = normalize ( bI ( Z , ca ) ) ; vec3 ad = cross ( vec3 ( 0.0 , 0.0 , 1.0 ) , ac ) ; vec3 ae = cross ( ac , ad ) ;".split(" ")}]}},
{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["vec3","ae","=","a_shade_tangs",";"]}]}}]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec3 ae = vec3 ( 0.0 ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["VERTEX_ANIM"],ha:{$:"grp",da:[{$:"txt",aa:"O = mix ( O , a_position_next , u_va_frame_factor ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["NODES",{$:"logic_negative_expr",ia:1},"USE_NODE_MATERIAL_BEGIN","USE_NODE_NORMAL_MAP","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",
{$:"non_equal_expr",ia:2},"USE_NODE_BSDF_BEGIN","USE_NODE_TEX_COORD_RE","USE_NODE_BUMP",{$:"logical_or_expr",ia:10}],ha:{$:"grp",da:[{$:"txt",aa:"float af , ah ; vec4 ai = R ( a_tbn_next , af , ah ) ; vec3 aj = T ( ai , vec3 ( 0.0 , 1.0 , 0.0 ) ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["NODES",{$:"logic_negative_expr",ia:1},"USE_NODE_MATERIAL_BEGIN","USE_NODE_NORMAL_MAP","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","USE_NODE_BSDF_BEGIN","USE_NODE_BUMP",{$:"logical_or_expr",ia:8}],ha:{$:"grp",
da:[{$:"txt",aa:"U = mix ( U , aj , VERTEX_ANIM_MIX_NORMALS_FACTOR ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{$:"non_equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 ak = T ( ai , vec3 ( 1.0 , 0.0 , 0.0 ) ) ; vec3 al = ah * cross ( aj , ak ) ; vec4 am = X ( al , ah * af ) ; ak = T ( am , aj ) ; V = mix ( V , ak , u_va_frame_factor ) ; W = mix ( W , al , u_va_frame_factor ) ;".split(" ")}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["SKINNED"],ha:{$:"grp",da:[{$:"txt",
aa:"an ( O , V , W , U ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{$:"logical_or_expr",ia:3},"USE_INSTANCED_PARTCLS",{$:"logic_negative_expr",ia:1},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["vec3","ao","=","au_center_pos",";"]}]}},{$:"elif",ga:["DYNAMIC_GRASS","USE_INSTANCED_PARTCLS",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 ao = a_part_ts . xyz ; O = ap ( Z , O ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",
aa:"vec3 ao = vec3 ( 0.0 ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["DYNAMIC_GRASS"],ha:{$:"grp",da:[{$:"txt",aa:"au aw = be ( O , V , ae , W , U , ao , u_grass_map_depth , u_grass_map_color , u_grass_map_dim , u_grass_size , u_camera_eye , u_camera_quat , N , Z ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["BILLBOARD"],ha:{$:"grp",da:[{$:"txt",aa:"vec3 aq = ap ( Z , ao ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["REFLECTION_PASS","REFL_PASS_PLANE",{$:"equal_expr",ia:2}],
ha:{$:"grp",da:[{$:"txt",aa:"O = ( b_ * vec4 ( O , 1.0 ) ) . xyz ; ao = ( b_ * vec4 ( ao , 1.0 ) ) . xyz ; aq = ( b_ * vec4 ( aq , 1.0 ) ) . xyz ;".split(" ")}]}}]},{$:"txt",aa:"Z = as ( u_camera_eye , aq , N , Z ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["WIND_BEND","BILLBOARD_JITTERED",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 bf = aq ; Z = at ( u_wind , u_time , u_jitter_amp , u_jitter_freq , bf , Z ) ;".split(" ")}]}}]},{$:"txt",aa:"au aw = av ( O - ao , ao , V , ae , W , U , Z ) ; aw . ao = aq ;".split(" ")}]}},
{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"au aw = av ( O , ao , V , ae , W , U , Z ) ;".split(" ")}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{$:"non_equal_expr",ia:2},"CALC_TBN_SPACE",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"float aA = ( dot ( cross ( aw . U , aw . V ) , aw . W ) < 0.0 ) ? - 1.0 : 1.0 ; k = vec4 ( aw . V , aA ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["USE_TBN_SHADING"],ha:{$:"grp",da:[{$:"txt",aa:"B = aw . aB ;".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["WIND_BEND"],ha:{$:"grp",da:[{$:"txt",aa:"ax ( aw . O , aw . ao , U , b_ ) ;".split(" ")}]}}]},{$:"txt",aa:"h = aw . O ;".split(" ")},{$:"cond",da:[{$:"if",ga:["NODES",{$:"logic_negative_expr",ia:1},"USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","USE_NODE_NORMAL_MAP","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{$:"logical_and_expr",ia:3},"USE_NODE_TEX_COORD_NO","USE_NODE_BSDF_BEGIN","USE_NODE_FRESNEL","USE_NODE_TEX_COORD_RE","USE_NODE_LAYER_WEIGHT",
"USE_NODE_BUMP",{$:"logical_or_expr",ia:13}],ha:{$:"grp",da:[{$:"txt",aa:"j = aw . U ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["NODES",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:"bY = u_camera_eye - aw . O ;".split(" ")},{$:"cond",da:[{$:"if",ga:["TEXCOORD"],ha:{$:"grp",da:[{$:"txt",aa:"A = az ( a_texcoord , u_texture_scale ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["DYNAMIC_GRASS"],ha:{$:"grp",da:[{$:"txt",aa:"bZ = aw . aQ ;".split(" ")}]}},{$:"elif",ga:["VERTEX_COLOR"],
ha:{$:"grp",da:[{$:"txt",aa:["bZ","=","a_color",";"]}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["REFLECTION_PASS","REFL_PASS_PLANE",{$:"equal_expr",ia:2},"BILLBOARD",{$:"logic_negative_expr",ia:1},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec4 cc = b_ * vec4 ( aw . O , 1.0 ) ; cc . xyz = ap ( N , cc . xyz ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec4 cc = vec4 ( ap ( N , aw . O ) , 1.0 ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["NODES","DISABLE_FOG",{$:"logic_negative_expr",
ia:1},"TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{$:"non_equal_expr",ia:2},"PARALLAX",{$:"logical_and_expr",ia:2},"SHADELESS",{$:"logic_negative_expr",ia:1},"CAUSTICS","WATER_EFFECTS",{$:"logical_and_expr",ia:3},"SHADOW_USAGE","SHADOW_MASK_GENERATION",{$:"equal_expr",ia:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{$:"equal_expr",ia:2},{$:"logical_or_expr",ia:6}],ha:{$:"grp",da:[{$:"txt",aa:["i","=","cc",";"]}]}}]},{$:"txt",aa:"vec4 f = u_proj_matrix * cc ;".split(" ")},{$:"cond",da:[{$:"if",ga:["SMAA_JITTER"],
ha:{$:"grp",da:[{$:"txt",aa:"f . xy += u_subpixel_jitter * f . w ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2},"SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{$:"equal_expr",ia:2},"REFRACTIVE","USE_POSITION_CLIP",{$:"logical_or_expr",ia:4}],ha:{$:"grp",da:[{$:"txt",aa:"l = aC ( f ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"cd ( aw . O , aw . U ) ;".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["REFRACTIVE","NODES",{$:"logic_negative_expr",ia:1},"USE_NODE_B4W_REFRACTION",{$:"logical_or_expr",ia:2},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"m = - cc . z / u_view_max_depth ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["NODES"],ha:{$:"grp",da:[{$:"txt",aa:["J","(",")",";"]}]}}]},{$:"txt",aa:["gl_Position","=","f",";","}"]}]};f["main_stack.glslf"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"var",ba:"PRECISION",aa:["highp"]},{$:"var",ba:"TEXTURE_NORM_CO",
aa:["TEXTURE_COORDS_NONE"]},{$:"var",ba:"TEXTURE_SPEC_CO",aa:["TEXTURE_COORDS_NONE"]},{$:"var",ba:"CAUSTICS",aa:["0"]},{$:"var",ba:"USE_FOG",aa:["0"]},{$:"var",ba:"TEXTURE_COLOR0_CO",aa:["TEXTURE_COORDS_NONE"]},{$:"var",ba:"TEXTURE_COLOR1_CO",aa:["TEXTURE_COORDS_NONE"]},{$:"var",ba:"PARALLAX",aa:["0"]},{$:"var",ba:"CALC_TBN_SPACE",aa:["0"]},{$:"var",ba:"USE_TBN_SHADING",aa:["0"]},{$:"var",ba:"REFLECTION_PASS",aa:["REFL_PASS_PLANE"]},{$:"var",ba:"RGBA_SHADOWS",aa:["0"]},{$:"var",ba:"TEXTURE_SPEC",
aa:["0"]},{$:"var",ba:"ALPHA_AS_SPEC",aa:["0"]},{$:"var",ba:"TEXTURE_STENCIL_ALPHA_MASK",aa:["0"]},{$:"var",ba:"TEXTURE_STENCIL_ALPHA_MASK_CO",aa:["TEXTURE_COORDS_NONE"]},{$:"var",ba:"NORMAL_TEXCOORD",aa:["0"]},{$:"var",ba:"USE_REFRACTION_CORRECTION",aa:["0"]},{$:"var",ba:"DOUBLE_SIDED_LIGHTING",aa:["0"]},{$:"var",ba:"SHADELESS",aa:["0"]},{$:"var",ba:"TEXCOORD",aa:["0"]},{$:"var",ba:"VERTEX_COLOR",aa:["0"]},{$:"var",ba:"WETTABLE",aa:["0"]},{$:"var",ba:"CSM_SECTION1",aa:["0"]},{$:"var",ba:"CSM_SECTION2",
aa:["0"]},{$:"var",ba:"CSM_SECTION3",aa:["0"]},{$:"var",ba:"NUM_CAST_LAMPS",aa:["0"]},{$:"var",ba:"NUM_LIGHTS",aa:["0"]},{$:"var",ba:"WATER_LEVEL",aa:["0.0"]},{$:"var",ba:"PROCEDURAL_FOG",aa:["0"]},{$:"var",ba:"TEXTURE_BLEND_TYPE",aa:["TEXTURE_BLEND_TYPE_MIX"]},{$:"var",ba:"SKY_TEXTURE",aa:["0"]},{$:"var",ba:"SKY_COLOR",aa:["0"]},{$:"var",ba:"ALPHA",aa:["0"]},{$:"var",ba:"ALPHA_CLIP",aa:["0"]},{$:"var",ba:"PARALLAX_LOD_DIST",aa:["5.0"]},{$:"var",ba:"PARALLAX_STEPS",aa:["5.0"]},{$:"var",ba:"USE_ENVIRONMENT_LIGHT",
aa:["0"]},{$:"var",ba:"REFLECTION_TYPE",aa:["REFL_NONE"]},{$:"var",ba:"REFRACTIVE",aa:["0"]},{$:"var",ba:"DISABLE_FOG",aa:["0"]},{$:"var",ba:"WATER_EFFECTS",aa:["0"]},{$:"var",ba:"SHADOW_USAGE",aa:["NO_SHADOWS"]},{$:"var",ba:"DYNAMIC_GRASS",aa:["0"]},{$:"var",ba:"POISSON_DISK_NUM",aa:["NO_SOFT_SHADOWS"]},{$:"var",ba:"SSAO_ONLY",aa:["0"]},{$:"var",ba:"USE_LOD_SMOOTHING",aa:["0"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"include",oa:"color_util.glslf"},{$:"include",
oa:"math.glslv"},{$:"cond",da:[{$:"if",ga:["USE_LOD_SMOOTHING"],ha:{$:"grp",da:[{$:"include",oa:"coverage.glslf"}]}}]},{$:"cond",da:[{$:"if",ga:["SHADELESS",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["CAUSTICS"],ha:{$:"grp",da:[{$:"include",oa:"caustics.glslf"}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["RGBA_SHADOWS"],ha:{$:"grp",da:[{$:"include",oa:"pack.glslf"}]}}]},{$:"txt",aa:["uniform","float","u_time",";"]},{$:"cond",da:[{$:"if",ga:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",
{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","samplerCube","u_sky_texture",";"]}]}},{$:"elif",ga:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec3 u_horizon_color ; uniform vec3 u_zenith_color ;".split(" ")}]}}]},{$:"txt",aa:["uniform","float","u_environment_energy",";"]},{$:"cond",da:[{$:"if",ga:["SHADELESS",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["NUM_LIGHTS",0,{$:"g_expr",ia:2}],ha:{$:"grp",
da:[{$:"txt",aa:"uniform vec4 u_light_positions [ NUM_LIGHTS ] ; uniform vec3 u_light_directions [ NUM_LIGHTS ] ; uniform vec4 u_light_color_intensities [ NUM_LIGHTS ] ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["CAUSTICS"],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec4 u_sun_quaternion ; uniform vec3 u_sun_intensity ; uniform vec3 u_sun_direction ;".split(" ")}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["NORMAL_TEXCOORD","REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2},"REFRACTIVE",{$:"logical_or_expr",
ia:3}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat3","u_view_tsr_frag",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["DISABLE_FOG",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec4","u_fog_color_density",";"]},{$:"cond",da:[{$:"if",ga:["WATER_EFFECTS"],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec4 u_underwater_fog_color_density ; uniform float u_cam_water_depth ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["PROCEDURAL_FOG"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat4","u_cube_fog",
";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_FOG"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec4","u_fog_params",";"]}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_LOD_SMOOTHING"],ha:{$:"grp",da:[{$:"txt",aa:"uniform float u_lod_coverage ; uniform float u_lod_cmp_logic ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["TEXTURE_COLOR0_CO","TEXTURE_COORDS_NONE",{$:"non_equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","sampler2D","u_colormap0",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["TEXTURE_SPEC","ALPHA_AS_SPEC",
{$:"logic_negative_expr",ia:1},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","sampler2D","u_specmap0",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{$:"non_equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","sampler2D","u_normalmap0",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["TEXTURE_STENCIL_ALPHA_MASK"],ha:{$:"grp",da:[{$:"txt",aa:"uniform sampler2D u_colormap1 ; uniform sampler2D u_stencil0 ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["REFLECTION_TYPE",
"REFL_PLANE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","sampler2D","u_plane_reflection",";"]}]}},{$:"elif",ga:["REFLECTION_TYPE","REFL_CUBE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","samplerCube","u_cube_reflection",";"]}]}},{$:"elif",ga:["REFLECTION_TYPE","REFL_MIRRORMAP",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{$:"equal_expr",ia:2}],
ha:{$:"grp",da:[{$:"txt",aa:["uniform","sampler2D","u_shadow_mask",";"]}]}},{$:"elif",ga:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["POISSON_DISK_NUM","NO_SOFT_SHADOWS",{$:"non_equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec4","u_pcf_blur_radii",";"]}]}}]},{$:"txt",aa:"uniform vec4 u_csm_center_dists ; uniform PRECISION GLSL_SMPLR2D_SHDW u_shadow_map0 ;".split(" ")},{$:"cond",da:[{$:"if",ga:["CSM_SECTION1","NUM_CAST_LAMPS",
1,{$:"g_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","PRECISION","GLSL_SMPLR2D_SHDW","u_shadow_map1",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["CSM_SECTION2","NUM_CAST_LAMPS",2,{$:"g_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","PRECISION","GLSL_SMPLR2D_SHDW","u_shadow_map2",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["CSM_SECTION3","NUM_CAST_LAMPS",3,{$:"g_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","PRECISION",
"GLSL_SMPLR2D_SHDW","u_shadow_map3",";"]}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["REFRACTIVE"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","sampler2D","u_refractmap",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["REFRACTIVE","USE_REFRACTION_CORRECTION",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","PRECISION","sampler2D","u_scene_depth",";"]}]}}]},{$:"txt",aa:"uniform float u_emit ; uniform float u_ambient ; uniform vec2 u_fresnel_params ; uniform float u_specular_alpha ;".split(" ")},{$:"cond",
da:[{$:"if",ga:["REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2},"REFLECTION_TYPE","REFL_CUBE",{$:"equal_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","float","u_reflect_factor",";"]}]}},{$:"elif",ga:["REFLECTION_TYPE","REFL_MIRRORMAP",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","float","u_mirror_factor",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec4","u_refl_plane",
";"]}]}}]},{$:"txt",aa:"uniform vec4 u_diffuse_color ; uniform vec2 u_diffuse_params ; uniform float u_diffuse_intensity ;".split(" ")},{$:"cond",da:[{$:"if",ga:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{$:"non_equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","float","u_normal_factor",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["TEXTURE_COLOR0_CO","TEXTURE_COORDS_NONE",{$:"non_equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"uniform float u_diffuse_color_factor ; uniform float u_alpha_factor ;".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["TEXTURE_SPEC"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","float","u_specular_color_factor",";"]}]}}]},{$:"txt",aa:"uniform vec3 u_specular_color ; uniform vec3 u_specular_params ;".split(" ")},{$:"cond",da:[{$:"if",ga:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{$:"non_equal_expr",ia:2},"PARALLAX",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","float","u_parallax_scale",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["REFRACTIVE"],ha:{$:"grp",da:[{$:"txt",aa:["uniform",
"float","u_refr_bump",";"]}]}}]},{$:"txt",aa:"GLSL_IN vec3 h ; GLSL_IN vec3 j ;".split(" ")},{$:"cond",da:[{$:"if",ga:["DISABLE_FOG",{$:"logic_negative_expr",ia:1},"TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{$:"non_equal_expr",ia:2},"PARALLAX",{$:"logical_and_expr",ia:2},"SHADELESS",{$:"logic_negative_expr",ia:1},"CAUSTICS",{$:"logical_and_expr",ia:2},"SHADOW_USAGE","SHADOW_MASK_GENERATION",{$:"equal_expr",ia:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{$:"equal_expr",ia:2},{$:"logical_or_expr",ia:5}],
ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec4","i",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{$:"non_equal_expr",ia:2},"CALC_TBN_SPACE",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec4","k",";"]}]}}]},{$:"txt",aa:["GLSL_IN","vec3","bY",";"]},{$:"cond",da:[{$:"if",ga:["USE_TBN_SHADING"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec3","B",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["TEXCOORD"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec2","A",";"]}]}}]},
{$:"cond",da:[{$:"if",ga:["VERTEX_COLOR","DYNAMIC_GRASS",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec3","bZ",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec4","n",";"]},{$:"cond",da:[{$:"if",ga:["CSM_SECTION1","NUM_CAST_LAMPS",1,{$:"g_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec4","o",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["CSM_SECTION2","NUM_CAST_LAMPS",
2,{$:"g_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec4","u",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["CSM_SECTION3","NUM_CAST_LAMPS",3,{$:"g_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec4","v",";"]}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2},"SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{$:"equal_expr",ia:2},"REFRACTIVE",{$:"logical_or_expr",ia:3}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN",
"vec3","l",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["REFRACTIVE"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","float","m",";"]}]}}]},{$:"txt",aa:["GLSL_OUT","vec4","GLSL_OUT_FRAG_COLOR",";"]},{$:"cond",da:[{$:"if",ga:["SHADELESS",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"include",oa:"shadow.glslf"}]}}]},{$:"include",oa:"mirror.glslf"},{$:"cond",da:[{$:"if",ga:["REFRACTIVE"],ha:{$:"grp",da:[{$:"include",oa:"refraction.glslf"}]}}]},{$:"include",oa:"environment.glslf"},{$:"cond",da:[{$:"if",ga:["SHADELESS",
{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"include",oa:"lighting_nodes.glslf"}]}}]},{$:"cond",da:[{$:"if",ga:["DISABLE_FOG",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"include",oa:"fog.glslf"}]}}]},{$:"txt",aa:["void","main","(",")","{"]},{$:"cond",da:[{$:"if",ga:["USE_LOD_SMOOTHING"],ha:{$:"grp",da:[{$:"txt",aa:"if ( ! C ( u_lod_coverage , u_lod_cmp_logic ) ) discard ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["DISABLE_FOG",{$:"logic_negative_expr",ia:1},"TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",
{$:"non_equal_expr",ia:2},"PARALLAX",{$:"logical_and_expr",ia:2},"SHADELESS",{$:"logic_negative_expr",ia:1},"CAUSTICS","WATER_EFFECTS",{$:"logical_and_expr",ia:3},{$:"logical_or_expr",ia:3}],ha:{$:"grp",da:[{$:"txt",aa:"float bS = length ( i ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["WATER_EFFECTS"],ha:{$:"grp",da:[{$:"txt",aa:"float bT = h . z - WATER_LEVEL ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["TEXCOORD"],ha:{$:"grp",da:[{$:"txt",aa:["vec2","ce","=","A",";"]}]}}]},{$:"txt",aa:"vec3 cf = normalize ( j ) ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["DOUBLE_SIDED_LIGHTING"],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["REFLECTION_PASS","REFL_PASS_PLANE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"if ( gl_FrontFacing == false )".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["if","(","gl_FrontFacing",")"]}]}}]},{$:"txt",aa:"cf = cf ; else cf = - cf ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{$:"non_equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 W = cross ( cf , k . xyz ) * k . w ; mat3 cg = mat3 ( k . xyz , W , cf ) ;".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["NORMAL_TEXCOORD","REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2},"REFRACTIVE",{$:"logical_or_expr",ia:3}],ha:{$:"grp",da:[{$:"txt",aa:["mat3","N","=","u_view_tsr_frag",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["NORMAL_TEXCOORD"],ha:{$:"grp",da:[{$:"txt",aa:"vec2 ch = normalize ( bI ( N , j ) ) . st ; ch = ch * vec2 ( 0.495 ) + vec2 ( 0.5 ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{$:"non_equal_expr",ia:2},"PARALLAX",{$:"logical_and_expr",
ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"if ( bS < PARALLAX_LOD_DIST ) { float ci = clamp ( 0.5 * ( PARALLAX_LOD_DIST - bS ) , 0.0 , 1.0 ) ; float cj = u_parallax_scale * ci ; vec3 ck = normalize ( bY * cg ) ; float cl = 1.0 / PARALLAX_STEPS ; vec2 cm = ck . xy * cj / ( PARALLAX_STEPS * ck . z ) ; float cn = 1.0 ; float co ;".split(" ")},{$:"cond",da:[{$:"if",ga:["TEXTURE_NORM_CO","TEXTURE_COORDS_NORMAL",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["vec2","cp","=","ch",";"]}]}},{$:"else",ha:{$:"grp",
da:[{$:"txt",aa:["vec2","cp","=","ce",";"]}]}}]},{$:"txt",aa:"co = GLSL_TEXTURE ( u_normalmap0 , cp ) . a ; for ( float cq = 1.0 ; cq <= PARALLAX_STEPS ; cq ++ ) { if ( co < cn ) { cn -= cl ; cp -= cm ; co = GLSL_TEXTURE ( u_normalmap0 , cp ) . a ; } } vec2 cr = cp + cm ; float cs = GLSL_TEXTURE ( u_normalmap0 , cr ) . a - ( cn + cl ) ; float ct = co - cn ; float cu = ct / ( ct - cs ) ; cp = cu * cr + ( 1.0 - cu ) * cp ;".split(" ")},{$:"cond",da:[{$:"if",ga:["TEXTURE_NORM_CO","TEXTURE_COORDS_NORMAL",
{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["TEXCOORD"],ha:{$:"grp",da:[{$:"txt",aa:"ce += cp - ch ;".split(" ")}]}}]},{$:"txt",aa:["ch","=","cp",";"]}]}},{$:"else",ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["NORMAL_TEXCOORD"],ha:{$:"grp",da:[{$:"txt",aa:"ch += cp - ce ;".split(" ")}]}}]},{$:"txt",aa:["ce","=","cp",";"]}]}}]},{$:"txt",aa:["}"]}]}}]},{$:"cond",da:[{$:"if",ga:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{$:"non_equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["vec4",
"cv",";"]},{$:"cond",da:[{$:"if",ga:["TEXTURE_NORM_CO","TEXTURE_COORDS_NORMAL",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"cv = GLSL_TEXTURE ( u_normalmap0 , ch ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"cv = GLSL_TEXTURE ( u_normalmap0 , ce ) ;".split(" ")}]}}]},{$:"txt",aa:"vec3 cw = cv . rgb - 0.5 ; cw = mix ( vec3 ( 0.0 , 0.0 , 1.0 ) , cw , u_normal_factor ) ; vec3 U = cg * cw ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["vec3","U","=","cf",";"]}]}}]},{$:"txt",
aa:"U = normalize ( U ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["NORMAL_TEXCOORD"],ha:{$:"grp",da:[{$:"txt",aa:"ch = normalize ( bI ( N , U ) ) . st ; ch = ch * vec2 ( 0.495 ) + vec2 ( 0.5 ) ;".split(" ")}]}}]},{$:"txt",aa:"vec3 D = normalize ( bY ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["VERTEX_COLOR","DYNAMIC_GRASS",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 cx = bZ ; bG ( cx ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["VERTEX_COLOR","DYNAMIC_GRASS",{$:"logical_or_expr",
ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec4 cy = vec4 ( cx , 1.0 ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["vec4","cy","=","u_diffuse_color",";"]}]}}]},{$:"txt",aa:["float","cz","=","1.0",";"]},{$:"cond",da:[{$:"if",ga:["TEXTURE_COLOR0_CO","TEXTURE_COORDS_NORMAL",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec4 cA = GLSL_TEXTURE ( u_colormap0 , ch ) ;".split(" ")}]}},{$:"elif",ga:["TEXTURE_COLOR0_CO","TEXTURE_COORDS_UV_ORCO",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec4 cA = GLSL_TEXTURE ( u_colormap0 , ce ) ;".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["TEXTURE_COLOR0_CO","TEXTURE_COORDS_NONE",{$:"non_equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"bG ( cA . rgb ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["TEXTURE_STENCIL_ALPHA_MASK"],ha:{$:"grp",da:[{$:"txt",aa:["vec4","cB",";"]},{$:"cond",da:[{$:"if",ga:["TEXTURE_COLOR1_CO","TEXTURE_COORDS_NORMAL",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"cB = GLSL_TEXTURE ( u_colormap1 , ch ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"cB = GLSL_TEXTURE ( u_colormap1 , ce ) ;".split(" ")}]}}]},
{$:"txt",aa:"bG ( cB . rgb ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["TEXTURE_STENCIL_ALPHA_MASK_CO","TEXTURE_COORDS_NORMAL",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec4 cC = GLSL_TEXTURE ( u_stencil0 , ch ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec4 cC = GLSL_TEXTURE ( u_stencil0 , ce ) ;".split(" ")}]}}]},{$:"txt",aa:"cA = mix ( cA , cB , cC . r ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MIX",{$:"equal_expr",ia:2}],ha:{$:"grp",
da:[{$:"txt",aa:"cy . rgb = mix ( cy . rgb , cA . rgb , u_diffuse_color_factor ) ; float M = u_alpha_factor * cA . a ; M += ( 1.0 - step ( 0.0 , M ) ) ; cy . a = mix ( M , 1.0 , u_diffuse_color . a ) ; cz = cA . a ;".split(" ")}]}},{$:"elif",ga:["TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MULTIPLY",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"cy . rgb *= mix ( vec3 ( 1.0 ) , cA . rgb , u_diffuse_color_factor ) ; cy . a = cA . a ; cz = cA . a ;".split(" ")}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["SHADELESS"],
ha:{$:"grp",da:[{$:"txt",aa:"vec3 aQ = cy . rgb ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec3 cD = u_diffuse_intensity * cy . rgb ; vec3 cF = u_environment_energy * cE ( U ) ; vec3 cG = u_ambient * cF ; vec4 bU = cH ( cD ) ; vec3 cI = u_emit * cy . rgb ; vec3 cJ = u_specular_color ;".split(" ")},{$:"cond",da:[{$:"if",ga:["TEXTURE_SPEC"],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["ALPHA_AS_SPEC"],ha:{$:"grp",da:[{$:"txt",aa:"vec3 cK = vec3 ( cz ) ;".split(" ")}]}},{$:"elif",ga:["TEXTURE_SPEC_CO",
"TEXTURE_COORDS_NORMAL",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 cK = GLSL_TEXTURE ( u_specmap0 , ch ) . rgb ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec3 cK = GLSL_TEXTURE ( u_specmap0 , ce ) . rgb ;".split(" ")}]}}]},{$:"txt",aa:"bG ( cK . rgb ) ; cJ = mix ( cJ , cK , u_specular_color_factor ) ;".split(" ")}]}}]},{$:"txt",aa:"float cL = u_specular_params [ 0 ] ; vec2 cM = vec2 ( u_specular_params [ 1 ] , u_specular_params [ 2 ] ) ; vec3 cN = cL * cJ ; vec3 aQ ; vec3 cO ; cP ( cI , cG , cD , cN , h , U , D , cM , u_diffuse_params , bU , 0.0 , vec4 ( 0.0 ) , aQ , cO ) ;".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"cQ ( aQ , D , U , u_reflect_factor , N ) ;".split(" ")}]}},{$:"elif",ga:["REFLECTION_TYPE","REFL_CUBE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"cQ ( aQ , D , U , u_reflect_factor , mat3 ( 0.0 ) ) ;".split(" ")}]}},{$:"elif",ga:["REFLECTION_TYPE","REFL_MIRRORMAP",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"cQ ( aQ , D , U , u_mirror_factor , mat3 ( 0.0 ) ) ;".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["SHADELESS",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:["aQ","+=","cO",";"]}]}}]},{$:"txt",aa:"float L = cy . a ;".split(" ")},{$:"cond",da:[{$:"if",ga:["SHADELESS",{$:"logic_negative_expr",ia:1},"WATER_EFFECTS",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["WETTABLE"],ha:{$:"grp",da:[{$:"txt",aa:"aQ = max ( aQ - sqrt ( 0.01 * - min ( bT , 0.0 ) ) , 0.5 * aQ ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["CAUSTICS"],ha:{$:"grp",
da:[{$:"txt",aa:"bV ( aQ , bT , u_time , bU , U , u_sun_direction , u_sun_intensity , u_sun_quaternion , h , bS ) ;".split(" ")}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["ALPHA"],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["ALPHA_CLIP"],ha:{$:"grp",da:[{$:"txt",aa:"if ( L < 0.5 ) discard ; L = 1.0 ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["SHADELESS",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:"float t = max ( max ( cO . r , cO . g ) , cO . b ) * u_specular_alpha ; L = cy . a * ( 1.0 - t ) + t ;".split(" ")}]}}]}]}}]}]}},
{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["L","=","1.0",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["REFRACTIVE"],ha:{$:"grp",da:[{$:"txt",aa:"vec2 cR = - ( bI ( N , U ) ) . xy ; aQ = mix ( cS ( l , cR * u_refr_bump ) , aQ , L ) ; L = 1.0 ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["DISABLE_FOG",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["WATER_EFFECTS"],ha:{$:"grp",da:[{$:"txt",aa:"bW ( aQ , bS , D , bT ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"bW ( aQ , bS , D , 1.0 ) ;".split(" ")}]}}]}]}}]},
{$:"cond",da:[{$:"if",ga:["SSAO_ONLY","SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{$:"equal_expr",ia:2},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"float bX = GLSL_TEXTURE_PROJ ( u_shadow_mask , l ) . a ; aQ = vec3 ( bX ) ;".split(" ")}]}}]},{$:"txt",aa:["aW","(","aQ",")",";"]},{$:"cond",da:[{$:"if",ga:["ALPHA","ALPHA_CLIP",{$:"logic_negative_expr",ia:1},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"aX ( aQ , L ) ;".split(" ")}]}}]},{$:"txt",aa:"GLSL_OUT_FRAG_COLOR = vec4 ( aQ , L ) ; }".split(" ")}]};
f["node_skybox.glslf"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"var",ba:"USE_VIEW_TSR",aa:["0"]},{$:"var",ba:"USE_VIEW_TSR_INVERSE",aa:["0"]},{$:"var",ba:"USE_MODEL_TSR",aa:["0"]},{$:"var",ba:"USE_MODEL_TSR_INVERSE",aa:["0"]},{$:"var",ba:"NUM_VALUES",aa:["0"]},{$:"var",ba:"NUM_RGBS",aa:["0"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"include",oa:"color_util.glslf"},{$:"cond",da:[{$:"if",ga:["USE_NODE_VALUE"],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec4 u_node_values [ NUM_VALUES ] ;".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["USE_NODE_RGB"],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec3 u_node_rgbs [ NUM_RGBS ] ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["USE_VIEW_TSR"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat3","u_view_tsr_frag",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_VIEW_TSR_INVERSE"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat3","u_view_tsr_inverse",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_MODEL_TSR"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat3","u_model_tsr",";"]}]}}]},{$:"cond",da:[{$:"if",
ga:["USE_MODEL_TSR_INVERSE"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat3","u_model_tsr_inverse",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_CURVE_VEC","USE_NODE_CURVE_RGB","USE_NODE_VALTORGB",{$:"logical_or_expr",ia:3}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","sampler2D","u_nodes_texture",";"]}]}}]},{$:"txt",aa:"GLSL_IN vec3 bu ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ;".split(" ")},{$:"include",oa:"nodes.glslf"},{$:"txt",aa:["void","main","(",")","{"]},{$:"cond",da:[{$:"if",ga:["USE_NODE_TEXTURE_ENVIRONMENT_EQUIRECTANGULAR",
"USE_NODE_TEXTURE_ENVIRONMENT_MIRROR_BALL","USE_NODE_GEOMETRY_NO","USE_NODE_GEOMETRY_GL","USE_NODE_GEOMETRY_IN","USE_NODE_TEX_COORD_GE","USE_NODE_TEX_COORD_OB","USE_NODE_TEX_COORD_NO","USE_NODE_B4W_REFLECT_WORLD",{$:"logical_or_expr",ia:9}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 D = - normalize ( bu ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["vec3","D",";"]}]}}]},{$:"txt",aa:"vec3 E ; vec3 F ; vec3 G ; vec4 H ; float I ; J ( D , E , F , G , H , I ) ; E = max ( vec3 ( 0.0 ) , E ) ; aW ( E ) ; GLSL_OUT_FRAG_COLOR = vec4 ( E , _1_0 ) ; }".split(" ")}]};
f["particle_system.glslf"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"var",ba:"NUM_VALUES",aa:["0"]},{$:"var",ba:"NUM_RGBS",aa:["0"]},{$:"var",ba:"PRECISION",aa:["highp"]},{$:"var",ba:"NUM_LAMP_LIGHTS",aa:["0"]},{$:"var",ba:"NUM_LIGHTS",aa:["0"]},{$:"var",ba:"PROCEDURAL_FOG",aa:["0"]},{$:"var",ba:"SKY_TEXTURE",aa:["0"]},{$:"var",ba:"NORMAL_TEXCOORD",aa:["0"]},{$:"var",ba:"USE_VIEW_TSR",aa:["0"]},{$:"var",ba:"USE_VIEW_TSR_INVERSE",aa:["0"]},{$:"var",ba:"USE_MODEL_TSR",aa:["0"]},{$:"var",ba:"USE_MODEL_TSR_INVERSE",
aa:["0"]},{$:"var",ba:"ALPHA",aa:["0"]},{$:"var",ba:"ALPHA_CLIP",aa:["0"]},{$:"var",ba:"SOFT_STRENGTH",aa:["0.25"]},{$:"var",ba:"SOFT_PARTICLES",aa:["0"]},{$:"var",ba:"NODES",aa:["0"]},{$:"var",ba:"DISABLE_FOG",aa:["0"]},{$:"var",ba:"WATER_EFFECTS",aa:["0"]},{$:"var",ba:"USE_FOG",aa:["0"]},{$:"var",ba:"USE_ENVIRONMENT_LIGHT",aa:["0"]},{$:"var",ba:"SKY_COLOR",aa:["0"]},{$:"var",ba:"REFLECTION_TYPE",aa:["REFL_NONE"]},{$:"var",ba:"TEXTURE_NORM_CO",aa:["TEXTURE_COORDS_NONE"]},{$:"var",ba:"CALC_TBN_SPACE",
aa:["0"]},{$:"var",ba:"USE_TBN_SHADING",aa:["0"]},{$:"var",ba:"TEXTURE_COLOR",aa:["0"]},{$:"var",ba:"CAMERA_TYPE",aa:["CAM_TYPE_PERSP"]},{$:"var",ba:"USE_POSITION_CLIP",aa:["0"]},{$:"var",ba:"USE_DERIVATIVES_EXT",aa:["0"]},{$:"var",ba:"USE_TEXTURE_LOD_EXT",aa:["0"]},{$:"cond",da:[{$:"if",ga:["GLSL1","USE_DERIVATIVES_EXT",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"extension",aa:["GL_OES_standard_derivatives",":","enable"]}]}}]},{$:"cond",da:[{$:"if",ga:["GLSL1","USE_TEXTURE_LOD_EXT",{$:"logical_and_expr",
ia:2}],ha:{$:"grp",da:[{$:"extension",aa:["GL_EXT_shader_texture_lod",":","enable"]}]}}]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"include",oa:"color_util.glslf"},{$:"cond",da:[{$:"if",ga:["SOFT_PARTICLES","NODES",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"include",oa:"pack.glslf"}]}}]},{$:"txt",aa:["uniform","float","u_environment_energy",";"]},{$:"cond",da:[{$:"if",ga:["NUM_LIGHTS",0,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec4 u_light_positions [ NUM_LIGHTS ] ; uniform vec3 u_light_directions [ NUM_LIGHTS ] ; uniform vec4 u_light_color_intensities [ NUM_LIGHTS ] ;".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["DISABLE_FOG",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec4","u_fog_color_density",";"]},{$:"cond",da:[{$:"if",ga:["WATER_EFFECTS"],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec4 u_underwater_fog_color_density ; uniform float u_cam_water_depth ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["PROCEDURAL_FOG"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat4","u_cube_fog",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_FOG"],ha:{$:"grp",da:[{$:"txt",aa:["uniform",
"vec4","u_fog_params",";"]}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","samplerCube","u_sky_texture",";"]}]}},{$:"elif",ga:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec3 u_horizon_color ; uniform vec3 u_zenith_color ;".split(" ")}]}}]},{$:"txt",aa:"uniform float u_emit ; uniform float u_ambient ; uniform float u_time ; uniform vec3 u_camera_eye_frag ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["USE_NODE_FRESNEL","USE_NODE_LAYER_WEIGHT",{$:"logical_or_expr",ia:2},"CAMERA_TYPE","CAM_TYPE_ORTHO",{$:"equal_expr",ia:2},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec3","u_camera_direction",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_LAMP"],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec3 u_lamp_light_positions [ NUM_LAMP_LIGHTS ] ; uniform vec3 u_lamp_light_directions [ NUM_LAMP_LIGHTS ] ; uniform vec3 u_lamp_light_color_intensities [ NUM_LAMP_LIGHTS ] ;".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["USE_NODE_VALUE"],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec4 u_node_values [ NUM_VALUES ] ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_RGB"],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec3 u_node_rgbs [ NUM_RGBS ] ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["NORMAL_TEXCOORD","REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2},"USE_VIEW_TSR",{$:"logical_or_expr",ia:3}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat3","u_view_tsr_frag",";"]}]}}]},{$:"cond",da:[{$:"if",
ga:["USE_VIEW_TSR_INVERSE"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat3","u_view_tsr_inverse",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_MODEL_TSR"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat3","u_model_tsr",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_MODEL_TSR_INVERSE"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat3","u_model_tsr_inverse",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SOFT_PARTICLES"],ha:{$:"grp",da:[{$:"txt",aa:"uniform PRECISION sampler2D u_scene_depth ; uniform float u_view_max_depth ;".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["USE_NODE_CURVE_VEC","USE_NODE_CURVE_RGB","USE_NODE_VALTORGB",{$:"logical_or_expr",ia:3}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","sampler2D","u_nodes_texture",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_OBJECT_INFO"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec3","u_obj_info",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{$:"non_equal_expr",ia:2},"CALC_TBN_SPACE","USE_TBN_SHADING",{$:"logical_or_expr",ia:3}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN",
"vec4","k",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SOFT_PARTICLES","USE_POSITION_CLIP",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec3","l",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["TEXTURE_COLOR","USE_NODE_TEX_COORD_UV","USE_NODE_UV_MERGED","USE_NODE_UVMAP","USE_NODE_GEOMETRY_UV","USE_NODE_GEOMETRY_OR","USE_NODE_TEX_COORD_GE",{$:"logical_or_expr",ia:7}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec2","A",";"]}]}}]},{$:"txt",aa:["GLSL_IN","vec3","h",";"]},{$:"cond",da:[{$:"if",ga:["SOFT_PARTICLES",
"DISABLE_FOG",{$:"logic_negative_expr",ia:1},"NODES",{$:"logical_or_expr",ia:3}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec4","i",";"]}]}}]},{$:"txt",aa:"GLSL_IN vec3 j ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ;".split(" ")},{$:"cond",da:[{$:"if",ga:["DISABLE_FOG",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"include",oa:"fog.glslf"}]}}]},{$:"include",oa:"math.glslv"},{$:"include",oa:"particles_nodes.glslf"},{$:"txt",aa:"void main ( ) { vec3 D = normalize ( u_camera_eye_frag - h ) ; vec3 E ; vec3 F ; vec3 G ; vec4 H ; float I ; J ( D , E , F , G , H , I ) ; vec3 aQ = E ; float L = I ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["ALPHA"],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["ALPHA_CLIP"],ha:{$:"grp",da:[{$:"txt",aa:"if ( L < 0.5 ) discard ; L = 1.0 ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"L = min ( 1.0 , L ) ;".split(" ")}]}}]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["L","=","1.0",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["DISABLE_FOG",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:"bW ( aQ , length ( i ) , D , 1.0 ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["SOFT_PARTICLES"],
ha:{$:"grp",da:[{$:"txt",aa:"float cT = - i . z / u_view_max_depth ; vec4 cU = GLSL_TEXTURE_PROJ ( u_scene_depth , l ) ; float cW = cV ( cU ) ; float cX = cW - cT ; float cY = u_view_max_depth / SOFT_STRENGTH * cX ; L = L * min ( cY , 1.0 ) ;".split(" ")}]}}]},{$:"txt",aa:["aW","(","aQ",")",";"]},{$:"cond",da:[{$:"if",ga:["ALPHA","ALPHA_CLIP",{$:"logic_negative_expr",ia:1},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"aX ( aQ , L ) ;".split(" ")}]}}]},{$:"txt",aa:"GLSL_OUT_FRAG_COLOR = vec4 ( aQ , L ) ; }".split(" ")}]};
f["particle_system.glslv"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"var",ba:"PRECISION",aa:["highp"]},{$:"var",ba:"BILLBOARD_ALIGN",aa:["BILLBOARD_ALIGN_VIEW"]},{$:"var",ba:"TEXTURE_NORM_CO",aa:["TEXTURE_COORDS_NONE"]},{$:"var",ba:"CALC_TBN_SPACE",aa:["0"]},{$:"var",ba:"USE_TBN_SHADING",aa:["0"]},{$:"var",ba:"NODES",aa:["0"]},{$:"var",ba:"HALO_PARTICLES",aa:["0"]},{$:"var",ba:"TEXTURE_COLOR",aa:["0"]},{$:"var",ba:"PARTICLES_SHADELESS",aa:["0"]},{$:"var",ba:"DISABLE_FOG",aa:["0"]},{$:"var",
ba:"SOFT_PARTICLES",aa:["0"]},{$:"var",ba:"COLOR_RAMP_LENGTH",aa:["0"]},{$:"var",ba:"REFLECTION_PASS",aa:["REFL_PASS_NONE"]},{$:"var",ba:"WORLD_SPACE",aa:["0"]},{$:"var",ba:"USE_COLOR_RAMP",aa:["0"]},{$:"var",ba:"USE_POSITION_CLIP",aa:["0"]},{$:"var",ba:"CAUSTICS",aa:["0"]},{$:"var",ba:"WIND_BEND",aa:["0"]},{$:"var",ba:"MAIN_BEND_COL",aa:["0"]},{$:"var",ba:"DETAIL_BEND",aa:["0"]},{$:"include",oa:"std.glsl"},{$:"txt",aa:"GLSL_IN vec3 a_position ; GLSL_IN vec4 a_tbn ; GLSL_IN vec3 a_p_data ; GLSL_IN vec4 a_p_vels ; GLSL_IN vec2 a_p_bb_vertex ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["NODES",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["HALO_PARTICLES",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","float","cZ",";"]}]}}]},{$:"txt",aa:["GLSL_OUT","vec3","bZ",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{$:"non_equal_expr",ia:2},"CALC_TBN_SPACE","USE_TBN_SHADING",{$:"logical_or_expr",ia:3}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec4","k",";"]}]}}]},{$:"cond",da:[{$:"if",
ga:["TEXTURE_COLOR","HALO_PARTICLES","USE_NODE_TEX_COORD_UV","USE_NODE_UV_MERGED","USE_NODE_UVMAP","USE_NODE_GEOMETRY_UV","USE_NODE_GEOMETRY_OR","USE_NODE_TEX_COORD_GE",{$:"logical_or_expr",ia:8}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec2","A",";"]}]}}]},{$:"txt",aa:["GLSL_OUT","vec3","h",";"]},{$:"cond",da:[{$:"if",ga:["PARTICLES_SHADELESS",{$:"logic_negative_expr",ia:1},"DISABLE_FOG",{$:"logic_negative_expr",ia:1},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec3","bY",
";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SOFT_PARTICLES","DISABLE_FOG",{$:"logic_negative_expr",ia:1},"NODES",{$:"logical_or_expr",ia:3}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec4","i",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SOFT_PARTICLES","USE_POSITION_CLIP",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec3","l",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["HALO_PARTICLES"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","float","bk",";"]}]}}]},{$:"txt",aa:["GLSL_OUT","vec3","j",";"]},{$:"cond",
da:[{$:"if",ga:["COLOR_RAMP_LENGTH",0,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec4 u_p_color_ramp [ COLOR_RAMP_LENGTH ] ;".split(" ")}]}}]},{$:"txt",aa:"uniform float u_p_time ; uniform float u_p_length ; uniform int u_p_cyclic ; uniform float u_p_fade_in ; uniform float u_p_fade_out ; uniform float u_p_nfactor ; uniform float u_p_gravity ; uniform float u_p_mass ; uniform float u_p_wind_fac ; uniform float u_p_max_lifetime ; uniform float u_p_tilt ; uniform float u_p_tilt_rand ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["REFLECTION_PASS","REFL_PASS_PLANE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat4","u_view_refl_matrix",";"]}]}}]},{$:"txt",aa:"uniform mat3 u_view_tsr ; uniform mat4 u_proj_matrix ; uniform vec3 u_wind ; uniform float u_p_size ; uniform vec3 u_camera_eye ;".split(" ")},{$:"cond",da:[{$:"if",ga:["WORLD_SPACE",{$:"logic_negative_expr",ia:1},"NODES","HALO_PARTICLES",{$:"logical_or_expr",ia:3}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","PRECISION","mat3",
"u_model_tsr",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_COLOR_RAMP"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","sampler2D","u_color_ramp_tex",";"]}]}}]},{$:"include",oa:"math.glslv"},{$:"include",oa:"to_world.glslv"},{$:"include",oa:"particles.glslv"},{$:"cond",da:[{$:"if",ga:["NODES"],ha:{$:"grp",da:[{$:"include",oa:"particles_nodes.glslv"}]}}]},{$:"txt",aa:"float db ( vec2 c_ , vec2 da ) { return ( atan ( da . y , da . x ) - atan ( c_ . y , c_ . x ) ) ; } void main ( ) {".split(" ")},{$:"cond",da:[{$:"if",
ga:["REFLECTION_PASS","REFL_PASS_PLANE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["mat4","b_","=","u_view_refl_matrix",";"]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"mat4 b_ = mat4 ( 0.0 ) ;".split(" ")}]}}]},{$:"txt",aa:"mat3 N = u_view_tsr ; dc pp ; pp = dd ( ) ; float de ; mat3 bo = aY ( ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["REFLECTION_PASS","REFL_PASS_PLANE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 df = ( b_ * vec4 ( pp . O , 1.0 ) ) . xyz ;".split(" ")}]}},{$:"else",
ha:{$:"grp",da:[{$:"txt",aa:"vec3 df = pp . O ;".split(" ")}]}}]},{$:"txt",aa:"vec3 U = vec3 ( 0.0 , - 1.0 , 0.0 ) ; if ( BILLBOARD_ALIGN == BILLBOARD_ALIGN_VIEW ) { de = pp . bP ; bo = bn ( df , N ) ; } else if ( BILLBOARD_ALIGN == BILLBOARD_ALIGN_XY ) { de = db ( vec2 ( EPSILON , 1.0 ) , vec2 ( U . x , - U . y ) ) + pp . bP ; bo = aZ ( df , bo ) ; vec4 dg = X ( RIGHT_VECTOR , - M_PI / 2.0 ) ; bo = bc ( dg , bo ) ; } else if ( BILLBOARD_ALIGN == BILLBOARD_ALIGN_YZ ) { de = pp . bP ; bo = aZ ( df , bo ) ; vec4 dh = X ( UP_VECTOR , M_PI / 2.0 ) ; bo = bc ( dh , bo ) ; } else if ( BILLBOARD_ALIGN == BILLBOARD_ALIGN_ZX ) { de = pp . bP ; bo = aZ ( df , bo ) ; } vec3 bs = vec3 ( ( a_p_bb_vertex [ 0 ] * 2.0 - 1.0 ) * pp . di * u_p_size , 0.0 , ( a_p_bb_vertex [ 1 ] * 2.0 - 1.0 ) * pp . di * u_p_size ) ; float dj = a_p_data [ 2 ] ; float dk = u_p_tilt * u_p_tilt_rand * ( 2.0 * dj - 1.0 ) ; float dl = ( dk + u_p_tilt ) * M_PI ; vec4 dm = X ( TOWARD_VECTOR , dl + de ) ; vec3 bt = ap ( bo , T ( dm , bs ) ) ; vec4 cc = vec4 ( ap ( N , bt ) , 1.0 ) ; vec4 f = u_proj_matrix * cc ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["HALO_PARTICLES"],ha:{$:"grp",da:[{$:"txt",aa:["bk","=","dj",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["NODES","PARTICLES_SHADELESS",{$:"logic_negative_expr",ia:1},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"mat3 dn = aY ( ) ; dm = X ( TOWARD_VECTOR , de ) ; dn = bc ( dm , dn ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["NODES"],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["CALC_TBN_SPACE","NODES",{$:"logic_negative_expr",ia:1},"TEXTURE_NORM_CO","TEXTURE_COORDS_UV_ORCO",
{$:"equal_expr",ia:2},{$:"logical_and_expr",ia:2},"USE_TBN_SHADING",{$:"logical_or_expr",ia:3}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 V = vec3 ( 1.0 , 0.0 , 0.0 ) ; vec3 W = vec3 ( 0.0 , 0.0 , 1.0 ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec3 V = vec3 ( 0.0 ) ; vec3 W = vec3 ( 0.0 ) ;".split(" ")}]}}]},{$:"txt",aa:"au aw = av ( vec3 ( 0.0 ) , vec3 ( 0.0 ) , V , vec3 ( 0.0 ) , W , U , bd ( bo , dn ) ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{$:"non_equal_expr",
ia:2},"CALC_TBN_SPACE","USE_TBN_SHADING",{$:"logical_or_expr",ia:3}],ha:{$:"grp",da:[{$:"txt",aa:"float aA = ( dot ( cross ( aw . U , aw . V ) , aw . W ) < 0.0 ) ? - 1.0 : 1.0 ; k = vec4 ( aw . V , aA ) ;".split(" ")}]}}]},{$:"txt",aa:"J ( pp . O , pp . dp , pp . dq , pp . dr , pp . di , a_p_bb_vertex , a_p_data [ 0 ] ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["PARTICLES_SHADELESS",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:"au aw = av ( vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , U , bd ( bo , dn ) ) ;".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["TEXTURE_COLOR"],ha:{$:"grp",da:[{$:"txt",aa:["A","=","a_p_bb_vertex",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["HALO_PARTICLES"],ha:{$:"grp",da:[{$:"txt",aa:"A = a_p_bb_vertex * 2.0 - 1.0 ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"cZ = pp . L ;".split(" ")}]}}]},{$:"txt",aa:"bZ = pp . aQ ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["NODES",{$:"logic_negative_expr",ia:1},"PARTICLES_SHADELESS",{$:"logic_negative_expr",ia:1},{$:"logical_and_expr",ia:2},"USE_NODE_MATERIAL_BEGIN",
"USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{$:"logical_and_expr",ia:3},"USE_NODE_TEX_COORD_NO","USE_NODE_BSDF_BEGIN","USE_NODE_FRESNEL","USE_NODE_TEX_COORD_RE","USE_NODE_LAYER_WEIGHT",{$:"logical_or_expr",ia:11}],ha:{$:"grp",da:[{$:"txt",aa:"j = aw . U ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["SOFT_PARTICLES","USE_POSITION_CLIP",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"l = aC ( f ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["SOFT_PARTICLES",
"DISABLE_FOG",{$:"logic_negative_expr",ia:1},"NODES",{$:"logical_or_expr",ia:3}],ha:{$:"grp",da:[{$:"txt",aa:["i","=","cc",";"]}]}}]},{$:"txt",aa:"gl_Position = f ; h = bt ;".split(" ")},{$:"cond",da:[{$:"if",ga:["PARTICLES_SHADELESS",{$:"logic_negative_expr",ia:1},"DISABLE_FOG",{$:"logic_negative_expr",ia:1},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"bY = u_camera_eye - bt ;".split(" ")}]}}]},{$:"txt",aa:["}"]}]};f["particle_system_stack.glslf"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},
{$:"var",ba:"PRECISION",aa:["highp"]},{$:"var",ba:"NUM_LIGHTS",aa:["0"]},{$:"var",ba:"SKY_TEXTURE",aa:["0"]},{$:"var",ba:"SKY_COLOR",aa:["0"]},{$:"var",ba:"PROCEDURAL_FOG",aa:["0"]},{$:"var",ba:"TEXTURE_BLEND_TYPE",aa:["TEXTURE_BLEND_TYPE_MIX"]},{$:"var",ba:"ALPHA",aa:["0"]},{$:"var",ba:"ALPHA_CLIP",aa:["0"]},{$:"var",ba:"SOFT_STRENGTH",aa:["0.25"]},{$:"var",ba:"SOFT_PARTICLES",aa:["0"]},{$:"var",ba:"NODES",aa:["0"]},{$:"var",ba:"HALO_PARTICLES",aa:["0"]},{$:"var",ba:"TEXTURE_COLOR",aa:["0"]},{$:"var",
ba:"USE_ENVIRONMENT_LIGHT",aa:["0"]},{$:"var",ba:"SKY_STARS",aa:["0"]},{$:"var",ba:"DISABLE_FOG",aa:["0"]},{$:"var",ba:"WATER_EFFECTS",aa:["0"]},{$:"var",ba:"USE_FOG",aa:["0"]},{$:"var",ba:"PARTICLES_SHADELESS",aa:["0"]},{$:"var",ba:"USE_TBN_SHADING",aa:["0"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"include",oa:"color_util.glslf"},{$:"cond",da:[{$:"if",ga:["SOFT_PARTICLES","NODES",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"include",oa:"pack.glslf"}]}}]},{$:"cond",
da:[{$:"if",ga:["HALO_PARTICLES",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["TEXTURE_COLOR"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","sampler2D","u_sampler",";"]}]}}]},{$:"txt",aa:["uniform","float","u_environment_energy",";"]},{$:"cond",da:[{$:"if",ga:["NUM_LIGHTS",0,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec4 u_light_positions [ NUM_LIGHTS ] ; uniform vec3 u_light_directions [ NUM_LIGHTS ] ; uniform vec4 u_light_color_intensities [ NUM_LIGHTS ] ;".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["TEXTURE_COLOR"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","float","u_diffuse_color_factor",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","samplerCube","u_sky_texture",";"]}]}},{$:"elif",ga:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec3 u_horizon_color ; uniform vec3 u_zenith_color ;".split(" ")}]}}]},{$:"txt",aa:"uniform vec2 u_diffuse_params ; uniform float u_diffuse_intensity ; uniform float u_emit ; uniform float u_ambient ; uniform vec3 u_specular_color ; uniform vec3 u_specular_params ;".split(" ")}]}},
{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"uniform float u_halo_size ; uniform vec3 u_halo_rings_color ; uniform float u_halo_hardness ; uniform vec3 u_halo_lines_color ;".split(" ")},{$:"cond",da:[{$:"if",ga:["SKY_STARS"],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec3 u_sun_intensity ; uniform float u_halo_stars_blend ; uniform float u_halo_stars_height ;".split(" ")}]}}]},{$:"txt",aa:"uniform float u_p_alpha_start ; uniform float u_p_alpha_end ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["DISABLE_FOG",
{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec4","u_fog_color_density",";"]},{$:"cond",da:[{$:"if",ga:["WATER_EFFECTS"],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec4 u_underwater_fog_color_density ; uniform float u_cam_water_depth ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["PROCEDURAL_FOG"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat4","u_cube_fog",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_FOG"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec4","u_fog_params",";"]}]}}]}]}}]},
{$:"txt",aa:["uniform","vec4","u_diffuse_color",";"]},{$:"cond",da:[{$:"if",ga:["SOFT_PARTICLES"],ha:{$:"grp",da:[{$:"txt",aa:"uniform PRECISION sampler2D u_scene_depth ; uniform float u_view_max_depth ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["SOFT_PARTICLES"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec3","l",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["TEXTURE_COLOR","HALO_PARTICLES","USE_NODE_TEX_COORD_UV","USE_NODE_UV_MERGED","USE_NODE_UVMAP","USE_NODE_GEOMETRY_UV","USE_NODE_GEOMETRY_OR","USE_NODE_TEX_COORD_GE",
{$:"logical_or_expr",ia:8}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec2","A",";"]}]}}]},{$:"txt",aa:["GLSL_IN","vec3","h",";"]},{$:"cond",da:[{$:"if",ga:["NODES",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["HALO_PARTICLES",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","float","cZ",";"]}]}}]},{$:"txt",aa:["GLSL_IN","vec3","bZ",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["PARTICLES_SHADELESS",{$:"logic_negative_expr",ia:1},"DISABLE_FOG",{$:"logic_negative_expr",
ia:1},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec3","bY",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SOFT_PARTICLES","DISABLE_FOG",{$:"logic_negative_expr",ia:1},"NODES",{$:"logical_or_expr",ia:3}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec4","i",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["HALO_PARTICLES"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","float","bk",";"]},{$:"cond",da:[{$:"if",ga:["SKY_STARS"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec4","bj",";"]}]}}]}]}}]},{$:"cond",da:[{$:"if",
ga:["USE_TBN_SHADING"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec3","B",";"]}]}}]},{$:"txt",aa:"GLSL_IN vec3 j ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ;".split(" ")},{$:"include",oa:"lighting_nodes.glslf"},{$:"cond",da:[{$:"if",ga:["DISABLE_FOG",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"include",oa:"fog.glslf"}]}}]},{$:"cond",da:[{$:"if",ga:["HALO_PARTICLES",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"include",oa:"environment.glslf"}]}}]},{$:"cond",da:[{$:"if",ga:["HALO_PARTICLES"],
ha:{$:"grp",da:[{$:"include",oa:"halo_color.glslf"}]}}]},{$:"txt",aa:["void","main","(",")","{"]},{$:"cond",da:[{$:"if",ga:["PARTICLES_SHADELESS",{$:"logic_negative_expr",ia:1},"DISABLE_FOG",{$:"logic_negative_expr",ia:1},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 D = normalize ( bY ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["HALO_PARTICLES"],ha:{$:"grp",da:[{$:"txt",aa:"vec4 bm = bl ( ) ; vec3 aQ = bm . rgb * bZ ; float ds = 0.9 * length ( A ) ; float dt = smoothstep ( u_p_alpha_start , u_p_alpha_end , ds ) ; float L = bm . a * ( 1.0 - dt ) ;".split(" ")}]}},
{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["vec4","cy","=","u_diffuse_color",";"]},{$:"cond",da:[{$:"if",ga:["TEXTURE_COLOR"],ha:{$:"grp",da:[{$:"txt",aa:"vec4 cA = GLSL_TEXTURE ( u_sampler , A ) ; bG ( cA . rgb ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MIX",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"cy . rgb = mix ( cy . rgb , cA . rgb , u_diffuse_color_factor ) ;".split(" ")}]}},{$:"elif",ga:["TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MULTIPLY",{$:"equal_expr",
ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"cy . rgb *= mix ( vec3 ( 1.0 ) , cA . rgb , u_diffuse_color_factor ) ;".split(" ")}]}}]},{$:"txt",aa:"cy . a = cA . a ;".split(" ")}]}}]},{$:"txt",aa:"cy . rgb *= bZ ;".split(" ")},{$:"cond",da:[{$:"if",ga:["PARTICLES_SHADELESS",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 cD = u_diffuse_intensity * cy . rgb ; vec3 cI = u_emit * cy . rgb ; vec3 U = normalize ( j ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",
{$:"logic_negative_expr",ia:1},"SKY_COLOR",{$:"logical_and_expr",ia:3}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 cF = u_environment_energy * cE ( vec3 ( 0.0 ) ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec3 cF = u_environment_energy * cE ( U ) ;".split(" ")}]}}]},{$:"txt",aa:"vec3 cG = u_ambient * cF ; float cL = u_specular_params [ 0 ] ; vec2 cM = vec2 ( u_specular_params [ 1 ] , u_specular_params [ 2 ] ) ; vec3 cN = cL * u_specular_color ; vec3 aQ ; vec3 cO ; cP ( cI , cG , cD , cN , h , U , D , cM , u_diffuse_params , vec4 ( 1.0 ) , 0.0 , vec4 ( 0.0 ) , aQ , cO ) ;".split(" ")}]}},
{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec3 aQ = cy . rgb ;".split(" ")}]}}]},{$:"txt",aa:"float L = cy . a * cZ ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["ALPHA"],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["ALPHA_CLIP"],ha:{$:"grp",da:[{$:"txt",aa:"if ( L < 0.5 ) discard ; L = 1.0 ;".split(" ")}]}}]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["L","=","1.0",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["DISABLE_FOG",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:"bW ( aQ , length ( i ) , D , 1.0 ) ;".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["SOFT_PARTICLES"],ha:{$:"grp",da:[{$:"txt",aa:"float cT = - i . z / u_view_max_depth ; vec4 cU = GLSL_TEXTURE_PROJ ( u_scene_depth , l ) ; float cW = cV ( cU ) ; float cX = cW - cT ; float cY = u_view_max_depth / SOFT_STRENGTH * cX ; L = L * min ( cY , 1.0 ) ;".split(" ")}]}}]},{$:"txt",aa:["aW","(","aQ",")",";"]},{$:"cond",da:[{$:"if",ga:["ALPHA","ALPHA_CLIP",{$:"logic_negative_expr",ia:1},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"aX ( aQ , L ) ;".split(" ")}]}}]},
{$:"txt",aa:"GLSL_OUT_FRAG_COLOR = vec4 ( aQ , L ) ; }".split(" ")}]};f["proc_skybox.glslf"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"include",oa:"color_util.glslf"},{$:"txt",aa:"uniform vec3 u_sky_color ; uniform vec3 u_sun_direction ; uniform float u_rayleigh_brightness ; uniform float u_mie_brightness ; uniform float u_spot_brightness ; uniform float u_scatter_strength ; uniform float u_rayleigh_strength ; uniform float u_mie_strength ; uniform float u_rayleigh_collection_power ; uniform float u_mie_collection_power ; uniform float u_mie_distribution ; GLSL_IN vec3 bu ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; const float du = 0.99 ; const float dv = 1.8 ; const int dw = 8 ; float dB ( vec3 O , vec3 bH ) { float a = dot ( bH , bH ) ; float b = 2.0 * dot ( bH , O ) ; float dx = dot ( O , O ) - 1.0 ; float dy = b * b - 4.0 * a * dx ; float dz = sqrt ( dy ) ; float q = ( - b - dz ) / 2.0 ; float dA = dx / q ; return dA ; } float dD ( float L , float g ) { float a = 3.0 * ( 1.0 - g * g ) ; float b = 2.0 * ( 2.0 + g * g ) ; float dx = 1.0 + L * L ; float dC = pow ( 1.0 + g * g - 2.0 * g * L , 1.5 ) ; dC = max ( dC , 0.00001 ) ; return ( a / b ) * ( dx / dC ) ; } float dI ( vec3 O , vec3 bH , float dE ) { float dF = dot ( bH , - O ) ; if ( dF < 0.0 ) { return 1.0 ; } vec3 dG = O + dF * bH ; if ( length ( dG ) < dE ) { return 0.0 ; } else if ( length ( dG ) >= dE ) { vec3 da = normalize ( dG ) * dE - O ; float dH = acos ( dot ( normalize ( da ) , bH ) ) ; return smoothstep ( 0.0 , 1.0 , pow ( dH * 2.0 , 3.0 ) ) ; } else return 1.0 ; } vec3 dJ ( float aM , vec3 aQ , float aL ) { return aQ - aQ * pow ( u_sky_color , vec3 ( aL / aM ) ) ; } void main ( ) { vec3 bv = normalize ( bu ) ; vec3 dK = u_sun_direction ; float L = dot ( bv , dK ) ; float dL = dD ( L , - 0.01 ) * u_rayleigh_brightness * dK . z ; float dM = dD ( L - 0.5 , u_mie_distribution ) * u_mie_brightness * ( 1.0 - dK . z ) ; float dN = smoothstep ( 0.0 , 100.0 , dD ( L , 0.9995 ) ) * u_spot_brightness ; vec3 dO = vec3 ( 0.0 , 0.0 , du ) ; float dP = dB ( dO , bv ) ; float dQ = dP / float ( dw ) ; float dR = dI ( dO , bv , du - 0.3 ) ; vec3 dS = vec3 ( 0.0 , 0.0 , 0.0 ) ; vec3 dT = vec3 ( 0.0 , 0.0 , 0.0 ) ; for ( int cq = 0 ; cq < dw ; cq ++ ) { float dU = dQ * float ( cq ) ; vec3 O = dO + bv * dU ; float dV = dI ( O , dK , du - 0.2 ) ; float dW = dB ( O , dK ) ; vec3 dX = dJ ( dW , vec3 ( dv ) , u_scatter_strength ) * dV ; dS += dJ ( sqrt ( dU ) , u_sky_color * dX , u_rayleigh_strength ) ; dT += dJ ( dU , dX , u_mie_strength ) ; } dS = dS * dR * pow ( dP , u_rayleigh_collection_power ) / float ( dw ) ; dT = ( dT * dR * pow ( dP , u_mie_collection_power ) ) / float ( dw ) ; vec3 aQ = vec3 ( dN * dT + dM * dT + dL * dS ) ; aW ( aQ ) ; GLSL_OUT_FRAG_COLOR = vec4 ( aQ , 1.0 ) ; }".split(" ")}]};
f["r_convolution_skybox.glslf"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"include",oa:"color_util.glslf"},{$:"txt",aa:"uniform samplerCube u_sky_reflection ; uniform float u_roughness ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; GLSL_IN vec3 bu ; float eb ( int cw , int dY ) { float dZ = 1.0 / float ( dY ) ; float d_ = 1.0 ; float ea = 0.0 ; for ( int cq = 0 ; cq < 32 ; ++ cq ) { if ( cw > 0 ) { d_ = mod ( float ( cw ) , 2.0 ) ; ea += d_ * dZ ; dZ = dZ / 2.0 ; cw = int ( float ( cw ) / 2.0 ) ; } } return ea ; } vec2 ed ( int cq , int ec ) { return vec2 ( float ( cq ) / float ( ec ) , eb ( cq , 2 ) ) ; } vec3 ek ( vec2 ee , vec3 ec , float ef ) { float a = ef * ef ; float bC = 2.0 * M_PI * ee . x ; float eg = sqrt ( ( 1.0 - ee . y ) / ( 1.0 + ( a * a - 1.0 ) * ee . y ) ) ; float eh = sqrt ( 1.0 - eg * eg ) ; vec3 ei ; ei . x = cos ( bC ) * eh ; ei . y = sin ( bC ) * eh ; ei . z = eg ; vec3 by = abs ( ec . z ) < 0.999 ? vec3 ( 0.0 , 0.0 , 1.0 ) : vec3 ( 1.0 , 0.0 , 0.0 ) ; vec3 V = normalize ( cross ( by , ec ) ) ; vec3 ej = cross ( ec , V ) ; vec3 bF = V * ei . x + ej * ei . y + ec * ei . z ; return normalize ( bF ) ; } void main ( ) { vec3 el = vec3 ( 0.0 ) ; if ( u_roughness != 0.0 ) { vec3 ec = normalize ( bu ) ; vec3 em = ec ; vec3 en = em ; const int eo = 1024 ; float ep = 0.0 ; for ( int cq = 0 ; cq < eo ; ++ cq ) { vec2 ee = ed ( cq , eo ) ; vec3 ei = ek ( ee , ec , u_roughness ) ; vec3 eq = normalize ( 2.0 * dot ( en , ei ) * ei - en ) ; float er = max ( dot ( ec , eq ) , 0.0 ) ; if ( er > 0.0 ) { vec3 bw = GLSL_TEXTURE_CUBE ( u_sky_reflection , eq ) . rgb ; bG ( bw ) ; el += bw * er ; ep += er ; } } el = el / ep ; } else { vec3 bw = GLSL_TEXTURE_CUBE ( u_sky_reflection , normalize ( bu ) ) . rgb ; bG ( bw ) ; el = bw ; } GLSL_OUT_FRAG_COLOR = vec4 ( el , 1.0 ) ; }".split(" ")}]};
f["shadow.glslf"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"var",ba:"PRECISION",aa:["highp"]},{$:"var",ba:"NODES",aa:["0"]},{$:"var",ba:"REFLECTION_TYPE",aa:["REFL_NONE"]},{$:"var",ba:"USE_TBN_SHADING",aa:["0"]},{$:"var",ba:"SHADELESS",aa:["0"]},{$:"var",ba:"RGBA_SHADOWS",aa:["0"]},{$:"var",ba:"USE_VIEW_TSR_INVERSE",aa:["0"]},{$:"var",ba:"USE_MODEL_TSR_INVERSE",aa:["0"]},{$:"var",ba:"USE_VIEW_TSR",aa:["0"]},{$:"var",ba:"USE_MODEL_TSR",aa:["0"]},{$:"var",ba:"USE_ENVIRONMENT_LIGHT",aa:["0"]},
{$:"var",ba:"SKY_TEXTURE",aa:["0"]},{$:"var",ba:"SKY_COLOR",aa:["0"]},{$:"var",ba:"USE_REFRACTION",aa:["0"]},{$:"var",ba:"CALC_TBN_SPACE",aa:["0"]},{$:"var",ba:"CAMERA_TYPE",aa:["CAM_TYPE_PERSP"]},{$:"var",ba:"USE_POSITION_CLIP",aa:["0"]},{$:"var",ba:"USE_REFRACTION_CORRECTION",aa:["0"]},{$:"var",ba:"CSM_SECTION1",aa:["0"]},{$:"var",ba:"CSM_SECTION2",aa:["0"]},{$:"var",ba:"CSM_SECTION3",aa:["0"]},{$:"var",ba:"NUM_LIGHTS",aa:["0"]},{$:"var",ba:"NUM_LAMP_LIGHTS",aa:["0"]},{$:"var",ba:"TEXTURE_BLEND_TYPE",
aa:["TEXTURE_BLEND_TYPE_MIX"]},{$:"var",ba:"NUM_VALUES",aa:["0"]},{$:"var",ba:"NUM_RGBS",aa:["0"]},{$:"var",ba:"NUM_CAST_LAMPS",aa:["0"]},{$:"var",ba:"TEXTURE_COLOR",aa:["0"]},{$:"var",ba:"ALPHA",aa:["0"]},{$:"var",ba:"SHADOW_USAGE",aa:["NO_SHADOWS"]},{$:"var",ba:"POISSON_DISK_NUM",aa:["NO_SOFT_SHADOWS"]},{$:"var",ba:"USE_DERIVATIVES_EXT",aa:["0"]},{$:"var",ba:"CAMERA_TYPE",aa:["CAM_TYPE_PERSP"]},{$:"var",ba:"USE_LOD_SMOOTHING",aa:["0"]},{$:"cond",da:[{$:"if",ga:["GLSL1","USE_DERIVATIVES_EXT",{$:"logical_and_expr",
ia:2}],ha:{$:"grp",da:[{$:"extension",aa:["GL_OES_standard_derivatives",":","enable"]}]}}]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"cond",da:[{$:"if",ga:["NODES","ALPHA",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"include",oa:"math.glslv"}]}}]},{$:"cond",da:[{$:"if",ga:["RGBA_SHADOWS"],ha:{$:"grp",da:[{$:"include",oa:"depth_fetch.glslf"},{$:"include",oa:"pack.glslf"}]}}]},{$:"cond",da:[{$:"if",ga:["USE_LOD_SMOOTHING"],ha:{$:"grp",da:[{$:"include",oa:"coverage.glslf"}]}}]},
{$:"cond",da:[{$:"if",ga:["NODES","ALPHA",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"uniform float u_time ; uniform float u_environment_energy ;".split(" ")},{$:"cond",da:[{$:"if",ga:["NUM_LIGHTS",0,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec4 u_light_positions [ NUM_LIGHTS ] ; uniform vec3 u_light_directions [ NUM_LIGHTS ] ; uniform vec4 u_light_color_intensities [ NUM_LIGHTS ] ;".split(" ")}]}}]},{$:"txt",aa:["uniform","vec3","u_camera_eye_frag",";"]},{$:"cond",da:[{$:"if",
ga:["USE_NODE_FRESNEL","USE_NODE_LAYER_WEIGHT",{$:"logical_or_expr",ia:2},"CAMERA_TYPE","CAM_TYPE_ORTHO",{$:"equal_expr",ia:2},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec3","u_camera_direction",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2},"USE_VIEW_TSR",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat3","u_view_tsr_frag",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_VIEW_TSR_INVERSE"],ha:{$:"grp",da:[{$:"txt",
aa:["uniform","mat3","u_view_tsr_inverse",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_MODEL_TSR"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat3","u_model_tsr",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_MODEL_TSR_INVERSE"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat3","u_model_tsr_inverse",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","samplerCube","u_sky_texture",";"]}]}},{$:"elif",ga:["USE_ENVIRONMENT_LIGHT",
"SKY_COLOR",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec3 u_horizon_color ; uniform vec3 u_zenith_color ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","sampler2D","u_plane_reflection",";"]}]}},{$:"elif",ga:["REFLECTION_TYPE","REFL_CUBE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","samplerCube","u_cube_reflection",";"]}]}},{$:"elif",ga:["REFLECTION_TYPE","REFL_MIRRORMAP",
{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{$:"txt",aa:"uniform float u_emit ; uniform float u_ambient ; uniform vec2 u_fresnel_params ;".split(" ")},{$:"cond",da:[{$:"if",ga:["REFLECTION_TYPE","REFL_MIRRORMAP",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","float","u_mirror_factor",";"]}]}},{$:"elif",ga:["REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec4","u_refl_plane",";"]}]}}]},
{$:"cond",da:[{$:"if",ga:["USE_NODE_LAMP"],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec3 u_lamp_light_positions [ NUM_LAMP_LIGHTS ] ; uniform vec3 u_lamp_light_directions [ NUM_LAMP_LIGHTS ] ; uniform vec3 u_lamp_light_color_intensities [ NUM_LAMP_LIGHTS ] ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_VALUE"],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec4 u_node_values [ NUM_VALUES ] ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_RGB"],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec3 u_node_rgbs [ NUM_RGBS ] ;".split(" ")}]}}]}]}},
{$:"else",ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["TEXTURE_COLOR"],ha:{$:"grp",da:[{$:"txt",aa:"uniform sampler2D u_colormap0 ; uniform float u_alpha_factor ;".split(" ")}]}}]},{$:"txt",aa:["uniform","vec4","u_diffuse_color",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["POISSON_DISK_NUM","NO_SOFT_SHADOWS",{$:"non_equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec4","u_pcf_blur_radii",";"]}]}}]},
{$:"txt",aa:"uniform vec4 u_csm_center_dists ; uniform PRECISION GLSL_SMPLR2D_SHDW u_shadow_map0 ;".split(" ")},{$:"cond",da:[{$:"if",ga:["CSM_SECTION1","NUM_CAST_LAMPS",1,{$:"g_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","PRECISION","GLSL_SMPLR2D_SHDW","u_shadow_map1",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["CSM_SECTION2","NUM_CAST_LAMPS",2,{$:"g_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","PRECISION","GLSL_SMPLR2D_SHDW","u_shadow_map2",
";"]}]}}]},{$:"cond",da:[{$:"if",ga:["CSM_SECTION3","NUM_CAST_LAMPS",3,{$:"g_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","PRECISION","GLSL_SMPLR2D_SHDW","u_shadow_map3",";"]}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","sampler2D","u_shadow_mask",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_B4W_REFRACTION"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","sampler2D","u_refractmap",
";"]},{$:"cond",da:[{$:"if",ga:["USE_REFRACTION","USE_REFRACTION_CORRECTION",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","PRECISION","sampler2D","u_scene_depth",";"]}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_CURVE_VEC","USE_NODE_CURVE_RGB","USE_NODE_VALTORGB",{$:"logical_or_expr",ia:3}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","sampler2D","u_nodes_texture",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_OBJECT_INFO"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec3","u_obj_info",
";"]}]}}]},{$:"cond",da:[{$:"if",ga:["RGBA_SHADOWS","SHADOW_USAGE","SHADOW_CASTING",{$:"equal_expr",ia:2},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec2","u_camera_range",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_LOD_SMOOTHING"],ha:{$:"grp",da:[{$:"txt",aa:"uniform float u_lod_coverage ; uniform float u_lod_cmp_logic ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["NODES","ALPHA",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"GLSL_IN vec3 h ; GLSL_IN vec3 j ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["CALC_TBN_SPACE"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec4","k",";"]}]}}]}]}},{$:"else",ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["TEXTURE_COLOR"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec2","A",";"]}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{$:"equal_expr",ia:2},"NODES","ALPHA",{$:"logical_and_expr",ia:2},"SHADOW_USAGE","SHADOW_CASTING",{$:"equal_expr",ia:2},"RGBA_SHADOWS",{$:"logical_and_expr",ia:2},{$:"logical_or_expr",ia:3}],ha:{$:"grp",
da:[{$:"txt",aa:["GLSL_IN","vec4","i",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec4","n",";"]},{$:"cond",da:[{$:"if",ga:["CSM_SECTION1","NUM_CAST_LAMPS",1,{$:"g_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec4","o",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["CSM_SECTION2","NUM_CAST_LAMPS",2,{$:"g_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN",
"vec4","u",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["CSM_SECTION3","NUM_CAST_LAMPS",3,{$:"g_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec4","v",";"]}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2},"USE_POSITION_CLIP",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec3","l",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["NODES","ALPHA",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["USE_NODE_B4W_REFRACTION",
"USE_REFRACTION",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","float","m",";"]}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_TBN_SHADING"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec3","B",";"]}]}}]},{$:"txt",aa:["GLSL_OUT","vec4","GLSL_OUT_FRAG_COLOR",";"]},{$:"cond",da:[{$:"if",ga:["SHADELESS",{$:"logic_negative_expr",ia:1},"NODES","ALPHA",{$:"logical_and_expr",ia:2},"SHADOW_USAGE","SHADOW_MASK_GENERATION",{$:"equal_expr",ia:2},{$:"logical_or_expr",ia:3}],ha:{$:"grp",da:[{$:"include",
oa:"shadow.glslf"}]}}]},{$:"cond",da:[{$:"if",ga:["NODES","ALPHA",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"include",oa:"nodes.glslf"}]}}]},{$:"txt",aa:["void","main","(",")","{"]},{$:"cond",da:[{$:"if",ga:["USE_LOD_SMOOTHING"],ha:{$:"grp",da:[{$:"txt",aa:"if ( ! C ( u_lod_coverage , u_lod_cmp_logic ) ) discard ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["ALPHA"],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["NODES"],ha:{$:"grp",da:[{$:"txt",aa:"vec3 D = normalize ( u_camera_eye_frag - h ) ; vec3 E ; vec3 F ; vec3 G ; vec4 H ; float I ; J ( D , E , F , G , H , I ) ; float L = I ;".split(" ")}]}},
{$:"else",ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["TEXTURE_COLOR"],ha:{$:"grp",da:[{$:"txt",aa:"float L = ( GLSL_TEXTURE ( u_colormap0 , A ) ) . a ;".split(" ")},{$:"cond",da:[{$:"if",ga:["TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MIX",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"float M = u_alpha_factor * L ; M += ( 1.0 - step ( 0.0 , M ) ) ; L = mix ( M , 1.0 , u_diffuse_color . a ) ;".split(" ")}]}}]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"float L = u_diffuse_color . a ;".split(" ")}]}}]}]}}]},
{$:"txt",aa:"if ( L < 0.5 ) discard ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["SHADOW_USAGE","NO_SHADOWS",{$:"equal_expr",ia:2},"SHADOW_USAGE","SHADOW_CASTING",{$:"equal_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["RGBA_SHADOWS"],ha:{$:"grp",da:[{$:"txt",aa:"float et = es ( - i . z , u_camera_range ) ; GLSL_OUT_FRAG_COLOR = eu ( et ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"GLSL_OUT_FRAG_COLOR = vec4 ( 1.0 ) ;".split(" ")}]}}]}]}},{$:"elif",
ga:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"GLSL_OUT_FRAG_COLOR = ev ( i . z ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["NODES","ALPHA",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["CALC_TBN_SPACE"],ha:{$:"grp",da:[{$:"txt",aa:"GLSL_OUT_FRAG_COLOR . a *= clamp ( k . r , 0.999999999 , 1.0 ) ;".split(" ")}]}}]}]}}]},{$:"txt",aa:["}"]}]};f["shadow.glslv"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"var",ba:"PRECISION",
aa:["highp"]},{$:"var",ba:"CAUSTICS",aa:["0"]},{$:"var",ba:"CALC_TBN_SPACE",aa:["0"]},{$:"var",ba:"MAIN_BEND_COL",aa:["0"]},{$:"var",ba:"DETAIL_BEND",aa:["0"]},{$:"var",ba:"CALC_TBN",aa:["0"]},{$:"var",ba:"USE_INSTANCED_PARTCLS",aa:["0"]},{$:"var",ba:"NODES",aa:["0"]},{$:"var",ba:"USE_TBN_SHADING",aa:["0"]},{$:"var",ba:"REFLECTION_TYPE",aa:["REFL_NONE"]},{$:"var",ba:"SMAA_JITTER",aa:["0"]},{$:"var",ba:"MAC_OS_SHADOW_HACK",aa:["0"]},{$:"var",ba:"USE_POSITION_CLIP",aa:["0"]},{$:"var",ba:"RGBA_SHADOWS",
aa:["0"]},{$:"var",ba:"REFRACTIVE",aa:["0"]},{$:"var",ba:"AU_QUALIFIER",aa:["GLSL_IN"]},{$:"var",ba:"BEND_CENTER_ONLY",aa:["0"]},{$:"var",ba:"CSM_SECTION1",aa:["0"]},{$:"var",ba:"CSM_SECTION2",aa:["0"]},{$:"var",ba:"CSM_SECTION3",aa:["0"]},{$:"var",ba:"HAIR_BILLBOARD",aa:["0"]},{$:"var",ba:"FRAMES_BLENDING",aa:["0"]},{$:"var",ba:"SHADOW_TEX_RES",aa:["2048.0"]},{$:"var",ba:"VERTEX_ANIM",aa:["0"]},{$:"var",ba:"NUM_CAST_LAMPS",aa:["0"]},{$:"var",ba:"TEXTURE_COLOR",aa:["0"]},{$:"var",ba:"ALPHA",aa:["0"]},
{$:"var",ba:"VERTEX_ANIM_MIX_NORMALS_FACTOR",aa:["u_va_frame_factor"]},{$:"var",ba:"MAX_BONES",aa:["0"]},{$:"var",ba:"WIND_BEND",aa:["0"]},{$:"var",ba:"SHADOW_USAGE",aa:["NO_SHADOWS"]},{$:"var",ba:"SKINNED",aa:["0"]},{$:"var",ba:"DYNAMIC_GRASS",aa:["0"]},{$:"var",ba:"BILLBOARD",aa:["0"]},{$:"var",ba:"STATIC_BATCH",aa:["0"]},{$:"var",ba:"BILLBOARD_JITTERED",aa:["0"]},{$:"include",oa:"std.glsl"},{$:"include",oa:"math.glslv"},{$:"include",oa:"to_world.glslv"},{$:"include",oa:"scale_texcoord.glslv"},
{$:"txt",aa:"GLSL_IN vec3 a_position ; GLSL_IN vec4 a_tbn ;".split(" ")},{$:"cond",da:[{$:"if",ga:["USE_INSTANCED_PARTCLS"],ha:{$:"grp",da:[{$:"txt",aa:"GLSL_IN vec4 a_part_ts ; GLSL_IN vec4 a_part_r ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["USE_TBN_SHADING"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec3","a_shade_tangs",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SKINNED"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec4","a_influence",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",
{$:"logical_or_expr",ia:3},"USE_INSTANCED_PARTCLS",{$:"logic_negative_expr",ia:1},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["WIND_BEND"],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["MAIN_BEND_COL"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","float","a_bending_col_main",";"]},{$:"cond",da:[{$:"if",ga:["DETAIL_BEND"],ha:{$:"grp",da:[{$:"txt",aa:"GLSL_IN vec3 a_bending_col_detail ; AU_QUALIFIER float au_detail_bending_amp ; AU_QUALIFIER float au_branch_bending_amp ; AU_QUALIFIER float au_detail_bending_freq ;".split(" ")}]}}]}]}}]},
{$:"txt",aa:"AU_QUALIFIER float au_wind_bending_amp ; AU_QUALIFIER float au_wind_bending_freq ;".split(" ")},{$:"cond",da:[{$:"if",ga:["BEND_CENTER_ONLY"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec3","a_emitter_center",";"]}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["VERTEX_ANIM"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec3","a_position_next",";"]},{$:"cond",da:[{$:"if",ga:["NODES","ALPHA",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO",
"USE_NODE_NORMAL_MAP","CAUSTICS","CALC_TBN_SPACE",{$:"logical_or_expr",ia:5}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec4","a_tbn_next",";"]}]}}]}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["NODES","ALPHA",{$:"logical_and_expr",ia:2},{$:"logic_negative_expr",ia:1},"TEXTURE_COLOR",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec2","a_texcoord",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["NODES","ALPHA",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"GLSL_OUT vec3 h ; GLSL_OUT vec3 j ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["CALC_TBN_SPACE"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec4","k",";"]}]}}]}]}},{$:"else",ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["TEXTURE_COLOR"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec2","A",";"]}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{$:"equal_expr",ia:2},"NODES","ALPHA",{$:"logical_and_expr",ia:2},"SHADOW_USAGE","SHADOW_CASTING",{$:"equal_expr",ia:2},"RGBA_SHADOWS",{$:"logical_and_expr",ia:2},{$:"logical_or_expr",ia:3}],
ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec4","i",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec4","n",";"]},{$:"cond",da:[{$:"if",ga:["CSM_SECTION1","NUM_CAST_LAMPS",1,{$:"g_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec4","o",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["CSM_SECTION2","NUM_CAST_LAMPS",2,{$:"g_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",
aa:["GLSL_OUT","vec4","u",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["CSM_SECTION3","NUM_CAST_LAMPS",3,{$:"g_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec4","v",";"]}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2},"USE_POSITION_CLIP",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec3","l",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["NODES","ALPHA",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",
ga:["USE_NODE_B4W_REFRACTION","REFRACTIVE",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","float","m",";"]}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_TBN_SHADING"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec3","B",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["STATIC_BATCH"],ha:{$:"grp",da:[{$:"txt",aa:"const mat3 u_model_tsr = mat3 ( 0.0 , 0.0 , 0.0 , 1.0 , 1.0 , 1.0 , 0.0 , 0.0 , 0.0 ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["uniform","PRECISION","mat3","u_model_tsr",
";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SMAA_JITTER"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec2","u_subpixel_jitter",";"]}]}}]},{$:"txt",aa:"uniform mat3 u_view_tsr ; uniform mat4 u_proj_matrix ;".split(" ")},{$:"cond",da:[{$:"if",ga:["DYNAMIC_GRASS","BILLBOARD",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec3","u_camera_eye",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["BILLBOARD","SHADOW_USAGE","SHADOW_CASTING",{$:"equal_expr",ia:2},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",
aa:["uniform","mat3","u_shadow_cast_billboard_view_tsr",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["DYNAMIC_GRASS"],ha:{$:"grp",da:[{$:"txt",aa:"uniform PRECISION sampler2D u_grass_map_depth ; uniform sampler2D u_grass_map_color ; uniform vec4 u_camera_quat ; uniform vec3 u_grass_map_dim ; uniform float u_grass_size ; uniform float u_scale_threshold ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["SKINNED"],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec4 u_quatsb [ MAX_BONES ] ; uniform vec4 u_transb [ MAX_BONES ] ; uniform vec4 u_arm_rel_trans ; uniform vec4 u_arm_rel_quat ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["FRAMES_BLENDING"],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec4 u_quatsa [ MAX_BONES ] ; uniform vec4 u_transa [ MAX_BONES ] ; uniform float u_frame_factor ;".split(" ")}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["WIND_BEND"],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["BILLBOARD_JITTERED"],ha:{$:"grp",da:[{$:"txt",aa:"uniform float u_jitter_amp ; uniform float u_jitter_freq ;".split(" ")}]}}]},{$:"txt",aa:"uniform vec3 u_wind ; uniform PRECISION float u_time ;".split(" ")}]}}]},{$:"cond",
da:[{$:"if",ga:["VERTEX_ANIM"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","float","u_va_frame_factor",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["NODES","ALPHA",{$:"logical_and_expr",ia:2},{$:"logic_negative_expr",ia:1},"TEXTURE_COLOR",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec3","u_texture_scale",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","float","u_normal_offset",";"]},{$:"cond",da:[{$:"if",
ga:["MAC_OS_SHADOW_HACK"],ha:{$:"grp",da:[{$:"txt",aa:"uniform mat3 u_v_light_tsr [ NUM_CAST_LAMPS ] ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"uniform vec4 u_v_light_ts [ NUM_CAST_LAMPS ] ; uniform vec4 u_v_light_r [ NUM_CAST_LAMPS ] ;".split(" ")}]}}]},{$:"txt",aa:["uniform","mat4","u_p_light_matrix0",";"]},{$:"cond",da:[{$:"if",ga:["CSM_SECTION1","NUM_CAST_LAMPS",1,{$:"g_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat4","u_p_light_matrix1",";"]}]}}]},
{$:"cond",da:[{$:"if",ga:["CSM_SECTION2","NUM_CAST_LAMPS",2,{$:"g_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat4","u_p_light_matrix2",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["CSM_SECTION3","NUM_CAST_LAMPS",3,{$:"g_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat4","u_p_light_matrix3",";"]}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_B4W_REFRACTION"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","PRECISION","float","u_view_max_depth",
";"]}]}}]},{$:"include",oa:"dynamic_grass.glslv"},{$:"include",oa:"shadow.glslv"},{$:"include",oa:"skin.glslv"},{$:"include",oa:"wind_bending.glslv"},{$:"cond",da:[{$:"if",ga:["NODES","ALPHA",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"include",oa:"nodes.glslv"}]}}]},{$:"txt",aa:"void main ( ) { mat3 N = u_view_tsr ; vec3 O = a_position ;".split(" ")},{$:"cond",da:[{$:"if",ga:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{$:"equal_expr",ia:2},"CALC_TBN_SPACE","USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO",
"USE_NODE_NORMAL_MAP","CAUSTICS","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{$:"logical_and_expr",ia:3},"USE_NODE_BSDF_BEGIN","USE_NODE_FRESNEL","USE_NODE_TEX_COORD_NO","USE_NODE_TEX_COORD_RE","USE_NODE_LAYER_WEIGHT","USE_NODE_BUMP",{$:"logical_or_expr",ia:13}],ha:{$:"grp",da:[{$:"txt",aa:"float P , Q ; vec4 S = R ( a_tbn , P , Q ) ; vec3 ca = T ( S , vec3 ( 0.0 , 1.0 , 0.0 ) ) ; vec3 U = ca ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec3 U = vec3 ( 0.0 ) ;".split(" ")}]}}]},{$:"cond",
da:[{$:"if",ga:["NODES","ALPHA","CALC_TBN_SPACE",{$:"logical_and_expr",ia:3}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 V = T ( S , vec3 ( 1.0 , 0.0 , 0.0 ) ) ; vec3 W = Q * cross ( U , V ) ; vec4 Y = X ( W , Q * P ) ; V = T ( Y , U ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec3 V = vec3 ( 0.0 ) ; vec3 W = vec3 ( 0.0 ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["VERTEX_ANIM"],ha:{$:"grp",da:[{$:"txt",aa:"O = mix ( O , a_position_next , u_va_frame_factor ) ;".split(" ")},{$:"cond",da:[{$:"if",
ga:["NODES","ALPHA",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","USE_NODE_NORMAL_MAP","CAUSTICS","CALC_TBN_SPACE",{$:"logical_or_expr",ia:5}],ha:{$:"grp",da:[{$:"txt",aa:"float af , ah ; vec4 ai = R ( a_tbn_next , af , ah ) ; vec3 aj = T ( ai , vec3 ( 0.0 , 1.0 , 0.0 ) ) ; U = mix ( U , aj , VERTEX_ANIM_MIX_NORMALS_FACTOR ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["CALC_TBN_SPACE"],ha:{$:"grp",da:[{$:"txt",aa:"vec3 ak = T ( ai , vec3 ( 1.0 , 0.0 , 0.0 ) ) ; vec3 al = ah * cross ( aj , ak ) ; vec4 am = X ( al , ah * af ) ; ak = T ( am , aj ) ; V = mix ( V , ak , u_va_frame_factor ) ; W = mix ( W , al , u_va_frame_factor ) ;".split(" ")}]}}]}]}}]}]}}]},
{$:"cond",da:[{$:"if",ga:["SKINNED"],ha:{$:"grp",da:[{$:"txt",aa:"an ( O , V , W , U ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["USE_INSTANCED_PARTCLS"],ha:{$:"grp",da:[{$:"txt",aa:"mat3 Z = aZ ( a_part_ts . xyz , aY ( ) ) ; Z = a_ ( vec3 ( a_part_ts . w ) , Z ) ; Z = bc ( a_part_r , Z ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["STATIC_BATCH",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:"Z = bd ( u_model_tsr , Z ) ;".split(" ")}]}}]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["mat3",
"Z","=","u_model_tsr",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{$:"logical_or_expr",ia:3},"USE_INSTANCED_PARTCLS",{$:"logic_negative_expr",ia:1},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["vec3","ao","=","au_center_pos",";"]}]}},{$:"elif",ga:["DYNAMIC_GRASS","USE_INSTANCED_PARTCLS",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 ao = a_part_ts . xyz ; O = ap ( Z , O ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec3 ao = vec3 ( 0.0 ) ;".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["USE_TBN_SHADING"],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["CALC_TBN"],ha:{$:"grp",da:[{$:"txt",aa:"vec3 ac = normalize ( _ ( Z , ca ) ) ; vec3 ad = cross ( vec3 ( 0.0 , 0.0 , 1.0 ) , ac ) ; vec3 ae = cross ( ac , ad ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["vec3","ae","=","a_shade_tangs",";"]}]}}]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec3 ae = vec3 ( 0.0 ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["DYNAMIC_GRASS"],ha:{$:"grp",da:[{$:"txt",aa:"au aw = be ( O , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , U , ao , u_grass_map_depth , u_grass_map_color , u_grass_map_dim , u_grass_size , u_camera_eye , u_camera_quat , N , Z ) ;".split(" ")}]}},
{$:"else",ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["BILLBOARD"],ha:{$:"grp",da:[{$:"txt",aa:"vec3 aq = ap ( Z , ao ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["HAIR_BILLBOARD",{$:"logic_negative_expr",ia:1},"SHADOW_USAGE","SHADOW_CASTING",{$:"equal_expr",ia:2},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["mat3","ew","=","u_shadow_cast_billboard_view_tsr",";"]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["mat3","ew","=","N",";"]}]}}]},{$:"txt",aa:"Z = as ( u_camera_eye , aq , ew , Z ) ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["WIND_BEND","BILLBOARD_JITTERED",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"Z = at ( u_wind , u_time , u_jitter_amp , u_jitter_freq , aq , Z ) ;".split(" ")}]}}]},{$:"txt",aa:"au aw = av ( O - ao , ao , V , ae , W , U , Z ) ; aw . ao = aq ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"au aw = av ( O , ao , V , ae , W , U , Z ) ;".split(" ")}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["WIND_BEND"],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["MAIN_BEND_COL",
"DETAIL_BEND",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["vec3","ay","=","ca",";"]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec3 ay = vec3 ( 0.0 ) ;".split(" ")}]}}]},{$:"txt",aa:"ax ( aw . O , aw . ao , ay , mat4 ( 0.0 ) ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["NODES","ALPHA",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"h = aw . O ;".split(" ")},{$:"cond",da:[{$:"if",ga:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","USE_NODE_NORMAL_MAP","CAUSTICS","CALC_TBN_SPACE",
"WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{$:"logical_and_expr",ia:3},"USE_NODE_TEX_COORD_NO","USE_NODE_BSDF_BEGIN","USE_NODE_FRESNEL","USE_NODE_TEX_COORD_RE","USE_NODE_LAYER_WEIGHT","USE_NODE_BUMP",{$:"logical_or_expr",ia:12}],ha:{$:"grp",da:[{$:"txt",aa:"j = aw . U ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["CALC_TBN_SPACE"],ha:{$:"grp",da:[{$:"txt",aa:"float aA = ( dot ( cross ( aw . U , aw . V ) , aw . W ) < 0.0 ) ? - 1.0 : 1.0 ; k = vec4 ( aw . V , aA ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",
ga:["USE_TBN_SHADING"],ha:{$:"grp",da:[{$:"txt",aa:"B = aw . aB ;".split(" ")}]}}]}]}}]},{$:"txt",aa:"vec4 cc = vec4 ( ap ( N , aw . O ) , 1.0 ) ; vec4 f = u_proj_matrix * cc ;".split(" ")},{$:"cond",da:[{$:"if",ga:["SMAA_JITTER"],ha:{$:"grp",da:[{$:"txt",aa:"f . xy += u_subpixel_jitter * f . w ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["NODES","ALPHA",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2},"USE_POSITION_CLIP",
{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"l = aC ( f ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_B4W_REFRACTION","REFRACTIVE",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"m = - cc . z / u_view_max_depth ;".split(" ")}]}}]},{$:"txt",aa:["J","(",")",";"]}]}},{$:"else",ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["TEXTURE_COLOR"],ha:{$:"grp",da:[{$:"txt",aa:"A = az ( a_texcoord , u_texture_scale ) ;".split(" ")}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["SHADOW_USAGE",
"SHADOW_MASK_GENERATION",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"cd ( aw . O , aw . U ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{$:"equal_expr",ia:2},"NODES","ALPHA",{$:"logical_and_expr",ia:2},"SHADOW_USAGE","SHADOW_CASTING",{$:"equal_expr",ia:2},"RGBA_SHADOWS",{$:"logical_and_expr",ia:2},{$:"logical_or_expr",ia:3}],ha:{$:"grp",da:[{$:"txt",aa:["i","=","cc",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SHADOW_USAGE","SHADOW_CASTING",{$:"equal_expr",
ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec2 ey = ( u_proj_matrix * vec4 ( ex ( N ) , 1.0 ) ) . xy ; float ez = SHADOW_TEX_RES / 2.0 ; ey = floor ( ey * ez + 0.5 ) / ez - ey ; f . xy += ey ;".split(" ")}]}}]},{$:"txt",aa:["gl_Position","=","f",";","}"]}]};f["sky.glslf"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"var",ba:"WO_SKYTEX",aa:["0"]},{$:"var",ba:"WO_SKYREAL",aa:["0"]},{$:"var",ba:"WO_SKYBLEND",aa:["0"]},{$:"var",ba:"PROCEDURAL_SKYDOME",aa:["0"]},{$:"var",ba:"WATER_EFFECTS",aa:["0"]},{$:"var",
ba:"DISABLE_FOG",aa:["0"]},{$:"var",ba:"WO_SKYPAPER",aa:["0"]},{$:"var",ba:"REFLECTION_PASS",aa:["REFL_PASS_NONE"]},{$:"var",ba:"WATER_LEVEL",aa:["0.0"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"include",oa:"color_util.glslf"},{$:"txt",aa:["uniform","samplerCube","u_sky",";"]},{$:"cond",da:[{$:"if",ga:["WATER_EFFECTS","DISABLE_FOG",{$:"logic_negative_expr",ia:1},"REFLECTION_PASS","REFL_PASS_NONE",{$:"equal_expr",ia:2},{$:"logical_and_expr",ia:3}],ha:{$:"grp",da:[{$:"txt",
aa:"uniform vec3 u_camera_eye_frag ; uniform vec4 u_underwater_fog_color_density ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["WO_SKYBLEND","WO_SKYPAPER",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec4 u_sky_tex_fac ; uniform vec3 u_sky_tex_color ; uniform float u_sky_tex_dvar ; uniform vec3 u_horizon_color ; uniform vec3 u_zenith_color ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["WO_SKYBLEND","WO_SKYPAPER","WO_SKYTEX",{$:"logical_and_expr",ia:3}],ha:{$:"grp",da:[{$:"include",
oa:"sky_blending.glslf"}]}}]},{$:"txt",aa:["GLSL_IN","vec3","bu",";"]},{$:"cond",da:[{$:"if",ga:["PROCEDURAL_SKYDOME",{$:"logic_negative_expr",ia:1},"WO_SKYTEX","WO_SKYBLEND",{$:"logical_or_expr",ia:2},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec2","A",";"]}]}}]},{$:"txt",aa:"GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec3 bw ; vec3 bv = normalize ( bu ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["WO_SKYBLEND","WO_SKYPAPER",{$:"logical_and_expr",ia:2}],ha:{$:"grp",
da:[{$:"txt",aa:["float","eA","=","0.0",";"]},{$:"cond",da:[{$:"if",ga:["WO_SKYREAL"],ha:{$:"grp",da:[{$:"txt",aa:"eA = abs ( A . y ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"eA = ( A . y + 1.0 ) * 0.5 ;".split(" ")}]}}]},{$:"txt",aa:"vec3 eB = u_horizon_color ; vec3 eC = u_zenith_color ;".split(" ")},{$:"cond",da:[{$:"if",ga:["WO_SKYTEX"],ha:{$:"grp",da:[{$:"txt",aa:"vec3 eD = vec3 ( A , 0.0 ) ; vec4 eE = GLSL_TEXTURE_CUBE ( u_sky , bv ) ; bG ( eE . rgb ) ; bw = eF ( eB , eC , eE , eA , eD ) ;".split(" ")}]}},
{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"bw = mix ( eB , eC , eA ) ;".split(" ")}]}}]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"bw = GLSL_TEXTURE_CUBE ( u_sky , bv ) . rgb ; bG ( bw ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["WATER_EFFECTS","DISABLE_FOG",{$:"logic_negative_expr",ia:1},"REFLECTION_PASS","REFL_PASS_NONE",{$:"equal_expr",ia:2},{$:"logical_and_expr",ia:3}],ha:{$:"grp",da:[{$:"txt",aa:"float eG = WATER_LEVEL - u_camera_eye_frag . z ; vec3 eH = vec3 ( 0.0 ) ; vec3 eI = mix ( u_underwater_fog_color_density . rgb , eH , min ( - bv . z , 1.0 ) ) ; eI *= min ( 1.0 - min ( 0.03 * eG , 0.8 ) , 1.0 ) ; float aL = clamp ( sign ( 0.01 * eG - bv . z ) , 0.0 , 1.0 ) ; bw = mix ( bw , eI , aL ) ;".split(" ")}]}}]},
{$:"txt",aa:"aW ( bw ) ; GLSL_OUT_FRAG_COLOR = vec4 ( bw , 1.0 ) ; }".split(" ")}]};f["sky.glslv"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"var",ba:"PROCEDURAL_SKYDOME",aa:["0"]},{$:"var",ba:"WO_SKYTEX",aa:["0"]},{$:"var",ba:"WO_SKYBLEND",aa:["0"]},{$:"include",oa:"std.glsl"},{$:"txt",aa:"uniform mat4 u_sky_vp_inverse ; GLSL_IN vec3 a_position ; GLSL_OUT vec3 bu ;".split(" ")},{$:"cond",da:[{$:"if",ga:["PROCEDURAL_SKYDOME",{$:"logic_negative_expr",ia:1},"WO_SKYTEX","WO_SKYBLEND",{$:"logical_or_expr",
ia:2},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec2","A",";"]}]}}]},{$:"txt",aa:"void main ( ) { vec4 O = vec4 ( a_position . xy , 0.9999999 , 1.0 ) ; vec4 bv = u_sky_vp_inverse * O ; bu = bv . xyz ;".split(" ")},{$:"cond",da:[{$:"if",ga:["PROCEDURAL_SKYDOME",{$:"logic_negative_expr",ia:1},"WO_SKYTEX","WO_SKYBLEND",{$:"logical_or_expr",ia:2},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"A = a_position . xy ;".split(" ")}]}}]},{$:"txt",aa:["gl_Position","=",
"O",";","}"]}]};f["skybox.glslv"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"var",ba:"PROCEDURAL_SKYDOME",aa:["0"]},{$:"var",ba:"WO_SKYTEX",aa:["0"]},{$:"var",ba:"WO_SKYBLEND",aa:["0"]},{$:"include",oa:"std.glsl"},{$:"txt",aa:"uniform mat4 u_cube_view_matrix ; GLSL_IN vec3 a_position ; GLSL_OUT vec3 bu ;".split(" ")},{$:"cond",da:[{$:"if",ga:["PROCEDURAL_SKYDOME",{$:"logic_negative_expr",ia:1},"WO_SKYTEX","WO_SKYBLEND",{$:"logical_or_expr",ia:2},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",
aa:["GLSL_OUT","vec2","A",";"]}]}}]},{$:"txt",aa:"void main ( ) { vec4 O = vec4 ( a_position . xy , 0.999999 , 1.0 ) ; vec4 bv = u_cube_view_matrix * O ; bu = bv . xyz ;".split(" ")},{$:"cond",da:[{$:"if",ga:["PROCEDURAL_SKYDOME",{$:"logic_negative_expr",ia:1},"WO_SKYTEX","WO_SKYBLEND",{$:"logical_or_expr",ia:2},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"A = a_position . xy ;".split(" ")}]}}]},{$:"txt",aa:["gl_Position","=","O",";","}"]}]};f["tex_skybox.glslf"]={$:"grp",da:[{$:"version",
aa:["GLSL_VERSION"]},{$:"var",ba:"WO_SKYTEX",aa:["0"]},{$:"var",ba:"WO_SKYREAL",aa:["0"]},{$:"var",ba:"WO_SKYBLEND",aa:["0"]},{$:"var",ba:"WO_SKYPAPER",aa:["0"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"include",oa:"color_util.glslf"},{$:"txt",aa:"GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; GLSL_IN vec3 bu ; GLSL_IN vec2 A ;".split(" ")},{$:"cond",da:[{$:"if",ga:["WO_SKYTEX"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","samplerCube","u_sky_texture",";"]}]}}]},{$:"txt",aa:"uniform vec4 u_sky_tex_fac ; uniform vec3 u_sky_tex_color ; uniform float u_sky_tex_dvar ; uniform vec3 u_horizon_color ; uniform vec3 u_zenith_color ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["WO_SKYTEX"],ha:{$:"grp",da:[{$:"include",oa:"sky_blending.glslf"}]}}]},{$:"txt",aa:"void main ( ) { vec3 bv = normalize ( bu ) ; vec3 bw ; float eA = 0.0 ;".split(" ")},{$:"cond",da:[{$:"if",ga:["WO_SKYPAPER"],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["WO_SKYTEX"],ha:{$:"grp",da:[{$:"txt",aa:"bw = GLSL_TEXTURE_CUBE ( u_sky_texture , bv ) . xyz ; bG ( bw ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"bw = vec3 ( 1.0 ) ;".split(" ")}]}}]}]}},{$:"else",ha:{$:"grp",
da:[{$:"cond",da:[{$:"if",ga:["WO_SKYBLEND"],ha:{$:"grp",da:[{$:"txt",aa:"float L = acos ( bv . z ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["WO_SKYREAL"],ha:{$:"grp",da:[{$:"txt",aa:"eA = abs ( L * INV_PI - 0.5 ) * 2.0 ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"eA = 1.0 - L * INV_PI ;".split(" ")}]}}]}]}}]},{$:"txt",aa:"vec3 eB = u_horizon_color ; vec3 eC = u_zenith_color ;".split(" ")},{$:"cond",da:[{$:"if",ga:["WO_SKYTEX"],ha:{$:"grp",da:[{$:"txt",aa:"vec4 eE = GLSL_TEXTURE_CUBE ( u_sky_texture , bv ) ; bG ( eE . rgb ) ; vec3 eD = vec3 ( bu . xy , 0.0 ) ; bw = eF ( eB , eC , eE , eA , eD ) ;".split(" ")}]}},
{$:"else",ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["WO_SKYBLEND"],ha:{$:"grp",da:[{$:"txt",aa:"bw = mix ( eB , eC , eA ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["bw","=","eB",";"]}]}}]}]}}]}]}}]},{$:"txt",aa:"aW ( bw ) ; GLSL_OUT_FRAG_COLOR = vec4 ( bw , 1.0 ) ; }".split(" ")}]};f["water.glslf"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"var",ba:"PRECISION",aa:["highp"]},{$:"var",ba:"USE_FOG",aa:["0"]},{$:"var",ba:"USE_TBN_SHADING",aa:["0"]},{$:"var",ba:"DEBUG_WIREFRAME",
aa:["0"]},{$:"var",ba:"NUM_NORMALMAPS",aa:["0"]},{$:"var",ba:"FOAM",aa:["0"]},{$:"var",ba:"SHORE_PARAMS",aa:["0"]},{$:"var",ba:"GENERATED_MESH",aa:["0"]},{$:"var",ba:"ABSORB",aa:["6.0"]},{$:"var",ba:"SSS_STRENGTH",aa:["1.0"]},{$:"var",ba:"SSS_WIDTH",aa:["0.45"]},{$:"var",ba:"ALPHA",aa:["0"]},{$:"var",ba:"DISABLE_FOG",aa:["0"]},{$:"var",ba:"NUM_LIGHTS",aa:["0"]},{$:"var",ba:"WAVES_HEIGHT",aa:["1.0"]},{$:"var",ba:"WATER_LEVEL",aa:["0.0"]},{$:"var",ba:"PROCEDURAL_FOG",aa:["0"]},{$:"var",ba:"SKY_TEXTURE",
aa:["0"]},{$:"var",ba:"USE_REFRACTION_CORRECTION",aa:["0"]},{$:"var",ba:"SHORE_SMOOTHING",aa:["0"]},{$:"var",ba:"DYNAMIC",aa:["0"]},{$:"var",ba:"USE_ENVIRONMENT_LIGHT",aa:["0"]},{$:"var",ba:"SKY_COLOR",aa:["0"]},{$:"var",ba:"REFLECTION_TYPE",aa:["REFL_NONE"]},{$:"var",ba:"WATER_EFFECTS",aa:["0"]},{$:"var",ba:"REFRACTIVE",aa:["0"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"include",oa:"pack.glslf"},{$:"include",oa:"color_util.glslf"},{$:"include",oa:"math.glslv"},
{$:"define",ba:"REFL_BUMP",aa:["0.002"]},{$:"txt",aa:["uniform","float","u_time",";"]},{$:"cond",da:[{$:"if",ga:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","samplerCube","u_sky_texture",";"]}]}},{$:"elif",ga:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec3 u_horizon_color ; uniform vec3 u_zenith_color ;".split(" ")}]}}]},{$:"txt",aa:["uniform","float","u_environment_energy",";"]},
{$:"cond",da:[{$:"if",ga:["NUM_LIGHTS",0,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec4 u_light_positions [ NUM_LIGHTS ] ; uniform vec3 u_light_directions [ NUM_LIGHTS ] ; uniform vec4 u_light_color_intensities [ NUM_LIGHTS ] ;".split(" ")}]}}]},{$:"txt",aa:"uniform vec3 u_sun_intensity ; uniform vec3 u_sun_direction ;".split(" ")},{$:"cond",da:[{$:"if",ga:["REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2},"SHORE_SMOOTHING","WATER_EFFECTS","DISABLE_FOG",{$:"logic_negative_expr",ia:1},
{$:"logical_and_expr",ia:2},{$:"logical_or_expr",ia:3}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","float","u_cam_water_depth",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["DISABLE_FOG",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec4","u_fog_color_density",";"]},{$:"cond",da:[{$:"if",ga:["WATER_EFFECTS"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec4","u_underwater_fog_color_density",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["PROCEDURAL_FOG"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat4",
"u_cube_fog",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_FOG"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec4","u_fog_params",";"]}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["NUM_NORMALMAPS",0,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","sampler2D","u_normalmap0",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["REFRACTIVE"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","sampler2D","u_refractmap",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",
aa:["uniform","sampler2D","u_plane_reflection",";"]}]}},{$:"elif",ga:["REFLECTION_TYPE","REFL_MIRRORMAP",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SHORE_SMOOTHING"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","PRECISION","sampler2D","u_scene_depth",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["FOAM"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","sampler2D","u_foam",";"]}]}}]},{$:"txt",aa:"uniform vec4 u_diffuse_color ; uniform vec2 u_diffuse_params ; uniform float u_diffuse_intensity ; uniform float u_ambient ; uniform vec2 u_fresnel_params ; uniform vec3 u_specular_color ; uniform vec3 u_specular_params ; uniform vec3 u_shallow_water_col ; uniform vec3 u_shore_water_col ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["NUM_NORMALMAPS",0,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"uniform float u_water_norm_uv_velocity ; uniform vec2 u_normalmap0_scale ;".split(" ")},{$:"cond",da:[{$:"if",ga:["NUM_NORMALMAPS",1,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec2","u_normalmap1_scale",";"]},{$:"cond",da:[{$:"if",ga:["NUM_NORMALMAPS",2,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec2","u_normalmap2_scale",";"]},{$:"cond",da:[{$:"if",ga:["NUM_NORMALMAPS",3,{$:"g_expr",
ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec2","u_normalmap3_scale",";"]}]}}]}]}}]}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["REFLECTION_TYPE","REFL_MIRRORMAP",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","float","u_mirror_factor",";"]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["uniform","float","u_reflect_factor",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SHORE_SMOOTHING","DISABLE_FOG",{$:"logic_negative_expr",ia:1},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform",
"float","u_view_max_depth",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SHORE_PARAMS"],ha:{$:"grp",da:[{$:"txt",aa:"uniform float u_water_shallow_col_fac ; uniform float u_water_shore_col_fac ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["FOAM"],ha:{$:"grp",da:[{$:"txt",aa:"uniform float u_foam_factor ; uniform vec2 u_foam_uv_freq ; uniform vec2 u_foam_mag ; uniform vec2 u_foam_scale ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["REFRACTIVE"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","float","u_refr_bump",
";"]}]}}]},{$:"cond",da:[{$:"if",ga:["DEBUG_WIREFRAME"],ha:{$:"grp",da:[{$:"txt",aa:"const float aE = 1.0 ; uniform vec3 u_wireframe_edge_color ;".split(" ")}]}}]},{$:"txt",aa:"GLSL_IN vec3 bY ; GLSL_IN vec3 h ; GLSL_IN vec3 j ;".split(" ")},{$:"cond",da:[{$:"if",ga:["NUM_NORMALMAPS",0,{$:"g_expr",ia:2},"FOAM",{$:"logical_or_expr",ia:2},"GENERATED_MESH",{$:"logic_negative_expr",ia:1},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec2","A",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["NUM_NORMALMAPS",
0,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"GLSL_IN vec3 k ; GLSL_IN vec3 eJ ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["NUM_NORMALMAPS",0,{$:"g_expr",ia:2},"FOAM",{$:"logical_or_expr",ia:2},"GENERATED_MESH","DYNAMIC",{$:"logical_and_expr",ia:3}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec3","eK",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SHORE_PARAMS"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec3","eL",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",
ia:2},"REFRACTIVE",{$:"logical_or_expr",ia:3}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec3","l",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2},"REFRACTIVE","DISABLE_FOG",{$:"logic_negative_expr",ia:1},{$:"logical_or_expr",ia:4}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","float","m",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["DEBUG_WIREFRAME"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec3","aD",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_TBN_SHADING"],
ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec3","B",";"]}]}}]},{$:"txt",aa:["GLSL_OUT","vec4","GLSL_OUT_FRAG_COLOR",";"]},{$:"include",oa:"environment.glslf"},{$:"cond",da:[{$:"if",ga:["REFRACTIVE","SHORE_SMOOTHING","USE_REFRACTION_CORRECTION",{$:"logical_and_expr",ia:3}],ha:{$:"grp",da:[{$:"include",oa:"refraction.glslf"}]}}]},{$:"cond",da:[{$:"if",ga:["DISABLE_FOG",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"include",oa:"fog.glslf"}]}}]},{$:"txt",aa:"vec3 eT ( in vec2 eM , in vec3 U , in vec3 eN , in vec3 eO , out float eP , in float eQ ) { eP = 0.0 ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec2 eR = eM . xy + U . xy * REFL_BUMP / m ; eP = u_reflect_factor ; vec3 eS ; if ( u_cam_water_depth < 0.0 ) {".split(" ")},{$:"cond",da:[{$:"if",ga:["DISABLE_FOG",{$:"logic_negative_expr",ia:1},"WATER_EFFECTS",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"eS = u_underwater_fog_color_density . rgb ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"eS = u_diffuse_color . rgb ;".split(" ")}]}}]},
{$:"txt",aa:"} else { eS = GLSL_TEXTURE ( u_plane_reflection , eR ) . rgb ; bG ( eS ) ; }".split(" ")}]}},{$:"elif",ga:["REFLECTION_TYPE","REFL_MIRRORMAP",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"eP = u_mirror_factor ; vec3 eS = eO * GLSL_TEXTURE_CUBE ( u_mirrormap , eN ) . rgb ; bG ( eS ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"eP = u_reflect_factor ; vec3 eS = eO * vec3 ( 0.3 , 0.5 , 1.0 ) ; bG ( eS ) ;".split(" ")}]}}]},{$:"txt",aa:"eP = min ( eP * eQ , 1.0 ) ; return eS ; }".split(" ")},
{$:"include",oa:"lighting_nodes.glslf"},{$:"txt",aa:["void","main","(",")","{"]},{$:"cond",da:[{$:"if",ga:["NUM_NORMALMAPS",0,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"mat3 cg = mat3 ( k , eJ , j ) ;".split(" ")}]}}]},{$:"txt",aa:"vec3 U = normalize ( j ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["DYNAMIC","FOAM",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["WATER_EFFECTS"],ha:{$:"grp",da:[{$:"txt",aa:"float bT = h . z - WATER_LEVEL ;".split(" ")}]}},{$:"else",ha:{$:"grp",
da:[{$:"txt",aa:"float bT = h . z ;".split(" ")}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["NUM_NORMALMAPS",0,{$:"g_expr",ia:2},"FOAM",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["GENERATED_MESH"],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["DYNAMIC"],ha:{$:"grp",da:[{$:"txt",aa:"vec2 ce = vec2 ( eK . x , - eK . y ) + 0.5 ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec2 ce = vec2 ( h . x , - h . y ) + 0.5 ;".split(" ")}]}}]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["vec2",
"ce","=","A",";"]}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["NUM_NORMALMAPS",0,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 eU = vec3 ( 0.0 ) ; eU += GLSL_TEXTURE ( u_normalmap0 , ce * u_normalmap0_scale + vec2 ( 0.3 , 0.5 ) * u_water_norm_uv_velocity * u_time ) . xyz - 0.5 ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["NUM_NORMALMAPS",1,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"eU += GLSL_TEXTURE ( u_normalmap0 , ce * u_normalmap1_scale + vec2 ( - 0.3 , 0.7 ) * u_water_norm_uv_velocity * u_time ) . xyz - 0.5 ;".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["NUM_NORMALMAPS",2,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"eU += GLSL_TEXTURE ( u_normalmap0 , ce * u_normalmap2_scale + vec2 ( 0.0 , 1.1 ) * u_water_norm_uv_velocity * u_time ) . xyz - 0.5 ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["NUM_NORMALMAPS",3,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"eU += GLSL_TEXTURE ( u_normalmap0 , ce * u_normalmap3_scale + vec2 ( - 0.66 , - 0.3 ) * u_water_norm_uv_velocity * u_time ) . xyz - 0.5 ;".split(" ")}]}}]},{$:"cond",
da:[{$:"if",ga:["NUM_NORMALMAPS",0,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["DYNAMIC"],ha:{$:"grp",da:[{$:"txt",aa:"U = mix ( U , normalize ( cg * eU ) , 0.3 ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"U = mix ( U , normalize ( cg * eU ) , 0.5 ) ;".split(" ")}]}}]},{$:"txt",aa:"U = normalize ( U ) ;".split(" ")}]}}]},{$:"txt",aa:"vec3 D = normalize ( bY ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2},"REFRACTIVE",{$:"logical_or_expr",
ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec2 eM = l . xy / l . z ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec2 eM = vec2 ( 0.0 ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["REFRACTIVE"],ha:{$:"grp",da:[{$:"txt",aa:"vec2 eV = eM + U . xy * u_refr_bump / m ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["SHORE_SMOOTHING"],ha:{$:"grp",da:[{$:"txt",aa:"float L = u_diffuse_color . a ; vec4 cU = GLSL_TEXTURE_PROJ ( u_scene_depth , l ) ; float cW = cV ( cU ) ; float cX = max ( cW - m , 0.0 ) ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["REFRACTIVE"],ha:{$:"grp",da:[{$:"txt",aa:"float eX = eW ( cW , eV , eM ) ; float eY = max ( eX - m , 0.0 ) ; float eZ = u_view_max_depth / ABSORB * eY ; float e_ = min ( L * eZ , 1.0 ) ; L = min ( 15.0 * L * u_view_max_depth * cX , 1.0 ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"float cY = u_view_max_depth / ABSORB * cX ; if ( u_cam_water_depth > 0.0 ) L = min ( L * cY , 1.0 ) ;".split(" ")}]}}]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"float L = u_diffuse_color . a ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["REFRACTIVE"],ha:{$:"grp",da:[{$:"txt",aa:["float","e_","=","L",";"]}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["REFRACTIVE"],ha:{$:"grp",da:[{$:"txt",aa:"if ( u_cam_water_depth < 0.0 ) e_ = 0.0 ; vec3 fa = GLSL_TEXTURE ( u_refractmap , eV ) . rgb ; bG ( fa ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["SHORE_PARAMS"],ha:{$:"grp",da:[{$:"txt",aa:"float fb = pow ( min ( eL . b / u_water_shallow_col_fac , 1.0 ) , 0.3 ) ; vec3 cy = mix ( u_shallow_water_col , u_diffuse_color . rgb , fb ) ; fb = pow ( min ( eL . b / u_water_shore_col_fac , 1.0 ) , 0.3 ) ; cy = mix ( u_shore_water_col , cy , fb ) ;".split(" ")}]}},
{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec3 cy = u_diffuse_color . rgb ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["FOAM"],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["SHORE_SMOOTHING"],ha:{$:"grp",da:[{$:"txt",aa:"float fc = max ( 1.0 - u_view_max_depth * cX , 0.0 ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"float fc = 1.0 - L ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["DYNAMIC"],ha:{$:"grp",da:[{$:"txt",aa:"float fd = max ( bT / WAVES_HEIGHT + 0.1 , 0.0 ) ;".split(" ")},{$:"cond",
da:[{$:"if",ga:["SHORE_PARAMS"],ha:{$:"grp",da:[{$:"txt",aa:"vec3 fe = normalize ( vec3 ( eL . rg , 0.0 ) ) ; vec3 ff = normalize ( mix ( UP_VECTOR , fe , 0.8 ) ) ; float fg = 1.25 * max ( dot ( U , ff ) - 0.2 , 0.0 ) ; fg += max ( dot ( U , - UP_VECTOR ) , 0.0 ) ; fc += fg * ( 1.0 - eL . b ) ; fd *= ( 1.0 - 0.95 * pow ( eL . b , 0.1 ) ) ;".split(" ")}]}}]},{$:"txt",aa:"fc += fd ; fc = min ( u_foam_factor * fc , 1.0 ) ;".split(" ")}]}}]},{$:"txt",aa:"vec4 fh = GLSL_TEXTURE ( u_foam , u_foam_mag * sin ( u_foam_uv_freq * u_time ) + ce * u_foam_scale ) ;".split(" ")}]}}]},
{$:"txt",aa:"float cL = u_specular_params [ 0 ] ; vec2 cM = vec2 ( u_specular_params [ 1 ] , u_specular_params [ 2 ] ) ; vec3 cN = cL * u_specular_color ; vec3 cF = u_environment_energy * cE ( U ) ; vec3 cG = u_ambient * cF ; vec3 eO = cG + u_sun_intensity ; float eP ; vec3 eN = reflect ( - D , U ) ; vec3 fi = normalize ( eN + D ) ; float fj = 1.0 - dot ( D , fi ) ; float ec = u_fresnel_params [ 0 ] ; float fk = u_fresnel_params [ 1 ] ; float fl = fk + ( 1.0 - fk ) * pow ( fj , ec ) ; vec3 eS = eT ( eM , U , eN , eO , eP , fl ) ; vec3 cD = u_diffuse_intensity * cy ; vec3 aQ ; vec3 cO ; cP ( vec3 ( 0.0 ) , vec3 ( 0.0 ) , cD , cN , h , U , D , cM , u_diffuse_params , vec4 ( 1.0 ) , 0.0 , vec4 ( 0.0 ) , aQ , cO ) ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["DYNAMIC"],ha:{$:"grp",da:[{$:"txt",aa:"float fm = max ( dot ( u_sun_direction , - j ) + SSS_WIDTH , 0.0 ) * max ( dot ( - D , u_sun_direction ) - 0.5 , 0.0 ) * max ( 0.0 , length ( u_sun_intensity ) - 0.1 ) ; fm = clamp ( SSS_STRENGTH * fm , 0.0 , 1.0 ) ; aQ = mix ( aQ , u_shallow_water_col , fm ) ; aQ = mix ( aQ , u_shore_water_col , fm ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["REFRACTIVE"],ha:{$:"grp",da:[{$:"txt",aa:"aQ = mix ( fa , aQ , e_ ) ;".split(" ")}]}}]},
{$:"txt",aa:"aQ = mix ( aQ , eS , eP ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["FOAM"],ha:{$:"grp",da:[{$:"txt",aa:"float fn = mix ( fh . g , fh . r , max ( 4.0 * ( fc - 0.75 ) , 0.0 ) ) ; fn = mix ( fh . b , fn , max ( 2.0 * fc - 1.0 , 0.0 ) ) ; fn = mix ( 0.0 , fn , fc ) ; aQ = mix ( aQ , eO , fn ) ;".split(" ")}]}}]},{$:"txt",aa:["aQ","+=","cO",";"]},{$:"cond",da:[{$:"if",ga:["WATER_EFFECTS","DISABLE_FOG",{$:"logic_negative_expr",ia:1},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"float fo = m * u_view_max_depth ; float fp = 1.0 ; if ( u_cam_water_depth > 1.0 ) fp = 2.0 ; bW ( aQ , fo , D , fp ) ;".split(" ")}]}}]},
{$:"txt",aa:["aW","(","aQ",")",";"]},{$:"cond",da:[{$:"if",ga:["REFRACTIVE",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:"L = max ( L , cO . r ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["FOAM"],ha:{$:"grp",da:[{$:"txt",aa:["L","+=","fn",";"]}]}}]}]}},{$:"elif",ga:["SHORE_SMOOTHING",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:["L","=","1.0",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["ALPHA"],ha:{$:"grp",da:[{$:"txt",aa:"aX ( aQ , L ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",
ga:["DEBUG_WIREFRAME",1,{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["GLSL1"],ha:{$:"grp",da:[{$:"extension",aa:["GL_OES_standard_derivatives",":","enable"]}]}}]},{$:"txt",aa:"vec3 aN = fwidth ( aD ) ; vec3 aO = smoothstep ( vec3 ( 0.0 ) , aN * aE , aD ) ; float fq = min ( min ( aO . x , aO . y ) , aO . z ) ; fq = clamp ( fq , 0.0 , 1.0 ) ; aQ = mix ( u_wireframe_edge_color , aQ , fq ) ; L = mix ( 1.0 , L , fq ) ;".split(" ")}]}},{$:"elif",ga:["DEBUG_WIREFRAME",2,{$:"equal_expr",
ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 aM = sign ( aD - vec3 ( 0.02 * aE ) ) ; float fq = 1.0 ; if ( aM . x < 0.0 || aM . y < 0.0 || aM . z < 0.0 ) fq = 0.0 ; aQ = mix ( u_wireframe_edge_color , aQ , fq ) ; L = mix ( 1.0 , L , fq ) ;".split(" ")}]}}]},{$:"txt",aa:"GLSL_OUT_FRAG_COLOR = vec4 ( aQ , L ) ; }".split(" ")}]};f["water.glslv"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"var",ba:"PRECISION",aa:["highp"]},{$:"var",ba:"USE_TBN_SHADING",aa:["0"]},{$:"var",ba:"DEBUG_WIREFRAME",aa:["0"]},
{$:"var",ba:"NUM_NORMALMAPS",aa:["0"]},{$:"var",ba:"FOAM",aa:["0"]},{$:"var",ba:"SHORE_PARAMS",aa:["0"]},{$:"var",ba:"MAX_SHORE_DIST",aa:["100.0"]},{$:"var",ba:"SHORE_MAP_SIZE_X",aa:["1.0"]},{$:"var",ba:"SHORE_MAP_SIZE_Y",aa:["1.0"]},{$:"var",ba:"SHORE_MAP_CENTER_X",aa:["0.0"]},{$:"var",ba:"SHORE_MAP_CENTER_Y",aa:["0.0"]},{$:"var",ba:"GENERATED_MESH",aa:["0"]},{$:"var",ba:"DST_NOISE_SCALE_0",aa:["0.05"]},{$:"var",ba:"DST_NOISE_SCALE_1",aa:["0.03"]},{$:"var",ba:"DST_NOISE_FREQ_0",aa:["1.3"]},{$:"var",
ba:"DST_NOISE_FREQ_1",aa:["1.0"]},{$:"var",ba:"DIR_MIN_SHR_FAC",aa:["0.4"]},{$:"var",ba:"DIR_FREQ",aa:["0.5"]},{$:"var",ba:"DIR_NOISE_SCALE",aa:["0.05"]},{$:"var",ba:"DIR_NOISE_FREQ",aa:["0.07"]},{$:"var",ba:"DIR_MIN_NOISE_FAC",aa:["0.5"]},{$:"var",ba:"DST_MIN_FAC",aa:["0.2"]},{$:"var",ba:"WAVES_HOR_FAC",aa:["5.0"]},{$:"var",ba:"DISABLE_FOG",aa:["0"]},{$:"var",ba:"WAVES_HEIGHT",aa:["1.0"]},{$:"var",ba:"WAVES_LENGTH",aa:["10.0"]},{$:"var",ba:"WATER_LEVEL",aa:["0.0"]},{$:"var",ba:"SHORE_SMOOTHING",
aa:["0"]},{$:"var",ba:"DYNAMIC",aa:["0"]},{$:"var",ba:"REFLECTION_TYPE",aa:["REFL_NONE"]},{$:"var",ba:"REFRACTIVE",aa:["0"]},{$:"var",ba:"STATIC_BATCH",aa:["0"]},{$:"var",ba:"WATER_EFFECTS",aa:["0"]},{$:"include",oa:"std.glsl"},{$:"include",oa:"math.glslv"},{$:"include",oa:"to_world.glslv"},{$:"include",oa:"procedural.glslf"},{$:"txt",aa:["GLSL_IN","vec3","a_position",";"]},{$:"cond",da:[{$:"if",ga:["GENERATED_MESH",{$:"logic_negative_expr",ia:1},"DYNAMIC",{$:"logic_negative_expr",ia:1},"NUM_NORMALMAPS",
0,{$:"g_expr",ia:2},{$:"logical_or_expr",ia:2},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec4","a_tbn",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["GENERATED_MESH",{$:"logic_negative_expr",ia:1},"NUM_NORMALMAPS",0,{$:"g_expr",ia:2},"FOAM",{$:"logical_or_expr",ia:2},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec2","a_texcoord",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["DEBUG_WIREFRAME"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","float","a_polyindex",";"]}]}}]},
{$:"txt",aa:"GLSL_OUT vec3 bY ; GLSL_OUT vec3 h ; GLSL_OUT vec3 j ;".split(" ")},{$:"cond",da:[{$:"if",ga:["NUM_NORMALMAPS",0,{$:"g_expr",ia:2},"FOAM",{$:"logical_or_expr",ia:2},"GENERATED_MESH",{$:"logic_negative_expr",ia:1},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec2","A",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["NUM_NORMALMAPS",0,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"GLSL_OUT vec3 k ; GLSL_OUT vec3 eJ ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["NUM_NORMALMAPS",
0,{$:"g_expr",ia:2},"FOAM",{$:"logical_or_expr",ia:2},"GENERATED_MESH","DYNAMIC",{$:"logical_and_expr",ia:3}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec3","eK",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SHORE_PARAMS"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec3","eL",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2},"REFRACTIVE",{$:"logical_or_expr",ia:3}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec3","l",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SHORE_SMOOTHING",
"REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2},"REFRACTIVE","DISABLE_FOG",{$:"logic_negative_expr",ia:1},{$:"logical_or_expr",ia:4}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","float","m",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["DEBUG_WIREFRAME"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec3","aD",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_TBN_SHADING"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec3","B",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["STATIC_BATCH"],ha:{$:"grp",da:[{$:"txt",aa:"const mat3 u_model_tsr = mat3 ( 0.0 , 0.0 , 0.0 , 1.0 , 1.0 , 1.0 , 0.0 , 0.0 , 0.0 ) ;".split(" ")}]}},
{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat3","u_model_tsr",";"]}]}}]},{$:"txt",aa:"uniform mat3 u_view_tsr ; uniform mat4 u_proj_matrix ; uniform vec3 u_camera_eye ;".split(" ")},{$:"cond",da:[{$:"if",ga:["DYNAMIC"],ha:{$:"grp",da:[{$:"txt",aa:"uniform PRECISION float u_time ; uniform vec3 u_wind ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2},"REFRACTIVE","DISABLE_FOG",{$:"logic_negative_expr",ia:1},{$:"logical_or_expr",
ia:4}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","PRECISION","float","u_view_max_depth",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SHORE_PARAMS"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","sampler2D","u_shore_dist_map",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SHORE_PARAMS"],ha:{$:"grp",da:[{$:"txt",aa:"vec3 fx ( in vec2 fr ) { vec2 fs = 0.5 + vec2 ( ( fr . x - SHORE_MAP_CENTER_X ) / SHORE_MAP_SIZE_X , ( fr . y - SHORE_MAP_CENTER_Y ) / SHORE_MAP_SIZE_Y ) ; vec4 ft = GLSL_TEXTURE ( u_shore_dist_map , fs ) ; const vec2 fu = vec2 ( 1.0 / 255.0 , 1.0 ) ; float fv = dot ( ft . ba , fu ) ; vec2 fw = normalize ( ft . rg * 2.0 - 1.0 ) ; return vec3 ( fw , fv ) ; }".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["DYNAMIC"],ha:{$:"grp",da:[{$:"define",ba:"SMALL_WAVES_FAC",aa:["0.2"]},{$:"txt",aa:"void fM ( inout vec3 fr , in float fy , in vec3 ft ) { float fA = fz ( DST_NOISE_SCALE_0 * ( fr . xy + DST_NOISE_FREQ_0 * fy ) ) * fz ( DST_NOISE_SCALE_1 * ( fr . yx - DST_NOISE_FREQ_1 * fy ) ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["SHORE_PARAMS"],ha:{$:"grp",da:[{$:"txt",aa:"float fB = WAVES_LENGTH / MAX_SHORE_DIST / M_PI ; float fv = ft . b ; float fC = sqrt ( fv ) ; float fD = max ( fv , DIR_MIN_SHR_FAC ) * sin ( fC / fB + DIR_FREQ * fy ) ; float fE = max ( fz ( DIR_NOISE_SCALE * ( fr . xy + DIR_NOISE_FREQ * fy ) ) , DIR_MIN_NOISE_FAC ) ; fD *= fE ; float fF = WAVES_HEIGHT * mix ( fD , fA , max ( fC , DST_MIN_FAC ) ) ; vec2 fw = ft . rg ; float fG = WAVES_HOR_FAC * fD * max ( MAX_SHORE_DIST / 35.0 * ( 0.05 - fv ) , 0.0 ) ; vec2 fH = fG * fw ;".split(" ")}]}},
{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"float fF = WAVES_HEIGHT * fA ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["GENERATED_MESH"],ha:{$:"grp",da:[{$:"txt",aa:"vec2 fI = 1.0 * ( fr . xy - 0.3 * fy ) ; vec2 fJ = 0.7 * ( fr . yx + 0.07 * fy ) ; float fL = fK ( fI ) . x + fK ( fJ ) . x - 1.0 ;".split(" ")},{$:"cond",da:[{$:"if",ga:["SHORE_PARAMS"],ha:{$:"grp",da:[{$:"txt",aa:"fr . xy += fH ; fL *= fv ;".split(" ")}]}}]},{$:"txt",aa:"fF += SMALL_WAVES_FAC * fL ;".split(" ")}]}}]},{$:"txt",aa:"fr . z += fF ; }".split(" ")}]}}]},
{$:"txt",aa:["void","main","(",")","{"]},{$:"cond",da:[{$:"if",ga:["DEBUG_WIREFRAME"],ha:{$:"grp",da:[{$:"txt",aa:"if ( a_polyindex == 0.0 ) aD = vec3 ( 1.0 , 0.0 , 0.0 ) ; else if ( a_polyindex == 1.0 ) aD = vec3 ( 0.0 , 0.0 , 1.0 ) ; else aD = vec3 ( 0.0 , 1.0 , 0.0 ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["GENERATED_MESH"],ha:{$:"grp",da:[{$:"txt",aa:"vec3 O = a_position ; float fN = abs ( O . z ) ; vec2 fO = u_camera_eye . xy - mod ( u_camera_eye . xy , fN ) ;".split(" ")},{$:"cond",da:[{$:"if",
ga:["WATER_EFFECTS"],ha:{$:"grp",da:[{$:"txt",aa:"O . z = WATER_LEVEL ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"O . z = 0.0 ;".split(" ")}]}}]},{$:"txt",aa:"O . xy += fO ; vec3 cb = O ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["NUM_NORMALMAPS",0,{$:"g_expr",ia:2},"FOAM",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["A","=","a_texcoord",";"]}]}}]},{$:"txt",aa:"au aw = av ( a_position , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , u_model_tsr ) ; vec3 cb = aw . O ;".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["SHORE_PARAMS"],ha:{$:"grp",da:[{$:"txt",aa:"eL = fx ( cb . xy ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["DYNAMIC"],ha:{$:"grp",da:[{$:"txt",aa:"float fP = length ( u_wind ) ; if ( fP == 0.0 ) fP = 1.0 ; float fQ = u_time ; fQ *= fP ;".split(" ")},{$:"cond",da:[{$:"if",ga:["GENERATED_MESH"],ha:{$:"grp",da:[{$:"txt",aa:"float fR = fN ; vec3 fS = cb + vec3 ( fR , 0.0 , 0.0 ) ; vec3 fT = cb + vec3 ( 0.0 , fR , 0.0 ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["NUM_NORMALMAPS",
0,{$:"g_expr",ia:2},"FOAM",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["eK","=","cb",";"]}]}}]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec3 fS = cb + vec3 ( 0.05 , 0.0 , 0.0 ) ; vec3 fT = cb + vec3 ( 0.0 , 0.05 , 0.0 ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["SHORE_PARAMS"],ha:{$:"grp",da:[{$:"txt",aa:"vec3 fU = fx ( fS . xy ) ; vec3 fV = fx ( fT . xy ) ; fM ( fS , fQ , fU ) ; fM ( fT , fQ , fV ) ; fM ( cb , fQ , eL ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"fM ( fS , fQ , vec3 ( 0.0 ) ) ; fM ( fT , fQ , vec3 ( 0.0 ) ) ; fM ( cb , fQ , vec3 ( 0.0 ) ) ;".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["GENERATED_MESH","WATER_EFFECTS",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"if ( a_position . z < 0.0 ) { cb . z = WATER_LEVEL - 1.0 ; fS . z = cb . z ; fT . z = cb . z ; }".split(" ")}]}}]},{$:"txt",aa:"vec3 ej = normalize ( fS - cb ) ; vec3 V = normalize ( fT - cb ) ; j = normalize ( cross ( ej , V ) ) ; float fW = dot ( j , UP_VECTOR ) ; float aL = clamp ( 0.8 - fW , 0.0 , 1.0 ) ; j = mix ( j , UP_VECTOR , aL ) ;".split(" ")}]}},{$:"elif",ga:["GENERATED_MESH",
{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:"vec4 S = R ( a_tbn ) ; j = T ( S , vec3 ( 0.0 , 1.0 , 0.0 ) ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"j = vec3 ( 0.0 , 0.0 , 1.0 ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["NUM_NORMALMAPS",0,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["DYNAMIC",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["GENERATED_MESH",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 V = T ( S , vec3 ( 1.0 , 0.0 , 0.0 ) ) ;".split(" ")}]}},
{$:"elif",ga:["DYNAMIC",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 V = vec3 ( 1.0 , 0.0 , 0.0 ) ;".split(" ")}]}}]}]}}]},{$:"txt",aa:"k = V ; eJ = cross ( j , k ) ;".split(" ")}]}}]},{$:"txt",aa:"h = cb ; bY = u_camera_eye - cb ; vec4 cc = vec4 ( ap ( u_view_tsr , cb ) , 1.0 ) ; vec4 f = u_proj_matrix * cc ;".split(" ")},{$:"cond",da:[{$:"if",ga:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2},"REFRACTIVE",{$:"logical_or_expr",ia:3}],ha:{$:"grp",da:[{$:"txt",
aa:"float fX = f . x ; float fY = f . y ; float fZ = f . w ; l . x = ( fX + fZ ) / 2.0 ; l . y = ( fY + fZ ) / 2.0 ; l . z = fZ ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2},"REFRACTIVE","DISABLE_FOG",{$:"logic_negative_expr",ia:1},{$:"logical_or_expr",ia:4}],ha:{$:"grp",da:[{$:"txt",aa:"m = - cc . z / u_view_max_depth ;".split(" ")}]}}]},{$:"txt",aa:["gl_Position","=","f",";","}"]}]};f["postprocessing/antialiasing.glslf"]={$:"grp",
da:[{$:"version",aa:["GLSL_VERSION"]},{$:"var",ba:"AA_METHOD",aa:["AA_METHOD_FXAA_LIGHT"]},{$:"var",ba:"AA_QUALITY",aa:["AA_QUALITY_LOW"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"include",oa:"color_util.glslf"},{$:"txt",aa:"uniform sampler2D u_color ; uniform vec2 u_texel_size ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ;".split(" ")},{$:"cond",da:[{$:"if",ga:["AA_METHOD","AA_METHOD_FXAA_LIGHT",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"define",ba:"FXAA_REDUCE_MIN",
aa:["(","1.0","/","128.0",")"]},{$:"define",ba:"FXAA_REDUCE_MUL",aa:["(","1.0","/","8.0",")"]},{$:"define",ba:"FXAA_SPAN_MAX",aa:["8.0"]},{$:"txt",aa:"vec4 gc ( float x , float y ) { vec2 f_ = A + vec2 ( x , y ) * u_texel_size ; return GLSL_TEXTURE ( u_color , f_ ) ; } vec4 gx ( ) { vec4 gd = gc ( - 1.0 , - 1.0 ) ; vec4 ge = gc ( 1.0 , - 1.0 ) ; vec4 gf = gc ( - 1.0 , 1.0 ) ; vec4 gh = gc ( 1.0 , 1.0 ) ; vec4 gi = gc ( 0.0 , 0.0 ) ; float gk = gj ( gi ) ; float gl = gj ( gd ) ; float gm = gj ( ge ) ; float gn = gj ( gf ) ; float go = gj ( gh ) ; float gp = min ( gk , min ( min ( gl , gm ) , min ( gn , go ) ) ) ; float gq = max ( gk , max ( max ( gl , gm ) , max ( gn , go ) ) ) ; vec2 bH ; bH . x = - ( ( gl + gm ) - ( gn + go ) ) ; bH . y = ( ( gl + gn ) - ( gm + go ) ) ; float gs = max ( ( gl + gm + gn + go ) * ( 0.25 * FXAA_REDUCE_MUL ) , FXAA_REDUCE_MIN ) ; float gt = 1.0 / ( min ( abs ( bH . x ) , abs ( bH . y ) ) + gs ) ; bH = min ( vec2 ( FXAA_SPAN_MAX , FXAA_SPAN_MAX ) , max ( vec2 ( - FXAA_SPAN_MAX , - FXAA_SPAN_MAX ) , bH * gt ) ) * u_texel_size ; vec4 gu = 0.5 * ( GLSL_TEXTURE ( u_color , A + bH * ( 1.0 / 3.0 - 0.5 ) ) + GLSL_TEXTURE ( u_color , A + bH * ( 2.0 / 3.0 - 0.5 ) ) ) ; vec4 gv = gu * 0.5 + 0.25 * ( GLSL_TEXTURE ( u_color , A + bH * - 0.5 ) + GLSL_TEXTURE ( u_color , A + bH * 0.5 ) ) ; float gw = gj ( gv ) ; if ( ( gw < gp ) || ( gw > gq ) ) return gu ; else return gv ; }".split(" ")}]}},
{$:"elif",ga:["AA_METHOD","AA_METHOD_FXAA_QUALITY",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"define",ba:"FXAA_GREEN_AS_LUMA",aa:["1"]},{$:"include",oa:"fxaa.glslf"},{$:"cond",da:[{$:"if",ga:["AA_QUALITY","AA_QUALITY_HIGH",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"define",ba:"FXAA_QUALITY_PRESET",aa:["39"]},{$:"define",ba:"FXAA_QUALITY_SUBPIX",aa:["1.00"]},{$:"define",ba:"FXAA_QUALITY_EDGE_THRESHOLD",aa:["0.063"]},{$:"define",ba:"FXAA_QUALITY_EDGE_THRESHOLD_MIN",aa:["0.0312"]}]}},{$:"elif",ga:["AA_QUALITY",
"AA_QUALITY_MEDIUM",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"define",ba:"FXAA_QUALITY_PRESET",aa:["20"]},{$:"define",ba:"FXAA_QUALITY_SUBPIX",aa:["0.65"]},{$:"define",ba:"FXAA_QUALITY_EDGE_THRESHOLD",aa:["0.166"]},{$:"define",ba:"FXAA_QUALITY_EDGE_THRESHOLD_MIN",aa:["0.0625"]}]}},{$:"elif",ga:["AA_QUALITY","AA_QUALITY_LOW",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"define",ba:"FXAA_QUALITY_PRESET",aa:["12"]},{$:"define",ba:"FXAA_QUALITY_SUBPIX",aa:["0.50"]},{$:"define",ba:"FXAA_QUALITY_EDGE_THRESHOLD",
aa:["0.166"]},{$:"define",ba:"FXAA_QUALITY_EDGE_THRESHOLD_MIN",aa:["0.0833"]}]}}]}]}}]},{$:"txt",aa:["void","main","(",")","{"]},{$:"cond",da:[{$:"if",ga:["AA_METHOD","AA_METHOD_FXAA_LIGHT",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"GLSL_OUT_FRAG_COLOR = gx ( ) ;".split(" ")}]}},{$:"elif",ga:["AA_METHOD","AA_METHOD_FXAA_QUALITY",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec2 gy = u_texel_size ; GLSL_OUT_FRAG_COLOR = gz ( A , u_color , gy , FXAA_QUALITY_SUBPIX , FXAA_QUALITY_EDGE_THRESHOLD , FXAA_QUALITY_EDGE_THRESHOLD_MIN ) ;".split(" ")}]}}]},
{$:"txt",aa:["}"]}]};f["postprocessing/bloom_combine.glslf"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"var",ba:"BLUR_PASS_NUM",aa:["BLUR_PASS_5"]},{$:"txt",aa:["uniform","sampler2D","u_main",";"]},{$:"cond",da:[{$:"if",ga:["BLUR_PASS_NUM","BLUR_PASS_1",{$:"ge_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","sampler2D","u_bloom_level_0",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["BLUR_PASS_NUM","BLUR_PASS_2",{$:"ge_expr",
ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","sampler2D","u_bloom_level_1",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["BLUR_PASS_NUM","BLUR_PASS_3",{$:"ge_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","sampler2D","u_bloom_level_2",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["BLUR_PASS_NUM","BLUR_PASS_4",{$:"ge_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","sampler2D","u_bloom_level_3",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["BLUR_PASS_NUM","BLUR_PASS_5",{$:"ge_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform",
"sampler2D","u_bloom_level_4",";"]}]}}]},{$:"txt",aa:"GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec4 gA = GLSL_TEXTURE ( u_main , A ) ; vec4 gB = vec4 ( 0.0 ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["BLUR_PASS_NUM","BLUR_PASS_1",{$:"ge_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"gB += GLSL_TEXTURE ( u_bloom_level_0 , A ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["BLUR_PASS_NUM","BLUR_PASS_2",{$:"ge_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"gB += GLSL_TEXTURE ( u_bloom_level_1 , A ) ;".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["BLUR_PASS_NUM","BLUR_PASS_3",{$:"ge_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"gB += GLSL_TEXTURE ( u_bloom_level_2 , A ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["BLUR_PASS_NUM","BLUR_PASS_4",{$:"ge_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"gB += GLSL_TEXTURE ( u_bloom_level_3 , A ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["BLUR_PASS_NUM","BLUR_PASS_5",{$:"ge_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"gB += GLSL_TEXTURE ( u_bloom_level_4 , A ) ;".split(" ")}]}}]},
{$:"txt",aa:"GLSL_OUT_FRAG_COLOR = gA + gB ; }".split(" ")}]};f["postprocessing/coc.glslf"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"var",ba:"PRECISION",aa:["highp"]},{$:"var",ba:"COC_TYPE",aa:["COC_ALL"]},{$:"txt",aa:["precision","PRECISION","sampler2D",";"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"include",oa:"depth_fetch.glslf"},{$:"txt",aa:"uniform sampler2D u_color ; uniform sampler2D u_depth ;".split(" ")},{$:"cond",da:[{$:"if",ga:["COC_TYPE","COC_COMBINE",
{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","sampler2D","u_coc_fg",";"]}]}}]},{$:"txt",aa:"uniform float u_view_max_depth ; uniform float u_dof_dist ; uniform float u_dof_front_start ; uniform float u_dof_front_end ; uniform float u_dof_rear_start ; uniform float u_dof_rear_end ; uniform vec2 u_camera_range ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec4 aQ = GLSL_TEXTURE ( u_color , A ) ; if ( u_dof_dist > 0.0 ) { float et = gC ( u_depth , A , u_camera_range ) ; et *= u_view_max_depth ; float gD = 0.0 ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["COC_TYPE","COC_COMBINE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec4 gE = GLSL_TEXTURE ( u_coc_fg , A ) ; float gF = gE . a ;".split(" ")}]}}]},{$:"txt",aa:"if ( et < u_dof_dist ) gD = ( u_dof_dist - et - u_dof_front_start ) / ( u_dof_front_end - u_dof_front_start ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["COC_TYPE","COC_FOREGROUND",{$:"non_equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"else gD = ( et - u_dof_dist - u_dof_rear_start ) / ( u_dof_rear_end - u_dof_rear_start ) ;".split(" ")}]}}]},
{$:"txt",aa:"gD = clamp ( gD , 0.0 , 1.0 ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["COC_TYPE","COC_COMBINE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"gD = max ( gD , gF ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["COC_TYPE","COC_FOREGROUND",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"GLSL_OUT_FRAG_COLOR = vec4 ( gD ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"GLSL_OUT_FRAG_COLOR = vec4 ( aQ . xyz * gD , gD ) ;".split(" ")}]}}]},{$:"txt",aa:"} else GLSL_OUT_FRAG_COLOR = vec4 ( aQ . xyz , 0.0 ) ; }".split(" ")}]};
f["postprocessing/compositing.glslf"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"include",oa:"color_util.glslf"},{$:"txt",aa:"uniform sampler2D u_color ; uniform float u_brightness ; uniform float u_contrast ; uniform float u_exposure ; uniform float u_saturation ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec4 gG = GLSL_TEXTURE ( u_color , A ) ; vec3 aQ = gG . rgb ; if ( u_brightness < 0.0 ) aQ = aQ * ( 1.0 + u_brightness ) ; else aQ = aQ + ( ( 1.0 - aQ ) * u_brightness ) ; aQ = ( aQ - 0.5 ) * ( tan ( ( u_contrast + 1.0 ) * M_PI_4 ) ) + 0.5 ; aQ *= u_exposure ; float dv = gj ( vec4 ( aQ , 0.0 ) ) ; aQ = mix ( vec3 ( dv ) , aQ , u_saturation ) ; GLSL_OUT_FRAG_COLOR = vec4 ( aQ , gG . a ) ; }".split(" ")}]};
f["postprocessing/depth_pack.glslf"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"var",ba:"PRECISION",aa:["highp"]},{$:"txt",aa:["precision","PRECISION","sampler2D",";"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"include",oa:"pack.glslf"},{$:"include",oa:"depth_fetch.glslf"},{$:"txt",aa:"uniform sampler2D u_depth ; uniform vec2 u_camera_range ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { GLSL_OUT_FRAG_COLOR = eu ( clamp ( gC ( u_depth , A , u_camera_range ) , 0.0 , 0.999999 ) ) ; }".split(" ")}]};
f["postprocessing/dof.glslf"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"var",ba:"PRECISION",aa:["highp"]},{$:"var",ba:"DOF_TYPE",aa:["DOF_SIMPLE"]},{$:"txt",aa:["precision","PRECISION","sampler2D",";"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"cond",da:[{$:"if",ga:["DOF_TYPE","DOF_BOKEH",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"uniform highp sampler2D u_sharp ; uniform highp sampler2D u_blurred1 ; uniform highp sampler2D u_blurred2 ; uniform float u_dof_dist ;".split(" ")}]}},
{$:"else",ha:{$:"grp",da:[{$:"include",oa:"depth_fetch.glslf"},{$:"txt",aa:"uniform sampler2D u_sharp ; uniform sampler2D u_blurred ; uniform sampler2D u_depth ; uniform float u_view_max_depth ; uniform float u_dof_dist ; uniform float u_dof_front_end ; uniform float u_dof_rear_end ; uniform vec2 u_camera_range ;".split(" ")}]}}]},{$:"txt",aa:"GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec4 gH = GLSL_TEXTURE ( u_sharp , A ) ; if ( u_dof_dist > 0.0 ) {".split(" ")},{$:"cond",
da:[{$:"if",ga:["DOF_TYPE","DOF_BOKEH",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"float gD ; vec4 gI = GLSL_TEXTURE ( u_blurred1 , A ) ; vec4 gJ = GLSL_TEXTURE ( u_blurred2 , A ) ; vec4 gK = min ( gI . rgba , gJ . rgba ) ; gD = gK . a ; if ( gD > 0.0 ) { gK = vec4 ( gK . rgb / gD , gH . a ) ; GLSL_OUT_FRAG_COLOR = mix ( gH , gK , min ( gD * 5.0 , 1.0 ) ) ; } else GLSL_OUT_FRAG_COLOR = gH ;".split(" ")}]}},{$:"elif",ga:["DOF_TYPE","DOF_SIMPLE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",
aa:"float et = gC ( u_depth , A , u_camera_range ) ; et *= u_view_max_depth ; float gL ; if ( et < u_dof_dist ) gL = ( u_dof_dist - et ) / u_dof_front_end ; else gL = ( et - u_dof_dist ) / u_dof_rear_end ; gL = clamp ( gL , 0.0 , 1.0 ) ; vec4 gM = GLSL_TEXTURE ( u_blurred , A ) ; GLSL_OUT_FRAG_COLOR = mix ( gH , gM , gL ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT_FRAG_COLOR","=","gH",";"]}]}}]},{$:"txt",aa:"} else GLSL_OUT_FRAG_COLOR = gH ; }".split(" ")}]};f["postprocessing/glow.glslf"]=
{$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"txt",aa:"uniform sampler2D u_src_color ; uniform sampler2D u_glow_mask_small ; uniform sampler2D u_glow_mask_large ; uniform float u_glow_mask_small_coeff ; uniform float u_glow_mask_large_coeff ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec4 gN = GLSL_TEXTURE ( u_src_color , A ) ; vec4 gO = GLSL_TEXTURE ( u_glow_mask_small , A ) ; vec4 gP = GLSL_TEXTURE ( u_glow_mask_large , A ) ; GLSL_OUT_FRAG_COLOR = gN ; if ( gP . a != 0.0 ) { float gQ = u_glow_mask_large_coeff * gP . a ; gQ = clamp ( gQ , 0.0 , 1.0 ) ; GLSL_OUT_FRAG_COLOR . rgb = mix ( GLSL_OUT_FRAG_COLOR . rgb , gP . rgb / gP . a , gQ ) ; GLSL_OUT_FRAG_COLOR . a = mix ( GLSL_OUT_FRAG_COLOR . a , 1.0 , gQ ) ; } if ( gO . a != 0.0 ) { float gR = u_glow_mask_small_coeff * gO . a ; gR = clamp ( gR , 0.0 , 1.0 ) ; GLSL_OUT_FRAG_COLOR . rgb = mix ( GLSL_OUT_FRAG_COLOR . rgb , gO . rgb / gO . a , gR ) ; GLSL_OUT_FRAG_COLOR . a = mix ( GLSL_OUT_FRAG_COLOR . a , 1.0 , gR ) ; } }".split(" ")}]};
f["postprocessing/god_rays.glslf"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"var",ba:"PRECISION",aa:["highp"]},{$:"var",ba:"DEPTH_RGBA",aa:["0"]},{$:"var",ba:"WATER_EFFECTS",aa:["0"]},{$:"var",ba:"STEPS_PER_PASS",aa:["10.0"]},{$:"txt",aa:["precision","PRECISION","sampler2D",";"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"include",oa:"depth_fetch.glslf"},{$:"include",oa:"procedural.glslf"},{$:"include",oa:"pack.glslf"},{$:"txt",aa:"uniform float u_time ; uniform float u_radial_blur_step ; uniform sampler2D u_input ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["DEPTH_RGBA"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec2","u_camera_range",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["DEPTH_RGBA","WATER_EFFECTS",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"GLSL_IN float gS ; GLSL_IN vec2 gT ;".split(" ")}]}}]},{$:"txt",aa:"GLSL_IN vec2 A ; GLSL_IN vec4 gU ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec2 cX = ( gU . xy - A ) ; float aM = length ( cX ) ; vec2 gV = u_radial_blur_step * cX / aM ; float gW = aM / u_radial_blur_step ; gV *= min ( gW , STEPS_PER_PASS ) / STEPS_PER_PASS ; gW = max ( gW , STEPS_PER_PASS ) ; vec2 gX = A ; float gY = 0.0 ; const int gZ = int ( STEPS_PER_PASS ) ; int g_ = int ( gW + 0.5 ) ; for ( int cq = 0 ; cq < gZ ; cq += 1 ) { if ( cq <= g_ ) {".split(" ")},
{$:"cond",da:[{$:"if",ga:["DEPTH_RGBA"],ha:{$:"grp",da:[{$:"txt",aa:"float et = gC ( u_input , gX , u_camera_range ) ; gY += max ( ( 1.0 - pow ( aM , 0.3 ) ) * step ( 0.9 , et ) , 0.0 ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec4 ha = GLSL_TEXTURE ( u_input , gX ) ; gY += cV ( ha ) ;".split(" ")}]}}]},{$:"txt",aa:"} gX += gV ; }".split(" ")},{$:"cond",da:[{$:"if",ga:["DEPTH_RGBA","WATER_EFFECTS",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec2 ce = A + gT ; float hb = fK ( vec2 ( 2.5 * ( ce . x ) , 2.5 * ( ce . y ) + 1.0 * u_time ) ) . x + 0.75 * fK ( vec2 ( 5.0 * ( ce . x ) - 0.66 * u_time , 5.0 * ( ce . y ) + 0.66 * u_time ) ) . x + 0.5 * fz ( vec2 ( 7.5 * ( ce . x ) + 0.33 * u_time , 7.5 * ( ce . y ) - 0.33 * u_time ) ) ; hb *= clamp ( 1.2 - sqrt ( 0.2 * aM ) , 0.0 , 1.0 ) * gS ; gY = max ( hb , gY ) ;".split(" ")}]}}]},
{$:"txt",aa:"GLSL_OUT_FRAG_COLOR = eu ( gY / STEPS_PER_PASS ) ; }".split(" ")}]};f["postprocessing/god_rays.glslv"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"var",ba:"DEPTH_RGBA",aa:["0"]},{$:"var",ba:"WATER_EFFECTS",aa:["0"]},{$:"include",oa:"std.glsl"},{$:"include",oa:"math.glslv"},{$:"txt",aa:"uniform mat4 u_view_proj_matrix ; uniform vec3 u_sun_direction ;".split(" ")},{$:"cond",da:[{$:"if",ga:["DEPTH_RGBA","WATER_EFFECTS",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec4 u_camera_quat ; uniform float u_cam_water_depth ;".split(" ")}]}}]},
{$:"txt",aa:["GLSL_IN","vec2","a_bb_vertex",";"]},{$:"cond",da:[{$:"if",ga:["DEPTH_RGBA","WATER_EFFECTS",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"GLSL_OUT float gS ; GLSL_OUT vec2 gT ;".split(" ")}]}}]},{$:"txt",aa:"GLSL_OUT vec2 A ; GLSL_OUT vec4 gU ; void main ( ) { A = a_bb_vertex ; vec3 bH = normalize ( u_sun_direction ) ; gU = u_view_proj_matrix * vec4 ( bH , 0.0 ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["DEPTH_RGBA","WATER_EFFECTS",{$:"logical_and_expr",ia:2}],ha:{$:"grp",
da:[{$:"txt",aa:"if ( u_cam_water_depth < 0.0 ) { gS = 1.0 ; vec3 hc = vec3 ( 0.0 , 1.0 , 0.0 ) ; vec3 hd = T ( u_camera_quat , hc ) ; hd = normalize ( hd ) ; float he = dot ( hd , vec3 ( 0.0 , 1.0 , 0.0 ) ) ; float hf = atan ( hd . x , hd . z ) ; gT = vec2 ( - hf , acos ( he ) ) ; } else { gS = 0.0 ; }".split(" ")}]}}]},{$:"txt",aa:"gU . xy = 0.5 * ( gU . xy / gU . w + 1.0 ) ; gU += 99999.0 * step ( gU . z , 0.0 ) ; gl_Position = vec4 ( 2.0 * a_bb_vertex . xy - 1.0 , 0.0 , 1.0 ) ; }".split(" ")}]};
f["postprocessing/god_rays_combine.glslf"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"var",ba:"SAFARI_CANVAS_ALPHA_HACK",aa:["0"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"include",oa:"color_util.glslf"},{$:"include",oa:"pack.glslf"},{$:"txt",aa:"uniform sampler2D u_main ; uniform sampler2D u_god_rays ; uniform float u_god_rays_intensity ; uniform vec3 u_sun_intensity ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec4 hg = GLSL_TEXTURE ( u_main , A ) ; vec3 hh = clamp ( u_sun_intensity , 0.4 , 0.8 ) ; bG ( hg . rgb ) ; float hi = cV ( GLSL_TEXTURE ( u_god_rays , A ) ) ; vec3 hj = hg . rgb + u_god_rays_intensity * vec3 ( hi ) * hh ; aW ( hj ) ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["SAFARI_CANVAS_ALPHA_HACK"],ha:{$:"grp",da:[{$:"txt",aa:"GLSL_OUT_FRAG_COLOR = vec4 ( hj , max ( 0.01 , hg . a ) ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"GLSL_OUT_FRAG_COLOR = vec4 ( hj , hg . a ) ;".split(" ")}]}}]},{$:"txt",aa:["}"]}]};f["postprocessing/luminance.glslf"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"txt",aa:"uniform sampler2D u_input ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec4 gA = GLSL_TEXTURE ( u_input , A ) ; float hk = dot ( gA . rgb , vec3 ( 0.2126 , 0.7152 , 0.0722 ) ) ; GLSL_OUT_FRAG_COLOR = vec4 ( vec3 ( hk ) , 1.0 ) ; }".split(" ")}]};
f["postprocessing/luminance_av.glslf"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"txt",aa:"uniform sampler2D u_input ; uniform float u_mipmap_1x1 ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { float hl = max ( GLSL_TEXTURE ( u_input , A , u_mipmap_1x1 ) . r , 0.01 ) ; GLSL_OUT_FRAG_COLOR = vec4 ( vec3 ( hl ) , 1.0 ) ; }".split(" ")}]};f["postprocessing/luminance_truncated.glslf"]={$:"grp",da:[{$:"version",
aa:["GLSL_VERSION"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"var",ba:"ADAPTIVE_BLOOM",aa:["0"]},{$:"txt",aa:"uniform sampler2D u_main ; uniform sampler2D u_luminance ; uniform sampler2D u_average_lum ; uniform float u_bloom_edge_lum ; uniform float u_bloom_key ;".split(" ")},{$:"cond",da:[{$:"if",ga:["ADAPTIVE_BLOOM",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","float","u_average_lum_val",";"]}]}}]},{$:"txt",aa:"GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) {".split(" ")},
{$:"cond",da:[{$:"if",ga:["ADAPTIVE_BLOOM"],ha:{$:"grp",da:[{$:"txt",aa:"float hl = GLSL_TEXTURE ( u_average_lum , vec2 ( 0.5 ) ) . r ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["float","hl","=","u_average_lum_val",";"]}]}}]},{$:"txt",aa:"float hm = GLSL_TEXTURE ( u_luminance , A ) . r ; vec4 aQ = GLSL_TEXTURE ( u_main , A ) ; float hn = hm / hl ; float ho = u_bloom_edge_lum ; GLSL_OUT_FRAG_COLOR = aQ * u_bloom_key * smoothstep ( ho , ho + 1.2 , hn ) ; }".split(" ")}]};f["postprocessing/motion_blur.glslf"]=
{$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"txt",aa:"uniform sampler2D u_mb_tex_curr ; uniform sampler2D u_mb_tex_accum ; uniform float u_motion_blur_exp ; uniform float u_motion_blur_decay_threshold ; float hp = 0.0042 ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec4 hq = GLSL_TEXTURE ( u_mb_tex_curr , A ) ; vec4 hr = GLSL_TEXTURE ( u_mb_tex_accum , A ) ; if ( length ( hq - hr ) > u_motion_blur_decay_threshold ) { vec4 hs = ( 1.0 - u_motion_blur_exp ) * hq + u_motion_blur_exp * hr ; vec4 ht = hs - hr ; vec4 hu = hq - hr ; vec4 cX = min ( max ( abs ( ht ) , vec4 ( hp ) ) , abs ( hu ) ) * sign ( ht ) ; GLSL_OUT_FRAG_COLOR = hr + cX ; } else { GLSL_OUT_FRAG_COLOR = hq ; } }".split(" ")}]};
f["postprocessing/outline.glslf"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"include",oa:"color_util.glslf"},{$:"txt",aa:"uniform sampler2D u_outline_src ; uniform sampler2D u_outline_mask ; uniform sampler2D u_outline_mask_blurred ; uniform vec3 u_outline_color ; uniform float u_draw_outline ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec4 hv = GLSL_TEXTURE ( u_outline_src , A ) ; GLSL_OUT_FRAG_COLOR = hv ; if ( u_draw_outline != 0.0 ) { vec4 hw = GLSL_TEXTURE ( u_outline_mask , A ) ; vec4 hx = GLSL_TEXTURE ( u_outline_mask_blurred , A ) ; float hy = hx . a - hw . a ; if ( hy != 0.0 ) { float hz = smoothstep ( 0.0 , 1.0 , hx . a ) ; if ( hw . a == 0.0 ) { vec3 hA = u_outline_color ; aW ( hA ) ; vec4 hB = vec4 ( clamp ( hA , 0.0 , 1.0 ) , 1.0 ) ; GLSL_OUT_FRAG_COLOR = mix ( hv , hB , hz ) ; } } } }".split(" ")}]};
f["postprocessing/performance.glslf"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"txt",aa:"uniform sampler2D u_color ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec4 aQ = vec4 ( 0.0 ) ; for ( int cq = 0 ; cq < 10 ; cq ++ ) { vec2 hC = vec2 ( fract ( A * vec2 ( cq ) * vec2 ( 1.431 , 3.921 ) ) ) ; aQ += 0.01 * GLSL_TEXTURE ( u_color , hC ) ; } GLSL_OUT_FRAG_COLOR = aQ ; }".split(" ")}]};f["postprocessing/postprocessing.glslf"]=
{$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"var",ba:"POST_EFFECT",aa:["POST_EFFECT_NONE"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"txt",aa:"uniform vec2 u_texel_size ; uniform sampler2D u_color ;".split(" ")},{$:"cond",da:[{$:"if",ga:["POST_EFFECT","FLIP_CUBEMAP_COORDS",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"uniform int u_tex_number ; uniform vec2 u_delta ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["POST_EFFECT","POST_EFFECT_DOF_BLUR",{$:"equal_expr",
ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","float","u_dof_bokeh_intensity",";"]}]}}]},{$:"txt",aa:"GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) {".split(" ")},{$:"cond",da:[{$:"if",ga:["POST_EFFECT","POST_EFFECT_NONE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"GLSL_OUT_FRAG_COLOR = GLSL_TEXTURE ( u_color , A ) ;".split(" ")}]}},{$:"elif",ga:["POST_EFFECT","POST_EFFECT_GRAYSCALE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec4 dx = GLSL_TEXTURE ( u_color , A ) ; GLSL_OUT_FRAG_COLOR . rgb = vec3 ( ( dx . r + dx . g + dx . b ) / 3.0 ) ; GLSL_OUT_FRAG_COLOR . a = 1.0 ;".split(" ")}]}},
{$:"elif",ga:["POST_EFFECT","POST_EFFECT_BLUR",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec2 fM = vec2 ( 0.0 , 0.0 ) ; vec2 cX = u_texel_size ; vec4 aQ ; aQ = GLSL_TEXTURE ( u_color , A ) ; GLSL_OUT_FRAG_COLOR = aQ * 0.2270270270 ; fM += cX ; aQ = GLSL_TEXTURE ( u_color , A + fM ) ; GLSL_OUT_FRAG_COLOR += aQ * 0.1945945946 ; aQ = GLSL_TEXTURE ( u_color , A - fM ) ; GLSL_OUT_FRAG_COLOR += aQ * 0.1945945946 ; fM += cX ; aQ = GLSL_TEXTURE ( u_color , A + fM ) ; GLSL_OUT_FRAG_COLOR += aQ * 0.1216216216 ; aQ = GLSL_TEXTURE ( u_color , A - fM ) ; GLSL_OUT_FRAG_COLOR += aQ * 0.1216216216 ; fM += cX ; aQ = GLSL_TEXTURE ( u_color , A + fM ) ; GLSL_OUT_FRAG_COLOR += aQ * 0.0540540541 ; aQ = GLSL_TEXTURE ( u_color , A - fM ) ; GLSL_OUT_FRAG_COLOR += aQ * 0.0540540541 ; fM += cX ; aQ = GLSL_TEXTURE ( u_color , A + fM ) ; GLSL_OUT_FRAG_COLOR += aQ * 0.0162162162 ; aQ = GLSL_TEXTURE ( u_color , A - fM ) ; GLSL_OUT_FRAG_COLOR += aQ * 0.0162162162 ;".split(" ")}]}},
{$:"elif",ga:["POST_EFFECT","POST_EFFECT_GLOW_BLUR",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec2 fM = vec2 ( 0.0 , 0.0 ) ; vec2 cX = u_texel_size ; vec4 aQ ; aQ = GLSL_TEXTURE ( u_color , A ) ; GLSL_OUT_FRAG_COLOR = aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.152507 ; fM += cX ; aQ = GLSL_TEXTURE ( u_color , A + fM ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.141763 ; aQ = GLSL_TEXTURE ( u_color , A - fM ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.141763 ; fM += cX ; aQ = GLSL_TEXTURE ( u_color , A + fM ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.113861 ; aQ = GLSL_TEXTURE ( u_color , A - fM ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.113861 ; fM += cX ; aQ = GLSL_TEXTURE ( u_color , A + fM ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.079019 ; aQ = GLSL_TEXTURE ( u_color , A - fM ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.079019 ; fM += cX ; aQ = GLSL_TEXTURE ( u_color , A + fM ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.047383 ; aQ = GLSL_TEXTURE ( u_color , A - fM ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.047383 ; fM += cX ; aQ = GLSL_TEXTURE ( u_color , A + fM ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.024549 ; aQ = GLSL_TEXTURE ( u_color , A - fM ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.024549 ; fM += cX ; aQ = GLSL_TEXTURE ( u_color , A + fM ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.01099 ; aQ = GLSL_TEXTURE ( u_color , A - fM ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.01099 ; fM += cX ; aQ = GLSL_TEXTURE ( u_color , A + fM ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.00425 ; aQ = GLSL_TEXTURE ( u_color , A - fM ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.00425 ; fM += cX ; aQ = GLSL_TEXTURE ( u_color , A + fM ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.00142 ; aQ = GLSL_TEXTURE ( u_color , A - fM ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.00142 ; GLSL_OUT_FRAG_COLOR = clamp ( GLSL_OUT_FRAG_COLOR , 0.0 , 1.0 ) ;".split(" ")}]}},
{$:"elif",ga:["POST_EFFECT","POST_EFFECT_DOF_BLUR",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec2 fM = vec2 ( 0.0 , 0.0 ) ; vec2 cX = u_texel_size ; vec4 aQ ; vec4 hD ; vec4 hE ; float gD ; float hF = u_dof_bokeh_intensity ; aQ = GLSL_TEXTURE ( u_color , A ) ; hD = aQ ; hE = aQ ; gD = aQ . a ; cX = gD * cX ; for ( int cq = 0 ; cq < 12 ; cq += 2 ) { fM += cX ; aQ = GLSL_TEXTURE ( u_color , A + fM ) ; hD += aQ ; hE = max ( hE , aQ ) ; aQ = GLSL_TEXTURE ( u_color , A - fM ) ; hD += aQ ; hE = max ( hE , aQ ) ; } hD /= 13.0 ; GLSL_OUT_FRAG_COLOR = mix ( hD , hE , hF ) ;".split(" ")}]}},
{$:"elif",ga:["POST_EFFECT","POST_EFFECT_ALPHA_BLUR",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec2 fM = vec2 ( 0.0 , 0.0 ) ; vec2 cX = u_texel_size ; vec4 aQ ; vec4 hD ; vec4 hE ; aQ = GLSL_TEXTURE ( u_color , A ) ; hE = max ( hE , aQ ) ; hD = aQ ; hD . a = aQ . a * 0.2270270270 ; fM += cX ; aQ = GLSL_TEXTURE ( u_color , A + fM ) ; hE . a = max ( hE . a , aQ . a ) ; hD . a += aQ . a * 0.1945945946 ; aQ = GLSL_TEXTURE ( u_color , A - fM ) ; hE . a = max ( hE . a , aQ . a ) ; hD . a += aQ . a * 0.1945945946 ; fM += cX ; aQ = GLSL_TEXTURE ( u_color , A + fM ) ; hE . a = max ( hE . a , aQ . a ) ; hD . a += aQ . a * 0.1216216216 ; aQ = GLSL_TEXTURE ( u_color , A - fM ) ; hE . a = max ( hE . a , aQ . a ) ; hD . a += aQ . a * 0.1216216216 ; fM += cX ; aQ = GLSL_TEXTURE ( u_color , A + fM ) ; hE . a = max ( hE . a , aQ . a ) ; hD . a += aQ . a * 0.0540540541 ; aQ = GLSL_TEXTURE ( u_color , A - fM ) ; hE . a = max ( hE . a , aQ . a ) ; hD . a += aQ . a * 0.0540540541 ; fM += cX ; aQ = GLSL_TEXTURE ( u_color , A + fM ) ; hE . a = max ( hE . a , aQ . a ) ; hD . a += aQ . a * 0.0162162162 ; aQ = GLSL_TEXTURE ( u_color , A - fM ) ; hE . a = max ( hE . a , aQ . a ) ; hD . a += aQ . a * 0.0162162162 ; GLSL_OUT_FRAG_COLOR = mix ( hD , hE , 0.5 ) ;".split(" ")}]}},
{$:"elif",ga:["POST_EFFECT","POST_EFFECT_EXTEND",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec2 cX = u_texel_size ; vec4 aQ = GLSL_TEXTURE ( u_color , A ) ; GLSL_OUT_FRAG_COLOR = aQ ; if ( aQ . a == 0.0 ) { aQ = GLSL_TEXTURE ( u_color , A + cX ) ; if ( aQ . a > 0.0 ) GLSL_OUT_FRAG_COLOR = vec4 ( 1.0 , 1.0 , 1.0 , aQ . a ) ; else { aQ = GLSL_TEXTURE ( u_color , A - cX ) ; if ( aQ . a > 0.0 ) GLSL_OUT_FRAG_COLOR = vec4 ( 1.0 , 1.0 , 1.0 , aQ . a ) ; } }".split(" ")}]}},{$:"elif",ga:["POST_EFFECT",
"FLIP_CUBEMAP_COORDS",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"float hG = u_delta [ 0 ] ; float hH = u_delta [ 1 ] ; float hI = 1.0 / 3.0 ; float hJ = 0.5 ; vec2 hK = vec2 ( hI , hJ ) ; if ( u_tex_number == 0 ) { vec2 ce = mat2 ( 0.0 , - 1.0 , 1.0 , 0.0 ) * A * hK + vec2 ( 2.0 * hI , hJ ) ; ce [ 0 ] = max ( ce [ 0 ] , 2.0 * hI + hG ) ; ce [ 1 ] = max ( ce [ 1 ] , hH ) ; GLSL_OUT_FRAG_COLOR = GLSL_TEXTURE ( u_color , vec2 ( ce [ 0 ] , hJ - ce [ 1 ] ) ) ; } else if ( u_tex_number == 1 ) { vec2 ce = mat2 ( 0.0 , - 1.0 , 1.0 , 0.0 ) * A * hK + vec2 ( 0.0 , hJ ) ; ce [ 0 ] = max ( ce [ 0 ] , hG ) ; ce [ 1 ] = min ( ce [ 1 ] , hJ - hH ) ; GLSL_OUT_FRAG_COLOR = GLSL_TEXTURE ( u_color , vec2 ( hI - ce [ 0 ] , ce [ 1 ] ) ) ; } else if ( u_tex_number == 2 ) { vec2 ce = A * hK + vec2 ( 2.0 * hI , hJ ) ; ce [ 0 ] = max ( ce [ 0 ] , 2.0 * hI + hG ) ; ce [ 1 ] = min ( ce [ 1 ] , 1.0 - hH ) ; GLSL_OUT_FRAG_COLOR = GLSL_TEXTURE ( u_color , vec2 ( ce [ 0 ] , 1.5 - ce [ 1 ] ) ) ; } else if ( u_tex_number == 3 ) { vec2 ce = A * hK + vec2 ( hI , 0.0 ) ; ce [ 0 ] = max ( ce [ 0 ] , hI + hG ) ; ce [ 0 ] = min ( ce [ 0 ] , 2.0 * hI - hG ) ; ce [ 1 ] = min ( ce [ 1 ] , hJ - hH ) ; GLSL_OUT_FRAG_COLOR = GLSL_TEXTURE ( u_color , vec2 ( 1.0 - ce [ 0 ] , ce [ 1 ] ) ) ; } else if ( u_tex_number == 4 ) { vec2 ce = A * hK + vec2 ( hI , hJ ) ; ce [ 0 ] = max ( ce [ 0 ] , hI + hG ) ; ce [ 0 ] = min ( ce [ 0 ] , 2.0 * hI - hG ) ; ce [ 1 ] = min ( ce [ 1 ] , 1.0 - hH ) ; GLSL_OUT_FRAG_COLOR = GLSL_TEXTURE ( u_color , vec2 ( ce [ 0 ] , 3.0 * hJ - ce [ 1 ] ) ) ; } else { vec2 ce = A * hK + vec2 ( 0.0 , hJ ) ; ce [ 0 ] = max ( ce [ 0 ] , hG ) ; ce [ 1 ] = min ( ce [ 1 ] , 1.0 - hH ) ; ce [ 1 ] = max ( ce [ 1 ] , hJ + hH ) ; GLSL_OUT_FRAG_COLOR = GLSL_TEXTURE ( u_color , vec2 ( hI - ce [ 0 ] , ce [ 1 ] ) ) ; }".split(" ")}]}}]},
{$:"txt",aa:["}"]}]};f["postprocessing/postprocessing.glslv"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"include",oa:"std.glsl"},{$:"txt",aa:"GLSL_IN vec2 a_position ; GLSL_OUT vec2 A ; void main ( ) { A = 2.0 * a_position ; gl_Position = vec4 ( 4.0 * ( a_position . xy - 0.25 ) , 0.0 , 1.0 ) ; }".split(" ")}]};f["postprocessing/precompute_brdf.glslf"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"var",ba:"PRECISION",
aa:["highp"]},{$:"txt",aa:"precision PRECISION sampler2D ; precision PRECISION float ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; float eb ( int cw , int dY ) { float dZ = 1.0 / float ( dY ) ; float d_ = 1.0 ; float ea = 0.0 ; for ( int cq = 0 ; cq < 32 ; ++ cq ) { if ( cw > 0 ) { d_ = mod ( float ( cw ) , 2.0 ) ; ea += d_ * dZ ; dZ = dZ / 2.0 ; cw = int ( float ( cw ) / 2.0 ) ; } } return ea ; } vec2 ed ( int cq , int ec ) { return vec2 ( float ( cq ) / float ( ec ) , eb ( cq , 2 ) ) ; } vec3 ek ( vec2 ee , vec3 ec , float ef ) { float a = ef * ef ; float bC = 2.0 * M_PI * ee . x ; float eg = sqrt ( ( 1.0 - ee . y ) / ( 1.0 + ( a * a - 1.0 ) * ee . y ) ) ; float eh = sqrt ( 1.0 - eg * eg ) ; vec3 ei ; ei . x = cos ( bC ) * eh ; ei . y = sin ( bC ) * eh ; ei . z = eg ; vec3 by = abs ( ec . z ) < 0.999 ? vec3 ( 0.0 , 0.0 , 1.0 ) : vec3 ( 1.0 , 0.0 , 0.0 ) ; vec3 V = normalize ( cross ( by , ec ) ) ; vec3 ej = cross ( ec , V ) ; vec3 bF = V * ei . x + ej * ei . y + ec * ei . z ; return normalize ( bF ) ; } float hO ( float hL , float ef ) { float a = ef ; float hM = ( a * a ) / 2.0 ; float hN = hL ; float d_ = hL * ( 1.0 - hM ) + hM ; return hN / d_ ; } float hR ( vec3 ec , vec3 en , vec3 eq , float ef ) { float hL = max ( dot ( ec , en ) , 0.0 ) ; float er = max ( dot ( ec , eq ) , 0.0 ) ; float hP = hO ( hL , ef ) ; float hQ = hO ( er , ef ) ; return hQ * hP ; } vec2 hY ( float hL , float ef ) { vec3 en ; en . x = sqrt ( 1.0 - hL * hL ) ; en . y = 0.0 ; en . z = hL ; float cG = 0.0 ; float hS = 0.0 ; vec3 ec = vec3 ( 0.0 , 0.0 , 1.0 ) ; const int eo = 1024 ; for ( int cq = 0 ; cq < eo ; ++ cq ) { vec2 ee = ed ( cq , eo ) ; vec3 ei = ek ( ee , ec , ef ) ; vec3 eq = normalize ( 2.0 * dot ( en , ei ) * ei - en ) ; float er = max ( eq . z , 0.0 ) ; float hT = max ( ei . z , 0.0 ) ; float hU = max ( dot ( en , ei ) , 0.0 ) ; if ( er > 0.0 ) { float hV = hR ( ec , en , eq , ef ) ; float hW = ( hV * hU ) / ( hT * hL ) ; float hX = pow ( 1.0 - hU , 5.0 ) ; cG += ( 1.0 - hX ) * hW ; hS += hX * hW ; } } cG /= float ( eo ) ; hS /= float ( eo ) ; return vec2 ( cG , hS ) ; } void main ( ) { vec2 hZ = hY ( A . x , A . y ) ; GLSL_OUT_FRAG_COLOR = vec4 ( hZ , 0.0 , 1.0 ) ; }".split(" ")}]};
f["postprocessing/smaa.glslf"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"var",ba:"SMAA_PASS",aa:["SMAA_RESOLVE"]},{$:"var",ba:"SMAA_REPROJECTION",aa:["0"]},{$:"var",ba:"SMAA_PREDICATION",aa:["0"]},{$:"var",ba:"SMAA_DISABLE_CORNER_DETECTION",aa:["0"]},{$:"var",ba:"AA_METHOD",aa:["AA_METHOD_SMAA_ULTRA"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"include",oa:"pack.glslf"},{$:"txt",aa:["uniform","sampler2D","u_color",";"]},{$:"cond",da:[{$:"if",ga:["SMAA_PASS",
"SMAA_RESOLVE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","sampler2D","u_color_prev",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","sampler2D","u_blend",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SMAA_REPROJECTION"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","sampler2D","u_velocity_tex",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SMAA_PASS","SMAA_EDGE_DETECTION",{$:"equal_expr",ia:2},"SMAA_PREDICATION",
{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","sampler2D","u_predication_tex",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"uniform sampler2D u_search_tex ; uniform sampler2D u_area_tex ; uniform vec4 u_subsample_indices ;".split(" ")}]}}]},{$:"txt",aa:"uniform vec2 u_texel_size ; GLSL_IN vec2 A ;".split(" ")},{$:"cond",da:[{$:"if",ga:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{$:"equal_expr",
ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec4","h_",";"]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"GLSL_IN vec4 ia ; GLSL_IN vec4 ib ; GLSL_IN vec4 ic ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec2","id",";"]}]}}]},{$:"txt",aa:["GLSL_OUT","vec4","GLSL_OUT_FRAG_COLOR",";"]},{$:"cond",da:[{$:"if",ga:["AA_METHOD","AA_METHOD_SMAA_LOW",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"define",
ba:"SMAA_THRESHOLD",aa:["0.15"]},{$:"define",ba:"SMAA_DISABLE_DIAG_DETECTION",aa:["1"]},{$:"define",ba:"SMAA_DISABLE_CORNER_DETECTION",aa:["1"]}]}},{$:"elif",ga:["AA_METHOD","AA_METHOD_SMAA_MEDIUM",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"define",ba:"SMAA_THRESHOLD",aa:["0.1"]},{$:"define",ba:"SMAA_DISABLE_DIAG_DETECTION",aa:["1"]},{$:"define",ba:"SMAA_DISABLE_CORNER_DETECTION",aa:["1"]}]}},{$:"elif",ga:["AA_METHOD","AA_METHOD_SMAA_HIGH",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"define",ba:"SMAA_THRESHOLD",
aa:["0.1"]},{$:"define",ba:"SMAA_DISABLE_DIAG_DETECTION",aa:["0"]},{$:"define",ba:"SMAA_MAX_SEARCH_STEPS_DIAG",aa:["8"]},{$:"define",ba:"SMAA_CORNER_ROUNDING",aa:["25"]}]}},{$:"elif",ga:["AA_METHOD","AA_METHOD_SMAA_ULTRA",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"define",ba:"SMAA_THRESHOLD",aa:["0.05"]},{$:"define",ba:"SMAA_DISABLE_DIAG_DETECTION",aa:["0"]},{$:"define",ba:"SMAA_MAX_SEARCH_STEPS_DIAG",aa:["16"]},{$:"define",ba:"SMAA_CORNER_ROUNDING",aa:["25"]}]}}]},{$:"cond",da:[{$:"ifndef",ba:"SMAA_THRESHOLD",
ha:{$:"grp",da:[{$:"define",ba:"SMAA_THRESHOLD",aa:["0.1"]}]}}]},{$:"cond",da:[{$:"ifndef",ba:"SMAA_DEPTH_THRESHOLD",ha:{$:"grp",da:[{$:"define",ba:"SMAA_DEPTH_THRESHOLD",aa:["(","0.1","*","SMAA_THRESHOLD",")"]}]}}]},{$:"cond",da:[{$:"ifndef",ba:"SMAA_MAX_SEARCH_STEPS_DIAG",ha:{$:"grp",da:[{$:"define",ba:"SMAA_MAX_SEARCH_STEPS_DIAG",aa:["8"]}]}}]},{$:"cond",da:[{$:"ifndef",ba:"SMAA_CORNER_ROUNDING",ha:{$:"grp",da:[{$:"define",ba:"SMAA_CORNER_ROUNDING",aa:["25"]}]}}]},{$:"cond",da:[{$:"ifndef",ba:"SMAA_LOCAL_CONTRAST_ADAPTATION_FACTOR",
ha:{$:"grp",da:[{$:"define",ba:"SMAA_LOCAL_CONTRAST_ADAPTATION_FACTOR",aa:["2.0"]}]}}]},{$:"cond",da:[{$:"ifndef",ba:"SMAA_PREDICATION",ha:{$:"grp",da:[{$:"define",ba:"SMAA_PREDICATION",aa:["0"]}]}}]},{$:"cond",da:[{$:"ifndef",ba:"SMAA_PREDICATION_THRESHOLD",ha:{$:"grp",da:[{$:"define",ba:"SMAA_PREDICATION_THRESHOLD",aa:["0.01"]}]}}]},{$:"cond",da:[{$:"ifndef",ba:"SMAA_PREDICATION_SCALE",ha:{$:"grp",da:[{$:"define",ba:"SMAA_PREDICATION_SCALE",aa:["2.0"]}]}}]},{$:"cond",da:[{$:"ifndef",ba:"SMAA_PREDICATION_STRENGTH",
ha:{$:"grp",da:[{$:"define",ba:"SMAA_PREDICATION_STRENGTH",aa:["0.4"]}]}}]},{$:"cond",da:[{$:"ifndef",ba:"SMAA_REPROJECTION",ha:{$:"grp",da:[{$:"define",ba:"SMAA_REPROJECTION",aa:["0"]}]}}]},{$:"cond",da:[{$:"ifndef",ba:"SMAA_REPROJECTION_WEIGHT_SCALE",ha:{$:"grp",da:[{$:"define",ba:"SMAA_REPROJECTION_WEIGHT_SCALE",aa:["30.0"]}]}}]},{$:"cond",da:[{$:"ifndef",ba:"SMAA_MAX_SEARCH_STEPS",ha:{$:"grp",da:[{$:"define",ba:"SMAA_MAX_SEARCH_STEPS",aa:["16"]}]}}]},{$:"define",ba:"SMAA_AREATEX_MAX_DISTANCE",
aa:["16"]},{$:"define",ba:"SMAA_AREATEX_MAX_DISTANCE_DIAG",aa:["20"]},{$:"define",ba:"SMAA_AREATEX_PIXEL_SIZE",aa:"( 1.0 / vec2 ( 160.0 , 560.0 ) )".split(" ")},{$:"define",ba:"SMAA_AREATEX_SUBTEX_SIZE",aa:["(","1.0","/","7.0",")"]},{$:"define",ba:"SMAA_SEARCHTEX_SIZE",aa:"vec2 ( 66.0 , 33.0 )".split(" ")},{$:"define",ba:"SMAA_SEARCHTEX_PACKED_SIZE",aa:"vec2 ( 64.0 , 16.0 )".split(" ")},{$:"define",ba:"SMAA_CORNER_ROUNDING_NORM",aa:"( float ( SMAA_CORNER_ROUNDING ) / 100.0 )".split(" ")},{$:"cond",
da:[{$:"if",ga:["SMAA_PASS","SMAA_EDGE_DETECTION",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 ii ( vec2 ce , sampler2D ie ) { float p = GLSL_TEXTURE ( ie , ce ) . r ; float ig = GLSL_TEXTURE ( ie , ia . xy ) . r ; float ih = GLSL_TEXTURE ( ie , ia . zw ) . r ; return vec3 ( p , ig , ih ) ; }".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["SMAA_PASS","SMAA_EDGE_DETECTION",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec2 im ( vec2 ce , sampler2D ij ) { vec3 ik = ii ( ce , ij ) ; vec2 cX = abs ( ik . xx - ik . yz ) ; vec2 il = step ( SMAA_PREDICATION_THRESHOLD , cX ) ; return SMAA_PREDICATION_SCALE * SMAA_THRESHOLD * ( 1.0 - SMAA_PREDICATION_STRENGTH * il ) ; }".split(" ")}]}}]},
{$:"txt",aa:"void ir ( bvec2 io , inout vec2 ip , vec2 iq ) { if ( io . x ) ip . x = iq . x ; if ( io . y ) ip . y = iq . y ; } void ir ( bvec4 io , inout vec4 ip , vec4 iq ) { ir ( io . xy , ip . xy , iq . xy ) ; ir ( io . zw , ip . zw , iq . zw ) ; } vec2 is ( vec2 x ) { return sign ( x ) * floor ( abs ( x ) + .5 ) ; } vec4 is ( vec4 x ) { return sign ( x ) * floor ( abs ( x ) + .5 ) ; }".split(" ")},{$:"cond",da:[{$:"if",ga:["SMAA_PASS","SMAA_EDGE_DETECTION",{$:"equal_expr",ia:2}],ha:{$:"grp",
da:[{$:"txt",aa:"vec2 iE ( vec2 ce , sampler2D it".split(" ")},{$:"cond",da:[{$:"if",ga:["SMAA_PREDICATION"],ha:{$:"grp",da:[{$:"txt",aa:[",","sampler2D","ij"]}]}}]},{$:"txt",aa:[")","{"]},{$:"cond",da:[{$:"if",ga:["SMAA_PREDICATION"],ha:{$:"grp",da:[{$:"txt",aa:"vec2 iu = im ( ce , ij ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec2 iu = vec2 ( SMAA_THRESHOLD , SMAA_THRESHOLD ) ;".split(" ")}]}}]},{$:"txt",aa:"vec3 iv = vec3 ( 0.2126 , 0.7152 , 0.0722 ) ; float eq = dot ( GLSL_TEXTURE ( it , ce ) . rgb , iv ) ; float iw = dot ( GLSL_TEXTURE ( it , ia . xy ) . rgb , iv ) ; float ix = dot ( GLSL_TEXTURE ( it , ia . zw ) . rgb , iv ) ; vec4 cX ; cX . xy = abs ( eq - vec2 ( iw , ix ) ) ; vec2 il = step ( iu , cX . xy ) ; if ( dot ( il , vec2 ( 1.0 , 1.0 ) ) == 0.0 ) discard ; float iy = dot ( GLSL_TEXTURE ( it , ib . xy ) . rgb , iv ) ; float iz = dot ( GLSL_TEXTURE ( it , ib . zw ) . rgb , iv ) ; cX . zw = abs ( eq - vec2 ( iy , iz ) ) ; vec2 iA = max ( cX . xy , cX . zw ) ; float iB = dot ( GLSL_TEXTURE ( it , ic . xy ) . rgb , iv ) ; float iC = dot ( GLSL_TEXTURE ( it , ic . zw ) . rgb , iv ) ; cX . zw = abs ( vec2 ( iw , ix ) - vec2 ( iB , iC ) ) ; iA = max ( iA . xy , cX . zw ) ; float iD = max ( iA . x , iA . y ) ; il . xy *= step ( iD , SMAA_LOCAL_CONTRAST_ADAPTATION_FACTOR * cX . xy ) ; return il ; }".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["SMAA_DISABLE_DIAG_DETECTION",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:"vec2 iG ( vec2 iF ) { iF . r = iF . r * abs ( 5.0 * iF . r - 5.0 * 0.75 ) ; return is ( iF ) ; } vec4 iG ( vec4 iF ) { iF . rb = iF . rb * abs ( 5.0 * iF . rb - 5.0 * 0.75 ) ; return is ( iF ) ; } vec2 iI ( sampler2D iH , vec2 ce , vec2 bH , out vec2 iF ) { vec4 f_ = vec4 ( ce , - 1.0 , 1.0 ) ; vec3 t = vec3 ( u_texel_size , 1.0 ) ; for ( int cq = 0 ; cq < SMAA_MAX_SEARCH_STEPS_DIAG ; cq ++ ) { if ( f_ . z < float ( SMAA_MAX_SEARCH_STEPS_DIAG - 1 ) && f_ . w > 0.9 ) { f_ . xyz += t * vec3 ( bH , 1.0 ) ; iF = GLSL_TEXTURE ( iH , f_ . xy , 0.0 ) . rg ; f_ . w = dot ( iF , vec2 ( 0.5 , 0.5 ) ) ; } } return f_ . zw ; } vec2 iJ ( sampler2D iH , vec2 ce , vec2 bH , out vec2 iF ) { vec4 f_ = vec4 ( ce , - 1.0 , 1.0 ) ; f_ . x += 0.25 * u_texel_size . x ; vec3 t = vec3 ( u_texel_size , 1.0 ) ; for ( int cq = 0 ; cq < SMAA_MAX_SEARCH_STEPS_DIAG ; cq ++ ) { if ( f_ . z < float ( SMAA_MAX_SEARCH_STEPS_DIAG - 1 ) && f_ . w > 0.9 ) { f_ . xyz = t * vec3 ( bH , 1.0 ) + f_ . xyz ; iF = GLSL_TEXTURE ( iH , f_ . xy , 0.0 ) . rg ; iF = iG ( iF ) ; f_ . w = dot ( iF , vec2 ( 0.5 , 0.5 ) ) ; } } return f_ . zw ; } vec2 iL ( sampler2D iK , vec2 aM , vec2 iF , float fM ) { vec2 ce = vec2 ( SMAA_AREATEX_MAX_DISTANCE_DIAG , SMAA_AREATEX_MAX_DISTANCE_DIAG ) * iF + aM ; ce = SMAA_AREATEX_PIXEL_SIZE * ce + 0.5 * SMAA_AREATEX_PIXEL_SIZE ; ce . x += 0.5 ; ce . y += SMAA_AREATEX_SUBTEX_SIZE * fM ; return GLSL_TEXTURE ( iK , ce , 0.0 ) . rg ; } vec2 iQ ( sampler2D iH , sampler2D iK , vec2 ce , vec2 iF , vec4 iM ) { vec2 iv = vec2 ( 0.0 , 0.0 ) ; vec4 dC ; vec2 iN ; if ( iF . r > 0.0 ) { dC . xz = iI ( iH , ce , vec2 ( - 1.0 , 1.0 ) , iN ) ; dC . x += float ( iN . y > 0.9 ) ; } else dC . xz = vec2 ( 0.0 , 0.0 ) ; dC . yw = iI ( iH , ce , vec2 ( 1.0 , - 1.0 ) , iN ) ; if ( dC . x + dC . y > 2.0 ) { vec4 iO = vec4 ( - dC . x + 0.25 , dC . x , dC . y , - dC . y - 0.25 ) * u_texel_size . xyxy + ce . xyxy ; vec4 dx ; dx . xy = GLSL_TEXTURE ( iH , iO . xy + u_texel_size * vec2 ( - 1 , 0 ) , 0.0 ) . rg ; dx . zw = GLSL_TEXTURE ( iH , iO . zw + u_texel_size * vec2 ( 1 , 0 ) , 0.0 ) . rg ; dx . yxwz = iG ( dx . xyzw ) ; vec2 iP = vec2 ( 2.0 , 2.0 ) * dx . xz + dx . yw ; ir ( bvec2 ( step ( 0.9 , dC . zw ) ) , iP , vec2 ( 0.0 , 0.0 ) ) ; iv += iL ( iK , dC . xy , iP , iM . z ) ; } dC . xz = iJ ( iH , ce , vec2 ( - 1 , - 1 ) , iN ) ; if ( GLSL_TEXTURE ( iH , ce + u_texel_size * vec2 ( 1 , 0 ) , 0.0 ) . r > 0.0 ) { dC . yw = iJ ( iH , ce , vec2 ( 1 , 1 ) , iN ) ; dC . y += float ( iN . y > 0.9 ) ; } else dC . yw = vec2 ( 0.0 , 0.0 ) ; if ( dC . x + dC . y > 2.0 ) { vec4 iO = vec4 ( - dC . x , - dC . x , dC . y , dC . y ) * u_texel_size . xyxy + ce . xyxy ; vec4 dx ; dx . x = GLSL_TEXTURE ( iH , iO . xy + u_texel_size * vec2 ( - 1 , 0 ) , 0.0 ) . g ; dx . y = GLSL_TEXTURE ( iH , iO . xy + u_texel_size * vec2 ( 0 , - 1 ) , 0.0 ) . r ; dx . zw = GLSL_TEXTURE ( iH , iO . zw + u_texel_size * vec2 ( 1 , 0 ) , 0.0 ) . gr ; vec2 iP = vec2 ( 2.0 , 2.0 ) * dx . xz + dx . yw ; ir ( bvec2 ( step ( 0.9 , dC . zw ) ) , iP , vec2 ( 0 , 0 ) ) ; iv += iL ( iK , dC . xy , iP , iM . w ) . gr ; } return iv ; }".split(" ")}]}}]},
{$:"txt",aa:"float iT ( sampler2D iR , vec2 iF , float fM ) { vec2 hK = SMAA_SEARCHTEX_SIZE * vec2 ( 0.5 , - 1.0 ) ; vec2 iS = SMAA_SEARCHTEX_SIZE * vec2 ( fM , 1.0 ) ; hK += vec2 ( - 1.0 , 1.0 ) ; iS += vec2 ( 0.5 , - 0.5 ) ; hK *= 1.0 / SMAA_SEARCHTEX_PACKED_SIZE ; iS *= 1.0 / SMAA_SEARCHTEX_PACKED_SIZE ; return GLSL_TEXTURE ( iR , hK * iF + iS , 0.0 ) . r ; } float iU ( sampler2D iH , sampler2D iR , vec2 ce , float iN ) { vec2 iF = vec2 ( 0.0 , 1.0 ) ; for ( int cq = 0 ; cq < SMAA_MAX_SEARCH_STEPS ; cq ++ ) { if ( ce . x > iN && iF . g > 0.8281 && iF . r == 0.0 ) { iF = GLSL_TEXTURE ( iH , ce , 0.0 ) . rg ; ce = - vec2 ( 2.0 , 0.0 ) * u_texel_size + ce ; } } float fM = - ( 255.0 / 127.0 ) * iT ( iR , iF , 0.0 ) + 3.25 ; return u_texel_size . x * fM + ce . x ; } float iV ( sampler2D iH , sampler2D iR , vec2 ce , float iN ) { vec2 iF = vec2 ( 0.0 , 1.0 ) ; for ( int cq = 0 ; cq < SMAA_MAX_SEARCH_STEPS ; cq ++ ) { if ( ce . x < iN && iF . g > 0.8281 && iF . r == 0.0 ) { iF = GLSL_TEXTURE ( iH , ce , 0.0 ) . rg ; ce = vec2 ( 2.0 , 0.0 ) * u_texel_size + ce ; } } float fM = - ( 255.0 / 127.0 ) * iT ( iR , iF , 0.5 ) + 3.25 ; return - u_texel_size . x * fM + ce . x ; } float iW ( sampler2D iH , sampler2D iR , vec2 ce , float iN ) { vec2 iF = vec2 ( 1.0 , 0.0 ) ; for ( int cq = 0 ; cq < SMAA_MAX_SEARCH_STEPS ; cq ++ ) { if ( ce . y > iN && iF . r > 0.8281 && iF . g == 0.0 ) { iF = GLSL_TEXTURE ( iH , ce , 0.0 ) . rg ; ce = - vec2 ( 0.0 , 2.0 ) * u_texel_size + ce ; } } float fM = - ( 255.0 / 127.0 ) * iT ( iR , iF . gr , 0.0 ) + 3.25 ; return u_texel_size . y * fM + ce . y ; } float iX ( sampler2D iH , sampler2D iR , vec2 ce , float iN ) { vec2 iF = vec2 ( 1.0 , 0.0 ) ; for ( int cq = 0 ; cq < SMAA_MAX_SEARCH_STEPS ; cq ++ ) { if ( ce . y < iN && iF . r > 0.8281 && iF . g == 0.0 ) { iF = GLSL_TEXTURE ( iH , ce , 0.0 ) . rg ; ce = vec2 ( 0.0 , 2.0 ) * u_texel_size + ce ; } } float fM = - ( 255.0 / 127.0 ) * iT ( iR , iF . gr , 0.5 ) + 3.25 ; return - u_texel_size . y * fM + ce . y ; } vec2 i_ ( sampler2D iK , vec2 aM , float iY , float iZ , float fM ) { vec2 ce = vec2 ( SMAA_AREATEX_MAX_DISTANCE , SMAA_AREATEX_MAX_DISTANCE ) * is ( 4.0 * vec2 ( iY , iZ ) ) + aM ; ce = SMAA_AREATEX_PIXEL_SIZE * ce + 0.5 * SMAA_AREATEX_PIXEL_SIZE ; ce . y = SMAA_AREATEX_SUBTEX_SIZE * fM + ce . y ; return GLSL_TEXTURE ( iK , ce , 0.0 ) . rg ; } void jc ( sampler2D iH , inout vec2 iv , vec4 ce , vec2 dC ) {".split(" ")},
{$:"cond",da:[{$:"if",ga:["SMAA_DISABLE_CORNER_DETECTION",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:"vec2 ja = step ( dC . xy , dC . yx ) ; vec2 jb = ( 1.0 - SMAA_CORNER_ROUNDING_NORM ) * ja ; jb /= ja . x + ja . y ; vec2 aL = vec2 ( 1.0 , 1.0 ) ; aL . x -= jb . x * GLSL_TEXTURE ( iH , ce . xy + u_texel_size * vec2 ( 0 , 1 ) , 0.0 ) . r ; aL . x -= jb . y * GLSL_TEXTURE ( iH , ce . zw + u_texel_size * vec2 ( 1 , 1 ) , 0.0 ) . r ; aL . y -= jb . x * GLSL_TEXTURE ( iH , ce . xy + u_texel_size * vec2 ( 0 , - 2 ) , 0.0 ) . r ; aL . y -= jb . y * GLSL_TEXTURE ( iH , ce . zw + u_texel_size * vec2 ( 1 , - 2 ) , 0.0 ) . r ; iv *= clamp ( aL , 0.0 , 1.0 ) ;".split(" ")}]}}]},
{$:"txt",aa:"} void jd ( sampler2D iH , inout vec2 iv , vec4 ce , vec2 dC ) {".split(" ")},{$:"cond",da:[{$:"if",ga:["SMAA_DISABLE_CORNER_DETECTION",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:"vec2 ja = step ( dC . xy , dC . yx ) ; vec2 jb = ( 1.0 - SMAA_CORNER_ROUNDING_NORM ) * ja ; jb /= ja . x + ja . y ; vec2 aL = vec2 ( 1.0 , 1.0 ) ; aL . x -= jb . x * GLSL_TEXTURE ( iH , ce . xy + u_texel_size * vec2 ( 1 , 0 ) , 0.0 ) . g ; aL . x -= jb . y * GLSL_TEXTURE ( iH , ce . zw + u_texel_size * vec2 ( 1 , 1 ) , 0.0 ) . g ; aL . y -= jb . x * GLSL_TEXTURE ( iH , ce . xy + u_texel_size * vec2 ( - 2 , 0 ) , 0.0 ) . g ; aL . y -= jb . y * GLSL_TEXTURE ( iH , ce . zw + u_texel_size * vec2 ( - 2 , 1 ) , 0.0 ) . g ; iv *= clamp ( aL , 0.0 , 1.0 ) ;".split(" ")}]}}]},
{$:"txt",aa:["}"]},{$:"cond",da:[{$:"if",ga:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec4 jg ( vec2 ce , vec2 je , sampler2D iH , sampler2D iK , sampler2D iR , vec4 iM ) { vec4 iv = vec4 ( 0.0 , 0.0 , 0.0 , 0.0 ) ; vec2 iF = GLSL_TEXTURE ( iH , ce ) . rg ; if ( iF . g > 0.0 ) {".split(" ")},{$:"cond",da:[{$:"if",ga:["SMAA_DISABLE_DIAG_DETECTION",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:"iv . rg = iQ ( iH , iK , ce , iF , iM ) ; if ( iv . r == - iv . g ) {".split(" ")}]}}]},
{$:"txt",aa:"vec2 dC ; vec3 iO ; iO . x = iU ( iH , iR , ia . xy , ic . x ) ; iO . y = ib . y ; dC . x = iO . x ; float iY = GLSL_TEXTURE ( iH , iO . xy , 0.0 ) . r ; iO . z = iV ( iH , iR , ia . zw , ic . y ) ; dC . y = iO . z ; dC = abs ( is ( dC / u_texel_size . xx - je . xx ) ) ; vec2 jf = sqrt ( dC ) ; float iZ = GLSL_TEXTURE ( iH , iO . zy + u_texel_size * vec2 ( 1 , 0 ) , 0.0 ) . r ; iv . rg = i_ ( iK , jf , iY , iZ , iM . y ) ; iO . y = ce . y ; jc ( iH , iv . rg , iO . xyzy , dC ) ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["SMAA_DISABLE_DIAG_DETECTION",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:"} else iF . r = 0.0 ;".split(" ")}]}}]},{$:"txt",aa:"} if ( iF . r > 0.0 ) { vec2 dC ; vec3 iO ; iO . y = iW ( iH , iR , ib . xy , ic . z ) ; iO . x = ia . x ; dC . x = iO . y ; float iY = GLSL_TEXTURE ( iH , iO . xy , 0.0 ) . g ; iO . z = iX ( iH , iR , ib . zw , ic . w ) ; dC . y = iO . z ; dC = abs ( is ( dC / u_texel_size . yy - je . yy ) ) ; vec2 jf = sqrt ( dC ) ; float iZ = GLSL_TEXTURE ( iH , iO . xz + u_texel_size * vec2 ( 0 , 1 ) , 0.0 ) . g ; iv . ba = i_ ( iK , jf , iY , iZ , iM . x ) ; iO . x = ce . x ; jd ( iH , iv . ba , iO . xyxz , dC ) ; } return iv ; }".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec4 jp ( vec2 ce , sampler2D it , sampler2D jh".split(" ")},{$:"cond",da:[{$:"if",ga:["SMAA_REPROJECTION"],ha:{$:"grp",da:[{$:"txt",aa:[",","sampler2D","ji"]}]}}]},{$:"txt",aa:") { vec4 a ; a . x = GLSL_TEXTURE ( jh , h_ . xy ) . a ; a . y = GLSL_TEXTURE ( jh , h_ . zw ) . g ; a . wz = GLSL_TEXTURE ( jh , ce ) . xz ; if ( dot ( a , vec4 ( 1.0 , 1.0 , 1.0 , 1.0 ) ) < 1e-5 ) { vec4 aQ = GLSL_TEXTURE ( it , ce , 0.0 ) ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["SMAA_REPROJECTION"],ha:{$:"grp",da:[{$:"txt",aa:"vec4 jj = GLSL_TEXTURE ( ji , A ) ; vec2 dp = 2.0 * jk ( jj ) - 1.0 ; aQ . a = sqrt ( 2.0 * length ( dp ) ) ;".split(" ")}]}}]},{$:"txt",aa:"return aQ ; } else { bool co = max ( a . x , a . z ) > max ( a . y , a . w ) ; vec4 jl = vec4 ( 0.0 , a . y , 0.0 , a . w ) ; vec2 jm = a . yw ; ir ( bvec4 ( co , co , co , co ) , jl , vec4 ( a . x , 0.0 , a . z , 0.0 ) ) ; ir ( bvec2 ( co , co ) , jm , a . xz ) ; jm /= dot ( jm , vec2 ( 1.0 , 1.0 ) ) ; vec4 jn = jl * vec4 ( u_texel_size , - u_texel_size ) + ce . xyxy ; vec4 aQ = jm . x * GLSL_TEXTURE ( it , jn . xy , 0.0 ) ; aQ += jm . y * GLSL_TEXTURE ( it , jn . zw , 0.0 ) ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["SMAA_REPROJECTION"],ha:{$:"grp",da:[{$:"txt",aa:"vec4 jj = GLSL_TEXTURE ( ji , jn . xy ) ; vec2 jo = 2.0 * jk ( jj ) - 1.0 ; vec2 dp = jm . x * jo ; jj = GLSL_TEXTURE ( ji , jn . zw ) ; jo = 2.0 * jk ( jj ) - 1.0 ; dp += jm . y * jo ; aQ . a = sqrt ( 2.0 * length ( dp ) ) ;".split(" ")}]}}]},{$:"txt",aa:["return","aQ",";","}","}"]}]}}]},{$:"cond",da:[{$:"if",ga:["SMAA_PASS","SMAA_RESOLVE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec4 ju ( vec2 ce , sampler2D jq , sampler2D jr".split(" ")},
{$:"cond",da:[{$:"if",ga:["SMAA_REPROJECTION"],ha:{$:"grp",da:[{$:"txt",aa:[",","sampler2D","ji"]}]}}]},{$:"txt",aa:[")","{"]},{$:"cond",da:[{$:"if",ga:["SMAA_REPROJECTION"],ha:{$:"grp",da:[{$:"txt",aa:"vec4 jj = GLSL_TEXTURE ( ji , A ) ; vec2 dp ; dp = 2.0 * jk ( jj ) - 1.0 ; vec4 js = GLSL_TEXTURE ( jq , ce ) ; vec4 jt = GLSL_TEXTURE ( jr , ce - dp ) ; float cX = abs ( js . a * js . a - jt . a * jt . a ) / 2.0 ; float cu = 0.5 * clamp ( 1.0 - sqrt ( cX ) * SMAA_REPROJECTION_WEIGHT_SCALE , 0.0 , 1.0 ) ; vec4 aQ = mix ( js , jt , cu ) ; aQ . a = 1.0 ; return aQ ;".split(" ")}]}},
{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec4 js = GLSL_TEXTURE ( jq , ce ) ; vec4 jt = GLSL_TEXTURE ( jr , ce ) ; return mix ( js , jt , 0.5 ) ;".split(" ")}]}}]},{$:"txt",aa:["}"]}]}}]},{$:"txt",aa:["void","main","(",")","{"]},{$:"cond",da:[{$:"if",ga:["SMAA_PASS","SMAA_EDGE_DETECTION",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec4 aQ = vec4 ( iE ( A , u_color".split(" ")},{$:"cond",da:[{$:"if",ga:["SMAA_PREDICATION"],ha:{$:"grp",da:[{$:"txt",aa:[",","u_predication_tex"]}]}}]},{$:"txt",
aa:") , 0.0 , 0.0 ) ;".split(" ")}]}},{$:"elif",ga:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec4 aQ = jg ( A , id , u_color , u_area_tex , u_search_tex , u_subsample_indices ) ;".split(" ")}]}},{$:"elif",ga:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec4 aQ = jp ( A , u_color , u_blend".split(" ")},{$:"cond",da:[{$:"if",ga:["SMAA_REPROJECTION"],ha:{$:"grp",da:[{$:"txt",aa:[",","u_velocity_tex"]}]}}]},
{$:"txt",aa:[")",";"]}]}},{$:"elif",ga:["SMAA_PASS","SMAA_RESOLVE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec4 aQ = vec4 ( ju ( A , u_color , u_color_prev".split(" ")},{$:"cond",da:[{$:"if",ga:["SMAA_REPROJECTION"],ha:{$:"grp",da:[{$:"txt",aa:[",","u_velocity_tex"]}]}}]},{$:"txt",aa:[")",")",";"]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec4 aQ = GLSL_TEXTURE ( u_color , A ) ;".split(" ")}]}}]},{$:"txt",aa:["GLSL_OUT_FRAG_COLOR","=","aQ",";","}"]}]};f["postprocessing/smaa.glslv"]={$:"grp",
da:[{$:"version",aa:["GLSL_VERSION"]},{$:"var",ba:"PRECISION",aa:["highp"]},{$:"var",ba:"SMAA_PASS",aa:["SMAA_RESOLVE"]},{$:"var",ba:"AA_METHOD",aa:["AA_METHOD_SMAA_LOW"]},{$:"include",oa:"std.glsl"},{$:"txt",aa:"uniform PRECISION vec2 u_texel_size ; GLSL_IN vec2 a_position ; GLSL_OUT vec2 A ;".split(" ")},{$:"cond",da:[{$:"if",ga:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec4","h_",";"]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"GLSL_OUT vec4 ia ; GLSL_OUT vec4 ib ; GLSL_OUT vec4 ic ;".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec2","id",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["AA_METHOD","AA_METHOD_SMAA_LOW",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"define",ba:"SMAA_MAX_SEARCH_STEPS",aa:["4"]}]}},{$:"elif",ga:["AA_METHOD","AA_METHOD_SMAA_MEDIUM",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"define",ba:"SMAA_MAX_SEARCH_STEPS",aa:["8"]}]}},{$:"elif",ga:["AA_METHOD","AA_METHOD_SMAA_HIGH",{$:"equal_expr",
ia:2}],ha:{$:"grp",da:[{$:"define",ba:"SMAA_MAX_SEARCH_STEPS",aa:["16"]}]}},{$:"elif",ga:["AA_METHOD","AA_METHOD_SMAA_ULTRA",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"define",ba:"SMAA_MAX_SEARCH_STEPS",aa:["32"]}]}}]},{$:"cond",da:[{$:"ifndef",ba:"SMAA_MAX_SEARCH_STEPS",ha:{$:"grp",da:[{$:"define",ba:"SMAA_MAX_SEARCH_STEPS",aa:["16"]}]}}]},{$:"cond",da:[{$:"if",ga:["SMAA_PASS","SMAA_EDGE_DETECTION",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"void jv ( vec2 ce ) { ia = u_texel_size . xyxy * vec4 ( - 1.0 , 0.0 , 0.0 , - 1.0 ) + ce . xyxy ; ib = u_texel_size . xyxy * vec4 ( 1.0 , 0.0 , 0.0 , 1.0 ) + ce . xyxy ; ic = u_texel_size . xyxy * vec4 ( - 2.0 , 0.0 , 0.0 , - 2.0 ) + ce . xyxy ; }".split(" ")}]}},
{$:"elif",ga:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"void jw ( vec2 ce , out vec2 je ) { je = ce / u_texel_size ; ia = u_texel_size . xyxy * vec4 ( - 0.25 , - 0.125 , 1.25 , - 0.125 ) + ce . xyxy ; ib = u_texel_size . xyxy * vec4 ( - 0.125 , - 0.25 , - 0.125 , 1.25 ) + ce . xyxy ; ic = u_texel_size . xxyy * vec4 ( - 2.0 , 2.0 , - 2.0 , 2.0 ) * float ( SMAA_MAX_SEARCH_STEPS ) + vec4 ( ia . xz , ib . yw ) ; }".split(" ")}]}},{$:"elif",ga:["SMAA_PASS",
"SMAA_NEIGHBORHOOD_BLENDING",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"void jx ( vec2 ce ) { h_ = u_texel_size . xyxy * vec4 ( 1.0 , 0.0 , 0.0 , 1.0 ) + ce . xyxy ; }".split(" ")}]}}]},{$:"txt",aa:"void main ( ) { A = 2.0 * a_position ;".split(" ")},{$:"cond",da:[{$:"if",ga:["SMAA_PASS","SMAA_EDGE_DETECTION",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["jv","(","A",")",";"]}]}},{$:"elif",ga:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",
aa:"jw ( A , id ) ;".split(" ")}]}},{$:"elif",ga:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["jx","(","A",")",";"]}]}}]},{$:"txt",aa:"gl_Position = vec4 ( 4.0 * ( a_position . xy - 0.25 ) , 0.0 , 1.0 ) ; }".split(" ")}]};f["postprocessing/ssao.glslf"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"var",ba:"PRECISION",aa:["highp"]},{$:"var",ba:"SSAO_WHITE",aa:["0"]},{$:"var",ba:"SSAO_QUALITY",aa:["SSAO_QUALITY_8"]},{$:"var",ba:"SSAO_HEMISPHERE",
aa:["0"]},{$:"txt",aa:["precision","PRECISION","sampler2D",";"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"include",oa:"depth_fetch.glslf"},{$:"txt",aa:"uniform sampler2D u_color ; uniform sampler2D u_depth ; uniform sampler2D u_ssao_special_tex ; uniform vec2 u_camera_range ; uniform vec2 u_texel_size ; uniform float u_ssao_radius_increase ; uniform float u_ssao_influence ; uniform float u_ssao_dist_factor ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; float jy ( in vec2 f_ ) { return gC ( u_depth , f_ , u_camera_range ) ; } void main ( ) { vec3 gG = GLSL_TEXTURE ( u_color , A ) . rgb ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["SSAO_WHITE"],ha:{$:"grp",da:[{$:"txt",aa:"GLSL_OUT_FRAG_COLOR = vec4 ( gG , 1.0 ) ; return ;".split(" ")}]}}]},{$:"txt",aa:"vec3 jz = normalize ( 2.0 * GLSL_TEXTURE ( u_ssao_special_tex , A * 0.25 / u_texel_size ) . rgb - 1.0 ) ; float et = jy ( A ) ; float jA = et * ( u_camera_range . y - u_camera_range . x ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["SSAO_QUALITY","SSAO_QUALITY_8",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"const float jB = 8.0 ; const int jC = 1 ;".split(" ")}]}},
{$:"elif",ga:["SSAO_QUALITY","SSAO_QUALITY_16",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"const float jB = 16.0 ; const int jC = 2 ;".split(" ")}]}},{$:"elif",ga:["SSAO_QUALITY","SSAO_QUALITY_24",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"const float jB = 24.0 ; const int jC = 3 ;".split(" ")}]}},{$:"elif",ga:["SSAO_QUALITY","SSAO_QUALITY_32",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"const float jB = 32.0 ; const int jC = 4 ;".split(" ")}]}}]},{$:"txt",aa:"float jD = u_ssao_radius_increase * 0.001 ; const float jE = 1.0 + 2.4 / jB ; float jF = 0.0 ; for ( int cq = 0 ; cq < jC ; cq ++ ) for ( int x = - 1 ; x <= 1 ; x += 2 ) for ( int y = - 1 ; y <= 1 ; y += 2 ) for ( int z = - 1 ; z <= 1 ; z += 2 ) { vec3 jG = reflect ( normalize ( vec3 ( x , y , z ) ) , jz ) * ( jD *= jE ) ; vec3 jH = vec3 ( A , jA ) ; jH += vec3 ( jG . xy , jG . z * jA * 2.0 ) ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["SSAO_HEMISPHERE"],ha:{$:"grp",da:[{$:"txt",aa:"jH . z -= 1.4 * ( jH . z - jA ) * step ( jA , jH . z ) ;".split(" ")}]}}]},{$:"txt",aa:"float jI = jy ( jH . xy ) * ( u_camera_range . y - u_camera_range . x ) ; float jJ = clamp ( ( jA - jI ) / jI , 0.0 , 1.0 ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["SSAO_HEMISPHERE"],ha:{$:"grp",da:[{$:"txt",aa:"jF += mix ( 1.0 , jJ , step ( jI , jH . z ) ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"jF += mix ( step ( jH . z , jI ) , 0.5 , jJ ) ;".split(" ")}]}}]},
{$:"txt",aa:"} jF = jF / jB ;".split(" ")},{$:"cond",da:[{$:"if",ga:["SSAO_HEMISPHERE"],ha:{$:"grp",da:[{$:"txt",aa:"jF = clamp ( jF * jF + 0.6 * jF , 0.0 , 1.0 ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"jF = clamp ( jF * jF + jF , 0.0 , 1.0 ) ;".split(" ")}]}}]},{$:"txt",aa:"float jK = u_ssao_influence * ( 1.0 - u_ssao_dist_factor * et ) ; jF = mix ( 1.0 , jF , jK ) ; GLSL_OUT_FRAG_COLOR = vec4 ( gG , jF ) ; }".split(" ")}]};f["postprocessing/ssao_blur.glslf"]={$:"grp",da:[{$:"version",
aa:["GLSL_VERSION"]},{$:"var",ba:"PRECISION",aa:["highp"]},{$:"var",ba:"SSAO_BLUR_DEPTH",aa:["0"]},{$:"txt",aa:["precision","PRECISION","sampler2D",";"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"cond",da:[{$:"if",ga:["SSAO_BLUR_DEPTH"],ha:{$:"grp",da:[{$:"include",oa:"depth_fetch.glslf"}]}}]},{$:"txt",aa:"uniform sampler2D u_ssao_mask ; uniform vec2 u_texel_size ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ;".split(" ")},{$:"cond",da:[{$:"if",ga:["SSAO_BLUR_DEPTH"],
ha:{$:"grp",da:[{$:"txt",aa:"uniform sampler2D u_depth ; uniform vec2 u_camera_range ; uniform float u_ssao_blur_discard_value ; float jy ( in vec2 f_ ) { return gC ( u_depth , f_ , u_camera_range ) ; }".split(" ")}]}}]},{$:"txt",aa:"void main ( ) { float jL = 0.0 ;".split(" ")},{$:"cond",da:[{$:"if",ga:["SSAO_BLUR_DEPTH"],ha:{$:"grp",da:[{$:"txt",aa:"float jM = jy ( A ) ; float cu = 0.0 ; float jN = u_ssao_blur_discard_value * 100.0 ;".split(" ")}]}}]},{$:"txt",aa:"vec2 jO = vec2 ( - 2.0 ) ; for ( int cq = 0 ; cq < 4 ; ++ cq ) { for ( int jP = 0 ; jP < 4 ; ++ jP ) { vec2 fM = ( jO + vec2 ( float ( cq ) , float ( jP ) ) ) * u_texel_size ; float jQ = GLSL_TEXTURE ( u_ssao_mask , A + fM ) . a ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["SSAO_BLUR_DEPTH"],ha:{$:"grp",da:[{$:"txt",aa:"float jR = jy ( A + fM ) ; float jS = 1.0 - clamp ( abs ( jR - jM ) * jN , 0.0 , 1.0 ) ; jL += jQ * jS ; cu += jS ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["jL","+=","jQ",";"]}]}}]},{$:"txt",aa:["}","}"]},{$:"cond",da:[{$:"if",ga:["SSAO_BLUR_DEPTH"],ha:{$:"grp",da:[{$:"txt",aa:"GLSL_OUT_FRAG_COLOR = vec4 ( GLSL_TEXTURE ( u_ssao_mask , A ) . rgb , jL / cu ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",
aa:"GLSL_OUT_FRAG_COLOR = vec4 ( GLSL_TEXTURE ( u_ssao_mask , A ) . rgb , jL / 16.0 ) ;".split(" ")}]}}]},{$:"txt",aa:["}"]}]};f["postprocessing/stereo.glslf"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"var",ba:"ANAGLYPH",aa:["0"]},{$:"var",ba:"SIDEBYSIDE",aa:["0"]},{$:"var",ba:"EPSILON",aa:["0.000001"]},{$:"var",ba:"DISTOR_SCALE",aa:["0.8"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"include",oa:"color_util.glslf"},{$:"txt",aa:"uniform sampler2D u_sampler_left ; uniform sampler2D u_sampler_right ; uniform vec2 u_texel_size ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["ANAGLYPH",{$:"logic_negative_expr",ia:1},"SIDEBYSIDE",{$:"logic_negative_expr",ia:1},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"uniform int u_enable_hmd_stereo ; uniform vec4 u_distortion_params ; uniform vec4 u_chromatic_aberration_coefs ; void ka ( vec2 ce , vec2 ao , float di , sampler2D jT ) { vec2 bD = ( ce - ao ) * 4.0 * u_texel_size [ 0 ] / u_texel_size [ 1 ] / di ; float jU = bD . x * bD . x + bD . y * bD . y ; vec2 jV = bD * ( 1.0 + u_distortion_params [ 0 ] * jU + u_distortion_params [ 1 ] * jU * jU ) ; vec2 jW = jV * 0.5 / ( 1.0 + u_distortion_params [ 0 ] + u_distortion_params [ 1 ] ) ; if ( length ( u_chromatic_aberration_coefs ) > 0.0 ) { vec2 jX = jW * ( 1.0 + u_chromatic_aberration_coefs [ 0 ] + jU * u_chromatic_aberration_coefs [ 1 ] ) + 0.5 ; vec2 jY = jW + 0.5 ; vec2 jZ = jW * ( 1.0 + u_chromatic_aberration_coefs [ 2 ] + jU * u_chromatic_aberration_coefs [ 3 ] ) + 0.5 ; if ( clamp ( jZ , 0.0 , 1.0 ) != jZ ) { GLSL_OUT_FRAG_COLOR = vec4 ( 0.0 ) ; } else { vec4 j_ = GLSL_TEXTURE ( jT , jY ) ; GLSL_OUT_FRAG_COLOR [ 0 ] = GLSL_TEXTURE ( jT , jX ) . x ; GLSL_OUT_FRAG_COLOR [ 1 ] = j_ . y ; GLSL_OUT_FRAG_COLOR [ 2 ] = GLSL_TEXTURE ( jT , jZ ) . z ; GLSL_OUT_FRAG_COLOR [ 3 ] = j_ . w ; } } else { jW += 0.5 ; if ( clamp ( jW , 0.0 , 1.0 ) != jW ) { GLSL_OUT_FRAG_COLOR = vec4 ( 0.0 ) ; } else { GLSL_OUT_FRAG_COLOR = GLSL_TEXTURE ( jT , jW ) ; } } }".split(" ")}]}}]},
{$:"txt",aa:["void","main","(",")","{"]},{$:"cond",da:[{$:"if",ga:["ANAGLYPH"],ha:{$:"grp",da:[{$:"txt",aa:"vec4 kb = GLSL_TEXTURE ( u_sampler_left , A ) ; vec4 kc = GLSL_TEXTURE ( u_sampler_right , A ) ; vec3 kd = vec3 ( kb [ 0 ] , kb [ 1 ] , kb [ 2 ] ) ; bG ( kd ) ; vec3 ke = vec3 ( kc [ 0 ] , kc [ 1 ] , kc [ 2 ] ) ; bG ( ke ) ; mat3 kf = mat3 ( 0.437 , - 0.062 , - 0.048 , 0.449 , - 0.062 , - 0.050 , 0.164 , - 0.024 , - 0.017 ) ; mat3 bz = mat3 ( - 0.011 , 0.377 , - 0.026 , - 0.032 , 0.761 , - 0.093 , - 0.007 , 0.009 , 1.234 ) ; vec3 aQ = clamp ( kf * kd , 0.0 , 1.0 ) + clamp ( bz * ke , 0.0 , 1.0 ) ; aW ( aQ ) ; GLSL_OUT_FRAG_COLOR = vec4 ( aQ , kb [ 3 ] + kc [ 3 ] ) ;".split(" ")}]}},
{$:"elif",ga:["SIDEBYSIDE"],ha:{$:"grp",da:[{$:"txt",aa:"if ( A [ 0 ] < 0.5 ) { vec2 ce = vec2 ( 2.0 * A [ 0 ] , A [ 1 ] ) ; GLSL_OUT_FRAG_COLOR = GLSL_TEXTURE ( u_sampler_left , ce ) ; } else { vec2 ce = vec2 ( 2.0 * ( A [ 0 ] - 0.5 ) , A [ 1 ] ) ; GLSL_OUT_FRAG_COLOR = GLSL_TEXTURE ( u_sampler_right , ce ) ; }".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"if ( u_enable_hmd_stereo != 0 ) { if ( abs ( u_distortion_params [ 0 ] ) > EPSILON || abs ( u_distortion_params [ 1 ] ) > EPSILON ) if ( A [ 0 ] < 0.5 ) { vec2 ce = vec2 ( 2.0 * A [ 0 ] , A [ 1 ] ) ; vec2 ao = vec2 ( 0.5 - ( u_distortion_params [ 3 ] - 0.5 ) / 2.0 , u_distortion_params [ 2 ] ) ; float di = 2.0 * u_distortion_params [ 3 ] * DISTOR_SCALE ; ka ( ce , ao , di , u_sampler_left ) ; } else { vec2 ce = vec2 ( 2.0 * ( A [ 0 ] - 0.5 ) , A [ 1 ] ) ; vec2 ao = vec2 ( 0.5 + ( u_distortion_params [ 3 ] - 0.5 ) / 2.0 , u_distortion_params [ 2 ] ) ; float di = 2.0 * u_distortion_params [ 3 ] * DISTOR_SCALE ; ka ( ce , ao , di , u_sampler_right ) ; } else if ( A [ 0 ] < 0.5 ) { vec2 ce = vec2 ( 2.0 * A [ 0 ] , A [ 1 ] ) ; GLSL_OUT_FRAG_COLOR = GLSL_TEXTURE ( u_sampler_left , ce ) ; } else { vec2 ce = vec2 ( 2.0 * ( A [ 0 ] - 0.5 ) , A [ 1 ] ) ; GLSL_OUT_FRAG_COLOR = GLSL_TEXTURE ( u_sampler_right , ce ) ; } } else { GLSL_OUT_FRAG_COLOR = GLSL_TEXTURE ( u_sampler_left , A ) ; }".split(" ")}]}}]},
{$:"txt",aa:["}"]}]};f["postprocessing/velocity.glslf"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"include",oa:"pack.glslf"},{$:"txt",aa:"uniform sampler2D u_depth ; uniform mat4 u_view_proj_inverse ; uniform mat4 u_view_proj_prev ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { float et = GLSL_TEXTURE ( u_depth , A ) . x ; vec4 kg = vec4 ( A * 2.0 - 1.0 , 2.0 * et - 1.0 , 1.0 ) ; vec4 cD = u_view_proj_inverse * kg ; vec4 kh = cD / cD . w ; vec4 ki = u_view_proj_prev * kh ; ki /= ki . w ; vec2 dp = ( kg . xy - ki . xy ) / 4.0 + 0.5 ; dp = clamp ( dp , 0.0 , 1.0 ) ; GLSL_OUT_FRAG_COLOR = eu ( dp ) ; }".split(" ")}]};
f["include/blending.glslf"]={$:"grp",da:[{$:"cond",da:[{$:"ifndef",ba:"BLENDING_GLSLF",ha:{$:"grp",da:[{$:"define",ba:"BLENDING_GLSLF",aa:[""]},{$:"txt",aa:"vec3 kj ( vec3 rgb ) { vec4 hM = vec4 ( _0_0 , - _1_0 / 3.0 , 2.0 / 3.0 , - _1_0 ) ; vec4 p = mix ( vec4 ( rgb . bg , hM . wz ) , vec4 ( rgb . gb , hM . xy ) , step ( rgb . b , rgb . g ) ) ; vec4 q = mix ( vec4 ( p . xyw , rgb . r ) , vec4 ( rgb . r , p . yzx ) , step ( p . x , rgb . r ) ) ; float dC = q . x - min ( q . w , q . y ) ; float iF = 1.0e-10 ; return vec3 ( abs ( q . z + ( q . w - q . y ) / ( 6.0 * dC + iF ) ) , dC / ( q . x + iF ) , q . x ) ; } vec3 kl ( vec3 kk ) { vec4 hM = vec4 ( _1_0 , 2.0 / 3.0 , _1_0 / 3.0 , 3.0 ) ; vec3 p = abs ( fract ( vec3 ( kk . r , kk . r , kk . r ) + hM . xyz ) * 6.0 - hM . www ) ; return kk . b * mix ( hM . xxx , clamp ( p - hM . xxx , _0_0 , _1_0 ) , kk . g ) ; } vec3 kp ( vec3 km , vec3 kn , float ko ) { return mix ( km , kn , ko ) ; } vec3 kq ( vec3 km , vec3 kn , float ko ) { return ko * km + kn ; } vec3 kr ( vec3 km , vec3 kn , float ko ) { return kn - ko * km ; } vec3 kt ( vec3 km , vec3 kn , float ko ) { float ks = _1_0 - ko ; return ( vec3 ( ks ) + ko * km ) * kn ; } vec3 ku ( vec3 km , vec3 kn , float ko ) { vec3 ks = vec3 ( _1_0 - ko ) ; return vec3 ( _1_0 ) - ( ks + ko * ( vec3 ( _1_0 ) - km ) ) * ( vec3 ( _1_0 ) - kn ) ; } vec3 kv ( vec3 km , vec3 kn , float ko ) { vec3 ks = vec3 ( _1_0 - ko ) ; return mix ( kn * ( ks + 2.0 * ko * km ) , vec3 ( _1_0 ) - ( ks + 2.0 * ko * ( vec3 ( _1_0 ) - km ) ) * ( vec3 ( _1_0 ) - kn ) , step ( 0.5 , kn ) ) ; } vec3 kw ( vec3 km , vec3 kn , float ko ) { return mix ( kn , abs ( km - kn ) , ko ) ; } vec3 kx ( vec3 km , vec3 kn , float ko ) { return mix ( kn , kn / ( km + step ( km , vec3 ( _0_0 ) ) ) , ko ) ; } vec3 ky ( vec3 km , vec3 kn , float ko ) { return mix ( kn , min ( km , kn ) , ko ) ; } vec3 kz ( vec3 km , vec3 kn , float ko ) { return max ( ko * km , kn ) ; } vec3 kD ( vec3 km , vec3 kn , float ko ) { vec3 kA = kj ( kn ) ; if ( kA . y != _0_0 ) { vec3 kB = kj ( km ) ; vec3 kC = kl ( vec3 ( kA . x , kB . yz ) ) ; return mix ( km , kC , ko ) ; } return km ; } vec3 kE ( vec3 km , vec3 kn , float ko ) { vec3 kA = kj ( km ) ; if ( kA . y != _0_0 ) { vec3 kB = kj ( kn ) ; return kl ( vec3 ( kA . x , mix ( kA . y , kB . y , ko ) , kA . z ) ) ; } return km ; } vec3 kF ( vec3 km , vec3 kn , float ko ) { vec3 kA = kj ( km ) ; vec3 kB = kj ( kn ) ; return kl ( vec3 ( kA . xy , mix ( kA . z , kB . z , ko ) ) ) ; } vec3 kG ( vec3 km , vec3 kn , float ko ) { vec3 kA = kj ( kn ) ; if ( kA . y != _0_0 ) { vec3 kB = kj ( km ) ; vec3 kC = kl ( vec3 ( kA . xy , kB . z ) ) ; return mix ( km , kC , ko ) ; } return km ; } vec3 kI ( vec3 km , vec3 kn , float ko ) { vec3 kH = vec3 ( _1_0 ) - ( vec3 ( _1_0 ) - kn ) * ( vec3 ( _1_0 ) - km ) ; return mix ( km , ( ( vec3 ( _1_0 ) - km ) * kn * km ) + km * kH , ko ) ; } vec3 kJ ( vec3 km , vec3 kn , float ko ) { return km + ko * ( 2.0 * kn - _1_0 ) ; } float kN ( float kK , float kL , float ko , float kM ) { float ks = _1_0 - kM ; return ( ks + ko * kK ) * kL ; } float kO ( float kK , float kL , float ko , float kM ) { float ks = _1_0 - kM ; return _1_0 - ( ks + ko * ( _1_0 - kK ) ) * ( _1_0 - kL ) ; } float kP ( float kK , float kL , float ko , float kM ) { float ks = _1_0 - kM ; return mix ( kL * ( ks + 2.0 * ko * kK ) , _1_0 - ( ks + 2.0 * ko * ( _1_0 - kK ) ) * ( _1_0 - kL ) , step ( 0.5 , kL ) ) ; }".split(" ")}]}}]}]};
f["include/caustics.glslf"]={$:"grp",da:[{$:"cond",da:[{$:"ifndef",ba:"CAUSTICS_GLSLF",ha:{$:"grp",da:[{$:"define",ba:"CAUSTICS_GLSLF",aa:[""]},{$:"var",ba:"SUN_NUM",aa:["0"]},{$:"var",ba:"CAUST_SCALE",aa:["0.25"]},{$:"var",ba:"CAUST_SPEED",aa:["vec2","(","0.0",")"]},{$:"var",ba:"CAUST_BRIGHT",aa:["0.5"]},{$:"include",oa:"procedural.glslf"},{$:"include",oa:"math.glslv"},{$:"define",ba:"CAUSTICS_VIEW_DISTANCE",aa:["100.0"]},{$:"txt",aa:"void bV ( inout vec3 aQ , float kQ , float fy , vec4 bU , vec3 U , vec3 kR , vec3 kS , vec4 kT , vec3 bt , float bS ) { if ( bS > CAUSTICS_VIEW_DISTANCE ) return ; vec3 kU = bt + U ; kU . xz = 10.0 * sin ( 0.1 * kU . xz ) ; vec3 kW = T ( kV ( kT ) , kU ) ; vec2 ce = kW . xz ; vec3 kX = kR ; float kY = max ( dot ( U , kX ) , 0.0 ) ; float kZ = 0.025 ; vec2 k_ = CAUST_SPEED * fy ; ce . s += 0.25 * sin ( dot ( bt + fy , vec3 ( 1.0 ) ) ) ; ce . t += 0.35 * ( - sin ( dot ( bt - fy , vec3 ( - 0.7 ) ) ) ) ; ce . st += 0.15 * cos ( 4.0 * kQ - k_ . x ) + 1.5 * sin ( kQ - 0.3 * k_ . y ) ; float hK = CAUST_SCALE * ( 1.0 + max ( 0.1 * kQ , 0.0 ) ) ; vec3 lb = la ( ( ce / hK ) , kZ ) ; lb *= CAUST_BRIGHT ; lb *= lb ; float lc = min ( 0.25 * kQ , - kQ ) + 1.0 ; lc = max ( lc , 0.0 ) ; float ld = bU [ SUN_NUM ] * kY ; float le = max ( sign ( kQ ) , 0.0 ) ; ld = ld + max ( 0.5 * sign ( - U . y ) * le , 0.0 ) ; ld = min ( ld , 1.0 ) ; aQ += kS * lb * lc * ld ; }".split(" ")}]}}]}]};
f["include/color_util.glslf"]={$:"grp",da:[{$:"cond",da:[{$:"ifndef",ba:"COLOR_UTIL_GLSLF",ha:{$:"grp",da:[{$:"define",ba:"COLOR_UTIL_GLSLF",aa:[""]},{$:"define",ba:"PREMULTIPLY_ALPHA",aa:["1"]},{$:"var",ba:"SRGB",aa:["SRGB_NONE"]},{$:"include",oa:"std.glsl"},{$:"txt",aa:"void bG ( inout float aQ ) {".split(" ")},{$:"cond",da:[{$:"if",ga:["SRGB","SRGB_SIMPLE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"aQ = pow ( aQ , 2.2 ) ;".split(" ")}]}},{$:"elif",ga:["SRGB","SRGB_PROPER",{$:"equal_expr",
ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"if ( aQ < 0.04045 ) aQ = aQ / 12.92 ; else aQ = pow ( aQ * ( 1.0 / 1.055 ) + 0.0521327 , 2.4 ) ;".split(" ")}]}}]},{$:"txt",aa:"} void aW ( inout float aQ ) {".split(" ")},{$:"cond",da:[{$:"if",ga:["SRGB","SRGB_SIMPLE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"aQ = pow ( aQ , 1.0 / 2.2 ) ;".split(" ")}]}},{$:"elif",ga:["SRGB","SRGB_PROPER",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"if ( aQ < 0.0031308 ) aQ = aQ * 12.92 ; else aQ = 1.055 * pow ( aQ , 1.0 / 2.4 ) - 0.055 ;".split(" ")}]}}]},
{$:"txt",aa:"} void bG ( inout vec3 aQ ) {".split(" ")},{$:"cond",da:[{$:"if",ga:["SRGB","SRGB_SIMPLE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"aQ = pow ( aQ , vec3 ( 2.2 ) ) ;".split(" ")}]}},{$:"elif",ga:["SRGB","SRGB_PROPER",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"bG ( aQ . r ) ; bG ( aQ . g ) ; bG ( aQ . b ) ;".split(" ")}]}}]},{$:"txt",aa:"} void aW ( inout vec3 aQ ) {".split(" ")},{$:"cond",da:[{$:"if",ga:["SRGB","SRGB_SIMPLE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",
aa:"aQ = pow ( aQ , vec3 ( 1.0 / 2.2 ) ) ;".split(" ")}]}},{$:"elif",ga:["SRGB","SRGB_PROPER",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"aW ( aQ . r ) ; aW ( aQ . g ) ; aW ( aQ . b ) ;".split(" ")}]}}]},{$:"txt",aa:"} void aX ( inout vec3 aQ , in float L ) {".split(" ")},{$:"cond",da:[{$:"if",ga:["PREMULTIPLY_ALPHA"],ha:{$:"grp",da:[{$:"txt",aa:"aQ = aQ * L ;".split(" ")}]}}]},{$:"txt",aa:"} float gj ( vec4 aQ ) { vec3 lf = vec3 ( 0.299 , 0.587 , 0.114 ) ; float lg = dot ( aQ . rgb , lf ) ; return lg ; }".split(" ")}]}}]}]};
f["include/coverage.glslf"]={$:"grp",da:[{$:"cond",da:[{$:"ifndef",ba:"COVERAGE_GLSLF",ha:{$:"grp",da:[{$:"define",ba:"COVERAGE_GLSLF",aa:[""]},{$:"include",oa:"procedural.glslf"},{$:"txt",aa:"const float lh = 1000.0 ; bool C ( float L , float li ) { if ( li < 0.0 ) L = 1.0 - L ; float lj = floor ( L * lh ) ; float ll = floor ( lk ( gl_FragCoord . xy ) * lh ) ; if ( li > 0.0 ) return ll < lj ; else return ll >= lj ; }".split(" ")}]}}]}]};f["include/depth_fetch.glslf"]={$:"grp",da:[{$:"cond",da:[{$:"ifndef",
ba:"DEPTH_FETCH_GLSLF",ha:{$:"grp",da:[{$:"define",ba:"DEPTH_FETCH_GLSLF",aa:[""]},{$:"include",oa:"std.glsl"},{$:"var",ba:"SHADOW_USAGE",aa:["NO_SHADOWS"]},{$:"var",ba:"CAMERA_TYPE",aa:["CAM_TYPE_PERSP"]},{$:"cond",da:[{$:"if",ga:["SHADOW_USAGE","SHADOW_CASTING",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"float es ( in float lm , in vec2 ln ) { float dG = ln . x ; float lo = ln . y ;".split(" ")},{$:"cond",da:[{$:"if",ga:["CAMERA_TYPE","CAM_TYPE_PERSP",{$:"equal_expr",ia:2}],ha:{$:"grp",
da:[{$:"txt",aa:"return lo * ( 1.0 - dG / lm ) / ( lo - dG ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"return ( lm - dG ) / ( lo - dG ) ;".split(" ")}]}}]},{$:"txt",aa:["}"]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"float gC ( in sampler2D lp , in vec2 f_ , in vec2 ln ) { float et = GLSL_TEXTURE ( lp , f_ ) . r ; float dG = ln . x ; float lo = ln . y ; float lm = 2.0 * dG / ( dG + lo - ( 2.0 * et - 1.0 ) * ( lo - dG ) ) ; return lm ; }".split(" ")}]}}]}]}}]}]};f["include/dynamic_grass.glslv"]=
{$:"grp",da:[{$:"cond",da:[{$:"ifndef",ba:"DYNAMIC_GRASS_GLSLV",ha:{$:"grp",da:[{$:"define",ba:"DYNAMIC_GRASS_GLSLV",aa:[""]},{$:"var",ba:"PRECISION",aa:["highp"]},{$:"var",ba:"DYNAMIC_GRASS",aa:["0"]},{$:"var",ba:"BILLBOARD",aa:["0"]},{$:"var",ba:"GRASS_TEXTURE_SIZE",aa:["1024.0"]},{$:"cond",da:[{$:"if",ga:["DYNAMIC_GRASS"],ha:{$:"grp",da:[{$:"include",oa:"math.glslv"},{$:"include",oa:"to_world.glslv"},{$:"txt",aa:"vec2 lt ( vec3 O , float lq , vec2 lr ) { vec2 ls = vec2 ( ( O . x - lr . x ) / lq , ( O . y - lr . y ) / lq ) ; return fract ( ls ) ; } vec2 lu ( vec2 gX , float lq , vec2 lr ) { return vec2 ( gX . x * lq , gX . y * lq ) + lr ; } au lv ( ) { return au ( vec3 ( - 10000.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) ) ; }".split(" ")},
{$:"cond",da:[{$:"if",ga:["GLSL3"],ha:{$:"grp",da:[{$:"txt",aa:"vec4 lF ( sampler2D lw , vec2 lx ) { float ly = 1.0 / GRASS_TEXTURE_SIZE ; vec4 lz = GLSL_TEXTURE ( lw , lx ) ; vec4 lA = GLSL_TEXTURE ( lw , lx + vec2 ( ly , 0.0 ) ) ; vec4 lB = GLSL_TEXTURE ( lw , lx + vec2 ( 0.0 , ly ) ) ; vec4 lC = GLSL_TEXTURE ( lw , lx + vec2 ( ly , ly ) ) ; float a = fract ( lx . x * GRASS_TEXTURE_SIZE ) ; vec4 lD = mix ( lz , lA , a ) ; vec4 lE = mix ( lB , lC , a ) ; float b = fract ( lx . y * GRASS_TEXTURE_SIZE ) ; return mix ( lD , lE , b ) ; }".split(" ")}]}}]},
{$:"txt",aa:"au be ( vec3 O , vec3 V , vec3 lG , vec3 W , vec3 U , vec3 ao , PRECISION sampler2D lH , sampler2D lI , vec3 lJ , float lK , vec3 lL , vec4 lM , mat3 N , mat3 Z ) { vec3 lN = T ( lM , vec3 ( 0.0 , 0.0 , - 1.0 ) ) ; float lO = - lN . x ; float lP = lN . y ; vec2 lr = vec2 ( lL . x - lK * ( 1.0 + lO ) / 2.0 , lL . y - lK * ( 1.0 - lP ) / 2.0 ) ; vec2 lQ = lt ( ao , lK , lr ) ; float lR = lK / 2.0 ; vec2 lS = abs ( lu ( lQ - vec2 ( 0.5 ) , lK , vec2 ( 0.0 ) ) ) ; float lT = lR * ( 1.0 + sqrt ( 2.0 ) ) / 2.0 ; if ( length ( lS ) > lT ) return lv ( ) ; float lU = lK / lJ . z ; vec2 lV = ( lQ - vec2 ( 0.5 ) ) * lU + vec2 ( 0.5 ) ; vec3 lW = lN * ( lK / lJ . z - 1.0 ) / 2.0 ; lV . x += lW . x ; lV . y += lW . y ; vec4 lX = GLSL_TEXTURE ( lI , lV ) ; float hK = lX . r ; if ( hK < u_scale_threshold ) return lv ( ) ; float lY = lJ . y - lJ . x ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["GLSL3"],ha:{$:"grp",da:[{$:"txt",aa:"float cn = lJ . y - ( lF ( lH , lV ) ) . r * lY ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"float cn = lJ . y - ( GLSL_TEXTURE ( lH , lV ) ) . r * lY ;".split(" ")}]}}]},{$:"txt",aa:"vec2 lZ = O . xy - ao . xy ; ao . xy = lu ( lQ , lK , lr ) ; ao . z = cn ; O . xy = ao . xy + lZ ; O . z *= hK ; O . z += cn ; vec3 aQ = lX . gba ;".split(" ")},{$:"cond",da:[{$:"if",ga:["BILLBOARD"],ha:{$:"grp",da:[{$:"txt",aa:"O -= ao ; mat3 l_ = as ( lL , ao , N , Z ) ; au aw = av ( O , ao , V , lG , W , U , l_ ) ; aw . ao = ao ; aw . aQ = aQ ; return ma ( aw ) ;".split(" ")}]}},
{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"return ma ( au ( O , ao , V , lG , W , U , aQ ) ) ;".split(" ")}]}}]},{$:"txt",aa:["}"]}]}}]}]}}]}]};f["include/environment.glslf"]={$:"grp",da:[{$:"cond",da:[{$:"ifndef",ba:"ENVIRONMENT_GLSLF",ha:{$:"grp",da:[{$:"define",ba:"ENVIRONMENT_GLSLF",aa:[""]},{$:"var",ba:"USE_ENVIRONMENT_LIGHT",aa:["0"]},{$:"var",ba:"SKY_COLOR",aa:["0"]},{$:"var",ba:"SKY_TEXTURE",aa:["0"]},{$:"txt",aa:"vec3 cE ( vec3 U ) {".split(" ")},{$:"cond",da:[{$:"if",ga:["USE_ENVIRONMENT_LIGHT"],
ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["SKY_TEXTURE"],ha:{$:"grp",da:[{$:"txt",aa:"return GLSL_TEXTURE_CUBE ( u_sky_texture , U ) . rgb ;".split(" ")}]}},{$:"elif",ga:["SKY_COLOR"],ha:{$:"grp",da:[{$:"txt",aa:"float mb = 0.5 * U . z + 0.5 ; return mix ( u_horizon_color , u_zenith_color , mb ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"return vec3 ( 1.0 ) ;".split(" ")}]}}]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"return vec3 ( 0.0 ) ;".split(" ")}]}}]},{$:"txt",aa:["}"]}]}}]}]};
f["include/fog.glslf"]={$:"grp",da:[{$:"cond",da:[{$:"ifndef",ba:"FOG_GLSLF",ha:{$:"grp",da:[{$:"define",ba:"FOG_GLSLF",aa:[""]},{$:"var",ba:"USE_FOG",aa:["0"]},{$:"var",ba:"WATER_EFFECTS",aa:["0"]},{$:"var",ba:"FOG_TYPE",aa:["QUADRATIC"]},{$:"var",ba:"PROCEDURAL_FOG",aa:["0"]},{$:"include",oa:"std.glsl"},{$:"include",oa:"color_util.glslf"},{$:"cond",da:[{$:"if",ga:["USE_FOG"],ha:{$:"grp",da:[{$:"txt",aa:"void mg ( inout vec3 aQ , in float mc , in float cn , in vec4 md ) { float me = clamp ( ( mc - u_fog_params . z ) / u_fog_params . y , 0.0 , 1.0 ) ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["FOG_TYPE","QUADRATIC",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["me","*=","me",";"]}]}},{$:"elif",ga:["FOG_TYPE","LINEAR",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[]}},{$:"elif",ga:["FOG_TYPE","INVERSE_QUADRATIC",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"me = sqrt ( me ) ;".split(" ")}]}}]},{$:"txt",aa:"if ( u_fog_params . w > 0.0 ) { if ( cn > u_fog_params . w ) me = 0.0 ; else { float mf = ( u_fog_params . w - max ( cn , 0.0 ) ) / u_fog_params . w ; me *= mf * mf ; } } md . a = 1.0 - ( 1.0 - me ) * ( 1.0 - u_fog_params . x ) ; aQ = mix ( aQ , md . rgb , md . a ) ; }".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["PROCEDURAL_FOG"],ha:{$:"grp",da:[{$:"txt",aa:"vec3 ml ( in mat4 mh , in vec3 D ) { vec3 mi = mix ( mh [ 0 ] . rgb , mh [ 1 ] . rgb , ( D . x + 1.0 ) / 2.0 ) ; vec3 mj = mix ( mh [ 2 ] . rgb , mh [ 3 ] . rgb , ( D . y + 1.0 ) / 2.0 ) ; vec3 mk = vec3 ( mh [ 0 ] . a , mh [ 1 ] . a , mh [ 2 ] . a ) ; vec3 aQ = mix ( mi , mj , abs ( D . y ) ) ; aQ = mix ( aQ , mk , abs ( D . z ) ) ; bG ( aQ ) ; return aQ ; }".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["WATER_EFFECTS"],ha:{$:"grp",
da:[{$:"txt",aa:"void mn ( inout float mm ) { mm -= 0.5 ; mm = 4.0 * ( mm * mm * mm ) + 0.5 ; } void mt ( inout vec3 aQ , in float mc , in vec3 D , in float eG , in vec4 mo , in float fp ) { float mp = max ( D . z , 0.0 ) ; float mq = max ( mc - max ( eG / mp , 0.0 ) , 0.0 ) ; float mr = mo . w * mq ; vec3 eH = vec3 ( 0.0 , 0.02 , 0.05 ) ; vec3 ms = mo . rgb ; mr = min ( mr , 1.0 ) ; mn ( mr ) ; mr *= clamp ( 2.0 - fp , 0.0 , 1.0 ) ; vec3 eI = mix ( ms , eH , min ( mp , 1.0 ) ) ; eG = clamp ( - eG * 0.03 , 0.0 , 0.8 ) ; eI *= 1.0 - eG ; aQ = mix ( aQ , eI , mr ) ; }".split(" ")}]}}]},
{$:"txt",aa:"void bW ( inout vec3 aQ , float mc , vec3 D , float bT ) {".split(" ")},{$:"cond",da:[{$:"if",ga:["USE_FOG"],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["PROCEDURAL_FOG"],ha:{$:"grp",da:[{$:"txt",aa:"vec3 mh = ml ( u_cube_fog , D ) ; vec4 eI = vec4 ( mh , u_fog_color_density . a ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["vec4","eI","=","u_fog_color_density",";"]}]}}]},{$:"txt",aa:"mg ( aQ , mc , h . z , eI ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["WATER_EFFECTS"],
ha:{$:"grp",da:[{$:"txt",aa:"mt ( aQ , mc , D , u_cam_water_depth , u_underwater_fog_color_density , bT ) ;".split(" ")}]}}]},{$:"txt",aa:["}"]}]}}]}]};f["include/fxaa.glslf"]={$:"grp",da:[{$:"cond",da:[{$:"ifndef",ba:"FXAA_GLSLF",ha:{$:"grp",da:[{$:"define",ba:"FXAA_GLSLF",aa:[""]},{$:"var",ba:"FXAA_BLEND4WEB",aa:["1"]},{$:"var",ba:"FXAA_QUALITY_P12",aa:["0.0"]},{$:"cond",da:[{$:"ifndef",ba:"FXAA_PS3",ha:{$:"grp",da:[{$:"define",ba:"FXAA_PS3",aa:["0"]}]}}]},{$:"cond",da:[{$:"ifndef",ba:"FXAA_360",
ha:{$:"grp",da:[{$:"define",ba:"FXAA_360",aa:["0"]}]}}]},{$:"cond",da:[{$:"ifndef",ba:"FXAA_360_OPT",ha:{$:"grp",da:[{$:"define",ba:"FXAA_360_OPT",aa:["0"]}]}}]},{$:"cond",da:[{$:"ifndef",ba:"FXAA_PC",ha:{$:"grp",da:[{$:"define",ba:"FXAA_PC",aa:["0"]}]}}]},{$:"cond",da:[{$:"ifndef",ba:"FXAA_PC_CONSOLE",ha:{$:"grp",da:[{$:"define",ba:"FXAA_PC_CONSOLE",aa:["0"]}]}}]},{$:"cond",da:[{$:"ifndef",ba:"FXAA_GLSL_120",ha:{$:"grp",da:[{$:"define",ba:"FXAA_GLSL_120",aa:["0"]}]}}]},{$:"cond",da:[{$:"ifndef",
ba:"FXAA_GLSL_130",ha:{$:"grp",da:[{$:"define",ba:"FXAA_GLSL_130",aa:["0"]}]}}]},{$:"cond",da:[{$:"ifndef",ba:"FXAA_HLSL_3",ha:{$:"grp",da:[{$:"define",ba:"FXAA_HLSL_3",aa:["0"]}]}}]},{$:"cond",da:[{$:"ifndef",ba:"FXAA_HLSL_4",ha:{$:"grp",da:[{$:"define",ba:"FXAA_HLSL_4",aa:["0"]}]}}]},{$:"cond",da:[{$:"ifndef",ba:"FXAA_HLSL_5",ha:{$:"grp",da:[{$:"define",ba:"FXAA_HLSL_5",aa:["0"]}]}}]},{$:"cond",da:[{$:"ifndef",ba:"FXAA_GREEN_AS_LUMA",ha:{$:"grp",da:[{$:"define",ba:"FXAA_GREEN_AS_LUMA",aa:["0"]}]}}]},
{$:"cond",da:[{$:"ifndef",ba:"FXAA_EARLY_EXIT",ha:{$:"grp",da:[{$:"define",ba:"FXAA_EARLY_EXIT",aa:["1"]}]}}]},{$:"cond",da:[{$:"ifndef",ba:"FXAA_DISCARD",ha:{$:"grp",da:[{$:"define",ba:"FXAA_DISCARD",aa:["0"]}]}}]},{$:"cond",da:[{$:"ifndef",ba:"FXAA_FAST_PIXEL_OFFSET",ha:{$:"grp",da:[{$:"cond",da:[{$:"ifdef",ba:"GL_EXT_gpu_shader4",ha:{$:"grp",da:[{$:"define",ba:"FXAA_FAST_PIXEL_OFFSET",aa:["1"]}]}}]},{$:"cond",da:[{$:"ifdef",ba:"GL_NV_gpu_shader5",ha:{$:"grp",da:[{$:"define",ba:"FXAA_FAST_PIXEL_OFFSET",
aa:["1"]}]}}]},{$:"cond",da:[{$:"ifdef",ba:"GL_ARB_gpu_shader5",ha:{$:"grp",da:[{$:"define",ba:"FXAA_FAST_PIXEL_OFFSET",aa:["1"]}]}}]},{$:"cond",da:[{$:"ifndef",ba:"FXAA_FAST_PIXEL_OFFSET",ha:{$:"grp",da:[{$:"define",ba:"FXAA_FAST_PIXEL_OFFSET",aa:["0"]}]}}]}]}}]},{$:"cond",da:[{$:"ifndef",ba:"FXAA_GATHER4_ALPHA",ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["FXAA_HLSL_5",1,{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"define",ba:"FXAA_GATHER4_ALPHA",aa:["1"]}]}}]},{$:"cond",da:[{$:"ifdef",ba:"GL_ARB_gpu_shader5",
ha:{$:"grp",da:[{$:"define",ba:"FXAA_GATHER4_ALPHA",aa:["1"]}]}}]},{$:"cond",da:[{$:"ifdef",ba:"GL_NV_gpu_shader5",ha:{$:"grp",da:[{$:"define",ba:"FXAA_GATHER4_ALPHA",aa:["1"]}]}}]},{$:"cond",da:[{$:"ifndef",ba:"FXAA_GATHER4_ALPHA",ha:{$:"grp",da:[{$:"define",ba:"FXAA_GATHER4_ALPHA",aa:["0"]}]}}]}]}}]},{$:"cond",da:[{$:"ifndef",ba:"FXAA_CONSOLE_PS3_EDGE_SHARPNESS",ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:[1],ha:{$:"grp",da:[{$:"define",ba:"FXAA_CONSOLE_PS3_EDGE_SHARPNESS",aa:["8.0"]}]}}]},{$:"cond",
da:[{$:"if",ga:[0],ha:{$:"grp",da:[{$:"define",ba:"FXAA_CONSOLE_PS3_EDGE_SHARPNESS",aa:["4.0"]}]}}]},{$:"cond",da:[{$:"if",ga:[0],ha:{$:"grp",da:[{$:"define",ba:"FXAA_CONSOLE_PS3_EDGE_SHARPNESS",aa:["2.0"]}]}}]}]}}]},{$:"cond",da:[{$:"ifndef",ba:"FXAA_CONSOLE_PS3_EDGE_THRESHOLD",ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:[1],ha:{$:"grp",da:[{$:"define",ba:"FXAA_CONSOLE_PS3_EDGE_THRESHOLD",aa:["0.125"]}]}},{$:"else",ha:{$:"grp",da:[{$:"define",ba:"FXAA_CONSOLE_PS3_EDGE_THRESHOLD",aa:["0.25"]}]}}]}]}}]},
{$:"cond",da:[{$:"ifndef",ba:"FXAA_QUALITY_PRESET",ha:{$:"grp",da:[{$:"define",ba:"FXAA_QUALITY_PRESET",aa:["12"]}]}}]},{$:"cond",da:[{$:"if",ga:["FXAA_QUALITY_PRESET",10,{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"define",ba:"FXAA_QUALITY_PS",aa:["3"]},{$:"define",ba:"FXAA_QUALITY_P0",aa:["1.5"]},{$:"define",ba:"FXAA_QUALITY_P1",aa:["3.0"]},{$:"define",ba:"FXAA_QUALITY_P2",aa:["12.0"]}]}}]},{$:"cond",da:[{$:"if",ga:["FXAA_QUALITY_PRESET",11,{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"define",ba:"FXAA_QUALITY_PS",
aa:["4"]},{$:"define",ba:"FXAA_QUALITY_P0",aa:["1.0"]},{$:"define",ba:"FXAA_QUALITY_P1",aa:["1.5"]},{$:"define",ba:"FXAA_QUALITY_P2",aa:["3.0"]},{$:"define",ba:"FXAA_QUALITY_P3",aa:["12.0"]}]}}]},{$:"cond",da:[{$:"if",ga:["FXAA_QUALITY_PRESET",12,{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"define",ba:"FXAA_QUALITY_PS",aa:["5"]},{$:"define",ba:"FXAA_QUALITY_P0",aa:["1.0"]},{$:"define",ba:"FXAA_QUALITY_P1",aa:["1.5"]},{$:"define",ba:"FXAA_QUALITY_P2",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P3",aa:["4.0"]},
{$:"define",ba:"FXAA_QUALITY_P4",aa:["12.0"]}]}}]},{$:"cond",da:[{$:"if",ga:["FXAA_QUALITY_PRESET",13,{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"define",ba:"FXAA_QUALITY_PS",aa:["6"]},{$:"define",ba:"FXAA_QUALITY_P0",aa:["1.0"]},{$:"define",ba:"FXAA_QUALITY_P1",aa:["1.5"]},{$:"define",ba:"FXAA_QUALITY_P2",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P3",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P4",aa:["4.0"]},{$:"define",ba:"FXAA_QUALITY_P5",aa:["12.0"]}]}}]},{$:"cond",da:[{$:"if",ga:["FXAA_QUALITY_PRESET",
14,{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"define",ba:"FXAA_QUALITY_PS",aa:["7"]},{$:"define",ba:"FXAA_QUALITY_P0",aa:["1.0"]},{$:"define",ba:"FXAA_QUALITY_P1",aa:["1.5"]},{$:"define",ba:"FXAA_QUALITY_P2",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P3",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P4",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P5",aa:["4.0"]},{$:"define",ba:"FXAA_QUALITY_P6",aa:["12.0"]}]}}]},{$:"cond",da:[{$:"if",ga:["FXAA_QUALITY_PRESET",15,{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"define",
ba:"FXAA_QUALITY_PS",aa:["8"]},{$:"define",ba:"FXAA_QUALITY_P0",aa:["1.0"]},{$:"define",ba:"FXAA_QUALITY_P1",aa:["1.5"]},{$:"define",ba:"FXAA_QUALITY_P2",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P3",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P4",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P5",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P6",aa:["4.0"]},{$:"define",ba:"FXAA_QUALITY_P7",aa:["12.0"]}]}}]},{$:"cond",da:[{$:"if",ga:["FXAA_QUALITY_PRESET",20,{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"define",ba:"FXAA_QUALITY_PS",
aa:["3"]},{$:"define",ba:"FXAA_QUALITY_P0",aa:["1.5"]},{$:"define",ba:"FXAA_QUALITY_P1",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P2",aa:["8.0"]}]}}]},{$:"cond",da:[{$:"if",ga:["FXAA_QUALITY_PRESET",21,{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"define",ba:"FXAA_QUALITY_PS",aa:["4"]},{$:"define",ba:"FXAA_QUALITY_P0",aa:["1.0"]},{$:"define",ba:"FXAA_QUALITY_P1",aa:["1.5"]},{$:"define",ba:"FXAA_QUALITY_P2",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P3",aa:["8.0"]}]}}]},{$:"cond",da:[{$:"if",ga:["FXAA_QUALITY_PRESET",
22,{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"define",ba:"FXAA_QUALITY_PS",aa:["5"]},{$:"define",ba:"FXAA_QUALITY_P0",aa:["1.0"]},{$:"define",ba:"FXAA_QUALITY_P1",aa:["1.5"]},{$:"define",ba:"FXAA_QUALITY_P2",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P3",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P4",aa:["8.0"]}]}}]},{$:"cond",da:[{$:"if",ga:["FXAA_QUALITY_PRESET",23,{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"define",ba:"FXAA_QUALITY_PS",aa:["6"]},{$:"define",ba:"FXAA_QUALITY_P0",aa:["1.0"]},{$:"define",
ba:"FXAA_QUALITY_P1",aa:["1.5"]},{$:"define",ba:"FXAA_QUALITY_P2",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P3",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P4",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P5",aa:["8.0"]}]}}]},{$:"cond",da:[{$:"if",ga:["FXAA_QUALITY_PRESET",24,{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"define",ba:"FXAA_QUALITY_PS",aa:["7"]},{$:"define",ba:"FXAA_QUALITY_P0",aa:["1.0"]},{$:"define",ba:"FXAA_QUALITY_P1",aa:["1.5"]},{$:"define",ba:"FXAA_QUALITY_P2",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P3",
aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P4",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P5",aa:["3.0"]},{$:"define",ba:"FXAA_QUALITY_P6",aa:["8.0"]}]}}]},{$:"cond",da:[{$:"if",ga:["FXAA_QUALITY_PRESET",25,{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"define",ba:"FXAA_QUALITY_PS",aa:["8"]},{$:"define",ba:"FXAA_QUALITY_P0",aa:["1.0"]},{$:"define",ba:"FXAA_QUALITY_P1",aa:["1.5"]},{$:"define",ba:"FXAA_QUALITY_P2",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P3",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P4",aa:["2.0"]},
{$:"define",ba:"FXAA_QUALITY_P5",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P6",aa:["4.0"]},{$:"define",ba:"FXAA_QUALITY_P7",aa:["8.0"]}]}}]},{$:"cond",da:[{$:"if",ga:["FXAA_QUALITY_PRESET",26,{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"define",ba:"FXAA_QUALITY_PS",aa:["9"]},{$:"define",ba:"FXAA_QUALITY_P0",aa:["1.0"]},{$:"define",ba:"FXAA_QUALITY_P1",aa:["1.5"]},{$:"define",ba:"FXAA_QUALITY_P2",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P3",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P4",aa:["2.0"]},{$:"define",
ba:"FXAA_QUALITY_P5",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P6",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P7",aa:["4.0"]},{$:"define",ba:"FXAA_QUALITY_P8",aa:["8.0"]}]}}]},{$:"cond",da:[{$:"if",ga:["FXAA_QUALITY_PRESET",27,{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"define",ba:"FXAA_QUALITY_PS",aa:["10"]},{$:"define",ba:"FXAA_QUALITY_P0",aa:["1.0"]},{$:"define",ba:"FXAA_QUALITY_P1",aa:["1.5"]},{$:"define",ba:"FXAA_QUALITY_P2",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P3",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P4",
aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P5",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P6",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P7",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P8",aa:["4.0"]},{$:"define",ba:"FXAA_QUALITY_P9",aa:["8.0"]}]}}]},{$:"cond",da:[{$:"if",ga:["FXAA_QUALITY_PRESET",28,{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"define",ba:"FXAA_QUALITY_PS",aa:["11"]},{$:"define",ba:"FXAA_QUALITY_P0",aa:["1.0"]},{$:"define",ba:"FXAA_QUALITY_P1",aa:["1.5"]},{$:"define",ba:"FXAA_QUALITY_P2",aa:["2.0"]},
{$:"define",ba:"FXAA_QUALITY_P3",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P4",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P5",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P6",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P7",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P8",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P9",aa:["4.0"]},{$:"define",ba:"FXAA_QUALITY_P10",aa:["8.0"]}]}}]},{$:"cond",da:[{$:"if",ga:["FXAA_QUALITY_PRESET",29,{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"define",ba:"FXAA_QUALITY_PS",aa:["12"]},{$:"define",
ba:"FXAA_QUALITY_P0",aa:["1.0"]},{$:"define",ba:"FXAA_QUALITY_P1",aa:["1.5"]},{$:"define",ba:"FXAA_QUALITY_P2",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P3",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P4",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P5",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P6",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P7",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P8",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P9",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P10",aa:["4.0"]},{$:"define",ba:"FXAA_QUALITY_P11",
aa:["8.0"]}]}}]},{$:"cond",da:[{$:"if",ga:["FXAA_QUALITY_PRESET",39,{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"define",ba:"FXAA_QUALITY_PS",aa:["12"]},{$:"define",ba:"FXAA_QUALITY_P0",aa:["1.0"]},{$:"define",ba:"FXAA_QUALITY_P1",aa:["1.0"]},{$:"define",ba:"FXAA_QUALITY_P2",aa:["1.0"]},{$:"define",ba:"FXAA_QUALITY_P3",aa:["1.0"]},{$:"define",ba:"FXAA_QUALITY_P4",aa:["1.0"]},{$:"define",ba:"FXAA_QUALITY_P5",aa:["1.5"]},{$:"define",ba:"FXAA_QUALITY_P6",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P7",aa:["2.0"]},
{$:"define",ba:"FXAA_QUALITY_P8",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P9",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P10",aa:["4.0"]},{$:"define",ba:"FXAA_QUALITY_P11",aa:["8.0"]}]}}]},{$:"include",oa:"color_util.glslf"},{$:"txt",aa:"float mu ( float x ) { return clamp ( x , 0.0 , 1.0 ) ; }".split(" ")},{$:"cond",da:[{$:"if",ga:["FXAA_BLEND4WEB",1,{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec4 mv ( sampler2D t , vec2 p ) { return GLSL_TEXTURE ( t , p ) ; } vec4 mx ( sampler2D t , vec2 p , vec2 mw , vec2 r ) { return GLSL_TEXTURE ( t , p + ( mw * r ) ) ; }".split(" ")}]}}]},
{$:"txt",aa:"vec4 gz ( vec2 fr , sampler2D ie , vec2 my , float mz , float mA , float mB ) { vec2 mC ; mC . x = fr . x ; mC . y = fr . y ;".split(" ")},{$:"cond",da:[{$:"if",ga:["FXAA_GATHER4_ALPHA",1,{$:"equal_expr",ia:2}],ha:{$:"grp",da:[]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec4 mD = mv ( ie , mC ) ; float gk = gj ( mD ) ; float mE = gj ( mx ( ie , mC , vec2 ( 0 , 1 ) , my . xy ) ) ; float mF = gj ( mx ( ie , mC , vec2 ( 1 , 0 ) , my . xy ) ) ; float mG = gj ( mx ( ie , mC , vec2 ( 0 , - 1 ) , my . xy ) ) ; float mH = gj ( mx ( ie , mC , vec2 ( - 1 , 0 ) , my . xy ) ) ;".split(" ")}]}}]},
{$:"txt",aa:"float mI = max ( mE , gk ) ; float mJ = min ( mE , gk ) ; float mK = max ( mF , mI ) ; float mL = min ( mF , mJ ) ; float mM = max ( mG , mH ) ; float mN = min ( mG , mH ) ; float mO = max ( mM , mK ) ; float mP = min ( mN , mL ) ; float mQ = mO * mA ; float mR = mO - mP ; float mS = max ( mB , mQ ) ; bool mT = mR < mS ; if ( mT ) return mD ;".split(" ")},{$:"cond",da:[{$:"if",ga:["FXAA_GATHER4_ALPHA",0,{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"float gl = gj ( mx ( ie , mC , vec2 ( - 1 , - 1 ) , my . xy ) ) ; float go = gj ( mx ( ie , mC , vec2 ( 1 , 1 ) , my . xy ) ) ; float gm = gj ( mx ( ie , mC , vec2 ( 1 , - 1 ) , my . xy ) ) ; float gn = gj ( mx ( ie , mC , vec2 ( - 1 , 1 ) , my . xy ) ) ;".split(" ")}]}},
{$:"else",ha:{$:"grp",da:[]}}]},{$:"txt",aa:"float mU = mG + mE ; float mV = mH + mF ; float mW = 1.0 / mR ; float mX = mU + mV ; float mY = ( - 2.0 * gk ) + mU ; float mZ = ( - 2.0 * gk ) + mV ; float m_ = gm + go ; float na = gl + gm ; float nb = ( - 2.0 * mF ) + m_ ; float nc = ( - 2.0 * mG ) + na ; float nd = gl + gn ; float ne = gn + go ; float nf = ( abs ( mY ) * 2.0 ) + abs ( nb ) ; float ng = ( abs ( mZ ) * 2.0 ) + abs ( nc ) ; float nh = ( - 2.0 * mH ) + nd ; float ni = ( - 2.0 * mE ) + ne ; float nj = abs ( nh ) + nf ; float nk = abs ( ni ) + ng ; float nl = nd + m_ ; float nm = my . x ; bool nn = nj >= nk ; float no = mX * 2.0 + nl ; if ( ! nn ) mG = mH ; if ( ! nn ) mE = mF ; if ( nn ) nm = my . y ; float np = ( no * ( 1.0 / 12.0 ) ) - gk ; float nq = mG - gk ; float nr = mE - gk ; float ns = mG + gk ; float nt = mE + gk ; bool nu = abs ( nq ) >= abs ( nr ) ; float nv = max ( abs ( nq ) , abs ( nr ) ) ; if ( nu ) nm = - nm ; float nw = mu ( abs ( np ) * mW ) ; vec2 nx ; nx . x = mC . x ; nx . y = mC . y ; vec2 ny ; ny . x = ( ! nn ) ? 0.0 : my . x ; ny . y = ( nn ) ? 0.0 : my . y ; if ( ! nn ) nx . x += nm * 0.5 ; if ( nn ) nx . y += nm * 0.5 ; vec2 nz ; nz . x = nx . x - ny . x * FXAA_QUALITY_P0 ; nz . y = nx . y - ny . y * FXAA_QUALITY_P0 ; vec2 nA ; nA . x = nx . x + ny . x * FXAA_QUALITY_P0 ; nA . y = nx . y + ny . y * FXAA_QUALITY_P0 ; float nB = ( ( - 2.0 ) * nw ) + 3.0 ; float nC = gj ( mv ( ie , nz ) ) ; float nD = nw * nw ; float nE = gj ( mv ( ie , nA ) ) ; if ( ! nu ) ns = nt ; float nF = nv * 1.0 / 4.0 ; float nG = gk - ns * 0.5 ; float nH = nB * nD ; bool nI = nG < 0.0 ; nC -= ns * 0.5 ; nE -= ns * 0.5 ; bool nJ = abs ( nC ) >= nF ; bool nK = abs ( nE ) >= nF ; if ( ! nJ ) nz . x -= ny . x * FXAA_QUALITY_P1 ; if ( ! nJ ) nz . y -= ny . y * FXAA_QUALITY_P1 ; bool nL = ( ! nJ ) || ( ! nK ) ; if ( ! nK ) nA . x += ny . x * FXAA_QUALITY_P1 ; if ( ! nK ) nA . y += ny . y * FXAA_QUALITY_P1 ; if ( nL ) { if ( ! nJ ) nC = gj ( mv ( ie , nz . xy ) ) ; if ( ! nK ) nE = gj ( mv ( ie , nA . xy ) ) ; if ( ! nJ ) nC = nC - ns * 0.5 ; if ( ! nK ) nE = nE - ns * 0.5 ; nJ = abs ( nC ) >= nF ; nK = abs ( nE ) >= nF ; if ( ! nJ ) nz . x -= ny . x * FXAA_QUALITY_P2 ; if ( ! nJ ) nz . y -= ny . y * FXAA_QUALITY_P2 ; nL = ( ! nJ ) || ( ! nK ) ; if ( ! nK ) nA . x += ny . x * FXAA_QUALITY_P2 ; if ( ! nK ) nA . y += ny . y * FXAA_QUALITY_P2 ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["FXAA_QUALITY_PS",3,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"if ( nL ) { if ( ! nJ ) nC = gj ( mv ( ie , nz . xy ) ) ; if ( ! nK ) nE = gj ( mv ( ie , nA . xy ) ) ; if ( ! nJ ) nC = nC - ns * 0.5 ; if ( ! nK ) nE = nE - ns * 0.5 ; nJ = abs ( nC ) >= nF ; nK = abs ( nE ) >= nF ; if ( ! nJ ) nz . x -= ny . x * FXAA_QUALITY_P3 ; if ( ! nJ ) nz . y -= ny . y * FXAA_QUALITY_P3 ; nL = ( ! nJ ) || ( ! nK ) ; if ( ! nK ) nA . x += ny . x * FXAA_QUALITY_P3 ; if ( ! nK ) nA . y += ny . y * FXAA_QUALITY_P3 ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["FXAA_QUALITY_PS",4,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"if ( nL ) { if ( ! nJ ) nC = gj ( mv ( ie , nz . xy ) ) ; if ( ! nK ) nE = gj ( mv ( ie , nA . xy ) ) ; if ( ! nJ ) nC = nC - ns * 0.5 ; if ( ! nK ) nE = nE - ns * 0.5 ; nJ = abs ( nC ) >= nF ; nK = abs ( nE ) >= nF ; if ( ! nJ ) nz . x -= ny . x * FXAA_QUALITY_P4 ; if ( ! nJ ) nz . y -= ny . y * FXAA_QUALITY_P4 ; nL = ( ! nJ ) || ( ! nK ) ; if ( ! nK ) nA . x += ny . x * FXAA_QUALITY_P4 ; if ( ! nK ) nA . y += ny . y * FXAA_QUALITY_P4 ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["FXAA_QUALITY_PS",5,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"if ( nL ) { if ( ! nJ ) nC = gj ( mv ( ie , nz . xy ) ) ; if ( ! nK ) nE = gj ( mv ( ie , nA . xy ) ) ; if ( ! nJ ) nC = nC - ns * 0.5 ; if ( ! nK ) nE = nE - ns * 0.5 ; nJ = abs ( nC ) >= nF ; nK = abs ( nE ) >= nF ; if ( ! nJ ) nz . x -= ny . x * FXAA_QUALITY_P5 ; if ( ! nJ ) nz . y -= ny . y * FXAA_QUALITY_P5 ; nL = ( ! nJ ) || ( ! nK ) ; if ( ! nK ) nA . x += ny . x * FXAA_QUALITY_P5 ; if ( ! nK ) nA . y += ny . y * FXAA_QUALITY_P5 ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["FXAA_QUALITY_PS",6,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"if ( nL ) { if ( ! nJ ) nC = gj ( mv ( ie , nz . xy ) ) ; if ( ! nK ) nE = gj ( mv ( ie , nA . xy ) ) ; if ( ! nJ ) nC = nC - ns * 0.5 ; if ( ! nK ) nE = nE - ns * 0.5 ; nJ = abs ( nC ) >= nF ; nK = abs ( nE ) >= nF ; if ( ! nJ ) nz . x -= ny . x * FXAA_QUALITY_P6 ; if ( ! nJ ) nz . y -= ny . y * FXAA_QUALITY_P6 ; nL = ( ! nJ ) || ( ! nK ) ; if ( ! nK ) nA . x += ny . x * FXAA_QUALITY_P6 ; if ( ! nK ) nA . y += ny . y * FXAA_QUALITY_P6 ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["FXAA_QUALITY_PS",7,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"if ( nL ) { if ( ! nJ ) nC = gj ( mv ( ie , nz . xy ) ) ; if ( ! nK ) nE = gj ( mv ( ie , nA . xy ) ) ; if ( ! nJ ) nC = nC - ns * 0.5 ; if ( ! nK ) nE = nE - ns * 0.5 ; nJ = abs ( nC ) >= nF ; nK = abs ( nE ) >= nF ; if ( ! nJ ) nz . x -= ny . x * FXAA_QUALITY_P7 ; if ( ! nJ ) nz . y -= ny . y * FXAA_QUALITY_P7 ; nL = ( ! nJ ) || ( ! nK ) ; if ( ! nK ) nA . x += ny . x * FXAA_QUALITY_P7 ; if ( ! nK ) nA . y += ny . y * FXAA_QUALITY_P7 ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["FXAA_QUALITY_PS",8,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"if ( nL ) { if ( ! nJ ) nC = gj ( mv ( ie , nz . xy ) ) ; if ( ! nK ) nE = gj ( mv ( ie , nA . xy ) ) ; if ( ! nJ ) nC = nC - ns * 0.5 ; if ( ! nK ) nE = nE - ns * 0.5 ; nJ = abs ( nC ) >= nF ; nK = abs ( nE ) >= nF ; if ( ! nJ ) nz . x -= ny . x * FXAA_QUALITY_P8 ; if ( ! nJ ) nz . y -= ny . y * FXAA_QUALITY_P8 ; nL = ( ! nJ ) || ( ! nK ) ; if ( ! nK ) nA . x += ny . x * FXAA_QUALITY_P8 ; if ( ! nK ) nA . y += ny . y * FXAA_QUALITY_P8 ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["FXAA_QUALITY_PS",9,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"if ( nL ) { if ( ! nJ ) nC = gj ( mv ( ie , nz . xy ) ) ; if ( ! nK ) nE = gj ( mv ( ie , nA . xy ) ) ; if ( ! nJ ) nC = nC - ns * 0.5 ; if ( ! nK ) nE = nE - ns * 0.5 ; nJ = abs ( nC ) >= nF ; nK = abs ( nE ) >= nF ; if ( ! nJ ) nz . x -= ny . x * FXAA_QUALITY_P9 ; if ( ! nJ ) nz . y -= ny . y * FXAA_QUALITY_P9 ; nL = ( ! nJ ) || ( ! nK ) ; if ( ! nK ) nA . x += ny . x * FXAA_QUALITY_P9 ; if ( ! nK ) nA . y += ny . y * FXAA_QUALITY_P9 ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["FXAA_QUALITY_PS",10,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"if ( nL ) { if ( ! nJ ) nC = gj ( mv ( ie , nz . xy ) ) ; if ( ! nK ) nE = gj ( mv ( ie , nA . xy ) ) ; if ( ! nJ ) nC = nC - ns * 0.5 ; if ( ! nK ) nE = nE - ns * 0.5 ; nJ = abs ( nC ) >= nF ; nK = abs ( nE ) >= nF ; if ( ! nJ ) nz . x -= ny . x * FXAA_QUALITY_P10 ; if ( ! nJ ) nz . y -= ny . y * FXAA_QUALITY_P10 ; nL = ( ! nJ ) || ( ! nK ) ; if ( ! nK ) nA . x += ny . x * FXAA_QUALITY_P10 ; if ( ! nK ) nA . y += ny . y * FXAA_QUALITY_P10 ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["FXAA_QUALITY_PS",11,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"if ( nL ) { if ( ! nJ ) nC = gj ( mv ( ie , nz . xy ) ) ; if ( ! nK ) nE = gj ( mv ( ie , nA . xy ) ) ; if ( ! nJ ) nC = nC - ns * 0.5 ; if ( ! nK ) nE = nE - ns * 0.5 ; nJ = abs ( nC ) >= nF ; nK = abs ( nE ) >= nF ; if ( ! nJ ) nz . x -= ny . x * FXAA_QUALITY_P11 ; if ( ! nJ ) nz . y -= ny . y * FXAA_QUALITY_P11 ; nL = ( ! nJ ) || ( ! nK ) ; if ( ! nK ) nA . x += ny . x * FXAA_QUALITY_P11 ; if ( ! nK ) nA . y += ny . y * FXAA_QUALITY_P11 ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["FXAA_QUALITY_PS",12,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"if ( nL ) { if ( ! nJ ) nC = gj ( mv ( ie , nz . xy ) ) ; if ( ! nK ) nE = gj ( mv ( ie , nA . xy ) ) ; if ( ! nJ ) nC = nC - ns * 0.5 ; if ( ! nK ) nE = nE - ns * 0.5 ; nJ = abs ( nC ) >= nF ; nK = abs ( nE ) >= nF ; if ( ! nJ ) nz . x -= ny . x * FXAA_QUALITY_P12 ; if ( ! nJ ) nz . y -= ny . y * FXAA_QUALITY_P12 ; nL = ( ! nJ ) || ( ! nK ) ; if ( ! nK ) nA . x += ny . x * FXAA_QUALITY_P12 ; if ( ! nK ) nA . y += ny . y * FXAA_QUALITY_P12 ; }".split(" ")}]}}]},
{$:"txt",aa:["}"]}]}}]},{$:"txt",aa:["}"]}]}}]},{$:"txt",aa:["}"]}]}}]},{$:"txt",aa:["}"]}]}}]},{$:"txt",aa:["}"]}]}}]},{$:"txt",aa:["}"]}]}}]},{$:"txt",aa:["}"]}]}}]},{$:"txt",aa:["}"]}]}}]},{$:"txt",aa:["}"]}]}}]},{$:"txt",aa:"} float nM = mC . x - nz . x ; float nN = nA . x - mC . x ; if ( ! nn ) nM = mC . y - nz . y ; if ( ! nn ) nN = nA . y - mC . y ; bool nO = ( nC < 0.0 ) != nI ; float nP = ( nN + nM ) ; bool nQ = ( nE < 0.0 ) != nI ; float nR = 1.0 / nP ; bool nS = nM < nN ; float nT = min ( nM , nN ) ; bool nU = nS ? nO : nQ ; float nV = nH * nH ; float nW = ( nT * ( - nR ) ) + 0.5 ; float nX = nV * mz ; float nY = nU ? nW : 0.0 ; float nZ = max ( nY , nX ) ; if ( ! nn ) mC . x += nZ * nm ; if ( nn ) mC . y += nZ * nm ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["FXAA_DISCARD",1,{$:"equal_expr",ia:2},"FXAA_BLEND4WEB",1,{$:"equal_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"return mv ( ie , mC ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"return vec4 ( mv ( ie , mC ) . xyz , gk ) ;".split(" ")}]}}]},{$:"txt",aa:["}"]}]}}]}]};f["include/halo_color.glslf"]={$:"grp",da:[{$:"cond",da:[{$:"ifndef",ba:"HALO_COLOR_GLSLF",ha:{$:"grp",da:[{$:"define",ba:"HALO_COLOR_GLSLF",aa:[""]},{$:"var",ba:"NUM_RINGS",
aa:["0"]},{$:"var",ba:"NUM_LINES",aa:["0"]},{$:"var",ba:"NUM_STARS",aa:["0"]},{$:"var",ba:"SKY_STARS",aa:["0"]},{$:"var",ba:"WAVES_HEIGHT",aa:["1.0"]},{$:"var",ba:"WATER_EFFECTS",aa:["0"]},{$:"var",ba:"DISABLE_FOG",aa:["0"]},{$:"cond",da:[{$:"if",ga:["NUM_RINGS","NUM_LINES",{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"const int n_ = NUM_RINGS ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"const int n_ = NUM_LINES ;".split(" ")}]}}]},{$:"txt",aa:"float oa ( float x ) { return x - floor ( x * ( 1.0 / 0.01 ) ) * 0.01 ; }".split(" ")},
{$:"cond",da:[{$:"if",ga:["NUM_RINGS"],ha:{$:"grp",da:[{$:"txt",aa:"void oh ( inout float ob , in float oc [ n_ ] , in float od ) { for ( int a = 0 ; a < NUM_RINGS ; a ++ ) { float oe = 40.0 * oc [ a ] ; float of = 300.0 * ( oa ( oe ) - 0.005 ) ; float og = oe ; float me = abs ( og * ( u_halo_size * of - od ) ) ; ob += 1.0 - min ( me , 1.0 ) ; } }".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["NUM_LINES"],ha:{$:"grp",da:[{$:"txt",aa:"void om ( inout float oi , in float oc [ n_ ] , in float aM ) { for ( int a = 0 ; a < NUM_LINES ; a ++ ) { float oj = oc [ a ] ; float ok = oj ; float ol = 1000.0 * ( oa ( oj ) - 0.005 ) ; float me = 20.0 * abs ( ok * A . x + ol * A . y ) ; oi += 1.0 - min ( me , 1.0 ) ; } oi *= aM ; }".split(" ")}]}}]},
{$:"txt",aa:"void oq ( inout float aM , in vec2 ce ) { float on , bP ; bP = atan ( ce . y , ce . x ) ; bP *= ( 1.0 + 0.25 * float ( NUM_STARS ) ) ; float oo = cos ( bP ) ; float op = sin ( bP ) ; bP = ( oo * ce . x + op * ce . y ) * ( oo * ce . y - op * ce . x ) ; on = abs ( bP ) ; if ( on < 1.0 ) { on = ( 0.01 * u_halo_size ) / ( on ) ; aM *= sqrt ( min ( on , 1.0 ) ) ; } } vec4 bl ( ) { float aM = ( A . x * A . x + A . y * A . y ) ; float od = sqrt ( aM ) ; aM = max ( 1.0 - aM , 0.0 ) ; aM = pow ( aM , u_halo_hardness ) ; float L = u_diffuse_color . a ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["NUM_RINGS","NUM_LINES",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"float oc [ n_ ] ; for ( int cq = 0 ; cq < n_ ; cq ++ ) { oc [ cq ] = fract ( bk / float ( cq + 1 ) ) - 1.0 ; }".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["NUM_RINGS"],ha:{$:"grp",da:[{$:"txt",aa:"float ob = 0.0 ; oh ( ob , oc , od ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["NUM_LINES"],ha:{$:"grp",da:[{$:"txt",aa:"float oi = 0.0 ; om ( oi , oc , aM ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",
ga:["NUM_STARS"],ha:{$:"grp",da:[{$:"txt",aa:"oq ( aM , A ) ;".split(" ")}]}}]},{$:"txt",aa:"aM *= L ; vec3 aQ = u_diffuse_color . rgb ;".split(" ")},{$:"cond",da:[{$:"if",ga:["NUM_RINGS"],ha:{$:"grp",da:[{$:"txt",aa:"ob *= aM ; aQ += u_halo_rings_color * ob ; aM += ob ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["NUM_LINES"],ha:{$:"grp",da:[{$:"txt",aa:"oi *= L ; aQ += u_halo_lines_color * oi ; aM += oi ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["SKY_STARS"],ha:{$:"grp",da:[{$:"txt",aa:"aM *= max ( 1.0 - 2.0 * u_sun_intensity . x , 0.0 ) ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["WATER_EFFECTS","DISABLE_FOG",{$:"logic_negative_expr",ia:1},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"float lc = u_halo_stars_blend * ( bj . y - u_halo_stars_height ) ; aM *= clamp ( lc , 0.0 , 1.0 ) ; aM *= min ( u_cam_water_depth + 2.0 * WAVES_HEIGHT , 1.0 ) ;".split(" ")}]}}]}]}}]},{$:"txt",aa:"vec4 or = vec4 ( aQ , aM ) ; return or ; }".split(" ")}]}}]}]};f["include/lighting_nodes.glslf"]={$:"grp",da:[{$:"cond",da:[{$:"ifndef",ba:"LIGHTING_NODES_GLSLF",
ha:{$:"grp",da:[{$:"define",ba:"LIGHTING_NODES_GLSLF",aa:[""]},{$:"include",oa:"std.glsl"},{$:"node",ba:"LIGHTING_BEGIN",ma:[],la:[{$:"node_out",ba:"oF",fa:["vec3"],ea:!1},{$:"node_out",ba:"oG",fa:["vec3"],ea:!1},{$:"node_out",ba:"oH",fa:["vec3"],ea:!1},{$:"node_out",ba:"oI",fa:["vec3"],ea:!0},{$:"node_out",ba:"oJ",fa:["vec3"],ea:!0},{$:"node_out",ba:"oK",fa:["vec2"],ea:!0},{$:"node_out",ba:"oL",fa:["vec2"],ea:!0},{$:"node_out",ba:"oM",fa:["vec4"],ea:!0},{$:"node_out",ba:"oN",fa:["float"],ea:!0},
{$:"node_out",ba:"oO",fa:["vec4"],ea:!0}],ja:[{$:"txt",aa:"oF = os ; oG = ot ; oH = ou ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_oI"],ja:[{$:"txt",aa:["oI","=","ov",";"]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_oJ"],ja:[{$:"txt",aa:["oJ","=","ox",";"]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_oL"],ja:[{$:"txt",aa:["oL","=","oz",";"]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_oK"],ja:[{$:"txt",aa:["oK","=","oA",";"]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_oM"],
ja:[{$:"txt",aa:["oM","=","oB",";"]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_oN"],ja:[{$:"txt",aa:["oN","=","oC",";"]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_oO"],ja:[{$:"txt",aa:["oO","=","oD",";"]}]}]}]},{$:"node",ba:"LIGHTING_AMBIENT",ma:[],la:[{$:"node_in",ba:"oP",fa:["vec3"],ea:!1},{$:"node_in",ba:"oQ",fa:["vec3"],ea:!1},{$:"node_in",ba:"oR",fa:["vec3"],ea:!1},{$:"node_out",ba:"oS",fa:["vec4"],ea:!1},{$:"node_out",ba:"oT",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"oS = vec4 ( oP + oR * oQ , _0_0 ) ; oT = vec3 ( _0_0 ) ;".split(" ")}]},
{$:"node",ba:"LIGHTING_LAMP",ma:[{$:"node_var",ba:"LAMP_TYPE",aa:["HEMI"]},{$:"node_var",ba:"LAMP_IND",aa:["0"]},{$:"node_var",ba:"LAMP_SPOT_SIZE",aa:["0.8"]},{$:"node_var",ba:"LAMP_SPOT_BLEND",aa:["0.03"]},{$:"node_var",ba:"LAMP_LIGHT_DIST",aa:["30.0"]},{$:"node_var",ba:"LAMP_SHADOW_MAP_IND",aa:["-","1"]},{$:"node_var",ba:"LAMP_USE_SPHERE",aa:["0"]}],la:[{$:"node_in",ba:"oU",fa:["vec4"],ea:!1},{$:"node_out",ba:"oV",fa:["vec3"],ea:!1},{$:"node_out",ba:"oW",fa:["vec2"],ea:!1},{$:"node_out",ba:"oX",
fa:["vec3"],ea:!1},{$:"node_out",ba:"oY",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"oW = vec2 ( u_light_positions [ LAMP_IND ] . w , u_light_color_intensities [ LAMP_IND ] . w ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["LAMP_TYPE","HEMI",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:["oY","=","_0_5",";"]}]},{$:"node_else",ja:[{$:"txt",aa:["oY","=","_0_0",";"]}]}]},{$:"txt",aa:"oX = u_light_color_intensities [ LAMP_IND ] . xyz ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["LAMP_SHADOW_MAP_IND",
1,{$:"negative_expr",ia:1},{$:"non_equal_expr",ia:2}],ja:[{$:"txt",aa:"oX *= oU [ LAMP_SHADOW_MAP_IND ] ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["LAMP_TYPE","SPOT",{$:"equal_expr",ia:2},"LAMP_TYPE","POINT",{$:"equal_expr",ia:2},{$:"logical_or_expr",ia:2}],ja:[{$:"txt",aa:"vec3 oZ = u_light_positions [ LAMP_IND ] . xyz ; oV = oZ - ow ; float aM = length ( oV ) ; float o_ = LAMP_LIGHT_DIST / ( LAMP_LIGHT_DIST + aM * aM ) ; oV = normalize ( oV ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",
ga:["LAMP_TYPE","SPOT",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"vec3 pa = u_light_directions [ LAMP_IND ] ; float pb = dot ( oV , pa ) ; pb *= smoothstep ( _0_0 , _1_0 , ( pb - LAMP_SPOT_SIZE ) / LAMP_SPOT_BLEND ) ; o_ *= pb ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["LAMP_USE_SPHERE"],ja:[{$:"txt",aa:"o_ *= max ( LAMP_LIGHT_DIST - aM , _0_0 ) / LAMP_LIGHT_DIST ;".split(" ")}]}]},{$:"txt",aa:["oX","*=","o_",";"]}]},{$:"node_else",ja:[{$:"txt",aa:"oV = u_light_directions [ LAMP_IND ] ;".split(" ")}]}]}]},
{$:"node",ba:"DIFFUSE_FRESNEL",ma:[{$:"node_var",ba:"MAT_USE_TBN_SHADING",aa:["0"]}],la:[{$:"node_in",ba:"pc",fa:["vec3"],ea:!1},{$:"node_in",ba:"pd",fa:["vec2"],ea:!1},{$:"node_in",ba:"pe",fa:["vec3"],ea:!1},{$:"node_in",ba:"pf",fa:["float"],ea:!1},{$:"node_in",ba:"pg",fa:["vec2"],ea:!1},{$:"node_out",ba:"ph",fa:["float"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["MAT_USE_TBN_SHADING"],ja:[{$:"txt",aa:"vec3 pi = cross ( pc , B . xyz ) ; pe = cross ( pi , B . xyz ) ; pe = - normalize ( pe ) ;".split(" ")}]}]},
{$:"txt",aa:"ph = _0_0 ; if ( pd . r != _0_0 ) { float pj = ( _1_0 - pf ) * dot ( pe , pc ) + pf ; if ( pg [ 0 ] == _0_0 ) { ph = _1_0 ; } else { float t = _1_0 + abs ( pj ) ; t = pg [ 1 ] + ( _1_0 - pg [ 1 ] ) * pow ( t , pg [ 0 ] ) ; ph = clamp ( t , _0_0 , _1_0 ) ; } ph = max ( ph , _0_0 ) ; }".split(" ")}]},{$:"node",ba:"DIFFUSE_LAMBERT",ma:[{$:"node_var",ba:"MAT_USE_TBN_SHADING",aa:["0"]}],la:[{$:"node_in",ba:"pk",fa:["vec3"],ea:!1},{$:"node_in",ba:"pl",fa:["vec2"],ea:!1},{$:"node_in",ba:"pm",
fa:["vec3"],ea:!1},{$:"node_in",ba:"pn",fa:["float"],ea:!1},{$:"node_out",ba:"po",fa:["float"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["MAT_USE_TBN_SHADING"],ja:[{$:"txt",aa:"vec3 pi = cross ( pk , B . xyz ) ; pm = cross ( pi , B . xyz ) ; pm = - normalize ( pm ) ;".split(" ")}]}]},{$:"txt",aa:"po = _0_0 ; if ( pl . r != _0_0 ) { float pj = ( _1_0 - pn ) * dot ( pm , pk ) + pn ; po = max ( pj , _0_0 ) ; }".split(" ")}]},{$:"node",ba:"DIFFUSE_OREN_NAYAR",ma:[{$:"node_var",ba:"MAT_USE_TBN_SHADING",
aa:["0"]}],la:[{$:"node_in",ba:"pr",fa:["vec3"],ea:!1},{$:"node_in",ba:"pu",fa:["vec2"],ea:!1},{$:"node_in",ba:"pv",fa:["vec3"],ea:!1},{$:"node_in",ba:"pw",fa:["float"],ea:!1},{$:"node_in",ba:"px",fa:["vec2"],ea:!1},{$:"node_out",ba:"py",fa:["float"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["MAT_USE_TBN_SHADING"],ja:[{$:"txt",aa:"vec3 pi = cross ( pr , B . xyz ) ; pv = cross ( pi , B . xyz ) ; pv = - normalize ( pv ) ;".split(" ")}]}]},{$:"txt",aa:"py = _0_0 ; if ( pu . r != _0_0 ) { float pj = ( _1_0 - pw ) * dot ( pv , pr ) + pw ; if ( px [ 0 ] > _0_0 ) { float pz = max ( dot ( pv , oy ) , _0_0 ) ; float pA = px [ 0 ] * px [ 0 ] ; float cG = _1_0 - _0_5 * ( pA / ( pA + 0.33 ) ) ; vec3 pB = pr - pj * pv ; vec3 pC = oy - pz * pv ; if ( length ( pB ) == _0_0 || length ( pC ) == _0_0 || abs ( pj ) > _1_0 || abs ( pz ) > _1_0 ) py = pj * cG ; else { float pD = acos ( pj ) ; float pE = acos ( pz ) ; vec3 pF = normalize ( pB ) ; vec3 pG = normalize ( pC ) ; float a , b ; a = max ( pD , pE ) ; b = min ( pD , pE ) ; b *= 0.95 ; float t = max ( dot ( pF , pG ) , _0_0 ) ; float hS = 0.45 * ( pA / ( pA + 0.09 ) ) ; py = pj * ( cG + ( hS * t * sin ( a ) * tan ( b ) ) ) ; } } else py = pj ; py = max ( py , _0_0 ) ; }".split(" ")}]},
{$:"node",ba:"DIFFUSE_MINNAERT",ma:[{$:"node_var",ba:"MAT_USE_TBN_SHADING",aa:["0"]}],la:[{$:"node_in",ba:"pH",fa:["vec3"],ea:!1},{$:"node_in",ba:"pI",fa:["vec2"],ea:!1},{$:"node_in",ba:"pJ",fa:["vec3"],ea:!1},{$:"node_in",ba:"pK",fa:["float"],ea:!1},{$:"node_in",ba:"pL",fa:["vec2"],ea:!1},{$:"node_out",ba:"pM",fa:["float"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["MAT_USE_TBN_SHADING"],ja:[{$:"txt",aa:"vec3 pi = cross ( pH , B . xyz ) ; pJ = cross ( pi , B . xyz ) ; pJ = - normalize ( pJ ) ;".split(" ")}]}]},
{$:"txt",aa:"pM = _0_0 ; if ( pI . r != _0_0 ) { float pj = ( _1_0 - pK ) * dot ( pJ , pH ) + pK ; float pz = max ( dot ( pJ , oy ) , _0_0 ) ; if ( pL [ 0 ] <= _1_0 ) pM = pj * pow ( max ( pz * pj , 0.1 ) , pL [ 0 ] - _1_0 ) ; else pM = pj * pow ( 1.0001 - pz , pL [ 0 ] - _1_0 ) ; pM = max ( pM , _0_0 ) ; }".split(" ")}]},{$:"node",ba:"DIFFUSE_TOON",ma:[{$:"node_var",ba:"MAT_USE_TBN_SHADING",aa:["0"]}],la:[{$:"node_in",ba:"pN",fa:["vec3"],ea:!1},{$:"node_in",ba:"pO",fa:["vec2"],ea:!1},{$:"node_in",
ba:"pP",fa:["vec3"],ea:!1},{$:"node_in",ba:"pQ",fa:["float"],ea:!1},{$:"node_in",ba:"pR",fa:["vec2"],ea:!1},{$:"node_out",ba:"pS",fa:["float"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["MAT_USE_TBN_SHADING"],ja:[{$:"txt",aa:"vec3 pi = cross ( pN , B . xyz ) ; pP = cross ( pi , B . xyz ) ; pP = - normalize ( pP ) ;".split(" ")}]}]},{$:"txt",aa:"pS = _0_0 ; if ( pO . r != _0_0 ) { float pj = ( _1_0 - pQ ) * dot ( pP , pN ) + pQ ; float pT = acos ( pj ) ; if ( pT < pR [ 0 ] ) pS = _1_0 ; else if ( pT > ( pR [ 0 ] + pR [ 1 ] ) || pR [ 1 ] == _0_0 ) pS = _0_0 ; else pS = _1_0 - ( ( pT - pR [ 0 ] ) / pR [ 1 ] ) ; pS = max ( pS , _0_0 ) ; }".split(" ")}]},
{$:"node",ba:"SPECULAR_PHONG",ma:[{$:"node_var",ba:"MAT_USE_TBN_SHADING",aa:["0"]}],la:[{$:"node_in",ba:"pU",fa:["vec3"],ea:!1},{$:"node_in",ba:"pV",fa:["vec2"],ea:!1},{$:"node_in",ba:"pW",fa:["vec3"],ea:!1},{$:"node_in",ba:"pX",fa:["float"],ea:!1},{$:"node_in",ba:"pY",fa:["vec2"],ea:!1},{$:"node_out",ba:"pZ",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"pZ = _0_0 ; if ( pV . g != _0_0 ) { vec3 p_ = normalize ( pU + oy ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MAT_USE_TBN_SHADING"],ja:[{$:"txt",
aa:"if ( pX == _0_0 ) { pZ = dot ( B . xyz , p_ ) ; pZ = sqrt ( _1_0 - pZ * pZ ) ; }".split(" ")}]},{$:"node_else",ja:[{$:"txt",aa:"pZ = ( _1_0 - pX ) * max ( dot ( pW , p_ ) , _0_0 ) + pX ;".split(" ")}]}]},{$:"txt",aa:"pZ = pow ( pZ , pY [ 0 ] ) ; }".split(" ")}]},{$:"node",ba:"SPECULAR_COOKTORR",ma:[{$:"node_var",ba:"MAT_USE_TBN_SHADING",aa:["0"]}],la:[{$:"node_in",ba:"qa",fa:["vec3"],ea:!1},{$:"node_in",ba:"qb",fa:["vec2"],ea:!1},{$:"node_in",ba:"qc",fa:["vec3"],ea:!1},{$:"node_in",ba:"qd",fa:["float"],
ea:!1},{$:"node_in",ba:"qe",fa:["vec2"],ea:!1},{$:"node_out",ba:"qf",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"qf = _0_0 ; if ( qb . g != _0_0 ) { vec3 p_ = normalize ( qa + oy ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MAT_USE_TBN_SHADING"],ja:[{$:"txt",aa:"if ( qd == _0_0 ) { qf = dot ( B . xyz , p_ ) ; qf = sqrt ( _1_0 - qf * qf ) ; }".split(" ")}]},{$:"node_else",ja:[{$:"txt",aa:"qf = max ( dot ( qc , p_ ) , _0_0 ) ; qf = ( _1_0 - qd ) * qf + qd ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",
ga:["MAT_USE_TBN_SHADING"],ja:[{$:"txt",aa:"float pz = max ( dot ( B . xyz , oy ) , _0_0 ) ; pz = sqrt ( _1_0 - pz * pz ) ;".split(" ")}]},{$:"node_else",ja:[{$:"txt",aa:"float pz = max ( dot ( qc , oy ) , _0_0 ) ;".split(" ")}]}]},{$:"txt",aa:"qf = pow ( qf , qe [ 0 ] ) ; qf = qf / ( 0.1 + pz ) ; }".split(" ")}]},{$:"node",ba:"SPECULAR_WARDISO",ma:[{$:"node_var",ba:"MAT_USE_TBN_SHADING",aa:["0"]}],la:[{$:"node_in",ba:"qg",fa:["vec3"],ea:!1},{$:"node_in",ba:"qh",fa:["vec2"],ea:!1},{$:"node_in",ba:"qi",
fa:["vec3"],ea:!1},{$:"node_in",ba:"qj",fa:["float"],ea:!1},{$:"node_in",ba:"qk",fa:["vec2"],ea:!1},{$:"node_out",ba:"ql",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"ql = _0_0 ; if ( qh . g != _0_0 ) { vec3 p_ = normalize ( qg + oy ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MAT_USE_TBN_SHADING"],ja:[{$:"txt",aa:"float qm = _0_0 ; float pz = _0_0 ; float qn = _0_0 ; if ( qj == _0_0 ) { qm = dot ( B . xyz , p_ ) ; pz = dot ( B . xyz , oy ) ; qn = dot ( B . xyz , qg ) ; qm = sqrt ( _1_0 - qm * qm ) ; pz = sqrt ( _1_0 - pz * pz ) ; qn = sqrt ( _1_0 - qn * qn ) ; }".split(" ")}]},
{$:"node_else",ja:[{$:"txt",aa:"float qm = max ( dot ( qi , p_ ) , 0.01 ) ; float pz = max ( dot ( qi , oy ) , 0.01 ) ; float qn = max ( dot ( qi , qg ) , 0.01 ) ;".split(" ")}]}]},{$:"txt",aa:"float bP = tan ( acos ( qm ) ) ; float L = max ( qk [ 0 ] , 0.01 ) ; ql = qn * ( _1_0 / ( 4.0 * M_PI * L * L ) ) * ( exp ( - ( bP * bP ) / ( L * L ) ) / ( sqrt ( pz * qn ) ) ) ; }".split(" ")}]},{$:"node",ba:"SPECULAR_TOON",ma:[{$:"node_var",ba:"MAT_USE_TBN_SHADING",aa:["0"]}],la:[{$:"node_in",ba:"qo",fa:["vec3"],
ea:!1},{$:"node_in",ba:"qr",fa:["vec2"],ea:!1},{$:"node_in",ba:"qu",fa:["vec3"],ea:!1},{$:"node_in",ba:"qv",fa:["float"],ea:!1},{$:"node_in",ba:"qw",fa:["vec2"],ea:!1},{$:"node_out",ba:"qx",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"qx = _0_0 ; if ( qr . g != _0_0 ) { vec3 co = normalize ( qo + oy ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MAT_USE_TBN_SHADING"],ja:[{$:"txt",aa:"float qy = dot ( co , B . xyz ) ; float bP = qw [ 0 ] + qw [ 1 ] ; if ( qv == _0_0 ) bP = acos ( sqrt ( _1_0 - qy * qy ) ) ;".split(" ")}]},
{$:"node_else",ja:[{$:"txt",aa:"float bP = acos ( dot ( co , qu ) ) ;".split(" ")}]}]},{$:"txt",aa:"if ( bP < qw [ 0 ] ) qx = _1_0 ; else if ( bP >= qw [ 0 ] + qw [ 1 ] || qw [ 1 ] == _0_0 ) qx = _0_0 ; else qx = _1_0 - ( bP - qw [ 0 ] ) / qw [ 1 ] ; }".split(" ")}]},{$:"node",ba:"SPECULAR_BLINN",ma:[{$:"node_var",ba:"MAT_USE_TBN_SHADING",aa:["0"]}],la:[{$:"node_in",ba:"qz",fa:["vec3"],ea:!1},{$:"node_in",ba:"qA",fa:["vec2"],ea:!1},{$:"node_in",ba:"qB",fa:["vec3"],ea:!1},{$:"node_in",ba:"qC",fa:["float"],
ea:!1},{$:"node_in",ba:"qD",fa:["vec2"],ea:!1},{$:"node_out",ba:"qE",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"float qF = qD [ 0 ] ; float qG = qD [ 1 ] ; qE = _0_0 ; if ( qA . g != _0_0 ) { if ( qF < 1.0 || qG == _0_0 ) qE = _0_0 ; else { if ( qG < 100.0 ) qG = sqrt ( 1.0 / qG ) ; else qG = 10.0 / qG ; vec3 p_ = normalize ( oy + qz ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MAT_USE_TBN_SHADING"],ja:[{$:"txt",aa:"float qm = 0.0 ; if ( qC == _0_0 ) { float qH = dot ( B . xyz , p_ ) ; qm = sqrt ( _1_0 - qH * qH ) ; }".split(" ")}]},
{$:"node_else",ja:[{$:"txt",aa:"float qm = ( _1_0 - qC ) * max ( dot ( qB , p_ ) , _0_0 ) + qC ;".split(" ")}]}]},{$:"txt",aa:"if ( qm < _0_0 ) qE = _0_0 ; else { float pz = max ( dot ( qB , oy ) , 0.01 ) ; float qn = dot ( qB , qz ) ; if ( qn <= 0.01 ) qE = _0_0 ; else { float qI = max ( dot ( oy , p_ ) , 0.01 ) ; float a = _1_0 ; float b = ( 2.0 * qm * pz ) / qI ; float dx = ( 2.0 * qm * qn ) / qI ; float g = min ( min ( a , b ) , dx ) ; float p = sqrt ( pow ( qF , 2.0 ) + pow ( qI , 2.0 ) - _1_0 ) ; float mm = pow ( p - qI , 2.0 ) / pow ( p + qI , 2.0 ) * ( _1_0 + pow ( qI * ( p + qI ) - _1_0 , 2.0 ) / pow ( qI * ( p - qI ) + _1_0 , 2.0 ) ) ; float pT = acos ( qm ) ; qE = max ( mm * g * exp ( - pow ( pT , 2.0 ) / ( 2.0 * pow ( qG , 2.0 ) ) ) , _0_0 ) ; } } } }".split(" ")}]},
{$:"node",ba:"LIGHTING_APPLY",ma:[],la:[{$:"node_in",ba:"qJ",fa:["vec4"],ea:!1},{$:"node_in",ba:"qK",fa:["vec3"],ea:!1},{$:"node_in",ba:"qL",fa:["float"],ea:!1},{$:"node_in",ba:"qM",fa:["float"],ea:!1},{$:"node_in",ba:"qN",fa:["vec3"],ea:!1},{$:"node_in",ba:"qO",fa:["vec3"],ea:!1},{$:"node_in",ba:"qP",fa:["vec4"],ea:!1},{$:"node_in",ba:"qQ",fa:["vec3"],ea:!1},{$:"node_in",ba:"qR",fa:["vec3"],ea:!1},{$:"node_in",ba:"qS",fa:["vec3"],ea:!1},{$:"node_in",ba:"qT",fa:["float"],ea:!1},{$:"node_out",ba:"qU",
fa:["vec4"],ea:!1},{$:"node_out",ba:"qV",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"qV = qK + qS * qR * qM ; qU = qJ + vec4 ( qS * qQ * qL , qM ) ;".split(" ")}]},{$:"node",ba:"LIGHTING_END",ma:[],la:[{$:"node_in",ba:"qW",fa:["vec4"],ea:!1},{$:"node_in",ba:"qX",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"E = qW . rgb ; oE = qX ;".split(" ")}]},{$:"nodes_global"},{$:"txt",aa:"void cP ( vec3 os , vec3 ot , vec3 ou , vec3 ov , vec3 ow , vec3 ox , vec3 oy , vec2 oz , vec2 oA , vec4 oB , float oC , vec4 oD , out vec3 E , out vec3 oE ) {".split(" ")},
{$:"nodes_main"},{$:"txt",aa:["}"]}]}}]}]};f["include/math.glslv"]={$:"grp",da:[{$:"cond",da:[{$:"ifndef",ba:"MATH_GLSLV",ha:{$:"grp",da:[{$:"define",ba:"MATH_GLSLV",aa:[""]},{$:"var",ba:"EPSILON",aa:["0.000001"]},{$:"var",ba:"REFLECTION_TYPE",aa:["REFL_NONE"]},{$:"var",ba:"REFRACTIVE",aa:["0"]},{$:"var",ba:"SHADOW_USAGE",aa:["NO_SHADOWS"]},{$:"var",ba:"USE_POSITION_CLIP",aa:["0"]},{$:"var",ba:"SOFT_PARTICLES",aa:["0"]},{$:"include",oa:"std.glsl"},{$:"txt",aa:"struct au { vec3 O ; vec3 ao ; vec3 V ; vec3 aB ; vec3 W ; vec3 U ; vec3 aQ ; } ; bool qY ( vec3 a , vec3 b ) { return any ( lessThan ( abs ( a - b ) , vec3 ( EPSILON ) ) ) ; } vec3 T ( in vec4 q , in vec3 kU ) { return kU + 2.0 * cross ( q . xyz , cross ( q . xyz , kU ) + q . w * kU ) ; } vec4 kV ( in vec4 qZ ) { return vec4 ( - qZ . xyz , qZ . w ) ; } vec4 rc ( in vec4 a , in vec4 b ) { vec4 q_ ; q_ . x = a . x * b . w + a . w * b . x + a . y * b . z - a . z * b . y ; q_ . y = a . y * b . w + a . w * b . y + a . z * b . x - a . x * b . z ; q_ . z = a . z * b . w + a . w * b . z + a . x * b . y - a . y * b . x ; q_ . w = a . w * b . w - a . x * b . x - a . y * b . y - a . z * b . z ; return q_ ; } vec4 X ( in vec3 rd , in float re ) { vec4 q_ ; re = re * 0.5 ; float s = sin ( re ) ; q_ . x = s * rd [ 0 ] ; q_ . y = s * rd [ 1 ] ; q_ . z = s * rd [ 2 ] ; q_ . w = cos ( re ) ; return q_ ; } vec4 ri ( in vec3 bH , in vec3 rf ) { vec4 q_ ; float dC = dot ( rf , bH ) ; vec3 rh = cross ( rf , bH ) ; q_ . xyz = rh . xyz ; q_ . w = 1.0 + dC ; return normalize ( q_ ) ; } vec3 rl ( vec3 rj , vec3 hK , vec4 qZ , vec3 rk ) { vec3 q_ = rk * hK ; q_ = T ( qZ , q_ ) ; q_ += rj ; return q_ ; } vec3 rm ( vec3 rj , vec3 hK , vec4 qZ , vec3 bH ) { vec3 q_ = bH * hK ; q_ = T ( qZ , q_ ) ; return q_ ; } vec3 rn ( vec3 rj , vec3 hK , vec4 qZ , vec3 rk ) { vec3 q_ = rk - rj ; q_ = T ( kV ( qZ ) , q_ ) ; q_ /= hK ; return q_ ; } vec3 ro ( vec3 rj , vec3 hK , vec4 qZ , vec3 bH ) { return T ( kV ( qZ ) , bH ) / hK ; } mat4 rp ( ) { return mat4 ( _1_0 , _0_0 , _0_0 , _0_0 , _0_0 , _1_0 , _0_0 , _0_0 , _0_0 , _0_0 , _1_0 , _0_0 , _0_0 , _0_0 , _0_0 , _1_0 ) ; } mat4 rq ( float bP ) { return mat4 ( _1_0 , _0_0 , _0_0 , _0_0 , _0_0 , cos ( bP ) , sin ( bP ) , _0_0 , _0_0 , - sin ( bP ) , cos ( bP ) , _0_0 , _0_0 , _0_0 , _0_0 , _1_0 ) ; } mat4 rs ( float bP ) { return mat4 ( cos ( bP ) , _0_0 , - sin ( bP ) , _0_0 , _0_0 , _1_0 , _0_0 , _0_0 , sin ( bP ) , _0_0 , cos ( bP ) , _0_0 , _0_0 , _0_0 , _0_0 , _1_0 ) ; } mat4 rt ( float bP ) { return mat4 ( cos ( bP ) , sin ( bP ) , _0_0 , _0_0 , - sin ( bP ) , cos ( bP ) , _0_0 , _0_0 , _0_0 , _0_0 , _1_0 , _0_0 , _0_0 , _0_0 , _0_0 , _1_0 ) ; } au ma ( in au kU ) { return au ( kU . O , kU . ao , normalize ( kU . V ) , normalize ( kU . aB ) , normalize ( kU . W ) , normalize ( kU . U ) , kU . aQ ) ; }".split(" ")},
{$:"cond",da:[{$:"if",ga:["SOFT_PARTICLES","REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2},"SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{$:"equal_expr",ia:2},"REFRACTIVE","USE_POSITION_CLIP",{$:"logical_or_expr",ia:5}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 aC ( vec4 f ) { float fX = f . x ; float fY = f . y ; float fZ = f . w ; vec3 ru ; ru . x = ( fX + fZ ) / 2.0 ; ru . y = ( fY + fZ ) / 2.0 ; ru . z = fZ ; return ru ; }".split(" ")}]}}]},{$:"txt",aa:"mat3 aY ( ) { return mat3 ( _0_0 , _0_0 , _0_0 , _1_0 , _1_0 , _1_0 , _0_0 , _0_0 , _0_0 ) ; } mat4 bh ( mat3 t ) { mat4 rv ; float rw = sqrt ( abs ( 1. - t [ 2 ] [ 0 ] * t [ 2 ] [ 0 ] - t [ 2 ] [ 1 ] * t [ 2 ] [ 1 ] - t [ 2 ] [ 2 ] * t [ 2 ] [ 2 ] ) ) ; rv [ 0 ] [ 0 ] = ( _1_0 - ( t [ 2 ] [ 1 ] * ( t [ 2 ] [ 1 ] + t [ 2 ] [ 1 ] ) + t [ 2 ] [ 2 ] * ( t [ 2 ] [ 2 ] + t [ 2 ] [ 2 ] ) ) ) * t [ 1 ] [ 0 ] ; rv [ 0 ] [ 1 ] = ( t [ 2 ] [ 0 ] * ( t [ 2 ] [ 1 ] + t [ 2 ] [ 1 ] ) + rw * ( t [ 2 ] [ 2 ] + t [ 2 ] [ 2 ] ) ) * t [ 1 ] [ 0 ] ; rv [ 0 ] [ 2 ] = ( t [ 2 ] [ 0 ] * ( t [ 2 ] [ 2 ] + t [ 2 ] [ 2 ] ) - rw * ( t [ 2 ] [ 1 ] + t [ 2 ] [ 1 ] ) ) * t [ 1 ] [ 0 ] ; rv [ 0 ] [ 3 ] = _0_0 ; rv [ 1 ] [ 0 ] = ( t [ 2 ] [ 0 ] * ( t [ 2 ] [ 1 ] + t [ 2 ] [ 1 ] ) - rw * ( t [ 2 ] [ 2 ] + t [ 2 ] [ 2 ] ) ) * t [ 1 ] [ 0 ] ; rv [ 1 ] [ 1 ] = ( _1_0 - ( t [ 2 ] [ 0 ] * ( t [ 2 ] [ 0 ] + t [ 2 ] [ 0 ] ) + t [ 2 ] [ 2 ] * ( t [ 2 ] [ 2 ] + t [ 2 ] [ 2 ] ) ) ) * t [ 1 ] [ 0 ] ; rv [ 1 ] [ 2 ] = ( t [ 2 ] [ 1 ] * ( t [ 2 ] [ 2 ] + t [ 2 ] [ 2 ] ) + rw * ( t [ 2 ] [ 0 ] + t [ 2 ] [ 0 ] ) ) * t [ 1 ] [ 0 ] ; rv [ 1 ] [ 3 ] = _0_0 ; rv [ 2 ] [ 0 ] = ( t [ 2 ] [ 0 ] * ( t [ 2 ] [ 2 ] + t [ 2 ] [ 2 ] ) + rw * ( t [ 2 ] [ 1 ] + t [ 2 ] [ 1 ] ) ) * t [ 1 ] [ 0 ] ; rv [ 2 ] [ 1 ] = ( t [ 2 ] [ 1 ] * ( t [ 2 ] [ 2 ] + t [ 2 ] [ 2 ] ) - rw * ( t [ 2 ] [ 0 ] + t [ 2 ] [ 0 ] ) ) * t [ 1 ] [ 0 ] ; rv [ 2 ] [ 2 ] = ( _1_0 - ( t [ 2 ] [ 0 ] * ( t [ 2 ] [ 0 ] + t [ 2 ] [ 0 ] ) + t [ 2 ] [ 1 ] * ( t [ 2 ] [ 1 ] + t [ 2 ] [ 1 ] ) ) ) * t [ 1 ] [ 0 ] ; rv [ 2 ] [ 3 ] = _0_0 ; rv [ 3 ] [ 0 ] = t [ 0 ] [ 0 ] ; rv [ 3 ] [ 1 ] = t [ 0 ] [ 1 ] ; rv [ 3 ] [ 2 ] = t [ 0 ] [ 2 ] ; rv [ 3 ] [ 3 ] = 1.0 ; return rv ; } mat3 bc ( in vec4 qZ , in mat3 rx ) { if ( qZ . w < 0. ) qZ . xyz *= - 1. ; rx [ 2 ] = qZ . xyz ; return rx ; } vec4 ry ( in mat3 rx ) { return vec4 ( rx [ 2 ] , sqrt ( abs ( 1. - rx [ 2 ] [ 0 ] * rx [ 2 ] [ 0 ] - rx [ 2 ] [ 1 ] * rx [ 2 ] [ 1 ] - rx [ 2 ] [ 2 ] * rx [ 2 ] [ 2 ] ) ) ) ; } vec3 ap ( mat3 rx , vec3 rk ) { vec3 q_ = rk * rx [ 1 ] ; vec4 qZ = ry ( rx ) ; q_ = T ( qZ , q_ ) ; q_ += rx [ 0 ] ; return q_ ; } vec3 _ ( mat3 rx , vec3 bH ) { vec3 q_ = bH * rx [ 1 ] ; vec4 qZ = ry ( rx ) ; q_ = T ( qZ , q_ ) ; return q_ ; } vec3 bI ( mat3 rx , vec3 rz ) { vec3 q_ = rz / rx [ 1 ] ; vec4 qZ = ry ( rx ) ; q_ = T ( qZ , q_ ) ; return q_ ; } mat3 aZ ( in vec3 rj , in mat3 rx ) { rx [ 0 ] = rj ; return rx ; } vec3 ex ( in mat3 rx ) { return rx [ 0 ] ; } mat3 a_ ( in vec3 hK , in mat3 rx ) { rx [ 1 ] = hK ; return rx ; } vec3 rA ( in mat3 rx ) { return rx [ 1 ] ; } mat3 bd ( in mat3 rx , in mat3 rB ) { mat3 rC ; vec3 rj = ex ( rx ) ; vec3 rD = ex ( rB ) ; vec3 hK = rA ( rx ) ; vec3 rE = rA ( rB ) ; vec4 qZ = ry ( rx ) ; vec4 rF = ry ( rB ) ; vec3 rG = rl ( rj , hK , qZ , rD ) ; rC = aZ ( rG , rC ) ; vec3 rH = hK * rE ; rC = a_ ( rH , rC ) ; vec4 rI = rc ( qZ , rF ) ; rC = bc ( rI , rC ) ; return rC ; } mat3 bd ( in mat3 rx , in mat3 rB , out mat3 q_ ) { q_ = bd ( rx , rB ) ; return q_ ; } vec4 R ( in vec4 rJ ) { return normalize ( rJ ) ; } vec4 R ( in vec4 rJ , out float P , out float Q ) { vec4 qZ = R ( rJ ) ; P = length ( rJ ) * M_PI ; Q = sign ( rJ [ 3 ] ) ; return R ( rJ ) ; }".split(" ")}]}}]}]};
f["include/mirror.glslf"]={$:"grp",da:[{$:"cond",da:[{$:"ifndef",ba:"MIRROR_GLSLF",ha:{$:"grp",da:[{$:"define",ba:"MIRROR_GLSLF",aa:[""]},{$:"var",ba:"REFLECTION_TYPE",aa:["REFL_NONE"]},{$:"var",ba:"REFLECTION_PASS",aa:["REFL_PASS_NONE"]},{$:"var",ba:"USE_BSDF_SKY_DIM",aa:[""]},{$:"include",oa:"std.glsl"},{$:"cond",da:[{$:"if",ga:["REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2},"REFLECTION_TYPE","REFL_CUBE",{$:"equal_expr",ia:2},"REFLECTION_TYPE","REFL_MIRRORMAP",{$:"equal_expr",ia:2},{$:"logical_or_expr",
ia:3}],ha:{$:"grp",da:[{$:"include",oa:"color_util.glslf"},{$:"include",oa:"math.glslv"},{$:"define",ba:"REFL_BUMP",aa:["0.1"]},{$:"txt",aa:"float rK ( in vec3 D , vec3 eN , float ec , float fk ) { vec3 fi = normalize ( eN + D ) ; float fj = 1.0 - dot ( D , fi ) ; float r = fk + ( 1.0 - fk ) * pow ( fj , ec ) ; return r ; } void cQ ( inout vec3 rL , vec3 D , vec3 U , float rM , mat3 N ) { vec3 eN = reflect ( - D , U ) ; float ec = u_fresnel_params [ 0 ] ; float fk = u_fresnel_params [ 1 ] ; float r = 1.0 ; if ( ec != 0.0 ) r = rK ( D , eN , ec , fk ) ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["REFLECTION_TYPE","REFL_CUBE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 eS = GLSL_TEXTURE_CUBE ( u_cube_reflection , eN ) . xyz ;".split(" ")}]}},{$:"elif",ga:["REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["REFLECTION_PASS","REFL_PASS_NONE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 rN = u_refl_plane . xyz * dot ( U , u_refl_plane . xyz ) ; vec3 rO = U - rN ; vec2 rP = bI ( N , rO ) . xy ; vec2 rQ = l . xy / l . z ; rQ += rP * REFL_BUMP ; vec3 eS = GLSL_TEXTURE ( u_plane_reflection , rQ ) . rgb ;".split(" ")}]}},
{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec3 eS = vec3 ( 1.0 ) ; rM = 0.0 ;".split(" ")}]}}]}]}},{$:"elif",ga:["REFLECTION_TYPE","REFL_MIRRORMAP",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 eS = GLSL_TEXTURE_CUBE ( u_mirrormap , eN ) . xyz ;".split(" ")}]}}]},{$:"txt",aa:"bG ( eS . rgb ) ; rL = mix ( rL , eS , rM * r ) ; }".split(" ")}]}},{$:"elif",ga:["REFLECTION_TYPE","REFL_PBR_STANDARD",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 rU ( float eg , vec3 rR , float ef ) { float rS = 1.0 - eg ; float rT = rS * rS ; rT = rT * rS * rT ; return rR + ( max ( vec3 ( 1.0 - ef ) , rR ) - rR ) * rT ; } vec3 sf ( vec3 rL , vec3 rV , vec3 D , vec3 U , float rW , float rX , mat3 N ) { float rY = max ( dot ( normalize ( U ) , D ) , _0_0 ) ; vec3 eN = reflect ( - D , U ) ; float ef = sqrt ( rX ) ; vec3 rR = vec3 ( 0.04 ) ; rR = mix ( rR , rV , rW ) ; vec3 rZ = rU ( rY , rR , ef ) ; vec3 r_ = rZ ; vec3 sa = vec3 ( _1_0 ) - r_ ; sa *= vec3 ( 1.0 - rW ) ; vec3 bx = GLSL_TEXTURE_CUBE ( u_cube_irradiance , U ) . xyz ; vec3 sb = bx * rL ; const float sc = 5.0 ; vec3 el = GLSL_TEXTURE_CUBE_LOD ( u_cube_r_convolution , eN , ef * sc ) . rgb ; vec2 sd = GLSL_TEXTURE ( u_brdf , vec2 ( rY , ef ) ) . rg ; vec3 cO = el * ( rZ * sd . x + sd . y ) ; vec3 se = ( sa * sb + cO ) ; return se ; }".split(" ")}]}},
{$:"elif",ga:["REFLECTION_TYPE","REFL_PBR_SIMPLE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 rU ( float eg , vec3 rR , float ef ) { float rS = 1.0 - eg ; float rT = rS * rS ; rT = rT * rS * rT ; return rR + ( max ( vec3 ( 1.0 - ef ) , rR ) - rR ) * rT ; } vec3 sf ( vec3 rL , vec3 rV , vec3 D , vec3 U , float rW , float rX , mat3 N ) {".split(" ")},{$:"cond",da:[{$:"if",ga:["USE_BSDF_SKY_DIM"],ha:{$:"grp",da:[{$:"txt",aa:"vec3 ec = normalize ( U ) ; float rY = max ( dot ( ec , D ) , _0_0 ) ; vec3 eN = reflect ( - D , U ) ; float sg = max ( 2.0 / ( rX * rX ) - 2.0 , _0_0 ) ; vec3 rR = vec3 ( 0.04 ) ; rR = mix ( rR , rV , rW ) ; vec3 rZ = rU ( rY , rR , sqrt ( rX ) ) ; vec3 r_ = rZ ; vec3 sa = vec3 ( _1_0 ) - r_ ; sa *= 1.0 - rW ; vec3 sb = GLSL_TEXTURE_CUBE_LOD ( u_sky_reflection , ec , 100.0 ) . xyz ; bG ( sb ) ; sb *= rL ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["GLSL1"],ha:{$:"grp",da:[{$:"txt",aa:["float","sh","=","u_bsdf_cube_sky_dim",";"]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"float sh = float ( textureSize ( u_sky_reflection , 0 ) . x ) ;".split(" ")}]}}]},{$:"txt",aa:"float si = log2 ( ( sh * sqrt ( 3.0 ) ) / sqrt ( sg + _1_0 ) ) ; vec3 cO = GLSL_TEXTURE_CUBE_LOD ( u_sky_reflection , eN , si ) . xyz ; bG ( cO ) ; vec3 se = sa * sb + r_ * cO ; return se ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["return","rL",
";"]}]}}]},{$:"txt",aa:["}"]}]}}]}]}}]}]};f["include/nodes.glslf"]={$:"grp",da:[{$:"cond",da:[{$:"ifndef",ba:"NODES_GLSLF",ha:{$:"grp",da:[{$:"define",ba:"NODES_GLSLF",aa:[""]},{$:"var",ba:"CAUSTICS",aa:["0"]},{$:"var",ba:"CALC_TBN_SPACE",aa:["0"]},{$:"var",ba:"DOUBLE_SIDED_LIGHTING",aa:["0"]},{$:"var",ba:"REFLECTION_PASS",aa:["REFL_PASS_NONE"]},{$:"var",ba:"USE_REFRACTION",aa:["0"]},{$:"var",ba:"HAS_REFRACT_TEXTURE",aa:["0"]},{$:"var",ba:"NUM_LIGHTS",aa:["0"]},{$:"var",ba:"REFLECTION_TYPE",aa:["REFL_NONE"]},
{$:"var",ba:"USE_DERIVATIVES_EXT",aa:["0"]},{$:"var",ba:"CAMERA_TYPE",aa:["CAM_TYPE_PERSP"]},{$:"var",ba:"IS_WORLD",aa:["0"]},{$:"var",ba:"USE_BSDF_PRINCIPLED_REFRACT",aa:["0"]},{$:"var",ba:"USE_BSDF_TRANSPARENT_REFRACT",aa:["0"]},{$:"var",ba:"USE_BSDF_TRANSPARENT_ALPHA",aa:["0"]},{$:"cond",da:[{$:"if",ga:["USE_NODE_MATERIAL_BEGIN","USE_NODE_BSDF_BEGIN",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"include",oa:"mirror.glslf"},{$:"include",oa:"shadow.glslf"},{$:"include",oa:"environment.glslf"}]}}]},
{$:"cond",da:[{$:"if",ga:["USE_NODE_B4W_REFRACTION","USE_REFRACTION",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"include",oa:"refraction.glslf"}]}}]},{$:"include",oa:"color_util.glslf"},{$:"include",oa:"math.glslv"},{$:"cond",da:[{$:"if",ga:["USE_NODE_GEOMETRY_OR","USE_NODE_TEX_COORD_GE",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec3","sj",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_B4W_REFRACTION"],ha:{$:"grp",da:[{$:"txt",aa:"vec3 sm ( in vec3 sk , in float sl ) { vec3 fa = vec3 ( _0_0 ) ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["USE_REFRACTION"],ha:{$:"grp",da:[{$:"txt",aa:"fa = cS ( l , sk . xy * sl ) ;".split(" ")}]}},{$:"elif",ga:["HAS_REFRACT_TEXTURE"],ha:{$:"grp",da:[{$:"txt",aa:"fa = GLSL_TEXTURE ( u_refractmap , l . xy / l . z ) . rgb ; bG ( fa ) ;".split(" ")}]}}]},{$:"txt",aa:["return","fa",";","}"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_HUE_SAT","USE_NODE_MIX_RGB_HUE","USE_NODE_MIX_RGB_SATURATION","USE_NODE_MIX_RGB_VALUE","USE_NODE_MIX_RGB_COLOR","USE_NODE_SEPHSV",{$:"logical_or_expr",
ia:6}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 kj ( vec3 rgb ) { vec4 hM = vec4 ( _0_0 , - _1_0 / 3.0 , 2.0 / 3.0 , - _1_0 ) ; vec4 p = mix ( vec4 ( rgb . bg , hM . wz ) , vec4 ( rgb . gb , hM . xy ) , step ( rgb . b , rgb . g ) ) ; vec4 q = mix ( vec4 ( p . xyw , rgb . r ) , vec4 ( rgb . r , p . yzx ) , step ( p . x , rgb . r ) ) ; float dC = q . x - min ( q . w , q . y ) ; float iF = 1.0e-10 ; return vec3 ( abs ( q . z + ( q . w - q . y ) / ( 6.0 * dC + iF ) ) , dC / ( q . x + iF ) , q . x ) ; }".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["USE_NODE_HUE_SAT","USE_NODE_MIX_RGB_HUE","USE_NODE_MIX_RGB_SATURATION","USE_NODE_MIX_RGB_VALUE","USE_NODE_MIX_RGB_COLOR","USE_NODE_COMBHSV",{$:"logical_or_expr",ia:6}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 kl ( vec3 kk ) { vec4 hM = vec4 ( _1_0 , 2.0 / 3.0 , _1_0 / 3.0 , 3.0 ) ; vec3 p = abs ( fract ( vec3 ( kk . r , kk . r , kk . r ) + hM . xyz ) * 6.0 - hM . www ) ; return kk . b * mix ( hM . xxx , clamp ( p - hM . xxx , _0_0 , _1_0 ) , kk . g ) ; }".split(" ")}]}}]},{$:"cond",
da:[{$:"if",ga:["USE_NODE_GEOMETRY_UV","USE_NODE_B4W_PARALLAX","USE_NODE_UV_MERGED","USE_NODE_TEX_COORD_UV","USE_NODE_UVMAP",{$:"logical_or_expr",ia:5}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 sn ( vec2 gX ) { return vec3 ( gX * 2.0 - vec2 ( _1_0 , _1_0 ) , _0_0 ) ; }".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_TEXTURE_COLOR","USE_NODE_TEXTURE_NORMAL","USE_NODE_B4W_PARALLAX",{$:"logical_or_expr",ia:3}],ha:{$:"grp",da:[{$:"txt",aa:"vec2 so ( vec3 rk ) { return vec2 ( rk . xy * _0_5 + vec2 ( _0_5 , _0_5 ) ) ; }".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["USE_NODE_FRESNEL","USE_NODE_LAYER_WEIGHT",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"float sv ( vec3 sr , vec3 rz , float su ) { float dx = abs ( dot ( sr , rz ) ) ; float g = su * su - _1_0 + dx * dx ; float ea ; if ( g > _0_0 ) { g = sqrt ( g ) ; float cG = ( g - dx ) / ( g + dx ) ; float hS = ( dx * ( g + dx ) - _1_0 ) / ( dx * ( g - dx ) + _1_0 ) ; ea = _0_5 * cG * cG * ( _1_0 + hS * hS ) ; } else { ea = _1_0 ; } return ea ; }".split(" ")}]}}]},{$:"node",
ba:"CAMERA",ma:[],la:[{$:"node_out",ba:"sU",fa:["vec3"],ea:!0},{$:"node_out",ba:"sV",fa:["float"],ea:!0},{$:"node_out",ba:"sW",fa:["float"],ea:!0}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_sU"],ja:[{$:"txt",aa:"sU = normalize ( sR . xyz ) ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_sV"],ja:[{$:"txt",aa:"sV = abs ( sR . z ) ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_sW"],ja:[{$:"txt",aa:"sW = length ( sR . xyz ) ;".split(" ")}]}]}]},{$:"node",ba:"COMBRGB",
ma:[],la:[{$:"node_in",ba:"sX",fa:["float"],ea:!1},{$:"node_in",ba:"sY",fa:["float"],ea:!1},{$:"node_in",ba:"sZ",fa:["float"],ea:!1},{$:"node_out",ba:"s_",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"s_ = vec3 ( sX , sY , sZ ) ;".split(" ")}]},{$:"node",ba:"COMBHSV",ma:[],la:[{$:"node_in",ba:"ta",fa:["float"],ea:!1},{$:"node_in",ba:"tb",fa:["float"],ea:!1},{$:"node_in",ba:"tc",fa:["float"],ea:!1},{$:"node_out",ba:"td",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"td = kl ( vec3 ( ta , tb , tc ) ) ;".split(" ")}]},
{$:"node",ba:"EMPTY_UV",ma:[],la:[{$:"node_out",ba:"te",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"te = vec3 ( - _1_0 , - _1_0 , _0_0 ) ;".split(" ")}]},{$:"node",ba:"EMPTY_VC",ma:[],la:[{$:"node_out",ba:"tf",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"tf = vec3 ( _0_0 ) ;".split(" ")}]},{$:"node",ba:"GEOMETRY_UV",ma:[],la:[{$:"node_out",ba:"tg",fa:["vec3"],ea:!1},{$:"node_param",ba:"sw",fa:["GLSL_IN","vec2"],ea:!1}],ja:[{$:"txt",aa:"tg = sn ( sw ) ;".split(" ")}]},{$:"node",ba:"GEOMETRY_OR",ma:[],la:[{$:"node_out",
ba:"th",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"th = 2.0 * sj - vec3 ( _1_0 ) ;".split(" ")}]},{$:"node",ba:"GEOMETRY_VC",ma:[],la:[{$:"node_out",ba:"ti",fa:["vec3"],ea:!1},{$:"node_param",ba:"sx",fa:["GLSL_IN","vec3"],ea:!1}],ja:[{$:"txt",aa:"ti = max ( vec3 ( _0_0 ) , sx ) ; bG ( ti ) ;".split(" ")}]},{$:"node",ba:"GEOMETRY_VC1",ma:[],la:[{$:"node_out",ba:"tj",fa:["float"],ea:!1},{$:"node_param",ba:"sy",fa:["GLSL_IN","float"],ea:!1}],ja:[{$:"txt",aa:"tj = max ( _0_0 , sy ) ; bG ( tj ) ;".split(" ")}]},
{$:"node",ba:"GEOMETRY_VC2",ma:[],la:[{$:"node_out",ba:"tk",fa:["float"],ea:!1},{$:"node_out",ba:"tl",fa:["float"],ea:!1},{$:"node_param",ba:"sz",fa:["GLSL_IN","vec2"],ea:!1}],ja:[{$:"txt",aa:"tk = max ( _0_0 , sz [ 0 ] ) ; tl = max ( _0_0 , sz [ 1 ] ) ; bG ( tk ) ; bG ( tl ) ;".split(" ")}]},{$:"node",ba:"GEOMETRY_VC3",ma:[],la:[{$:"node_out",ba:"tm",fa:["float"],ea:!1},{$:"node_out",ba:"tn",fa:["float"],ea:!1},{$:"node_out",ba:"to",fa:["float"],ea:!1},{$:"node_param",ba:"sA",fa:["GLSL_IN","vec3"],
ea:!1}],ja:[{$:"txt",aa:"tm = max ( _0_0 , sA [ 0 ] ) ; tn = max ( _0_0 , sA [ 1 ] ) ; to = max ( _0_0 , sA [ 2 ] ) ; bG ( tm ) ; bG ( tn ) ; bG ( to ) ;".split(" ")}]},{$:"node",ba:"GEOMETRY_NO",ma:[{$:"node_var",ba:"USE_NORMAL_IN",aa:["0"]}],la:[{$:"node_in",ba:"tr",fa:["vec3"],ea:!1},{$:"node_out",ba:"tu",fa:["vec3"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["USE_NORMAL_IN"],ja:[{$:"txt",aa:["tu","=","tr",";"]}]},{$:"node_else",ja:[{$:"txt",aa:"tu = sK . xyz ;".split(" ")}]}]}]},{$:"node",
ba:"GEOMETRY_FB",ma:[],la:[{$:"node_out",ba:"tv",fa:["float"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["REFLECTION_PASS","REFL_PASS_PLANE",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"tv = ( gl_FrontFacing ) ? _0_0 : _1_0 ;".split(" ")}]},{$:"node_else",ja:[{$:"txt",aa:"tv = ( gl_FrontFacing ) ? _1_0 : _0_0 ;".split(" ")}]}]}]},{$:"node",ba:"GEOMETRY_BF",ma:[],la:[{$:"node_out",ba:"tw",fa:["float"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["REFLECTION_PASS","REFL_PASS_PLANE",{$:"equal_expr",
ia:2}],ja:[{$:"txt",aa:"tw = ( gl_FrontFacing ) ? _1_0 : _0_0 ;".split(" ")}]},{$:"node_else",ja:[{$:"txt",aa:"tw = ( gl_FrontFacing ) ? _0_0 : _1_0 ;".split(" ")}]}]}]},{$:"node",ba:"GEOMETRY_VW",ma:[],la:[{$:"node_out",ba:"tx",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"tx = - _ ( u_view_tsr_frag , oy ) ;".split(" ")}]},{$:"node",ba:"GEOMETRY_LO",ma:[],la:[{$:"node_out",ba:"ty",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"ty = sR . xyz ;".split(" ")}]},{$:"node",ba:"GEOMETRY_GL",ma:[],la:[{$:"node_out",ba:"tz",
fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:["tz","=","ow",";"]}]},{$:"node",ba:"GEOMETRY_IN",ma:[],la:[{$:"node_out",ba:"tA",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:["tA","=","oy",";"]}]},{$:"node",ba:"NEW_GEOMETRY",ma:[],la:[{$:"node_out",ba:"tB",fa:["vec3"],ea:!1},{$:"node_out",ba:"tC",fa:["vec3"],ea:!1},{$:"node_out",ba:"tD",fa:["vec3"],ea:!1},{$:"node_out",ba:"tE",fa:["vec3"],ea:!1},{$:"node_out",ba:"tF",fa:["vec3"],ea:!1},{$:"node_out",ba:"tG",fa:["vec3"],ea:!1},{$:"node_out",ba:"tH",fa:["float"],ea:!1},
{$:"node_out",ba:"tI",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"tB = vec3 ( _0_0 ) ; tC = vec3 ( _0_0 ) ; tD = vec3 ( _0_0 ) ; tE = vec3 ( _0_0 ) ; tF = vec3 ( _0_0 ) ; tG = vec3 ( _0_0 ) ; tH = _0_0 ; tI = _0_0 ;".split(" ")}]},{$:"node",ba:"HUE_SAT",ma:[],la:[{$:"node_in",ba:"tJ",fa:["float"],ea:!1},{$:"node_in",ba:"tK",fa:["float"],ea:!1},{$:"node_in",ba:"tL",fa:["float"],ea:!1},{$:"node_in",ba:"tM",fa:["float"],ea:!1},{$:"node_in",ba:"tN",fa:["vec3"],ea:!1},{$:"node_out",ba:"tO",fa:["vec3"],ea:!1}],
ja:[{$:"txt",aa:"vec3 kk = kj ( tN ) ; kk [ 0 ] += ( tJ - _0_5 ) ; if ( kk [ 0 ] > _1_0 ) kk [ 0 ] -= _1_0 ; else if ( kk [ 0 ] < _0_0 ) kk [ 0 ] += _1_0 ; kk *= vec3 ( _1_0 , tK , tL ) ; kk = mix ( vec3 ( _1_0 ) , mix ( vec3 ( _0_0 ) , kk , step ( vec3 ( _0_0 ) , kk ) ) , step ( kk , vec3 ( _1_0 ) ) ) ; tO = mix ( tN , kl ( kk ) , tM ) ;".split(" ")}]},{$:"node",ba:"INVERT",ma:[],la:[{$:"node_in",ba:"tP",fa:["float"],ea:!1},{$:"node_in",ba:"tQ",fa:["vec3"],ea:!1},{$:"node_out",ba:"tR",fa:["vec3"],
ea:!1}],ja:[{$:"txt",aa:"tR = mix ( tQ , vec3 ( _1_0 ) - tQ , tP ) ;".split(" ")}]},{$:"node",ba:"LAMP",ma:[{$:"node_var",ba:"LAMP_TYPE",aa:["HEMI"]},{$:"node_var",ba:"LAMP_INDEX",aa:["0"]},{$:"node_var",ba:"LAMP_USE_SPHERE",aa:["0"]},{$:"node_var",ba:"LAMP_SPOT_SIZE",aa:["0.8"]},{$:"node_var",ba:"LAMP_SPOT_BLEND",aa:["0.03"]},{$:"node_var",ba:"LAMP_LIGHT_DIST",aa:["30.0"]}],la:[{$:"node_out",ba:"tS",fa:["vec3"],ea:!0},{$:"node_out",ba:"tT",fa:["vec3"],ea:!1},{$:"node_out",ba:"tU",fa:["float"],ea:!1},
{$:"node_out",ba:"tV",fa:["float"],ea:!0}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["LAMP_INDEX",1,{$:"negative_expr",ia:1},{$:"non_equal_expr",ia:2}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_tS"],ja:[{$:"txt",aa:"tS = u_lamp_light_color_intensities [ LAMP_INDEX ] ;".split(" ")}]}]},{$:"txt",aa:"vec3 tW = u_lamp_light_directions [ LAMP_INDEX ] ; vec3 tX = u_lamp_light_positions [ LAMP_INDEX ] ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["LAMP_TYPE","SPOT",{$:"equal_expr",ia:2},"LAMP_TYPE",
"POINT",{$:"equal_expr",ia:2},{$:"logical_or_expr",ia:2}],ja:[{$:"txt",aa:"tT = h - tX ; tU = length ( tT ) ; tT = normalize ( tT ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_tV"],ja:[{$:"txt",aa:"tV = LAMP_LIGHT_DIST / ( LAMP_LIGHT_DIST + tU * tU ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["LAMP_TYPE","SPOT",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"float pb = dot ( - tT , tW ) ; pb *= smoothstep ( _0_0 , _1_0 , ( pb - LAMP_SPOT_SIZE ) / LAMP_SPOT_BLEND ) ; tV *= pb ;".split(" ")}]}]},
{$:"node_cond",da:[{$:"node_if",ga:["LAMP_USE_SPHERE"],ja:[{$:"txt",aa:"tV *= max ( LAMP_LIGHT_DIST - tU , _0_0 ) / LAMP_LIGHT_DIST ;".split(" ")}]}]}]}]}]},{$:"node_else",ja:[{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_tT"],ja:[{$:"txt",aa:["tT","=","tW",";"]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_tU"],ja:[{$:"txt",aa:"tU = length ( tX - h ) ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_tV"],ja:[{$:"txt",aa:["tV","=","_1_0",";"]}]}]}]}]}]},{$:"node_else",ja:[{$:"node_cond",
da:[{$:"node_if",ga:["USE_OUT_tS"],ja:[{$:"txt",aa:"tS = vec3 ( _0_0 ) ;".split(" ")}]}]},{$:"txt",aa:"tT = vec3 ( _0_0 ) ; tU = 0.0 ;".split(" ")}]}]}]},{$:"node",ba:"NORMAL",ma:[],la:[{$:"node_in",ba:"tY",fa:["vec3"],ea:!1},{$:"node_out",ba:"tZ",fa:["vec3"],ea:!0},{$:"node_out",ba:"t_",fa:["float"],ea:!0},{$:"node_param",ba:"sB",fa:["vec3"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_tZ"],ja:[{$:"txt",aa:["tZ","=","sB",";"]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_t_"],ja:[{$:"txt",
aa:"t_ = - dot ( tY , sB ) ;".split(" ")}]}]}]},{$:"node",ba:"B4W_VECTOR_VIEW",ma:[],la:[{$:"node_in",ba:"ua",fa:["vec3"],ea:!1},{$:"node_out",ba:"ub",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"ub = - _ ( u_view_tsr_frag , ua ) ;".split(" ")}]},{$:"node",ba:"BSDF_BEGIN",ma:[],la:[{$:"node_in",ba:"uc",fa:["vec3"],ea:!1},{$:"node_in",ba:"ud",fa:["vec3"],ea:!1},{$:"node_in",ba:"ue",fa:["float"],ea:!1},{$:"node_in",ba:"uf",fa:["vec3"],ea:!1},{$:"node_in",ba:"ug",fa:["float"],ea:!1},{$:"node_in",ba:"uh",fa:["float"],
ea:!1},{$:"node_in",ba:"ui",fa:["vec3"],ea:!1},{$:"node_in",ba:"uj",fa:["float"],ea:!1},{$:"node_in",ba:"uk",fa:["float"],ea:!1},{$:"node_in",ba:"ul",fa:["vec3"],ea:!1},{$:"node_in",ba:"um",fa:["float"],ea:!1},{$:"node_in",ba:"un",fa:["vec3"],ea:!1},{$:"node_in",ba:"uo",fa:["float"],ea:!1},{$:"node_out",ba:"up",fa:["vec3"],ea:!1},{$:"node_out",ba:"uq",fa:["vec3"],ea:!1},{$:"node_out",ba:"ur",fa:["vec3"],ea:!1},{$:"node_out",ba:"us",fa:["vec3"],ea:!1},{$:"node_out",ba:"ut",fa:["vec3"],ea:!1},{$:"node_out",
ba:"uu",fa:["vec4"],ea:!1},{$:"node_out",ba:"uv",fa:["vec4"],ea:!1},{$:"node_out",ba:"uw",fa:["vec4"],ea:!1},{$:"node_out",ba:"ux",fa:["vec3"],ea:!1},{$:"node_out",ba:"uy",fa:["vec3"],ea:!1},{$:"node_out",ba:"uz",fa:["vec3"],ea:!1},{$:"node_out",ba:"uA",fa:["float"],ea:!1},{$:"node_out",ba:"uB",fa:["vec3"],ea:!1},{$:"node_out",ba:"uC",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"ur = ud ; us = uf ; ut = ui ; ux = ud ; uy = uf ; uz = ul ; uA = um ; uB = un ; uC = uo ; up = sS * ur ; uq = sT * u_environment_energy * cE ( ut ) ; uw = cH ( ur ) ; H = uw ; uu [ 0 ] = ue ; uu [ 1 ] = ug ; uu [ 2 ] = uh ; uv [ 0 ] = uj ; uv [ 1 ] = uk ;".split(" ")}]},
{$:"node",ba:"BSDF_END",ma:[],la:[{$:"node_in",ba:"uD",fa:["vec4"],ea:!1},{$:"node_in",ba:"uE",fa:["vec3"],ea:!1},{$:"node_in",ba:"uF",fa:["vec3"],ea:!1},{$:"node_in",ba:"uG",fa:["vec4"],ea:!1},{$:"node_in",ba:"uH",fa:["vec4"],ea:!1},{$:"node_in",ba:"uI",fa:["vec3"],ea:!1},{$:"node_in",ba:"uJ",fa:["vec3"],ea:!1},{$:"node_in",ba:"uK",fa:["vec3"],ea:!1},{$:"node_in",ba:"uL",fa:["float"],ea:!1},{$:"node_in",ba:"uM",fa:["vec3"],ea:!1},{$:"node_in",ba:"uN",fa:["float"],ea:!1},{$:"node_out",ba:"uO",fa:["vec3"],
ea:!1},{$:"node_out",ba:"uP",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"float uQ = clamp ( uG [ 1 ] , _0_0 , _1_0 ) ; float rW = uG [ 2 ] ; uO = uD . rgb ; uP = _1_0 ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["REFLECTION_TYPE","REFL_PBR_STANDARD",{$:"equal_expr",ia:2},"REFLECTION_TYPE","REFL_PBR_SIMPLE",{$:"equal_expr",ia:2},{$:"logical_or_expr",ia:2}],ja:[{$:"txt",aa:"uO += sf ( uI , uJ , oy , uF , rW , uQ , mat3 ( _0_0 ) ) ;".split(" ")}]},{$:"node_elif",ga:["REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",
ia:2}],ja:[{$:"txt",aa:"uO += sf ( uI , uJ , oy , uF , rW , u_view_tsr_frag ) ;".split(" ")}]}]},{$:"txt",aa:"uO += uE ; uO = mix ( uO , uK , uL ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_NODE_BSDF_TRANSPARENT"],ja:[{$:"node_cond",da:[{$:"node_if",ga:["USE_BSDF_TRANSPARENT_REFRACT"],ja:[{$:"txt",aa:"vec3 uR = GLSL_TEXTURE ( u_refractmap , l . xy / l . z ) . rgb ; bG ( uR ) ; uM = uM * uR ; uO += uM ; uP = _1_0 ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_BSDF_TRANSPARENT_ALPHA"],
ja:[{$:"txt",aa:"uO = mix ( uM , uO , uN ) ; uP = uN ;".split(" ")}]}]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_BSDF_PRINCIPLED_REFRACT"],ja:[{$:"txt",aa:"float uS = uH [ 0 ] ; float uT = uH [ 1 ] ; float uU = clamp ( uG [ 0 ] , _0_0 , _1_0 ) ; vec3 en = oy ; vec3 ei = normalize ( uF ) ; vec3 uV = refract ( - en , ei , _1_0 / uS ) ; uV *= length ( u_camera_eye_frag - h ) ; vec3 uW = aC ( u_proj_matrix_frag * vec4 ( ap ( u_view_tsr_frag , ow + uV ) , _1_0 ) ) ; vec2 uX = uW . xy / uW . z ; const float sc = 10.0 ; vec3 fa = GLSL_TEXTURE_LOD ( u_refractmap , uX . xy , uU * sc ) . rgb ; bG ( fa ) ; float e_ = ( _1_0 - rW ) * uT ; uO = mix ( uO , fa , e_ ) ;".split(" ")}]}]},
{$:"txt",aa:["uF",";"]}]},{$:"node",ba:"BSDF_COMPUTE",ma:[{$:"node_var",ba:"MAT_USE_TBN_SHADING",aa:["0"]}],la:[{$:"node_in",ba:"uY",fa:["vec3"],ea:!1},{$:"node_in",ba:"uZ",fa:["vec2"],ea:!1},{$:"node_in",ba:"u_",fa:["vec3"],ea:!1},{$:"node_in",ba:"va",fa:["float"],ea:!1},{$:"node_in",ba:"vb",fa:["vec4"],ea:!1},{$:"node_out",ba:"vc",fa:["float"],ea:!1},{$:"node_out",ba:"vd",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"vec3 rz = u_ ; float uU = clamp ( vb [ 0 ] , _0_0 , _1_0 ) ; float uQ = clamp ( vb [ 1 ] , _0_0 , _1_0 ) ; float rW = vb [ 2 ] ; vec3 p_ = normalize ( oy + uY ) ; vec3 ve = ( _1_0 - va ) * vec3 ( dot ( rz , uY ) , max ( dot ( uY , p_ ) , _0_0 ) , max ( dot ( u_ , p_ ) , _0_0 ) ) + va ; float pj = ve . x ; float vf = ve . y ; float vg = ve . z ; vc = _0_0 ; if ( uZ . r != _0_0 ) { vc = pj ; if ( uU > _0_0 ) { float pz = max ( dot ( rz , oy ) , _0_0 ) ; float pA = uU * uU ; float cG = _1_0 - _0_5 * ( pA / ( pA + 0.33 ) ) ; vec3 pB = uY - pj * rz ; vec3 pC = oy - pz * rz ; if ( length ( pB ) == _0_0 || length ( pC ) == _0_0 || abs ( pj ) > _1_0 || abs ( pz ) > _1_0 ) vc = pj * cG ; else { float pD = acos ( pj ) ; float pE = acos ( pz ) ; vec3 pF = normalize ( pB ) ; vec3 pG = normalize ( pC ) ; float a , b ; a = max ( pD , pE ) ; b = min ( pD , pE ) ; b *= 0.95 ; float t = max ( dot ( pF , pG ) , _0_0 ) ; float hS = 0.45 * ( pA / ( pA + 0.09 ) ) ; vc = pj * ( cG + ( hS * t * sin ( a ) * tan ( b ) ) ) ; } } vc = max ( vc , _0_0 ) / M_PI ; } float L = uQ ; float vh = L * L ; float d_ = ( vg * vh - vg ) * vg + _1_0 ; float cD = vh / ( M_PI * d_ * d_ ) ; float vi ; float vj ; float vk = _1_0 - vf ; float vl = vk * vk ; vl = vl * vk * vl ; vi = _1_0 ; vj = vl ; float hM = L / 2.0 ; float vm = hM * hM ; float vn = _1_0 - vm ; float vo = _1_0 / ( vf * vf * vn + vm ) ; vi *= vo ; vj *= vo ; float rR = mix ( 0.04 , _1_0 , rW ) ; float vp = mix ( vj , vi , rR ) ; vd = max ( pj * cD * vp , _0_0 ) ;".split(" ")}]},
{$:"node",ba:"BSDF_PRINCIPLED",ma:[{$:"node_var",ba:"USE_NORMAL_IN",aa:["0"]}],la:[{$:"node_in",ba:"vq",fa:["vec4"],ea:!1},{$:"node_in",ba:"vr",fa:["float"],ea:!1},{$:"node_in",ba:"vs",fa:["float"],ea:!1},{$:"node_in",ba:"vt",fa:["float"],ea:!1},{$:"node_in",ba:"vu",fa:["float"],ea:!1},{$:"node_in",ba:"vv",fa:["vec3"],ea:!1},{$:"node_out",ba:"vw",fa:["vec3"],ea:!1},{$:"node_out",ba:"vx",fa:["vec3"],ea:!1},{$:"node_out",ba:"vy",fa:["float"],ea:!1},{$:"node_out",ba:"vz",fa:["vec3"],ea:!1},{$:"node_out",
ba:"vA",fa:["float"],ea:!1},{$:"node_out",ba:"vB",fa:["float"],ea:!1},{$:"node_out",ba:"vC",fa:["vec3"],ea:!1},{$:"node_out",ba:"vD",fa:["float"],ea:!1},{$:"node_out",ba:"vE",fa:["float"],ea:!1},{$:"node_out",ba:"vF",fa:["vec3"],ea:!1},{$:"node_out",ba:"vG",fa:["float"],ea:!1},{$:"node_out",ba:"vH",fa:["vec3"],ea:!1},{$:"node_out",ba:"vI",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"vz = vq . rgb ; vA = vs * vs ; vx = vq . rgb ; vy = vs ; vB = vr ; vD = vt ; vE = vu ; vG = _0_0 ; vI = _1_0 ;".split(" ")},
{$:"node_cond",da:[{$:"node_if",ga:["USE_NORMAL_IN"],ja:[{$:"txt",aa:["vC","=","vv",";"]}]},{$:"node_else",ja:[{$:"txt",aa:["vC","=","ox",";"]}]}]},{$:"txt",aa:"vw ; vF = vec3 ( _0_0 ) ; vH = vec3 ( _0_0 ) ;".split(" ")}]},{$:"node",ba:"BSDF_ANISOTROPIC",ma:[],la:[{$:"node_in",ba:"vJ",fa:["vec3"],ea:!1},{$:"node_in",ba:"vK",fa:["float"],ea:!1},{$:"node_in",ba:"vL",fa:["float"],ea:!1},{$:"node_in",ba:"vM",fa:["float"],ea:!1},{$:"node_in",ba:"vN",fa:["vec3"],ea:!1},{$:"node_in",ba:"vO",fa:["vec3"],
ea:!1},{$:"node_out",ba:"vP",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"vP = vJ ; vK ; vL ; vM ; vN ; vO ;".split(" ")}]},{$:"node",ba:"BSDF_DIFFUSE",ma:[{$:"node_var",ba:"USE_NORMAL_IN",aa:["0"]}],la:[{$:"node_in",ba:"vQ",fa:["vec3"],ea:!1},{$:"node_in",ba:"vR",fa:["float"],ea:!1},{$:"node_in",ba:"vS",fa:["vec3"],ea:!1},{$:"node_out",ba:"vT",fa:["vec3"],ea:!1},{$:"node_out",ba:"vU",fa:["vec3"],ea:!1},{$:"node_out",ba:"vV",fa:["float"],ea:!1},{$:"node_out",ba:"vW",fa:["vec3"],ea:!1},{$:"node_out",ba:"vX",
fa:["float"],ea:!1},{$:"node_out",ba:"vY",fa:["float"],ea:!1},{$:"node_out",ba:"vZ",fa:["vec3"],ea:!1},{$:"node_out",ba:"v_",fa:["float"],ea:!1},{$:"node_out",ba:"wa",fa:["float"],ea:!1},{$:"node_out",ba:"wb",fa:["vec3"],ea:!1},{$:"node_out",ba:"wc",fa:["float"],ea:!1},{$:"node_out",ba:"wd",fa:["vec3"],ea:!1},{$:"node_out",ba:"we",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"vU = vQ ; vV = vR ; vX = _1_0 ; vY = _0_0 ; v_ = 1.45 ; wa = _0_0 ; wc = _0_0 ; we = _1_0 ;".split(" ")},{$:"node_cond",da:[{$:"node_if",
ga:["USE_NORMAL_IN"],ja:[{$:"txt",aa:["vZ","=","vS",";"]}]},{$:"node_else",ja:[{$:"txt",aa:["vZ","=","ox",";"]}]}]},{$:"txt",aa:"vT ; vW = vec3 ( _0_0 ) ; wb = vec3 ( _0_0 ) ; wd = vec3 ( _0_0 ) ;".split(" ")}]},{$:"node",ba:"BSDF_GLASS",ma:[],la:[{$:"node_in",ba:"wf",fa:["vec3"],ea:!1},{$:"node_in",ba:"wg",fa:["float"],ea:!1},{$:"node_in",ba:"wh",fa:["float"],ea:!1},{$:"node_in",ba:"wi",fa:["vec3"],ea:!1},{$:"node_out",ba:"wj",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"wj = wf ; wg ; wh ; wi ;".split(" ")}]},
{$:"node",ba:"BSDF_GLOSSY",ma:[{$:"node_var",ba:"USE_NORMAL_IN",aa:["0"]}],la:[{$:"node_in",ba:"wk",fa:["vec3"],ea:!1},{$:"node_in",ba:"wl",fa:["float"],ea:!1},{$:"node_in",ba:"wm",fa:["vec3"],ea:!1},{$:"node_out",ba:"wn",fa:["vec3"],ea:!1},{$:"node_out",ba:"wo",fa:["vec3"],ea:!1},{$:"node_out",ba:"wp",fa:["float"],ea:!1},{$:"node_out",ba:"wq",fa:["vec3"],ea:!1},{$:"node_out",ba:"wr",fa:["float"],ea:!1},{$:"node_out",ba:"ws",fa:["float"],ea:!1},{$:"node_out",ba:"wt",fa:["vec3"],ea:!1},{$:"node_out",
ba:"wu",fa:["float"],ea:!1},{$:"node_out",ba:"wv",fa:["float"],ea:!1},{$:"node_out",ba:"wA",fa:["vec3"],ea:!1},{$:"node_out",ba:"wB",fa:["float"],ea:!1},{$:"node_out",ba:"wC",fa:["vec3"],ea:!1},{$:"node_out",ba:"wD",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"wq = wk ; wr = wl ; ws = _1_0 ; wu = 1.45 ; wv = _0_0 ; wB = _0_0 ; wD = _1_0 ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_NORMAL_IN"],ja:[{$:"txt",aa:["wt","=","wm",";"]}]},{$:"node_else",ja:[{$:"txt",aa:["wt","=","ox",";"]}]}]},{$:"txt",
aa:"wn ; wo = vec3 ( _0_0 ) ; wp = _0_0 ; wA = vec3 ( _0_0 ) ; wC = vec3 ( _0_0 ) ;".split(" ")}]},{$:"node",ba:"BSDF_HAIR",ma:[],la:[{$:"node_in",ba:"wE",fa:["vec3"],ea:!1},{$:"node_in",ba:"wF",fa:["float"],ea:!1},{$:"node_in",ba:"wG",fa:["float"],ea:!1},{$:"node_in",ba:"wH",fa:["float"],ea:!1},{$:"node_out",ba:"wI",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"wI = wE ; wF ; wG ; wH ;".split(" ")}]},{$:"node",ba:"BSDF_TRANSPARENT",ma:[],la:[{$:"node_in",ba:"wJ",fa:["vec3"],ea:!1},{$:"node_out",ba:"wK",fa:["vec3"],
ea:!1},{$:"node_out",ba:"wL",fa:["vec3"],ea:!1},{$:"node_out",ba:"wM",fa:["float"],ea:!1},{$:"node_out",ba:"wN",fa:["vec3"],ea:!1},{$:"node_out",ba:"wO",fa:["float"],ea:!1},{$:"node_out",ba:"wP",fa:["float"],ea:!1},{$:"node_out",ba:"wQ",fa:["vec3"],ea:!1},{$:"node_out",ba:"wR",fa:["float"],ea:!1},{$:"node_out",ba:"wS",fa:["float"],ea:!1},{$:"node_out",ba:"wT",fa:["vec3"],ea:!1},{$:"node_out",ba:"wU",fa:["float"],ea:!1},{$:"node_out",ba:"wV",fa:["vec3"],ea:!1},{$:"node_out",ba:"wW",fa:["float"],ea:!1}],
ja:[{$:"txt",aa:"wV = wJ ; wP = _0_0 ; wU = _0_0 ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_BSDF_TRANSPARENT_ALPHA"],ja:[{$:"txt",aa:["wW","=","_0_0",";"]}]},{$:"node_else",ja:[{$:"txt",aa:["wW","=","_1_0",";"]}]}]},{$:"txt",aa:"wQ = ox ; wK ; wL = vec3 ( _0_0 ) ; wM = _0_0 ; wN = vec3 ( _0_0 ) ; wO = _0_0 ; wT = vec3 ( _0_0 ) ;".split(" ")}]},{$:"node",ba:"BSDF_TRANSLUCENT",ma:[],la:[{$:"node_in",ba:"wX",fa:["vec3"],ea:!1},{$:"node_in",ba:"wY",fa:["vec3"],ea:!1},{$:"node_out",ba:"wZ",
fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"wZ = wX ; wY ;".split(" ")}]},{$:"node",ba:"BSDF_REFRACTION",ma:[],la:[{$:"node_in",ba:"w_",fa:["vec3"],ea:!1},{$:"node_in",ba:"xa",fa:["float"],ea:!1},{$:"node_in",ba:"xb",fa:["float"],ea:!1},{$:"node_in",ba:"xc",fa:["vec3"],ea:!1},{$:"node_out",ba:"xd",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"xd [ 0 ] = xd [ 1 ] = xd [ 2 ] = _0_0 ; w_ ; xa ; xb ; xc ;".split(" ")}]},{$:"node",ba:"BSDF_TOON",ma:[],la:[{$:"node_in",ba:"xe",fa:["vec3"],ea:!1},{$:"node_in",ba:"xf",fa:["float"],
ea:!1},{$:"node_in",ba:"xg",fa:["float"],ea:!1},{$:"node_in",ba:"xh",fa:["vec3"],ea:!1},{$:"node_out",ba:"xi",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"xi = xe ; xf ; xg ; xh ;".split(" ")}]},{$:"node",ba:"BSDF_VELVET",ma:[],la:[{$:"node_in",ba:"xj",fa:["vec3"],ea:!1},{$:"node_in",ba:"xk",fa:["float"],ea:!1},{$:"node_in",ba:"xl",fa:["vec3"],ea:!1},{$:"node_out",ba:"xm",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"xm = xj ; xk ; xl ;".split(" ")}]},{$:"node",ba:"SUBSURFACE_SCATTERING",ma:[],la:[{$:"node_in",ba:"xn",
fa:["vec3"],ea:!1},{$:"node_in",ba:"xo",fa:["float"],ea:!1},{$:"node_in",ba:"xp",fa:["vec3"],ea:!1},{$:"node_in",ba:"xq",fa:["float"],ea:!1},{$:"node_in",ba:"xr",fa:["float"],ea:!1},{$:"node_in",ba:"xs",fa:["vec3"],ea:!1},{$:"node_out",ba:"xt",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"xt [ 0 ] = xt [ 1 ] = xt [ 2 ] = _0_0 ; xn ; xp ; xq ; xr ; xs ; xo ;".split(" ")}]},{$:"node",ba:"EMISSION",ma:[],la:[{$:"node_in",ba:"xu",fa:["vec3"],ea:!1},{$:"node_in",ba:"xv",fa:["float"],ea:!1},{$:"node_out",ba:"xA",
fa:["vec3"],ea:!1},{$:"node_out",ba:"xB",fa:["vec3"],ea:!1},{$:"node_out",ba:"xC",fa:["float"],ea:!1},{$:"node_out",ba:"xD",fa:["vec3"],ea:!1},{$:"node_out",ba:"xE",fa:["float"],ea:!1},{$:"node_out",ba:"xF",fa:["float"],ea:!1},{$:"node_out",ba:"xG",fa:["vec3"],ea:!1},{$:"node_out",ba:"xH",fa:["float"],ea:!1},{$:"node_out",ba:"xI",fa:["float"],ea:!1},{$:"node_out",ba:"xJ",fa:["vec3"],ea:!1},{$:"node_out",ba:"xK",fa:["float"],ea:!1},{$:"node_out",ba:"xL",fa:["vec3"],ea:!1},{$:"node_out",ba:"xM",fa:["float"],
ea:!1}],ja:[{$:"txt",aa:"xJ = xv * xu ; xF = _0_0 ; xK = _1_0 ; xM = _1_0 ; xG = ox ; xH = 1.45 ; xI = _0_0 ; xA ; xB = vec3 ( _0_0 ) ; xC = _0_0 ; xD = vec3 ( _0_0 ) ; xE = _0_0 ;".split(" ")}]},{$:"node",ba:"AMBIENT_OCCLUSION",ma:[],la:[{$:"node_in",ba:"xN",fa:["vec3"],ea:!1},{$:"node_out",ba:"xO",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"xO [ 0 ] = xO [ 1 ] = xO [ 2 ] = _0_0 ; xN ;".split(" ")}]},{$:"node",ba:"HOLDOUT",ma:[],la:[{$:"node_out",ba:"xP",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"xP [ 0 ] = xP [ 1 ] = xP [ 2 ] = _0_0 ;".split(" ")}]},
{$:"node",ba:"VOLUME_ABSORPTION",ma:[],la:[{$:"node_in",ba:"xQ",fa:["vec3"],ea:!1},{$:"node_in",ba:"xR",fa:["float"],ea:!1},{$:"node_out",ba:"xS",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"xS [ 0 ] = xS [ 1 ] = xS [ 2 ] = _0_0 ; xQ ; xR ;".split(" ")}]},{$:"node",ba:"VOLUME_SCATTER",ma:[],la:[{$:"node_in",ba:"xT",fa:["vec3"],ea:!1},{$:"node_in",ba:"xU",fa:["float"],ea:!1},{$:"node_in",ba:"xV",fa:["float"],ea:!1},{$:"node_out",ba:"xW",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"xW [ 0 ] = xW [ 1 ] = xW [ 2 ] = _0_0 ; xT ; xU ; xV ;".split(" ")}]},
{$:"node",ba:"BUMP",ma:[{$:"node_var",ba:"INVERT",aa:["0"]},{$:"node_var",ba:"USE_NORMAL_IN",aa:["0"]}],la:[{$:"node_in",ba:"xX",fa:["float"],ea:!1},{$:"node_in",ba:"xY",fa:["float"],ea:!1},{$:"node_in",ba:"xZ",fa:["float"],ea:!1},{$:"node_in",ba:"x_",fa:["vec3"],ea:!1},{$:"node_out",ba:"ya",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float aM = xY ; float gL = xX ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["INVERT"],ja:[{$:"txt",aa:["aM","=","-","_1_0",";"]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_NORMAL_IN"],
ja:[{$:"txt",aa:["vec3","U","=","x_",";"]}]},{$:"node_else",ja:[{$:"txt",aa:["vec3","U","=","ox",";"]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_DERIVATIVES_EXT"],ja:[{$:"txt",aa:"vec3 yb = dFdx ( ow ) ; vec3 yc = dFdy ( ow ) ; vec3 yd = cross ( yc , U ) ; vec3 ye = cross ( U , yb ) ; float dy = dot ( yb , yd ) ; float yf = abs ( dy ) ; vec3 yg = dFdx ( xZ ) * yd + dFdy ( xZ ) * ye ; gL = max ( gL , _0_0 ) ; ya = normalize ( yf * U - aM * sign ( dy ) * yg ) ; ya = normalize ( gL * ya + ( _1_0 - gL ) * U ) ;".split(" ")}]},
{$:"node_else",ja:[{$:"txt",aa:["ya","=","U",";"]}]}]}]},{$:"node",ba:"DISPLACEMENT_BUMP",ma:[],la:[{$:"node_in",ba:"yh",fa:["float"],ea:!1},{$:"node_out",ba:"yi",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float aM = 0.1 ; vec3 U = ox ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_DERIVATIVES_EXT"],ja:[{$:"txt",aa:"vec3 yb = dFdx ( ow ) ; vec3 yc = dFdy ( ow ) ; vec3 yd = cross ( yc , U ) ; vec3 ye = cross ( U , yb ) ; float dy = dot ( yb , yd ) ; float yf = abs ( dy ) ; vec3 yg = dFdx ( yh ) * yd + dFdy ( yh ) * ye ; yi = normalize ( yf * U - aM * sign ( dy ) * yg ) ;".split(" ")}]},
{$:"node_else",ja:[{$:"txt",aa:["yi","=","U",";"]}]}]}]},{$:"node",ba:"NORMAL_MAP",ma:[{$:"node_var",ba:"SPACE",aa:["NM_TANGENT"]},{$:"node_var",ba:"USE_NORMAL_IN",aa:["0"]}],la:[{$:"node_in",ba:"yj",fa:["float"],ea:!1},{$:"node_in",ba:"yk",fa:["vec4"],ea:!1},{$:"node_in",ba:"yl",fa:["vec3"],ea:!1},{$:"node_out",ba:"ym",fa:["vec3"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["USE_NORMAL_IN"],ja:[{$:"txt",aa:["vec3","yn","=","yl",";"]}]},{$:"node_else",ja:[{$:"txt",aa:["vec3","yn","=","sM",";"]}]}]},
{$:"node_cond",da:[{$:"node_if",ga:["SPACE","NM_TANGENT",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"ym = 2.0 * yk . xyz - _1_0 ; ym = sQ * ym ;".split(" ")}]},{$:"node_elif",ga:["SPACE","NM_OBJECT",{$:"equal_expr",ia:2},"SPACE","NM_BLENDER_OBJECT",{$:"equal_expr",ia:2},{$:"logical_or_expr",ia:2}],ja:[{$:"txt",aa:"ym = 2.0 * yk . xyz - _1_0 ; ym . yz *= - _1_0 ; ym = bI ( u_model_tsr , ym ) ;".split(" ")}]},{$:"node_elif",ga:["SPACE","NM_WORLD",{$:"equal_expr",ia:2},"SPACE","NM_BLENDER_WORLD",{$:"equal_expr",
ia:2},{$:"logical_or_expr",ia:2}],ja:[{$:"txt",aa:"ym = 2.0 * yk . xyz - _1_0 ; ym . yz *= - _1_0 ;".split(" ")}]}]},{$:"txt",aa:"float me = max ( yj , _0_0 ) ; ym = normalize ( mix ( yn , ym , me ) ) ;".split(" ")}]},{$:"node",ba:"VECT_TRANSFORM",ma:[{$:"node_var",ba:"CONVERT_TYPE",aa:["VT_WORLD_TO_OBJECT"]},{$:"node_var",ba:"VECTOR_TYPE",aa:["VT_VECTOR"]}],la:[{$:"node_in",ba:"yo",fa:["vec3"],ea:!1},{$:"node_out",ba:"yp",fa:["vec3"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["CONVERT_TYPE",
"VT_WORLD_TO_WORLD",{$:"equal_expr",ia:2},"CONVERT_TYPE","VT_OBJECT_TO_OBJECT",{$:"equal_expr",ia:2},"CONVERT_TYPE","VT_CAMERA_TO_CAMERA",{$:"equal_expr",ia:2},{$:"logical_or_expr",ia:3}],ja:[{$:"txt",aa:["yp","=","yo",";"]}]},{$:"node_else",ja:[{$:"node_cond",da:[{$:"node_if",ga:["VECTOR_TYPE","VT_POINT",{$:"equal_expr",ia:2}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["CONVERT_TYPE","VT_WORLD_TO_CAMERA",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"yp = ap ( u_view_tsr_frag , yo ) ;".split(" ")}]},{$:"node_elif",
ga:["CONVERT_TYPE","VT_WORLD_TO_OBJECT",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"yp = ap ( u_model_tsr_inverse , yo ) ;".split(" ")}]},{$:"node_elif",ga:["CONVERT_TYPE","VT_OBJECT_TO_WORLD",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"yp = ap ( u_model_tsr , yo ) ;".split(" ")}]},{$:"node_elif",ga:["CONVERT_TYPE","VT_OBJECT_TO_CAMERA",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"yp = ap ( u_model_tsr , yo ) ; yp = ap ( u_view_tsr_frag , yp ) ;".split(" ")}]},{$:"node_elif",ga:["CONVERT_TYPE","VT_CAMERA_TO_WORLD",
{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"yp = ap ( u_view_tsr_inverse , yo ) ;".split(" ")}]},{$:"node_elif",ga:["CONVERT_TYPE","VT_CAMERA_TO_OBJECT",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"yp = ap ( u_view_tsr_inverse , yo ) ; yp = ap ( u_model_tsr_inverse , yp ) ;".split(" ")}]}]}]},{$:"node_else",ja:[{$:"node_cond",da:[{$:"node_if",ga:["CONVERT_TYPE","VT_WORLD_TO_CAMERA",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"yp = _ ( u_view_tsr_frag , yo ) ;".split(" ")}]},{$:"node_elif",ga:["CONVERT_TYPE","VT_WORLD_TO_OBJECT",
{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"yp = _ ( u_model_tsr_inverse , yo ) ;".split(" ")}]},{$:"node_elif",ga:["CONVERT_TYPE","VT_OBJECT_TO_WORLD",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"yp = _ ( u_model_tsr , yo ) ;".split(" ")}]},{$:"node_elif",ga:["CONVERT_TYPE","VT_OBJECT_TO_CAMERA",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"yp = _ ( u_model_tsr , yo ) ; yp = _ ( u_view_tsr_frag , yp ) ;".split(" ")}]},{$:"node_elif",ga:["CONVERT_TYPE","VT_CAMERA_TO_WORLD",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"yp = _ ( u_view_tsr_inverse , yo ) ;".split(" ")}]},
{$:"node_elif",ga:["CONVERT_TYPE","VT_CAMERA_TO_OBJECT",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"yp = _ ( u_view_tsr_inverse , yo ) ; yp = _ ( u_model_tsr_inverse , yp ) ;".split(" ")}]}]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["VECTOR_TYPE","VT_NORMAL",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"yp = normalize ( yp ) ;".split(" ")}]}]}]}]}]},{$:"node",ba:"BLACKBODY",ma:[],la:[{$:"node_in",ba:"yq",fa:["float"],ea:!1},{$:"node_out",ba:"yr",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"yr [ 0 ] = yr [ 1 ] = yr [ 2 ] = _0_0 ; yq ;".split(" ")}]},
{$:"node",ba:"WAVELENGTH",ma:[],la:[{$:"node_in",ba:"ys",fa:["float"],ea:!1},{$:"node_out",ba:"yt",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"yt [ 0 ] = yt [ 1 ] = yt [ 2 ] = _0_0 ; ys ;".split(" ")}]},{$:"node",ba:"SEPXYZ",ma:[],la:[{$:"node_in",ba:"yu",fa:["vec3"],ea:!1},{$:"node_out",ba:"yv",fa:["float"],ea:!1},{$:"node_out",ba:"yA",fa:["float"],ea:!1},{$:"node_out",ba:"yB",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"yv = yu [ 0 ] ; yA = yu [ 1 ] ; yB = yu [ 2 ] ;".split(" ")}]},{$:"node",ba:"COMBXYZ",ma:[],
la:[{$:"node_in",ba:"yC",fa:["float"],ea:!1},{$:"node_in",ba:"yD",fa:["float"],ea:!1},{$:"node_in",ba:"yE",fa:["float"],ea:!1},{$:"node_out",ba:"yF",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"yF [ 0 ] = yC ; yF [ 1 ] = yD ; yF [ 2 ] = yE ;".split(" ")}]},{$:"node",ba:"BRIGHTCONTRAST",ma:[],la:[{$:"node_in",ba:"yG",fa:["vec3"],ea:!1},{$:"node_in",ba:"yH",fa:["float"],ea:!1},{$:"node_in",ba:"yI",fa:["float"],ea:!1},{$:"node_out",ba:"yJ",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float b = yH - yI * _0_5 ; yJ = max ( ( _1_0 + yI ) * yG + b , vec3 ( _0_0 ) ) ;".split(" ")}]},
{$:"node",ba:"LIGHT_FALLOFF",ma:[],la:[{$:"node_in",ba:"yK",fa:["float"],ea:!1},{$:"node_in",ba:"yL",fa:["float"],ea:!1},{$:"node_out",ba:"yM",fa:["float"],ea:!1},{$:"node_out",ba:"yN",fa:["float"],ea:!1},{$:"node_out",ba:"yO",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"yM = yN = yO = _0_0 ; yK ; yL ;".split(" ")}]},{$:"node",ba:"TEX_SKY",ma:[],la:[{$:"node_in",ba:"yP",fa:["vec3"],ea:!1},{$:"node_out",ba:"yQ",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"yQ [ 0 ] = yQ [ 1 ] = yQ [ 2 ] = _0_0 ; yP ;".split(" ")}]},
{$:"node",ba:"TEX_NOISE",ma:[],la:[{$:"node_in",ba:"yR",fa:["vec3"],ea:!1},{$:"node_in",ba:"yS",fa:["float"],ea:!1},{$:"node_in",ba:"yT",fa:["float"],ea:!1},{$:"node_in",ba:"yU",fa:["float"],ea:!1},{$:"node_out",ba:"yV",fa:["vec3"],ea:!1},{$:"node_out",ba:"yW",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"yV [ 0 ] = yV [ 1 ] = yV [ 2 ] = _0_0 ; yW = _1_0 ; yR ; yS ; yT ; yU ;".split(" ")}]},{$:"node",ba:"TEX_WAVE",ma:[],la:[{$:"node_in",ba:"yX",fa:["vec3"],ea:!1},{$:"node_in",ba:"yY",fa:["float"],ea:!1},
{$:"node_in",ba:"yZ",fa:["float"],ea:!1},{$:"node_in",ba:"y_",fa:["float"],ea:!1},{$:"node_in",ba:"za",fa:["float"],ea:!1},{$:"node_out",ba:"zb",fa:["vec3"],ea:!1},{$:"node_out",ba:"zc",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"zb [ 0 ] = zb [ 1 ] = zb [ 2 ] = _0_0 ; zc = _1_0 ; yX ; yY ; yZ ; y_ ; za ;".split(" ")}]},{$:"node",ba:"TEX_VORONOI",ma:[],la:[{$:"node_in",ba:"zd",fa:["vec3"],ea:!1},{$:"node_in",ba:"ze",fa:["float"],ea:!1},{$:"node_out",ba:"zf",fa:["vec3"],ea:!1},{$:"node_out",ba:"zg",fa:["float"],
ea:!1}],ja:[{$:"txt",aa:"zf [ 0 ] = zf [ 1 ] = zf [ 2 ] = _0_0 ; zg = _1_0 ; zd ; ze ;".split(" ")}]},{$:"node",ba:"TEX_MUSGRAVE",ma:[],la:[{$:"node_in",ba:"zh",fa:["vec3"],ea:!1},{$:"node_in",ba:"zi",fa:["float"],ea:!1},{$:"node_in",ba:"zj",fa:["float"],ea:!1},{$:"node_in",ba:"zk",fa:["float"],ea:!1},{$:"node_in",ba:"zl",fa:["float"],ea:!1},{$:"node_in",ba:"zm",fa:["float"],ea:!1},{$:"node_in",ba:"zn",fa:["float"],ea:!1},{$:"node_out",ba:"zo",fa:["vec3"],ea:!1},{$:"node_out",ba:"zp",fa:["float"],
ea:!1}],ja:[{$:"txt",aa:"zo [ 0 ] = zo [ 1 ] = zo [ 2 ] = _0_0 ; zp = _1_0 ; zh ; zi ; zj ; zk ; zl ; zm ; zn ;".split(" ")}]},{$:"node",ba:"TEX_GRADIENT",ma:[],la:[{$:"node_in",ba:"zq",fa:["vec3"],ea:!1},{$:"node_out",ba:"zr",fa:["vec3"],ea:!1},{$:"node_out",ba:"zs",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"zr [ 0 ] = zr [ 1 ] = zr [ 2 ] = _0_0 ; zs = _1_0 ; zq ;".split(" ")}]},{$:"node",ba:"TEX_MAGIC",ma:[],la:[{$:"node_in",ba:"zt",fa:["vec3"],ea:!1},{$:"node_in",ba:"zu",fa:["float"],ea:!1},{$:"node_in",
ba:"zv",fa:["float"],ea:!1},{$:"node_out",ba:"zA",fa:["vec3"],ea:!1},{$:"node_out",ba:"zB",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"zA [ 0 ] = zA [ 1 ] = zA [ 2 ] = _0_0 ; zB = _1_0 ; zt ; zu ; zv ;".split(" ")}]},{$:"node",ba:"TEX_CHECKER",ma:[],la:[{$:"node_in",ba:"zC",fa:["vec3"],ea:!1},{$:"node_in",ba:"zD",fa:["vec3"],ea:!1},{$:"node_in",ba:"zE",fa:["vec3"],ea:!1},{$:"node_in",ba:"zF",fa:["float"],ea:!1},{$:"node_out",ba:"zG",fa:["vec3"],ea:!1},{$:"node_out",ba:"zH",fa:["float"],ea:!1}],ja:[{$:"txt",
aa:"zG [ 0 ] = zG [ 1 ] = zG [ 2 ] = _0_0 ; zH = _1_0 ; zC ; zD ; zE ; zF ;".split(" ")}]},{$:"node",ba:"TEX_BRICK",ma:[],la:[{$:"node_in",ba:"zI",fa:["vec3"],ea:!1},{$:"node_in",ba:"zJ",fa:["vec3"],ea:!1},{$:"node_in",ba:"zK",fa:["vec3"],ea:!1},{$:"node_in",ba:"zL",fa:["vec3"],ea:!1},{$:"node_in",ba:"zM",fa:["float"],ea:!1},{$:"node_in",ba:"zN",fa:["float"],ea:!1},{$:"node_in",ba:"zO",fa:["float"],ea:!1},{$:"node_in",ba:"zP",fa:["float"],ea:!1},{$:"node_in",ba:"zQ",fa:["float"],ea:!1},{$:"node_out",
ba:"zR",fa:["vec3"],ea:!1},{$:"node_out",ba:"zS",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"zR [ 0 ] = zR [ 1 ] = zR [ 2 ] = _0_0 ; zS = _1_0 ; zI ; zJ ; zK ; zL ; zM ; zN ; zO ; zP ; zQ ;".split(" ")}]},{$:"node",ba:"ADD_SHADER",ma:[],la:[{$:"node_in",ba:"zT",fa:["vec3"],ea:!1},{$:"node_in",ba:"zU",fa:["vec3"],ea:!1},{$:"node_out",ba:"zV",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"zV = clamp ( zT + zU , vec3 ( _0_0 ) , vec3 ( _1_0 ) ) ;".split(" ")}]},{$:"node",ba:"MIX_SHADER",ma:[],la:[{$:"node_in",ba:"zW",
fa:["float"],ea:!1},{$:"node_in",ba:"zX",fa:["vec3"],ea:!1},{$:"node_in",ba:"zY",fa:["vec3"],ea:!1},{$:"node_in",ba:"zZ",fa:["vec3"],ea:!1},{$:"node_in",ba:"z_",fa:["float"],ea:!1},{$:"node_in",ba:"Aa",fa:["vec3"],ea:!1},{$:"node_in",ba:"Ab",fa:["float"],ea:!1},{$:"node_in",ba:"Ac",fa:["float"],ea:!1},{$:"node_in",ba:"Ad",fa:["vec3"],ea:!1},{$:"node_in",ba:"Ae",fa:["float"],ea:!1},{$:"node_in",ba:"Af",fa:["float"],ea:!1},{$:"node_in",ba:"Ag",fa:["vec3"],ea:!1},{$:"node_in",ba:"Ah",fa:["float"],ea:!1},
{$:"node_in",ba:"Ai",fa:["vec3"],ea:!1},{$:"node_in",ba:"Aj",fa:["float"],ea:!1},{$:"node_in",ba:"Ak",fa:["vec3"],ea:!1},{$:"node_in",ba:"Al",fa:["float"],ea:!1},{$:"node_in",ba:"Am",fa:["vec3"],ea:!1},{$:"node_in",ba:"An",fa:["float"],ea:!1},{$:"node_in",ba:"Ao",fa:["float"],ea:!1},{$:"node_in",ba:"Ap",fa:["vec3"],ea:!1},{$:"node_in",ba:"Aq",fa:["float"],ea:!1},{$:"node_in",ba:"Ar",fa:["float"],ea:!1},{$:"node_in",ba:"As",fa:["vec3"],ea:!1},{$:"node_in",ba:"At",fa:["float"],ea:!1},{$:"node_in",ba:"Au",
fa:["vec3"],ea:!1},{$:"node_in",ba:"Av",fa:["float"],ea:!1},{$:"node_out",ba:"Aw",fa:["vec3"],ea:!1},{$:"node_out",ba:"Ax",fa:["vec3"],ea:!1},{$:"node_out",ba:"Ay",fa:["float"],ea:!1},{$:"node_out",ba:"Az",fa:["vec3"],ea:!1},{$:"node_out",ba:"AA",fa:["float"],ea:!1},{$:"node_out",ba:"AB",fa:["float"],ea:!1},{$:"node_out",ba:"AC",fa:["vec3"],ea:!1},{$:"node_out",ba:"AD",fa:["float"],ea:!1},{$:"node_out",ba:"AE",fa:["float"],ea:!1},{$:"node_out",ba:"AF",fa:["vec3"],ea:!1},{$:"node_out",ba:"AG",fa:["float"],
ea:!1},{$:"node_out",ba:"AH",fa:["vec3"],ea:!1},{$:"node_out",ba:"AI",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"float AJ = sqrt ( clamp ( zW , _0_0 , _1_0 ) ) ; Ax = mix ( zZ , Ak , AJ ) ; Ay = mix ( z_ , Al , AJ ) ; if ( Ac > _0_0 ) { if ( Ao > _0_0 ) { Az = mix ( Aa , Am , AJ ) ; AA = mix ( Ab , An , AJ ) ; } else { Az = Aa ; AA = Ab ; } } else { Az = Am ; AA = An ; } if ( Ah > _0_0 ) { if ( At > _0_0 ) { AF = mix ( Ag , As , AJ ) ; } else { AF = Ag ; } } else { AF = As ; } AB = mix ( Ac , Ao , AJ ) ; AC = mix ( Ad , Ap , AJ ) ; AG = mix ( Ah , At , AJ ) ; AH = mix ( Ai , Au , AJ ) ; AI = mix ( Aj , Av , AJ ) ;".split(" ")}]},
{$:"node",ba:"UV_MERGED",ma:[],la:[{$:"node_out",ba:"AK",fa:["vec3"],ea:!1},{$:"node_out",ba:"AL",fa:["vec3"],ea:!1},{$:"node_param",ba:"sC",fa:["GLSL_IN","vec2"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_AK"],ja:[{$:"txt",aa:"AK = sn ( sC ) ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_AL"],ja:[{$:"txt",aa:"AL = vec3 ( sC , _0_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"TEX_COORD_UV",ma:[],la:[{$:"node_out",ba:"AM",fa:["vec3"],ea:!1},{$:"node_param",ba:"sD",fa:["GLSL_IN",
"vec2"],ea:!1}],ja:[{$:"txt",aa:"AM = vec3 ( sD , _0_0 ) ;".split(" ")}]},{$:"node",ba:"TEX_COORD_NO",ma:[],la:[{$:"node_out",ba:"AN",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:["AN","=","ox",";"]}]},{$:"node",ba:"TEX_COORD_GE",ma:[],la:[{$:"node_out",ba:"AO",fa:["vec3"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["IS_WORLD",{$:"logic_negative_expr",ia:1}],ja:[{$:"txt",aa:["AO","=","sj",";"]}]},{$:"node_else",ja:[{$:"txt",aa:["AO","=","sJ",";"]}]}]}]},{$:"node",ba:"TEX_COORD_OB",ma:[],la:[{$:"node_out",
ba:"AP",fa:["vec3"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["IS_WORLD",{$:"logic_negative_expr",ia:1}],ja:[{$:"txt",aa:"AP = ap ( u_model_tsr_inverse , ow ) ;".split(" ")}]},{$:"node_else",ja:[{$:"txt",aa:["AP","=","sJ",";"]}]}]}]},{$:"node",ba:"TEX_COORD_CA",ma:[],la:[{$:"node_out",ba:"AQ",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"AQ . xy = sR . xy ; AQ . z = _1_0 ;".split(" ")}]},{$:"node",ba:"TEX_COORD_WI",ma:[],la:[{$:"node_out",ba:"AR",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"AR . xy = l . xy / l . z ; AR . z = _0_0 ;".split(" ")}]},
{$:"node",ba:"TEX_COORD_RE",ma:[],la:[{$:"node_out",ba:"AS",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"AS = reflect ( - oy , ox ) ;".split(" ")}]},{$:"node",ba:"UVMAP",ma:[],la:[{$:"node_out",ba:"AT",fa:["vec3"],ea:!1},{$:"node_param",ba:"sE",fa:["GLSL_IN","vec2"],ea:!1}],ja:[{$:"txt",aa:"AT = vec3 ( sE , _0_0 ) ;".split(" ")}]},{$:"node",ba:"PARTICLE_INFO",ma:[],la:[{$:"node_out",ba:"AU",fa:["float"],ea:!1},{$:"node_out",ba:"AV",fa:["float"],ea:!1},{$:"node_out",ba:"AW",fa:["float"],ea:!1},{$:"node_out",
ba:"AX",fa:["vec3"],ea:!1},{$:"node_out",ba:"AY",fa:["float"],ea:!1},{$:"node_out",ba:"AZ",fa:["vec3"],ea:!1},{$:"node_out",ba:"A_",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"AU = _0_0 ; AV = _0_0 ; AW = _0_0 ; AX = vec3 ( _0_0 ) ; AY = _0_0 ; AZ = AX ; A_ = AX ;".split(" ")}]},{$:"node",ba:"HAIR_INFO",ma:[],la:[{$:"node_out",ba:"Ba",fa:["float"],ea:!1},{$:"node_out",ba:"Bb",fa:["float"],ea:!1},{$:"node_out",ba:"Bc",fa:["float"],ea:!1},{$:"node_out",ba:"Bd",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"Ba = _0_0 ; Bb = _0_0 ; Bc = _0_0 ; Bd = vec3 ( _0_0 ) ;".split(" ")}]},
{$:"node",ba:"OBJECT_INFO",ma:[{$:"node_var",ba:"USE_LOCATION_OUT",aa:["0"]},{$:"node_var",ba:"USE_OBJ_IND_OUT",aa:["0"]},{$:"node_var",ba:"USE_MAT_IND_OUT",aa:["0"]},{$:"node_var",ba:"USE_RANDOM_OUT",aa:["0"]}],la:[{$:"node_out",ba:"Be",fa:["vec3"],ea:!1},{$:"node_out",ba:"Bf",fa:["float"],ea:!1},{$:"node_out",ba:"Bg",fa:["float"],ea:!1},{$:"node_out",ba:"Bh",fa:["float"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["USE_LOCATION_OUT"],ja:[{$:"txt",aa:"Be = ex ( u_model_tsr ) ;".split(" ")}]}]},
{$:"node_cond",da:[{$:"node_if",ga:["USE_OBJ_IND_OUT"],ja:[{$:"txt",aa:"Bf = u_obj_info . r ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_MAT_IND_OUT"],ja:[{$:"txt",aa:"Bg = u_obj_info . g ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_RANDOM_OUT"],ja:[{$:"txt",aa:"Bh = u_obj_info . b ;".split(" ")}]}]}]},{$:"node",ba:"WIREFRAME",ma:[],la:[{$:"node_in",ba:"Bi",fa:["float"],ea:!1},{$:"node_out",ba:"Bj",fa:["float"],ea:!1}],ja:[{$:"txt",aa:["Bj","=","Bi",";"]}]},{$:"node",
ba:"TANGENT",ma:[],la:[{$:"node_out",ba:"Bk",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"Bk = vec3 ( _0_0 ) ;".split(" ")}]},{$:"node",ba:"LAYER_WEIGHT",ma:[{$:"node_var",ba:"USE_NORMAL_IN",aa:["0"]}],la:[{$:"node_in",ba:"Bl",fa:["float"],ea:!1},{$:"node_in",ba:"Bm",fa:["vec3"],ea:!1},{$:"node_out",ba:"Bn",fa:["float"],ea:!1},{$:"node_out",ba:"Bo",fa:["float"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["USE_NORMAL_IN"],ja:[{$:"txt",aa:"vec3 cw = normalize ( Bm ) ;".split(" ")}]},{$:"node_else",ja:[{$:"txt",
aa:["vec3","cw","=","ox",";"]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["CAMERA_TYPE","CAM_TYPE_PERSP",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"vec3 Bp = normalize ( oy ) ;".split(" ")}]},{$:"node_else",ja:[{$:"txt",aa:["vec3","Bp","=","u_camera_direction",";"]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Bn"],ja:[{$:"txt",aa:"float su = max ( _1_0 - Bl , 0.00001 ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["REFLECTION_PASS","REFL_PASS_PLANE",{$:"non_equal_expr",ia:2}],ja:[{$:"txt",aa:"su = gl_FrontFacing == false ? su : _1_0 / su ;".split(" ")}]},
{$:"node_else",ja:[{$:"txt",aa:"su = gl_FrontFacing ? su : _1_0 / su ;".split(" ")}]}]},{$:"txt",aa:"Bn = sv ( Bp , cw , su ) ;".split(" ")}]},{$:"node_else",ja:[{$:"txt",aa:["Bn","=","_0_0",";"]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Bo"],ja:[{$:"txt",aa:"Bo = abs ( dot ( Bp , cw ) ) ; float eA = Bl ; if ( eA != _0_5 ) { eA = clamp ( eA , _0_0 , 0.99999 ) ; eA = ( eA < _0_5 ) ? 2.0 * eA : _0_5 / ( _1_0 - eA ) ; Bo = pow ( Bo , eA ) ; } Bo = _1_0 - Bo ;".split(" ")}]},{$:"node_else",ja:[{$:"txt",
aa:["Bo","=","_0_0",";"]}]}]}]},{$:"node",ba:"LIGHT_PATH",ma:[],la:[{$:"node_out",ba:"Bq",fa:["float"],ea:!1},{$:"node_out",ba:"Br",fa:["float"],ea:!1},{$:"node_out",ba:"Bs",fa:["float"],ea:!1},{$:"node_out",ba:"Bt",fa:["float"],ea:!1},{$:"node_out",ba:"Bu",fa:["float"],ea:!1},{$:"node_out",ba:"Bv",fa:["float"],ea:!1},{$:"node_out",ba:"Bw",fa:["float"],ea:!1},{$:"node_out",ba:"Bx",fa:["float"],ea:!1},{$:"node_out",ba:"By",fa:["float"],ea:!1},{$:"node_out",ba:"Bz",fa:["float"],ea:!1},{$:"node_out",
ba:"BA",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"Bq = Br = Bs = _0_0 ; Bt = Bu = Bv = _0_0 ; Bw = BA = By = Bz = _0_0 ; Bx = _0_0 ;".split(" ")}]},{$:"node",ba:"ATTRIBUTE",ma:[],la:[{$:"node_out",ba:"BB",fa:["vec3"],ea:!1},{$:"node_out",ba:"BC",fa:["vec3"],ea:!1},{$:"node_out",ba:"BD",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"BB = BC = vec3 ( _0_0 ) ; BD = _0_0 ;".split(" ")}]},{$:"node",ba:"SCRIPT",ma:[],la:[],ja:[]},{$:"node",ba:"CURVE_VEC",ma:[{$:"node_var",ba:"READ_R",aa:["0"]},{$:"node_var",ba:"READ_G",
aa:["0"]},{$:"node_var",ba:"READ_B",aa:["0"]},{$:"node_var",ba:"NODE_TEX_ROW",aa:["_0_0"]}],la:[{$:"node_in",ba:"BE",fa:["float"],ea:!1},{$:"node_in",ba:"BF",fa:["vec3"],ea:!1},{$:"node_out",ba:"BG",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:["BG","=","BF",";"]},{$:"node_cond",da:[{$:"node_if",ga:["READ_R"],ja:[{$:"txt",aa:"BG . r = ( GLSL_TEXTURE ( u_nodes_texture , vec2 ( _0_5 * BF . r + _0_5 , NODE_TEX_ROW ) ) . r - _0_5 ) * 2.0 ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["READ_G"],ja:[{$:"txt",
aa:"BG . g = ( GLSL_TEXTURE ( u_nodes_texture , vec2 ( _0_5 * BF . g + _0_5 , NODE_TEX_ROW ) ) . g - _0_5 ) * 2.0 ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["READ_B"],ja:[{$:"txt",aa:"BG . b = ( GLSL_TEXTURE ( u_nodes_texture , vec2 ( _0_5 * BF . b + _0_5 , NODE_TEX_ROW ) ) . b - _0_5 ) * 2.0 ;".split(" ")}]}]},{$:"txt",aa:"BG = mix ( BF , BG , BE ) ;".split(" ")}]},{$:"node",ba:"CURVE_RGB",ma:[{$:"node_var",ba:"READ_A",aa:["0"]},{$:"node_var",ba:"READ_R",aa:["0"]},{$:"node_var",ba:"READ_G",
aa:["0"]},{$:"node_var",ba:"READ_B",aa:["0"]},{$:"node_var",ba:"NODE_TEX_ROW",aa:["_0_0"]}],la:[{$:"node_in",ba:"BH",fa:["float"],ea:!1},{$:"node_in",ba:"BI",fa:["vec3"],ea:!1},{$:"node_out",ba:"BJ",fa:["vec3"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["READ_A"],ja:[{$:"txt",aa:"float r = GLSL_TEXTURE ( u_nodes_texture , vec2 ( BI . r , NODE_TEX_ROW ) ) . a ; float g = GLSL_TEXTURE ( u_nodes_texture , vec2 ( BI . g , NODE_TEX_ROW ) ) . a ; float b = GLSL_TEXTURE ( u_nodes_texture , vec2 ( BI . b , NODE_TEX_ROW ) ) . a ;".split(" ")}]},
{$:"node_else",ja:[{$:"txt",aa:"float r = BI . r ; float g = BI . g ; float b = BI . b ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["READ_R"],ja:[{$:"txt",aa:"BJ . r = GLSL_TEXTURE ( u_nodes_texture , vec2 ( r , NODE_TEX_ROW ) ) . r ;".split(" ")}]},{$:"node_else",ja:[{$:"txt",aa:"BJ . r = r ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["READ_G"],ja:[{$:"txt",aa:"BJ . g = GLSL_TEXTURE ( u_nodes_texture , vec2 ( g , NODE_TEX_ROW ) ) . g ;".split(" ")}]},{$:"node_else",ja:[{$:"txt",
aa:"BJ . g = g ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["READ_B"],ja:[{$:"txt",aa:"BJ . b = GLSL_TEXTURE ( u_nodes_texture , vec2 ( b , NODE_TEX_ROW ) ) . b ;".split(" ")}]},{$:"node_else",ja:[{$:"txt",aa:"BJ . b = b ;".split(" ")}]}]},{$:"txt",aa:"BJ = mix ( BI , BJ , BH ) ;".split(" ")}]},{$:"node",ba:"VALTORGB",ma:[{$:"node_var",ba:"NODE_TEX_ROW",aa:["_0_0"]}],la:[{$:"node_in",ba:"BK",fa:["float"],ea:!1},{$:"node_out",ba:"BL",fa:["vec3"],ea:!1},{$:"node_out",ba:"BM",fa:["float"],
ea:!1}],ja:[{$:"txt",aa:"vec4 BN = GLSL_TEXTURE ( u_nodes_texture , vec2 ( BK , NODE_TEX_ROW ) ) ; BL = BN . rgb ; BM = BN . a ;".split(" ")}]},{$:"node",ba:"MAPPING",ma:[{$:"node_var",ba:"MAPPING_SCALE_DEF",aa:["0"]},{$:"node_var",ba:"MAPPING_SCALE",aa:["vec3","(","_1_0",")"]},{$:"node_var",ba:"MAPPING_TRANS_DEF",aa:["0"]},{$:"node_var",ba:"MAPPING_TRANS",aa:["vec3","(","_0_0",")"]},{$:"node_var",ba:"MAPPING_TRS_MATRIX_DEF",aa:["0"]},{$:"node_var",ba:"MAPPING_TRS_MATRIX",aa:["mat4","(","_1_0",")"]},
{$:"node_var",ba:"MAPPING_MIN_CLIP_DEF",aa:["0"]},{$:"node_var",ba:"MAPPING_MIN_CLIP",aa:["vec3","(","_0_0",")"]},{$:"node_var",ba:"MAPPING_MAX_CLIP_DEF",aa:["0"]},{$:"node_var",ba:"MAPPING_MAX_CLIP",aa:["vec3","(","_1_0",")"]},{$:"node_var",ba:"MAPPING_IS_NORMAL",aa:["0"]}],la:[{$:"node_in",ba:"BO",fa:["vec3"],ea:!1},{$:"node_out",ba:"BP",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:["BP","=","BO",";"]},{$:"node_cond",da:[{$:"node_if",ga:["MAPPING_SCALE_DEF"],ja:[{$:"txt",aa:"BP = BP * MAPPING_SCALE ;".split(" ")}]}]},
{$:"node_cond",da:[{$:"node_if",ga:["MAPPING_TRANS_DEF"],ja:[{$:"txt",aa:"BP = BP + MAPPING_TRANS ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["MAPPING_TRS_MATRIX_DEF"],ja:[{$:"txt",aa:"BP = ( MAPPING_TRS_MATRIX * vec4 ( BP , _1_0 ) ) . xyz ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["MAPPING_MIN_CLIP_DEF"],ja:[{$:"txt",aa:"BP = max ( BP , MAPPING_MIN_CLIP ) ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["MAPPING_MAX_CLIP_DEF"],ja:[{$:"txt",aa:"BP = min ( BP , MAPPING_MAX_CLIP ) ;".split(" ")}]}]},
{$:"node_cond",da:[{$:"node_if",ga:["MAPPING_IS_NORMAL"],ja:[{$:"txt",aa:"BP = normalize ( BP ) ;".split(" ")}]}]}]},{$:"node",ba:"MATH_ADD",ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"BQ",fa:["float"],ea:!1},{$:"node_in",ba:"BR",fa:["float"],ea:!1},{$:"node_out",ba:"BS",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"BS = BQ + BR ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"BS = clamp ( BS , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MATH_SUBTRACT",
ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"BT",fa:["float"],ea:!1},{$:"node_in",ba:"BU",fa:["float"],ea:!1},{$:"node_out",ba:"BV",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"BV = BT - BU ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"BV = clamp ( BV , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MATH_MULTIPLY",ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"BW",fa:["float"],ea:!1},{$:"node_in",ba:"BX",fa:["float"],
ea:!1},{$:"node_out",ba:"BY",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"BY = BW * BX ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"BY = clamp ( BY , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MATH_DIVIDE",ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"BZ",fa:["float"],ea:!1},{$:"node_in",ba:"B_",fa:["float"],ea:!1},{$:"node_out",ba:"Ca",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"Ca = ( B_ != _0_0 ) ? BZ / B_ : _0_0 ;".split(" ")},{$:"node_cond",
da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"Ca = clamp ( Ca , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MATH_SINE",ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Cb",fa:["float"],ea:!1},{$:"node_in",ba:"Cc",fa:["float"],ea:!1},{$:"node_out",ba:"Cd",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"Cd = sin ( Cb ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"Cd = clamp ( Cd , _0_0 , _1_0 ) ;".split(" ")}]}]},{$:"txt",aa:["Cc",";"]}]},
{$:"node",ba:"MATH_COSINE",ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Ce",fa:["float"],ea:!1},{$:"node_in",ba:"Cf",fa:["float"],ea:!1},{$:"node_out",ba:"Cg",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"Cg = cos ( Ce ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"Cg = clamp ( Cg , _0_0 , _1_0 ) ;".split(" ")}]}]},{$:"txt",aa:["Cf",";"]}]},{$:"node",ba:"MATH_TANGENT",ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Ch",
fa:["float"],ea:!1},{$:"node_in",ba:"Ci",fa:["float"],ea:!1},{$:"node_out",ba:"Cj",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"Cj = tan ( Ch ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"Cj = clamp ( Cj , _0_0 , _1_0 ) ;".split(" ")}]}]},{$:"txt",aa:["Ci",";"]}]},{$:"node",ba:"MATH_ARCSINE",ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Ck",fa:["float"],ea:!1},{$:"node_in",ba:"Cl",fa:["float"],ea:!1},{$:"node_out",ba:"Cm",fa:["float"],ea:!1}],
ja:[{$:"txt",aa:"Cm = ( Ck <= _1_0 && Ck >= - _1_0 ) ? asin ( Ck ) : _0_0 ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"Cm = clamp ( Cm , _0_0 , _1_0 ) ;".split(" ")}]}]},{$:"txt",aa:["Cl",";"]}]},{$:"node",ba:"MATH_ARCCOSINE",ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Cn",fa:["float"],ea:!1},{$:"node_in",ba:"Co",fa:["float"],ea:!1},{$:"node_out",ba:"Cp",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"Cp = ( Cn <= _1_0 && Cn >= - _1_0 ) ? acos ( Cn ) : _0_0 ;".split(" ")},
{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"Cp = clamp ( Cp , _0_0 , _1_0 ) ;".split(" ")}]}]},{$:"txt",aa:["Co",";"]}]},{$:"node",ba:"MATH_ARCTANGENT",ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Cq",fa:["float"],ea:!1},{$:"node_in",ba:"Cr",fa:["float"],ea:!1},{$:"node_out",ba:"Cs",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"Cs = atan ( Cq ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"Cs = clamp ( Cs , _0_0 , _1_0 ) ;".split(" ")}]}]},
{$:"txt",aa:["Cr",";"]}]},{$:"node",ba:"MATH_POWER",ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Ct",fa:["float"],ea:!1},{$:"node_in",ba:"Cu",fa:["float"],ea:!1},{$:"node_out",ba:"Cv",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"if ( Ct < _0_0 && Cu != floor ( Cu ) ) Cv = _0_0 ; else if ( Cu == _0_0 ) Cv = _1_0 ; else if ( Ct < _0_0 ) Cv = mix ( _1_0 , - _1_0 , sign ( mod ( - Cu , 2.0 ) ) ) * pow ( - Ct , Cu ) ; else if ( Ct == _0_0 ) Cv = _0_0 ; else Cv = pow ( Ct , Cu ) ;".split(" ")},
{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"Cv = clamp ( Cv , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MATH_LOGARITHM",ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Cw",fa:["float"],ea:!1},{$:"node_in",ba:"Cx",fa:["float"],ea:!1},{$:"node_out",ba:"Cy",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"Cy = ( Cw > _0_0 && Cx > _0_0 ) ? log2 ( Cw ) / log2 ( Cx ) : _0_0 ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"Cy = clamp ( Cy , _0_0 , _1_0 ) ;".split(" ")}]}]}]},
{$:"node",ba:"MATH_MINIMUM",ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Cz",fa:["float"],ea:!1},{$:"node_in",ba:"CA",fa:["float"],ea:!1},{$:"node_out",ba:"CB",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"CB = min ( Cz , CA ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"CB = clamp ( CB , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MATH_MAXIMUM",ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"CC",fa:["float"],ea:!1},
{$:"node_in",ba:"CD",fa:["float"],ea:!1},{$:"node_out",ba:"CE",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"CE = max ( CC , CD ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"CE = clamp ( CE , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MATH_ROUND",ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"CF",fa:["float"],ea:!1},{$:"node_in",ba:"CG",fa:["float"],ea:!1},{$:"node_out",ba:"CH",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"CH = floor ( CF + _0_5 ) ;".split(" ")},
{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"CH = clamp ( CH , _0_0 , _1_0 ) ;".split(" ")}]}]},{$:"txt",aa:["CG",";"]}]},{$:"node",ba:"MATH_LESS_THAN",ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"CI",fa:["float"],ea:!1},{$:"node_in",ba:"CJ",fa:["float"],ea:!1},{$:"node_out",ba:"CK",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"CK = ( CI < CJ ) ? _1_0 : _0_0 ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"CK = clamp ( CK , _0_0 , _1_0 ) ;".split(" ")}]}]}]},
{$:"node",ba:"MATH_GREATER_THAN",ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"CL",fa:["float"],ea:!1},{$:"node_in",ba:"CM",fa:["float"],ea:!1},{$:"node_out",ba:"CN",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"CN = ( CL > CM ) ? _1_0 : _0_0 ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"CN = clamp ( CN , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MATH_MODULO",ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"CO",fa:["float"],
ea:!1},{$:"node_in",ba:"CP",fa:["float"],ea:!1},{$:"node_out",ba:"CQ",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"CQ = abs ( CP ) > 0.000001 ? mod ( CO , CP ) : _0_0 ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"CQ = clamp ( CQ , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MATH_ABSOLUTE",ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"CR",fa:["float"],ea:!1},{$:"node_in",ba:"CS",fa:["float"],ea:!1},{$:"node_out",ba:"CT",fa:["float"],ea:!1}],
ja:[{$:"txt",aa:"CT = abs ( CR ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"CT = clamp ( CT , _0_0 , _1_0 ) ;".split(" ")}]}]},{$:"txt",aa:["CS",";"]}]},{$:"node",ba:"MIX_RGB_MIX",ma:[{$:"node_var",ba:"MIX_RGB_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"CU",fa:["float"],ea:!1},{$:"node_in",ba:"CV",fa:["vec3"],ea:!1},{$:"node_in",ba:"CW",fa:["vec3"],ea:!1},{$:"node_out",ba:"CX",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float AJ = clamp ( CU , _0_0 , _1_0 ) ; CX = mix ( CV , CW , AJ ) ;".split(" ")},
{$:"node_cond",da:[{$:"node_if",ga:["MIX_RGB_USE_CLAMP"],ja:[{$:"txt",aa:"CX = clamp ( CX , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MIX_RGB_ADD",ma:[{$:"node_var",ba:"MIX_RGB_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"CY",fa:["float"],ea:!1},{$:"node_in",ba:"CZ",fa:["vec3"],ea:!1},{$:"node_in",ba:"C_",fa:["vec3"],ea:!1},{$:"node_out",ba:"Da",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float AJ = clamp ( CY , _0_0 , _1_0 ) ; Da = mix ( CZ , CZ + C_ , AJ ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",
ga:["MIX_RGB_USE_CLAMP"],ja:[{$:"txt",aa:"Da = clamp ( Da , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MIX_RGB_MULTIPLY",ma:[{$:"node_var",ba:"MIX_RGB_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Db",fa:["float"],ea:!1},{$:"node_in",ba:"Dc",fa:["vec3"],ea:!1},{$:"node_in",ba:"Dd",fa:["vec3"],ea:!1},{$:"node_out",ba:"De",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float AJ = clamp ( Db , _0_0 , _1_0 ) ; De = mix ( Dc , Dc * Dd , AJ ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MIX_RGB_USE_CLAMP"],
ja:[{$:"txt",aa:"De = clamp ( De , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MIX_RGB_SUBTRACT",ma:[{$:"node_var",ba:"MIX_RGB_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Df",fa:["float"],ea:!1},{$:"node_in",ba:"Dg",fa:["vec3"],ea:!1},{$:"node_in",ba:"Dh",fa:["vec3"],ea:!1},{$:"node_out",ba:"Di",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float AJ = clamp ( Df , _0_0 , _1_0 ) ; Di = mix ( Dg , Dg - Dh , AJ ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MIX_RGB_USE_CLAMP"],ja:[{$:"txt",aa:"Di = clamp ( Di , _0_0 , _1_0 ) ;".split(" ")}]}]}]},
{$:"node",ba:"MIX_RGB_SCREEN",ma:[{$:"node_var",ba:"MIX_RGB_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Dj",fa:["float"],ea:!1},{$:"node_in",ba:"Dk",fa:["vec3"],ea:!1},{$:"node_in",ba:"Dl",fa:["vec3"],ea:!1},{$:"node_out",ba:"Dm",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float AJ = clamp ( Dj , _0_0 , _1_0 ) ; float Dn = _1_0 - AJ ; Dm = vec3 ( _1_0 ) - ( vec3 ( Dn ) + AJ * ( vec3 ( _1_0 ) - Dl ) ) * ( vec3 ( _1_0 ) - Dk ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MIX_RGB_USE_CLAMP"],ja:[{$:"txt",
aa:"Dm = clamp ( Dm , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MIX_RGB_DIVIDE",ma:[{$:"node_var",ba:"MIX_RGB_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Do",fa:["float"],ea:!1},{$:"node_in",ba:"Dp",fa:["vec3"],ea:!1},{$:"node_in",ba:"Dq",fa:["vec3"],ea:!1},{$:"node_out",ba:"Dr",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float AJ = clamp ( Do , _0_0 , _1_0 ) ; float Dn = _1_0 - AJ ; Dq += step ( Dq , vec3 ( _0_0 ) ) ; Dr = Dn * Dp + AJ * Dp / Dq ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MIX_RGB_USE_CLAMP"],
ja:[{$:"txt",aa:"Dr = clamp ( Dr , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MIX_RGB_DIFFERENCE",ma:[{$:"node_var",ba:"MIX_RGB_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Ds",fa:["float"],ea:!1},{$:"node_in",ba:"Dt",fa:["vec3"],ea:!1},{$:"node_in",ba:"Du",fa:["vec3"],ea:!1},{$:"node_out",ba:"Dv",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float AJ = clamp ( Ds , _0_0 , _1_0 ) ; Dv = mix ( Dt , abs ( Dt - Du ) , AJ ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MIX_RGB_USE_CLAMP"],ja:[{$:"txt",
aa:"Dv = clamp ( Dv , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MIX_RGB_DARKEN",ma:[{$:"node_var",ba:"MIX_RGB_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Dw",fa:["float"],ea:!1},{$:"node_in",ba:"Dx",fa:["vec3"],ea:!1},{$:"node_in",ba:"Dy",fa:["vec3"],ea:!1},{$:"node_out",ba:"Dz",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float AJ = clamp ( Dw , _0_0 , _1_0 ) ; Dz = min ( Dx . rgb , Dy . rgb * AJ ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MIX_RGB_USE_CLAMP"],ja:[{$:"txt",aa:"Dz = clamp ( Dz , _0_0 , _1_0 ) ;".split(" ")}]}]}]},
{$:"node",ba:"MIX_RGB_LIGHTEN",ma:[{$:"node_var",ba:"MIX_RGB_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"DA",fa:["float"],ea:!1},{$:"node_in",ba:"DB",fa:["vec3"],ea:!1},{$:"node_in",ba:"DC",fa:["vec3"],ea:!1},{$:"node_out",ba:"DD",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float AJ = clamp ( DA , _0_0 , _1_0 ) ; DD = max ( DB . rgb , DC . rgb * AJ ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MIX_RGB_USE_CLAMP"],ja:[{$:"txt",aa:"DD = clamp ( DD , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MIX_RGB_OVERLAY",
ma:[{$:"node_var",ba:"MIX_RGB_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"DE",fa:["float"],ea:!1},{$:"node_in",ba:"DF",fa:["vec3"],ea:!1},{$:"node_in",ba:"DG",fa:["vec3"],ea:!1},{$:"node_out",ba:"DH",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float AJ = clamp ( DE , _0_0 , _1_0 ) ; vec3 DI = vec3 ( _1_0 - AJ ) ; DH = mix ( DF * ( DI + 2.0 * AJ * DG ) , vec3 ( _1_0 ) - ( DI + 2.0 * AJ * ( vec3 ( _1_0 ) - DG ) ) * ( vec3 ( _1_0 ) - DF ) , step ( _0_5 , DF ) ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",
ga:["MIX_RGB_USE_CLAMP"],ja:[{$:"txt",aa:"DH = clamp ( DH , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MIX_RGB_DODGE",ma:[{$:"node_var",ba:"MIX_RGB_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"DJ",fa:["float"],ea:!1},{$:"node_in",ba:"DK",fa:["vec3"],ea:!1},{$:"node_in",ba:"DL",fa:["vec3"],ea:!1},{$:"node_out",ba:"DM",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float AJ = clamp ( DJ , _0_0 , _1_0 ) ; vec3 DN = vec3 ( _1_0 ) - AJ * DL ; vec3 DO = clamp ( DK / DN , _0_0 , _1_0 ) ; DM = mix ( mix ( DO , vec3 ( _1_0 ) , step ( DN , vec3 ( _0_0 ) ) ) , DK , step ( DK , vec3 ( _0_0 ) ) ) ;".split(" ")},
{$:"node_cond",da:[{$:"node_if",ga:["MIX_RGB_USE_CLAMP"],ja:[{$:"txt",aa:"DM = clamp ( DM , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MIX_RGB_BURN",ma:[{$:"node_var",ba:"MIX_RGB_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"DP",fa:["float"],ea:!1},{$:"node_in",ba:"DQ",fa:["vec3"],ea:!1},{$:"node_in",ba:"DR",fa:["vec3"],ea:!1},{$:"node_out",ba:"DS",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float AJ = clamp ( DP , _0_0 , _1_0 ) ; vec3 ks = vec3 ( _1_0 - AJ ) ; vec3 DN = ks + AJ * DR ; vec3 DO = clamp ( vec3 ( _1_0 ) - ( vec3 ( _1_0 ) - DQ ) / DN , _0_0 , _1_0 ) ; DS = mix ( DO , vec3 ( _0_0 ) , step ( DN , vec3 ( _0_0 ) ) ) ;".split(" ")},
{$:"node_cond",da:[{$:"node_if",ga:["MIX_RGB_USE_CLAMP"],ja:[{$:"txt",aa:"DS = clamp ( DS , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MIX_RGB_HUE",ma:[{$:"node_var",ba:"MIX_RGB_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"DT",fa:["float"],ea:!1},{$:"node_in",ba:"DU",fa:["vec3"],ea:!1},{$:"node_in",ba:"DV",fa:["vec3"],ea:!1},{$:"node_out",ba:"DW",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float AJ = clamp ( DT , _0_0 , _1_0 ) ; vec3 kk , DX , DN ; DW = DU ; DX = kj ( DV ) ; if ( DX . y != _0_0 ) { kk = kj ( DW ) ; kk . x = DX . x ; DN = kl ( kk ) ; DW = mix ( DW , DN , AJ ) ; }".split(" ")},
{$:"node_cond",da:[{$:"node_if",ga:["MIX_RGB_USE_CLAMP"],ja:[{$:"txt",aa:"DW = clamp ( DW , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MIX_RGB_SATURATION",ma:[{$:"node_var",ba:"MIX_RGB_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"DY",fa:["float"],ea:!1},{$:"node_in",ba:"DZ",fa:["vec3"],ea:!1},{$:"node_in",ba:"D_",fa:["vec3"],ea:!1},{$:"node_out",ba:"Ea",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float AJ = clamp ( DY , _0_0 , _1_0 ) ; float Dn = _1_0 - AJ ; Ea = DZ ; vec3 kk , DX ; kk = kj ( Ea ) ; if ( kk . y != _0_0 ) { DX = kj ( D_ ) ; kk . y = Dn * kk . y + AJ * DX . y ; Ea = kl ( kk ) ; }".split(" ")},
{$:"node_cond",da:[{$:"node_if",ga:["MIX_RGB_USE_CLAMP"],ja:[{$:"txt",aa:"Ea = clamp ( Ea , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MIX_RGB_VALUE",ma:[{$:"node_var",ba:"MIX_RGB_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Eb",fa:["float"],ea:!1},{$:"node_in",ba:"Ec",fa:["vec3"],ea:!1},{$:"node_in",ba:"Ed",fa:["vec3"],ea:!1},{$:"node_out",ba:"Ee",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float AJ = clamp ( Eb , _0_0 , _1_0 ) ; float Dn = _1_0 - AJ ; vec3 kk , DX ; kk = kj ( Ec ) ; DX = kj ( Ed ) ; kk . z = Dn * kk . z + AJ * DX . z ; Ee = kl ( kk ) ;".split(" ")},
{$:"node_cond",da:[{$:"node_if",ga:["MIX_RGB_USE_CLAMP"],ja:[{$:"txt",aa:"Ee = clamp ( Ee , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MIX_RGB_COLOR",ma:[{$:"node_var",ba:"MIX_RGB_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Ef",fa:["float"],ea:!1},{$:"node_in",ba:"Eg",fa:["vec3"],ea:!1},{$:"node_in",ba:"Eh",fa:["vec3"],ea:!1},{$:"node_out",ba:"Ei",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float AJ = clamp ( Ef , _0_0 , _1_0 ) ; vec3 kk , DX , DN ; Ei = Eg ; DX = kj ( Eh ) ; if ( DX . y != _0_0 ) { kk = kj ( Ei ) ; kk . x = DX . x ; kk . y = DX . y ; DN = kl ( kk ) ; Ei = mix ( Ei , DN , AJ ) ; }".split(" ")},
{$:"node_cond",da:[{$:"node_if",ga:["MIX_RGB_USE_CLAMP"],ja:[{$:"txt",aa:"Ei = clamp ( Ei , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MIX_RGB_SOFT_LIGHT",ma:[{$:"node_var",ba:"MIX_RGB_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Ej",fa:["float"],ea:!1},{$:"node_in",ba:"Ek",fa:["vec3"],ea:!1},{$:"node_in",ba:"El",fa:["vec3"],ea:!1},{$:"node_out",ba:"Em",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float AJ = clamp ( Ej , _0_0 , _1_0 ) ; float Dn = _1_0 - AJ ; vec3 En = El + Ek - El * Ek ; Em = Ek * ( vec3 ( Dn ) + vec3 ( AJ ) * ( ( vec3 ( _1_0 ) - Ek ) * El + En ) ) ;".split(" ")},
{$:"node_cond",da:[{$:"node_if",ga:["MIX_RGB_USE_CLAMP"],ja:[{$:"txt",aa:"Em = clamp ( Em , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MIX_RGB_LINEAR_LIGHT",ma:[{$:"node_var",ba:"MIX_RGB_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Eo",fa:["float"],ea:!1},{$:"node_in",ba:"Ep",fa:["vec3"],ea:!1},{$:"node_in",ba:"Eq",fa:["vec3"],ea:!1},{$:"node_out",ba:"Er",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float AJ = clamp ( Eo , _0_0 , _1_0 ) ; Er = Ep + AJ * ( 2.0 * Eq - vec3 ( _1_0 ) ) ;".split(" ")},{$:"node_cond",
da:[{$:"node_if",ga:["MIX_RGB_USE_CLAMP"],ja:[{$:"txt",aa:"Er = clamp ( Er , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MIX_WORLD_RGB",ma:[],la:[{$:"node_in",ba:"Es",fa:["float"],ea:!1},{$:"node_in",ba:"Et",fa:["vec3"],ea:!1},{$:"node_in",ba:"Eu",fa:["vec3"],ea:!1},{$:"node_out",ba:"Ev",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float AJ = clamp ( Es , _0_0 , _1_0 ) ; Ev = mix ( Et , Eu , AJ ) ;".split(" ")}]},{$:"node",ba:"ADD_WORLD_RGB",ma:[],la:[{$:"node_in",ba:"Ew",fa:["float"],ea:!1},{$:"node_in",
ba:"Ex",fa:["vec3"],ea:!1},{$:"node_in",ba:"Ey",fa:["vec3"],ea:!1},{$:"node_out",ba:"Ez",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float AJ = clamp ( Ew , _0_0 , _1_0 ) ; Ez = mix ( Ex , Ex + Ey , AJ ) ;".split(" ")}]},{$:"node",ba:"OUTPUT",ma:[],la:[{$:"node_in",ba:"EA",fa:["vec3"],ea:!1},{$:"node_in",ba:"EB",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"E = EA ; I = EB ;".split(" ")}]},{$:"node",ba:"OUTPUT_SURFACE",ma:[],la:[{$:"node_in",ba:"EC",fa:["vec3"],ea:!1},{$:"node_in",ba:"ED",fa:["float"],ea:!1}],ja:[{$:"txt",
aa:"E = EC ; I = ED ;".split(" ")}]},{$:"node",ba:"OUTPUT_WORLD_SURFACE",ma:[],la:[{$:"node_in",ba:"EE",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"E = EE ; I = _1_0 ;".split(" ")}]},{$:"node",ba:"MATERIAL_BEGIN",ma:[{$:"node_var",ba:"MATERIAL_EXT",aa:["0"]},{$:"node_var",ba:"USE_MATERIAL_NORMAL",aa:["0"]},{$:"node_var",ba:"USE_MATERIAL_DIFFUSE",aa:["0"]},{$:"node_var",ba:"SHADELESS_MAT",aa:["0"]}],la:[{$:"node_in",ba:"EF",fa:["vec3"],ea:!1},{$:"node_in",ba:"EG",fa:["vec3"],ea:!1},{$:"node_in",ba:"EH",fa:["float"],
ea:!1},{$:"node_in",ba:"EI",fa:["vec3"],ea:!0},{$:"node_in",ba:"EJ",fa:["float"],ea:!0},{$:"node_out",ba:"EK",fa:["vec3"],ea:!1},{$:"node_out",ba:"EL",fa:["vec3"],ea:!1},{$:"node_out",ba:"EM",fa:["vec3"],ea:!1},{$:"node_out",ba:"EN",fa:["vec3"],ea:!1},{$:"node_out",ba:"EO",fa:["vec3"],ea:!1},{$:"node_out",ba:"EP",fa:["vec2"],ea:!1},{$:"node_out",ba:"EQ",fa:["vec2"],ea:!1},{$:"node_out",ba:"ER",fa:["vec4"],ea:!1},{$:"node_param",ba:"sF",fa:["const","vec2"],ea:!1},{$:"node_param",ba:"sG",fa:["const",
"vec3"],ea:!1}],ja:[{$:"txt",aa:"EM = EF ; EN = sG [ 0 ] * EG ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_MATERIAL_NORMAL"],ja:[{$:"txt",aa:"EO = normalize ( EI ) ;".split(" ")}]},{$:"node_else",ja:[{$:"txt",aa:["EO","=","ox",";"]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["SHADELESS_MAT",{$:"logic_negative_expr",ia:1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["MATERIAL_EXT"],ja:[{$:"txt",aa:"EK = EJ * EM ;".split(" ")}]},{$:"node_else",ja:[{$:"txt",aa:"EK = sS * EM ;".split(" ")}]}]},{$:"node_cond",
da:[{$:"node_if",ga:["USE_MATERIAL_DIFFUSE"],ja:[{$:"txt",aa:["EM","*=","EH",";"]}]}]},{$:"txt",aa:"EL = sT * u_environment_energy * cE ( EO ) ; ER = cH ( EM ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["NUM_LIGHTS",0,{$:"g_expr",ia:2}],ja:[{$:"txt",aa:"EP = vec2 ( sF [ 0 ] , sF [ 1 ] ) ; EQ = vec2 ( sG [ 1 ] , sG [ 2 ] ) ;".split(" ")}]}]},{$:"txt",aa:["H","=","ER",";"]}]},{$:"node_else",ja:[{$:"txt",aa:"EK = vec3 ( _0_0 ) ; EL = vec3 ( _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MATERIAL_END",
ma:[{$:"node_var",ba:"MATERIAL_EXT",aa:["0"]},{$:"node_var",ba:"USE_MATERIAL_DIFFUSE",aa:["0"]},{$:"node_var",ba:"USE_MATERIAL_SPECULAR",aa:["0"]}],la:[{$:"node_in",ba:"ES",fa:["vec4"],ea:!1},{$:"node_in",ba:"ET",fa:["vec3"],ea:!1},{$:"node_in",ba:"EU",fa:["vec3"],ea:!1},{$:"node_in",ba:"EV",fa:["float"],ea:!0},{$:"node_in",ba:"EW",fa:["float"],ea:!0},{$:"node_in",ba:"EX",fa:["float"],ea:!0},{$:"node_out",ba:"EY",fa:["vec3"],ea:!0},{$:"node_out",ba:"EZ",fa:["float"],ea:!0},{$:"node_out",ba:"E_",fa:["vec3"],
ea:!0},{$:"node_out",ba:"Fa",fa:["vec3"],ea:!0},{$:"node_out",ba:"Fb",fa:["vec3"],ea:!0},{$:"node_param",ba:"sH",fa:["float"],ea:!1},{$:"node_param",ba:"sI",fa:["float"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_EY"],ja:[{$:"node_cond",da:[{$:"node_if",ga:["USE_MATERIAL_DIFFUSE"],ja:[{$:"txt",aa:"EY = ES . rgb ;".split(" ")}]},{$:"node_else",ja:[{$:"txt",aa:"EY = vec3 ( _0_0 ) ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["MATERIAL_EXT","REFLECTION_TYPE","REFL_NONE",{$:"non_equal_expr",
ia:2},{$:"logical_and_expr",ia:2}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"cQ ( EY , oy , EU , EV , u_view_tsr_frag ) ;".split(" ")}]},{$:"node_else",ja:[{$:"txt",aa:"cQ ( EY , oy , EU , EV , mat3 ( _0_0 ) ) ;".split(" ")}]}]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_MATERIAL_SPECULAR"],ja:[{$:"txt",aa:["EY","+=","ET",";"]}]}]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_E_"],ja:[{$:"txt",aa:["E_","=","EU",";"]}]}]},{$:"node_cond",
da:[{$:"node_if",ga:["MATERIAL_EXT"],ja:[{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Fa"],ja:[{$:"txt",aa:"Fa = ES . rgb ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Fb"],ja:[{$:"txt",aa:["Fb","=","ET",";"]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_EZ"],ja:[{$:"txt",aa:"EZ = clamp ( EX , _0_0 , _1_0 ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_MATERIAL_SPECULAR"],ja:[{$:"txt",aa:"float t = max ( max ( ET . r , ET . g ) , ET . b ) * EW ; EZ = clamp ( EX * ( _1_0 - t ) + t , _0_0 , _1_0 ) ;".split(" ")}]}]}]}]}]},
{$:"node_else",ja:[{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_EZ"],ja:[{$:"txt",aa:"EZ = clamp ( sH , _0_0 , _1_0 ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_MATERIAL_SPECULAR"],ja:[{$:"txt",aa:"float t = max ( max ( ET . r , ET . g ) , ET . b ) * sI ; EZ = sH * ( _1_0 - t ) + t ;".split(" ")}]}]}]}]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_MATERIAL_SPECULAR"],ja:[{$:"txt",aa:["F","=","ET",";"]}]},{$:"node_else",ja:[{$:"txt",aa:"F = vec3 ( _0_0 ) ;".split(" ")}]}]},{$:"txt",aa:["G",
"=","EU",";"]}]},{$:"node",ba:"LIGHTING_AMBIENT",ma:[],la:[{$:"node_in",ba:"oP",fa:["vec3"],ea:!1},{$:"node_in",ba:"oQ",fa:["vec3"],ea:!1},{$:"node_in",ba:"oR",fa:["vec3"],ea:!1},{$:"node_out",ba:"oS",fa:["vec4"],ea:!1},{$:"node_out",ba:"oT",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"oS = vec4 ( oP + oR * oQ , _0_0 ) ; oT = vec3 ( _0_0 ) ;".split(" ")}]},{$:"node",ba:"LIGHTING_LAMP",ma:[{$:"node_var",ba:"LAMP_TYPE",aa:["HEMI"]},{$:"node_var",ba:"LAMP_IND",aa:["0"]},{$:"node_var",ba:"LAMP_SPOT_SIZE",aa:["0.8"]},
{$:"node_var",ba:"LAMP_SPOT_BLEND",aa:["0.03"]},{$:"node_var",ba:"LAMP_LIGHT_DIST",aa:["30.0"]},{$:"node_var",ba:"LAMP_SHADOW_MAP_IND",aa:["-","1"]},{$:"node_var",ba:"LAMP_USE_SPHERE",aa:["0"]}],la:[{$:"node_in",ba:"oU",fa:["vec4"],ea:!1},{$:"node_out",ba:"oV",fa:["vec3"],ea:!1},{$:"node_out",ba:"oW",fa:["vec2"],ea:!1},{$:"node_out",ba:"oX",fa:["vec3"],ea:!1},{$:"node_out",ba:"oY",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"oW = vec2 ( u_light_positions [ LAMP_IND ] . w , u_light_color_intensities [ LAMP_IND ] . w ) ;".split(" ")},
{$:"node_cond",da:[{$:"node_if",ga:["LAMP_TYPE","HEMI",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:["oY","=","_0_5",";"]}]},{$:"node_else",ja:[{$:"txt",aa:["oY","=","_0_0",";"]}]}]},{$:"txt",aa:"oX = u_light_color_intensities [ LAMP_IND ] . xyz ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["LAMP_SHADOW_MAP_IND",1,{$:"negative_expr",ia:1},{$:"non_equal_expr",ia:2}],ja:[{$:"txt",aa:"oX *= oU [ LAMP_SHADOW_MAP_IND ] ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["LAMP_TYPE","SPOT",{$:"equal_expr",
ia:2},"LAMP_TYPE","POINT",{$:"equal_expr",ia:2},{$:"logical_or_expr",ia:2}],ja:[{$:"txt",aa:"vec3 oZ = u_light_positions [ LAMP_IND ] . xyz ; oV = oZ - ow ; float aM = length ( oV ) ; oX *= LAMP_LIGHT_DIST / ( LAMP_LIGHT_DIST + aM * aM ) ; oV = normalize ( oV ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["LAMP_TYPE","SPOT",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"vec3 pa = u_light_directions [ LAMP_IND ] ; float pb = dot ( oV , pa ) ; pb *= smoothstep ( _0_0 , _1_0 , ( pb - LAMP_SPOT_SIZE ) / LAMP_SPOT_BLEND ) ; oX *= pb ;".split(" ")}]}]},
{$:"node_cond",da:[{$:"node_if",ga:["LAMP_USE_SPHERE"],ja:[{$:"txt",aa:"oX *= max ( LAMP_LIGHT_DIST - aM , _0_0 ) / LAMP_LIGHT_DIST ;".split(" ")}]}]}]},{$:"node_else",ja:[{$:"txt",aa:"oV = u_light_directions [ LAMP_IND ] ;".split(" ")}]}]}]},{$:"node",ba:"DIFFUSE_FRESNEL",ma:[{$:"node_var",ba:"MAT_USE_TBN_SHADING",aa:["0"]}],la:[{$:"node_in",ba:"pc",fa:["vec3"],ea:!1},{$:"node_in",ba:"pd",fa:["vec2"],ea:!1},{$:"node_in",ba:"pe",fa:["vec3"],ea:!1},{$:"node_in",ba:"pf",fa:["float"],ea:!1},{$:"node_in",
ba:"pg",fa:["vec2"],ea:!1},{$:"node_out",ba:"ph",fa:["float"],ea:!1}],ja:[{$:"txt",aa:["vec3","rz","=","pe",";"]},{$:"node_cond",da:[{$:"node_if",ga:["MAT_USE_TBN_SHADING"],ja:[{$:"txt",aa:"vec3 pi = cross ( pc , B . xyz ) ; rz = cross ( pi , B . xyz ) ; rz = - normalize ( rz ) ;".split(" ")}]}]},{$:"txt",aa:"ph = _0_0 ; if ( pd . r != _0_0 ) { float pj = ( _1_0 - pf ) * dot ( rz , pc ) + pf ; if ( pg [ 0 ] == _0_0 ) { ph = _1_0 ; } else { float t = _1_0 + abs ( pj ) ; t = pg [ 1 ] + ( _1_0 - pg [ 1 ] ) * pow ( t , pg [ 0 ] ) ; ph = clamp ( t , _0_0 , _1_0 ) ; } ph = max ( ph , _0_0 ) ; }".split(" ")}]},
{$:"node",ba:"DIFFUSE_LAMBERT",ma:[{$:"node_var",ba:"MAT_USE_TBN_SHADING",aa:["0"]}],la:[{$:"node_in",ba:"pk",fa:["vec3"],ea:!1},{$:"node_in",ba:"pl",fa:["vec2"],ea:!1},{$:"node_in",ba:"pm",fa:["vec3"],ea:!1},{$:"node_in",ba:"pn",fa:["float"],ea:!1},{$:"node_out",ba:"po",fa:["float"],ea:!1}],ja:[{$:"txt",aa:["vec3","rz","=","pm",";"]},{$:"node_cond",da:[{$:"node_if",ga:["MAT_USE_TBN_SHADING"],ja:[{$:"txt",aa:"vec3 pi = cross ( pk , B . xyz ) ; rz = cross ( pi , B . xyz ) ; rz = - normalize ( rz ) ;".split(" ")}]}]},
{$:"txt",aa:"po = _0_0 ; if ( pl . r != _0_0 ) { float pj = ( _1_0 - pn ) * dot ( rz , pk ) + pn ; po = max ( pj , _0_0 ) ; }".split(" ")}]},{$:"node",ba:"DIFFUSE_OREN_NAYAR",ma:[{$:"node_var",ba:"MAT_USE_TBN_SHADING",aa:["0"]}],la:[{$:"node_in",ba:"pr",fa:["vec3"],ea:!1},{$:"node_in",ba:"pu",fa:["vec2"],ea:!1},{$:"node_in",ba:"pv",fa:["vec3"],ea:!1},{$:"node_in",ba:"pw",fa:["float"],ea:!1},{$:"node_in",ba:"px",fa:["vec2"],ea:!1},{$:"node_out",ba:"py",fa:["float"],ea:!1}],ja:[{$:"txt",aa:["vec3",
"rz","=","pv",";"]},{$:"node_cond",da:[{$:"node_if",ga:["MAT_USE_TBN_SHADING"],ja:[{$:"txt",aa:"vec3 pi = cross ( pr , B . xyz ) ; rz = cross ( pi , B . xyz ) ; rz = - normalize ( rz ) ;".split(" ")}]}]},{$:"txt",aa:"py = _0_0 ; if ( pu . r != _0_0 ) { float pj = ( _1_0 - pw ) * dot ( rz , pr ) + pw ; if ( px [ 0 ] > _0_0 ) { float pz = max ( dot ( rz , oy ) , _0_0 ) ; float pA = px [ 0 ] * px [ 0 ] ; float cG = _1_0 - _0_5 * ( pA / ( pA + 0.33 ) ) ; vec3 pB = pr - pj * rz ; vec3 pC = oy - pz * rz ; if ( length ( pB ) == _0_0 || length ( pC ) == _0_0 || abs ( pj ) > _1_0 || abs ( pz ) > _1_0 ) py = pj * cG ; else { float pD = acos ( pj ) ; float pE = acos ( pz ) ; vec3 pF = normalize ( pB ) ; vec3 pG = normalize ( pC ) ; float a , b ; a = max ( pD , pE ) ; b = min ( pD , pE ) ; b *= 0.95 ; float t = max ( dot ( pF , pG ) , _0_0 ) ; float hS = 0.45 * ( pA / ( pA + 0.09 ) ) ; py = pj * ( cG + ( hS * t * sin ( a ) * tan ( b ) ) ) ; } } else py = pj ; py = max ( py , _0_0 ) ; }".split(" ")}]},
{$:"node",ba:"DIFFUSE_MINNAERT",ma:[{$:"node_var",ba:"MAT_USE_TBN_SHADING",aa:["0"]}],la:[{$:"node_in",ba:"pH",fa:["vec3"],ea:!1},{$:"node_in",ba:"pI",fa:["vec2"],ea:!1},{$:"node_in",ba:"pJ",fa:["vec3"],ea:!1},{$:"node_in",ba:"pK",fa:["float"],ea:!1},{$:"node_in",ba:"pL",fa:["vec2"],ea:!1},{$:"node_out",ba:"pM",fa:["float"],ea:!1}],ja:[{$:"txt",aa:["vec3","rz","=","pJ",";"]},{$:"node_cond",da:[{$:"node_if",ga:["MAT_USE_TBN_SHADING"],ja:[{$:"txt",aa:"vec3 pi = cross ( pH , B . xyz ) ; rz = cross ( pi , B . xyz ) ; rz = - normalize ( rz ) ;".split(" ")}]}]},
{$:"txt",aa:"pM = _0_0 ; if ( pI . r != _0_0 ) { float pj = ( _1_0 - pK ) * dot ( rz , pH ) + pK ; float pz = max ( dot ( rz , oy ) , _0_0 ) ; if ( pL [ 0 ] <= _1_0 ) pM = pj * pow ( max ( pz * pj , 0.1 ) , pL [ 0 ] - _1_0 ) ; else pM = pj * pow ( 1.0001 - pz , pL [ 0 ] - _1_0 ) ; pM = max ( pM , _0_0 ) ; }".split(" ")}]},{$:"node",ba:"DIFFUSE_TOON",ma:[{$:"node_var",ba:"MAT_USE_TBN_SHADING",aa:["0"]}],la:[{$:"node_in",ba:"pN",fa:["vec3"],ea:!1},{$:"node_in",ba:"pO",fa:["vec2"],ea:!1},{$:"node_in",
ba:"pP",fa:["vec3"],ea:!1},{$:"node_in",ba:"pQ",fa:["float"],ea:!1},{$:"node_in",ba:"pR",fa:["vec2"],ea:!1},{$:"node_out",ba:"pS",fa:["float"],ea:!1}],ja:[{$:"txt",aa:["vec3","rz","=","pP",";"]},{$:"node_cond",da:[{$:"node_if",ga:["MAT_USE_TBN_SHADING"],ja:[{$:"txt",aa:"vec3 pi = cross ( pN , B . xyz ) ; rz = cross ( pi , B . xyz ) ; rz = - normalize ( rz ) ;".split(" ")}]}]},{$:"txt",aa:"pS = _0_0 ; if ( pO . r != _0_0 ) { float pj = ( _1_0 - pQ ) * dot ( rz , pN ) + pQ ; float pT = acos ( pj ) ; if ( pT < pR [ 0 ] ) pS = _1_0 ; else if ( pT > ( pR [ 0 ] + pR [ 1 ] ) || pR [ 1 ] == _0_0 ) pS = _0_0 ; else pS = _1_0 - ( ( pT - pR [ 0 ] ) / pR [ 1 ] ) ; pS = max ( pS , _0_0 ) ; }".split(" ")}]},
{$:"node",ba:"SPECULAR_PHONG",ma:[{$:"node_var",ba:"MAT_USE_TBN_SHADING",aa:["0"]}],la:[{$:"node_in",ba:"pU",fa:["vec3"],ea:!1},{$:"node_in",ba:"pV",fa:["vec2"],ea:!1},{$:"node_in",ba:"pW",fa:["vec3"],ea:!1},{$:"node_in",ba:"pX",fa:["float"],ea:!1},{$:"node_in",ba:"pY",fa:["vec2"],ea:!1},{$:"node_out",ba:"pZ",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"pZ = _0_0 ; if ( pV . g == _1_0 ) { vec3 p_ = normalize ( pU + oy ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MAT_USE_TBN_SHADING"],ja:[{$:"txt",
aa:"if ( pX == _0_0 ) { pZ = dot ( B . xyz , p_ ) ; pZ = sqrt ( _1_0 - pZ * pZ ) ; }".split(" ")}]},{$:"node_else",ja:[{$:"txt",aa:"pZ = ( _1_0 - pX ) * max ( dot ( pW , p_ ) , _0_0 ) + pX ;".split(" ")}]}]},{$:"txt",aa:"pZ = pow ( pZ , pY [ 0 ] ) ; }".split(" ")}]},{$:"node",ba:"SPECULAR_COOKTORR",ma:[{$:"node_var",ba:"MAT_USE_TBN_SHADING",aa:["0"]}],la:[{$:"node_in",ba:"qa",fa:["vec3"],ea:!1},{$:"node_in",ba:"qb",fa:["vec2"],ea:!1},{$:"node_in",ba:"qc",fa:["vec3"],ea:!1},{$:"node_in",ba:"qd",fa:["float"],
ea:!1},{$:"node_in",ba:"qe",fa:["vec2"],ea:!1},{$:"node_out",ba:"qf",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"qf = _0_0 ; if ( qb . g != _0_0 ) { vec3 p_ = normalize ( qa + oy ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MAT_USE_TBN_SHADING"],ja:[{$:"txt",aa:"if ( qd == _0_0 ) { qf = dot ( B . xyz , p_ ) ; qf = sqrt ( _1_0 - qf * qf ) ; }".split(" ")}]},{$:"node_else",ja:[{$:"txt",aa:"qf = max ( dot ( qc , p_ ) , _0_0 ) ; qf = ( _1_0 - qd ) * qf + qd ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",
ga:["MAT_USE_TBN_SHADING"],ja:[{$:"txt",aa:"float pz = max ( dot ( B . xyz , oy ) , _0_0 ) ; pz = sqrt ( _1_0 - pz * pz ) ;".split(" ")}]},{$:"node_else",ja:[{$:"txt",aa:"float pz = max ( dot ( qc , oy ) , _0_0 ) ;".split(" ")}]}]},{$:"txt",aa:"qf = pow ( qf , qe [ 0 ] ) ; qf = qf / ( 0.1 + pz ) ; }".split(" ")}]},{$:"node",ba:"SPECULAR_WARDISO",ma:[{$:"node_var",ba:"MAT_USE_TBN_SHADING",aa:["0"]}],la:[{$:"node_in",ba:"qg",fa:["vec3"],ea:!1},{$:"node_in",ba:"qh",fa:["vec2"],ea:!1},{$:"node_in",ba:"qi",
fa:["vec3"],ea:!1},{$:"node_in",ba:"qj",fa:["float"],ea:!1},{$:"node_in",ba:"qk",fa:["vec2"],ea:!1},{$:"node_out",ba:"ql",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"ql = _0_0 ; if ( qh . g == _1_0 ) { vec3 p_ = normalize ( qg + oy ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MAT_USE_TBN_SHADING"],ja:[{$:"txt",aa:"float qm = _0_0 ; float pz = _0_0 ; float qn = _0_0 ; if ( qj == _0_0 ) { qm = dot ( B . xyz , p_ ) ; pz = dot ( B . xyz , oy ) ; qn = dot ( B . xyz , qg ) ; qm = sqrt ( _1_0 - qm * qm ) ; pz = sqrt ( _1_0 - pz * pz ) ; qn = sqrt ( _1_0 - qn * qn ) ; }".split(" ")}]},
{$:"node_else",ja:[{$:"txt",aa:"float qm = max ( dot ( qi , p_ ) , 0.01 ) ; float pz = max ( dot ( qi , oy ) , 0.01 ) ; float qn = max ( dot ( qi , qg ) , 0.01 ) ;".split(" ")}]}]},{$:"txt",aa:"float bP = tan ( acos ( qm ) ) ; float L = max ( qk [ 0 ] , 0.01 ) ; ql = qn * ( _1_0 / ( 4.0 * M_PI * L * L ) ) * ( exp ( - ( bP * bP ) / ( L * L ) ) / ( sqrt ( pz * qn ) ) ) ; }".split(" ")}]},{$:"node",ba:"SPECULAR_TOON",ma:[{$:"node_var",ba:"MAT_USE_TBN_SHADING",aa:["0"]}],la:[{$:"node_in",ba:"qo",fa:["vec3"],
ea:!1},{$:"node_in",ba:"qr",fa:["vec2"],ea:!1},{$:"node_in",ba:"qu",fa:["vec3"],ea:!1},{$:"node_in",ba:"qv",fa:["float"],ea:!1},{$:"node_in",ba:"qw",fa:["vec2"],ea:!1},{$:"node_out",ba:"qx",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"qx = _0_0 ; if ( qr . g == _1_0 ) { vec3 co = normalize ( qo + oy ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MAT_USE_TBN_SHADING"],ja:[{$:"txt",aa:"float qy = dot ( co , B . xyz ) ; float bP = qw [ 0 ] + qw [ 1 ] ; if ( qv == _0_0 ) bP = acos ( sqrt ( _1_0 - qy * qy ) ) ;".split(" ")}]},
{$:"node_else",ja:[{$:"txt",aa:"float bP = acos ( dot ( co , qu ) ) ;".split(" ")}]}]},{$:"txt",aa:"if ( bP < qw [ 0 ] ) qx = _1_0 ; else if ( bP >= qw [ 0 ] + qw [ 1 ] || qw [ 1 ] == _0_0 ) qx = _0_0 ; else qx = _1_0 - ( bP - qw [ 0 ] ) / qw [ 1 ] ; }".split(" ")}]},{$:"node",ba:"SPECULAR_BLINN",ma:[{$:"node_var",ba:"MAT_USE_TBN_SHADING",aa:["0"]}],la:[{$:"node_in",ba:"qz",fa:["vec3"],ea:!1},{$:"node_in",ba:"qA",fa:["vec2"],ea:!1},{$:"node_in",ba:"qB",fa:["vec3"],ea:!1},{$:"node_in",ba:"qC",fa:["float"],
ea:!1},{$:"node_in",ba:"qD",fa:["vec2"],ea:!1},{$:"node_out",ba:"qE",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"float qF = qD [ 0 ] ; float qG = qD [ 1 ] ; qE = _0_0 ; if ( qA . g == _1_0 ) { if ( qF < _1_0 || qG == _0_0 ) qE = _0_0 ; else { if ( qG < 100.0 ) qG = sqrt ( _1_0 / qG ) ; else qG = 10.0 / qG ; vec3 p_ = normalize ( oy + qz ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MAT_USE_TBN_SHADING"],ja:[{$:"txt",aa:"float qm = _0_0 ; if ( qC == _0_0 ) { float qH = dot ( B . xyz , p_ ) ; qm = sqrt ( _1_0 - qH * qH ) ; }".split(" ")}]},
{$:"node_else",ja:[{$:"txt",aa:"float qm = ( _1_0 - qC ) * max ( dot ( qB , p_ ) , _0_0 ) + qC ;".split(" ")}]}]},{$:"txt",aa:"if ( qm < _0_0 ) qE = _0_0 ; else { float pz = max ( dot ( qB , oy ) , 0.01 ) ; float qn = dot ( qB , qz ) ; if ( qn <= 0.01 ) qE = _0_0 ; else { float qI = max ( dot ( oy , p_ ) , 0.01 ) ; float a = _1_0 ; float b = ( 2.0 * qm * pz ) / qI ; float dx = ( 2.0 * qm * qn ) / qI ; float g = min ( min ( a , b ) , dx ) ; float p = sqrt ( pow ( qF , 2.0 ) + pow ( qI , 2.0 ) - _1_0 ) ; float mm = pow ( p - qI , 2.0 ) / pow ( p + qI , 2.0 ) * ( _1_0 + pow ( qI * ( p + qI ) - _1_0 , 2.0 ) / pow ( qI * ( p - qI ) + _1_0 , 2.0 ) ) ; float pT = acos ( qm ) ; qE = max ( mm * g * exp ( - pow ( pT , 2.0 ) / ( 2.0 * pow ( qG , 2.0 ) ) ) , _0_0 ) ; } } } }".split(" ")}]},
{$:"node",ba:"LIGHTING_APPLY",ma:[],la:[{$:"node_in",ba:"qJ",fa:["vec4"],ea:!1},{$:"node_in",ba:"qK",fa:["vec3"],ea:!1},{$:"node_in",ba:"qL",fa:["float"],ea:!1},{$:"node_in",ba:"qM",fa:["float"],ea:!1},{$:"node_in",ba:"qN",fa:["vec3"],ea:!1},{$:"node_in",ba:"qO",fa:["vec3"],ea:!1},{$:"node_in",ba:"qP",fa:["vec4"],ea:!1},{$:"node_in",ba:"qQ",fa:["vec3"],ea:!1},{$:"node_in",ba:"qR",fa:["vec3"],ea:!1},{$:"node_in",ba:"qS",fa:["vec3"],ea:!1},{$:"node_in",ba:"qT",fa:["float"],ea:!1},{$:"node_out",ba:"qU",
fa:["vec4"],ea:!1},{$:"node_out",ba:"qV",fa:["vec3"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["USE_NODE_B4W_TRANSLUCENCY"],ja:[{$:"txt",aa:"if ( dot ( qN , qO ) * dot ( oy , qO ) < _0_0 ) { float Fc = qP . x ; float Fd = qP . y ; float Fe = qP . z ; float Ff = qP . w ; float Fg = clamp ( abs ( dot ( qN , qO ) ) , _0_0 , _1_0 ) ; float Fh = clamp ( dot ( oy , - qN ) , _0_0 , _1_0 ) ; float Fi = pow ( Fh , Fd ) ; qU = qJ + qT * vec4 ( qS * Fg * pow ( qQ , vec3 ( Fc ) ) , _1_0 ) ; qU += Fe * mix ( vec4 ( qQ , _1_0 ) , vec4 ( _1_0 ) , Ff ) * qT * vec4 ( qS * Fg * vec3 ( Fi ) , _1_0 ) ; } else { qU = qJ + vec4 ( qS * qQ * qL , qM ) ; }".split(" ")}]},
{$:"node_else",ja:[{$:"txt",aa:"qU = qJ + vec4 ( qS * qQ * qL , qM ) ;".split(" ")}]}]},{$:"txt",aa:"qV = qK + qS * qR * qM ;".split(" ")}]},{$:"node",ba:"RGB",ma:[{$:"node_var",ba:"RGB_IND",aa:["0"]}],la:[{$:"node_out",ba:"Fj",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"Fj = u_node_rgbs [ RGB_IND ] ;".split(" ")}]},{$:"node",ba:"RGBTOBW",ma:[],la:[{$:"node_in",ba:"Fk",fa:["vec3"],ea:!1},{$:"node_out",ba:"Fl",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"Fl = dot ( Fk , vec3 ( 0.35 , 0.45 , 0.2 ) ) ;".split(" ")}]},
{$:"node",ba:"SEPRGB",ma:[],la:[{$:"node_in",ba:"Fm",fa:["vec3"],ea:!1},{$:"node_out",ba:"Fn",fa:["float"],ea:!0},{$:"node_out",ba:"Fo",fa:["float"],ea:!0},{$:"node_out",ba:"Fp",fa:["float"],ea:!0}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Fn"],ja:[{$:"txt",aa:"Fn = Fm . r ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Fo"],ja:[{$:"txt",aa:"Fo = Fm . g ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Fp"],ja:[{$:"txt",aa:"Fp = Fm . b ;".split(" ")}]}]}]},{$:"node",
ba:"SEPHSV",ma:[],la:[{$:"node_in",ba:"Fq",fa:["vec3"],ea:!1},{$:"node_out",ba:"Fr",fa:["float"],ea:!0},{$:"node_out",ba:"Fs",fa:["float"],ea:!0},{$:"node_out",ba:"Ft",fa:["float"],ea:!0}],ja:[{$:"txt",aa:"vec3 Fu = kj ( Fq ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Fr"],ja:[{$:"txt",aa:"Fr = Fu . r ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Fs"],ja:[{$:"txt",aa:"Fs = Fu . g ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Ft"],ja:[{$:"txt",aa:"Ft = Fu . b ;".split(" ")}]}]}]},
{$:"node",ba:"SQUEEZE",ma:[],la:[{$:"node_in",ba:"Fv",fa:["float"],ea:!1},{$:"node_in",ba:"Fw",fa:["float"],ea:!1},{$:"node_in",ba:"Fx",fa:["float"],ea:!1},{$:"node_out",ba:"Fy",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"Fy = _1_0 / ( _1_0 + pow ( 2.71828183 , - ( Fv - Fx ) * Fw ) ) ;".split(" ")}]},{$:"node",ba:"GAMMA",ma:[],la:[{$:"node_in",ba:"Fz",fa:["vec3"],ea:!1},{$:"node_in",ba:"FA",fa:["float"],ea:!1},{$:"node_out",ba:"FB",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"FB = Fz ; if ( FB . x > _0_0 ) FB . x = pow ( Fz . x , FA ) ; if ( FB . y > _0_0 ) FB . y = pow ( Fz . y , FA ) ; if ( FB . z > _0_0 ) FB . z = pow ( Fz . z , FA ) ;".split(" ")}]},
{$:"node",ba:"B4W_SRGB_TO_LINEAR",ma:[],la:[{$:"node_in",ba:"FC",fa:["vec3"],ea:!1},{$:"node_out",ba:"FD",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"FD = max ( vec3 ( _0_0 ) , FC ) ; FD = pow ( FD , vec3 ( 2.2 ) ) ;".split(" ")}]},{$:"node",ba:"B4W_LINEAR_TO_SRGB",ma:[],la:[{$:"node_in",ba:"FE",fa:["vec3"],ea:!1},{$:"node_out",ba:"FF",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"FF = max ( vec3 ( _0_0 ) , FE ) ; FF = pow ( FF , vec3 ( _1_0 / 2.2 ) ) ;".split(" ")}]},{$:"node",ba:"TEXTURE_EMPTY",ma:[],la:[{$:"node_out",
ba:"FG",fa:["vec3"],ea:!1},{$:"node_out",ba:"FH",fa:["vec3"],ea:!1},{$:"node_out",ba:"FI",fa:["float"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_FG"],ja:[{$:"txt",aa:"FG = vec3 ( _0_0 ) ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_FH"],ja:[{$:"txt",aa:"FH = vec3 ( _0_0 ) ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_FI"],ja:[{$:"txt",aa:["FI","=","_0_0",";"]}]}]}]},{$:"node",ba:"TEXTURE_ENVIRONMENT_CUBE",ma:[],la:[{$:"node_in",ba:"FJ",fa:["vec3"],
ea:!1},{$:"node_out",ba:"FK",fa:["vec3"],ea:!0},{$:"node_out",ba:"FL",fa:["float"],ea:!0},{$:"node_param",ba:"node_TEXTURE_ENVIRONMENT_CUBE_var_texture",fa:["uniform","samplerCube"],ea:!1}],ja:[{$:"txt",aa:"vec3 FM = vec3 ( FJ . x , FJ . y , FJ . z ) ; vec4 BN = GLSL_TEXTURE_CUBE ( node_TEXTURE_ENVIRONMENT_CUBE_var_texture , FM ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_FK"],ja:[{$:"txt",aa:"FK = BN . xyz ; bG ( FK ) ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_FL"],
ja:[{$:"txt",aa:"FL = BN . w ;".split(" ")}]}]}]},{$:"node",ba:"TEXTURE_ENVIRONMENT_EQUIRECTANGULAR",ma:[{$:"node_var",ba:"USE_VECTOR_IN",aa:["0"]}],la:[{$:"node_in",ba:"FN",fa:["vec3"],ea:!1},{$:"node_out",ba:"FO",fa:["vec3"],ea:!1},{$:"node_param",ba:"node_TEXTURE_ENVIRONMENT_EQUIRECTANGULAR_var_texture",fa:["uniform","sampler2D"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["USE_VECTOR_IN"],ja:[{$:"txt",aa:"vec3 FP = normalize ( FN ) ;".split(" ")}]},{$:"node_elif",ga:["IS_WORLD"],ja:[{$:"txt",
aa:["vec3","FP","=","sJ",";"]}]},{$:"node_else",ja:[{$:"txt",aa:["vec3","FP","=","ox",";"]}]}]},{$:"txt",aa:"float dF = - atan ( FP . y , FP . x ) / ( 2.0 * M_PI ) + _0_5 ; float kU = atan ( FP . z , sqrt ( FP . x * FP . x + FP . y * FP . y ) ) / M_PI + _0_5 ; vec4 BN = GLSL_TEXTURE ( node_TEXTURE_ENVIRONMENT_EQUIRECTANGULAR_var_texture , vec2 ( dF , kU ) ) ; FO = BN . xyz ; bG ( FO ) ;".split(" ")}]},{$:"node",ba:"TEXTURE_ENVIRONMENT_MIRROR_BALL",ma:[{$:"node_var",ba:"USE_VECTOR_IN",aa:["0"]}],la:[{$:"node_in",
ba:"FQ",fa:["vec3"],ea:!1},{$:"node_out",ba:"FR",fa:["vec3"],ea:!1},{$:"node_param",ba:"node_TEXTURE_ENVIRONMENT_MIRROR_BALL_var_texture",fa:["uniform","sampler2D"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["USE_VECTOR_IN"],ja:[{$:"txt",aa:"vec3 FP = normalize ( FQ ) ;".split(" ")}]},{$:"node_elif",ga:["IS_WORLD"],ja:[{$:"txt",aa:["vec3","FP","=","sJ",";"]}]},{$:"node_else",ja:[{$:"txt",aa:["vec3","FP","=","ox",";"]}]}]},{$:"txt",aa:"FP . y -= _1_0 ; float FS = 2.0 * sqrt ( max ( - _0_5 * FP . y , _0_0 ) ) ; if ( FS > _0_0 ) FP /= FS ; float dF = _0_5 * ( FP . x + _1_0 ) ; float kU = _0_5 * ( FP . z + _1_0 ) ; vec4 BN = GLSL_TEXTURE ( node_TEXTURE_ENVIRONMENT_MIRROR_BALL_var_texture , vec2 ( dF , kU ) ) ; FR = BN . xyz ; bG ( FR ) ;".split(" ")}]},
{$:"node",ba:"TEXTURE_COLOR",ma:[{$:"node_var",ba:"NON_COLOR",aa:["0"]},{$:"node_var",ba:"CONVERT_UV",aa:["0"]},{$:"node_var",ba:"USE_uv2",aa:["0"]},{$:"node_var",ba:"USE_uv3",aa:["0"]},{$:"node_var",ba:"USE_uv4",aa:["0"]}],la:[{$:"node_in",ba:"FT",fa:["vec3"],ea:!0},{$:"node_in",ba:"FU",fa:["vec3"],ea:!0},{$:"node_in",ba:"FV",fa:["vec3"],ea:!0},{$:"node_in",ba:"FW",fa:["vec3"],ea:!0},{$:"node_out",ba:"FX",fa:["vec3"],ea:!0},{$:"node_out",ba:"FY",fa:["float"],ea:!0},{$:"node_out",ba:"FZ",fa:["vec3"],
ea:!0},{$:"node_out",ba:"F_",fa:["float"],ea:!0},{$:"node_out",ba:"Ga",fa:["vec3"],ea:!0},{$:"node_out",ba:"Gb",fa:["float"],ea:!0},{$:"node_out",ba:"Gc",fa:["vec3"],ea:!0},{$:"node_out",ba:"Gd",fa:["float"],ea:!0},{$:"node_param",ba:"node_TEXTURE_COLOR_var_texture",fa:["uniform","sampler2D"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["CONVERT_UV"],ja:[{$:"txt",aa:"vec4 BN = GLSL_TEXTURE ( node_TEXTURE_COLOR_var_texture , so ( FT ) ) ;".split(" ")}]},{$:"node_else",ja:[{$:"txt",aa:"vec4 BN = GLSL_TEXTURE ( node_TEXTURE_COLOR_var_texture , FT . xy ) ;".split(" ")}]}]},
{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_FX"],ja:[{$:"txt",aa:"FX = BN . xyz ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["NON_COLOR",{$:"logic_negative_expr",ia:1}],ja:[{$:"txt",aa:["bG","(","FX",")",";"]}]}]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_FY"],ja:[{$:"txt",aa:"FY = BN . w ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_uv2"],ja:[{$:"node_cond",da:[{$:"node_if",ga:["CONVERT_UV"],ja:[{$:"txt",aa:"BN = GLSL_TEXTURE ( node_TEXTURE_COLOR_var_texture , so ( FU ) ) ;".split(" ")}]},
{$:"node_else",ja:[{$:"txt",aa:"BN = GLSL_TEXTURE ( node_TEXTURE_COLOR_var_texture , FU . xy ) ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_FZ"],ja:[{$:"txt",aa:"FZ = BN . xyz ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["NON_COLOR",{$:"logic_negative_expr",ia:1}],ja:[{$:"txt",aa:["bG","(","FZ",")",";"]}]}]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_F_"],ja:[{$:"txt",aa:"F_ = BN . w ;".split(" ")}]}]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_uv3"],ja:[{$:"node_cond",
da:[{$:"node_if",ga:["CONVERT_UV"],ja:[{$:"txt",aa:"BN = GLSL_TEXTURE ( node_TEXTURE_COLOR_var_texture , so ( FV ) ) ;".split(" ")}]},{$:"node_else",ja:[{$:"txt",aa:"BN = GLSL_TEXTURE ( node_TEXTURE_COLOR_var_texture , FV . xy ) ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Ga"],ja:[{$:"txt",aa:"Ga = BN . xyz ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["NON_COLOR",{$:"logic_negative_expr",ia:1}],ja:[{$:"txt",aa:["bG","(","Ga",")",";"]}]}]}]}]},{$:"node_cond",da:[{$:"node_if",
ga:["USE_OUT_Gb"],ja:[{$:"txt",aa:"Gb = BN . w ;".split(" ")}]}]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_uv4"],ja:[{$:"node_cond",da:[{$:"node_if",ga:["CONVERT_UV"],ja:[{$:"txt",aa:"BN = GLSL_TEXTURE ( node_TEXTURE_COLOR_var_texture , so ( FW ) ) ;".split(" ")}]},{$:"node_else",ja:[{$:"txt",aa:"BN = GLSL_TEXTURE ( node_TEXTURE_COLOR_var_texture , FW . xy ) ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Gc"],ja:[{$:"txt",aa:"Gc = BN . xyz ;".split(" ")},{$:"node_cond",da:[{$:"node_if",
ga:["NON_COLOR",{$:"logic_negative_expr",ia:1}],ja:[{$:"txt",aa:["bG","(","Gc",")",";"]}]}]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Gd"],ja:[{$:"txt",aa:"Gd = BN . w ;".split(" ")}]}]}]}]}]},{$:"node",ba:"TEXTURE_NORMAL",ma:[{$:"node_var",ba:"USE_uv2",aa:["0"]},{$:"node_var",ba:"USE_uv3",aa:["0"]},{$:"node_var",ba:"USE_uv4",aa:["0"]}],la:[{$:"node_in",ba:"Ge",fa:["vec3"],ea:!0},{$:"node_in",ba:"Gf",fa:["vec3"],ea:!0},{$:"node_in",ba:"Gg",fa:["vec3"],ea:!0},{$:"node_in",ba:"Gh",fa:["vec3"],
ea:!0},{$:"node_out",ba:"Gi",fa:["vec3"],ea:!0},{$:"node_out",ba:"Gj",fa:["float"],ea:!0},{$:"node_out",ba:"Gk",fa:["vec3"],ea:!0},{$:"node_out",ba:"Gl",fa:["float"],ea:!0},{$:"node_out",ba:"Gm",fa:["vec3"],ea:!0},{$:"node_out",ba:"Gn",fa:["float"],ea:!0},{$:"node_out",ba:"Go",fa:["vec3"],ea:!0},{$:"node_out",ba:"Gp",fa:["float"],ea:!0},{$:"node_param",ba:"node_TEXTURE_NORMAL_var_texture",fa:["uniform","sampler2D"],ea:!1}],ja:[{$:"txt",aa:"vec4 BN = GLSL_TEXTURE ( node_TEXTURE_NORMAL_var_texture , so ( Ge ) ) ;".split(" ")},
{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Gi"],ja:[{$:"txt",aa:"Gi = normalize ( sO * ( BN . xyz - _0_5 ) ) ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Gj"],ja:[{$:"txt",aa:"Gj = BN . w ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_uv2"],ja:[{$:"txt",aa:"BN = GLSL_TEXTURE ( node_TEXTURE_NORMAL_var_texture , so ( Gf ) ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Gk"],ja:[{$:"txt",aa:"Gk = normalize ( sO * ( BN . xyz - _0_5 ) ) ;".split(" ")}]}]},
{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Gl"],ja:[{$:"txt",aa:"Gl = BN . w ;".split(" ")}]}]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_uv3"],ja:[{$:"txt",aa:"BN = GLSL_TEXTURE ( node_TEXTURE_NORMAL_var_texture , so ( Gg ) ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Gm"],ja:[{$:"txt",aa:"Gm = normalize ( sO * ( BN . xyz - _0_5 ) ) ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Gn"],ja:[{$:"txt",aa:"Gn = BN . w ;".split(" ")}]}]}]}]},{$:"node_cond",da:[{$:"node_if",
ga:["USE_uv4"],ja:[{$:"txt",aa:"BN = GLSL_TEXTURE ( node_TEXTURE_NORMAL_var_texture , so ( Gh ) ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Go"],ja:[{$:"txt",aa:"Go = normalize ( sO * ( BN . xyz - _0_5 ) ) ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Gp"],ja:[{$:"txt",aa:"Gp = BN . w ;".split(" ")}]}]}]}]}]},{$:"node",ba:"VALUE",ma:[{$:"node_var",ba:"VALUE_ROW_IND",aa:["0"]},{$:"node_var",ba:"VALUE_COL_IND",aa:["0"]}],la:[{$:"node_out",ba:"Gq",fa:["float"],ea:!1}],
ja:[{$:"txt",aa:"Gq = u_node_values [ VALUE_ROW_IND ] [ VALUE_COL_IND ] ;".split(" ")}]},{$:"node",ba:"VECT_MATH_ADD",ma:[],la:[{$:"node_in",ba:"Gr",fa:["vec3"],ea:!1},{$:"node_in",ba:"Gs",fa:["vec3"],ea:!1},{$:"node_out",ba:"Gt",fa:["vec3"],ea:!1},{$:"node_out",ba:"Gu",fa:["float"],ea:!0}],ja:[{$:"txt",aa:"Gt = Gr + Gs ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Gu"],ja:[{$:"txt",aa:"Gu = ( abs ( Gt [ 0 ] ) + abs ( Gt [ 1 ] ) + abs ( Gt [ 2 ] ) ) / 3.0 ;".split(" ")}]}]}]},{$:"node",
ba:"VECT_MATH_SUBTRACT",ma:[],la:[{$:"node_in",ba:"Gv",fa:["vec3"],ea:!1},{$:"node_in",ba:"Gw",fa:["vec3"],ea:!1},{$:"node_out",ba:"Gx",fa:["vec3"],ea:!1},{$:"node_out",ba:"Gy",fa:["float"],ea:!0}],ja:[{$:"txt",aa:"Gx = Gv - Gw ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Gy"],ja:[{$:"txt",aa:"Gy = ( abs ( Gx [ 0 ] ) + abs ( Gx [ 1 ] ) + abs ( Gx [ 2 ] ) ) / 3.0 ;".split(" ")}]}]}]},{$:"node",ba:"VECT_MATH_AVERAGE",ma:[],la:[{$:"node_in",ba:"Gz",fa:["vec3"],ea:!1},{$:"node_in",ba:"GA",
fa:["vec3"],ea:!1},{$:"node_out",ba:"GB",fa:["vec3"],ea:!1},{$:"node_out",ba:"GC",fa:["float"],ea:!0}],ja:[{$:"txt",aa:"GB = Gz + GA ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_GC"],ja:[{$:"txt",aa:"GC = length ( GB ) ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_GB"],ja:[{$:"txt",aa:"GB = normalize ( GB ) ;".split(" ")}]}]}]},{$:"node",ba:"VECT_MATH_DOT_PRODUCT",ma:[],la:[{$:"node_in",ba:"GD",fa:["vec3"],ea:!1},{$:"node_in",ba:"GE",fa:["vec3"],ea:!1},{$:"node_out",
ba:"GF",fa:["vec3"],ea:!1},{$:"node_out",ba:"GG",fa:["float"],ea:!0}],ja:[{$:"txt",aa:"GF = vec3 ( _0_0 ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_GG"],ja:[{$:"txt",aa:"GG = dot ( GD , GE ) ;".split(" ")}]}]}]},{$:"node",ba:"VECT_MATH_CROSS_PRODUCT",ma:[],la:[{$:"node_in",ba:"GH",fa:["vec3"],ea:!1},{$:"node_in",ba:"GI",fa:["vec3"],ea:!1},{$:"node_out",ba:"GJ",fa:["vec3"],ea:!1},{$:"node_out",ba:"GK",fa:["float"],ea:!0}],ja:[{$:"txt",aa:"GJ = cross ( GH , GI ) ;".split(" ")},{$:"node_cond",
da:[{$:"node_if",ga:["USE_OUT_GK"],ja:[{$:"txt",aa:"GK = length ( GJ ) ; GJ /= GK ;".split(" ")}]},{$:"node_else",ja:[{$:"txt",aa:"GJ = normalize ( GJ ) ;".split(" ")}]}]}]},{$:"node",ba:"VECT_MATH_NORMALIZE",ma:[],la:[{$:"node_in",ba:"GL",fa:["vec3"],ea:!1},{$:"node_in",ba:"GM",fa:["vec3"],ea:!1},{$:"node_out",ba:"GN",fa:["vec3"],ea:!1},{$:"node_out",ba:"GO",fa:["float"],ea:!0}],ja:[{$:"txt",aa:"GN = normalize ( GL ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_GO"],ja:[{$:"txt",aa:"GO = length ( GL ) ;".split(" ")}]}]},
{$:"txt",aa:["GM",";"]}]},{$:"node",ba:"FRESNEL",ma:[{$:"node_var",ba:"USE_FRESNEL_NORMAL",aa:["0"]}],la:[{$:"node_in",ba:"GP",fa:["float"],ea:!1},{$:"node_in",ba:"GQ",fa:["vec3"],ea:!1},{$:"node_out",ba:"GR",fa:["float"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["USE_FRESNEL_NORMAL"],ja:[{$:"txt",aa:"vec3 cw = normalize ( GQ ) ;".split(" ")}]},{$:"node_else",ja:[{$:"txt",aa:["vec3","cw","=","ox",";"]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["CAMERA_TYPE","CAM_TYPE_PERSP",{$:"equal_expr",ia:2}],
ja:[{$:"txt",aa:"vec3 Bp = normalize ( oy ) ;".split(" ")}]},{$:"node_else",ja:[{$:"txt",aa:["vec3","Bp","=","u_camera_direction",";"]}]}]},{$:"txt",aa:"float su = max ( GP , 0.00001 ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["REFLECTION_PASS","REFL_PASS_PLANE",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"su = gl_FrontFacing == false ? su : _1_0 / su ;".split(" ")}]},{$:"node_else",ja:[{$:"txt",aa:"su = gl_FrontFacing ? su : _1_0 / su ;".split(" ")}]}]},{$:"txt",aa:"GR = sv ( Bp , cw , su ) ;".split(" ")}]},
{$:"node",ba:"BACKGROUND",ma:[],la:[{$:"node_in",ba:"GS",fa:["vec3"],ea:!1},{$:"node_in",ba:"GT",fa:["float"],ea:!1},{$:"node_out",ba:"GU",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"GU = GS * GT ;".split(" ")}]},{$:"node",ba:"B4W_REFLECT",ma:[],la:[{$:"node_in",ba:"GV",fa:["vec3"],ea:!1},{$:"node_in",ba:"GW",fa:["vec3"],ea:!1},{$:"node_out",ba:"GX",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"GX = reflect ( _ ( u_view_tsr_inverse , GV ) , GW ) ;".split(" ")}]},{$:"node",ba:"B4W_REFLECT_WORLD",ma:[],la:[{$:"node_in",
ba:"GY",fa:["vec3"],ea:!1},{$:"node_out",ba:"GZ",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"GZ = reflect ( - oy . xyz , GY ) ;".split(" ")}]},{$:"node",ba:"B4W_PARALLAX",ma:[],la:[{$:"node_in",ba:"G_",fa:["vec3"],ea:!1},{$:"node_in",ba:"Ha",fa:["float"],ea:!1},{$:"node_in",ba:"Hb",fa:["const","float"],ea:!1},{$:"node_in",ba:"Hc",fa:["const","float"],ea:!1},{$:"node_out",ba:"Hd",fa:["vec3"],ea:!1},{$:"node_param",ba:"node_B4W_PARALLAX_var_texture",fa:["uniform","sampler2D"],ea:!1}],ja:[{$:"txt",aa:"float bS = length ( sR ) ; if ( bS < Hc ) { vec2 ce = so ( G_ ) ; float ci = clamp ( _0_5 * ( Hc - bS ) , _0_0 , _1_0 ) ; float hK = Ha * ci ; vec3 ck = normalize ( oy * sO ) ; float cl = _1_0 / Hb ; vec2 cm = ck . xy * hK / ( Hb * ck . z ) ; float cn = _1_0 ; float co = GLSL_TEXTURE ( node_B4W_PARALLAX_var_texture , ce ) . a ; for ( float cq = 1.0 ; cq <= Hb ; cq ++ ) { if ( co < cn ) { cn -= cl ; ce -= cm ; co = GLSL_TEXTURE ( node_B4W_PARALLAX_var_texture , ce ) . a ; } } vec2 cr = ce + cm ; float cs = GLSL_TEXTURE ( node_B4W_PARALLAX_var_texture , cr ) . a - ( cn + cl ) ; float ct = co - cn ; float cu = ct / ( ct - cs ) ; ce = cu * cr + ( _1_0 - cu ) * ce ; Hd = sn ( ce ) ; } else Hd = G_ ;".split(" ")}]},
{$:"node",ba:"B4W_CLAMP",ma:[],la:[{$:"node_in",ba:"He",fa:["vec3"],ea:!1},{$:"node_out",ba:"Hf",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"Hf = clamp ( He , _0_0 , _1_0 ) ;".split(" ")}]},{$:"node",ba:"B4W_REFRACTION",ma:[],la:[{$:"node_in",ba:"Hg",fa:["vec3"],ea:!1},{$:"node_in",ba:"Hh",fa:["float"],ea:!1},{$:"node_out",ba:"Hi",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"Hi = sm ( Hg , Hh ) ;".split(" ")}]},{$:"node",ba:"B4W_TRANSLUCENCY",ma:[],la:[{$:"node_in",ba:"Hj",fa:["float"],ea:!1},{$:"node_in",ba:"Hk",
fa:["float"],ea:!1},{$:"node_in",ba:"Hl",fa:["float"],ea:!1},{$:"node_in",ba:"Hm",fa:["float"],ea:!1},{$:"node_in",ba:"Hn",fa:["float"],ea:!1},{$:"node_out",ba:"Ho",fa:["float"],ea:!0},{$:"node_out",ba:"Hp",fa:["vec4"],ea:!0}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Ho"],ja:[{$:"txt",aa:["Ho","=","Hj",";"]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Hp"],ja:[{$:"txt",aa:"Hp = vec4 ( Hk , Hl , Hm , Hn ) ;".split(" ")}]}]}]},{$:"node",ba:"B4W_TIME",ma:[],la:[{$:"node_out",ba:"Hq",fa:["float"],
ea:!1}],ja:[{$:"txt",aa:["Hq","=","u_time",";"]}]},{$:"node",ba:"B4W_SMOOTHSTEP",ma:[],la:[{$:"node_in",ba:"Hr",fa:["float"],ea:!1},{$:"node_in",ba:"Hs",fa:["float"],ea:!1},{$:"node_in",ba:"Ht",fa:["float"],ea:!1},{$:"node_out",ba:"Hu",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"Hu = smoothstep ( Hs , Ht , Hr ) ;".split(" ")}]},{$:"node",ba:"B4W_GLOW_OUTPUT",ma:[],la:[{$:"node_in",ba:"Hv",fa:["vec3"],ea:!1},{$:"node_in",ba:"Hw",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"E = Hv ; I = Hw ;".split(" ")}]},{$:"node",
ba:"B4W_VECTOSCAL",ma:[],la:[{$:"node_in",ba:"Hx",fa:["vec3"],ea:!1},{$:"node_out",ba:"Hy",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"Hy = ( Hx . r + Hx . g + Hx . b ) / 3.0 ;".split(" ")}]},{$:"node",ba:"B4W_SCALTOVEC",ma:[],la:[{$:"node_in",ba:"Hz",fa:["float"],ea:!1},{$:"node_out",ba:"HA",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"HA [ 0 ] = Hz ; HA [ 1 ] = Hz ; HA [ 2 ] = Hz ;".split(" ")}]},{$:"nodes_global"},{$:"txt",aa:"void J ( in vec3 oy , out vec3 E , out vec3 F , out vec3 G , out vec4 H , out float I ) { E = vec3 ( _0_0 ) ; F = vec3 ( _0_0 ) ; G = vec3 ( _0_0 ) ; H = vec4 ( _0_0 ) ; I = _0_0 ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["IS_WORLD"],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["USE_NODE_TEXTURE_ENVIRONMENT_EQUIRECTANGULAR","USE_NODE_TEXTURE_ENVIRONMENT_MIRROR_BALL","USE_NODE_TEX_COORD_GE","USE_NODE_TEX_COORD_OB",{$:"logical_or_expr",ia:4}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 sJ = - oy ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_GEOMETRY_GL"],ha:{$:"grp",da:[{$:"txt",aa:"vec3 ow = - oy ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_TEX_COORD_NO"],ha:{$:"grp",da:[{$:"txt",aa:["vec3",
"ox","=","oy",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_GEOMETRY_NO"],ha:{$:"grp",da:[{$:"txt",aa:["vec3","sK","=","oy",";"]}]}}]}]}},{$:"else",ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","USE_NODE_TEX_COORD_NO","USE_NODE_NORMAL_MAP","USE_NODE_BSDF_BEGIN","USE_NODE_FRESNEL","USE_NODE_TEX_COORD_RE","USE_NODE_LAYER_WEIGHT","USE_NODE_BUMP",{$:"logical_or_expr",ia:11}],ha:{$:"grp",da:[{$:"txt",aa:["vec3","sL","=","j",";"]},
{$:"cond",da:[{$:"if",ga:["DOUBLE_SIDED_LIGHTING","USE_NODE_GEOMETRY_NO",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["REFLECTION_PASS","REFL_PASS_PLANE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"if ( gl_FrontFacing == false )".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["if","(","gl_FrontFacing",")"]}]}}]},{$:"txt",aa:"sL = sL ; else sL = - sL ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_NORMAL_MAP"],ha:{$:"grp",da:[{$:"txt",aa:["vec3","sM",
"=","sL",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["DOUBLE_SIDED_LIGHTING","USE_NODE_GEOMETRY_NO","USE_NODE_TEXTURE_NORMAL","USE_NODE_B4W_PARALLAX",{$:"logical_or_expr",ia:4}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 sN = normalize ( sL ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["DOUBLE_SIDED_LIGHTING"],ha:{$:"grp",da:[{$:"txt",aa:["vec3","ox","=","sN",";"]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec3 ox = normalize ( j ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_GEOMETRY_NO"],ha:{$:"grp",
da:[{$:"txt",aa:["vec3","sK","=","sN",";"]}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["CALC_TBN_SPACE"],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["USE_NODE_TEXTURE_NORMAL","USE_NODE_B4W_PARALLAX",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 W = cross ( sN , k . xyz ) * k . w ; mat3 sO = mat3 ( k . xyz , W , sN ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_NORMAL_MAP"],ha:{$:"grp",da:[{$:"txt",aa:"vec3 sP = cross ( sL , k . xyz ) * k . w ; mat3 sQ = mat3 ( k . xyz , sP , sL ) ;".split(" ")}]}}]}]}}]},
{$:"txt",aa:"vec3 ow = h ; vec4 sR = i ; float sS = u_emit ; float sT = u_ambient ;".split(" ")}]}}]},{$:"nodes_main"},{$:"txt",aa:["}"]}]}}]}]};f["include/nodes.glslv"]={$:"grp",da:[{$:"cond",da:[{$:"ifndef",ba:"NODES_GLSLV",ha:{$:"grp",da:[{$:"define",ba:"NODES_GLSLV",aa:[""]},{$:"var",ba:"PARTICLE_BATCH",aa:["0"]},{$:"cond",da:[{$:"if",ga:["USE_NODE_GEOMETRY_OR","USE_NODE_TEX_COORD_GE",{$:"logical_or_expr",ia:2},"PARTICLE_BATCH",{$:"logic_negative_expr",ia:1},{$:"logical_and_expr",ia:2}],ha:{$:"grp",
da:[{$:"txt",aa:"GLSL_IN vec3 a_orco_tex_coord ; GLSL_OUT vec3 sj ;".split(" ")}]}}]},{$:"node",ba:"TEX_COORD_UV",ma:[],la:[{$:"node_param",ba:"node_TEX_COORD_UV_var_a_uv",fa:["GLSL_IN","vec2"],ea:!1},{$:"node_param",ba:"sD",fa:["GLSL_OUT","vec2"],ea:!1}],ja:[{$:"txt",aa:["sD","=","node_TEX_COORD_UV_var_a_uv",";"]}]},{$:"node",ba:"UV_MERGED",ma:[],la:[{$:"node_param",ba:"node_UV_MERGED_var_a_uv",fa:["GLSL_IN","vec2"],ea:!1},{$:"node_param",ba:"sC",fa:["GLSL_OUT","vec2"],ea:!1}],ja:[{$:"txt",aa:["sC",
"=","node_UV_MERGED_var_a_uv",";"]}]},{$:"node",ba:"UVMAP",ma:[],la:[{$:"node_param",ba:"node_UVMAP_var_a_uv",fa:["GLSL_IN","vec2"],ea:!1},{$:"node_param",ba:"sE",fa:["GLSL_OUT","vec2"],ea:!1}],ja:[{$:"txt",aa:["sE","=","node_UVMAP_var_a_uv",";"]}]},{$:"node",ba:"GEOMETRY_UV",ma:[],la:[{$:"node_param",ba:"node_GEOMETRY_UV_var_a_uv",fa:["GLSL_IN","vec2"],ea:!1},{$:"node_param",ba:"sw",fa:["GLSL_OUT","vec2"],ea:!1}],ja:[{$:"txt",aa:["sw","=","node_GEOMETRY_UV_var_a_uv",";"]}]},{$:"node",ba:"GEOMETRY_VC",
ma:[],la:[{$:"node_param",ba:"node_GEOMETRY_VC_var_a_vertex_color",fa:["GLSL_IN","vec3"],ea:!1},{$:"node_param",ba:"HB",fa:["GLSL_OUT","vec3"],ea:!1}],ja:[{$:"txt",aa:["HB","=","node_GEOMETRY_VC_var_a_vertex_color",";"]}]},{$:"node",ba:"GEOMETRY_VC1",ma:[],la:[{$:"node_param",ba:"node_GEOMETRY_VC1_var_a_vertex_color",fa:["GLSL_IN","float"],ea:!1},{$:"node_param",ba:"HC",fa:["GLSL_OUT","float"],ea:!1}],ja:[{$:"txt",aa:["HC","=","node_GEOMETRY_VC1_var_a_vertex_color",";"]}]},{$:"node",ba:"GEOMETRY_VC2",
ma:[],la:[{$:"node_param",ba:"node_GEOMETRY_VC2_var_a_vertex_color",fa:["GLSL_IN","vec2"],ea:!1},{$:"node_param",ba:"HD",fa:["GLSL_OUT","vec2"],ea:!1}],ja:[{$:"txt",aa:["HD","=","node_GEOMETRY_VC2_var_a_vertex_color",";"]}]},{$:"node",ba:"GEOMETRY_VC3",ma:[],la:[{$:"node_param",ba:"node_GEOMETRY_VC3_var_a_vertex_color",fa:["GLSL_IN","vec3"],ea:!1},{$:"node_param",ba:"HE",fa:["GLSL_OUT","vec3"],ea:!1}],ja:[{$:"txt",aa:["HE","=","node_GEOMETRY_VC3_var_a_vertex_color",";"]}]},{$:"nodes_global"},{$:"txt",
aa:["void","J","(",")","{"]},{$:"cond",da:[{$:"if",ga:["USE_NODE_GEOMETRY_OR","USE_NODE_TEX_COORD_GE",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["sj","=","a_orco_tex_coord",";"]}]}}]},{$:"nodes_main"},{$:"txt",aa:["}"]}]}}]}]};f["include/pack.glslf"]={$:"grp",da:[{$:"cond",da:[{$:"ifndef",ba:"PACK_GLSLF",ha:{$:"grp",da:[{$:"define",ba:"PACK_GLSLF",aa:[""]},{$:"txt",aa:"vec4 eu ( const in float iq ) { vec4 fu = vec4 ( _255_0 * _255_0 * _255_0 , _255_0 * _255_0 , _255_0 , _1_0 ) ; vec4 HF = vec4 ( _0_0 , _1_0 / _255_0 , _1_0 / _255_0 , _1_0 / _255_0 ) ; vec4 jF = fract ( iq * fu ) ; jF -= jF . xxyz * HF ; return jF ; } float cV ( const in vec4 HG ) { float et ; vec4 fu = vec4 ( _1_0 / ( _255_0 * _255_0 * _255_0 ) , _1_0 / ( _255_0 * _255_0 ) , _1_0 / _255_0 , _1_0 ) ; et = dot ( HG , fu ) ; return et ; } vec4 eu ( const in vec2 rk ) { vec2 fu = vec2 ( _255_0 , _1_0 ) ; vec2 HF = vec2 ( _0_0 , _1_0 / _255_0 ) ; vec4 jF = fract ( rk . xxyy * fu . xyxy ) ; jF -= jF . xxzz * HF . xyxy ; if ( rk . r == _1_0 ) jF . rg = vec2 ( _0_0 , _1_0 ) ; if ( rk . g == _1_0 ) jF . ba = vec2 ( _0_0 , _1_0 ) ; return jF ; } vec2 jk ( const in vec4 HH ) { vec2 rk ; vec2 fu = vec2 ( _1_0 / _255_0 , _1_0 ) ; rk . r = dot ( HH . rg , fu ) ; rk . g = dot ( HH . ba , fu ) ; return rk ; }".split(" ")}]}}]}]};
f["include/particles.glslv"]={$:"grp",da:[{$:"cond",da:[{$:"ifndef",ba:"PARTICLES_GLSLV",ha:{$:"grp",da:[{$:"define",ba:"PARTICLES_GLSLV",aa:[""]},{$:"var",ba:"EPSILON",aa:["0.000001"]},{$:"var",ba:"COLOR_RAMP_LENGTH",aa:["0"]},{$:"var",ba:"WORLD_SPACE",aa:["0"]},{$:"var",ba:"USE_COLOR_RAMP",aa:["0"]},{$:"include",oa:"math.glslv"},{$:"txt",aa:"struct dc { float di ; vec3 O ; float L ; vec3 aQ ; float bP ; vec3 dp ; vec3 dq ; float dr ; } ;".split(" ")},{$:"cond",da:[{$:"if",ga:["COLOR_RAMP_LENGTH",
0,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"void HL ( inout vec3 aQ , float HI , vec4 kf , vec4 bz ) { float HJ = bz . x - kf . x ; float HK = ( HI - kf . x ) / HJ ; aQ = mix ( aQ , bz . yzw , clamp ( HK , 0.0 , 1.0 ) ) ; }".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["COLOR_RAMP_LENGTH",0,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 HO ( float t , float HM , vec4 HN [ COLOR_RAMP_LENGTH ] ) { float HI = t / HM ; vec3 aQ = HN [ 0 ] . yzw ;".split(" ")},{$:"cond",da:[{$:"if",ga:["COLOR_RAMP_LENGTH",
1,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"HL ( aQ , HI , HN [ 0 ] , HN [ 1 ] ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["COLOR_RAMP_LENGTH",2,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"HL ( aQ , HI , HN [ 1 ] , HN [ 2 ] ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["COLOR_RAMP_LENGTH",3,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"HL ( aQ , HI , HN [ 2 ] , HN [ 3 ] ) ;".split(" ")}]}}]},{$:"txt",aa:["return","aQ",";","}"]}]}}]},{$:"txt",aa:"float HU ( float t , float HM , float HP , float HQ ) { float HR = max ( 0.01 , min ( HM , HP ) ) ; float HS = max ( 0.01 , min ( HM , HQ ) ) ; float HT = HM - HS ; float L = clamp ( t / HR , 0.0 , 1.0 ) - step ( HT , t ) * ( t - HT ) / HS ; return L ; } dc dd ( ) { dc sp ; float t ; float HM = a_p_data [ 0 ] ; float HV = a_p_data [ 1 ] ; if ( u_p_cyclic == 1 ) { t = mod ( u_p_time , u_p_length ) - HV ; if ( t < 0.0 ) t += u_p_length ; } if ( u_p_cyclic != 1 ) { t = u_p_time - HV ; } if ( t < 0.0 || t >= HM ) { sp . di = 0.0001 ; sp . O = vec3 ( 99999.0 , 0.0 , 0.0 ) ; } if ( ! ( t < 0.0 || t >= HM ) ) { vec4 S = R ( a_tbn ) ; vec3 ca = T ( S , vec3 ( 0.0 , 1.0 , 0.0 ) ) ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["WORLD_SPACE"],ha:{$:"grp",da:[{$:"txt",aa:"vec3 fr = a_position ; vec3 rz = ca ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec3 fr = ap ( u_model_tsr , a_position ) ; vec3 rz = bI ( u_model_tsr , ca ) ;".split(" ")}]}}]},{$:"txt",aa:"vec3 HW = u_p_nfactor * rz ; HW += a_p_vels . xyz ; HW . z -= u_p_gravity * t / 2.0 ; float HX = max ( u_p_mass , EPSILON ) ; HW += ( u_p_wind_fac * u_wind / HX ) * t / 2.0 ; sp . dr = t ; sp . dp = HW ; sp . dq = ca * a_p_vels . w ; sp . O = fr + HW * t ; sp . bP = a_p_vels . w * t ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["USE_COLOR_RAMP"],ha:{$:"grp",da:[{$:"txt",aa:"sp . di = GLSL_TEXTURE ( u_color_ramp_tex , vec2 ( t / u_p_max_lifetime , 0.5 ) ) . g ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"sp . di = 1.0 ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["COLOR_RAMP_LENGTH",0,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"sp . aQ = HO ( t , u_p_max_lifetime , u_p_color_ramp ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"sp . aQ = vec3 ( 1.0 ) ;".split(" ")}]}}]},
{$:"txt",aa:"sp . L = HU ( t , a_p_data [ 0 ] , u_p_fade_in , u_p_fade_out ) ; } return sp ; }".split(" ")}]}}]}]};f["include/particles_nodes.glslf"]={$:"grp",da:[{$:"cond",da:[{$:"ifndef",ba:"PARTICLES_NODES_GLSLF",ha:{$:"grp",da:[{$:"define",ba:"PARTICLES_NODES_GLSLF",aa:[""]},{$:"var",ba:"CAUSTICS",aa:["0"]},{$:"var",ba:"DOUBLE_SIDED_LIGHTING",aa:["0"]},{$:"var",ba:"REFLECTION_PASS",aa:["REFL_PASS_NONE"]},{$:"var",ba:"PARTICLE_BATCH",aa:["0"]},{$:"var",ba:"NUM_LIGHTS",aa:["0"]},{$:"var",ba:"CALC_TBN_SPACE",
aa:["0"]},{$:"cond",da:[{$:"if",ga:["USE_NODE_MATERIAL_BEGIN","USE_NODE_BSDF_BEGIN",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"include",oa:"environment.glslf"}]}}]},{$:"include",oa:"color_util.glslf"},{$:"include",oa:"math.glslv"},{$:"cond",da:[{$:"if",ga:["USE_NODE_HUE_SAT","USE_NODE_MIX_RGB_HUE","USE_NODE_MIX_RGB_SATURATION","USE_NODE_MIX_RGB_VALUE","USE_NODE_MIX_RGB_COLOR","USE_NODE_SEPHSV",{$:"logical_or_expr",ia:6}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 kj ( vec3 rgb ) { vec4 hM = vec4 ( _0_0 , - _1_0 / 3.0 , 2.0 / 3.0 , - _1_0 ) ; vec4 p = mix ( vec4 ( rgb . bg , hM . wz ) , vec4 ( rgb . gb , hM . xy ) , step ( rgb . b , rgb . g ) ) ; vec4 q = mix ( vec4 ( p . xyw , rgb . r ) , vec4 ( rgb . r , p . yzx ) , step ( p . x , rgb . r ) ) ; float dC = q . x - min ( q . w , q . y ) ; float iF = 1.0e-10 ; return vec3 ( abs ( q . z + ( q . w - q . y ) / ( 6.0 * dC + iF ) ) , dC / ( q . x + iF ) , q . x ) ; }".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["USE_NODE_HUE_SAT","USE_NODE_MIX_RGB_HUE","USE_NODE_MIX_RGB_SATURATION","USE_NODE_MIX_RGB_VALUE","USE_NODE_MIX_RGB_COLOR","USE_NODE_COMBHSV",{$:"logical_or_expr",ia:6}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 kl ( vec3 kk ) { vec4 hM = vec4 ( _1_0 , 2.0 / 3.0 , _1_0 / 3.0 , 3.0 ) ; vec3 p = abs ( fract ( vec3 ( kk . r , kk . r , kk . r ) + hM . xyz ) * 6.0 - hM . www ) ; return kk . b * mix ( hM . xxx , clamp ( p - hM . xxx , _0_0 , _1_0 ) , kk . g ) ; }".split(" ")}]}}]},{$:"cond",
da:[{$:"if",ga:["USE_NODE_GEOMETRY_UV","USE_NODE_B4W_PARALLAX","USE_NODE_UV_MERGED",{$:"logical_or_expr",ia:3}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 sn ( vec2 gX ) { return vec3 ( gX * 2.0 - vec2 ( _1_0 , _1_0 ) , _0_0 ) ; }".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_TEXTURE_COLOR","USE_NODE_TEXTURE_NORMAL","USE_NODE_B4W_PARALLAX",{$:"logical_or_expr",ia:3}],ha:{$:"grp",da:[{$:"txt",aa:"vec2 so ( vec3 rk ) { return vec2 ( rk . xy * _0_5 + vec2 ( _0_5 , _0_5 ) ) ; }".split(" ")}]}}]},{$:"node",
ba:"CAMERA",ma:[],la:[{$:"node_out",ba:"sU",fa:["vec3"],ea:!0},{$:"node_out",ba:"sV",fa:["float"],ea:!0},{$:"node_out",ba:"sW",fa:["float"],ea:!0}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_sU"],ja:[{$:"txt",aa:"sU = normalize ( sR . xyz ) ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_sV"],ja:[{$:"txt",aa:"sV = abs ( sR . z ) ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_sW"],ja:[{$:"txt",aa:"sW = length ( sR . xyz ) ;".split(" ")}]}]}]},{$:"node",ba:"COMBRGB",
ma:[],la:[{$:"node_in",ba:"sX",fa:["float"],ea:!1},{$:"node_in",ba:"sY",fa:["float"],ea:!1},{$:"node_in",ba:"sZ",fa:["float"],ea:!1},{$:"node_out",ba:"s_",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"s_ = vec3 ( sX , sY , sZ ) ;".split(" ")}]},{$:"node",ba:"COMBHSV",ma:[],la:[{$:"node_in",ba:"ta",fa:["float"],ea:!1},{$:"node_in",ba:"tb",fa:["float"],ea:!1},{$:"node_in",ba:"tc",fa:["float"],ea:!1},{$:"node_out",ba:"td",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"td = kl ( vec3 ( ta , tb , tc ) ) ;".split(" ")}]},
{$:"node",ba:"EMPTY_UV",ma:[],la:[{$:"node_out",ba:"te",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"te = vec3 ( - _1_0 , - _1_0 , _0_0 ) ;".split(" ")}]},{$:"node",ba:"EMPTY_VC",ma:[],la:[{$:"node_out",ba:"tf",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"tf = vec3 ( _0_0 ) ;".split(" ")}]},{$:"node",ba:"GEOMETRY_UV",ma:[],la:[{$:"node_out",ba:"tg",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"tg = sn ( A ) ;".split(" ")}]},{$:"node",ba:"GEOMETRY_OR",ma:[],la:[{$:"node_out",ba:"th",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"th = 2.0 * vec3 ( A , _0_0 ) - vec3 ( _1_0 ) ;".split(" ")}]},
{$:"node",ba:"GEOMETRY_VC",ma:[],la:[{$:"node_out",ba:"ti",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"ti = vec3 ( _1_0 ) ;".split(" ")}]},{$:"node",ba:"GEOMETRY_VC1",ma:[],la:[{$:"node_out",ba:"tj",fa:["float"],ea:!1}],ja:[{$:"txt",aa:["tj","=","_1_0",";"]}]},{$:"node",ba:"GEOMETRY_VC2",ma:[],la:[{$:"node_out",ba:"tk",fa:["float"],ea:!1},{$:"node_out",ba:"tl",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"tk = _1_0 ; tl = _1_0 ;".split(" ")}]},{$:"node",ba:"GEOMETRY_VC3",ma:[],la:[{$:"node_out",ba:"tm",fa:["float"],
ea:!1},{$:"node_out",ba:"tn",fa:["float"],ea:!1},{$:"node_out",ba:"to",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"tm = _1_0 ; tn = _1_0 ; to = _1_0 ;".split(" ")}]},{$:"node",ba:"GEOMETRY_NO",ma:[{$:"node_var",ba:"USE_NORMAL_IN",aa:["0"]}],la:[{$:"node_in",ba:"tr",fa:["vec3"],ea:!1},{$:"node_out",ba:"tu",fa:["vec3"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["USE_NORMAL_IN"],ja:[{$:"txt",aa:["tu","=","tr",";"]}]},{$:"node_else",ja:[{$:"txt",aa:"tu = sK . xyz ;".split(" ")}]}]}]},{$:"node",ba:"GEOMETRY_FB",
ma:[],la:[{$:"node_out",ba:"tv",fa:["float"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["REFLECTION_PASS","REFL_PASS_PLANE",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"tv = ( gl_FrontFacing ) ? _0_0 : _1_0 ;".split(" ")}]},{$:"node_else",ja:[{$:"txt",aa:"tv = ( gl_FrontFacing ) ? _1_0 : _0_0 ;".split(" ")}]}]}]},{$:"node",ba:"GEOMETRY_VW",ma:[],la:[{$:"node_out",ba:"tx",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"tx = - _ ( u_view_tsr_frag , oy ) ;".split(" ")}]},{$:"node",ba:"GEOMETRY_LO",ma:[],la:[{$:"node_out",
ba:"ty",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"ty [ 0 ] = sR [ 0 ] ; ty [ 1 ] = sR [ 1 ] ; ty [ 2 ] = sR [ 2 ] ;".split(" ")}]},{$:"node",ba:"GEOMETRY_GL",ma:[],la:[{$:"node_out",ba:"tz",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"tz = vec3 ( ow . r , ow . g , ow . b ) ;".split(" ")}]},{$:"node",ba:"NEW_GEOMETRY",ma:[],la:[{$:"node_out",ba:"tB",fa:["vec3"],ea:!1},{$:"node_out",ba:"tC",fa:["vec3"],ea:!1},{$:"node_out",ba:"tD",fa:["vec3"],ea:!1},{$:"node_out",ba:"tE",fa:["vec3"],ea:!1},{$:"node_out",ba:"tF",
fa:["vec3"],ea:!1},{$:"node_out",ba:"tG",fa:["vec3"],ea:!1},{$:"node_out",ba:"tH",fa:["float"],ea:!1},{$:"node_out",ba:"tI",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"tB = vec3 ( _0_0 ) ; tC = vec3 ( _0_0 ) ; tD = vec3 ( _0_0 ) ; tE = vec3 ( _0_0 ) ; tF = vec3 ( _0_0 ) ; tG = vec3 ( _0_0 ) ; tH = _0_0 ; tI = _0_0 ;".split(" ")}]},{$:"node",ba:"HUE_SAT",ma:[],la:[{$:"node_in",ba:"tJ",fa:["float"],ea:!1},{$:"node_in",ba:"tK",fa:["float"],ea:!1},{$:"node_in",ba:"tL",fa:["float"],ea:!1},{$:"node_in",ba:"tM",
fa:["float"],ea:!1},{$:"node_in",ba:"tN",fa:["vec3"],ea:!1},{$:"node_out",ba:"tO",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"vec3 kk = kj ( tN ) ; kk [ 0 ] += ( tJ - _0_5 ) ; if ( kk [ 0 ] > _1_0 ) kk [ 0 ] -= _1_0 ; else if ( kk [ 0 ] < _0_0 ) kk [ 0 ] += _1_0 ; kk *= vec3 ( _1_0 , tK , tL ) ; kk = mix ( vec3 ( _1_0 ) , mix ( vec3 ( _0_0 ) , kk , step ( vec3 ( _0_0 ) , kk ) ) , step ( kk , vec3 ( _1_0 ) ) ) ; tO = mix ( tN , kl ( kk ) , tM ) ;".split(" ")}]},{$:"node",ba:"INVERT",ma:[],la:[{$:"node_in",
ba:"tP",fa:["float"],ea:!1},{$:"node_in",ba:"tQ",fa:["vec3"],ea:!1},{$:"node_out",ba:"tR",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"tR = mix ( tQ , vec3 ( _1_0 ) - tQ , tP ) ;".split(" ")}]},{$:"node",ba:"LAMP",ma:[{$:"node_var",ba:"LAMP_TYPE",aa:["HEMI"]},{$:"node_var",ba:"LAMP_INDEX",aa:["0"]},{$:"node_var",ba:"LAMP_USE_SPHERE",aa:["0"]},{$:"node_var",ba:"LAMP_SPOT_SIZE",aa:["0.8"]},{$:"node_var",ba:"LAMP_SPOT_BLEND",aa:["0.03"]},{$:"node_var",ba:"LAMP_LIGHT_DIST",aa:["30.0"]}],la:[{$:"node_out",ba:"tS",
fa:["vec3"],ea:!0},{$:"node_out",ba:"tT",fa:["vec3"],ea:!1},{$:"node_out",ba:"tU",fa:["float"],ea:!1},{$:"node_out",ba:"tV",fa:["float"],ea:!0}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_tS"],ja:[{$:"txt",aa:"tS = u_lamp_light_color_intensities [ LAMP_INDEX ] ;".split(" ")}]}]},{$:"txt",aa:"vec3 tW = u_lamp_light_directions [ LAMP_INDEX ] ; vec3 tX = u_lamp_light_positions [ LAMP_INDEX ] ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["LAMP_TYPE","SPOT",{$:"equal_expr",ia:2},"LAMP_TYPE",
"POINT",{$:"equal_expr",ia:2},{$:"logical_or_expr",ia:2}],ja:[{$:"txt",aa:"tT = - h + tX ; tU = length ( tT ) ; tT = normalize ( tT ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_tV"],ja:[{$:"txt",aa:"tV = LAMP_LIGHT_DIST / ( LAMP_LIGHT_DIST + tU * tU ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["LAMP_TYPE","SPOT",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"float pb = dot ( tT , tW ) ; pb *= smoothstep ( _0_0 , _1_0 , ( pb - LAMP_SPOT_SIZE ) / LAMP_SPOT_BLEND ) ; tV *= pb ;".split(" ")}]}]},
{$:"node_cond",da:[{$:"node_if",ga:["LAMP_USE_SPHERE"],ja:[{$:"txt",aa:"tV *= max ( LAMP_LIGHT_DIST - tU , _0_0 ) / LAMP_LIGHT_DIST ;".split(" ")}]}]}]}]}]},{$:"node_else",ja:[{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_tT"],ja:[{$:"txt",aa:["tT","=","tW",";"]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_tU"],ja:[{$:"txt",aa:"tU = length ( tX - h ) ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_tV"],ja:[{$:"txt",aa:["tV","=","_1_0",";"]}]}]}]}]}]},{$:"node",ba:"NORMAL",ma:[],
la:[{$:"node_in",ba:"tY",fa:["vec3"],ea:!1},{$:"node_out",ba:"tZ",fa:["vec3"],ea:!0},{$:"node_out",ba:"t_",fa:["float"],ea:!0},{$:"node_param",ba:"sB",fa:["vec3"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_tZ"],ja:[{$:"txt",aa:["tZ","=","sB",";"]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_t_"],ja:[{$:"txt",aa:"t_ = - dot ( tY , sB ) ;".split(" ")}]}]}]},{$:"node",ba:"B4W_VECTOR_VIEW",ma:[],la:[{$:"node_in",ba:"ua",fa:["vec3"],ea:!1},{$:"node_out",ba:"ub",fa:["vec3"],ea:!1}],ja:[{$:"txt",
aa:"ub = - _ ( u_view_tsr_frag , ua ) ;".split(" ")}]},{$:"node",ba:"BSDF_BEGIN",ma:[],la:[{$:"node_in",ba:"uc",fa:["vec3"],ea:!1},{$:"node_in",ba:"ud",fa:["vec3"],ea:!1},{$:"node_in",ba:"ue",fa:["float"],ea:!1},{$:"node_in",ba:"uf",fa:["vec3"],ea:!1},{$:"node_in",ba:"ug",fa:["float"],ea:!1},{$:"node_in",ba:"uh",fa:["float"],ea:!1},{$:"node_in",ba:"ui",fa:["vec3"],ea:!1},{$:"node_in",ba:"ul",fa:["vec3"],ea:!1},{$:"node_in",ba:"um",fa:["float"],ea:!1},{$:"node_in",ba:"un",fa:["vec3"],ea:!1},{$:"node_in",
ba:"uo",fa:["float"],ea:!1},{$:"node_out",ba:"up",fa:["vec3"],ea:!1},{$:"node_out",ba:"uq",fa:["vec3"],ea:!1},{$:"node_out",ba:"ur",fa:["vec3"],ea:!1},{$:"node_out",ba:"us",fa:["vec3"],ea:!1},{$:"node_out",ba:"ut",fa:["vec3"],ea:!1},{$:"node_out",ba:"uu",fa:["vec4"],ea:!1},{$:"node_out",ba:"uw",fa:["vec4"],ea:!1},{$:"node_out",ba:"ux",fa:["vec3"],ea:!1},{$:"node_out",ba:"uy",fa:["vec3"],ea:!1},{$:"node_out",ba:"uz",fa:["vec3"],ea:!1},{$:"node_out",ba:"uA",fa:["float"],ea:!1},{$:"node_out",ba:"uB",
fa:["vec3"],ea:!1},{$:"node_out",ba:"uC",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"ur = ud ; us = uf ; ut = ui ; ux = ud ; uy = uf ; metalness_out = uh ; uz = ul ; uA = um ; uB = un ; uC = uo ; up = sS * ur ; uq = sT * u_environment_energy * cE ( ut ) ; uw = cH ( ur ) ; H = uw ; uu [ 0 ] = ue ; uu [ 1 ] = ug ; uu [ 2 ] = uh ;".split(" ")}]},{$:"node",ba:"BSDF_END",ma:[],la:[{$:"node_in",ba:"uD",fa:["vec4"],ea:!1},{$:"node_in",ba:"uE",fa:["vec3"],ea:!1},{$:"node_in",ba:"uF",fa:["vec3"],ea:!1},{$:"node_in",
ba:"uG",fa:["vec4"],ea:!1},{$:"node_in",ba:"uI",fa:["vec3"],ea:!1},{$:"node_in",ba:"uJ",fa:["vec3"],ea:!1},{$:"node_in",ba:"uK",fa:["vec3"],ea:!1},{$:"node_in",ba:"uL",fa:["float"],ea:!1},{$:"node_in",ba:"uM",fa:["vec3"],ea:!1},{$:"node_in",ba:"uL",fa:["float"],ea:!1},{$:"node_in",ba:"uN",fa:["float"],ea:!1},{$:"node_out",ba:"uO",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"uO = uD . rgb + uE ; uO = mix ( uO , uK , uL ) ; I = _1_0 ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_NODE_BSDF_TRANSPARENT"],
ja:[{$:"txt",aa:"vec3 uR = GLSL_TEXTURE ( u_refractmap , l . xy / l . z ) . rgb ; bG ( uR ) ; uM = uM * uR ; uO += uM ;".split(" ")}]}]},{$:"txt",aa:["uF",";"]}]},{$:"node",ba:"BSDF_COMPUTE",ma:[{$:"node_var",ba:"MAT_USE_TBN_SHADING",aa:["0"]}],la:[{$:"node_in",ba:"uY",fa:["vec3"],ea:!1},{$:"node_in",ba:"uZ",fa:["vec2"],ea:!1},{$:"node_in",ba:"u_",fa:["vec3"],ea:!1},{$:"node_in",ba:"va",fa:["float"],ea:!1},{$:"node_in",ba:"vb",fa:["vec4"],ea:!1},{$:"node_out",ba:"vc",fa:["float"],ea:!1},{$:"node_out",
ba:"vd",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"vec3 rz = u_ ; float uU = clamp ( vb [ 0 ] , _0_0 , _1_0 ) ; float uQ = clamp ( vb [ 1 ] , _0_0 , _1_0 ) ; float rW = vb [ 2 ] ; vec3 p_ = normalize ( oy + uY ) ; float pj = ( _1_0 - va ) * dot ( rz , uY ) + va ; float vf = ( _1_0 - va ) * max ( dot ( uY , p_ ) , _0_0 ) + va ; float vg = ( _1_0 - va ) * max ( dot ( u_ , p_ ) , _0_0 ) + va ; vc = _0_0 ; if ( uZ . r != _0_0 ) { if ( uU > _0_0 ) { float pz = max ( dot ( rz , oy ) , _0_0 ) ; float pA = uU * uU ; float cG = _1_0 - _0_5 * ( pA / ( pA + 0.33 ) ) ; vec3 pB = uY - pj * rz ; vec3 pC = oy - pz * rz ; if ( length ( pB ) == _0_0 || length ( pC ) == _0_0 || abs ( pj ) > _1_0 || abs ( pz ) > _1_0 ) vc = pj * cG ; else { float pD = acos ( pj ) ; float pE = acos ( pz ) ; vec3 pF = normalize ( pB ) ; vec3 pG = normalize ( pC ) ; float a , b ; a = max ( pD , pE ) ; b = min ( pD , pE ) ; b *= 0.95 ; float t = max ( dot ( pF , pG ) , _0_0 ) ; float hS = 0.45 * ( pA / ( pA + 0.09 ) ) ; vc = pj * ( cG + ( hS * t * sin ( a ) * tan ( b ) ) ) ; } } else vc = pj ; vc = max ( vc , _0_0 ) ; } float L = uQ ; float vh = L * L ; float d_ = ( vg * vh - vg ) * vg + _1_0 ; float cD = vh / ( M_PI * d_ * d_ ) ; float vi ; float vj ; float vl = pow ( _1_0 - vf , 5.0 ) ; vi = _1_0 ; vj = vl ; float hM = L / 2.0 ; float vm = hM * hM ; float vn = _1_0 - vm ; float vo = _1_0 / ( vf * vf * vn + vm ) ; vi *= vo ; vj *= vo ; float rR = mix ( 0.04 , _1_0 , rW ) ; float vp = mix ( vj , vi , rR ) ; vd = max ( pj * cD * vp , _0_0 ) ;".split(" ")}]},
{$:"node",ba:"BSDF_ANISOTROPIC",ma:[],la:[{$:"node_in",ba:"vJ",fa:["vec3"],ea:!1},{$:"node_in",ba:"vK",fa:["float"],ea:!1},{$:"node_in",ba:"vL",fa:["float"],ea:!1},{$:"node_in",ba:"vM",fa:["float"],ea:!1},{$:"node_in",ba:"vN",fa:["vec3"],ea:!1},{$:"node_in",ba:"vO",fa:["vec3"],ea:!1},{$:"node_out",ba:"vP",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"vP = vJ ; vK ; vL ; vM ; vN ; vO ;".split(" ")}]},{$:"node",ba:"BSDF_DIFFUSE",ma:[{$:"node_var",ba:"USE_NORMAL_IN",aa:["0"]}],la:[{$:"node_in",ba:"vQ",fa:["vec3"],
ea:!1},{$:"node_in",ba:"vR",fa:["float"],ea:!1},{$:"node_in",ba:"vS",fa:["vec3"],ea:!1},{$:"node_out",ba:"vT",fa:["vec3"],ea:!1},{$:"node_out",ba:"vU",fa:["vec3"],ea:!1},{$:"node_out",ba:"vV",fa:["float"],ea:!1},{$:"node_out",ba:"vW",fa:["vec3"],ea:!1},{$:"node_out",ba:"vX",fa:["float"],ea:!1},{$:"node_out",ba:"vY",fa:["float"],ea:!1},{$:"node_out",ba:"vZ",fa:["vec3"],ea:!1},{$:"node_out",ba:"wb",fa:["vec3"],ea:!1},{$:"node_out",ba:"wc",fa:["float"],ea:!1},{$:"node_out",ba:"wd",fa:["vec3"],ea:!1},
{$:"node_out",ba:"we",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"vU = vQ ; vV = vR ; vY = _0_0 ; wc = _0_0 ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_NORMAL_IN"],ja:[{$:"txt",aa:["vZ","=","vS",";"]}]},{$:"node_else",ja:[{$:"txt",aa:["vZ","=","ox",";"]}]}]},{$:"txt",aa:"vT ; vW ; vX ; wb ; wd ; we ;".split(" ")}]},{$:"node",ba:"BSDF_GLASS",ma:[],la:[{$:"node_in",ba:"wf",fa:["vec3"],ea:!1},{$:"node_in",ba:"wg",fa:["float"],ea:!1},{$:"node_in",ba:"wh",fa:["float"],ea:!1},{$:"node_in",ba:"wi",
fa:["vec3"],ea:!1},{$:"node_out",ba:"wj",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"wj = wf ; wg ; wh ; wi ;".split(" ")}]},{$:"node",ba:"BSDF_GLOSSY",ma:[{$:"node_var",ba:"USE_NORMAL_IN",aa:["0"]}],la:[{$:"node_in",ba:"wk",fa:["vec3"],ea:!1},{$:"node_in",ba:"wl",fa:["float"],ea:!1},{$:"node_in",ba:"wm",fa:["vec3"],ea:!1},{$:"node_out",ba:"wn",fa:["vec3"],ea:!1},{$:"node_out",ba:"wo",fa:["vec3"],ea:!1},{$:"node_out",ba:"wp",fa:["float"],ea:!1},{$:"node_out",ba:"wq",fa:["vec3"],ea:!1},{$:"node_out",ba:"wr",
fa:["float"],ea:!1},{$:"node_out",ba:"ws",fa:["float"],ea:!1},{$:"node_out",ba:"wt",fa:["vec3"],ea:!1},{$:"node_out",ba:"wA",fa:["vec3"],ea:!1},{$:"node_out",ba:"wB",fa:["float"],ea:!1},{$:"node_out",ba:"wC",fa:["vec3"],ea:!1},{$:"node_out",ba:"wD",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"wq = wk ; wr = wl ; ws = _1_0 ; wB = _0_0 ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_NORMAL_IN"],ja:[{$:"txt",aa:["wt","=","wm",";"]}]},{$:"node_else",ja:[{$:"txt",aa:["wt","=","ox",";"]}]}]},{$:"txt",
aa:"wn ; wo ; wp ; wA ; wC ; wD ;".split(" ")}]},{$:"node",ba:"BSDF_HAIR",ma:[],la:[{$:"node_in",ba:"wE",fa:["vec3"],ea:!1},{$:"node_in",ba:"wF",fa:["float"],ea:!1},{$:"node_in",ba:"wG",fa:["float"],ea:!1},{$:"node_in",ba:"wH",fa:["float"],ea:!1},{$:"node_out",ba:"wI",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"wI = wE ; wF ; wG ; wH ;".split(" ")}]},{$:"node",ba:"BSDF_TRANSPARENT",ma:[],la:[{$:"node_in",ba:"wJ",fa:["vec3"],ea:!1},{$:"node_out",ba:"wK",fa:["vec3"],ea:!1},{$:"node_out",ba:"wL",fa:["vec3"],
ea:!1},{$:"node_out",ba:"wM",fa:["float"],ea:!1},{$:"node_out",ba:"wN",fa:["vec3"],ea:!1},{$:"node_out",ba:"wO",fa:["float"],ea:!1},{$:"node_out",ba:"wP",fa:["float"],ea:!1},{$:"node_out",ba:"wQ",fa:["vec3"],ea:!1},{$:"node_out",ba:"wT",fa:["vec3"],ea:!1},{$:"node_out",ba:"wU",fa:["float"],ea:!1},{$:"node_out",ba:"wV",fa:["vec3"],ea:!1},{$:"node_out",ba:"wW",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"wV = wJ ; wP = _0_0 ; wU = _0_0 ; wW = _0_0 ; wQ = ox ; wK ; wL ; wM ; wN ; wO ; wT ;".split(" ")}]},{$:"node",
ba:"BSDF_TRANSLUCENT",ma:[],la:[{$:"node_in",ba:"wX",fa:["vec3"],ea:!1},{$:"node_in",ba:"wY",fa:["vec3"],ea:!1},{$:"node_out",ba:"wZ",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"wZ = wX ; wY ;".split(" ")}]},{$:"node",ba:"BSDF_REFRACTION",ma:[],la:[{$:"node_in",ba:"w_",fa:["vec3"],ea:!1},{$:"node_in",ba:"xa",fa:["float"],ea:!1},{$:"node_in",ba:"xb",fa:["float"],ea:!1},{$:"node_in",ba:"xc",fa:["vec3"],ea:!1},{$:"node_out",ba:"xd",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"xd [ 0 ] = xd [ 1 ] = xd [ 2 ] = _0_0 ; w_ ; xa ; xb ; xc ;".split(" ")}]},
{$:"node",ba:"BSDF_TOON",ma:[],la:[{$:"node_in",ba:"xe",fa:["vec3"],ea:!1},{$:"node_in",ba:"xf",fa:["float"],ea:!1},{$:"node_in",ba:"xg",fa:["float"],ea:!1},{$:"node_in",ba:"xh",fa:["vec3"],ea:!1},{$:"node_out",ba:"xi",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"xi = xe ; xf ; xg ; xh ;".split(" ")}]},{$:"node",ba:"BSDF_VELVET",ma:[],la:[{$:"node_in",ba:"xj",fa:["vec3"],ea:!1},{$:"node_in",ba:"xk",fa:["float"],ea:!1},{$:"node_in",ba:"xl",fa:["vec3"],ea:!1},{$:"node_out",ba:"xm",fa:["vec3"],ea:!1}],ja:[{$:"txt",
aa:"xm = xj ; xk ; xl ;".split(" ")}]},{$:"node",ba:"SUBSURFACE_SCATTERING",ma:[],la:[{$:"node_in",ba:"xn",fa:["vec3"],ea:!1},{$:"node_in",ba:"xo",fa:["float"],ea:!1},{$:"node_in",ba:"xp",fa:["vec3"],ea:!1},{$:"node_in",ba:"xq",fa:["float"],ea:!1},{$:"node_in",ba:"xr",fa:["float"],ea:!1},{$:"node_in",ba:"xs",fa:["vec3"],ea:!1},{$:"node_out",ba:"xt",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"xt [ 0 ] = xt [ 1 ] = xt [ 2 ] = _0_0 ; xn ; xp ; xq ; xr ; xs ; xo ;".split(" ")}]},{$:"node",ba:"EMISSION",ma:[],
la:[{$:"node_in",ba:"xu",fa:["vec3"],ea:!1},{$:"node_in",ba:"xv",fa:["float"],ea:!1},{$:"node_out",ba:"xA",fa:["vec3"],ea:!1},{$:"node_out",ba:"xB",fa:["vec3"],ea:!1},{$:"node_out",ba:"xC",fa:["float"],ea:!1},{$:"node_out",ba:"xD",fa:["vec3"],ea:!1},{$:"node_out",ba:"xE",fa:["float"],ea:!1},{$:"node_out",ba:"xF",fa:["float"],ea:!1},{$:"node_out",ba:"xG",fa:["vec3"],ea:!1},{$:"node_out",ba:"xJ",fa:["vec3"],ea:!1},{$:"node_out",ba:"xK",fa:["float"],ea:!1},{$:"node_out",ba:"xL",fa:["vec3"],ea:!1},{$:"node_out",
ba:"xM",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"xJ = xv * xu ; xF = _0_0 ; xK = _1_0 ; xG = ox ; xA ; xB ; xC ; xD ; xE ; xL ; xM ;".split(" ")}]},{$:"node",ba:"AMBIENT_OCCLUSION",ma:[],la:[{$:"node_in",ba:"xN",fa:["vec3"],ea:!1},{$:"node_out",ba:"xO",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"xO [ 0 ] = xO [ 1 ] = xO [ 2 ] = _0_0 ; xN ;".split(" ")}]},{$:"node",ba:"HOLDOUT",ma:[],la:[{$:"node_out",ba:"xP",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"xP [ 0 ] = xP [ 1 ] = xP [ 2 ] = _0_0 ;".split(" ")}]},{$:"node",
ba:"VOLUME_ABSORPTION",ma:[],la:[{$:"node_in",ba:"xQ",fa:["vec3"],ea:!1},{$:"node_in",ba:"xR",fa:["float"],ea:!1},{$:"node_out",ba:"xS",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"xS [ 0 ] = xS [ 1 ] = xS [ 2 ] = _0_0 ; xQ ; xR ;".split(" ")}]},{$:"node",ba:"VOLUME_SCATTER",ma:[],la:[{$:"node_in",ba:"xT",fa:["vec3"],ea:!1},{$:"node_in",ba:"xU",fa:["float"],ea:!1},{$:"node_in",ba:"xV",fa:["float"],ea:!1},{$:"node_out",ba:"xW",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"xW [ 0 ] = xW [ 1 ] = xW [ 2 ] = _0_0 ; xT ; xU ; xV ;".split(" ")}]},
{$:"node",ba:"BUMP",ma:[],la:[{$:"node_in",ba:"Ib",fa:["float"],ea:!1},{$:"node_in",ba:"Ic",fa:["float"],ea:!1},{$:"node_in",ba:"xZ",fa:["float"],ea:!1},{$:"node_in",ba:"Id",fa:["vec3"],ea:!1},{$:"node_out",ba:"ya",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"ya = Id ; Ib ; Ic ; xZ ;".split(" ")}]},{$:"node",ba:"DISPLACEMENT_BUMP",ma:[],la:[{$:"node_in",ba:"yh",fa:["float"],ea:!1},{$:"node_out",ba:"yi",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"yi = ox ; yh ;".split(" ")}]},{$:"node",ba:"NORMAL_MAP",ma:[{$:"node_var",
ba:"SPACE",aa:["NM_TANGENT"]},{$:"node_var",ba:"USE_NORMAL_IN",aa:["0"]}],la:[{$:"node_in",ba:"yj",fa:["float"],ea:!1},{$:"node_in",ba:"yk",fa:["vec4"],ea:!1},{$:"node_in",ba:"yl",fa:["vec3"],ea:!1},{$:"node_out",ba:"ym",fa:["vec3"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["USE_NORMAL_IN"],ja:[{$:"txt",aa:["vec3","yn","=","yl",";"]}]},{$:"node_else",ja:[{$:"txt",aa:["vec3","yn","=","sM",";"]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["SPACE","NM_TANGENT",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"ym = 2.0 * yk . xyz - _1_0 ; ym = sQ * ym ;".split(" ")}]},
{$:"node_elif",ga:["SPACE","NM_OBJECT",{$:"equal_expr",ia:2},"SPACE","NM_BLENDER_OBJECT",{$:"equal_expr",ia:2},{$:"logical_or_expr",ia:2}],ja:[{$:"txt",aa:"ym = 2.0 * yk . xyz - _1_0 ; ym . yz *= - _1_0 ; ym = bI ( u_model_tsr , ym ) ;".split(" ")}]},{$:"node_elif",ga:["SPACE","NM_WORLD",{$:"equal_expr",ia:2},"SPACE","NM_BLENDER_WORLD",{$:"equal_expr",ia:2},{$:"logical_or_expr",ia:2}],ja:[{$:"txt",aa:"ym = 2.0 * yk . xyz - _1_0 ; ym . yz *= - _1_0 ;".split(" ")}]}]},{$:"txt",aa:"float me = max ( yj , _0_0 ) ; ym = normalize ( mix ( yn , ym , me ) ) ;".split(" ")}]},
{$:"node",ba:"VECT_TRANSFORM",ma:[{$:"node_var",ba:"CONVERT_TYPE",aa:["VT_WORLD_TO_OBJECT"]},{$:"node_var",ba:"VECTOR_TYPE",aa:["VT_VECTOR"]}],la:[{$:"node_in",ba:"yo",fa:["vec3"],ea:!1},{$:"node_out",ba:"yp",fa:["vec3"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["CONVERT_TYPE","VT_WORLD_TO_WORLD",{$:"equal_expr",ia:2},"CONVERT_TYPE","VT_OBJECT_TO_OBJECT",{$:"equal_expr",ia:2},"CONVERT_TYPE","VT_CAMERA_TO_CAMERA",{$:"equal_expr",ia:2},{$:"logical_or_expr",ia:3}],ja:[{$:"txt",aa:["yp","=","yo",
";"]}]},{$:"node_else",ja:[{$:"node_cond",da:[{$:"node_if",ga:["VECTOR_TYPE","VT_POINT",{$:"equal_expr",ia:2}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["CONVERT_TYPE","VT_WORLD_TO_CAMERA",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"yp = ap ( u_view_tsr_frag , yo ) ;".split(" ")}]},{$:"node_elif",ga:["CONVERT_TYPE","VT_WORLD_TO_OBJECT",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"yp = ap ( u_model_tsr_inverse , yo ) ;".split(" ")}]},{$:"node_elif",ga:["CONVERT_TYPE","VT_OBJECT_TO_WORLD",{$:"equal_expr",ia:2}],
ja:[{$:"txt",aa:"yp = ap ( u_model_tsr , yo ) ;".split(" ")}]},{$:"node_elif",ga:["CONVERT_TYPE","VT_OBJECT_TO_CAMERA",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"yp = ap ( u_model_tsr , yo ) ; yp = ap ( u_view_tsr_frag , yp ) ;".split(" ")}]},{$:"node_elif",ga:["CONVERT_TYPE","VT_CAMERA_TO_WORLD",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"yp = ap ( u_view_tsr_inverse , yo ) ;".split(" ")}]},{$:"node_elif",ga:["CONVERT_TYPE","VT_CAMERA_TO_OBJECT",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"yp = ap ( u_view_tsr_inverse , yo ) ; yp = ap ( u_model_tsr_inverse , yp ) ;".split(" ")}]}]}]},
{$:"node_else",ja:[{$:"node_cond",da:[{$:"node_if",ga:["CONVERT_TYPE","VT_WORLD_TO_CAMERA",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"yp = _ ( u_view_tsr_frag , yo ) ;".split(" ")}]},{$:"node_elif",ga:["CONVERT_TYPE","VT_WORLD_TO_OBJECT",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"yp = _ ( u_model_tsr_inverse , yo ) ;".split(" ")}]},{$:"node_elif",ga:["CONVERT_TYPE","VT_OBJECT_TO_WORLD",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"yp = _ ( u_model_tsr , yo ) ;".split(" ")}]},{$:"node_elif",ga:["CONVERT_TYPE",
"VT_OBJECT_TO_CAMERA",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"yp = _ ( u_model_tsr , yo ) ; yp = _ ( u_view_tsr_frag , yp ) ;".split(" ")}]},{$:"node_elif",ga:["CONVERT_TYPE","VT_CAMERA_TO_WORLD",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"yp = _ ( u_view_tsr_inverse , yo ) ;".split(" ")}]},{$:"node_elif",ga:["CONVERT_TYPE","VT_CAMERA_TO_OBJECT",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"yp = _ ( u_view_tsr_inverse , yo ) ; yp = _ ( u_model_tsr_inverse , yp ) ;".split(" ")}]}]}]}]},{$:"node_cond",da:[{$:"node_if",
ga:["VECTOR_TYPE","VT_NORMAL",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"yp = normalize ( yp ) ;".split(" ")}]}]}]}]}]},{$:"node",ba:"BLACKBODY",ma:[],la:[{$:"node_in",ba:"yq",fa:["float"],ea:!1},{$:"node_out",ba:"yr",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"yr [ 0 ] = yr [ 1 ] = yr [ 2 ] = _0_0 ; yq ;".split(" ")}]},{$:"node",ba:"WAVELENGTH",ma:[],la:[{$:"node_in",ba:"ys",fa:["float"],ea:!1},{$:"node_out",ba:"yt",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"yt [ 0 ] = yt [ 1 ] = yt [ 2 ] = _0_0 ; ys ;".split(" ")}]},
{$:"node",ba:"SEPXYZ",ma:[],la:[{$:"node_in",ba:"yu",fa:["vec3"],ea:!1},{$:"node_out",ba:"yv",fa:["float"],ea:!1},{$:"node_out",ba:"yA",fa:["float"],ea:!1},{$:"node_out",ba:"yB",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"yv = yu [ 0 ] ; yA = yu [ 1 ] ; yB = yu [ 2 ] ;".split(" ")}]},{$:"node",ba:"COMBXYZ",ma:[],la:[{$:"node_in",ba:"yC",fa:["float"],ea:!1},{$:"node_in",ba:"yD",fa:["float"],ea:!1},{$:"node_in",ba:"yE",fa:["float"],ea:!1},{$:"node_out",ba:"yF",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"yF [ 0 ] = yC ; yF [ 1 ] = yD ; yF [ 2 ] = yE ;".split(" ")}]},
{$:"node",ba:"BRIGHTCONTRAST",ma:[],la:[{$:"node_in",ba:"yG",fa:["vec3"],ea:!1},{$:"node_in",ba:"yH",fa:["float"],ea:!1},{$:"node_in",ba:"yI",fa:["float"],ea:!1},{$:"node_out",ba:"yJ",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float b = yH - yI * _0_5 ; yJ = max ( ( _1_0 + yI ) * yG + b , vec3 ( _0_0 ) ) ;".split(" ")}]},{$:"node",ba:"LIGHT_FALLOFF",ma:[],la:[{$:"node_in",ba:"yK",fa:["float"],ea:!1},{$:"node_in",ba:"yL",fa:["float"],ea:!1},{$:"node_out",ba:"yM",fa:["float"],ea:!1},{$:"node_out",ba:"yN",
fa:["float"],ea:!1},{$:"node_out",ba:"yO",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"yM = yN = yO = _0_0 ; yK ; yL ;".split(" ")}]},{$:"node",ba:"TEX_IMAGE",ma:[],la:[{$:"node_in",ba:"Ie",fa:["vec3"],ea:!1},{$:"node_out",ba:"If",fa:["vec3"],ea:!1},{$:"node_out",ba:"Ig",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"If [ 0 ] = If [ 1 ] = If [ 2 ] = _0_0 ; Ig = _1_0 ; Ie ;".split(" ")}]},{$:"node",ba:"TEX_ENVIRONMENT",ma:[],la:[{$:"node_in",ba:"Ih",fa:["vec3"],ea:!1},{$:"node_out",ba:"Ii",fa:["vec3"],ea:!1}],ja:[{$:"txt",
aa:"Ii [ 0 ] = Ii [ 1 ] = Ii [ 2 ] = _0_0 ; Ih ;".split(" ")}]},{$:"node",ba:"TEX_SKY",ma:[],la:[{$:"node_in",ba:"yP",fa:["vec3"],ea:!1},{$:"node_out",ba:"yQ",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"yQ [ 0 ] = yQ [ 1 ] = yQ [ 2 ] = _0_0 ; yP ;".split(" ")}]},{$:"node",ba:"TEX_NOISE",ma:[],la:[{$:"node_in",ba:"yR",fa:["vec3"],ea:!1},{$:"node_in",ba:"yS",fa:["float"],ea:!1},{$:"node_in",ba:"yT",fa:["float"],ea:!1},{$:"node_in",ba:"yU",fa:["float"],ea:!1},{$:"node_out",ba:"yV",fa:["vec3"],ea:!1},{$:"node_out",
ba:"yW",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"yV [ 0 ] = yV [ 1 ] = yV [ 2 ] = _0_0 ; yW = _1_0 ; yR ; yS ; yT ; yU ;".split(" ")}]},{$:"node",ba:"TEX_WAVE",ma:[],la:[{$:"node_in",ba:"yX",fa:["vec3"],ea:!1},{$:"node_in",ba:"yY",fa:["float"],ea:!1},{$:"node_in",ba:"yZ",fa:["float"],ea:!1},{$:"node_in",ba:"y_",fa:["float"],ea:!1},{$:"node_in",ba:"za",fa:["float"],ea:!1},{$:"node_out",ba:"zb",fa:["vec3"],ea:!1},{$:"node_out",ba:"zc",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"zb [ 0 ] = zb [ 1 ] = zb [ 2 ] = _0_0 ; zc = _1_0 ; yX ; yY ; yZ ; y_ ; za ;".split(" ")}]},
{$:"node",ba:"TEX_VORONOI",ma:[],la:[{$:"node_in",ba:"zd",fa:["vec3"],ea:!1},{$:"node_in",ba:"ze",fa:["float"],ea:!1},{$:"node_out",ba:"zf",fa:["vec3"],ea:!1},{$:"node_out",ba:"zg",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"zf [ 0 ] = zf [ 1 ] = zf [ 2 ] = _0_0 ; zg = _1_0 ; zd ; ze ;".split(" ")}]},{$:"node",ba:"TEX_MUSGRAVE",ma:[],la:[{$:"node_in",ba:"zh",fa:["vec3"],ea:!1},{$:"node_in",ba:"zi",fa:["float"],ea:!1},{$:"node_in",ba:"zj",fa:["float"],ea:!1},{$:"node_in",ba:"zk",fa:["float"],ea:!1},{$:"node_in",
ba:"zl",fa:["float"],ea:!1},{$:"node_in",ba:"zm",fa:["float"],ea:!1},{$:"node_in",ba:"zn",fa:["float"],ea:!1},{$:"node_out",ba:"zo",fa:["vec3"],ea:!1},{$:"node_out",ba:"zp",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"zo [ 0 ] = zo [ 1 ] = zo [ 2 ] = _0_0 ; zp = _1_0 ; zh ; zi ; zj ; zk ; zl ; zm ; zn ;".split(" ")}]},{$:"node",ba:"TEX_GRADIENT",ma:[],la:[{$:"node_in",ba:"zq",fa:["vec3"],ea:!1},{$:"node_out",ba:"zr",fa:["vec3"],ea:!1},{$:"node_out",ba:"zs",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"zr [ 0 ] = zr [ 1 ] = zr [ 2 ] = _0_0 ; zs = _1_0 ; zq ;".split(" ")}]},
{$:"node",ba:"TEX_MAGIC",ma:[],la:[{$:"node_in",ba:"zt",fa:["vec3"],ea:!1},{$:"node_in",ba:"zu",fa:["float"],ea:!1},{$:"node_in",ba:"zv",fa:["float"],ea:!1},{$:"node_out",ba:"zA",fa:["vec3"],ea:!1},{$:"node_out",ba:"zB",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"zA [ 0 ] = zA [ 1 ] = zA [ 2 ] = _0_0 ; zB = _1_0 ; zt ; zu ; zv ;".split(" ")}]},{$:"node",ba:"TEX_CHECKER",ma:[],la:[{$:"node_in",ba:"zC",fa:["vec3"],ea:!1},{$:"node_in",ba:"zD",fa:["vec3"],ea:!1},{$:"node_in",ba:"zE",fa:["vec3"],ea:!1},{$:"node_in",
ba:"zF",fa:["float"],ea:!1},{$:"node_out",ba:"zG",fa:["vec3"],ea:!1},{$:"node_out",ba:"zH",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"zG [ 0 ] = zG [ 1 ] = zG [ 2 ] = _0_0 ; zH = _1_0 ; zC ; zD ; zE ; zF ;".split(" ")}]},{$:"node",ba:"TEX_BRICK",ma:[],la:[{$:"node_in",ba:"zI",fa:["vec3"],ea:!1},{$:"node_in",ba:"zJ",fa:["vec3"],ea:!1},{$:"node_in",ba:"zK",fa:["vec3"],ea:!1},{$:"node_in",ba:"zL",fa:["vec3"],ea:!1},{$:"node_in",ba:"zM",fa:["float"],ea:!1},{$:"node_in",ba:"zN",fa:["float"],ea:!1},{$:"node_in",
ba:"zO",fa:["float"],ea:!1},{$:"node_in",ba:"zP",fa:["float"],ea:!1},{$:"node_in",ba:"zQ",fa:["float"],ea:!1},{$:"node_out",ba:"zR",fa:["vec3"],ea:!1},{$:"node_out",ba:"zS",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"zR [ 0 ] = zR [ 1 ] = zR [ 2 ] = _0_0 ; zS = _1_0 ; zI ; zJ ; zK ; zL ; zM ; zN ; zO ; zP ; zQ ;".split(" ")}]},{$:"node",ba:"ADD_SHADER",ma:[],la:[{$:"node_in",ba:"zT",fa:["vec3"],ea:!1},{$:"node_in",ba:"zU",fa:["vec3"],ea:!1},{$:"node_out",ba:"zV",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"zV = clamp ( zT + zU , vec3 ( _0_0 ) , vec3 ( _1_0 ) ) ;".split(" ")}]},
{$:"node",ba:"MIX_SHADER",ma:[],la:[{$:"node_in",ba:"zW",fa:["float"],ea:!1},{$:"node_in",ba:"zX",fa:["vec3"],ea:!1},{$:"node_in",ba:"zY",fa:["vec3"],ea:!1},{$:"node_in",ba:"zZ",fa:["vec3"],ea:!1},{$:"node_in",ba:"z_",fa:["float"],ea:!1},{$:"node_in",ba:"Aa",fa:["vec3"],ea:!1},{$:"node_in",ba:"Ab",fa:["float"],ea:!1},{$:"node_in",ba:"Ac",fa:["float"],ea:!1},{$:"node_in",ba:"Ad",fa:["vec3"],ea:!1},{$:"node_in",ba:"Ag",fa:["vec3"],ea:!1},{$:"node_in",ba:"Ah",fa:["float"],ea:!1},{$:"node_in",ba:"Ai",
fa:["vec3"],ea:!1},{$:"node_in",ba:"Aj",fa:["float"],ea:!1},{$:"node_in",ba:"Ak",fa:["vec3"],ea:!1},{$:"node_in",ba:"Al",fa:["float"],ea:!1},{$:"node_in",ba:"Am",fa:["vec3"],ea:!1},{$:"node_in",ba:"An",fa:["float"],ea:!1},{$:"node_in",ba:"Ao",fa:["float"],ea:!1},{$:"node_in",ba:"Ap",fa:["vec3"],ea:!1},{$:"node_in",ba:"As",fa:["vec3"],ea:!1},{$:"node_in",ba:"At",fa:["float"],ea:!1},{$:"node_in",ba:"Au",fa:["vec3"],ea:!1},{$:"node_in",ba:"Av",fa:["float"],ea:!1},{$:"node_out",ba:"Aw",fa:["vec3"],ea:!1},
{$:"node_out",ba:"Ax",fa:["vec3"],ea:!1},{$:"node_out",ba:"Ay",fa:["float"],ea:!1},{$:"node_out",ba:"Az",fa:["vec3"],ea:!1},{$:"node_out",ba:"AA",fa:["float"],ea:!1},{$:"node_out",ba:"AB",fa:["float"],ea:!1},{$:"node_out",ba:"AC",fa:["vec3"],ea:!1},{$:"node_out",ba:"AF",fa:["vec3"],ea:!1},{$:"node_out",ba:"AG",fa:["float"],ea:!1},{$:"node_out",ba:"AH",fa:["vec3"],ea:!1},{$:"node_out",ba:"AI",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"float AJ = clamp ( zW , _0_0 , _1_0 ) ; Ax = mix ( zZ , Ak , AJ ) ; Ay = mix ( z_ , Al , AJ ) ; if ( Ac > _0_0 ) { if ( Ao > _0_0 ) { Az = mix ( Aa , Am , AJ ) ; AA = mix ( Ab , An , AJ ) ; } else { Az = Aa ; AA = Ab ; } } else { Az = Am ; AA = An ; } if ( Ah > _0_0 ) { if ( At > _0_0 ) { AF = mix ( Ag , As , AJ ) ; } else { AF = Ag ; } } else { AF = As ; } AB = mix ( Ac , Ao , AJ ) ; AC = mix ( Ad , Ap , AJ ) ; AG = mix ( Ah , At , AJ ) ; AH = mix ( Ai , Au , AJ ) ; AI = mix ( Aj , Av , AJ ) ;".split(" ")}]},
{$:"node",ba:"UV_MERGED",ma:[],la:[{$:"node_out",ba:"AK",fa:["vec3"],ea:!1},{$:"node_out",ba:"AL",fa:["vec3"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_AK"],ja:[{$:"txt",aa:"AK = sn ( A ) ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_AL"],ja:[{$:"txt",aa:"AL = vec3 ( A , _0_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"TEX_COORD_UV",ma:[],la:[{$:"node_out",ba:"AM",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"AM = vec3 ( A , _0_0 ) ;".split(" ")}]},{$:"node",ba:"TEX_COORD_NO",ma:[],
la:[{$:"node_out",ba:"AN",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:["AN","=","ox",";"]}]},{$:"node",ba:"TEX_COORD_GE",ma:[],la:[{$:"node_out",ba:"AO",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"AO = vec3 ( A , _0_0 ) ;".split(" ")}]},{$:"node",ba:"TEX_COORD_OB",ma:[],la:[{$:"node_out",ba:"AP",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"AP [ 0 ] = AP [ 1 ] = AP [ 2 ] = _1_0 ;".split(" ")}]},{$:"node",ba:"TEX_COORD_CA",ma:[],la:[{$:"node_out",ba:"AQ",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"AQ [ 0 ] = sR [ 0 ] ; AQ [ 1 ] = sR [ 1 ] ; AQ [ 2 ] = _1_0 ;".split(" ")}]},
{$:"node",ba:"TEX_COORD_WI",ma:[],la:[{$:"node_out",ba:"AR",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"AR [ 0 ] = AR [ 1 ] = AR [ 2 ] = _1_0 ;".split(" ")}]},{$:"node",ba:"TEX_COORD_RE",ma:[],la:[{$:"node_out",ba:"AS",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"AS [ 0 ] = AS [ 1 ] = AS [ 2 ] = _1_0 ;".split(" ")}]},{$:"node",ba:"UVMAP",ma:[],la:[{$:"node_out",ba:"AT",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"AT = vec3 ( A , _0_0 ) ;".split(" ")}]},{$:"node",ba:"PARTICLE_INFO",ma:[],la:[{$:"node_out",ba:"AU",fa:["float"],
ea:!1},{$:"node_out",ba:"AV",fa:["float"],ea:!1},{$:"node_out",ba:"AW",fa:["float"],ea:!1},{$:"node_out",ba:"AX",fa:["vec3"],ea:!1},{$:"node_out",ba:"AY",fa:["float"],ea:!1},{$:"node_out",ba:"AZ",fa:["vec3"],ea:!1},{$:"node_out",ba:"A_",fa:["vec3"],ea:!1},{$:"node_param",ba:"HY",fa:["GLSL_IN","vec4"],ea:!0},{$:"node_param",ba:"HZ",fa:["GLSL_IN","vec3"],ea:!0},{$:"node_param",ba:"H_",fa:["GLSL_IN","vec3"],ea:!0},{$:"node_param",ba:"Ia",fa:["GLSL_IN","vec3"],ea:!0}],ja:[{$:"node_cond",da:[{$:"node_if",
ga:["PARTICLE_BATCH"],ja:[{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_AU"],ja:[{$:"txt",aa:"AU = HY [ 0 ] ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_AV"],ja:[{$:"txt",aa:"AV = HY [ 1 ] ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_AW"],ja:[{$:"txt",aa:"AW = HY [ 2 ] ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_AX"],ja:[{$:"txt",aa:["AX","=","HZ",";"]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_AY"],ja:[{$:"txt",aa:"AY = HY [ 3 ] ;".split(" ")}]}]},
{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_AZ"],ja:[{$:"txt",aa:["AZ","=","H_",";"]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_A_"],ja:[{$:"txt",aa:["A_","=","Ia",";"]}]}]}]},{$:"node_else",ja:[{$:"txt",aa:"AU = _0_0 ; AV = _0_0 ; AW = _0_0 ; AX = vec3 ( _0_0 ) ; AY = _0_0 ; AZ = AX ; A_ = AX ;".split(" ")}]}]}]},{$:"node",ba:"HAIR_INFO",ma:[],la:[{$:"node_out",ba:"Ba",fa:["float"],ea:!1},{$:"node_out",ba:"Bb",fa:["float"],ea:!1},{$:"node_out",ba:"Bc",fa:["float"],ea:!1},{$:"node_out",ba:"Bd",
fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"Ba = _0_0 ; Bb = _0_0 ; Bc = _0_0 ; Bd = vec3 ( _0_0 ) ;".split(" ")}]},{$:"node",ba:"OBJECT_INFO",ma:[],la:[{$:"node_out",ba:"Be",fa:["vec3"],ea:!1},{$:"node_out",ba:"Bf",fa:["float"],ea:!1},{$:"node_out",ba:"Bg",fa:["float"],ea:!1},{$:"node_out",ba:"Bh",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"Bf = _0_0 ; Bg = _0_0 ; Bh = _0_0 ; Be = vec3 ( _0_0 ) ;".split(" ")}]},{$:"node",ba:"WIREFRAME",ma:[],la:[{$:"node_in",ba:"Bi",fa:["float"],ea:!1},{$:"node_out",ba:"Bj",
fa:["float"],ea:!1}],ja:[{$:"txt",aa:["Bj","=","Bi",";"]}]},{$:"node",ba:"TANGENT",ma:[],la:[{$:"node_out",ba:"Bk",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"Bk = vec3 ( _0_0 ) ;".split(" ")}]},{$:"node",ba:"LAYER_WEIGHT",ma:[],la:[{$:"node_in",ba:"Ij",fa:["float"],ea:!1},{$:"node_in",ba:"Ik",fa:["vec3"],ea:!1},{$:"node_out",ba:"Bn",fa:["float"],ea:!1},{$:"node_out",ba:"Bo",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"Bn = Bo = _0_0 ; Ik ; Ij ;".split(" ")}]},{$:"node",ba:"LIGHT_PATH",ma:[],la:[{$:"node_out",
ba:"Bq",fa:["float"],ea:!1},{$:"node_out",ba:"Br",fa:["float"],ea:!1},{$:"node_out",ba:"Bs",fa:["float"],ea:!1},{$:"node_out",ba:"Bt",fa:["float"],ea:!1},{$:"node_out",ba:"Bu",fa:["float"],ea:!1},{$:"node_out",ba:"Bv",fa:["float"],ea:!1},{$:"node_out",ba:"Bw",fa:["float"],ea:!1},{$:"node_out",ba:"Bx",fa:["float"],ea:!1},{$:"node_out",ba:"By",fa:["float"],ea:!1},{$:"node_out",ba:"Bz",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"Bq = Br = Bs = _0_0 ; Bt = Bu = Bv = _0_0 ; Bw = Bw = By = Bz = _0_0 ; Bx = _0_0 ;".split(" ")}]},
{$:"node",ba:"ATTRIBUTE",ma:[],la:[{$:"node_out",ba:"BB",fa:["vec3"],ea:!1},{$:"node_out",ba:"BC",fa:["vec3"],ea:!1},{$:"node_out",ba:"BD",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"BB = BC = vec3 ( _0_0 ) ; BD = _0_0 ;".split(" ")}]},{$:"node",ba:"SCRIPT",ma:[],la:[],ja:[]},{$:"node",ba:"CURVE_VEC",ma:[{$:"node_var",ba:"READ_R",aa:["0"]},{$:"node_var",ba:"READ_G",aa:["0"]},{$:"node_var",ba:"READ_B",aa:["0"]},{$:"node_var",ba:"NODE_TEX_ROW",aa:["0.0"]}],la:[{$:"node_in",ba:"BE",fa:["float"],ea:!1},{$:"node_in",
ba:"BF",fa:["vec3"],ea:!1},{$:"node_out",ba:"BG",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:["BG","=","BF",";"]},{$:"node_cond",da:[{$:"node_if",ga:["READ_R"],ja:[{$:"txt",aa:"BG . r = ( GLSL_TEXTURE ( u_nodes_texture , vec2 ( _0_5 * BF . r + _0_5 , NODE_TEX_ROW ) ) . r - _0_5 ) * 2.0 ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["READ_G"],ja:[{$:"txt",aa:"BG . g = ( GLSL_TEXTURE ( u_nodes_texture , vec2 ( _0_5 * BF . g + _0_5 , NODE_TEX_ROW ) ) . g - _0_5 ) * 2.0 ;".split(" ")}]}]},{$:"node_cond",
da:[{$:"node_if",ga:["READ_B"],ja:[{$:"txt",aa:"BG . b = ( GLSL_TEXTURE ( u_nodes_texture , vec2 ( _0_5 * BF . b + _0_5 , NODE_TEX_ROW ) ) . b - _0_5 ) * 2.0 ;".split(" ")}]}]},{$:"txt",aa:"BG = mix ( BF , BG , BE ) ;".split(" ")}]},{$:"node",ba:"CURVE_RGB",ma:[{$:"node_var",ba:"READ_A",aa:["0"]},{$:"node_var",ba:"READ_R",aa:["0"]},{$:"node_var",ba:"READ_G",aa:["0"]},{$:"node_var",ba:"READ_B",aa:["0"]},{$:"node_var",ba:"NODE_TEX_ROW",aa:["_0_0"]}],la:[{$:"node_in",ba:"BH",fa:["float"],ea:!1},{$:"node_in",
ba:"BI",fa:["vec3"],ea:!1},{$:"node_out",ba:"BJ",fa:["vec3"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["READ_A"],ja:[{$:"txt",aa:"float r = GLSL_TEXTURE ( u_nodes_texture , vec2 ( BI . r , NODE_TEX_ROW ) ) . a ; float g = GLSL_TEXTURE ( u_nodes_texture , vec2 ( BI . g , NODE_TEX_ROW ) ) . a ; float b = GLSL_TEXTURE ( u_nodes_texture , vec2 ( BI . b , NODE_TEX_ROW ) ) . a ;".split(" ")}]},{$:"node_else",ja:[{$:"txt",aa:"float r = BI . r ; float g = BI . g ; float b = BI . b ;".split(" ")}]}]},
{$:"node_cond",da:[{$:"node_if",ga:["READ_R"],ja:[{$:"txt",aa:"BJ . r = GLSL_TEXTURE ( u_nodes_texture , vec2 ( r , NODE_TEX_ROW ) ) . r ;".split(" ")}]},{$:"node_else",ja:[{$:"txt",aa:"BJ . r = r ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["READ_G"],ja:[{$:"txt",aa:"BJ . g = GLSL_TEXTURE ( u_nodes_texture , vec2 ( g , NODE_TEX_ROW ) ) . g ;".split(" ")}]},{$:"node_else",ja:[{$:"txt",aa:"BJ . g = g ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["READ_B"],ja:[{$:"txt",aa:"BJ . b = GLSL_TEXTURE ( u_nodes_texture , vec2 ( b , NODE_TEX_ROW ) ) . b ;".split(" ")}]},
{$:"node_else",ja:[{$:"txt",aa:"BJ . b = b ;".split(" ")}]}]},{$:"txt",aa:"BJ = mix ( BI , BJ , BH ) ;".split(" ")}]},{$:"node",ba:"VALTORGB",ma:[{$:"node_var",ba:"NODE_TEX_ROW",aa:["_0_0"]}],la:[{$:"node_in",ba:"BK",fa:["float"],ea:!1},{$:"node_out",ba:"BL",fa:["vec3"],ea:!1},{$:"node_out",ba:"BM",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"vec4 BN = GLSL_TEXTURE ( u_nodes_texture , vec2 ( BK , NODE_TEX_ROW ) ) ; BL = BN . rgb ; BM = BN . a ;".split(" ")}]},{$:"node",ba:"MAPPING",ma:[{$:"node_var",ba:"MAPPING_SCALE_DEF",
aa:["0"]},{$:"node_var",ba:"MAPPING_SCALE",aa:["vec3","(","_1_0",")"]},{$:"node_var",ba:"MAPPING_TRANS_DEF",aa:["0"]},{$:"node_var",ba:"MAPPING_TRANS",aa:["vec3","(","_0_0",")"]},{$:"node_var",ba:"MAPPING_TRS_MATRIX_DEF",aa:["0"]},{$:"node_var",ba:"MAPPING_TRS_MATRIX",aa:["mat4","(","_1_0",")"]},{$:"node_var",ba:"MAPPING_MIN_CLIP_DEF",aa:["0"]},{$:"node_var",ba:"MAPPING_MIN_CLIP",aa:["vec3","(","_0_0",")"]},{$:"node_var",ba:"MAPPING_MAX_CLIP_DEF",aa:["0"]},{$:"node_var",ba:"MAPPING_MAX_CLIP",aa:["vec3",
"(","_1_0",")"]},{$:"node_var",ba:"MAPPING_IS_NORMAL",aa:["0"]}],la:[{$:"node_in",ba:"BO",fa:["vec3"],ea:!1},{$:"node_out",ba:"BP",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:["BP","=","BO",";"]},{$:"node_cond",da:[{$:"node_if",ga:["MAPPING_SCALE_DEF"],ja:[{$:"txt",aa:"BP = BP * MAPPING_SCALE ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["MAPPING_TRANS_DEF"],ja:[{$:"txt",aa:"BP = BP + MAPPING_TRANS ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["MAPPING_TRS_MATRIX_DEF"],ja:[{$:"txt",aa:"BP = ( MAPPING_TRS_MATRIX * vec4 ( BP , _1_0 ) ) . xyz ;".split(" ")}]}]},
{$:"node_cond",da:[{$:"node_if",ga:["MAPPING_MIN_CLIP_DEF"],ja:[{$:"txt",aa:"BP = max ( BP , MAPPING_MIN_CLIP ) ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["MAPPING_MAX_CLIP_DEF"],ja:[{$:"txt",aa:"BP = min ( BP , MAPPING_MAX_CLIP ) ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["MAPPING_IS_NORMAL"],ja:[{$:"txt",aa:"BP = normalize ( BP ) ;".split(" ")}]}]}]},{$:"node",ba:"MATH_ADD",ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"BQ",fa:["float"],ea:!1},{$:"node_in",
ba:"BR",fa:["float"],ea:!1},{$:"node_out",ba:"BS",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"BS = BQ + BR ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"BS = clamp ( BS , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MATH_SUBTRACT",ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"BT",fa:["float"],ea:!1},{$:"node_in",ba:"BU",fa:["float"],ea:!1},{$:"node_out",ba:"BV",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"BV = BT - BU ;".split(" ")},{$:"node_cond",
da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"BV = clamp ( BV , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MATH_MULTIPLY",ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"BW",fa:["float"],ea:!1},{$:"node_in",ba:"BX",fa:["float"],ea:!1},{$:"node_out",ba:"BY",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"BY = BW * BX ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"BY = clamp ( BY , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MATH_DIVIDE",
ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"BZ",fa:["float"],ea:!1},{$:"node_in",ba:"B_",fa:["float"],ea:!1},{$:"node_out",ba:"Ca",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"Ca = ( B_ != _0_0 ) ? BZ / B_ : _0_0 ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"Ca = clamp ( Ca , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MATH_SINE",ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Cb",fa:["float"],ea:!1},{$:"node_in",
ba:"Cc",fa:["float"],ea:!1},{$:"node_out",ba:"Cd",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"Cd = sin ( Cb ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"Cd = clamp ( Cd , _0_0 , _1_0 ) ;".split(" ")}]}]},{$:"txt",aa:["Cc",";"]}]},{$:"node",ba:"MATH_COSINE",ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Ce",fa:["float"],ea:!1},{$:"node_in",ba:"Cf",fa:["float"],ea:!1},{$:"node_out",ba:"Cg",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"Cg = cos ( Ce ) ;".split(" ")},
{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"Cg = clamp ( Cg , _0_0 , _1_0 ) ;".split(" ")}]}]},{$:"txt",aa:["Cf",";"]}]},{$:"node",ba:"MATH_TANGENT",ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Ch",fa:["float"],ea:!1},{$:"node_in",ba:"Ci",fa:["float"],ea:!1},{$:"node_out",ba:"Cj",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"Cj = tan ( Ch ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"Cj = clamp ( Cj , _0_0 , _1_0 ) ;".split(" ")}]}]},
{$:"txt",aa:["Ci",";"]}]},{$:"node",ba:"MATH_ARCSINE",ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Ck",fa:["float"],ea:!1},{$:"node_in",ba:"Cl",fa:["float"],ea:!1},{$:"node_out",ba:"Cm",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"Cm = ( Ck <= _1_0 && Ck >= - _1_0 ) ? asin ( Ck ) : _0_0 ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"Cm = clamp ( Cm , _0_0 , _1_0 ) ;".split(" ")}]}]},{$:"txt",aa:["Cl",";"]}]},{$:"node",ba:"MATH_ARCCOSINE",ma:[{$:"node_var",
ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Cn",fa:["float"],ea:!1},{$:"node_in",ba:"Co",fa:["float"],ea:!1},{$:"node_out",ba:"Cp",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"Cp = ( Cn <= _1_0 && Cn >= - _1_0 ) ? acos ( Cn ) : _0_0 ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"Cp = clamp ( Cp , _0_0 , _1_0 ) ;".split(" ")}]}]},{$:"txt",aa:["Co",";"]}]},{$:"node",ba:"MATH_ARCTANGENT",ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Cq",
fa:["float"],ea:!1},{$:"node_in",ba:"Cr",fa:["float"],ea:!1},{$:"node_out",ba:"Cs",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"Cs = atan ( Cq ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"Cs = clamp ( Cs , _0_0 , _1_0 ) ;".split(" ")}]}]},{$:"txt",aa:["Cr",";"]}]},{$:"node",ba:"MATH_POWER",ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Ct",fa:["float"],ea:!1},{$:"node_in",ba:"Cu",fa:["float"],ea:!1},{$:"node_out",ba:"Cv",fa:["float"],ea:!1}],
ja:[{$:"txt",aa:"if ( Ct < _0_0 && Cu != floor ( Cu ) ) Cv = _0_0 ; else if ( Cu == _0_0 ) Cv = _1_0 ; else if ( Ct < _0_0 ) Cv = mix ( _1_0 , - _1_0 , sign ( mod ( - Cu , 2.0 ) ) ) * pow ( - Ct , Cu ) ; else if ( Ct == _0_0 ) Cv = _0_0 ; else Cv = pow ( Ct , Cu ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"Cv = clamp ( Cv , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MATH_LOGARITHM",ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Cw",
fa:["float"],ea:!1},{$:"node_in",ba:"Cx",fa:["float"],ea:!1},{$:"node_out",ba:"Cy",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"Cy = ( Cw > _0_0 && Cx > _0_0 ) ? log2 ( Cw ) / log2 ( Cx ) : _0_0 ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"Cy = clamp ( Cy , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MATH_MINIMUM",ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Cz",fa:["float"],ea:!1},{$:"node_in",ba:"CA",fa:["float"],ea:!1},{$:"node_out",
ba:"CB",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"CB = min ( Cz , CA ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"CB = clamp ( CB , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MATH_MAXIMUM",ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"CC",fa:["float"],ea:!1},{$:"node_in",ba:"CD",fa:["float"],ea:!1},{$:"node_out",ba:"CE",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"CE = max ( CC , CD ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],
ja:[{$:"txt",aa:"CE = clamp ( CE , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MATH_ROUND",ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"CF",fa:["float"],ea:!1},{$:"node_in",ba:"CG",fa:["float"],ea:!1},{$:"node_out",ba:"CH",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"CH = floor ( CF + _0_5 ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"CH = clamp ( CH , _0_0 , _1_0 ) ;".split(" ")}]}]},{$:"txt",aa:["CG",";"]}]},{$:"node",ba:"MATH_LESS_THAN",
ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"CI",fa:["float"],ea:!1},{$:"node_in",ba:"CJ",fa:["float"],ea:!1},{$:"node_out",ba:"CK",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"CK = ( CI < CJ ) ? _1_0 : _0_0 ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"CK = clamp ( CK , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MATH_GREATER_THAN",ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"CL",fa:["float"],ea:!1},{$:"node_in",
ba:"CM",fa:["float"],ea:!1},{$:"node_out",ba:"CN",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"CN = ( CL > CM ) ? _1_0 : _0_0 ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"CN = clamp ( CN , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MATH_MODULO",ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"CO",fa:["float"],ea:!1},{$:"node_in",ba:"CP",fa:["float"],ea:!1},{$:"node_out",ba:"CQ",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"CQ = abs ( CP ) > 0.000001 ? mod ( CO , CP ) : _0_0 ;".split(" ")},
{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"CQ = clamp ( CQ , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MATH_ABSOLUTE",ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"CR",fa:["float"],ea:!1},{$:"node_in",ba:"CS",fa:["float"],ea:!1},{$:"node_out",ba:"CT",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"CT = abs ( CR ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"CT = clamp ( CT , _0_0 , _1_0 ) ;".split(" ")}]}]},
{$:"txt",aa:["CS",";"]}]},{$:"node",ba:"MIX_RGB_MIX",ma:[{$:"node_var",ba:"MIX_RGB_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"CU",fa:["float"],ea:!1},{$:"node_in",ba:"CV",fa:["vec3"],ea:!1},{$:"node_in",ba:"CW",fa:["vec3"],ea:!1},{$:"node_out",ba:"CX",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float AJ = clamp ( CU , _0_0 , _1_0 ) ; CX = mix ( CV , CW , AJ ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MIX_RGB_USE_CLAMP"],ja:[{$:"txt",aa:"CX = clamp ( CX , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",
ba:"MIX_RGB_ADD",ma:[{$:"node_var",ba:"MIX_RGB_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"CY",fa:["float"],ea:!1},{$:"node_in",ba:"CZ",fa:["vec3"],ea:!1},{$:"node_in",ba:"C_",fa:["vec3"],ea:!1},{$:"node_out",ba:"Da",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float AJ = clamp ( CY , _0_0 , _1_0 ) ; Da = mix ( CZ , CZ + C_ , AJ ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MIX_RGB_USE_CLAMP"],ja:[{$:"txt",aa:"Da = clamp ( Da , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MIX_RGB_MULTIPLY",ma:[{$:"node_var",
ba:"MIX_RGB_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Db",fa:["float"],ea:!1},{$:"node_in",ba:"Dc",fa:["vec3"],ea:!1},{$:"node_in",ba:"Dd",fa:["vec3"],ea:!1},{$:"node_out",ba:"De",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float AJ = clamp ( Db , _0_0 , _1_0 ) ; De = mix ( Dc , Dc * Dd , AJ ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MIX_RGB_USE_CLAMP"],ja:[{$:"txt",aa:"De = clamp ( De , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MIX_RGB_SUBTRACT",ma:[{$:"node_var",ba:"MIX_RGB_USE_CLAMP",
aa:["0"]}],la:[{$:"node_in",ba:"Df",fa:["float"],ea:!1},{$:"node_in",ba:"Dg",fa:["vec3"],ea:!1},{$:"node_in",ba:"Dh",fa:["vec3"],ea:!1},{$:"node_out",ba:"Di",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float AJ = clamp ( Df , _0_0 , _1_0 ) ; Di = mix ( Dg , Dg - Dh , AJ ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MIX_RGB_USE_CLAMP"],ja:[{$:"txt",aa:"Di = clamp ( Di , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MIX_RGB_SCREEN",ma:[{$:"node_var",ba:"MIX_RGB_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",
ba:"Dj",fa:["float"],ea:!1},{$:"node_in",ba:"Dk",fa:["vec3"],ea:!1},{$:"node_in",ba:"Dl",fa:["vec3"],ea:!1},{$:"node_out",ba:"Dm",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float AJ = clamp ( Dj , _0_0 , _1_0 ) ; float Dn = _1_0 - AJ ; Dm = vec3 ( _1_0 ) - ( vec3 ( Dn ) + AJ * ( vec3 ( _1_0 ) - Dl ) ) * ( vec3 ( _1_0 ) - Dk ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MIX_RGB_USE_CLAMP"],ja:[{$:"txt",aa:"Dm = clamp ( Dm , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MIX_RGB_DIVIDE",ma:[{$:"node_var",
ba:"MIX_RGB_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Do",fa:["float"],ea:!1},{$:"node_in",ba:"Dp",fa:["vec3"],ea:!1},{$:"node_in",ba:"Dq",fa:["vec3"],ea:!1},{$:"node_out",ba:"Dr",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float AJ = clamp ( Do , _0_0 , _1_0 ) ; float Dn = _1_0 - AJ ; Dq += step ( Dq , vec3 ( _0_0 ) ) ; Dr = Dn * Dp + AJ * Dp / Dq ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MIX_RGB_USE_CLAMP"],ja:[{$:"txt",aa:"Dr = clamp ( Dr , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MIX_RGB_DIFFERENCE",
ma:[{$:"node_var",ba:"MIX_RGB_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Ds",fa:["float"],ea:!1},{$:"node_in",ba:"Dt",fa:["vec3"],ea:!1},{$:"node_in",ba:"Du",fa:["vec3"],ea:!1},{$:"node_out",ba:"Dv",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float AJ = clamp ( Ds , _0_0 , _1_0 ) ; Dv = mix ( Dt , abs ( Dt - Du ) , AJ ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MIX_RGB_USE_CLAMP"],ja:[{$:"txt",aa:"Dv = clamp ( Dv , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MIX_RGB_DARKEN",ma:[{$:"node_var",
ba:"MIX_RGB_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Dw",fa:["float"],ea:!1},{$:"node_in",ba:"Dx",fa:["vec3"],ea:!1},{$:"node_in",ba:"Dy",fa:["vec3"],ea:!1},{$:"node_out",ba:"Dz",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float AJ = clamp ( Dw , _0_0 , _1_0 ) ; Dz = min ( Dx . rgb , Dy . rgb * AJ ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MIX_RGB_USE_CLAMP"],ja:[{$:"txt",aa:"Dz = clamp ( Dz , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MIX_RGB_LIGHTEN",ma:[{$:"node_var",ba:"MIX_RGB_USE_CLAMP",
aa:["0"]}],la:[{$:"node_in",ba:"DA",fa:["float"],ea:!1},{$:"node_in",ba:"DB",fa:["vec3"],ea:!1},{$:"node_in",ba:"DC",fa:["vec3"],ea:!1},{$:"node_out",ba:"DD",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float AJ = clamp ( DA , _0_0 , _1_0 ) ; DD = max ( DB . rgb , DC . rgb * AJ ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MIX_RGB_USE_CLAMP"],ja:[{$:"txt",aa:"DD = clamp ( DD , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MIX_RGB_OVERLAY",ma:[{$:"node_var",ba:"MIX_RGB_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",
ba:"DE",fa:["float"],ea:!1},{$:"node_in",ba:"DF",fa:["vec3"],ea:!1},{$:"node_in",ba:"DG",fa:["vec3"],ea:!1},{$:"node_out",ba:"DH",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float AJ = clamp ( DE , _0_0 , _1_0 ) ; vec3 DI = vec3 ( _1_0 - AJ ) ; DH = mix ( DF * ( DI + 2.0 * AJ * DG ) , vec3 ( _1_0 ) - ( DI + 2.0 * AJ * ( vec3 ( _1_0 ) - DG ) ) * ( vec3 ( _1_0 ) - DF ) , step ( _0_5 , DF ) ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MIX_RGB_USE_CLAMP"],ja:[{$:"txt",aa:"DH = clamp ( DH , _0_0 , _1_0 ) ;".split(" ")}]}]}]},
{$:"node",ba:"MIX_RGB_DODGE",ma:[{$:"node_var",ba:"MIX_RGB_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"DJ",fa:["float"],ea:!1},{$:"node_in",ba:"DK",fa:["vec3"],ea:!1},{$:"node_in",ba:"DL",fa:["vec3"],ea:!1},{$:"node_out",ba:"DM",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float AJ = clamp ( DJ , _0_0 , _1_0 ) ; vec3 DN = vec3 ( _1_0 ) - AJ * DL ; vec3 DO = clamp ( DK / DN , _0_0 , _1_0 ) ; DM = mix ( mix ( DO , vec3 ( _1_0 ) , step ( DN , vec3 ( _0_0 ) ) ) , DK , step ( DK , vec3 ( _0_0 ) ) ) ;".split(" ")},
{$:"node_cond",da:[{$:"node_if",ga:["MIX_RGB_USE_CLAMP"],ja:[{$:"txt",aa:"DM = clamp ( DM , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MIX_RGB_BURN",ma:[{$:"node_var",ba:"MIX_RGB_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"DP",fa:["float"],ea:!1},{$:"node_in",ba:"DQ",fa:["vec3"],ea:!1},{$:"node_in",ba:"DR",fa:["vec3"],ea:!1},{$:"node_out",ba:"DS",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float AJ = clamp ( DP , _0_0 , _1_0 ) ; vec3 ks = vec3 ( _1_0 - AJ ) ; vec3 DN = ks + AJ * DR ; vec3 DO = clamp ( vec3 ( _1_0 ) - ( vec3 ( _1_0 ) - DQ ) / DN , _0_0 , _1_0 ) ; DS = mix ( DO , vec3 ( _0_0 ) , step ( DN , vec3 ( _0_0 ) ) ) ;".split(" ")},
{$:"node_cond",da:[{$:"node_if",ga:["MIX_RGB_USE_CLAMP"],ja:[{$:"txt",aa:"DS = clamp ( DS , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MIX_RGB_HUE",ma:[{$:"node_var",ba:"MIX_RGB_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"DT",fa:["float"],ea:!1},{$:"node_in",ba:"DU",fa:["vec3"],ea:!1},{$:"node_in",ba:"DV",fa:["vec3"],ea:!1},{$:"node_out",ba:"DW",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float AJ = clamp ( DT , _0_0 , _1_0 ) ; vec3 kk , DX , DN ; DW = DU ; DX = kj ( DV ) ; if ( DX . y != _0_0 ) { kk = kj ( DW ) ; kk . x = DX . x ; DN = kl ( kk ) ; DW = mix ( DW , DN , AJ ) ; }".split(" ")},
{$:"node_cond",da:[{$:"node_if",ga:["MIX_RGB_USE_CLAMP"],ja:[{$:"txt",aa:"DW = clamp ( DW , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MIX_RGB_SATURATION",ma:[{$:"node_var",ba:"MIX_RGB_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"DY",fa:["float"],ea:!1},{$:"node_in",ba:"DZ",fa:["vec3"],ea:!1},{$:"node_in",ba:"D_",fa:["vec3"],ea:!1},{$:"node_out",ba:"Ea",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float AJ = clamp ( DY , _0_0 , _1_0 ) ; float Dn = _1_0 - AJ ; Ea = DZ ; vec3 kk , DX ; kk = kj ( Ea ) ; if ( kk . y != _0_0 ) { DX = kj ( D_ ) ; kk . y = Dn * kk . y + AJ * DX . y ; Ea = kl ( kk ) ; }".split(" ")},
{$:"node_cond",da:[{$:"node_if",ga:["MIX_RGB_USE_CLAMP"],ja:[{$:"txt",aa:"Ea = clamp ( Ea , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MIX_RGB_VALUE",ma:[{$:"node_var",ba:"MIX_RGB_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Eb",fa:["float"],ea:!1},{$:"node_in",ba:"Ec",fa:["vec3"],ea:!1},{$:"node_in",ba:"Ed",fa:["vec3"],ea:!1},{$:"node_out",ba:"Ee",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float AJ = clamp ( Eb , _0_0 , _1_0 ) ; float Dn = _1_0 - AJ ; vec3 kk , DX ; kk = kj ( Ec ) ; DX = kj ( Ed ) ; kk . z = Dn * kk . z + AJ * DX . z ; Ee = kl ( kk ) ;".split(" ")},
{$:"node_cond",da:[{$:"node_if",ga:["MIX_RGB_USE_CLAMP"],ja:[{$:"txt",aa:"Ee = clamp ( Ee , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MIX_RGB_COLOR",ma:[{$:"node_var",ba:"MIX_RGB_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Ef",fa:["float"],ea:!1},{$:"node_in",ba:"Eg",fa:["vec3"],ea:!1},{$:"node_in",ba:"Eh",fa:["vec3"],ea:!1},{$:"node_out",ba:"Ei",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float AJ = clamp ( Ef , _0_0 , _1_0 ) ; vec3 kk , DX , DN ; Ei = Eg ; DX = kj ( Eh ) ; if ( DX . y != _0_0 ) { kk = kj ( Ei ) ; kk . x = DX . x ; kk . y = DX . y ; DN = kl ( kk ) ; Ei = mix ( Ei , DN , AJ ) ; }".split(" ")},
{$:"node_cond",da:[{$:"node_if",ga:["MIX_RGB_USE_CLAMP"],ja:[{$:"txt",aa:"Ei = clamp ( Ei , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MIX_RGB_SOFT_LIGHT",ma:[{$:"node_var",ba:"MIX_RGB_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Ej",fa:["float"],ea:!1},{$:"node_in",ba:"Ek",fa:["vec3"],ea:!1},{$:"node_in",ba:"El",fa:["vec3"],ea:!1},{$:"node_out",ba:"Em",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float AJ = clamp ( Ej , _0_0 , _1_0 ) ; float Dn = _1_0 - AJ ; vec3 En = El + Ek - El * Ek ; Em = Ek * ( vec3 ( Dn ) + vec3 ( AJ ) * ( ( vec3 ( _1_0 ) - Ek ) * El + En ) ) ;".split(" ")},
{$:"node_cond",da:[{$:"node_if",ga:["MIX_RGB_USE_CLAMP"],ja:[{$:"txt",aa:"Em = clamp ( Em , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MIX_RGB_LINEAR_LIGHT",ma:[{$:"node_var",ba:"MIX_RGB_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Eo",fa:["float"],ea:!1},{$:"node_in",ba:"Ep",fa:["vec3"],ea:!1},{$:"node_in",ba:"Eq",fa:["vec3"],ea:!1},{$:"node_out",ba:"Er",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float AJ = clamp ( Eo , _0_0 , _1_0 ) ; Er = Ep + AJ * ( 2.0 * Eq - vec3 ( _1_0 ) ) ;".split(" ")},{$:"node_cond",
da:[{$:"node_if",ga:["MIX_RGB_USE_CLAMP"],ja:[{$:"txt",aa:"Er = clamp ( Er , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"OUTPUT",ma:[],la:[{$:"node_in",ba:"EA",fa:["vec3"],ea:!1},{$:"node_in",ba:"EB",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"E = EA ; I = EB ;".split(" ")}]},{$:"node",ba:"OUTPUT_SURFACE",ma:[],la:[{$:"node_in",ba:"EC",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"E = EC ; I = _1_0 ;".split(" ")}]},{$:"node",ba:"MATERIAL_BEGIN",ma:[{$:"node_var",ba:"MATERIAL_EXT",aa:["0"]},{$:"node_var",ba:"USE_MATERIAL_NORMAL",
aa:["0"]},{$:"node_var",ba:"USE_MATERIAL_DIFFUSE",aa:["0"]},{$:"node_var",ba:"SHADELESS_MAT",aa:["0"]}],la:[{$:"node_in",ba:"EF",fa:["vec3"],ea:!1},{$:"node_in",ba:"EG",fa:["vec3"],ea:!1},{$:"node_in",ba:"EH",fa:["float"],ea:!1},{$:"node_in",ba:"EI",fa:["vec3"],ea:!0},{$:"node_in",ba:"EJ",fa:["float"],ea:!0},{$:"node_out",ba:"EK",fa:["vec3"],ea:!1},{$:"node_out",ba:"EL",fa:["vec3"],ea:!1},{$:"node_out",ba:"EM",fa:["vec3"],ea:!1},{$:"node_out",ba:"EN",fa:["vec3"],ea:!1},{$:"node_out",ba:"EO",fa:["vec3"],
ea:!1},{$:"node_out",ba:"EP",fa:["vec2"],ea:!1},{$:"node_out",ba:"EQ",fa:["vec2"],ea:!1},{$:"node_out",ba:"ER",fa:["vec4"],ea:!1},{$:"node_param",ba:"sF",fa:["const","vec2"],ea:!0},{$:"node_param",ba:"sG",fa:["const","vec3"],ea:!1}],ja:[{$:"txt",aa:"EM = clamp ( EF , _0_0 , _1_0 ) ; EN = sG [ 0 ] * clamp ( EG , _0_0 , _1_0 ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_MATERIAL_NORMAL"],ja:[{$:"txt",aa:"EO = normalize ( EI ) ;".split(" ")}]},{$:"node_else",ja:[{$:"txt",aa:["EO","=","ox",
";"]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["SHADELESS_MAT",{$:"logic_negative_expr",ia:1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["MATERIAL_EXT"],ja:[{$:"txt",aa:"EK = EJ * EM ;".split(" ")}]},{$:"node_else",ja:[{$:"txt",aa:"EK = sS * EM ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_MATERIAL_DIFFUSE"],ja:[{$:"txt",aa:["EM","*=","EH",";"]}]}]},{$:"txt",aa:"EL = sT * u_environment_energy * cE ( EO ) ; ER = vec4 ( _1_0 ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["NUM_LIGHTS",
0,{$:"g_expr",ia:2}],ja:[{$:"txt",aa:"EP = vec2 ( sF [ 0 ] , sF [ 1 ] ) ; EQ = vec2 ( sG [ 1 ] , sG [ 2 ] ) ;".split(" ")}]}]},{$:"txt",aa:["H","=","ER",";"]}]},{$:"node_else",ja:[{$:"txt",aa:"EK = vec3 ( _0_0 ) ; EL = vec3 ( _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MATERIAL_END",ma:[{$:"node_var",ba:"MATERIAL_EXT",aa:["0"]},{$:"node_var",ba:"USE_MATERIAL_DIFFUSE",aa:["0"]},{$:"node_var",ba:"USE_MATERIAL_SPECULAR",aa:["0"]}],la:[{$:"node_in",ba:"ES",fa:["vec4"],ea:!1},{$:"node_in",ba:"ET",fa:["vec3"],
ea:!1},{$:"node_in",ba:"EU",fa:["vec3"],ea:!1},{$:"node_in",ba:"EV",fa:["float"],ea:!0},{$:"node_in",ba:"EW",fa:["float"],ea:!0},{$:"node_in",ba:"EX",fa:["float"],ea:!0},{$:"node_out",ba:"EY",fa:["vec3"],ea:!0},{$:"node_out",ba:"EZ",fa:["float"],ea:!0},{$:"node_out",ba:"E_",fa:["vec3"],ea:!0},{$:"node_out",ba:"Fa",fa:["vec3"],ea:!0},{$:"node_out",ba:"Fb",fa:["vec3"],ea:!0},{$:"node_param",ba:"sH",fa:["float"],ea:!1},{$:"node_param",ba:"sI",fa:["float"],ea:!1}],ja:[{$:"txt",aa:["EV",";"]},{$:"node_cond",
da:[{$:"node_if",ga:["USE_OUT_EY"],ja:[{$:"node_cond",da:[{$:"node_if",ga:["USE_MATERIAL_DIFFUSE"],ja:[{$:"txt",aa:"EY = ES . rgb ;".split(" ")}]},{$:"node_else",ja:[{$:"txt",aa:"EY = vec3 ( _0_0 ) ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_MATERIAL_SPECULAR"],ja:[{$:"txt",aa:["EY","+=","ET",";"]}]}]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_E_"],ja:[{$:"txt",aa:["E_","=","EU",";"]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["MATERIAL_EXT"],ja:[{$:"node_cond",da:[{$:"node_if",
ga:["USE_OUT_Fa"],ja:[{$:"txt",aa:"Fa = ES . rgb ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Fb"],ja:[{$:"txt",aa:["Fb","=","ET",";"]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_EZ"],ja:[{$:"txt",aa:"EZ = clamp ( EX , _0_0 , _1_0 ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_MATERIAL_SPECULAR"],ja:[{$:"txt",aa:"float t = max ( max ( ET . r , ET . g ) , ET . b ) * EW ; EZ = clamp ( EX * ( _1_0 - t ) + t , _0_0 , _1_0 ) ;".split(" ")}]}]}]}]}]},{$:"node_else",ja:[{$:"node_cond",
da:[{$:"node_if",ga:["USE_OUT_EZ"],ja:[{$:"txt",aa:"EZ = clamp ( sH , _0_0 , _1_0 ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_MATERIAL_SPECULAR"],ja:[{$:"txt",aa:"float t = max ( max ( ET . r , ET . g ) , ET . b ) * sI ; EZ = sH * ( _1_0 - t ) + t ;".split(" ")}]}]}]}]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_MATERIAL_SPECULAR"],ja:[{$:"txt",aa:["F","=","ET",";"]}]},{$:"node_else",ja:[{$:"txt",aa:"F = vec3 ( _0_0 ) ;".split(" ")}]}]},{$:"txt",aa:["G","=","EU",";"]}]},{$:"node",
ba:"LIGHTING_AMBIENT",ma:[],la:[{$:"node_in",ba:"oP",fa:["vec3"],ea:!1},{$:"node_in",ba:"oQ",fa:["vec3"],ea:!1},{$:"node_in",ba:"oR",fa:["vec3"],ea:!1},{$:"node_out",ba:"oS",fa:["vec4"],ea:!1},{$:"node_out",ba:"oT",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"oS = vec4 ( oP + oR * oQ , _0_0 ) ; oT = vec3 ( _0_0 ) ;".split(" ")}]},{$:"node",ba:"LIGHTING_LAMP",ma:[{$:"node_var",ba:"LAMP_TYPE",aa:["HEMI"]},{$:"node_var",ba:"LAMP_IND",aa:["0"]},{$:"node_var",ba:"LAMP_SPOT_SIZE",aa:["0.8"]},{$:"node_var",ba:"LAMP_SPOT_BLEND",
aa:["0.03"]},{$:"node_var",ba:"LAMP_LIGHT_DIST",aa:["30.0"]},{$:"node_var",ba:"LAMP_SHADOW_MAP_IND",aa:["-","1"]}],la:[{$:"node_in",ba:"oU",fa:["vec4"],ea:!1},{$:"node_out",ba:"oV",fa:["vec3"],ea:!1},{$:"node_out",ba:"oW",fa:["vec2"],ea:!1},{$:"node_out",ba:"oX",fa:["vec3"],ea:!1},{$:"node_out",ba:"oY",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"oW = vec2 ( u_light_positions [ LAMP_IND ] . w , u_light_color_intensities [ LAMP_IND ] . w ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["LAMP_TYPE","HEMI",
{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:["oY","=","_0_5",";"]}]},{$:"node_else",ja:[{$:"txt",aa:["oY","=","_0_0",";"]}]}]},{$:"txt",aa:"oX = u_light_color_intensities [ LAMP_IND ] . xyz ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["LAMP_SHADOW_MAP_IND",1,{$:"negative_expr",ia:1},{$:"non_equal_expr",ia:2}],ja:[{$:"txt",aa:"oX *= oU [ LAMP_SHADOW_MAP_IND ] ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["LAMP_TYPE","SPOT",{$:"equal_expr",ia:2},"LAMP_TYPE","POINT",{$:"equal_expr",ia:2},{$:"logical_or_expr",
ia:2}],ja:[{$:"txt",aa:"vec3 oZ = u_light_positions [ LAMP_IND ] . xyz ; oV = oZ - ow ; float aM = length ( oV ) ; oX *= LAMP_LIGHT_DIST / ( LAMP_LIGHT_DIST + aM * aM ) ; oV = normalize ( oV ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["LAMP_TYPE","SPOT",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"vec3 pa = u_light_directions [ LAMP_IND ] ; float pb = dot ( oV , pa ) ; pb *= smoothstep ( _0_0 , _1_0 , ( pb - LAMP_SPOT_SIZE ) / LAMP_SPOT_BLEND ) ; oX *= pb ;".split(" ")}]}]}]},{$:"node_else",ja:[{$:"txt",
aa:"oV = u_light_directions [ LAMP_IND ] ;".split(" ")}]}]}]},{$:"node",ba:"DIFFUSE_FRESNEL",ma:[{$:"node_var",ba:"MAT_USE_TBN_SHADING",aa:["0"]}],la:[{$:"node_in",ba:"pc",fa:["vec3"],ea:!1},{$:"node_in",ba:"pd",fa:["vec2"],ea:!1},{$:"node_in",ba:"pe",fa:["vec3"],ea:!1},{$:"node_in",ba:"pf",fa:["float"],ea:!1},{$:"node_in",ba:"pg",fa:["vec2"],ea:!1},{$:"node_out",ba:"ph",fa:["float"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["MAT_USE_TBN_SHADING"],ja:[{$:"txt",aa:"vec3 pi = cross ( pc , k . xyz ) ; pe = cross ( pi , k . xyz ) ; pe = - normalize ( pe ) ;".split(" ")}]}]},
{$:"txt",aa:"ph = _0_0 ; if ( pd . r != _0_0 ) { float pj = ( _1_0 - pf ) * dot ( pe , pc ) + pf ; if ( pg [ 0 ] == _0_0 ) { ph = _1_0 ; } else { float t = _1_0 + abs ( pj ) ; t = pg [ 1 ] + ( _1_0 - pg [ 1 ] ) * pow ( t , pg [ 0 ] ) ; ph = clamp ( t , _0_0 , _1_0 ) ; } ph = max ( ph , _0_0 ) ; }".split(" ")}]},{$:"node",ba:"DIFFUSE_LAMBERT",ma:[{$:"node_var",ba:"MAT_USE_TBN_SHADING",aa:["0"]}],la:[{$:"node_in",ba:"pk",fa:["vec3"],ea:!1},{$:"node_in",ba:"pl",fa:["vec2"],ea:!1},{$:"node_in",ba:"pm",
fa:["vec3"],ea:!1},{$:"node_in",ba:"pn",fa:["float"],ea:!1},{$:"node_out",ba:"po",fa:["float"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["MAT_USE_TBN_SHADING"],ja:[{$:"txt",aa:"vec3 pi = cross ( pk , k . xyz ) ; pm = cross ( pi , k . xyz ) ; pm = - normalize ( pm ) ;".split(" ")}]}]},{$:"txt",aa:"po = _0_0 ; if ( pl . r != _0_0 ) { float pj = ( _1_0 - pn ) * dot ( pm , pk ) + pn ; po = max ( pj , _0_0 ) ; }".split(" ")}]},{$:"node",ba:"DIFFUSE_OREN_NAYAR",ma:[{$:"node_var",ba:"MAT_USE_TBN_SHADING",
aa:["0"]}],la:[{$:"node_in",ba:"pr",fa:["vec3"],ea:!1},{$:"node_in",ba:"pu",fa:["vec2"],ea:!1},{$:"node_in",ba:"pv",fa:["vec3"],ea:!1},{$:"node_in",ba:"pw",fa:["float"],ea:!1},{$:"node_in",ba:"px",fa:["vec2"],ea:!1},{$:"node_out",ba:"py",fa:["float"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["MAT_USE_TBN_SHADING"],ja:[{$:"txt",aa:"vec3 pi = cross ( pr , k . xyz ) ; pv = cross ( pi , k . xyz ) ; pv = - normalize ( pv ) ;".split(" ")}]}]},{$:"txt",aa:"py = _0_0 ; if ( pu . r != _0_0 ) { float pj = ( _1_0 - pw ) * dot ( pv , pr ) + pw ; if ( px [ 0 ] > _0_0 ) { float pz = max ( dot ( pv , oy ) , _0_0 ) ; float pA = px [ 0 ] * px [ 0 ] ; float cG = _1_0 - _0_5 * ( pA / ( pA + 0.33 ) ) ; vec3 pB = pr - pj * pv ; vec3 pC = oy - pz * pv ; if ( length ( pB ) == _0_0 || length ( pC ) == _0_0 || abs ( pj ) > _1_0 || abs ( pz ) > _1_0 ) py = pj * cG ; else { float pD = acos ( pj ) ; float pE = acos ( pz ) ; vec3 pF = normalize ( pB ) ; vec3 pG = normalize ( pC ) ; float a , b ; a = max ( pD , pE ) ; b = min ( pD , pE ) ; b *= 0.95 ; float t = max ( dot ( pF , pG ) , _0_0 ) ; float hS = 0.45 * ( pA / ( pA + 0.09 ) ) ; py = pj * ( cG + ( hS * t * sin ( a ) * tan ( b ) ) ) ; } } else py = pj ; py = max ( py , _0_0 ) ; }".split(" ")}]},
{$:"node",ba:"DIFFUSE_MINNAERT",ma:[{$:"node_var",ba:"MAT_USE_TBN_SHADING",aa:["0"]}],la:[{$:"node_in",ba:"pH",fa:["vec3"],ea:!1},{$:"node_in",ba:"pI",fa:["vec2"],ea:!1},{$:"node_in",ba:"pJ",fa:["vec3"],ea:!1},{$:"node_in",ba:"pK",fa:["float"],ea:!1},{$:"node_in",ba:"pL",fa:["vec2"],ea:!1},{$:"node_out",ba:"pM",fa:["float"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["MAT_USE_TBN_SHADING"],ja:[{$:"txt",aa:"vec3 pi = cross ( pH , k . xyz ) ; pJ = cross ( pi , k . xyz ) ; pJ = - normalize ( pJ ) ;".split(" ")}]}]},
{$:"txt",aa:"pM = _0_0 ; if ( pI . r != _0_0 ) { float pj = ( _1_0 - pK ) * dot ( pJ , pH ) + pK ; float pz = max ( dot ( pJ , oy ) , _0_0 ) ; if ( pL [ 0 ] <= _1_0 ) pM = pj * pow ( max ( pz * pj , 0.1 ) , pL [ 0 ] - _1_0 ) ; else pM = pj * pow ( 1.0001 - pz , pL [ 0 ] - _1_0 ) ; pM = max ( pM , _0_0 ) ; }".split(" ")}]},{$:"node",ba:"DIFFUSE_TOON",ma:[{$:"node_var",ba:"MAT_USE_TBN_SHADING",aa:["0"]}],la:[{$:"node_in",ba:"pN",fa:["vec3"],ea:!1},{$:"node_in",ba:"pO",fa:["vec2"],ea:!1},{$:"node_in",
ba:"pP",fa:["vec3"],ea:!1},{$:"node_in",ba:"pQ",fa:["float"],ea:!1},{$:"node_in",ba:"pR",fa:["vec2"],ea:!1},{$:"node_out",ba:"pS",fa:["float"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["MAT_USE_TBN_SHADING"],ja:[{$:"txt",aa:"vec3 pi = cross ( pN , k . xyz ) ; pP = cross ( pi , k . xyz ) ; pP = - normalize ( pP ) ;".split(" ")}]}]},{$:"txt",aa:"pS = _0_0 ; if ( pO . r != _0_0 ) { float pj = ( _1_0 - pQ ) * dot ( pP , pN ) + pQ ; float pT = acos ( pj ) ; if ( pT < pR [ 0 ] ) pS = _1_0 ; else if ( pT > ( pR [ 0 ] + pR [ 1 ] ) || pR [ 1 ] == _0_0 ) pS = _0_0 ; else pS = _1_0 - ( ( pT - pR [ 0 ] ) / pR [ 1 ] ) ; pS = max ( pS , _0_0 ) ; }".split(" ")}]},
{$:"node",ba:"SPECULAR_PHONG",ma:[{$:"node_var",ba:"MAT_USE_TBN_SHADING",aa:["0"]}],la:[{$:"node_in",ba:"pU",fa:["vec3"],ea:!1},{$:"node_in",ba:"pV",fa:["vec2"],ea:!1},{$:"node_in",ba:"pW",fa:["vec3"],ea:!1},{$:"node_in",ba:"pX",fa:["float"],ea:!1},{$:"node_in",ba:"pY",fa:["vec2"],ea:!1},{$:"node_out",ba:"pZ",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"pZ = _0_0 ; if ( pV . g == _1_0 ) { vec3 p_ = normalize ( pU + oy ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MAT_USE_TBN_SHADING"],ja:[{$:"txt",
aa:"if ( pX == _0_0 ) { pZ = dot ( k . xyz , p_ ) ; pZ = sqrt ( _1_0 - pZ * pZ ) ; }".split(" ")}]},{$:"node_else",ja:[{$:"txt",aa:"pZ = ( _1_0 - pX ) * max ( dot ( pW , p_ ) , _0_0 ) + pX ;".split(" ")}]}]},{$:"txt",aa:"pZ = pow ( pZ , pY [ 0 ] ) ; }".split(" ")}]},{$:"node",ba:"SPECULAR_COOKTORR",ma:[{$:"node_var",ba:"MAT_USE_TBN_SHADING",aa:["0"]}],la:[{$:"node_in",ba:"qa",fa:["vec3"],ea:!1},{$:"node_in",ba:"qb",fa:["vec2"],ea:!1},{$:"node_in",ba:"qc",fa:["vec3"],ea:!1},{$:"node_in",ba:"qd",fa:["float"],
ea:!1},{$:"node_in",ba:"qe",fa:["vec2"],ea:!1},{$:"node_out",ba:"qf",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"qf = _0_0 ; if ( qb . g != _0_0 ) { vec3 p_ = normalize ( qa + oy ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MAT_USE_TBN_SHADING"],ja:[{$:"txt",aa:"if ( qd == _0_0 ) { qf = dot ( B . xyz , p_ ) ; qf = sqrt ( _1_0 - qf * qf ) ; }".split(" ")}]},{$:"node_else",ja:[{$:"txt",aa:"qf = max ( dot ( qc , p_ ) , _0_0 ) ; qf = ( _1_0 - qd ) * qf + qd ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",
ga:["MAT_USE_TBN_SHADING"],ja:[{$:"txt",aa:"float pz = max ( dot ( B . xyz , oy ) , _0_0 ) ; pz = sqrt ( _1_0 - pz * pz ) ;".split(" ")}]},{$:"node_else",ja:[{$:"txt",aa:"float pz = max ( dot ( qc , oy ) , _0_0 ) ;".split(" ")}]}]},{$:"txt",aa:"qf = pow ( qf , qe [ 0 ] ) ; qf = qf / ( 0.1 + pz ) ; }".split(" ")}]},{$:"node",ba:"SPECULAR_WARDISO",ma:[{$:"node_var",ba:"MAT_USE_TBN_SHADING",aa:["0"]}],la:[{$:"node_in",ba:"qg",fa:["vec3"],ea:!1},{$:"node_in",ba:"qh",fa:["vec2"],ea:!1},{$:"node_in",ba:"qi",
fa:["vec3"],ea:!1},{$:"node_in",ba:"qj",fa:["float"],ea:!1},{$:"node_in",ba:"qk",fa:["vec2"],ea:!1},{$:"node_out",ba:"ql",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"ql = _0_0 ; if ( qh . g == _1_0 ) { vec3 p_ = normalize ( qg + oy ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MAT_USE_TBN_SHADING"],ja:[{$:"txt",aa:"float qm = _0_0 ; float pz = _0_0 ; float qn = _0_0 ; if ( qj == _0_0 ) { qm = dot ( k . xyz , p_ ) ; pz = dot ( k . xyz , oy ) ; qn = dot ( k . xyz , qg ) ; qm = sqrt ( _1_0 - qm * qm ) ; pz = sqrt ( _1_0 - pz * pz ) ; qn = sqrt ( _1_0 - qn * qn ) ; }".split(" ")}]},
{$:"node_else",ja:[{$:"txt",aa:"float qm = max ( dot ( qi , p_ ) , 0.01 ) ; float pz = max ( dot ( qi , oy ) , 0.01 ) ; float qn = max ( dot ( qi , qg ) , 0.01 ) ;".split(" ")}]}]},{$:"txt",aa:"float bP = tan ( acos ( qm ) ) ; float L = max ( qk [ 0 ] , 0.01 ) ; ql = qn * ( _1_0 / ( 4.0 * M_PI * L * L ) ) * ( exp ( - ( bP * bP ) / ( L * L ) ) / ( sqrt ( pz * qn ) ) ) ; }".split(" ")}]},{$:"node",ba:"SPECULAR_TOON",ma:[{$:"node_var",ba:"MAT_USE_TBN_SHADING",aa:["0"]}],la:[{$:"node_in",ba:"qo",fa:["vec3"],
ea:!1},{$:"node_in",ba:"qr",fa:["vec2"],ea:!1},{$:"node_in",ba:"qu",fa:["vec3"],ea:!1},{$:"node_in",ba:"qv",fa:["float"],ea:!1},{$:"node_in",ba:"qw",fa:["vec2"],ea:!1},{$:"node_out",ba:"qx",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"qx = _0_0 ; if ( qr . g == _1_0 ) { vec3 co = normalize ( qo + oy ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MAT_USE_TBN_SHADING"],ja:[{$:"txt",aa:"float qy = dot ( co , k . xyz ) ; float bP = qw [ 0 ] + qw [ 1 ] ; if ( qv == _0_0 ) bP = acos ( sqrt ( _1_0 - qy * qy ) ) ;".split(" ")}]},
{$:"node_else",ja:[{$:"txt",aa:"float bP = acos ( dot ( co , qu ) ) ;".split(" ")}]}]},{$:"txt",aa:"if ( bP < qw [ 0 ] ) qx = _1_0 ; else if ( bP >= qw [ 0 ] + qw [ 1 ] || qw [ 1 ] == _0_0 ) qx = _0_0 ; else qx = _1_0 - ( bP - qw [ 0 ] ) / qw [ 1 ] ; }".split(" ")}]},{$:"node",ba:"SPECULAR_BLINN",ma:[{$:"node_var",ba:"MAT_USE_TBN_SHADING",aa:["0"]}],la:[{$:"node_in",ba:"qz",fa:["vec3"],ea:!1},{$:"node_in",ba:"qA",fa:["vec2"],ea:!1},{$:"node_in",ba:"qB",fa:["vec3"],ea:!1},{$:"node_in",ba:"qC",fa:["float"],
ea:!1},{$:"node_in",ba:"qD",fa:["vec2"],ea:!1},{$:"node_out",ba:"qE",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"qE = _0_0 ; if ( qA . g == _1_0 ) { if ( qD [ 0 ] < _1_0 || qD [ 1 ] == _0_0 ) qE = _0_0 ; else { if ( qD [ 1 ] < 100.0 ) qD [ 1 ] = sqrt ( _1_0 / qD [ 1 ] ) ; else qD [ 1 ] = 10.0 / qD [ 1 ] ; vec3 p_ = normalize ( oy + qz ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MAT_USE_TBN_SHADING"],ja:[{$:"txt",aa:"float qm = _0_0 ; if ( qC == _0_0 ) { float qH = dot ( k . xyz , p_ ) ; qm = sqrt ( _1_0 - qH * qH ) ; }".split(" ")}]},
{$:"node_else",ja:[{$:"txt",aa:"float qm = ( _1_0 - qC ) * max ( dot ( qB , p_ ) , _0_0 ) + qC ;".split(" ")}]}]},{$:"txt",aa:"if ( qm < _0_0 ) qE = _0_0 ; else { float pz = max ( dot ( qB , oy ) , 0.01 ) ; float qn = dot ( qB , qz ) ; if ( qn <= 0.01 ) qE = _0_0 ; else { float qI = max ( dot ( oy , p_ ) , 0.01 ) ; float a = _1_0 ; float b = ( 2.0 * qm * pz ) / qI ; float dx = ( 2.0 * qm * qn ) / qI ; float g = min ( min ( a , b ) , dx ) ; float p = sqrt ( pow ( qD [ 0 ] , 2.0 ) + pow ( qI , 2.0 ) - _1_0 ) ; float mm = pow ( p - qI , 2.0 ) / pow ( p + qI , 2.0 ) * ( _1_0 + pow ( qI * ( p + qI ) - _1_0 , 2.0 ) / pow ( qI * ( p - qI ) + _1_0 , 2.0 ) ) ; float pT = acos ( qm ) ; qE = max ( mm * g * exp ( - pow ( pT , 2.0 ) / ( 2.0 * pow ( qD [ 1 ] , 2.0 ) ) ) , _0_0 ) ; } } } }".split(" ")}]},
{$:"node",ba:"LIGHTING_APPLY",ma:[],la:[{$:"node_in",ba:"qJ",fa:["vec4"],ea:!1},{$:"node_in",ba:"qK",fa:["vec3"],ea:!1},{$:"node_in",ba:"qL",fa:["float"],ea:!1},{$:"node_in",ba:"qM",fa:["float"],ea:!1},{$:"node_in",ba:"qN",fa:["vec3"],ea:!1},{$:"node_in",ba:"qO",fa:["vec3"],ea:!1},{$:"node_in",ba:"qP",fa:["vec4"],ea:!1},{$:"node_in",ba:"qQ",fa:["vec3"],ea:!1},{$:"node_in",ba:"qR",fa:["vec3"],ea:!1},{$:"node_in",ba:"qS",fa:["vec3"],ea:!1},{$:"node_in",ba:"qT",fa:["float"],ea:!1},{$:"node_out",ba:"qU",
fa:["vec4"],ea:!1},{$:"node_out",ba:"qV",fa:["vec3"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["USE_NODE_B4W_TRANSLUCENCY"],ja:[{$:"txt",aa:"if ( dot ( qN , qO ) * dot ( oy , qO ) < _0_0 ) { float Fc = qP . x ; float Fd = qP . y ; float Fe = qP . z ; float Ff = qP . w ; float Fg = clamp ( abs ( dot ( qN , qO ) ) , _0_0 , _1_0 ) ; float Fh = clamp ( dot ( oy , - qN ) , _0_0 , _1_0 ) ; float Fi = pow ( Fh , Fd ) ; qU = qJ + qT * vec4 ( qS * Fg * pow ( qQ , vec3 ( Fc ) ) , _1_0 ) ; qU += Fe * mix ( vec4 ( qQ , _1_0 ) , vec4 ( _1_0 ) , Ff ) * qT * vec4 ( qS * Fg * vec3 ( Fi ) , _1_0 ) ; } else { qU = qJ + vec4 ( qS * qQ * qL , qM ) ; }".split(" ")}]},
{$:"node_else",ja:[{$:"txt",aa:"qU = qJ + vec4 ( qS * qQ * qL , qM ) ;".split(" ")}]}]},{$:"txt",aa:"qV = qK + qS * qR * qM ;".split(" ")}]},{$:"node",ba:"RGB",ma:[{$:"node_var",ba:"RGB_IND",aa:["0"]}],la:[{$:"node_out",ba:"Fj",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"Fj = u_node_rgbs [ RGB_IND ] ;".split(" ")}]},{$:"node",ba:"RGBTOBW",ma:[],la:[{$:"node_in",ba:"Fk",fa:["vec3"],ea:!1},{$:"node_out",ba:"Fl",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"Fl = dot ( Fk , vec3 ( 0.35 , 0.45 , 0.2 ) ) ;".split(" ")}]},
{$:"node",ba:"SEPRGB",ma:[],la:[{$:"node_in",ba:"Fm",fa:["vec3"],ea:!1},{$:"node_out",ba:"Fn",fa:["float"],ea:!0},{$:"node_out",ba:"Fo",fa:["float"],ea:!0},{$:"node_out",ba:"Fp",fa:["float"],ea:!0}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Fn"],ja:[{$:"txt",aa:"Fn = Fm . r ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Fo"],ja:[{$:"txt",aa:"Fo = Fm . g ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Fp"],ja:[{$:"txt",aa:"Fp = Fm . b ;".split(" ")}]}]}]},{$:"node",
ba:"SEPHSV",ma:[],la:[{$:"node_in",ba:"Fq",fa:["vec3"],ea:!1},{$:"node_out",ba:"Fr",fa:["float"],ea:!0},{$:"node_out",ba:"Fs",fa:["float"],ea:!0},{$:"node_out",ba:"Ft",fa:["float"],ea:!0}],ja:[{$:"txt",aa:"vec3 Fu = kj ( Fq ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Fr"],ja:[{$:"txt",aa:"Fr = Fu . r ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Fs"],ja:[{$:"txt",aa:"Fs = Fu . g ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Ft"],ja:[{$:"txt",aa:"Ft = Fu . b ;".split(" ")}]}]}]},
{$:"node",ba:"SQUEEZE",ma:[],la:[{$:"node_in",ba:"Fv",fa:["float"],ea:!1},{$:"node_in",ba:"Fw",fa:["float"],ea:!1},{$:"node_in",ba:"Fx",fa:["float"],ea:!1},{$:"node_out",ba:"Fy",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"Fy = _1_0 / ( _1_0 + pow ( 2.71828183 , - ( Fv - Fx ) * Fw ) ) ;".split(" ")}]},{$:"node",ba:"GAMMA",ma:[],la:[{$:"node_in",ba:"Fz",fa:["vec3"],ea:!1},{$:"node_in",ba:"FA",fa:["float"],ea:!1},{$:"node_out",ba:"FB",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"FB = Fz ; if ( FB . x > _0_0 ) FB . x = pow ( Fz . x , FA ) ; if ( FB . y > _0_0 ) FB . y = pow ( Fz . y , FA ) ; if ( FB . z > _0_0 ) FB . z = pow ( Fz . z , FA ) ;".split(" ")}]},
{$:"node",ba:"B4W_SRGB_TO_LINEAR",ma:[],la:[{$:"node_in",ba:"FC",fa:["vec3"],ea:!1},{$:"node_out",ba:"FD",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"FD = max ( vec3 ( _0_0 ) , FC ) ; FD = pow ( FD , vec3 ( 2.2 ) ) ;".split(" ")}]},{$:"node",ba:"B4W_LINEAR_TO_SRGB",ma:[],la:[{$:"node_in",ba:"FE",fa:["vec3"],ea:!1},{$:"node_out",ba:"FF",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"FF = max ( vec3 ( _0_0 ) , FE ) ; FF = pow ( FF , vec3 ( _1_0 / 2.2 ) ) ;".split(" ")}]},{$:"node",ba:"TEXTURE_EMPTY",ma:[],la:[{$:"node_out",
ba:"FG",fa:["vec3"],ea:!1},{$:"node_out",ba:"FH",fa:["vec3"],ea:!1},{$:"node_out",ba:"FI",fa:["float"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_FG"],ja:[{$:"txt",aa:"FG [ 2 ] = FG [ 1 ] = FG [ 0 ] = _0_0 ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_FH"],ja:[{$:"txt",aa:"FH [ 2 ] = FH [ 1 ] = FH [ 0 ] = _0_0 ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_FI"],ja:[{$:"txt",aa:["FI","=","_0_0",";"]}]}]}]},{$:"node",ba:"TEXTURE_ENVIRONMENT",ma:[],la:[{$:"node_in",
ba:"Il",fa:["vec3"],ea:!1},{$:"node_out",ba:"Im",fa:["vec3"],ea:!0},{$:"node_out",ba:"In",fa:["float"],ea:!0},{$:"node_param",ba:"node_TEXTURE_ENVIRONMENT_var_texture",fa:["uniform","samplerCube"],ea:!1}],ja:[{$:"txt",aa:"vec4 BN = GLSL_TEXTURE_CUBE ( node_TEXTURE_ENVIRONMENT_var_texture , Il ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Im"],ja:[{$:"txt",aa:"Im = BN . xyz ; bG ( Im ) ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_In"],ja:[{$:"txt",aa:"In = BN . w ;".split(" ")}]}]}]},
{$:"node",ba:"TEXTURE_COLOR",ma:[{$:"node_var",ba:"NON_COLOR",aa:["0"]},{$:"node_var",ba:"USE_uv2",aa:["0"]},{$:"node_var",ba:"USE_uv3",aa:["0"]},{$:"node_var",ba:"USE_uv4",aa:["0"]}],la:[{$:"node_in",ba:"FT",fa:["vec3"],ea:!0},{$:"node_in",ba:"FU",fa:["vec3"],ea:!0},{$:"node_in",ba:"FV",fa:["vec3"],ea:!0},{$:"node_in",ba:"FW",fa:["vec3"],ea:!0},{$:"node_out",ba:"FX",fa:["vec3"],ea:!0},{$:"node_out",ba:"FY",fa:["float"],ea:!0},{$:"node_out",ba:"FZ",fa:["vec3"],ea:!0},{$:"node_out",ba:"F_",fa:["float"],
ea:!0},{$:"node_out",ba:"Ga",fa:["vec3"],ea:!0},{$:"node_out",ba:"Gb",fa:["float"],ea:!0},{$:"node_out",ba:"Gc",fa:["vec3"],ea:!0},{$:"node_out",ba:"Gd",fa:["float"],ea:!0},{$:"node_param",ba:"node_TEXTURE_COLOR_var_texture",fa:["uniform","sampler2D"],ea:!1}],ja:[{$:"txt",aa:"vec4 BN = GLSL_TEXTURE ( node_TEXTURE_COLOR_var_texture , so ( FT ) ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_FX"],ja:[{$:"txt",aa:"FX = BN . xyz ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["NON_COLOR",
{$:"logic_negative_expr",ia:1}],ja:[{$:"txt",aa:["bG","(","FX",")",";"]}]}]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_FY"],ja:[{$:"txt",aa:"FY = BN . w ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_uv2"],ja:[{$:"txt",aa:"BN = GLSL_TEXTURE ( node_TEXTURE_COLOR_var_texture , so ( FU ) ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_FZ"],ja:[{$:"txt",aa:"FZ = BN . xyz ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["NON_COLOR",{$:"logic_negative_expr",ia:1}],ja:[{$:"txt",
aa:["bG","(","FZ",")",";"]}]}]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_F_"],ja:[{$:"txt",aa:"F_ = BN . w ;".split(" ")}]}]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_uv3"],ja:[{$:"txt",aa:"BN = GLSL_TEXTURE ( node_TEXTURE_COLOR_var_texture , so ( FV ) ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Ga"],ja:[{$:"txt",aa:"Ga = BN . xyz ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["NON_COLOR",{$:"logic_negative_expr",ia:1}],ja:[{$:"txt",aa:["bG","(","Ga",")",";"]}]}]}]}]},
{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Gb"],ja:[{$:"txt",aa:"Gb = BN . w ;".split(" ")}]}]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_uv4"],ja:[{$:"txt",aa:"BN = GLSL_TEXTURE ( node_TEXTURE_COLOR_var_texture , so ( FW ) ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Gc"],ja:[{$:"txt",aa:"Gc = BN . xyz ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["NON_COLOR",{$:"logic_negative_expr",ia:1}],ja:[{$:"txt",aa:["bG","(","Gc",")",";"]}]}]}]}]},{$:"node_cond",da:[{$:"node_if",
ga:["USE_OUT_Gd"],ja:[{$:"txt",aa:"Gd = BN . w ;".split(" ")}]}]}]}]}]},{$:"node",ba:"TEXTURE_NORMAL",ma:[{$:"node_var",ba:"USE_uv2",aa:["0"]},{$:"node_var",ba:"USE_uv3",aa:["0"]},{$:"node_var",ba:"USE_uv4",aa:["0"]}],la:[{$:"node_in",ba:"Ge",fa:["vec3"],ea:!0},{$:"node_in",ba:"Gf",fa:["vec3"],ea:!0},{$:"node_in",ba:"Gg",fa:["vec3"],ea:!0},{$:"node_in",ba:"Gh",fa:["vec3"],ea:!0},{$:"node_out",ba:"Gi",fa:["vec3"],ea:!0},{$:"node_out",ba:"Gj",fa:["float"],ea:!0},{$:"node_out",ba:"Gk",fa:["vec3"],ea:!0},
{$:"node_out",ba:"Gl",fa:["float"],ea:!0},{$:"node_out",ba:"Gm",fa:["vec3"],ea:!0},{$:"node_out",ba:"Gn",fa:["float"],ea:!0},{$:"node_out",ba:"Go",fa:["vec3"],ea:!0},{$:"node_out",ba:"Gp",fa:["float"],ea:!0},{$:"node_param",ba:"node_TEXTURE_NORMAL_var_texture",fa:["uniform","sampler2D"],ea:!1}],ja:[{$:"txt",aa:"vec4 BN = GLSL_TEXTURE ( node_TEXTURE_NORMAL_var_texture , so ( Ge ) ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Gi"],ja:[{$:"txt",aa:"Gi = normalize ( sO * ( BN . xyz - _0_5 ) ) ;".split(" ")}]}]},
{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Gj"],ja:[{$:"txt",aa:"Gj = BN . w ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_uv2"],ja:[{$:"txt",aa:"BN = GLSL_TEXTURE ( node_TEXTURE_NORMAL_var_texture , so ( Gf ) ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Gk"],ja:[{$:"txt",aa:"Gk = normalize ( sO * ( BN . xyz - _0_5 ) ) ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Gl"],ja:[{$:"txt",aa:"Gl = BN . w ;".split(" ")}]}]}]}]},{$:"node_cond",da:[{$:"node_if",
ga:["USE_uv3"],ja:[{$:"txt",aa:"BN = GLSL_TEXTURE ( node_TEXTURE_NORMAL_var_texture , so ( Gg ) ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Gm"],ja:[{$:"txt",aa:"Gm = normalize ( sO * ( BN . xyz - _0_5 ) ) ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Gn"],ja:[{$:"txt",aa:"Gn = BN . w ;".split(" ")}]}]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_uv4"],ja:[{$:"txt",aa:"BN = GLSL_TEXTURE ( node_TEXTURE_NORMAL_var_texture , so ( Gh ) ) ;".split(" ")},{$:"node_cond",
da:[{$:"node_if",ga:["USE_OUT_Go"],ja:[{$:"txt",aa:"Go = normalize ( sO * ( BN . xyz - _0_5 ) ) ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Gp"],ja:[{$:"txt",aa:"Gp = BN . w ;".split(" ")}]}]}]}]}]},{$:"node",ba:"VALUE",ma:[{$:"node_var",ba:"VALUE_ROW_IND",aa:["0"]},{$:"node_var",ba:"VALUE_COL_IND",aa:["0"]}],la:[{$:"node_out",ba:"Gq",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"Gq = u_node_values [ VALUE_ROW_IND ] [ VALUE_COL_IND ] ;".split(" ")}]},{$:"node",ba:"VECT_MATH_ADD",ma:[],
la:[{$:"node_in",ba:"Gr",fa:["vec3"],ea:!1},{$:"node_in",ba:"Gs",fa:["vec3"],ea:!1},{$:"node_out",ba:"Gt",fa:["vec3"],ea:!1},{$:"node_out",ba:"Gu",fa:["float"],ea:!0}],ja:[{$:"txt",aa:"Gt = Gr + Gs ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Gu"],ja:[{$:"txt",aa:"Gu = ( abs ( Gt [ 0 ] ) + abs ( Gt [ 1 ] ) + abs ( Gt [ 2 ] ) ) / 3.0 ;".split(" ")}]}]}]},{$:"node",ba:"VECT_MATH_SUBTRACT",ma:[],la:[{$:"node_in",ba:"Gv",fa:["vec3"],ea:!1},{$:"node_in",ba:"Gw",fa:["vec3"],ea:!1},{$:"node_out",
ba:"Gx",fa:["vec3"],ea:!1},{$:"node_out",ba:"Gy",fa:["float"],ea:!0}],ja:[{$:"txt",aa:"Gx = Gv - Gw ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Gy"],ja:[{$:"txt",aa:"Gy = ( abs ( Gx [ 0 ] ) + abs ( Gx [ 1 ] ) + abs ( Gx [ 2 ] ) ) / 3.0 ;".split(" ")}]}]}]},{$:"node",ba:"VECT_MATH_AVERAGE",ma:[],la:[{$:"node_in",ba:"Gz",fa:["vec3"],ea:!1},{$:"node_in",ba:"GA",fa:["vec3"],ea:!1},{$:"node_out",ba:"GB",fa:["vec3"],ea:!1},{$:"node_out",ba:"GC",fa:["float"],ea:!0}],ja:[{$:"txt",aa:"GB = Gz + GA ;".split(" ")},
{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_GC"],ja:[{$:"txt",aa:"GC = length ( GB ) ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_GB"],ja:[{$:"txt",aa:"GB = normalize ( GB ) ;".split(" ")}]}]}]},{$:"node",ba:"VECT_MATH_DOT_PRODUCT",ma:[],la:[{$:"node_in",ba:"GD",fa:["vec3"],ea:!1},{$:"node_in",ba:"GE",fa:["vec3"],ea:!1},{$:"node_out",ba:"GF",fa:["vec3"],ea:!1},{$:"node_out",ba:"GG",fa:["float"],ea:!0}],ja:[{$:"txt",aa:"GF = vec3 ( _0_0 ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",
ga:["USE_OUT_GG"],ja:[{$:"txt",aa:"GG = dot ( GD , GE ) ;".split(" ")}]}]}]},{$:"node",ba:"VECT_MATH_CROSS_PRODUCT",ma:[],la:[{$:"node_in",ba:"GH",fa:["vec3"],ea:!1},{$:"node_in",ba:"GI",fa:["vec3"],ea:!1},{$:"node_out",ba:"GJ",fa:["vec3"],ea:!1},{$:"node_out",ba:"GK",fa:["float"],ea:!0}],ja:[{$:"txt",aa:"GJ = cross ( GH , GI ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_GK"],ja:[{$:"txt",aa:"GK = length ( GJ ) ;".split(" ")}]}]}]},{$:"node",ba:"VECT_MATH_NORMALIZE",ma:[],la:[{$:"node_in",
ba:"GL",fa:["vec3"],ea:!1},{$:"node_in",ba:"GM",fa:["vec3"],ea:!1},{$:"node_out",ba:"GN",fa:["vec3"],ea:!1},{$:"node_out",ba:"GO",fa:["float"],ea:!0}],ja:[{$:"txt",aa:"GN = normalize ( GL ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_GO"],ja:[{$:"txt",aa:"GO = length ( GL ) ;".split(" ")}]}]},{$:"txt",aa:["GM",";"]}]},{$:"node",ba:"B4W_REFLECT",ma:[],la:[{$:"node_in",ba:"GV",fa:["vec3"],ea:!1},{$:"node_in",ba:"GW",fa:["vec3"],ea:!1},{$:"node_out",ba:"GX",fa:["vec3"],ea:!1}],ja:[{$:"txt",
aa:"GX = reflect ( _ ( u_view_tsr_inverse , GV ) , GW ) ;".split(" ")}]},{$:"node",ba:"B4W_REFLECT_WORLD",ma:[],la:[{$:"node_in",ba:"GY",fa:["vec3"],ea:!1},{$:"node_out",ba:"GZ",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"vec3 Io = - oy . xyz ; GZ = reflect ( Io , GY ) ;".split(" ")}]},{$:"node",ba:"B4W_PARALLAX",ma:[],la:[{$:"node_in",ba:"G_",fa:["vec3"],ea:!1},{$:"node_in",ba:"Ha",fa:["float"],ea:!1},{$:"node_in",ba:"Hb",fa:["const","float"],ea:!1},{$:"node_in",ba:"Hc",fa:["const","float"],ea:!1},{$:"node_out",
ba:"Hd",fa:["vec3"],ea:!1},{$:"node_param",ba:"node_B4W_PARALLAX_var_texture",fa:["uniform","sampler2D"],ea:!1}],ja:[{$:"txt",aa:"float bS = length ( sR ) ; if ( bS < Hc ) { vec2 ce = so ( G_ ) ; float ci = clamp ( _0_5 * ( Hc - bS ) , _0_0 , _1_0 ) ; float hK = Ha * ci ; vec3 ck = normalize ( oy * sO ) ; float cl = _1_0 / Hb ; vec2 cm = ck . xy * hK / ( Hb * ck . z ) ; float cn = _1_0 ; float co = GLSL_TEXTURE ( node_B4W_PARALLAX_var_texture , ce ) . a ; for ( float cq = 1.0 ; cq <= Hb ; cq ++ ) { if ( co < cn ) { cn -= cl ; ce -= cm ; co = GLSL_TEXTURE ( node_B4W_PARALLAX_var_texture , ce ) . a ; } } vec2 cr = ce + cm ; float cs = GLSL_TEXTURE ( node_B4W_PARALLAX_var_texture , cr ) . a - ( cn + cl ) ; float ct = co - cn ; float cu = ct / ( ct - cs ) ; ce = cu * cr + ( _1_0 - cu ) * ce ; Hd = sn ( ce ) ; } else Hd = G_ ;".split(" ")}]},
{$:"node",ba:"B4W_CLAMP",ma:[],la:[{$:"node_in",ba:"He",fa:["vec3"],ea:!1},{$:"node_out",ba:"Hf",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"Hf = clamp ( He , _0_0 , _1_0 ) ;".split(" ")}]},{$:"node",ba:"B4W_REFRACTION",ma:[],la:[{$:"node_in",ba:"Hg",fa:["vec3"],ea:!1},{$:"node_in",ba:"Hh",fa:["float"],ea:!1},{$:"node_out",ba:"Hi",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:["Hi","=","Hg",";"]}]},{$:"node",ba:"B4W_TRANSLUCENCY",ma:[],la:[{$:"node_in",ba:"Hj",fa:["float"],ea:!1},{$:"node_in",ba:"Hk",fa:["float"],
ea:!1},{$:"node_in",ba:"Hl",fa:["float"],ea:!1},{$:"node_in",ba:"Hm",fa:["float"],ea:!1},{$:"node_in",ba:"Hn",fa:["float"],ea:!1},{$:"node_out",ba:"Ho",fa:["float"],ea:!0},{$:"node_out",ba:"Hp",fa:["vec4"],ea:!0}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Ho"],ja:[{$:"txt",aa:["Ho","=","Hj",";"]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Hp"],ja:[{$:"txt",aa:"Hp = vec4 ( Hk , Hl , Hm , Hn ) ;".split(" ")}]}]}]},{$:"node",ba:"B4W_TIME",ma:[],la:[{$:"node_out",ba:"Hq",fa:["float"],ea:!1}],
ja:[{$:"txt",aa:["Hq","=","u_time",";"]}]},{$:"node",ba:"B4W_SMOOTHSTEP",ma:[],la:[{$:"node_in",ba:"Hr",fa:["float"],ea:!1},{$:"node_in",ba:"Hs",fa:["float"],ea:!1},{$:"node_in",ba:"Ht",fa:["float"],ea:!1},{$:"node_out",ba:"Hu",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"Hu = smoothstep ( Hs , Ht , Hr ) ;".split(" ")}]},{$:"node",ba:"B4W_GLOW_OUTPUT",ma:[],la:[{$:"node_in",ba:"Hv",fa:["vec3"],ea:!1},{$:"node_in",ba:"Hw",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"E = Hv ; I = Hw ;".split(" ")}]},{$:"node",ba:"B4W_VECTOSCAL",
ma:[],la:[{$:"node_in",ba:"Hx",fa:["vec3"],ea:!1},{$:"node_out",ba:"Hy",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"Hy = ( Hx . r + Hx . g + Hx . b ) / 3.0 ;".split(" ")}]},{$:"node",ba:"B4W_SCALTOVEC",ma:[],la:[{$:"node_in",ba:"Hz",fa:["float"],ea:!1},{$:"node_out",ba:"HA",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"HA [ 0 ] = Hz ; HA [ 1 ] = Hz ; HA [ 2 ] = Hz ;".split(" ")}]},{$:"nodes_global"},{$:"txt",aa:"void J ( in vec3 oy , out vec3 E , out vec3 F , out vec3 G , out vec4 H , out float I ) { E = vec3 ( _0_0 ) ; F = vec3 ( _0_0 ) ; G = vec3 ( _0_0 ) ; H = vec4 ( _0_0 ) ; I = _0_0 ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","USE_NODE_TEX_COORD_NO","USE_NODE_NORMAL_MAP","USE_NODE_BSDF_BEGIN","USE_NODE_FRESNEL","USE_NODE_TEX_COORD_RE","USE_NODE_LAYER_WEIGHT","USE_NODE_BUMP",{$:"logical_or_expr",ia:11}],ha:{$:"grp",da:[{$:"txt",aa:["vec3","sL","=","j",";"]},{$:"cond",da:[{$:"if",ga:["DOUBLE_SIDED_LIGHTING","USE_NODE_GEOMETRY_NO",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["REFLECTION_PASS","REFL_PASS_PLANE",
{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"if ( gl_FrontFacing == false )".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["if","(","gl_FrontFacing",")"]}]}}]},{$:"txt",aa:"sL = sL ; else sL = - sL ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_NORMAL_MAP"],ha:{$:"grp",da:[{$:"txt",aa:["vec3","sM","=","sL",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["DOUBLE_SIDED_LIGHTING","USE_NODE_GEOMETRY_NO","USE_NODE_TEXTURE_NORMAL","USE_NODE_B4W_PARALLAX",{$:"logical_or_expr",ia:4}],ha:{$:"grp",
da:[{$:"txt",aa:"vec3 sN = normalize ( sL ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["DOUBLE_SIDED_LIGHTING"],ha:{$:"grp",da:[{$:"txt",aa:["vec3","ox","=","sN",";"]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec3 ox = normalize ( j ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_GEOMETRY_NO"],ha:{$:"grp",da:[{$:"txt",aa:["vec3","sK","=","sN",";"]}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["CALC_TBN_SPACE"],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["USE_NODE_TEXTURE_NORMAL","USE_NODE_B4W_PARALLAX",
{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 W = cross ( sN , k . xyz ) * k . w ; mat3 sO = mat3 ( k . xyz , W , sN ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_NORMAL_MAP"],ha:{$:"grp",da:[{$:"txt",aa:"vec3 W = cross ( sL , k . xyz ) * k . w ; mat3 sQ = mat3 ( k . xyz , W , sL ) ;".split(" ")}]}}]}]}}]},{$:"txt",aa:"vec3 ow = h ; vec4 sR = i ; float sS = u_emit ; float sT = u_ambient ;".split(" ")},{$:"nodes_main"},{$:"txt",aa:["}"]}]}}]}]};f["include/particles_nodes.glslv"]=
{$:"grp",da:[{$:"cond",da:[{$:"ifndef",ba:"PARTICLES_NODES_GLSLV",ha:{$:"grp",da:[{$:"define",ba:"PARTICLES_NODES_GLSLV",aa:[""]},{$:"node",ba:"TEX_COORD_UV",ma:[],la:[],ja:[{$:"txt",aa:["A","=","Iu",";"]}]},{$:"node",ba:"UV_MERGED",ma:[],la:[],ja:[{$:"txt",aa:["A","=","Iu",";"]}]},{$:"node",ba:"UVMAP",ma:[],la:[],ja:[{$:"txt",aa:["A","=","Iu",";"]}]},{$:"node",ba:"GEOMETRY_UV",ma:[],la:[],ja:[{$:"txt",aa:["A","=","Iu",";"]}]},{$:"node",ba:"PARTICLE_INFO",ma:[{$:"node_var",ba:"PART_INFO_SIZE",aa:["0"]},
{$:"node_var",ba:"PART_INFO_AGE",aa:["0"]},{$:"node_var",ba:"PART_INFO_LT",aa:["0"]},{$:"node_var",ba:"PART_INFO_LOC",aa:["0"]},{$:"node_var",ba:"PART_INFO_IND",aa:["0"]},{$:"node_var",ba:"PART_INFO_VEL",aa:["0"]},{$:"node_var",ba:"PART_INFO_A_VEL",aa:["0"]}],la:[{$:"node_param",ba:"HY",fa:["GLSL_OUT","vec4"],ea:!0},{$:"node_param",ba:"HZ",fa:["GLSL_OUT","vec3"],ea:!0},{$:"node_param",ba:"H_",fa:["GLSL_OUT","vec3"],ea:!0},{$:"node_param",ba:"Ia",fa:["GLSL_OUT","vec3"],ea:!0},{$:"node_param",ba:"node_PARTICLE_INFO_var_a_p_indices",
fa:["GLSL_IN","float"],ea:!0}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["PART_INFO_SIZE"],ja:[{$:"txt",aa:"HY [ 3 ] = It ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["PART_INFO_AGE"],ja:[{$:"txt",aa:"HY [ 1 ] = Is ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["PART_INFO_LT"],ja:[{$:"txt",aa:"HY [ 2 ] = Iv ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["PART_INFO_LOC"],ja:[{$:"txt",aa:["HZ","=","Ip",";"]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["PART_INFO_IND"],ja:[{$:"txt",
aa:"HY [ 0 ] = node_PARTICLE_INFO_var_a_p_indices ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["PART_INFO_VEL"],ja:[{$:"txt",aa:["H_","=","Iq",";"]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["PART_INFO_A_VEL"],ja:[{$:"txt",aa:["Ia","=","Ir",";"]}]}]}]},{$:"nodes_global"},{$:"txt",aa:"void J ( in vec3 Ip , in vec3 Iq , in vec3 Ir , in float Is , in float It , in vec2 Iu , in float Iv ) {".split(" ")},{$:"cond",da:[{$:"if",ga:["USE_NODE_GEOMETRY_OR","USE_NODE_TEX_COORD_GE",{$:"logical_or_expr",
ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["A","=","Iu",";"]}]}}]},{$:"nodes_main"},{$:"txt",aa:["}"]}]}}]}]};f["include/precision_statement.glslf"]={$:"grp",da:[{$:"cond",da:[{$:"ifndef",ba:"PRECISION_STATEMENT_GLSLF",ha:{$:"grp",da:[{$:"define",ba:"PRECISION_STATEMENT_GLSLF",aa:[""]},{$:"var",ba:"PRECISION",aa:["highp"]},{$:"txt",aa:["precision","PRECISION","float",";"]}]}}]}]};f["include/procedural.glslf"]={$:"grp",da:[{$:"cond",da:[{$:"ifndef",ba:"PROCEDURAL_GLSLF",ha:{$:"grp",da:[{$:"define",ba:"PROCEDURAL_GLSLF",
aa:[""]},{$:"txt",aa:"vec4 Iw ( vec4 x ) { return x - floor ( x * ( _1_0 / 289.0 ) ) * 289.0 ; } vec3 Iw ( vec3 x ) { return x - floor ( x * ( _1_0 / 289.0 ) ) * 289.0 ; } vec2 Iw ( vec2 x ) { return x - floor ( x * ( _1_0 / 289.0 ) ) * 289.0 ; } vec4 Ix ( vec4 x ) { return x - floor ( x * ( _1_0 / 7.0 ) ) * 7.0 ; } vec4 Iy ( vec4 x ) { return Iw ( ( 34.0 * x + 5.0 ) * x ) ; }".split(" ")},{$:"define",ba:"K",aa:["0.142857142857"]},{$:"define",ba:"K2",aa:["0.0714285714285"]},{$:"define",ba:"JITTER",
aa:["0.7"]},{$:"txt",aa:"vec2 fK ( vec2 Iz ) { vec2 IA = Iw ( floor ( Iz ) ) ; vec2 IB = fract ( Iz ) ; vec4 IC = IB . x + vec4 ( - 0.5 , - 1.5 , - 0.5 , - 1.5 ) ; vec4 ID = IB . y + vec4 ( - 0.5 , - 0.5 , - 1.5 , - 1.5 ) ; vec4 p = Iy ( IA . x + vec4 ( _0_0 , _1_0 , _0_0 , _1_0 ) ) ; p = Iy ( p + IA . y + vec4 ( _0_0 , _0_0 , _1_0 , _1_0 ) ) ; vec4 IE = Ix ( p ) * K + K2 ; vec4 IF = Ix ( floor ( p * K ) ) * K + K2 ; vec4 IG = IC + JITTER * IE ; vec4 IH = ID + JITTER * IF ; vec4 dC = IG * IG + IH * IH ;".split(" ")},
{$:"cond",da:[{$:"if",ga:[1],ha:{$:"grp",da:[{$:"txt",aa:"dC . xy = min ( dC . xy , dC . zw ) ; dC . x = min ( dC . x , dC . y ) ; return dC . xx ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"dC . xy = ( dC . x < dC . y ) ? dC . xy : dC . yx ; dC . xz = ( dC . x < dC . z ) ? dC . xz : dC . zx ; dC . xw = ( dC . x < dC . w ) ? dC . xw : dC . wx ; dC . y = min ( dC . y , dC . z ) ; dC . y = min ( dC . y , dC . w ) ; return sqrt ( dC . xy ) ;".split(" ")}]}}]},{$:"txt",aa:"} vec3 la ( vec2 Iz , float II ) { vec2 IA = Iw ( floor ( Iz ) ) ; vec2 IB = fract ( Iz ) ; vec4 IC = IB . x + vec4 ( - 0.5 , - 1.5 , - 0.5 , - 1.5 ) ; vec4 ID = IB . y + vec4 ( - 0.5 , - 0.5 , - 1.5 , - 1.5 ) ; vec4 p = Iy ( IA . x + vec4 ( _0_0 , _1_0 , _0_0 , _1_0 ) ) ; p = Iy ( p + IA . y + vec4 ( _0_0 , _0_0 , _1_0 , _1_0 ) ) ; vec4 IE = Ix ( p ) * K + K2 ; vec4 IF = Ix ( floor ( p * K ) ) * K + K2 ; vec4 IG = IC + JITTER * IE ; vec4 IH = ID + JITTER * IF ; vec4 IJ = IG * IG + IH * IH ; IG += II ; IH += II ; vec4 IK = IG * IG + IH * IH ; IG += II ; IH += II ; vec4 IL = IG * IG + IH * IH ; IJ . xy = min ( IJ . xy , IJ . zw ) ; IJ . x = min ( IJ . x , IJ . y ) ; IK . xy = min ( IK . xy , IK . zw ) ; IK . x = min ( IK . x , IK . y ) ; IL . xy = min ( IL . xy , IL . zw ) ; IL . x = min ( IL . x , IL . y ) ; return vec3 ( IJ . x , IK . x , IL . x ) ; } vec3 IM ( vec3 x ) { return Iw ( ( ( x * 34.0 ) + _1_0 ) * x ) ; } float fz ( vec2 kU ) { const vec4 IN = vec4 ( 0.211324865405187 , 0.366025403784439 , - 0.577350269189626 , 0.024390243902439 ) ; vec2 cq = floor ( kU + dot ( kU , IN . yy ) ) ; vec2 IO = kU - cq + dot ( cq , IN . xx ) ; vec2 IP ; IP = ( IO . x > IO . y ) ? vec2 ( _1_0 , _0_0 ) : vec2 ( _0_0 , _1_0 ) ; vec4 IQ = IO . xyxy + IN . xxzz ; IQ . xy -= IP ; cq = Iw ( cq ) ; vec3 p = IM ( IM ( cq . y + vec3 ( _0_0 , IP . y , _1_0 ) ) + cq . x + vec3 ( _0_0 , IP . x , _1_0 ) ) ; vec3 aA = max ( 0.5 - vec3 ( dot ( IO , IO ) , dot ( IQ . xy , IQ . xy ) , dot ( IQ . zw , IQ . zw ) ) , _0_0 ) ; aA = aA * aA ; aA = aA * aA ; vec3 x = 2.0 * fract ( p * IN . www ) - _1_0 ; vec3 co = abs ( x ) - 0.5 ; vec3 IE = floor ( x + 0.5 ) ; vec3 IR = x - IE ; aA *= 1.79284291400159 - 0.85373472095314 * ( IR * IR + co * co ) ; vec3 g ; g . x = IR . x * IO . x + co . x * IO . y ; g . yz = IR . yz * IQ . xz + co . yz * IQ . yw ; return 130.0 * dot ( aA , g ) ; } vec2 IU ( vec2 f_ ) { float IJ = dot ( f_ , vec2 ( 12.9898 , 78.233 ) ) ; float IK = dot ( f_ , vec2 ( 12.9898 , 78.233 ) * 2.0 ) ; float IS = fract ( sin ( IJ ) * 43758.5453 ) * 2.0 - _1_0 ; float IT = fract ( sin ( IK ) * 43758.5453 ) * 2.0 - _1_0 ; return vec2 ( IS , IT ) ; } float lk ( vec2 IV ) { return fract ( sin ( dot ( IV , vec2 ( 12.9898 , 78.233 ) ) ) * 43758.5453 ) ; }".split(" ")}]}}]}]};
f["include/refraction.glslf"]={$:"grp",da:[{$:"cond",da:[{$:"ifndef",ba:"REFRACTION_GLSLF",ha:{$:"grp",da:[{$:"define",ba:"REFRACTION_GLSLF",aa:[""]},{$:"var",ba:"REFRACTIVE",aa:["0"]},{$:"var",ba:"USE_REFRACTION_CORRECTION",aa:["0"]},{$:"cond",da:[{$:"if",ga:["REFRACTIVE"],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["USE_REFRACTION_CORRECTION"],ha:{$:"grp",da:[{$:"include",oa:"pack.glslf"}]}}]},{$:"include",oa:"color_util.glslf"},{$:"cond",da:[{$:"if",ga:["USE_REFRACTION_CORRECTION"],ha:{$:"grp",da:[{$:"txt",
aa:"float eW ( in float cW , inout vec2 eV , in vec2 eM ) { vec4 IW = GLSL_TEXTURE ( u_scene_depth , eV ) ; float eX = cV ( IW ) ; if ( eX < m ) { eV = eM ; return cW ; } else { return eX ; } return cW ; }".split(" ")}]}}]},{$:"txt",aa:"vec3 cS ( in vec3 ru , in vec2 IX ) { vec2 eM = ru . xy / ru . z ; vec2 eV = eM + IX ;".split(" ")},{$:"cond",da:[{$:"if",ga:["USE_REFRACTION_CORRECTION"],ha:{$:"grp",da:[{$:"txt",aa:"vec4 cU = GLSL_TEXTURE_PROJ ( u_scene_depth , ru ) ; float cW = cV ( cU ) ; eW ( cW , eV , eM ) ;".split(" ")}]}}]},
{$:"txt",aa:"vec3 fa = GLSL_TEXTURE ( u_refractmap , eV ) . rgb ; bG ( fa ) ; return fa ; }".split(" ")}]}}]}]}}]}]};f["include/scale_texcoord.glslv"]={$:"grp",da:[{$:"cond",da:[{$:"ifndef",ba:"SCALE_TEXCOORD_GLSLV",ha:{$:"grp",da:[{$:"define",ba:"SCALE_TEXCOORD_GLSLV",aa:[""]},{$:"txt",aa:"vec2 az ( vec2 ce , vec3 IY ) { return ( ce + 0.5 ) * IY . xy - 0.5 ; }".split(" ")}]}}]}]};f["include/shadow.glslf"]={$:"grp",da:[{$:"cond",da:[{$:"ifndef",ba:"SHADOW_GLSLF",ha:{$:"grp",da:[{$:"define",ba:"SHADOW_GLSLF",
aa:[""]},{$:"var",ba:"PRECISION",aa:["highp"]},{$:"var",ba:"SHADOW_TEX_RES",aa:["2048.0"]},{$:"var",ba:"CSM_FADE_LAST_CASCADE",aa:["0"]},{$:"var",ba:"CSM_BLEND_BETWEEN_CASCADES",aa:["0"]},{$:"var",ba:"RGBA_SHADOWS",aa:["0"]},{$:"var",ba:"SHADOW_USAGE",aa:["NO_SHADOWS"]},{$:"var",ba:"NUM_CAST_LAMPS",aa:["0"]},{$:"var",ba:"CSM_SECTION1",aa:["0"]},{$:"var",ba:"CSM_SECTION2",aa:["0"]},{$:"var",ba:"CSM_SECTION3",aa:["0"]},{$:"var",ba:"COMPARED_MODE",aa:["0"]},{$:"var",ba:"POISSON_DISK_NUM",aa:["NO_SOFT_SHADOWS"]},
{$:"include",oa:"std.glsl"},{$:"cond",da:[{$:"if",ga:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{$:"equal_expr",ia:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{$:"equal_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"include",oa:"procedural.glslf"}]}}]},{$:"cond",da:[{$:"if",ga:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{$:"equal_expr",ia:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{$:"equal_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"const float IZ = 0.1 ; const float I_ = 0.1 ; const float Ja = - 0.01 ; const float Jb = 0.05 ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["POISSON_DISK_NUM","POISSON_X_16",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec4 Jc = vec4 ( 0.14383161 , 0.34495938 , - 0.38277543 , - 0.26496911 ) ; vec4 Jd = vec4 ( 0.53742981 , 0.19984126 , 0.79197514 , - 0.094184101 ) ; vec4 Je = vec4 ( - 0.94201624 , - 0.91588581 , - 0.2418884 , 0.44323325 ) ; vec4 Jf = vec4 ( - 0.81544232 , 0.94558609 , - 0.81409955 , 0.97484398 ) ; vec4 Jg = vec4 ( - 0.1410079 , 0.2938776 , 0.27676845 , - 0.41893023 ) ; vec4 Jh = vec4 ( - 0.4737342 , 0.78641367 , 0.19090188 , - 0.9293887 ) ; vec4 Ji = vec4 ( - 0.39906216 , 0.45771432 , 0.99706507 , - 0.97511554 ) ; vec4 Jj = vec4 ( - 0.87912464 , - 0.76890725 , 0.9143759 , 0.7564837 ) ;".split(" ")}]}},
{$:"elif",ga:["POISSON_DISK_NUM","POISSON_X_8",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec2 Jc = vec2 ( - 0.37192261 , 0.47109537 ) ; vec2 Jd = vec2 ( - 0.6807477 , 0.69048062 ) ; vec2 Je = vec2 ( 0.11615683 , - 0.91318524 ) ; vec2 Jf = vec2 ( 0.93688596 , - 0.16948928 ) ; vec2 Jg = vec2 ( - 0.89699117 , 0.74092316 ) ; vec2 Jh = vec2 ( 0.38263656 , - 0.66119884 ) ; vec2 Ji = vec2 ( - 0.08193062 , - 0.21275223 ) ; vec2 Jj = vec2 ( 0.05578877 , 0.84225623 ) ;".split(" ")}]}},{$:"elif",ga:["POISSON_DISK_NUM",
"POISSON_X_4",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec2 Jc = vec2 ( - 0.51808083 , 0.0 ) ; vec2 Jd = vec2 ( 0.5741194 , 0.0 ) ; vec2 Je = vec2 ( - 0.68048857 , 0.0 ) ; vec2 Jf = vec2 ( 0.82934988 , 0.0 ) ; vec2 Jg = vec2 ( 0.70009436 , 0.0 ) ; vec2 Jh = vec2 ( - 0.78790467 , 0.0 ) ; vec2 Ji = vec2 ( - 0.58619489 , 0.0 ) ; vec2 Jj = vec2 ( 0.41902178 , 0.0 ) ;".split(" ")}]}}]},{$:"txt",aa:"bool Jl ( vec2 iO , float Jk ) { return all ( lessThanEqual ( iO , vec2 ( 1.0 + Jk ) ) ) && all ( greaterThanEqual ( iO , vec2 ( 0.0 - Jk ) ) ) ; } float Js ( float Jm , float Jn , mat2 Jo , vec3 Jp , float Jq , PRECISION GLSL_SMPLR2D_SHDW Jr ) {".split(" ")},
{$:"cond",da:[{$:"if",ga:["POISSON_DISK_NUM","NO_SOFT_SHADOWS",{$:"non_equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec2 iO , fM ; fM . x = Jm ; fM . y = Jn ; fM = Jo * fM ; iO = Jp . xy + fM * Jq / SHADOW_TEX_RES ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec2 iO = Jp . xy ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["CSM_SECTION1",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:"if ( ! Jl ( iO , Ja ) ) return 1.0 ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["RGBA_SHADOWS"],
ha:{$:"grp",da:[{$:"txt",aa:"float et = cV ( GLSL_TEXTURE ( Jr , iO ) ) ; return step ( Jp . z , et ) ;".split(" ")}]}},{$:"elif",ga:["COMPARED_MODE"],ha:{$:"grp",da:[{$:"txt",aa:"return GLSL_TEXTURE ( Jr , vec3 ( iO , Jp . z ) ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"return step ( Jp . z , GLSL_TEXTURE ( Jr , iO ) . r ) ;".split(" ")}]}}]},{$:"txt",aa:"} float Jx ( vec3 Jp , PRECISION GLSL_SMPLR2D_SHDW Jr , float Jq ) { float Jt = 0.0 ; Jp . z = clamp ( Jp . z , 0.0 , 1.0 ) ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["POISSON_DISK_NUM","NO_SOFT_SHADOWS",{$:"non_equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"float Ju = IU ( Jp . xy ) . x * M_PI ; float Jv = cos ( Ju ) ; float Jw = sin ( Ju ) ; mat2 Jo = mat2 ( Jv , Jw , - Jw , Jv ) ; for ( int cq = 0 ; cq < POISSON_DISK_NUM ; cq ++ ) { Jt += Js ( Jc [ cq ] , Jg [ cq ] , Jo , Jp , Jq , Jr ) ; Jt += Js ( Jd [ cq ] , Jh [ cq ] , Jo , Jp , Jq , Jr ) ; Jt += Js ( Je [ cq ] , Ji [ cq ] , Jo , Jp , Jq , Jr ) ; Jt += Js ( Jf [ cq ] , Jj [ cq ] , Jo , Jp , Jq , Jr ) ; } return clamp ( Jt / ( float ( POISSON_DISK_NUM ) * 4.0 ) , 0.0 , 1.0 ) ;".split(" ")}]}},
{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"return Js ( 0.0 , 0.0 , mat2 ( 0.0 ) , Jp , Jq , Jr ) ;".split(" ")}]}}]},{$:"txt",aa:"} float JG ( vec3 Jy , PRECISION GLSL_SMPLR2D_SHDW Jz , vec3 JA , PRECISION GLSL_SMPLR2D_SHDW JB , float JC , float JD , float aL ) { float JE , JF ; Jy . z = clamp ( Jy . z , 0.0 , 1.0 ) ; JA . z = clamp ( JA . z , 0.0 , 1.0 ) ; JE = 0.0 ; JF = 0.0 ;".split(" ")},{$:"cond",da:[{$:"if",ga:["POISSON_DISK_NUM","NO_SOFT_SHADOWS",{$:"non_equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",
aa:"float Ju = IU ( Jy . xy ) . x * M_PI ; float Jv = cos ( Ju ) ; float Jw = sin ( Ju ) ; mat2 Jo = mat2 ( Jv , Jw , - Jw , Jv ) ; for ( int cq = 0 ; cq < POISSON_DISK_NUM ; cq ++ ) { JE += Js ( Jc [ cq ] , Jg [ cq ] , Jo , Jy , JC , Jz ) ; JE += Js ( Jd [ cq ] , Jh [ cq ] , Jo , Jy , JC , Jz ) ; JE += Js ( Je [ cq ] , Ji [ cq ] , Jo , Jy , JC , Jz ) ; JE += Js ( Jf [ cq ] , Jj [ cq ] , Jo , Jy , JC , Jz ) ; } for ( int cq = 0 ; cq < POISSON_DISK_NUM ; cq ++ ) { JF += Js ( Jc [ cq ] , Jg [ cq ] , Jo , JA , JD , JB ) ; JF += Js ( Jd [ cq ] , Jh [ cq ] , Jo , JA , JD , JB ) ; JF += Js ( Je [ cq ] , Ji [ cq ] , Jo , JA , JD , JB ) ; JF += Js ( Jf [ cq ] , Jj [ cq ] , Jo , JA , JD , JB ) ; } JE = mix ( JE , JF , aL ) ; JE /= ( float ( POISSON_DISK_NUM ) * 4.0 ) ;".split(" ")}]}},
{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"JE += Js ( 0.0 , 0.0 , mat2 ( 0.0 ) , Jy , JC , Jz ) ; JF += Js ( 0.0 , 0.0 , mat2 ( 0.0 ) , JA , JD , JB ) ; JE = mix ( JE , JF , aL ) ;".split(" ")}]}}]},{$:"txt",aa:"return clamp ( JE , 0.0 , 1.0 ) ; } float JH ( vec2 iO ) { float a = min ( iO . x , iO . y ) ; float b = min ( 1.0 - iO . x , 1.0 - iO . y ) ; return min ( a , b ) ; } float JJ ( float vo , float JI ) { if ( JI >= 0.0 && JI <= I_ ) vo = ( vo - 1.0 ) / I_ * JI + 1.0 ; return vo ; } float JO ( vec3 JK , vec3 JL , PRECISION GLSL_SMPLR2D_SHDW Jz , PRECISION GLSL_SMPLR2D_SHDW JB , float JC , float JD , float JM , float et ) { float vo ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["CSM_BLEND_BETWEEN_CASCADES"],ha:{$:"grp",da:[{$:"txt",aa:"float JI = JH ( JK . xy ) ; if ( - et > JM && JI >= 0.0 && JI <= IZ && Jl ( JL . xy , 0.0 ) ) { float JN = 1.0 - JI / IZ ; vo = JG ( JK , Jz , JL , JB , JC , JD , JN ) ; } else".split(" ")}]}}]},{$:"txt",aa:"vo = Jx ( JK , Jz , JC ) ; return vo ; } float JQ ( vec3 JP , PRECISION GLSL_SMPLR2D_SHDW Jr , float Jq , float JM , float et ) { float vo = Jx ( JP , Jr , Jq ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["CSM_FADE_LAST_CASCADE"],
ha:{$:"grp",da:[{$:"txt",aa:"if ( - et > JM ) { float JI = JH ( JP . xy ) ; vo = JJ ( vo , JI ) ; }".split(" ")}]}}]},{$:"txt",aa:"return vo ; } vec4 ev ( float et ) { float vo = 1.0 ;".split(" ")},{$:"cond",da:[{$:"if",ga:["POISSON_DISK_NUM","NO_SOFT_SHADOWS",{$:"non_equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["vec4","JR","=","u_pcf_blur_radii",";"]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec4 JR = vec4 ( 0.0 ) ;".split(" ")}]}}]},{$:"txt",aa:"vec3 Jy = n . xyz / n . w ; if ( n . w < 0.0 ) Jy . z = 0.0 ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["CSM_SECTION1","NUM_CAST_LAMPS",1,{$:"g_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 JA = o . xyz / o . w ; if ( o . w < 0.0 ) JA . z = 0.0 ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["CSM_SECTION2","NUM_CAST_LAMPS",2,{$:"g_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 JS = u . xyz / u . w ; if ( u . w < 0.0 ) JS . z = 0.0 ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["CSM_SECTION3","NUM_CAST_LAMPS",3,{$:"g_expr",
ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 JT = v . xyz / v . w ; if ( v . w < 0.0 ) JT . z = 0.0 ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["CSM_SECTION1"],ha:{$:"grp",da:[{$:"txt",aa:"if ( Jl ( Jy . xy , 0.0 ) ) { vo = JO ( Jy , JA , u_shadow_map0 , u_shadow_map1 , JR [ 0 ] , JR [ 1 ] , u_csm_center_dists [ 0 ] , et ) ; }".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"if ( Jl ( Jy . xy , Jb ) ) { vo = JQ ( Jy , u_shadow_map0 , JR [ 0 ] , u_csm_center_dists [ 0 ] , et ) ; }".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["CSM_SECTION1"],ha:{$:"grp",da:[{$:"txt",aa:"else { if ( Jl ( JA . xy , 0.0 ) ) {".split(" ")},{$:"cond",da:[{$:"if",ga:["CSM_SECTION2"],ha:{$:"grp",da:[{$:"txt",aa:"vo = JO ( JA , JS , u_shadow_map1 , u_shadow_map2 , JR [ 1 ] , JR [ 2 ] , u_csm_center_dists [ 1 ] , et ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vo = JQ ( JA , u_shadow_map1 , JR [ 1 ] , u_csm_center_dists [ 1 ] , et ) ;".split(" ")}]}}]},{$:"txt",aa:["}"]},{$:"cond",da:[{$:"if",ga:["CSM_SECTION2"],
ha:{$:"grp",da:[{$:"txt",aa:"else { if ( Jl ( JS . xy , 0.0 ) ) {".split(" ")},{$:"cond",da:[{$:"if",ga:["CSM_SECTION3"],ha:{$:"grp",da:[{$:"txt",aa:"vo = JO ( JS , JT , u_shadow_map2 , u_shadow_map3 , JR [ 2 ] , JR [ 3 ] , u_csm_center_dists [ 2 ] , et ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vo = JQ ( JS , u_shadow_map2 , JR [ 2 ] , u_csm_center_dists [ 2 ] , et ) ;".split(" ")}]}}]},{$:"txt",aa:["}"]},{$:"cond",da:[{$:"if",ga:["CSM_SECTION3"],ha:{$:"grp",da:[{$:"txt",aa:"else { if ( Jl ( JT . xy , 0.0 ) ) vo = JQ ( JT , u_shadow_map3 , JR [ 3 ] , u_csm_center_dists [ 3 ] , et ) ; }".split(" ")}]}}]},
{$:"txt",aa:["}"]}]}}]},{$:"txt",aa:["}"]}]}}]},{$:"cond",da:[{$:"if",ga:["NUM_CAST_LAMPS",1,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"float JU = Jx ( JA , u_shadow_map1 , JR [ 0 ] ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["float","JU","=","0.0",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["NUM_CAST_LAMPS",2,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"float JV = Jx ( JS , u_shadow_map2 , JR [ 0 ] ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["float","JV","=","0.0",
";"]}]}}]},{$:"cond",da:[{$:"if",ga:["NUM_CAST_LAMPS",3,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"float JW = Jx ( JT , u_shadow_map3 , JR [ 0 ] ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["float","JW","=","1.0",";"]}]}}]},{$:"txt",aa:"return vec4 ( vo , JU , JV , JW ) ; }".split(" ")}]}}]},{$:"txt",aa:"vec4 cH ( inout vec3 cD ) {".split(" ")},{$:"cond",da:[{$:"if",ga:["SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec4 Jt = GLSL_TEXTURE ( u_shadow_mask , l . xy / l . z ) ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["NUM_CAST_LAMPS",3,{$:"l_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"cD *= Jt . a ;".split(" ")}]}}]},{$:"txt",aa:["return","Jt",";"]}]}},{$:"elif",ga:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{$:"equal_expr",ia:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{$:"equal_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec4 Jt = ev ( i . z ) ; return Jt ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"return vec4 ( 1.0 ) ;".split(" ")}]}}]},{$:"txt",aa:["}"]}]}}]}]};
f["include/shadow.glslv"]={$:"grp",da:[{$:"cond",da:[{$:"ifndef",ba:"SHADOW_GLSLV",ha:{$:"grp",da:[{$:"define",ba:"SHADOW_GLSLV",aa:[""]},{$:"var",ba:"MAC_OS_SHADOW_HACK",aa:["0"]},{$:"var",ba:"SHADOW_TEX_RES",aa:["2048.0"]},{$:"var",ba:"SHADOW_USAGE",aa:["NO_SHADOWS"]},{$:"var",ba:"NUM_CAST_LAMPS",aa:["0"]},{$:"var",ba:"CSM_SECTION1",aa:["0"]},{$:"var",ba:"CSM_SECTION2",aa:["0"]},{$:"var",ba:"CSM_SECTION3",aa:["0"]},{$:"include",oa:"std.glsl"},{$:"cond",da:[{$:"if",ga:["SHADOW_USAGE","SHADOW_MASK_GENERATION",
{$:"equal_expr",ia:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{$:"equal_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"include",oa:"math.glslv"},{$:"txt",aa:"vec4 J_ ( mat4 JX , vec4 JY , mat4 JZ ) { vec2 ey = ( JX * JZ [ 3 ] ) . xy ; float ez = SHADOW_TEX_RES / 2.0 ; ey = floor ( ey * ez + 0.5 ) / ez - ey ; vec4 Jp = JX * JY ; Jp . xy += ey ; Jp . xyz = 0.5 * ( Jp . xyz + Jp . w ) ; return Jp ; } void cd ( vec3 fr , vec3 Ka ) {".split(" ")},{$:"cond",da:[{$:"if",ga:["MAC_OS_SHADOW_HACK"],
ha:{$:"grp",da:[{$:"txt",aa:"mat4 JZ = bh ( u_v_light_tsr [ 0 ] ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"mat4 JZ = bh ( mat3 ( u_v_light_ts [ 0 ] . xyz , vec3 ( u_v_light_ts [ 0 ] . w ) , u_v_light_r [ 0 ] . xyz * ( 2. * float ( u_v_light_r [ 0 ] . w >= 0. ) - 1. ) ) ) ;".split(" ")}]}}]},{$:"txt",aa:"vec4 Kb = JZ * vec4 ( fr + u_normal_offset * Ka , 1.0 ) ; n = J_ ( u_p_light_matrix0 , Kb , JZ ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["NUM_CAST_LAMPS",1,{$:"g_expr",ia:2}],ha:{$:"grp",
da:[{$:"cond",da:[{$:"if",ga:["MAC_OS_SHADOW_HACK"],ha:{$:"grp",da:[{$:"txt",aa:"JZ = bh ( u_v_light_tsr [ 1 ] ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"JZ = bh ( mat3 ( u_v_light_ts [ 1 ] . xyz , vec3 ( u_v_light_ts [ 1 ] . w ) , u_v_light_r [ 1 ] . xyz * ( 2. * float ( u_v_light_r [ 1 ] . w >= 0. ) - 1. ) ) ) ;".split(" ")}]}}]},{$:"txt",aa:"Kb = JZ * vec4 ( fr + u_normal_offset * Ka , 1.0 ) ; o = J_ ( u_p_light_matrix1 , Kb , JZ ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["NUM_CAST_LAMPS",
2,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["MAC_OS_SHADOW_HACK"],ha:{$:"grp",da:[{$:"txt",aa:"JZ = bh ( u_v_light_tsr [ 2 ] ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"JZ = bh ( mat3 ( u_v_light_ts [ 2 ] . xyz , vec3 ( u_v_light_ts [ 2 ] . w ) , u_v_light_r [ 2 ] . xyz * ( 2. * float ( u_v_light_r [ 2 ] . w >= 0. ) - 1. ) ) ) ;".split(" ")}]}}]},{$:"txt",aa:"Kb = JZ * vec4 ( fr + u_normal_offset * Ka , 1.0 ) ; u = J_ ( u_p_light_matrix2 , Kb , JZ ) ;".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["NUM_CAST_LAMPS",3,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["MAC_OS_SHADOW_HACK"],ha:{$:"grp",da:[{$:"txt",aa:"JZ = bh ( u_v_light_tsr [ 3 ] ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"JZ = bh ( mat3 ( u_v_light_ts [ 3 ] . xyz , vec3 ( u_v_light_ts [ 3 ] . w ) , u_v_light_r [ 3 ] . xyz * ( 2. * float ( u_v_light_r [ 3 ] . w >= 0. ) - 1. ) ) ) ;".split(" ")}]}}]},{$:"txt",aa:"Kb = JZ * vec4 ( fr + u_normal_offset * Ka , 1.0 ) ; v = J_ ( u_p_light_matrix3 , Kb , JZ ) ;".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["CSM_SECTION1"],ha:{$:"grp",da:[{$:"txt",aa:"o = J_ ( u_p_light_matrix1 , Kb , JZ ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["CSM_SECTION2"],ha:{$:"grp",da:[{$:"txt",aa:"u = J_ ( u_p_light_matrix2 , Kb , JZ ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["CSM_SECTION3"],ha:{$:"grp",da:[{$:"txt",aa:"v = J_ ( u_p_light_matrix3 , Kb , JZ ) ;".split(" ")}]}}]},{$:"txt",aa:["}"]}]}}]}]}}]}]};f["include/skin.glslv"]={$:"grp",da:[{$:"cond",da:[{$:"ifndef",ba:"SKIN_GLSLV",ha:{$:"grp",
da:[{$:"define",ba:"SKIN_GLSLV",aa:[""]},{$:"var",ba:"DISABLE_TANGENT_SKINNING",aa:["0"]},{$:"var",ba:"SKINNED",aa:["0"]},{$:"var",ba:"FRAMES_BLENDING",aa:["0"]},{$:"cond",da:[{$:"if",ga:["SKINNED"],ha:{$:"grp",da:[{$:"include",oa:"math.glslv"},{$:"define",ba:"SKIN_SLERP",aa:["0"]},{$:"cond",da:[{$:"if",ga:["SKIN_SLERP"],ha:{$:"grp",da:[{$:"txt",aa:"vec4 Ki ( in vec4 qZ , in vec4 rF , in float Kc ) { float Kd = qZ [ 0 ] * rF [ 0 ] + qZ [ 1 ] * rF [ 1 ] + qZ [ 2 ] * rF [ 2 ] + qZ [ 3 ] * rF [ 3 ] ; if ( Kd < 0.0 ) { rF *= - 1.0 ; Kd = - Kd ; } if ( abs ( Kd ) >= 1.0 ) return qZ ; float Ke = acos ( Kd ) ; float Kf = sqrt ( 1.0 - Kd * Kd ) ; if ( abs ( Kf ) < 0.001 ) return vec4 ( qZ * 0.5 + rF * 0.5 ) ; float Kg = sin ( ( 1.0 - Kc ) * Ke ) / Kf ; float Kh = sin ( Kc * Ke ) / Kf ; return qZ * Kg + rF * Kh ; }".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["FRAMES_BLENDING"],ha:{$:"grp",da:[{$:"txt",aa:"vec3 Kw ( in vec3 O , in vec4 Kj , in vec4 Kk , in vec4 Kl , in vec4 Km , in float Kn ) { vec3 Ko = rl ( u_arm_rel_trans . xyz , vec3 ( u_arm_rel_trans . w ) , u_arm_rel_quat , O ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["SKIN_SLERP"],ha:{$:"grp",da:[{$:"txt",aa:"vec4 qZ = Ki ( Kj , Kk , Kn ) ; vec4 Kp = mix ( Kl , Km , Kn ) ; vec3 Kq = T ( qZ , Ko ) ; vec3 Kr = Kq * Kp . w + Kp . xyz ;".split(" ")}]}},{$:"else",ha:{$:"grp",
da:[{$:"txt",aa:"vec3 Ks = T ( Kj , Ko ) ; vec3 Kt = T ( Kk , Ko ) ; vec3 Ku = Ks * Kl . w + Kl . xyz ; vec3 Kv = Kt * Km . w + Km . xyz ; vec3 Kr = mix ( Ku , Kv , Kn ) ;".split(" ")}]}}]},{$:"txt",aa:"return rn ( u_arm_rel_trans . xyz , vec3 ( u_arm_rel_trans . w ) , u_arm_rel_quat , Kr ) ; } vec3 KC ( in vec3 Kx , in vec4 Kj , in vec4 Kk , in float Kn ) { vec3 Ky = rm ( u_arm_rel_trans . xyz , vec3 ( u_arm_rel_trans . w ) , u_arm_rel_quat , Kx ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["SKIN_SLERP"],
ha:{$:"grp",da:[{$:"txt",aa:"vec4 qZ = Ki ( Kj , Kk , Kn ) ; vec3 Kz = T ( qZ , Ky ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec3 KA = T ( Kj , Ky ) ; vec3 KB = T ( Kk , Ky ) ; vec3 Kz = mix ( KA , KB , Kn ) ;".split(" ")}]}}]},{$:"txt",aa:"return ro ( u_arm_rel_trans . xyz , vec3 ( u_arm_rel_trans . w ) , u_arm_rel_quat , Kz ) ; }".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec3 Kw ( in vec3 O , in vec4 Kj , in vec4 Kl ) { vec3 Ko = rl ( u_arm_rel_trans . xyz , vec3 ( u_arm_rel_trans . w ) , u_arm_rel_quat , O ) ; vec3 Kq = T ( Kj , Ko ) ; vec3 Kr = Kq * Kl . w + Kl . xyz ; return rn ( u_arm_rel_trans . xyz , vec3 ( u_arm_rel_trans . w ) , u_arm_rel_quat , Kr ) ; } vec3 KC ( in vec3 Kx , in vec4 Kj ) { vec3 Ky = rm ( u_arm_rel_trans . xyz , vec3 ( u_arm_rel_trans . w ) , u_arm_rel_quat , Kx ) ; vec3 Kz = T ( Kj , Ky ) ; return ro ( u_arm_rel_trans . xyz , vec3 ( u_arm_rel_trans . w ) , u_arm_rel_quat , Kz ) ; }".split(" ")}]}}]},
{$:"txt",aa:"void an ( inout vec3 O , inout vec3 V , inout vec3 W , inout vec3 U ) {".split(" ")},{$:"cond",da:[{$:"if",ga:["FRAMES_BLENDING"],ha:{$:"grp",da:[{$:"txt",aa:["float","KD","=","u_frame_factor",";"]}]}}]},{$:"txt",aa:"if ( a_influence . y > 0.0 ) { vec3 jH = vec3 ( 0.0 , 0.0 , 0.0 ) ; vec3 KE = vec3 ( 0.0 , 0.0 , 0.0 ) ; vec3 KF = vec3 ( 0.0 , 0.0 , 0.0 ) ; vec3 KG = vec3 ( 0.0 , 0.0 , 0.0 ) ; vec4 KH = a_influence ; for ( int cq = 0 ; cq < 4 ; cq ++ ) { int KI = int ( KH [ cq ] ) ; float KJ = fract ( KH [ cq ] ) ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["FRAMES_BLENDING"],ha:{$:"grp",da:[{$:"txt",aa:"KE += KJ * KC ( V , u_quatsb [ KI ] , u_quatsa [ KI ] , KD ) ; KF += KJ * KC ( W , u_quatsb [ KI ] , u_quatsa [ KI ] , KD ) ; KG += KJ * KC ( U , u_quatsb [ KI ] , u_quatsa [ KI ] , KD ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"jH += KJ * Kw ( O , u_quatsb [ KI ] , u_transb [ KI ] ) ; KG += KJ * KC ( U , u_quatsb [ KI ] ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["DISABLE_TANGENT_SKINNING",{$:"logic_negative_expr",
ia:1}],ha:{$:"grp",da:[{$:"txt",aa:"KE += KJ * KC ( V , u_quatsb [ KI ] ) ; KF += KJ * KC ( W , u_quatsb [ KI ] ) ;".split(" ")}]}}]}]}}]},{$:"txt",aa:["}"]},{$:"cond",da:[{$:"if",ga:["FRAMES_BLENDING"],ha:{$:"grp",da:[{$:"txt",aa:"int KI = int ( KH [ 0 ] ) ; float KJ = fract ( KH [ 0 ] ) ; jH += KJ * Kw ( O , u_quatsb [ KI ] , u_quatsa [ KI ] , u_transb [ KI ] , u_transa [ KI ] , KD ) ; KI = int ( KH [ 1 ] ) ; KJ = fract ( KH [ 1 ] ) ; jH += KJ * Kw ( O , u_quatsb [ KI ] , u_quatsa [ KI ] , u_transb [ KI ] , u_transa [ KI ] , KD ) ; KI = int ( KH [ 2 ] ) ; KJ = fract ( KH [ 2 ] ) ; jH += KJ * Kw ( O , u_quatsb [ KI ] , u_quatsa [ KI ] , u_transb [ KI ] , u_transa [ KI ] , KD ) ; KI = int ( KH [ 3 ] ) ; KJ = fract ( KH [ 3 ] ) ; jH += KJ * Kw ( O , u_quatsb [ KI ] , u_quatsa [ KI ] , u_transb [ KI ] , u_transa [ KI ] , KD ) ;".split(" ")}]}}]},
{$:"txt",aa:"O = jH ; U = KG ;".split(" ")},{$:"cond",da:[{$:"if",ga:["DISABLE_TANGENT_SKINNING",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:"V = KE ; W = KF ;".split(" ")}]}}]},{$:"txt",aa:"} if ( ! ( a_influence . y > 0.0 ) ) { int KK = int ( a_influence [ 0 ] - 1.0 ) ; if ( KK > - 1 ) {".split(" ")},{$:"cond",da:[{$:"if",ga:["FRAMES_BLENDING"],ha:{$:"grp",da:[{$:"txt",aa:"O = Kw ( O , u_quatsb [ KK ] , u_quatsa [ KK ] , u_transb [ KK ] , u_transa [ KK ] , KD ) ; V = KC ( V , u_quatsb [ KK ] , u_quatsa [ KK ] , KD ) ; W = KC ( W , u_quatsb [ KK ] , u_quatsa [ KK ] , KD ) ; U = KC ( U , u_quatsb [ KK ] , u_quatsa [ KK ] , KD ) ;".split(" ")}]}},
{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"O = Kw ( O , u_quatsb [ KK ] , u_transb [ KK ] ) ; U = KC ( U , u_quatsb [ KK ] ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["DISABLE_TANGENT_SKINNING",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:"V = KC ( V , u_quatsb [ KK ] ) ; W = KC ( W , u_quatsb [ KK ] ) ;".split(" ")}]}}]}]}}]},{$:"txt",aa:["}","}","}"]}]}}]}]}}]}]};f["include/sky_blending.glslf"]={$:"grp",da:[{$:"cond",da:[{$:"ifndef",ba:"SKY_BLENDING_GLSLF",ha:{$:"grp",da:[{$:"define",
ba:"SKY_BLENDING_GLSLF",aa:[""]},{$:"include",oa:"std.glsl"},{$:"include",oa:"blending.glslf"},{$:"var",ba:"WO_SKYREAL",aa:["0"]},{$:"var",ba:"WO_SKYBLEND",aa:["0"]},{$:"var",ba:"BLENDTYPE",aa:["MIX"]},{$:"var",ba:"MTEX_RGBTOINT",aa:["0"]},{$:"var",ba:"WOMAP_HORIZ",aa:["0"]},{$:"var",ba:"WOMAP_ZENUP",aa:["0"]},{$:"var",ba:"WOMAP_ZENDOWN",aa:["0"]},{$:"var",ba:"WOMAP_BLEND",aa:["0"]},{$:"var",ba:"MTEX_NEGATIVE",aa:["0"]},{$:"txt",aa:"vec3 KL ( vec3 km , vec3 kn , float aL , float kM ) { float ko = aL * kM ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["BLENDTYPE","MIX",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"return kp ( kn , km , ko ) ;".split(" ")}]}},{$:"elif",ga:["BLENDTYPE","ADD",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"return kq ( km , kn , ko ) ;".split(" ")}]}},{$:"elif",ga:["BLENDTYPE","SUBTRACT",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"return kr ( km , kn , ko ) ;".split(" ")}]}},{$:"elif",ga:["BLENDTYPE","MULTIPLY",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"return kt ( km , kn , ko ) ;".split(" ")}]}},
{$:"elif",ga:["BLENDTYPE","SCREEN",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"return ku ( km , kn , ko ) ;".split(" ")}]}},{$:"elif",ga:["BLENDTYPE","OVERLAY",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"return kv ( km , kn , ko ) ;".split(" ")}]}},{$:"elif",ga:["BLENDTYPE","DIFFERENCE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"return kw ( km , kn , ko ) ;".split(" ")}]}},{$:"elif",ga:["BLENDTYPE","DIVIDE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"return kx ( km , kn , ko ) ;".split(" ")}]}},
{$:"elif",ga:["BLENDTYPE","DARKEN",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"return ky ( km , kn , ko ) ;".split(" ")}]}},{$:"elif",ga:["BLENDTYPE","LIGHTEN",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"return kz ( km , kn , ko ) ;".split(" ")}]}},{$:"elif",ga:["BLENDTYPE","HUE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"return kD ( kn , km , ko ) ;".split(" ")}]}},{$:"elif",ga:["BLENDTYPE","SATURATION",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"return kE ( kn , km , ko ) ;".split(" ")}]}},
{$:"elif",ga:["BLENDTYPE","VALUE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"return kF ( kn , km , ko ) ;".split(" ")}]}},{$:"elif",ga:["BLENDTYPE","COLOR",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"return kG ( kn , km , ko ) ;".split(" ")}]}},{$:"elif",ga:["BLENDTYPE","SOFT_LIGHT",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"return kI ( kn , km , ko ) ;".split(" ")}]}},{$:"elif",ga:["BLENDTYPE","LINEAR_LIGHT",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"return kJ ( kn , km , ko ) ;".split(" ")}]}}]},
{$:"txt",aa:"return vec3 ( 1.0 , 0.0 , 1.0 ) ; } float KM ( float kK , float kL , float aL , float kM ) { vec3 km = vec3 ( kK ) , kn = vec3 ( kL ) ; float ko = aL * kM ;".split(" ")},{$:"cond",da:[{$:"if",ga:["BLENDTYPE","MIX",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"return kp ( kn , km , ko ) . x ;".split(" ")}]}},{$:"elif",ga:["BLENDTYPE","ADD",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"return kq ( km , kn , ko ) . x ;".split(" ")}]}},{$:"elif",ga:["BLENDTYPE","SUBTRACT",{$:"equal_expr",
ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"return kr ( km , kn , ko ) . x ;".split(" ")}]}},{$:"elif",ga:["BLENDTYPE","MULTIPLY",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"return kN ( kK , kL , ko , kM ) ;".split(" ")}]}},{$:"elif",ga:["BLENDTYPE","SCREEN",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"return kO ( kK , kL , ko , kM ) ;".split(" ")}]}},{$:"elif",ga:["BLENDTYPE","OVERLAY",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"return kP ( kK , kL , ko , kM ) ;".split(" ")}]}},{$:"elif",
ga:["BLENDTYPE","DIFFERENCE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"return kw ( km , kn , ko ) . x ;".split(" ")}]}},{$:"elif",ga:["BLENDTYPE","DIVIDE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"return kx ( km , kn , ko ) . x ;".split(" ")}]}},{$:"elif",ga:["BLENDTYPE","DARKEN",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"return ky ( km , kn , ko ) . x ;".split(" ")}]}},{$:"elif",ga:["BLENDTYPE","LIGHTEN",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"return kz ( km , kn , ko ) . x ;".split(" ")}]}},
{$:"elif",ga:["BLENDTYPE","SOFT_LIGHT",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"return kI ( kn , km , ko ) . x ;".split(" ")}]}},{$:"elif",ga:["BLENDTYPE","LINEAR_LIGHT",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"return kJ ( kn , km , ko ) . x ;".split(" ")}]}}]},{$:"txt",aa:"return 0.0 ; } vec3 eF ( vec3 eB , vec3 eC , vec4 eE , float eA , vec3 eD ) { float KN = 1.0 ; KN = eE . a ;".split(" ")},{$:"cond",da:[{$:"if",ga:["MTEX_RGBTOINT"],ha:{$:"grp",da:[{$:"txt",aa:"KN = gj ( eE ) ;".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["MTEX_NEGATIVE"],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["MTEX_RGBTOINT",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:"eE = vec4 ( vec3 ( 1.0 ) - eE . rgb , eE . a ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"KN = 1.0 - KN ;".split(" ")}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["WOMAP_HORIZ","WOMAP_ZENUP","WOMAP_ZENDOWN",{$:"logical_or_expr",ia:3}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["MTEX_RGBTOINT"],ha:{$:"grp",da:[{$:"txt",aa:"eE = vec4 ( u_sky_tex_color , 1.0 ) ;".split(" ")}]}},
{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"KN = eE . a ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["WOMAP_HORIZ"],ha:{$:"grp",da:[{$:"txt",aa:"eB = KL ( eE . rgb , eB , KN , u_sky_tex_fac [ 1 ] ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["WOMAP_ZENUP","WOMAP_ZENDOWN",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["float","KO","=","0.0",";"]},{$:"cond",da:[{$:"if",ga:["WO_SKYREAL"],ha:{$:"grp",da:[{$:"txt",aa:"if ( dot ( eD , vec3 ( 0.0 , 0.0 , 1.0 ) ) >= 0.0 ) {".split(" ")},{$:"cond",
da:[{$:"if",ga:["WOMAP_ZENUP"],ha:{$:"grp",da:[{$:"txt",aa:"KO = u_sky_tex_fac [ 2 ] ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:[";"]}]}}]},{$:"txt",aa:["}"]},{$:"cond",da:[{$:"if",ga:["WOMAP_ZENDOWN"],ha:{$:"grp",da:[{$:"txt",aa:"else KO = u_sky_tex_fac [ 3 ] ;".split(" ")}]}}]}]}},{$:"else",ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["WOMAP_ZENUP"],ha:{$:"grp",da:[{$:"txt",aa:"KO = u_sky_tex_fac [ 2 ] ;".split(" ")}]}},{$:"elif",ga:["WOMAP_ZENDOWN"],ha:{$:"grp",da:[{$:"txt",aa:"KO = u_sky_tex_fac [ 3 ] ;".split(" ")}]}}]}]}}]},
{$:"txt",aa:"if ( KO != 0.0 ) eC = KL ( eE . rgb , eC , KN , KO ) ;".split(" ")}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["WOMAP_BLEND"],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["MTEX_RGBTOINT",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:"KN = dot ( eE . rgb , vec3 ( 0.2126 , 0.7152 , 0.0722 ) ) ;".split(" ")}]}}]},{$:"txt",aa:"eA = KM ( u_sky_tex_dvar , eA , KN , u_sky_tex_fac [ 0 ] ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["WO_SKYBLEND"],ha:{$:"grp",da:[{$:"txt",aa:"vec3 bw = mix ( eB , eC , eA ) ;".split(" ")}]}},
{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["vec3","bw","=","eB",";"]}]}}]},{$:"txt",aa:["return","bw",";","}"]}]}}]}]};f["include/std.glsl"]={$:"grp",da:[{$:"cond",da:[{$:"ifndef",ba:"STD_ENUMS_GLSL",ha:{$:"grp",da:[{$:"define",ba:"STD_ENUMS_GLSL",aa:[""]},{$:"var",ba:"CONSTANTS_HACK",aa:["0"]},{$:"define",ba:"TEXTURE_COORDS_NONE",aa:["0"]},{$:"define",ba:"TEXTURE_COORDS_UV_ORCO",aa:["1"]},{$:"define",ba:"TEXTURE_COORDS_NORMAL",aa:["2"]},{$:"define",ba:"TEXTURE_BLEND_TYPE_MIX",aa:["1"]},{$:"define",ba:"TEXTURE_BLEND_TYPE_MULTIPLY",
aa:["2"]},{$:"define",ba:"SHADOW_SRC_NONE",aa:["1"]},{$:"define",ba:"SHADOW_SRC_DEPTH",aa:["2"]},{$:"define",ba:"SHADOW_SRC_MASK",aa:["3"]},{$:"define",ba:"SHADOW_DST_NONE",aa:["1"]},{$:"define",ba:"SHADOW_DST_DEPTH",aa:["2"]},{$:"define",ba:"SHADOW_DST_MASK",aa:["3"]},{$:"define",ba:"NO_SHADOWS",aa:["1"]},{$:"define",ba:"SHADOW_CASTING",aa:["2"]},{$:"define",ba:"SHADOW_MASK_GENERATION",aa:["3"]},{$:"define",ba:"SHADOW_MAPPING_OPAQUE",aa:["4"]},{$:"define",ba:"SHADOW_MAPPING_BLEND",aa:["5"]},{$:"define",
ba:"POISSON_X_16",aa:["4"]},{$:"define",ba:"POISSON_X_8",aa:["2"]},{$:"define",ba:"POISSON_X_4",aa:["1"]},{$:"define",ba:"NO_SOFT_SHADOWS",aa:["0"]},{$:"define",ba:"SPECULAR_PHONG",aa:["1"]},{$:"define",ba:"SPECULAR_COOKTORR",aa:["2"]},{$:"define",ba:"SPECULAR_WARDISO",aa:["3"]},{$:"define",ba:"SPECULAR_BLINN",aa:["4"]},{$:"define",ba:"SPECULAR_TOON",aa:["5"]},{$:"define",ba:"DIFFUSE_LAMBERT",aa:["1"]},{$:"define",ba:"DIFFUSE_OREN_NAYAR",aa:["2"]},{$:"define",ba:"DIFFUSE_FRESNEL",aa:["3"]},{$:"define",
ba:"DIFFUSE_MINNAERT",aa:["4"]},{$:"define",ba:"DIFFUSE_TOON",aa:["5"]},{$:"define",ba:"MIX",aa:["0"]},{$:"define",ba:"ADD",aa:["1"]},{$:"define",ba:"SUBTRACT",aa:["2"]},{$:"define",ba:"MULTIPLY",aa:["3"]},{$:"define",ba:"SCREEN",aa:["4"]},{$:"define",ba:"OVERLAY",aa:["5"]},{$:"define",ba:"DIFFERENCE",aa:["6"]},{$:"define",ba:"DIVIDE",aa:["7"]},{$:"define",ba:"DARKEN",aa:["8"]},{$:"define",ba:"LIGHTEN",aa:["9"]},{$:"define",ba:"HUE",aa:["10"]},{$:"define",ba:"SATURATION",aa:["11"]},{$:"define",ba:"VALUE",
aa:["12"]},{$:"define",ba:"COLOR",aa:["13"]},{$:"define",ba:"SOFT_LIGHT",aa:["14"]},{$:"define",ba:"LINEAR_LIGHT",aa:["15"]},{$:"define",ba:"REFL_NONE",aa:["0"]},{$:"define",ba:"REFL_MIRRORMAP",aa:["1"]},{$:"define",ba:"REFL_PLANE",aa:["2"]},{$:"define",ba:"REFL_CUBE",aa:["3"]},{$:"define",ba:"REFL_PBR_SIMPLE",aa:["4"]},{$:"define",ba:"REFL_PBR_STANDARD",aa:["5"]},{$:"define",ba:"INVERSE_QUADRATIC",aa:["0"]},{$:"define",ba:"LINEAR",aa:["1"]},{$:"define",ba:"QUADRATIC",aa:["2"]},{$:"define",ba:"HEMI",
aa:["1"]},{$:"define",ba:"SPOT",aa:["2"]},{$:"define",ba:"POINT",aa:["3"]},{$:"define",ba:"SUN",aa:["4"]},{$:"define",ba:"DOF_SIMPLE",aa:["0"]},{$:"define",ba:"DOF_BOKEH",aa:["1"]},{$:"define",ba:"COC_ALL",aa:["0"]},{$:"define",ba:"COC_FOREGROUND",aa:["1"]},{$:"define",ba:"COC_COMBINE",aa:["2"]},{$:"define",ba:"VT_WORLD_TO_WORLD",aa:["0"]},{$:"define",ba:"VT_WORLD_TO_OBJECT",aa:["1"]},{$:"define",ba:"VT_WORLD_TO_CAMERA",aa:["2"]},{$:"define",ba:"VT_OBJECT_TO_WORLD",aa:["3"]},{$:"define",ba:"VT_OBJECT_TO_OBJECT",
aa:["4"]},{$:"define",ba:"VT_OBJECT_TO_CAMERA",aa:["5"]},{$:"define",ba:"VT_CAMERA_TO_WORLD",aa:["6"]},{$:"define",ba:"VT_CAMERA_TO_OBJECT",aa:["7"]},{$:"define",ba:"VT_CAMERA_TO_CAMERA",aa:["8"]},{$:"define",ba:"VT_POINT",aa:["0"]},{$:"define",ba:"VT_VECTOR",aa:["1"]},{$:"define",ba:"VT_NORMAL",aa:["2"]},{$:"define",ba:"NM_TANGENT",aa:["0"]},{$:"define",ba:"NM_OBJECT",aa:["1"]},{$:"define",ba:"NM_WORLD",aa:["2"]},{$:"define",ba:"NM_BLENDER_OBJECT",aa:["3"]},{$:"define",ba:"NM_BLENDER_WORLD",aa:["4"]},
{$:"define",ba:"BILLBOARD_ALIGN_VIEW",aa:["1"]},{$:"define",ba:"BILLBOARD_ALIGN_XY",aa:["2"]},{$:"define",ba:"BILLBOARD_ALIGN_YZ",aa:["3"]},{$:"define",ba:"BILLBOARD_ALIGN_ZX",aa:["4"]},{$:"define",ba:"POST_EFFECT_NONE",aa:["1"]},{$:"define",ba:"POST_EFFECT_GRAYSCALE",aa:["2"]},{$:"define",ba:"POST_EFFECT_BLUR",aa:["3"]},{$:"define",ba:"POST_EFFECT_GLOW_BLUR",aa:["4"]},{$:"define",ba:"POST_EFFECT_DOF_BLUR",aa:["5"]},{$:"define",ba:"POST_EFFECT_ALPHA_BLUR",aa:["6"]},{$:"define",ba:"POST_EFFECT_EXTEND",
aa:["7"]},{$:"define",ba:"FLIP_CUBEMAP_COORDS",aa:["8"]},{$:"define",ba:"BLUR_PASS_1",aa:["1"]},{$:"define",ba:"BLUR_PASS_2",aa:["2"]},{$:"define",ba:"BLUR_PASS_3",aa:["3"]},{$:"define",ba:"BLUR_PASS_4",aa:["4"]},{$:"define",ba:"BLUR_PASS_5",aa:["5"]},{$:"define",ba:"DV_NONE",aa:["0"]},{$:"define",ba:"DV_OPAQUE_WIREFRAME",aa:["1"]},{$:"define",ba:"DV_TRANSPARENT_WIREFRAME",aa:["2"]},{$:"define",ba:"DV_FRONT_BACK_VIEW",aa:["3"]},{$:"define",ba:"DV_BOUNDINGS",aa:["4"]},{$:"define",ba:"DV_CLUSTERS_VIEW",
aa:["5"]},{$:"define",ba:"DV_BATCHES_VIEW",aa:["6"]},{$:"define",ba:"DV_RENDER_TIME",aa:["7"]},{$:"define",ba:"SSAO_QUALITY_8",aa:["1"]},{$:"define",ba:"SSAO_QUALITY_16",aa:["2"]},{$:"define",ba:"SSAO_QUALITY_24",aa:["3"]},{$:"define",ba:"SSAO_QUALITY_32",aa:["4"]},{$:"define",ba:"AA_METHOD_FXAA_LIGHT",aa:["1"]},{$:"define",ba:"AA_METHOD_FXAA_QUALITY",aa:["2"]},{$:"define",ba:"AA_QUALITY_LOW",aa:["0"]},{$:"define",ba:"AA_QUALITY_MEDIUM",aa:["1"]},{$:"define",ba:"AA_QUALITY_HIGH",aa:["2"]},{$:"define",
ba:"SMAA_RESOLVE",aa:["25"]},{$:"define",ba:"SMAA_EDGE_DETECTION",aa:["24"]},{$:"define",ba:"SMAA_BLENDING_WEIGHT_CALCULATION",aa:["23"]},{$:"define",ba:"SMAA_NEIGHBORHOOD_BLENDING",aa:["26"]},{$:"define",ba:"AA_METHOD_SMAA_LOW",aa:["1"]},{$:"define",ba:"AA_METHOD_SMAA_MEDIUM",aa:["2"]},{$:"define",ba:"AA_METHOD_SMAA_HIGH",aa:["3"]},{$:"define",ba:"AA_METHOD_SMAA_ULTRA",aa:["4"]},{$:"define",ba:"REFL_PASS_NONE",aa:["0"]},{$:"define",ba:"REFL_PASS_PLANE",aa:["1"]},{$:"define",ba:"REFL_PASS_CUBE",aa:["2"]},
{$:"define",ba:"SRGB_NONE",aa:["0"]},{$:"define",ba:"SRGB_SIMPLE",aa:["1"]},{$:"define",ba:"SRGB_PROPER",aa:["2"]},{$:"define",ba:"CAM_TYPE_ORTHO",aa:["0"]},{$:"define",ba:"CAM_TYPE_PERSP",aa:["1"]},{$:"define",ba:"M_PI",aa:["3.14159265359"]},{$:"define",ba:"M_PI_4",aa:["0.785398163"]},{$:"define",ba:"INV_PI",aa:["0.318309886"]},{$:"define",ba:"UP_VECTOR",aa:"vec3 ( 0.0 , 0.0 , 1.0 )".split(" ")},{$:"define",ba:"RIGHT_VECTOR",aa:"vec3 ( 1.0 , 0.0 , 0.0 )".split(" ")},{$:"define",ba:"TOWARD_VECTOR",
aa:"vec3 ( 0.0 , - 1.0 , 0.0 )".split(" ")},{$:"cond",da:[{$:"if",ga:["CONSTANTS_HACK"],ha:{$:"grp",da:[{$:"txt",aa:"float _0_0 = 0.0 ; float _0_5 = 0.5 ; float _1_0 = 1.0 ; float _255_0 = 255.0 ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"define",ba:"_0_0",aa:["0.0"]},{$:"define",ba:"_0_5",aa:["0.5"]},{$:"define",ba:"_1_0",aa:["1.0"]},{$:"define",ba:"_255_0",aa:["255.0"]}]}}]}]}}]}]};f["include/to_world.glslv"]={$:"grp",da:[{$:"cond",da:[{$:"ifndef",ba:"TO_WORLD_GLSLV",ha:{$:"grp",da:[{$:"define",
ba:"TO_WORLD_GLSLV",aa:[""]},{$:"include",oa:"math.glslv"},{$:"var",ba:"BILLBOARD_ALIGN",aa:["BILLBOARD_ALIGN_VIEW"]},{$:"var",ba:"BILLBOARD_SPHERICAL",aa:["0"]},{$:"var",ba:"BILLBOARD_RANDOM",aa:["0"]},{$:"var",ba:"BILLBOARD",aa:["0"]},{$:"var",ba:"BILLBOARD_JITTERED",aa:["0"]},{$:"var",ba:"BILLBOARD_PRES_GLOB_ORIENTATION",aa:["0"]},{$:"var",ba:"STATIC_BATCH",aa:["0"]},{$:"var",ba:"REFLECTION_PASS",aa:["REFL_PASS_NONE"]},{$:"define",ba:"MAX_BILLBOARD_ANGLE",aa:["M_PI_4"]},{$:"cond",da:[{$:"if",ga:["BILLBOARD_SPHERICAL",
"BILLBOARD",{$:"logic_negative_expr",ia:1},"BILLBOARD_ALIGN","BILLBOARD_ALIGN_VIEW",{$:"equal_expr",ia:2},{$:"logical_and_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"mat3 bn ( vec3 KP , mat3 N ) { vec4 KQ = ry ( N ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["REFLECTION_PASS","REFL_PASS_PLANE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec4 KR = X ( RIGHT_VECTOR , - M_PI / 2.0 ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec4 KR = X ( RIGHT_VECTOR , M_PI / 2.0 ) ;".split(" ")}]}}]},
{$:"txt",aa:"KQ = rc ( KR , KQ ) ; KQ = kV ( KQ ) ; mat3 bo = aY ( ) ; bo = aZ ( KP , bo ) ; bo = bc ( KQ , bo ) ; return bo ; }".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"mat3 KT ( vec3 lL , vec3 KP ) { vec3 KS = lL - KP ; KS . z = 0.0 ; KS = normalize ( KS ) ; vec4 KQ = ri ( KS , TOWARD_VECTOR ) ; mat3 bo = aY ( ) ; bo = aZ ( KP , bo ) ; bo = bc ( KQ , bo ) ; return bo ; }".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["BILLBOARD_JITTERED"],ha:{$:"grp",da:[{$:"txt",aa:"mat3 at ( in vec3 KU , float KV , float KW , float KX , vec3 bf , mat3 Z ) { float IV = fract ( length ( bf ) / 0.17 ) ; float KY = KX + IV / 10.0 ; float KZ = IV ; if ( KX != 0.0 ) KZ /= KX ; KU *= 1.0 + 0.5 * sin ( KV ) ; float K_ = length ( KU ) * KW * sin ( 2.0 * 3.14 * KV * KY + KZ ) ; vec4 La = X ( TOWARD_VECTOR , K_ ) ; vec4 Lb = ry ( Z ) ; Lb = rc ( Lb , La ) ; Z = bc ( Lb , Z ) ; return Z ; }".split(" ")}]}}]},
{$:"txt",aa:"mat3 as ( in vec3 lL , in vec3 aq , in mat3 N , in mat3 Z ) {".split(" ")},{$:"cond",da:[{$:"if",ga:["BILLBOARD_SPHERICAL","BILLBOARD",{$:"logic_negative_expr",ia:1},"BILLBOARD_ALIGN","BILLBOARD_ALIGN_VIEW",{$:"equal_expr",ia:2},{$:"logical_and_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"mat3 l_ = bn ( aq , N ) ;".split(" ")}]}},{$:"elif",ga:["BILLBOARD_RANDOM"],ha:{$:"grp",da:[{$:"txt",aa:"float IV = fract ( ( aq . x * 1.43 - aq . z * 0.123 + aq . y * 6.1 ) ) ; float Lc = 2.0 * M_PI * IV ; vec4 Ld = ry ( N ) ; float Le = asin ( 2.0 * ( Ld . x * Ld . y - Ld . z * Ld . w ) ) ; float hy = Le - Lc ; if ( hy < 0.0 ) hy = 2.0 * M_PI + hy ; float Lf = Lc ; if ( hy <= MAX_BILLBOARD_ANGLE ) Lf += hy ; else if ( hy <= M_PI - MAX_BILLBOARD_ANGLE ) Lf += MAX_BILLBOARD_ANGLE * ( 2.0 * hy - M_PI ) / ( 2.0 * MAX_BILLBOARD_ANGLE - M_PI ) ; else if ( hy <= M_PI + MAX_BILLBOARD_ANGLE ) Lf += hy - M_PI ; else if ( hy <= 2.0 * M_PI - MAX_BILLBOARD_ANGLE ) Lf += MAX_BILLBOARD_ANGLE * ( 2.0 * hy - M_PI ) / ( 2.0 * MAX_BILLBOARD_ANGLE - M_PI ) + M_PI ; else Lf += hy - 2.0 * M_PI ; vec4 Lg = X ( UP_VECTOR , Lf ) ; mat3 l_ = aY ( ) ; l_ = aZ ( aq , l_ ) ; l_ = bc ( Lg , l_ ) ;".split(" ")}]}},
{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"mat3 l_ = KT ( lL , aq ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["BILLBOARD_PRES_GLOB_ORIENTATION","STATIC_BATCH",{$:"logic_negative_expr",ia:1},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"Z = aZ ( vec3 ( 0.0 ) , Z ) ; l_ = bd ( l_ , Z ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec3 Lh = rA ( l_ ) ; vec3 Li = rA ( Z ) ; l_ = a_ ( Lh * Li , l_ ) ;".split(" ")}]}}]},{$:"txt",aa:"return l_ ; } au av ( in vec3 fr , in vec3 Lj , in vec3 Lk , in vec3 Ll , in vec3 Lm , in vec3 Ln , in mat3 Z ) { fr = ap ( Z , fr ) ; Lj = ap ( Z , Lj ) ; Lk = _ ( Z , Lk ) ; Ll = _ ( Z , Ll ) ; Lm = _ ( Z , Lm ) ; Ln = bI ( Z , Ln ) ; return ma ( au ( fr , Lj , Lk , Ll , Lm , Ln , vec3 ( 0.0 ) ) ) ; }".split(" ")}]}}]}]};
f["include/wind_bending.glslv"]={$:"grp",da:[{$:"cond",da:[{$:"ifndef",ba:"WIND_BENDING_GLSLV",ha:{$:"grp",da:[{$:"define",ba:"WIND_BENDING_GLSLV",aa:[""]},{$:"var",ba:"WIND_BEND",aa:["0"]},{$:"var",ba:"MAIN_BEND_COL",aa:["0"]},{$:"var",ba:"DETAIL_BEND",aa:["0"]},{$:"var",ba:"BEND_CENTER_ONLY",aa:["0"]},{$:"var",ba:"REFLECTION_PASS",aa:["REFL_PASS_NONE"]},{$:"var",ba:"BILLBOARD",aa:["0"]},{$:"include",oa:"std.glsl"},{$:"cond",da:[{$:"if",ga:["WIND_BEND"],ha:{$:"grp",da:[{$:"txt",aa:"void LA ( inout vec3 bt , in vec3 Lo , in float Lp , in float Lq , in float fy , in vec3 KU , in float Lr , in mat4 b_ ) {".split(" ")},
{$:"cond",da:[{$:"if",ga:["REFLECTION_PASS","REFL_PASS_PLANE",{$:"equal_expr",ia:2},"BILLBOARD",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 Ls = ( b_ * vec4 ( bt , 1.0 ) ) . xyz ; vec3 Lt = ( b_ * vec4 ( Lo , 1.0 ) ) . xyz ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec3 Ls = bt ; vec3 Lt = Lo ;".split(" ")}]}}]},{$:"txt",aa:"float dD = length ( Lt ) ; float Lu = Lq * ( 1.0 + 0.1 * fract ( dD ) ) ; float Lv = Lp * Lr * ( 1.0 + sin ( 2.0 * 3.14 * fy * Lu + dD ) ) ; float Lw = ( Ls . z - Lt . z ) * abs ( Lv ) ; Lw += 1.0 ; Lw *= Lw ; Lw = Lw * Lw - Lw ; vec3 Lx = Ls ; Lx . xy += KU . xy * Lw * sign ( Lv ) ; vec3 Ly = Lx - Lt ; if ( all ( equal ( Ly , vec3 ( 0.0 ) ) ) ) bt = Lo ; else {".split(" ")},
{$:"cond",da:[{$:"if",ga:["REFLECTION_PASS","REFL_PASS_PLANE",{$:"equal_expr",ia:2},"BILLBOARD",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"Ly = ( b_ * vec4 ( Ly , 0.0 ) ) . xyz ;".split(" ")}]}}]},{$:"txt",aa:"float Lz = length ( Ls - Lt ) ; bt = Lo + normalize ( Ly ) * Lz ; } }".split(" ")},{$:"cond",da:[{$:"if",ga:["DETAIL_BEND"],ha:{$:"grp",da:[{$:"txt",aa:"vec4 LB ( vec4 x ) { return x * x * ( 3.0 - 2.0 * x ) ; } vec4 LC ( vec4 x ) { return abs ( fract ( x + 0.5 ) * 2.0 - 1.0 ) ; } vec4 LD ( vec4 x ) { return LB ( LC ( x ) ) ; } void LP ( inout vec3 bt , in float fy , in vec3 U , in vec3 KU , in vec3 Lo , in float LE , in float LF , in float LG , in vec3 LH , in mat4 b_ ) { float LI ; float LJ ; float LK ; vec2 LL ; vec4 LM ; vec2 LN ; vec3 LO ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["REFLECTION_PASS","REFL_PASS_PLANE",{$:"equal_expr",ia:2},"BILLBOARD",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 Ls = ( b_ * vec4 ( bt , 1.0 ) ) . xyz ; vec3 Lt = ( b_ * vec4 ( Lo , 1.0 ) ) . xyz ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec3 Ls = bt ; vec3 Lt = Lo ;".split(" ")}]}}]},{$:"txt",aa:"LI = dot ( Lt , vec3 ( 1.0 ) ) ; LJ = LI + LH . g ; LK = dot ( Ls , vec3 ( LH . g ) ) ; LL = ( fy + vec2 ( LK , LJ ) ) ; LM = ( ( fract ( ( LL . xxyy * vec4 ( 1.975 , 0.793 , 0.375 , 0.193 ) ) ) * 2.0 ) - 1.0 ) * length ( KU ) * LE ; LM = LD ( LM ) ; LN = LM . xz + LM . yw ; LN . y = 0.5 - LN . y ; LO = LN . xxy * LH . rrb * vec3 ( LF * U . x , LF * U . y , LG ) ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["REFLECTION_PASS","REFL_PASS_PLANE",{$:"equal_expr",ia:2},"BILLBOARD",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"LO = ( b_ * vec4 ( LO , 0.0 ) ) . xyz ;".split(" ")}]}}]},{$:"txt",aa:["bt","+=","LO",";","}"]}]}}]},{$:"txt",aa:"void ax ( inout vec3 O , inout vec3 ao , in vec3 U , in mat4 b_ ) { vec3 LQ = u_wind * 1.0 + 0.7 * sin ( u_time ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["BEND_CENTER_ONLY"],ha:{$:"grp",da:[{$:"txt",aa:"vec3 LR = ao ; vec3 LS = a_emitter_center ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["REFLECTION_PASS","REFL_PASS_PLANE",{$:"equal_expr",ia:2},"BILLBOARD",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"LS = ( b_ * vec4 ( LS , 1.0 ) ) . xyz ;".split(" ")}]}}]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec3 LR = O ; vec3 LS = ao ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["MAIN_BEND_COL"],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["DETAIL_BEND"],ha:{$:"grp",da:[{$:"txt",aa:"LP ( LR , u_time , U , LQ , LS , au_detail_bending_freq , au_detail_bending_amp , au_branch_bending_amp , a_bending_col_detail , b_ ) ;".split(" ")}]}}]},
{$:"txt",aa:"LA ( LR , LS , au_wind_bending_amp , au_wind_bending_freq , u_time , LQ , a_bending_col_main , b_ ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"LA ( LR , LS , au_wind_bending_amp , au_wind_bending_freq , u_time , LQ , 1.0 , b_ ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["BEND_CENTER_ONLY"],ha:{$:"grp",da:[{$:"txt",aa:"O += LR - ao ; ao = LR ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"O = LR ; ao = LS ;".split(" ")}]}}]},{$:"txt",aa:["}"]}]}}]}]}}]}]}}},function(D,
w,f){Object.defineProperty(w,"__esModule",{value:!0});f.d(w,"parser",function(){return M});var M=function(){function f(f,w,e,m,C,v){this.message=f;this.offset=m;this.line=C;this.qo=v;this.name="SyntaxError"}(function(f,w){function e(){this.constructor=f}e.prototype=w.prototype;f.prototype=new e})(f,Error);return{SyntaxError:f,parse:function(n){function w(){var a;aa++;var b=a=x;aa++;var c=x;if(n.substr(x,7)===Fb){var d=Fb;x+=7}else d=h,0===aa&&v(gb);if(d!==h){var g=x;aa++;var e=oa();aa--;e===h?g=void 0:
(x=g,g=h);g!==h?c=d=[d,g]:(x=c,c=h)}else x=c,c=h;aa--;c===h?b=void 0:(x=b,b=h);b!==h?(b=Ja(),b!==h?a=b:(x=a,a=h)):(x=a,a=h);aa--;a===h&&0===aa&&v(Vb);return a}function e(a){for(var b="",c=0;c<a.length;c++)b+=a[c][1];return b}function m(a,b){a=[a];for(var c=0;c<b.length;c++)a.push(b[c][1]);return a}function C(a){if(Yd!==a){Yd>a&&(Yd=0,ne={line:1,qo:1,Os:!1});var b=ne,c;for(c=Yd;c<a;c++){var d=n.charAt(c);"\n"===d?(b.Os||b.line++,b.qo=1,b.Os=!1):"\r"===d||"\u2028"===d||"\u2029"===d?(b.line++,b.qo=1,
b.Os=!0):(b.qo++,b.Os=!1)}Yd=a}return ne}function v(a){x<md||(x>md&&(md=x,Ed=[]),Ed.push(a))}function q(){var a=x;var b=ka();if(b!==h)if(b=r(),b!==h){var c=ka();c!==h?a=b:(x=a,a=h)}else x=a,a=h;else x=a,a=h;return a}function r(){var a=x;var b=y();if(b!==h){var c=[];var d=x;var g=ka();if(g!==h){var e=y();e!==h?d=g=[g,e]:(x=d,d=h)}else x=d,d=h;for(;d!==h;)c.push(d),d=x,g=ka(),g!==h?(e=y(),e!==h?d=g=[g,e]:(x=d,d=h)):(x=d,d=h);c!==h?a=b=m(b,c):(x=a,a=h)}else x=a,a=h;a===h&&(a=null);a!==h&&(a={$:"grp",
da:null!==a?a:[]});return a}function y(){var d;var f=x;var l=x;if(35===n.charCodeAt(x)){var m=Va;x++}else m=h,0===aa&&v(Ca);if(m!==h){var p=ja();if(p!==h){if(n.substr(x,2)===Wa){var t=Wa;x+=2}else t=h,0===aa&&v(Ra);if(t!==h){var q=ta();if(q!==h){var u=E();if(u!==h){var y=ja();if(y!==h){var C=va();if(C!==h){var z=ka();if(z!==h){var A=r();A!==h?l=m={$:"if",ga:u,ha:A}:(x=l,l=h)}else x=l,l=h}else x=l,l=h}else x=l,l=h}else x=l,l=h}else x=l,l=h}else x=l,l=h}else x=l,l=h}else x=l,l=h;l===h&&(l=x,35===n.charCodeAt(x)?
(m=Va,x++):(m=h,0===aa&&v(Ca)),m!==h?(p=ja(),p!==h?(n.substr(x,5)===V?(t=V,x+=5):(t=h,0===aa&&v(ab)),t!==h?(q=ta(),q!==h?(u=w(),u!==h?(y=ja(),y!==h?(C=va(),C!==h?(z=ka(),z!==h?(A=r(),A!==h?l=m={$:"ifdef",ba:u,ha:A}:(x=l,l=h)):(x=l,l=h)):(x=l,l=h)):(x=l,l=h)):(x=l,l=h)):(x=l,l=h)):(x=l,l=h)):(x=l,l=h)):(x=l,l=h),l===h&&(l=x,35===n.charCodeAt(x)?(m=Va,x++):(m=h,0===aa&&v(Ca)),m!==h?(p=ja(),p!==h?(n.substr(x,6)===bb?(t=bb,x+=6):(t=h,0===aa&&v(Ua)),t!==h?(q=ta(),q!==h?(u=w(),u!==h?(y=ja(),y!==h?(C=va(),
C!==h?(z=ka(),z!==h?(A=r(),A!==h?l=m={$:"ifndef",ba:u,ha:A}:(x=l,l=h)):(x=l,l=h)):(x=l,l=h)):(x=l,l=h)):(x=l,l=h)):(x=l,l=h)):(x=l,l=h)):(x=l,l=h)):(x=l,l=h)));var B=l;if(B!==h){var F=ka();if(F!==h){var H=[];for(d=a();d!==h;)H.push(d),d=a();if(H!==h)if(d=ka(),d!==h){var I=x;if(35===n.charCodeAt(x)){var R=Va;x++}else R=h,0===aa&&v(Ca);if(R!==h){var P=ja();if(P!==h){if(n.substr(x,4)===fa){var N=fa;x+=4}else N=h,0===aa&&v(Na);if(N!==h){var O=ja();if(O!==h){var na=va();if(na!==h){var L=ka();if(L!==h){var la=
r();la!==h?I=R={$:"else",ha:la}:(x=I,I=h)}else x=I,I=h}else x=I,I=h}else x=I,I=h}else x=I,I=h}else x=I,I=h}else x=I,I=h;var J=I;J===h&&(J=null);if(J!==h){var da=ka();if(da!==h){var K=x;if(35===n.charCodeAt(x)){var T=Va;x++}else T=h,0===aa&&v(Ca);if(T!==h){var M=ja();if(M!==h){if(n.substr(x,5)===Xa){var W=Xa;x+=5}else W=h,0===aa&&v(ib);if(W!==h){var S=ja();if(S!==h){var ca=xa();ca!==h?K=T=[T,M,W,S,ca]:(x=K,K=h)}else x=K,K=h}else x=K,K=h}else x=K,K=h}else x=K,K=h;var Y=K;if(Y!==h){for(var ea=J,U=[B],
X=0;X<H.length;X++)U.push(H[X]);null!==ea&&U.push(ea);f=B={$:"cond",da:U}}else x=f,f=h}else x=f,f=h}else x=f,f=h}else x=f,f=h;else x=f,f=h}else x=f,f=h}else x=f,f=h;var ia=f;if(ia===h){var Q=x;if(35===n.charCodeAt(x)){var pa=Va;x++}else pa=h,0===aa&&v(Ca);if(pa!==h){var Z=ja();if(Z!==h){if(n.substr(x,7)===jb){var ba=jb;x+=7}else ba=h,0===aa&&v(fb);if(ba!==h){var ha=ja();if(ha!==h){var ma=x;if(60===n.charCodeAt(x)){var ra=pd;x++}else ra=h,0===aa&&v(qd);if(ra!==h){var oa=ja();if(oa!==h){var Ja;var Ha=
[];var Ea=Ja=x;aa++;var za=xa();za===h&&(62===n.charCodeAt(x)?(za=xc,x++):(za=h,0===aa&&v(qc)));aa--;za===h?Ea=void 0:(x=Ea,Ea=h);Ea!==h?(za=Da(),za!==h?Ja=Ea=[Ea,za]:(x=Ja,Ja=h)):(x=Ja,Ja=h);for(;Ja!==h;)Ha.push(Ja),Ea=Ja=x,aa++,za=xa(),za===h&&(62===n.charCodeAt(x)?(za=xc,x++):(za=h,0===aa&&v(qc))),aa--,za===h?Ea=void 0:(x=Ea,Ea=h),Ea!==h?(za=Da(),za!==h?Ja=Ea=[Ea,za]:(x=Ja,Ja=h)):(x=Ja,Ja=h);Ha!==h&&(Ha=e(Ha));var wa=Ha;if(wa!==h){var Ga=ja();if(Ga!==h){if(62===n.charCodeAt(x)){var ya=xc;x++}else ya=
h,0===aa&&v(qc);ya!==h?ma=ra=wa:(x=ma,ma=h)}else x=ma,ma=h}else x=ma,ma=h}else x=ma,ma=h}else x=ma,ma=h;if(ma===h)if(ma=x,34===n.charCodeAt(x)?(ra=Bc,x++):(ra=h,0===aa&&v(nc)),ra!==h)if(oa=ja(),oa!==h){var qa;var Ma=[];var Fa=qa=x;aa++;var sa=xa();sa===h&&(34===n.charCodeAt(x)?(sa=Bc,x++):(sa=h,0===aa&&v(nc)));aa--;sa===h?Fa=void 0:(x=Fa,Fa=h);Fa!==h?(sa=Da(),sa!==h?qa=Fa=[Fa,sa]:(x=qa,qa=h)):(x=qa,qa=h);for(;qa!==h;)Ma.push(qa),Fa=qa=x,aa++,sa=xa(),sa===h&&(34===n.charCodeAt(x)?(sa=Bc,x++):(sa=h,
0===aa&&v(nc))),aa--,sa===h?Fa=void 0:(x=Fa,Fa=h),Fa!==h?(sa=Da(),sa!==h?qa=Fa=[Fa,sa]:(x=qa,qa=h)):(x=qa,qa=h);Ma!==h&&(Ma=e(Ma));wa=Ma;wa!==h?(Ga=ja(),Ga!==h?(34===n.charCodeAt(x)?(ya=Bc,x++):(ya=h,0===aa&&v(nc)),ya!==h?ma=ra=wa:(x=ma,ma=h)):(x=ma,ma=h)):(x=ma,ma=h)}else x=ma,ma=h;else x=ma,ma=h;var ua=ma;if(ua!==h){var Ba=ja();if(Ba!==h){var La=xa();La!==h?Q=pa={$:"include",oa:ua}:(x=Q,Q=h)}else x=Q,Q=h}else x=Q,Q=h}else x=Q,Q=h}else x=Q,Q=h}else x=Q,Q=h}else x=Q,Q=h;if(Q===h){Q=x;35===n.charCodeAt(x)?
(pa=Va,x++):(pa=h,0===aa&&v(Ca));if(pa!==h)if(Z=ja(),Z!==h)if(n.substr(x,6)===rb?(ba=rb,x+=6):(ba=h,0===aa&&v(cb)),ba===h&&(n.substr(x,3)===Wb?(ba=Wb,x+=3):(ba=h,0===aa&&v(Pb))),ba!==h)if(ha=ta(),ha!==h)if(ua=w(),ua!==h){Ba=x;La=ta();if(La!==h){var Ta=g();Ta!==h?Ba=La=[La,Ta]:(x=Ba,Ba=h)}else x=Ba,Ba=h;Ba===h&&(Ba=null);if(Ba!==h)if(La=ja(),La!==h)if(Ta=xa(),Ta!==h){var Oa=ba,Pa=ua,Qa=Ba,Za=[];if(null===Qa)Za.push("");else for(var $a=0;$a<Qa[1].length;$a++)Za.push(Qa[1][$a]);Q=pa={$:Oa,ba:Pa,aa:Za}}else x=
Q,Q=h;else x=Q,Q=h;else x=Q,Q=h}else x=Q,Q=h;else x=Q,Q=h;else x=Q,Q=h;else x=Q,Q=h;else x=Q,Q=h;if(Q===h){Q=x;35===n.charCodeAt(x)?(pa=Va,x++):(pa=h,0===aa&&v(Ca));if(pa!==h)if(Z=ja(),Z!==h)if(n.substr(x,5)===hb?(ba=hb,x+=5):(ba=h,0===aa&&v(pb)),ba!==h)if(ha=x,ua=ta(),ua!==h?(Ba=g(),Ba!==h?ha=ua=[ua,Ba]:(x=ha,ha=h)):(x=ha,ha=h),ha===h&&(ha=null),ha!==h)if(ua=ja(),ua!==h)if(Ba=xa(),Ba!==h){var eb=ha,lb=[];if(null!==eb)for(var kb=0;kb<eb[1].length;kb++)lb.push(eb[1][kb]);Q=pa={$:"error",aa:lb}}else x=
Q,Q=h;else x=Q,Q=h;else x=Q,Q=h;else x=Q,Q=h;else x=Q,Q=h;else x=Q,Q=h;if(Q===h&&(Q=x,35===n.charCodeAt(x)?(pa=Va,x++):(pa=h,0===aa&&v(Ca)),pa!==h?(Z=ja(),Z!==h?(n.substr(x,4)===vb?(ba=vb,x+=4):(ba=h,0===aa&&v(Qb)),ba!==h?(ha=ta(),ha!==h?(ua=g(),ua!==h?(Ba=ja(),Ba!==h?(La=xa(),La!==h?Q=pa={$:"line",aa:ua}:(x=Q,Q=h)):(x=Q,Q=h)):(x=Q,Q=h)):(x=Q,Q=h)):(x=Q,Q=h)):(x=Q,Q=h)):(x=Q,Q=h),Q===h)){Q=x;35===n.charCodeAt(x)?(pa=Va,x++):(pa=h,0===aa&&v(Ca));if(pa!==h)if(Z=ja(),Z!==h)if(n.substr(x,6)===wb?(ba=
wb,x+=6):(ba=h,0===aa&&v(Ia)),ba!==h)if(ha=ta(),ha!==h)if(ua=w(),ua!==h)if(Ba=ta(),Ba!==h)if(La=g(),La!==h)if(Ta=ja(),Ta!==h){var nb=xa();nb!==h?Q=pa={$:"pragma",ba:ua,aa:La}:(x=Q,Q=h)}else x=Q,Q=h;else x=Q,Q=h;else x=Q,Q=h;else x=Q,Q=h;else x=Q,Q=h;else x=Q,Q=h;else x=Q,Q=h;else x=Q,Q=h;if(Q===h&&(Q=x,35===n.charCodeAt(x)?(pa=Va,x++):(pa=h,0===aa&&v(Ca)),pa!==h?(Z=ja(),Z!==h?(n.substr(x,5)===G?(ba=G,x+=5):(ba=h,0===aa&&v(Ka)),ba!==h?(ha=ta(),ha!==h?(ua=w(),ua!==h?(Ba=ja(),Ba!==h?(La=xa(),La!==h?
Q=pa={$:"undef",ba:ua}:(x=Q,Q=h)):(x=Q,Q=h)):(x=Q,Q=h)):(x=Q,Q=h)):(x=Q,Q=h)):(x=Q,Q=h)):(x=Q,Q=h),Q===h)){Q=x;35===n.charCodeAt(x)?(pa=Va,x++):(pa=h,0===aa&&v(Ca));if(pa!==h)if(Z=ja(),Z!==h)if(n.substr(x,7)===sb?(ba=sb,x+=7):(ba=h,0===aa&&v(Sb)),ba!==h)if(ha=x,ua=ta(),ua!==h?(Ba=g(),Ba!==h?ha=ua=[ua,Ba]:(x=ha,ha=h)):(x=ha,ha=h),ha===h&&(ha=null),ha!==h)if(ua=ja(),ua!==h)if(Ba=xa(),Ba!==h){var ob=ha,tb=[];if(null!==ob)for(var xb=0;xb<ob[1].length;xb++)tb.push(ob[1][xb]);Q=pa={$:"warning",aa:tb}}else x=
Q,Q=h;else x=Q,Q=h;else x=Q,Q=h;else x=Q,Q=h;else x=Q,Q=h;else x=Q,Q=h;if(Q===h){Q=x;35===n.charCodeAt(x)?(pa=Va,x++):(pa=h,0===aa&&v(Ca));if(pa!==h)if(Z=ja(),Z!==h)if(n.substr(x,9)===Ya?(ba=Ya,x+=9):(ba=h,0===aa&&v(Rc)),ba!==h)if(ha=x,ua=ta(),ua!==h?(Ba=g(),Ba!==h?ha=ua=[ua,Ba]:(x=ha,ha=h)):(x=ha,ha=h),ha===h&&(ha=null),ha!==h)if(ua=ja(),ua!==h)if(Ba=xa(),Ba!==h){var zb=ha,Db=[];if(null!==zb)for(var Bb=0;Bb<zb[1].length;Bb++)Db.push(zb[1][Bb]);Q=pa={$:"extension",aa:Db}}else x=Q,Q=h;else x=Q,Q=h;
else x=Q,Q=h;else x=Q,Q=h;else x=Q,Q=h;else x=Q,Q=h;if(Q===h){Q=x;35===n.charCodeAt(x)?(pa=Va,x++):(pa=h,0===aa&&v(Ca));if(pa!==h)if(Z=ja(),Z!==h)if(n.substr(x,7)===Ic?(ba=Ic,x+=7):(ba=h,0===aa&&v(Xb)),ba!==h)if(ha=ta(),ha!==h)if(ua=Aa(),ua!==h)if(Ba=ja(),Ba!==h)if(La=xa(),La!==h){var Eb=[];null!==ua&&Eb.push(ua);Q=pa={$:"version",aa:Eb}}else x=Q,Q=h;else x=Q,Q=h;else x=Q,Q=h;else x=Q,Q=h;else x=Q,Q=h;else x=Q,Q=h;else x=Q,Q=h;Q===h&&(Q=x,35===n.charCodeAt(x)?(pa=Va,x++):(pa=h,0===aa&&v(Ca)),pa!==
h?(Z=ja(),Z!==h?(ba=xa(),ba!==h?Q=pa={$:"#"}:(x=Q,Q=h)):(x=Q,Q=h)):(x=Q,Q=h))}}}}}}ia=Q;if(ia===h){var mb=x;var db=x;if(35===n.charCodeAt(x)){var Fb=Va;x++}else Fb=h,0===aa&&v(Ca);if(Fb!==h){var Lb=ja();if(Lb!==h){if(n.substr(x,4)===ub){var Jb=ub;x+=4}else Jb=h,0===aa&&v(Jc);if(Jb!==h){var Ob=ta();if(Ob!==h){var Mb=w();if(Mb!==h){var Tb=ja();if(Tb!==h){var Ub=va();if(Ub!==h){var Vb=ka();if(Vb!==h){var Kb=[];var qb=x;var gb=D();if(gb!==h){var ac=ka();ac!==h?qb=gb=[gb,ac]:(x=qb,qb=h)}else x=qb,qb=h;
for(;qb!==h;)Kb.push(qb),qb=x,gb=D(),gb!==h?(ac=ka(),ac!==h?qb=gb=[gb,ac]:(x=qb,qb=h)):(x=qb,qb=h);if(Kb!==h){qb=[];gb=x;ac=k();if(ac!==h){var yb=ka();yb!==h?gb=ac=[ac,yb]:(x=gb,gb=h)}else x=gb,gb=h;for(;gb!==h;)qb.push(gb),gb=x,ac=k(),ac!==h?(yb=ka(),yb!==h?gb=ac=[ac,yb]:(x=gb,gb=h)):(x=gb,gb=h);if(qb!==h){gb=[];ac=x;yb=c();if(yb!==h){var Rb=ka();Rb!==h?ac=yb=[yb,Rb]:(x=ac,ac=h)}else x=ac,ac=h;for(;ac!==h;)gb.push(ac),ac=x,yb=c(),yb!==h?(Rb=ka(),Rb!==h?ac=yb=[yb,Rb]:(x=ac,ac=h)):(x=ac,ac=h);if(gb!==
h){for(var Zb=qb,$b=gb,bc=[],Hb=0;Hb<Kb.length;Hb++)bc.push(Kb[Hb][0]);var cc=[];for(Hb=0;Hb<Zb.length;Hb++)cc.push(Zb[Hb][0]);var dc=[];for(Hb=0;Hb<$b.length;Hb++)dc.push($b[Hb][0]);db=Fb={$:"node",ba:Mb,ma:bc,la:cc,ja:dc}}else x=db,db=h}else x=db,db=h}else x=db,db=h}else x=db,db=h}else x=db,db=h}else x=db,db=h}else x=db,db=h}else x=db,db=h}else x=db,db=h}else x=db,db=h}else x=db,db=h;var ec=db;if(ec!==h){var jc=ka();if(jc!==h){var Gb=x;if(35===n.charCodeAt(x)){var Yb=Va;x++}else Yb=h,0===aa&&v(Ca);
if(Yb!==h){var ic=ja();if(ic!==h){if(n.substr(x,7)===Sa){var gc=Sa;x+=7}else gc=h,0===aa&&v(Ab);if(gc!==h){var kc=ja();if(kc!==h){var hc=xa();hc===h&&(hc=null);hc!==h?Gb=Yb=[Yb,ic,gc,kc,hc]:(x=Gb,Gb=h)}else x=Gb,Gb=h}else x=Gb,Gb=h}else x=Gb,Gb=h}else x=Gb,Gb=h;var sc=Gb;sc!==h?mb=ec:(x=mb,mb=h)}else x=mb,mb=h}else x=mb,mb=h;if(mb===h){var Ib=x;if(35===n.charCodeAt(x)){var lc=Va;x++}else lc=h,0===aa&&v(Ca);if(lc!==h){var tc=ja();if(tc!==h){if(n.substr(x,12)===mc){var pc=mc;x+=12}else pc=h,0===aa&&
v(fc);if(pc!==h){var uc=ja();if(uc!==h){var vc=xa();vc!==h?Ib=lc={$:"nodes_global"}:(x=Ib,Ib=h)}else x=Ib,Ib=h}else x=Ib,Ib=h}else x=Ib,Ib=h}else x=Ib,Ib=h;mb=Ib;if(mb===h){var Nb=x;if(35===n.charCodeAt(x)){var rc=Va;x++}else rc=h,0===aa&&v(Ca);if(rc!==h){var yc=ja();if(yc!==h){if(n.substr(x,10)===Cb){var wc=Cb;x+=10}else wc=h,0===aa&&v(oc);if(wc!==h){var zc=ja();if(zc!==h){var Ac=xa();Ac!==h?Nb=rc={$:"nodes_main"}:(x=Nb,Nb=h)}else x=Nb,Nb=h}else x=Nb,Nb=h}else x=Nb,Nb=h}else x=Nb,Nb=h;mb=Nb}}ia=
mb;ia===h&&(ia=b())}}return ia}function a(){var a=x;if(35===n.charCodeAt(x)){var b=Va;x++}else b=h,0===aa&&v(Ca);if(b!==h)if(b=ja(),b!==h)if(n.substr(x,4)===Qa?(b=Qa,x+=4):(b=h,0===aa&&v(Ba)),b!==h)if(b=ta(),b!==h)if(b=E(),b!==h){var c=ja();if(c!==h)if(c=va(),c!==h)if(c=ka(),c!==h)if(c=r(),c!==h){var d=ka();d!==h?a=b={$:"elif",ga:b,ha:c}:(x=a,a=h)}else x=a,a=h;else x=a,a=h;else x=a,a=h;else x=a,a=h}else x=a,a=h;else x=a,a=h;else x=a,a=h;else x=a,a=h;else x=a,a=h;return a}function D(){var a=x;if(35===
n.charCodeAt(x)){var b=Va;x++}else b=h,0===aa&&v(Ca);if(b!==h)if(b=ja(),b!==h)if(n.substr(x,8)===Ac?(b=Ac,x+=8):(b=h,0===aa&&v(mb)),b!==h)if(b=ta(),b!==h)if(b=w(),b!==h){var c=x;var d=ta();if(d!==h){var e=g();e!==h?c=d=[d,e]:(x=c,c=h)}else x=c,c=h;c===h&&(c=null);if(c!==h)if(d=ja(),d!==h)if(e=va(),e!==h){a=c;c=[];if(null===a)c.push("");else for(d=0;d<a[1].length;d++)c.push(a[1][d]);a=b={$:"node_var",ba:b,aa:c}}else x=a,a=h;else x=a,a=h;else x=a,a=h}else x=a,a=h;else x=a,a=h;else x=a,a=h;else x=a,
a=h;else x=a,a=h;return a}function k(){var a=x;if(35===n.charCodeAt(x)){var b=Va;x++}else b=h,0===aa&&v(Ca);if(b!==h)if(b=ja(),b!==h)if(n.substr(x,7)===nd?(b=nd,x+=7):(b=h,0===aa&&v(eb)),b!==h){var c=x;b=ta();if(b!==h){if(n.substr(x,8)===Tb){var d=Tb;x+=8}else d=h,0===aa&&v(lb);d!==h?c=b=[b,d]:(x=c,c=h)}else x=c,c=h;c===h&&(c=null);if(c!==h){b=x;d=ta();if(d!==h){var e=g();e!==h?b=d=[d,e]:(x=b,b=h)}else x=b,b=h;b===h&&(b=null);if(b!==h)if(d=ja(),d!==h)if(e=va(),e!==h){a=c;c=[];if(null!==b)for(d=0;d<
b[1].length;d++)c.push(b[1][d]);a=b={$:"node_in",ba:c.pop(),fa:c,ea:!!a}}else x=a,a=h;else x=a,a=h;else x=a,a=h}else x=a,a=h}else x=a,a=h;else x=a,a=h;else x=a,a=h;if(a===h){a=x;35===n.charCodeAt(x)?(b=Va,x++):(b=h,0===aa&&v(Ca));if(b!==h)if(b=ja(),b!==h)if(n.substr(x,8)===kc?(b=kc,x+=8):(b=h,0===aa&&v(lc)),b!==h)if(c=x,b=ta(),b!==h?(n.substr(x,8)===Tb?(d=Tb,x+=8):(d=h,0===aa&&v(lb)),d!==h?c=b=[b,d]:(x=c,c=h)):(x=c,c=h),c===h&&(c=null),c!==h)if(b=x,d=ta(),d!==h?(e=g(),e!==h?b=d=[d,e]:(x=b,b=h)):(x=
b,b=h),b===h&&(b=null),b!==h)if(d=ja(),d!==h)if(e=va(),e!==h){a=c;c=[];if(null!==b)for(d=0;d<b[1].length;d++)c.push(b[1][d]);a=b={$:"node_out",ba:c.pop(),fa:c,ea:!!a}}else x=a,a=h;else x=a,a=h;else x=a,a=h;else x=a,a=h;else x=a,a=h;else x=a,a=h;else x=a,a=h;if(a===h)if(a=x,35===n.charCodeAt(x)?(b=Va,x++):(b=h,0===aa&&v(Ca)),b!==h)if(b=ja(),b!==h)if(n.substr(x,10)===ob?(b=ob,x+=10):(b=h,0===aa&&v(Ob)),b!==h)if(c=x,b=ta(),b!==h?(n.substr(x,8)===Tb?(d=Tb,x+=8):(d=h,0===aa&&v(lb)),d!==h?c=b=[b,d]:(x=
c,c=h)):(x=c,c=h),c===h&&(c=null),c!==h)if(b=x,d=ta(),d!==h?(e=g(),e!==h?b=d=[d,e]:(x=b,b=h)):(x=b,b=h),b===h&&(b=null),b!==h)if(d=ja(),d!==h)if(e=va(),e!==h){a=c;c=[];if(null!==b)for(d=0;d<b[1].length;d++)c.push(b[1][d]);a=b={$:"node_param",ba:c.pop(),fa:c,ea:!!a}}else x=a,a=h;else x=a,a=h;else x=a,a=h;else x=a,a=h;else x=a,a=h;else x=a,a=h;else x=a,a=h}return a}function c(){var a=x;var d=x;if(35===n.charCodeAt(x)){var g=Va;x++}else g=h,0===aa&&v(Ca);if(g!==h)if(g=ja(),g!==h)if(n.substr(x,7)===nb?
(g=nb,x+=7):(g=h,0===aa&&v(sa)),g!==h)if(g=ta(),g!==h)if(g=E(),g!==h){var e=ja();if(e!==h)if(e=va(),e!==h)if(e=ka(),e!==h){e=[];var f=x;var k=c();if(k!==h){var m=ka();m!==h?f=k=[k,m]:(x=f,f=h)}else x=f,f=h;for(;f!==h;)e.push(f),f=x,k=c(),k!==h?(m=ka(),m!==h?f=k=[k,m]:(x=f,f=h)):(x=f,f=h);if(e!==h){d=g;g=e;e=[];for(f=0;f<g.length;f++)e.push(g[f][0]);d=g={$:"node_if",ga:d,ja:e}}else x=d,d=h}else x=d,d=h;else x=d,d=h;else x=d,d=h}else x=d,d=h;else x=d,d=h;else x=d,d=h;else x=d,d=h;else x=d,d=h;if(d===
h){d=x;35===n.charCodeAt(x)?(g=Va,x++):(g=h,0===aa&&v(Ca));if(g!==h)if(g=ja(),g!==h)if(n.substr(x,10)===Db?(g=Db,x+=10):(g=h,0===aa&&v(Oa)),g!==h)if(g=ta(),g!==h)if(g=w(),g!==h)if(e=ja(),e!==h)if(e=va(),e!==h)if(e=ka(),e!==h){e=[];f=x;k=c();k!==h?(m=ka(),m!==h?f=k=[k,m]:(x=f,f=h)):(x=f,f=h);for(;f!==h;)e.push(f),f=x,k=c(),k!==h?(m=ka(),m!==h?f=k=[k,m]:(x=f,f=h)):(x=f,f=h);if(e!==h){d=g;g=e;e=[];for(f=0;f<g.length;f++)e.push(g[f][0]);d=g={$:"node_ifdef",ba:d,ja:e}}else x=d,d=h}else x=d,d=h;else x=
d,d=h;else x=d,d=h;else x=d,d=h;else x=d,d=h;else x=d,d=h;else x=d,d=h;else x=d,d=h;if(d===h)if(d=x,35===n.charCodeAt(x)?(g=Va,x++):(g=h,0===aa&&v(Ca)),g!==h)if(g=ja(),g!==h)if(n.substr(x,11)===Z?(g=Z,x+=11):(g=h,0===aa&&v(Jb)),g!==h)if(g=ta(),g!==h)if(g=w(),g!==h)if(e=ja(),e!==h)if(e=va(),e!==h)if(e=ka(),e!==h){e=[];f=x;k=c();k!==h?(m=ka(),m!==h?f=k=[k,m]:(x=f,f=h)):(x=f,f=h);for(;f!==h;)e.push(f),f=x,k=c(),k!==h?(m=ka(),m!==h?f=k=[k,m]:(x=f,f=h)):(x=f,f=h);if(e!==h){d=g;g=e;e=[];for(f=0;f<g.length;f++)e.push(g[f][0]);
d=g={$:"node_ifndef",ba:d,ja:e}}else x=d,d=h}else x=d,d=h;else x=d,d=h;else x=d,d=h;else x=d,d=h;else x=d,d=h;else x=d,d=h;else x=d,d=h;else x=d,d=h}g=d;if(g!==h)if(d=ka(),d!==h){d=[];for(e=l();e!==h;)d.push(e),e=l();if(d!==h)if(e=ka(),e!==h){e=x;35===n.charCodeAt(x)?(f=Va,x++):(f=h,0===aa&&v(Ca));if(f!==h)if(f=ja(),f!==h)if(n.substr(x,9)===tb?(f=tb,x+=9):(f=h,0===aa&&v(cd)),f!==h)if(f=ja(),f!==h)if(f=va(),f!==h)if(f=ka(),f!==h){f=[];k=x;m=c();if(m!==h){var p=ka();p!==h?k=m=[m,p]:(x=k,k=h)}else x=
k,k=h;for(;k!==h;)f.push(k),k=x,m=c(),m!==h?(p=ka(),p!==h?k=m=[m,p]:(x=k,k=h)):(x=k,k=h);if(f!==h){e=[];for(k=0;k<f.length;k++)e.push(f[k][0]);e=f={$:"node_else",ja:e}}else x=e,e=h}else x=e,e=h;else x=e,e=h;else x=e,e=h;else x=e,e=h;else x=e,e=h;else x=e,e=h;e===h&&(e=null);if(e!==h)if(f=ka(),f!==h){f=x;35===n.charCodeAt(x)?(k=Va,x++):(k=h,0===aa&&v(Ca));if(k!==h)if(m=ja(),m!==h)if(n.substr(x,10)===Lb?(p=Lb,x+=10):(p=h,0===aa&&v(Bb)),p!==h){var t=ja();if(t!==h){var q=xa();q!==h?f=k=[k,m,p,t,q]:(x=
f,f=h)}else x=f,f=h}else x=f,f=h;else x=f,f=h;else x=f,f=h;if(f!==h){a=e;g=[g];for(e=0;e<d.length;e++)g.push(d[e]);null!==a&&g.push(a);a=g={$:"node_cond",da:g}}else x=a,a=h}else x=a,a=h;else x=a,a=h}else x=a,a=h;else x=a,a=h}else x=a,a=h;else x=a,a=h;a===h&&(a=b());return a}function l(){var a=x;if(35===n.charCodeAt(x)){var b=Va;x++}else b=h,0===aa&&v(Ca);if(b!==h)if(b=ja(),b!==h)if(n.substr(x,9)===Yc?(b=Yc,x+=9):(b=h,0===aa&&v(Pa)),b!==h)if(b=ta(),b!==h)if(b=E(),b!==h){var d=ja();if(d!==h)if(d=va(),
d!==h)if(d=ka(),d!==h){d=[];var g=x;var e=c();if(e!==h){var f=ka();f!==h?g=e=[e,f]:(x=g,g=h)}else x=g,g=h;for(;g!==h;)d.push(g),g=x,e=c(),e!==h?(f=ka(),f!==h?g=e=[e,f]:(x=g,g=h)):(x=g,g=h);if(d!==h)if(g=ka(),g!==h){a=[];for(g=0;g<d.length;g++)a.push(d[g][0]);a=b={$:"node_elif",ga:b,ja:a}}else x=a,a=h;else x=a,a=h}else x=a,a=h;else x=a,a=h;else x=a,a=h}else x=a,a=h;else x=a,a=h;else x=a,a=h;else x=a,a=h;else x=a,a=h;return a}function b(){var a=g();a!==h&&(a={$:"txt",aa:a});return a}function g(){var a=
x;var b=Aa();if(b!==h){var c=[];var d=x;var g=ja();if(g!==h){var e=Aa();e!==h?d=g=[g,e]:(x=d,d=h)}else x=d,d=h;for(;d!==h;)c.push(d),d=x,g=ja(),g!==h?(e=Aa(),e!==h?d=g=[g,e]:(x=d,d=h)):(x=d,d=h);c!==h?a=b=m(b,c):(x=a,a=h)}else x=a,a=h;return a}function E(){var a=x;var b=M();if(b!==h){var c=[];var d=x;var g=ja();if(g!==h){if(44===n.charCodeAt(x)){var e=Hc;x++}else e=h,0===aa&&v(ic);if(e!==h){var f=ja();if(f!==h){var k=M();k!==h?d=g=[g,e,f,k]:(x=d,d=h)}else x=d,d=h}else x=d,d=h}else x=d,d=h;for(;d!==
h;)c.push(d),d=x,g=ja(),g!==h?(44===n.charCodeAt(x)?(e=Hc,x++):(e=h,0===aa&&v(ic)),e!==h?(f=ja(),f!==h?(k=M(),k!==h?d=g=[g,e,f,k]:(x=d,d=h)):(x=d,d=h)):(x=d,d=h)):(x=d,d=h);c!==h?a=b=0==c.length?b:c[c.length-1]:(x=a,a=h)}else x=a,a=h;return a}function M(){var a=x;var b=u();if(b!==h){var c=ja();if(c!==h)if(63===n.charCodeAt(x)?(c=tc,x++):(c=h,0===aa&&v(Kb)),c!==h)if(c=ja(),c!==h)if(c=E(),c!==h){var d=ja();d!==h?(58===n.charCodeAt(x)?(d=db,x++):(d=h,0===aa&&v(kb)),d!==h?(d=ja(),d!==h?(d=E(),d!==h?(a=
b,a.push.apply(a,c),a.push.apply(a,d),a.push({$:"conditional_expr",ia:3})):(x=a,a=h)):(x=a,a=h)):(x=a,a=h)):(x=a,a=h)}else x=a,a=h;else x=a,a=h;else x=a,a=h;else x=a,a=h}else x=a,a=h;a===h&&(a=u());return a}function u(){var a=x;var b=F();if(b!==h){var c=[];var d=x;var g=ja();if(g!==h){var e=pa();if(e!==h){var f=ja();if(f!==h){var k=F();k!==h?d=g=[g,e,f,k]:(x=d,d=h)}else x=d,d=h}else x=d,d=h}else x=d,d=h;for(;d!==h;)c.push(d),d=x,g=ja(),g!==h?(e=pa(),e!==h?(f=ja(),f!==h?(k=F(),k!==h?d=g=[g,e,f,k]:
(x=d,d=h)):(x=d,d=h)):(x=d,d=h)):(x=d,d=h);if(c!==h){if(a=b,c.length){b={$:"logical_or_expr",ia:c.length+1};for(d=0;d<c.length;d++)a.push.apply(a,c[d][3]);a.push(b)}}else x=a,a=h}else x=a,a=h;return a}function F(){var a=x;var b=R();if(b!==h){var c=[];var d=x;var g=ja();if(g!==h){var e=na();if(e!==h){var f=ja();if(f!==h){var k=R();k!==h?d=g=[g,e,f,k]:(x=d,d=h)}else x=d,d=h}else x=d,d=h}else x=d,d=h;for(;d!==h;)c.push(d),d=x,g=ja(),g!==h?(e=na(),e!==h?(f=ja(),f!==h?(k=R(),k!==h?d=g=[g,e,f,k]:(x=d,d=
h)):(x=d,d=h)):(x=d,d=h)):(x=d,d=h);if(c!==h){if(a=b,c.length){b={$:"logical_and_expr",ia:c.length+1};for(d=0;d<c.length;d++)a.push.apply(a,c[d][3]);a.push(b)}}else x=a,a=h}else x=a,a=h;return a}function R(){var a=x;var b=O();if(b!==h){var c=[];var d=x;var g=ja();if(g!==h){var e=la();if(e!==h){var f=ja();if(f!==h){var k=O();k!==h?d=g=[g,e,f,k]:(x=d,d=h)}else x=d,d=h}else x=d,d=h}else x=d,d=h;for(;d!==h;)c.push(d),d=x,g=ja(),g!==h?(e=la(),e!==h?(f=ja(),f!==h?(k=O(),k!==h?d=g=[g,e,f,k]:(x=d,d=h)):(x=
d,d=h)):(x=d,d=h)):(x=d,d=h);if(c!==h){if(a=b,c.length){b={$:"logical_bitor_expr",ia:c.length+1};for(d=0;d<c.length;d++)a.push.apply(a,c[d][3]);a.push(b)}}else x=a,a=h}else x=a,a=h;return a}function O(){var a=x;var b=K();if(b!==h){var c=[];var g=x;var e=ja();if(e!==h){var f=d();if(f!==h){var k=ja();if(k!==h){var l=K();l!==h?g=e=[e,f,k,l]:(x=g,g=h)}else x=g,g=h}else x=g,g=h}else x=g,g=h;for(;g!==h;)c.push(g),g=x,e=ja(),e!==h?(f=d(),f!==h?(k=ja(),k!==h?(l=K(),l!==h?g=e=[e,f,k,l]:(x=g,g=h)):(x=g,g=h)):
(x=g,g=h)):(x=g,g=h);if(c!==h){if(a=b,c.length){b={$:"logical_bitxor_expr",ia:c.length+1};for(g=0;g<c.length;g++)a.push.apply(a,c[g][3]);a.push(b)}}else x=a,a=h}else x=a,a=h;return a}function K(){var a=x;var b=A();if(b!==h){var c=[];var d=x;var g=ja();if(g!==h){var e=t();if(e!==h){var f=ja();if(f!==h){var k=A();k!==h?d=g=[g,e,f,k]:(x=d,d=h)}else x=d,d=h}else x=d,d=h}else x=d,d=h;for(;d!==h;)c.push(d),d=x,g=ja(),g!==h?(e=t(),e!==h?(f=ja(),f!==h?(k=A(),k!==h?d=g=[g,e,f,k]:(x=d,d=h)):(x=d,d=h)):(x=d,
d=h)):(x=d,d=h);if(c!==h){if(a=b,c.length){b={$:"logical_bitand_expr",ia:c.length+1};for(d=0;d<c.length;d++)a.push.apply(a,c[d][3]);a.push(b)}}else x=a,a=h}else x=a,a=h;return a}function A(){var a=x;var b=ca();if(b!==h){var c=[];var d=x;var g=ja();if(g!==h){var e=H();if(e!==h){var f=ja();if(f!==h){var k=ca();k!==h?d=g=[g,e,f,k]:(x=d,d=h)}else x=d,d=h}else x=d,d=h}else x=d,d=h;for(;d!==h;)c.push(d),d=x,g=ja(),g!==h?(e=H(),e!==h?(f=ja(),f!==h?(k=ca(),k!==h?d=g=[g,e,f,k]:(x=d,d=h)):(x=d,d=h)):(x=d,d=
h)):(x=d,d=h);if(c!==h)for(a=b,b=0;b<c.length;b++)switch(c[b][1]){case "==":d={$:"equal_expr",ia:2};a.push.apply(a,c[b][3]);a.push(d);break;case "!=":d={$:"non_equal_expr",ia:2},a.push.apply(a,c[b][3]),a.push(d)}else x=a,a=h}else x=a,a=h;return a}function ca(){var a=x;var b=L();if(b!==h){var c=[];var d=x;var g=ja();if(g!==h){var e=da();if(e!==h){var f=ja();if(f!==h){var k=L();k!==h?d=g=[g,e,f,k]:(x=d,d=h)}else x=d,d=h}else x=d,d=h}else x=d,d=h;for(;d!==h;)c.push(d),d=x,g=ja(),g!==h?(e=da(),e!==h?
(f=ja(),f!==h?(k=L(),k!==h?d=g=[g,e,f,k]:(x=d,d=h)):(x=d,d=h)):(x=d,d=h)):(x=d,d=h);if(c!==h)for(a=b,b=0;b<c.length;b++)switch(c[b][1]){case "<=":d={$:"le_expr",ia:2};a.push.apply(a,c[b][3]);a.push(d);break;case ">=":d={$:"ge_expr",ia:2};a.push.apply(a,c[b][3]);a.push(d);break;case "<":d={$:"l_expr",ia:2};a.push.apply(a,c[b][3]);a.push(d);break;case ">":d={$:"g_expr",ia:2},a.push.apply(a,c[b][3]),a.push(d)}else x=a,a=h}else x=a,a=h;return a}function L(){var a=x;var b=U();if(b!==h){var c=[];var d=
x;var g=ja();if(g!==h){var e=p();if(e!==h){var f=ja();if(f!==h){var k=U();k!==h?d=g=[g,e,f,k]:(x=d,d=h)}else x=d,d=h}else x=d,d=h}else x=d,d=h;for(;d!==h;)c.push(d),d=x,g=ja(),g!==h?(e=p(),e!==h?(f=ja(),f!==h?(k=U(),k!==h?d=g=[g,e,f,k]:(x=d,d=h)):(x=d,d=h)):(x=d,d=h)):(x=d,d=h);if(c!==h)for(a=b,b=0;b<c.length;b++)switch(c[b][1]){case "<<":d={$:"left_shift_expr",ia:2};a.push.apply(a,c[b][3]);a.push(d);break;case ">>":d={$:"right_shift_expr",ia:2},a.push.apply(a,c[b][3]),a.push(d)}else x=a,a=h}else x=
a,a=h;return a}function U(){var a=x;var b=J();if(b!==h){var c=[];var d=x;var g=ja();if(g!==h){var e=P();if(e!==h){var f=ja();if(f!==h){var k=J();k!==h?d=g=[g,e,f,k]:(x=d,d=h)}else x=d,d=h}else x=d,d=h}else x=d,d=h;for(;d!==h;)c.push(d),d=x,g=ja(),g!==h?(e=P(),e!==h?(f=ja(),f!==h?(k=J(),k!==h?d=g=[g,e,f,k]:(x=d,d=h)):(x=d,d=h)):(x=d,d=h)):(x=d,d=h);if(c!==h)for(a=b,b=0;b<c.length;b++)switch(c[b][1]){case "+":d={$:"add_expr",ia:2};a.push.apply(a,c[b][3]);a.push(d);break;case "-":d={$:"sub_expr",ia:2},
a.push.apply(a,c[b][3]),a.push(d)}else x=a,a=h}else x=a,a=h;return a}function J(){var a=x;var b=W();if(b!==h){var c=[];var d=x;var g=ja();if(g!==h){var e=I();if(e!==h){var f=ja();if(f!==h){var k=W();k!==h?d=g=[g,e,f,k]:(x=d,d=h)}else x=d,d=h}else x=d,d=h}else x=d,d=h;for(;d!==h;)c.push(d),d=x,g=ja(),g!==h?(e=I(),e!==h?(f=ja(),f!==h?(k=W(),k!==h?d=g=[g,e,f,k]:(x=d,d=h)):(x=d,d=h)):(x=d,d=h)):(x=d,d=h);if(c!==h)for(a=b,b=0;b<c.length;b++)switch(c[b][1]){case "*":d={$:"mul_expr",ia:2};a.push.apply(a,
c[b][3]);a.push(d);break;case "/":d={$:"div_expr",ia:2};a.push.apply(a,c[b][3]);a.push(d);break;case "%":d={$:"mod_expr",ia:2},a.push.apply(a,c[b][3]),a.push(d)}else x=a,a=h}else x=a,a=h;return a}function W(){var a=x;if(n.substr(x,7)===Fb){var b=Fb;x+=7}else b=h,0===aa&&v(gb);if(b!==h){var c=ja();c!==h?(c=ba(),c!==h?a=c:(x=a,a=h)):(x=a,a=h)}else x=a,a=h;if(a===h){a=x;b=B();if(b!==h)if(c=ja(),c!==h)if(n.substr(x,2)===Nc?(c=Nc,x+=2):(c=h,0===aa&&v(Oc)),c===h&&(n.substr(x,2)===Pc?(c=Pc,x+=2):(c=h,0===
aa&&v(Qc))),c!==h)switch(a=b,c){case "++":b={$:"post_inc_expr",ia:1};a.push(b);break;case "--":b={$:"post_dec_expr",ia:1},a.push(b)}else x=a,a=h;else x=a,a=h;else x=a,a=h;a===h&&(a=B());if(a===h)if(a=x,n.substr(x,2)===Nc?(b=Nc,x+=2):(b=h,0===aa&&v(Oc)),b===h&&(n.substr(x,2)===Pc?(b=Pc,x+=2):(b=h,0===aa&&v(Qc)),b===h&&(43===n.charCodeAt(x)?(b=Gc,x++):(b=h,0===aa&&v(Qd)),b===h&&(45===n.charCodeAt(x)?(b=jd,x++):(b=h,0===aa&&v(Fd)),b===h&&(126===n.charCodeAt(x)?(b=oe,x++):(b=h,0===aa&&v(Zd)),b===h&&(33===
n.charCodeAt(x)?(b=Gd,x++):(b=h,0===aa&&v(xe))))))),b!==h)if(c=ja(),c!==h)if(c=W(),c!==h)switch(a=c,b){case "++":b={$:"pre_inc_expr",ia:1};a.push(b);break;case "--":b={$:"pre_dec_expr",ia:1};a.push(b);break;case "+":b={$:"positive_expr",ia:1};a.push(b);break;case "-":b={$:"negative_expr",ia:1};a.push(b);break;case "~":b={$:"one_compl_expr",ia:1};a.push(b);break;case "!":b={$:"logic_negative_expr",ia:1},a.push(b)}else x=a,a=h;else x=a,a=h;else x=a,a=h}return a}function B(){aa++;var a=Y();if(a===h){a=
x;var b=Q();a=b!==h?n.substring(a,x):b;a!==h&&(a=parseInt(a))}aa--;a===h&&0===aa&&v(bc);b=a;b!==h&&(b=[b]);a=b;if(a===h&&(b=w(),b!==h&&(b=[b]),a=b,a===h))if(a=x,40===n.charCodeAt(x)?(b=zb,x++):(b=h,0===aa&&v(pc)),b!==h)if(b=ja(),b!==h)if(b=E(),b!==h){var c=ja();c!==h?(41===n.charCodeAt(x)?(c=jc,x++):(c=h,0===aa&&v(Cc)),c!==h?a=b:(x=a,a=h)):(x=a,a=h)}else x=a,a=h;else x=a,a=h;else x=a,a=h;return a}function ba(){var a;var b=w();b!==h&&(b=[b]);var c=b;if(c===h){b=[];var d=a=x;aa++;if(40===n.charCodeAt(x)){var g=
zb;x++}else g=h,0===aa&&v(pc);g===h&&(41===n.charCodeAt(x)?(g=jc,x++):(g=h,0===aa&&v(Cc)));aa--;g===h?d=void 0:(x=d,d=h);d!==h?(g=Da(),g!==h?a=d=[d,g]:(x=a,a=h)):(x=a,a=h);if(a!==h)for(;a!==h;)b.push(a),d=a=x,aa++,40===n.charCodeAt(x)?(g=zb,x++):(g=h,0===aa&&v(pc)),g===h&&(41===n.charCodeAt(x)?(g=jc,x++):(g=h,0===aa&&v(Cc))),aa--,g===h?d=void 0:(x=d,d=h),d!==h?(g=Da(),g!==h?a=d=[d,g]:(x=a,a=h)):(x=a,a=h);else b=h;b!==h&&(b=1);c=b;c===h&&(c=x,40===n.charCodeAt(x)?(b=zb,x++):(b=h,0===aa&&v(pc)),b!==
h?(a=ja(),a!==h?(d=ba(),d!==h?(g=ja(),g!==h?(41===n.charCodeAt(x)?(b=jc,x++):(b=h,0===aa&&v(Cc)),b!==h?c=d:(x=c,c=h)):(x=c,c=h)):(x=c,c=h)):(x=c,c=h)):(x=c,c=h))}return c}function I(){var a=x;if(42===n.charCodeAt(x)){var b=Hd;x++}else b=h,0===aa&&v(Rb);b===h&&(47===n.charCodeAt(x)?(b=ie,x++):(b=h,0===aa&&v(ye)),b===h&&(37===n.charCodeAt(x)?(b=Za,x++):(b=h,0===aa&&v(Rd))));if(b!==h){var c=x;aa++;if(61===n.charCodeAt(x)){var d=$d;x++}else d=h,0===aa&&v(Dc);aa--;d===h?c=void 0:(x=c,c=h);c!==h?a=b:(x=
a,a=h)}else x=a,a=h;return a}function P(){var a=x;if(43===n.charCodeAt(x)){var b=Gc;x++}else b=h,0===aa&&v(Qd);if(b!==h){b=x;aa++;if(43===n.charCodeAt(x)){var c=Gc;x++}else c=h,0===aa&&v(Qd);c===h&&(61===n.charCodeAt(x)?(c=$d,x++):(c=h,0===aa&&v(Dc)));aa--;c===h?b=void 0:(x=b,b=h);b!==h?a="+":(x=a,a=h)}else x=a,a=h;a===h&&(a=x,45===n.charCodeAt(x)?(b=jd,x++):(b=h,0===aa&&v(Fd)),b!==h?(b=x,aa++,45===n.charCodeAt(x)?(c=jd,x++):(c=h,0===aa&&v(Fd)),c===h&&(61===n.charCodeAt(x)?(c=$d,x++):(c=h,0===aa&&
v(Dc))),aa--,c===h?b=void 0:(x=b,b=h),b!==h?a="-":(x=a,a=h)):(x=a,a=h));return a}function p(){if(n.substr(x,2)===dd){var a=dd;x+=2}else a=h,0===aa&&v(Gb);a===h&&(n.substr(x,2)===od?(a=od,x+=2):(a=h,0===aa&&v(yd)));return a}function da(){if(n.substr(x,2)===ed){var a=ed;x+=2}else a=h,0===aa&&v(Sc);a===h&&(n.substr(x,2)===gc?(a=gc,x+=2):(a=h,0===aa&&v(Ub)),a===h&&(60===n.charCodeAt(x)?(a=pd,x++):(a=h,0===aa&&v(qd)),a===h&&(62===n.charCodeAt(x)?(a=xc,x++):(a=h,0===aa&&v(qc)))));return a}function H(){if(n.substr(x,
2)===Mb){var a=Mb;x+=2}else a=h,0===aa&&v(Tc);a===h&&(n.substr(x,2)===Kc?(a=Kc,x+=2):(a=h,0===aa&&v(hc)));return a}function t(){var a=x;if(38===n.charCodeAt(x)){var b=uc;x++}else b=h,0===aa&&v(Yb);if(b!==h){b=x;aa++;if(38===n.charCodeAt(x)){var c=uc;x++}else c=h,0===aa&&v(Yb);aa--;c===h?b=void 0:(x=b,b=h);b!==h?a="&":(x=a,a=h)}else x=a,a=h;return a}function d(){var a=x;if(94===n.charCodeAt(x)){var b=Ec;x++}else b=h,0===aa&&v(vc);if(b!==h){b=x;aa++;if(94===n.charCodeAt(x)){var c=Ec;x++}else c=h,0===
aa&&v(vc);aa--;c===h?b=void 0:(x=b,b=h);b!==h?a="^":(x=a,a=h)}else x=a,a=h;return a}function la(){var a=x;if(124===n.charCodeAt(x)){var b=Zb;x++}else b=h,0===aa&&v(kd);if(b!==h){b=x;aa++;if(124===n.charCodeAt(x)){var c=Zb;x++}else c=h,0===aa&&v(kd);aa--;c===h?b=void 0:(x=b,b=h);b!==h?a="|":(x=a,a=h)}else x=a,a=h;return a}function na(){if(n.substr(x,2)===xb){var a=xb;x+=2}else a=h,0===aa&&v(Hb);a!==h&&(a="&&");return a}function pa(){if(n.substr(x,2)===qb){var a=qb;x+=2}else a=h,0===aa&&v(Nb);a!==h&&
(a="||");return a}function Aa(){var a=w();if(a===h){aa++;a=x;var b=Y();if(b===h){var c=b=x;var d=Q();if(d!==h){if(46===n.charCodeAt(x)){var g=Fc;x++}else g=h,0===aa&&v(Lc);if(g!==h){var e=Ha();e===h&&(e=null);if(e!==h){var f=Ma();f===h&&(f=null);f!==h?c=d=[d,g,e,f]:(x=c,c=h)}else x=c,c=h}else x=c,c=h}else x=c,c=h;b=c!==h?n.substring(b,x):c;b===h&&(c=b=x,46===n.charCodeAt(x)?(d=Fc,x++):(d=h,0===aa&&v(Lc)),d!==h?(g=Ha(),g!==h?(e=Ma(),e===h&&(e=null),e!==h?c=d=[d,g,e]:(x=c,c=h)):(x=c,c=h)):(x=c,c=h),
b=c!==h?n.substring(b,x):c,b===h&&(c=b=x,d=Q(),d!==h?(g=Ma(),g===h&&(g=null),g!==h?c=d=[d,g]:(x=c,c=h)):(x=c,c=h),b=c!==h?n.substring(b,x):c))}b!==h?(c=x,aa++,d=N(),aa--,d===h?c=void 0:(x=c,c=h),c!==h?a=b:(x=a,a=h)):(x=a,a=h);aa--;a===h&&0===aa&&v(bc);if(a===h){aa++;a=x;34===n.charCodeAt(x)?(b=Bc,x++):(b=h,0===aa&&v(nc));if(b!==h){c=[];d=X();if(d!==h)for(;d!==h;)c.push(d),d=X();else c=h;c!==h&&(c=c.join(""));c===h&&(c=null);c!==h?(34===n.charCodeAt(x)?(d=Bc,x++):(d=h,0===aa&&v(nc)),d!==h?a=b=[b,c,
d]:(x=a,a=h)):(x=a,a=h)}else x=a,a=h;if(a===h)if(a=x,39===n.charCodeAt(x)?(b=Md,x++):(b=h,0===aa&&v(ud)),b!==h){c=[];d=Ga();if(d!==h)for(;d!==h;)c.push(d),d=Ga();else c=h;c!==h&&(c=c.join(""));c===h&&(c=null);c!==h?(39===n.charCodeAt(x)?(d=Md,x++):(d=h,0===aa&&v(ud)),d!==h?a=b=[b,c,d]:(x=a,a=h)):(x=a,a=h)}else x=a,a=h;a!==h&&(a='"'+a[1]+'"');aa--;a===h&&0===aa&&v(Bd);a===h&&(aa++,n.substr(x,2)===ze?(a=ze,x+=2):(a=h,0===aa&&v(Ae)),a===h&&(n.substr(x,2)===re?(a=re,x+=2):(a=h,0===aa&&v(ad)),a===h&&(n.substr(x,
2)===vd?(a=vd,x+=2):(a=h,0===aa&&v(Wc)),a===h&&(n.substr(x,2)===Cd?(a=Cd,x+=2):(a=h,0===aa&&v(Wd)),a===h&&(n.substr(x,2)===Dd?(a=Dd,x+=2):(a=h,0===aa&&v(fe)),a===h&&(n.substr(x,2)===Nd?(a=Nd,x+=2):(a=h,0===aa&&v(wd)),a===h&&(n.substr(x,2)===Od?(a=Od,x+=2):(a=h,0===aa&&v(le)),a===h&&(n.substr(x,2)===se?(a=se,x+=2):(a=h,0===aa&&v(ge)),a===h&&(n.substr(x,2)===dd?(a=dd,x+=2):(a=h,0===aa&&v(Gb)),a===h&&(n.substr(x,2)===od?(a=od,x+=2):(a=h,0===aa&&v(yd)),a===h&&(n.substr(x,3)===te?(a=te,x+=3):(a=h,0===
aa&&v(ue)),a===h&&(n.substr(x,3)===ve?(a=ve,x+=3):(a=h,0===aa&&v(Be)),a===h&&(n.substr(x,2)===Mb?(a=Mb,x+=2):(a=h,0===aa&&v(Tc)),a===h&&(n.substr(x,2)===Kc?(a=Kc,x+=2):(a=h,0===aa&&v(hc)),a===h&&(n.substr(x,2)===ed?(a=ed,x+=2):(a=h,0===aa&&v(Sc)),a===h&&(n.substr(x,2)===gc?(a=gc,x+=2):(a=h,0===aa&&v(Ub)),a===h&&(n.substr(x,2)===xb?(a=xb,x+=2):(a=h,0===aa&&v(Hb)),a===h&&(n.substr(x,2)===qb?(a=qb,x+=2):(a=h,0===aa&&v(Nb)),a===h&&(n.substr(x,2)===Nc?(a=Nc,x+=2):(a=h,0===aa&&v(Oc)),a===h&&(n.substr(x,
2)===Pc?(a=Pc,x+=2):(a=h,0===aa&&v(Qc)),a===h&&(123===n.charCodeAt(x)?(a=id,x++):(a=h,0===aa&&v($b)),a===h&&(125===n.charCodeAt(x)?(a=He,x++):(a=h,0===aa&&v(Ie)),a===h&&(91===n.charCodeAt(x)?(a=Je,x++):(a=h,0===aa&&v(Ke)),a===h&&(93===n.charCodeAt(x)?(a=Le,x++):(a=h,0===aa&&v(Me)),a===h&&(40===n.charCodeAt(x)?(a=zb,x++):(a=h,0===aa&&v(pc)),a===h&&(41===n.charCodeAt(x)?(a=jc,x++):(a=h,0===aa&&v(Cc)),a===h&&(59===n.charCodeAt(x)?(a=Ne,x++):(a=h,0===aa&&v(Oe)),a===h&&(58===n.charCodeAt(x)?(a=db,x++):
(a=h,0===aa&&v(kb)),a===h&&(63===n.charCodeAt(x)?(a=tc,x++):(a=h,0===aa&&v(Kb)),a===h&&(46===n.charCodeAt(x)?(a=Fc,x++):(a=h,0===aa&&v(Lc)),a===h&&(43===n.charCodeAt(x)?(a=Gc,x++):(a=h,0===aa&&v(Qd)),a===h&&(45===n.charCodeAt(x)?(a=jd,x++):(a=h,0===aa&&v(Fd)),a===h&&(42===n.charCodeAt(x)?(a=Hd,x++):(a=h,0===aa&&v(Rb)),a===h&&(47===n.charCodeAt(x)?(a=ie,x++):(a=h,0===aa&&v(ye)),a===h&&(37===n.charCodeAt(x)?(a=Za,x++):(a=h,0===aa&&v(Rd)),a===h&&(94===n.charCodeAt(x)?(a=Ec,x++):(a=h,0===aa&&v(vc)),a===
h&&(38===n.charCodeAt(x)?(a=uc,x++):(a=h,0===aa&&v(Yb)),a===h&&(124===n.charCodeAt(x)?(a=Zb,x++):(a=h,0===aa&&v(kd)),a===h&&(126===n.charCodeAt(x)?(a=oe,x++):(a=h,0===aa&&v(Zd)),a===h&&(33===n.charCodeAt(x)?(a=Gd,x++):(a=h,0===aa&&v(xe)),a===h&&(61===n.charCodeAt(x)?(a=$d,x++):(a=h,0===aa&&v(Dc)),a===h&&(60===n.charCodeAt(x)?(a=pd,x++):(a=h,0===aa&&v(qd)),a===h&&(62===n.charCodeAt(x)?(a=xc,x++):(a=h,0===aa&&v(qc)),a===h&&(44===n.charCodeAt(x)?(a=Hc,x++):(a=h,0===aa&&v(ic))))))))))))))))))))))))))))))))))))))))))))),
aa--,a===h&&0===aa&&v(ke))}}return a}function Ja(){var a;aa++;var b=x;var c=N();if(c!==h){var d=[];for(a=oa();a!==h;)d.push(a),a=oa();d!==h?b=c+=d.join(""):(x=b,b=h)}else x=b,b=h;aa--;b===h&&0===aa&&v(Vb);return b}function N(){if(rc.test(n.charAt(x))){var a=n.charAt(x);x++}else a=h,0===aa&&v(yc);a===h&&(36===n.charCodeAt(x)?(a=cc,x++):(a=h,0===aa&&v(dc)),a===h&&(95===n.charCodeAt(x)?(a=$a,x++):(a=h,0===aa&&v(ec))));return a}function oa(){var a=N();a===h&&(a=ia());return a}function Y(){var a=x;if(48===
n.charCodeAt(x)){var b=gd;x++}else b=h,0===aa&&v(ld);if(b!==h)if(Sd.test(n.charAt(x))?(b=n.charAt(x),x++):(b=h,0===aa&&v(Kd)),b!==h){b=x;var c=[];var d=Ea();if(d!==h)for(;d!==h;)c.push(d),d=Ea();else c=h;b=c!==h?n.substring(b,x):c;b!==h?a=b=String(parseInt("0x"+b)):(x=a,a=h)}else x=a,a=h;else x=a,a=h;return a}function Q(){if(48===n.charCodeAt(x)){var a=gd;x++}else a=h,0===aa&&v(ld);if(a===h){a=x;if(sd.test(n.charAt(x))){var b=n.charAt(x);x++}else b=h,0===aa&&v($c);if(b!==h){var c=Ha();c===h&&(c=null);
c!==h?a=b=[b,c]:(x=a,a=h)}else x=a,a=h}return a}function Ha(){var a=[];var b=ia();if(b!==h)for(;b!==h;)a.push(b),b=ia();else a=h;return a}function ia(){if(Vc.test(n.charAt(x))){var a=n.charAt(x);x++}else a=h,0===aa&&v(zd);return a}function Ma(){var a=x;if(zc.test(n.charAt(x))){var b=n.charAt(x);x++}else b=h,0===aa&&v(Td);if(b!==h){var c=x;if(Ld.test(n.charAt(x))){var d=n.charAt(x);x++}else d=h,0===aa&&v(Ud);d===h&&(d=null);if(d!==h){var g=Ha();g!==h?c=d=[d,g]:(x=c,c=h)}else x=c,c=h;c!==h?a=b=[b,c]:
(x=a,a=h)}else x=a,a=h;return a}function Ea(){if(Vd.test(n.charAt(x))){var a=n.charAt(x);x++}else a=h,0===aa&&v(Ad);return a}function X(){var a;var b=a=x;aa++;if(34===n.charCodeAt(x)){var c=Bc;x++}else c=h,0===aa&&v(nc);c===h&&(92===n.charCodeAt(x)?(c=hd,x++):(c=h,0===aa&&v(Ib)),c===h&&(c=S()));aa--;c===h?b=void 0:(x=b,b=h);b!==h?(c=Da(),c!==h?a=c:(x=a,a=h)):(x=a,a=h);a===h&&(a=x,92===n.charCodeAt(x)?(b=hd,x++):(b=h,0===aa&&v(Ib)),b!==h?(c=wa(),c!==h?a=c:(x=a,a=h)):(x=a,a=h),a===h&&(a=Fa()));return a}
function Ga(){var a;var b=a=x;aa++;if(39===n.charCodeAt(x)){var c=Md;x++}else c=h,0===aa&&v(ud);c===h&&(92===n.charCodeAt(x)?(c=hd,x++):(c=h,0===aa&&v(Ib)),c===h&&(c=S()));aa--;c===h?b=void 0:(x=b,b=h);b!==h?(c=Da(),c!==h?a=c:(x=a,a=h)):(x=a,a=h);a===h&&(a=x,92===n.charCodeAt(x)?(b=hd,x++):(b=h,0===aa&&v(Ib)),b!==h?(c=wa(),c!==h?a=c:(x=a,a=h)):(x=a,a=h),a===h&&(a=Fa()));return a}function Fa(){var a=x;if(92===n.charCodeAt(x)){var b=hd;x++}else b=h,0===aa&&v(Ib);b!==h?(b=xa(),b!==h?a=b:(x=a,a=h)):(x=
a,a=h);return a}function wa(){var a=La();if(a===h){var b=a=x;aa++;var c=La();c===h&&(c=ia(),c===h&&(120===n.charCodeAt(x)?(c=je,x++):(c=h,0===aa&&v(ee)),c===h&&(117===n.charCodeAt(x)?(c=pe,x++):(c=h,0===aa&&v(qe)))));aa--;c===h?b=void 0:(x=b,b=h);b===h&&(b=S());b!==h?(b=Da(),b!==h?a=b:(x=a,a=h)):(x=a,a=h)}if(a===h&&(a=x,48===n.charCodeAt(x)?(b=gd,x++):(b=h,0===aa&&v(ld)),b!==h?(b=x,aa++,c=ia(),aa--,c===h?b=void 0:(x=b,b=h),b!==h?a="\x00":(x=a,a=h)):(x=a,a=h),a===h))if(a=x,120===n.charCodeAt(x)?(b=
je,x++):(b=h,0===aa&&v(ee)),b!==h){c=b=x;var d=Ea();if(d!==h){var g=Ea();g!==h?c=d=[d,g]:(x=c,c=h)}else x=c,c=h;b=c!==h?n.substring(b,x):c;b!==h?a=b=String.fromCharCode(parseInt("0x"+b)):(x=a,a=h)}else x=a,a=h;return a}function La(){if(td.test(n.charAt(x))){var a=n.charAt(x);x++}else a=h,0===aa&&v(de);a!==h&&(a=a.replace("b","\b").replace("f","\f").replace("n","\n").replace("r","\r").replace("t","\t").replace("v","\x0B"));return a}function ja(){var a=[];var b=qa();b===h&&(b=Fa(),b===h&&(b=ma(),b===
h&&(b=za())));for(;b!==h;)a.push(b),b=qa(),b===h&&(b=Fa(),b===h&&(b=ma(),b===h&&(b=za())));return a}function ta(){var a=[];var b=qa();b===h&&(b=Fa(),b===h&&(b=ma(),b===h&&(b=za())));if(b!==h)for(;b!==h;)a.push(b),b=qa(),b===h&&(b=Fa(),b===h&&(b=ma(),b===h&&(b=za())));else a=h;return a}function ka(){var a=[];var b=qa();b===h&&(b=Fa(),b===h&&(b=va(),b===h&&(b=ra())));for(;b!==h;)a.push(b),b=qa(),b===h&&(b=Fa(),b===h&&(b=va(),b===h&&(b=ra())));return a}function qa(){aa++;if(Qe.test(n.charAt(x))){var a=
n.charAt(x);x++}else a=h,0===aa&&v(Re);aa--;a===h&&0===aa&&v(Pe);return a}function S(){if(Se.test(n.charAt(x))){var a=n.charAt(x);x++}else a=h,0===aa&&v(Te);return a}function va(){aa++;if(10===n.charCodeAt(x)){var a=Ve;x++}else a=h,0===aa&&v(We);a===h&&(n.substr(x,2)===Ge?(a=Ge,x+=2):(a=h,0===aa&&v(Xd)),a===h&&(13===n.charCodeAt(x)?(a=Ce,x++):(a=h,0===aa&&v(De))));aa--;a===h&&0===aa&&v(Ue);return a}function xa(){var a=va();if(a===h){a=x;aa++;if(n.length>x){var b=n.charAt(x);x++}else b=h,0===aa&&v(Xc);
aa--;b===h?a=void 0:(x=a,a=h)}return a}function ra(){aa++;var a;var b=x;if(n.substr(x,2)===Pd){var c=Pd;x+=2}else c=h,0===aa&&v(me);if(c!==h){var d=[];var g=a=x;aa++;if(n.substr(x,2)===Mc){var e=Mc;x+=2}else e=h,0===aa&&v(xd);aa--;e===h?g=void 0:(x=g,g=h);g!==h?(e=Da(),e!==h?a=g=[g,e]:(x=a,a=h)):(x=a,a=h);for(;a!==h;)d.push(a),g=a=x,aa++,n.substr(x,2)===Mc?(e=Mc,x+=2):(e=h,0===aa&&v(xd)),aa--,e===h?g=void 0:(x=g,g=h),g!==h?(e=Da(),e!==h?a=g=[g,e]:(x=a,a=h)):(x=a,a=h);d!==h?(n.substr(x,2)===Mc?(a=
Mc,x+=2):(a=h,0===aa&&v(xd)),a!==h?b=c=[c,d,a]:(x=b,b=h)):(x=b,b=h)}else x=b,b=h;b===h&&(b=za());aa--;b===h&&0===aa&&v(we);return b}function ma(){var a;var b=x;if(n.substr(x,2)===Pd){var c=Pd;x+=2}else c=h,0===aa&&v(me);if(c!==h){var d=[];var g=a=x;aa++;if(n.substr(x,2)===Mc){var e=Mc;x+=2}else e=h,0===aa&&v(xd);e===h&&(e=S());aa--;e===h?g=void 0:(x=g,g=h);g!==h?(e=Da(),e!==h?a=g=[g,e]:(x=a,a=h)):(x=a,a=h);for(;a!==h;)d.push(a),g=a=x,aa++,n.substr(x,2)===Mc?(e=Mc,x+=2):(e=h,0===aa&&v(xd)),e===h&&
(e=S()),aa--,e===h?g=void 0:(x=g,g=h),g!==h?(e=Da(),e!==h?a=g=[g,e]:(x=a,a=h)):(x=a,a=h);d!==h?(n.substr(x,2)===Mc?(a=Mc,x+=2):(a=h,0===aa&&v(xd)),a!==h?b=c=[c,d,a]:(x=b,b=h)):(x=b,b=h)}else x=b,b=h;return b}function za(){var a;var b=x;if(n.substr(x,2)===bd){var c=bd;x+=2}else c=h,0===aa&&v(Ee);if(c!==h){var d=[];var g=a=x;aa++;var e=S();aa--;e===h?g=void 0:(x=g,g=h);g!==h?(e=Da(),e!==h?a=g=[g,e]:(x=a,a=h)):(x=a,a=h);for(;a!==h;)d.push(a),g=a=x,aa++,e=S(),aa--,e===h?g=void 0:(x=g,g=h),g!==h?(e=Da(),
e!==h?a=g=[g,e]:(x=a,a=h)):(x=a,a=h);d!==h?b=c=[c,d]:(x=b,b=h)}else x=b,b=h;return b}function Da(){if(n.length>x){var a=n.charAt(x);x++}else a=h,0===aa&&v(Xc);return a}var ua=1<arguments.length?arguments[1]:{},h={},ya={start:q},Ta=q,Va="#",Ca={type:"literal",value:"#",description:'"#"'},Wa="if",Ra={type:"literal",value:"if",description:'"if"'},V="ifdef",ab={type:"literal",value:"ifdef",description:'"ifdef"'},bb="ifndef",Ua={type:"literal",value:"ifndef",description:'"ifndef"'},Qa="elif",Ba={type:"literal",
value:"elif",description:'"elif"'},fa="else",Na={type:"literal",value:"else",description:'"else"'},Xa="endif",ib={type:"literal",value:"endif",description:'"endif"'},jb="include",fb={type:"literal",value:"include",description:'"include"'},rb="define",cb={type:"literal",value:"define",description:'"define"'},Wb="var",Pb={type:"literal",value:"var",description:'"var"'},hb="error",pb={type:"literal",value:"error",description:'"error"'},vb="line",Qb={type:"literal",value:"line",description:'"line"'},
wb="pragma",Ia={type:"literal",value:"pragma",description:'"pragma"'},G="undef",Ka={type:"literal",value:"undef",description:'"undef"'},sb="warning",Sb={type:"literal",value:"warning",description:'"warning"'},Ya="extension",Rc={type:"literal",value:"extension",description:'"extension"'},Ic="version",Xb={type:"literal",value:"version",description:'"version"'},ub="node",Jc={type:"literal",value:"node",description:'"node"'},Sa="endnode",Ab={type:"literal",value:"endnode",description:'"endnode"'},Ac=
"node_var",mb={type:"literal",value:"node_var",description:'"node_var"'},nb="node_if",sa={type:"literal",value:"node_if",description:'"node_if"'},Db="node_ifdef",Oa={type:"literal",value:"node_ifdef",description:'"node_ifdef"'},Z="node_ifndef",Jb={type:"literal",value:"node_ifndef",description:'"node_ifndef"'},Yc="node_elif",Pa={type:"literal",value:"node_elif",description:'"node_elif"'},tb="node_else",cd={type:"literal",value:"node_else",description:'"node_else"'},Lb="node_endif",Bb={type:"literal",
value:"node_endif",description:'"node_endif"'},nd="node_in",eb={type:"literal",value:"node_in",description:'"node_in"'},Tb="optional",lb={type:"literal",value:"optional",description:'"optional"'},kc="node_out",lc={type:"literal",value:"node_out",description:'"node_out"'},ob="node_param",Ob={type:"literal",value:"node_param",description:'"node_param"'},mc="nodes_global",fc={type:"literal",value:"nodes_global",description:'"nodes_global"'},Cb="nodes_main",oc={type:"literal",value:"nodes_main",description:'"nodes_main"'},
Hc=",",ic={type:"literal",value:",",description:'","'},tc="?",Kb={type:"literal",value:"?",description:'"?"'},db=":",kb={type:"literal",value:":",description:'":"'},Fb="defined",gb={type:"literal",value:"defined",description:'"defined"'},zb="(",pc={type:"literal",value:"(",description:'"("'},jc=")",Cc={type:"literal",value:")",description:'")"'},bc={type:"other",description:"number"},Vb={type:"other",description:"identifier"},Nc="++",Oc={type:"literal",value:"++",description:'"++"'},Pc="--",Qc={type:"literal",
value:"--",description:'"--"'},Gc="+",Qd={type:"literal",value:"+",description:'"+"'},jd="-",Fd={type:"literal",value:"-",description:'"-"'},oe="~",Zd={type:"literal",value:"~",description:'"~"'},Gd="!",xe={type:"literal",value:"!",description:'"!"'},Hd="*",Rb={type:"literal",value:"*",description:'"*"'},ie="/",ye={type:"literal",value:"/",description:'"/"'},Za="%",Rd={type:"literal",value:"%",description:'"%"'},$d="=",Dc={type:"literal",value:"=",description:'"="'},dd="<<",Gb={type:"literal",value:"<<",
description:'"<<"'},od=">>",yd={type:"literal",value:">>",description:'">>"'},ed="<=",Sc={type:"literal",value:"<=",description:'"<="'},gc=">=",Ub={type:"literal",value:">=",description:'">="'},pd="<",qd={type:"literal",value:"<",description:'"<"'},xc=">",qc={type:"literal",value:">",description:'">"'},Mb="==",Tc={type:"literal",value:"==",description:'"=="'},Kc="!=",hc={type:"literal",value:"!=",description:'"!="'},uc="&",Yb={type:"literal",value:"&",description:'"&"'},Ec="^",vc={type:"literal",
value:"^",description:'"^"'},Zb="|",kd={type:"literal",value:"|",description:'"|"'},xb="&&",Hb={type:"literal",value:"&&",description:'"&&"'},qb="||",Nb={type:"literal",value:"||",description:'"||"'},Bc='"',nc={type:"literal",value:'"',description:'"\\""'},cc="$",dc={type:"literal",value:"$",description:'"$"'},$a="_",ec={type:"literal",value:"_",description:'"_"'},rc=/^[a-zA-Z]/,yc={type:"class",value:"[a-zA-Z]",description:"[a-zA-Z]"},yb={type:"literal",value:"#define",description:'"#define"'},ae=
{type:"literal",value:"#elif",description:'"#elif"'},be={type:"literal",value:"#else",description:'"#else"'},Eb={type:"literal",value:"#endif",description:'"#endif"'},Uc={type:"literal",value:"#error",description:'"#error"'},sc={type:"literal",value:"#if",description:'"#if"'},fd={type:"literal",value:"#ifdef",description:'"#ifdef"'},rd={type:"literal",value:"#ifndef",description:'"#ifndef"'},wc={type:"literal",value:"#include",description:'"#include"'},Id={type:"literal",value:"#line",description:'"#line"'},
Jd={type:"literal",value:"#pragma",description:'"#pragma"'},Zc={type:"literal",value:"#warning",description:'"#warning"'},ce={type:"literal",value:"#version",description:'"#version"'},Fc=".",Lc={type:"literal",value:".",description:'"."'},gd="0",ld={type:"literal",value:"0",description:'"0"'},Sd=/^[xX]/,Kd={type:"class",value:"[xX]",description:"[xX]"},Vc=/^[0-9]/,zd={type:"class",value:"[0-9]",description:"[0-9]"},sd=/^[1-9]/,$c={type:"class",value:"[1-9]",description:"[1-9]"},zc=/^[eE]/,Td={type:"class",
value:"[eE]",description:"[eE]"},Ld=/^[\-+]/,Ud={type:"class",value:"[-+]",description:"[-+]"},Vd=/^[0-9a-fA-F]/,Ad={type:"class",value:"[0-9a-fA-F]",description:"[0-9a-fA-F]"},Bd={type:"other",description:"string"},Md="'",ud={type:"literal",value:"'",description:'"\'"'},hd="\\",Ib={type:"literal",value:"\\",description:'"\\\\"'},td=/^['"\\bfnrtv]/,de={type:"class",value:"['\"\\\\bfnrtv]",description:"['\"\\\\bfnrtv]"},je="x",ee={type:"literal",value:"x",description:'"x"'},pe="u",qe={type:"literal",
value:"u",description:'"u"'},ke={type:"other",description:"punctuation"},ze="+=",Ae={type:"literal",value:"+=",description:'"+="'},re="-=",ad={type:"literal",value:"-=",description:'"-="'},vd="*=",Wc={type:"literal",value:"*=",description:'"*="'},Cd="/=",Wd={type:"literal",value:"/=",description:'"/="'},Dd="%=",fe={type:"literal",value:"%=",description:'"%="'},Nd="^=",wd={type:"literal",value:"^=",description:'"^="'},Od="&=",le={type:"literal",value:"&=",description:'"&="'},se="|=",ge={type:"literal",
value:"|=",description:'"|="'},te="<<=",ue={type:"literal",value:"<<=",description:'"<<="'},ve=">>=",Be={type:"literal",value:">>=",description:'">>="'},id="{",$b={type:"literal",value:"{",description:'"{"'},He="}",Ie={type:"literal",value:"}",description:'"}"'},Je="[",Ke={type:"literal",value:"[",description:'"["'},Le="]",Me={type:"literal",value:"]",description:'"]"'},Ne=";",Oe={type:"literal",value:";",description:'";"'},Pe={type:"other",description:"whitespace"},Qe=/^[\t\x0B\f ]/,Re={type:"class",
value:"[\\t\\v\\f ]",description:"[\\t\\v\\f ]"},Se=/^[\n\r]/,Te={type:"class",value:"[\\n\\r]",description:"[\\n\\r]"},Ue={type:"other",description:"end of line"},Ve="\n",We={type:"literal",value:"\n",description:'"\\n"'},Ge="\r\n",Xd={type:"literal",value:"\r\n",description:'"\\r\\n"'},Ce="\r",De={type:"literal",value:"\r",description:'"\\r"'},we={type:"other",description:"comment"},Pd="/*",me={type:"literal",value:"/*",description:'"/*"'},Mc="*/",xd={type:"literal",value:"*/",description:'"*/"'},
bd="//",Ee={type:"literal",value:"//",description:'"//"'},Xc={type:"any",description:"any character"},x=0,Yd=0,ne={line:1,qo:1,Os:!1},md=0,Ed=[],aa=0;if("startRule"in ua){if(!(ua.BI in ya))throw Error("Can't start parsing from rule \""+ua.BI+'".');Ta=ya[ua.BI]}w=function(){var a;aa++;var b=a=x;aa++;var c=x;if("#define"===n.substr(x,7)){var d="#define";x+=7}else d=h,0===aa&&v(yb);d===h&&("#elif"===n.substr(x,5)?(d="#elif",x+=5):(d=h,0===aa&&v(ae)),d===h&&("#else"===n.substr(x,5)?(d="#else",x+=5):(d=
h,0===aa&&v(be)),d===h&&("#endif"===n.substr(x,6)?(d="#endif",x+=6):(d=h,0===aa&&v(Eb)),d===h&&("#error"===n.substr(x,6)?(d="#error",x+=6):(d=h,0===aa&&v(Uc)),d===h&&("#if"===n.substr(x,3)?(d="#if",x+=3):(d=h,0===aa&&v(sc)),d===h&&("#ifdef"===n.substr(x,6)?(d="#ifdef",x+=6):(d=h,0===aa&&v(fd)),d===h&&("#ifndef"===n.substr(x,7)?(d="#ifndef",x+=7):(d=h,0===aa&&v(rd)),d===h&&("#include"===n.substr(x,8)?(d="#include",x+=8):(d=h,0===aa&&v(wc)),d===h&&("#line"===n.substr(x,5)?(d="#line",x+=5):(d=h,0===
aa&&v(Id)),d===h&&("#pragma"===n.substr(x,7)?(d="#pragma",x+=7):(d=h,0===aa&&v(Jd)),d===h&&("#warning"===n.substr(x,8)?(d="#warning",x+=8):(d=h,0===aa&&v(Zc)),d===h&&("#version"===n.substr(x,8)?(d="#version",x+=8):(d=h,0===aa&&v(ce)),d===h&&(n.substr(x,3)===Wb?(d=Wb,x+=3):(d=h,0===aa&&v(Pb)))))))))))))));if(d!==h){var g=x;aa++;var e=oa();aa--;e===h?g=void 0:(x=g,g=h);g!==h?c=d=[d,g]:(x=c,c=h)}else x=c,c=h;aa--;c===h?b=void 0:(x=b,b=h);b!==h?(b=Ja(),b!==h?a=b:(x=a,a=h)):(x=a,a=h);aa--;a===h&&0===aa&&
v(Vb);return a};var he=Ta();if(he!==h&&x===n.length)return he;he!==h&&x<n.length&&v({type:"end",description:"end of input"});throw function(a,b,c){function d(a){var b=1;for(a.sort(function(a,b){return a.description<b.description?-1:a.description>b.description?1:0});b<a.length;)a[b-1]===a[b]?a.splice(b,1):b++}function g(a,b){function c(a){function b(a){return a.charCodeAt(0).toString(16).toUpperCase()}return a.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,
"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(a){return"\\x0"+b(a)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(a){return"\\x"+b(a)}).replace(/[\u0100-\u0FFF]/g,function(a){return"\\u0"+b(a)}).replace(/[\u1000-\uFFFF]/g,function(a){return"\\u"+b(a)})}var d=Array(a.length),g;for(g=0;g<a.length;g++)d[g]=a[g].description;a=1<a.length?d.slice(0,-1).join(", ")+" or "+d[a.length-1]:d[0];b=b?'"'+c(b)+'"':"end of input";return"Expected "+a+" but "+b+" found."}
var e=C(c),h=c<n.length?n.charAt(c):null;null!==b&&d(b);return new f(null!==a?a:g(b,h),b,h,c,e.line,e.qo)}(null,Ed,md);}}}()},function(D,w){function f(e,f){var m=e[0],q=e[1],r=e[2],y=e[3];m=U(m,q,r,y,f[0],7,-680876936);y=U(y,m,q,r,f[1],12,-389564586);r=U(r,y,m,q,f[2],17,606105819);q=U(q,r,y,m,f[3],22,-1044525330);m=U(m,q,r,y,f[4],7,-176418897);y=U(y,m,q,r,f[5],12,1200080426);r=U(r,y,m,q,f[6],17,-1473231341);q=U(q,r,y,m,f[7],22,-45705983);m=U(m,q,r,y,f[8],7,1770035416);y=U(y,m,q,r,f[9],12,-1958414417);
r=U(r,y,m,q,f[10],17,-42063);q=U(q,r,y,m,f[11],22,-1990404162);m=U(m,q,r,y,f[12],7,1804603682);y=U(y,m,q,r,f[13],12,-40341101);r=U(r,y,m,q,f[14],17,-1502002290);q=U(q,r,y,m,f[15],22,1236535329);m=n(m,q,r,y,f[1],5,-165796510);y=n(y,m,q,r,f[6],9,-1069501632);r=n(r,y,m,q,f[11],14,643717713);q=n(q,r,y,m,f[0],20,-373897302);m=n(m,q,r,y,f[5],5,-701558691);y=n(y,m,q,r,f[10],9,38016083);r=n(r,y,m,q,f[15],14,-660478335);q=n(q,r,y,m,f[4],20,-405537848);m=n(m,q,r,y,f[9],5,568446438);y=n(y,m,q,r,f[14],9,-1019803690);
r=n(r,y,m,q,f[3],14,-187363961);q=n(q,r,y,m,f[8],20,1163531501);m=n(m,q,r,y,f[13],5,-1444681467);y=n(y,m,q,r,f[2],9,-51403784);r=n(r,y,m,q,f[7],14,1735328473);q=n(q,r,y,m,f[12],20,-1926607734);m=M(q^r^y,m,q,f[5],4,-378558);y=M(m^q^r,y,m,f[8],11,-2022574463);r=M(y^m^q,r,y,f[11],16,1839030562);q=M(r^y^m,q,r,f[14],23,-35309556);m=M(q^r^y,m,q,f[1],4,-1530992060);y=M(m^q^r,y,m,f[4],11,1272893353);r=M(y^m^q,r,y,f[7],16,-155497632);q=M(r^y^m,q,r,f[10],23,-1094730640);m=M(q^r^y,m,q,f[13],4,681279174);y=M(m^
q^r,y,m,f[0],11,-358537222);r=M(y^m^q,r,y,f[3],16,-722521979);q=M(r^y^m,q,r,f[6],23,76029189);m=M(q^r^y,m,q,f[9],4,-640364487);y=M(m^q^r,y,m,f[12],11,-421815835);r=M(y^m^q,r,y,f[15],16,530742520);q=M(r^y^m,q,r,f[2],23,-995338651);m=z(m,q,r,y,f[0],6,-198630844);y=z(y,m,q,r,f[7],10,1126891415);r=z(r,y,m,q,f[14],15,-1416354905);q=z(q,r,y,m,f[5],21,-57434055);m=z(m,q,r,y,f[12],6,1700485571);y=z(y,m,q,r,f[3],10,-1894986606);r=z(r,y,m,q,f[10],15,-1051523);q=z(q,r,y,m,f[1],21,-2054922799);m=z(m,q,r,y,f[8],
6,1873313359);y=z(y,m,q,r,f[15],10,-30611744);r=z(r,y,m,q,f[6],15,-1560198380);q=z(q,r,y,m,f[13],21,1309151649);m=z(m,q,r,y,f[4],6,-145523070);y=z(y,m,q,r,f[11],10,-1120210379);r=z(r,y,m,q,f[2],15,718787259);q=z(q,r,y,m,f[9],21,-343485551);e[0]=m+e[0]&4294967295;e[1]=q+e[1]&4294967295;e[2]=r+e[2]&4294967295;e[3]=y+e[3]&4294967295}function M(e,f,n,q,r,y){f=(f+e&4294967295)+(q+y&4294967295)&4294967295;return(f<<r|f>>>32-r)+n&4294967295}function U(e,f,n,q,r,y,a){return M(f&n|~f&q,e,f,r,y,a)}function n(e,
f,n,q,r,y,a){return M(f&q|n&~q,e,f,r,y,a)}function z(e,f,n,q,r,y,a){return M(n^(f|~q),e,f,r,y,a)}w.a=function(m){var n=m,v=n.length;m=[1732584193,-271733879,-1732584194,271733878];var q;for(q=64;q<=n.length;q+=64){var r,y=n.substring(q-64,q),a=[];for(r=0;64>r;r+=4)a[r>>2]=y.charCodeAt(r)+(y.charCodeAt(r+1)<<8)+(y.charCodeAt(r+2)<<16)+(y.charCodeAt(r+3)<<24);f(m,a)}n=n.substring(q-64);r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(q=0;q<n.length;q++)r[q>>2]|=n.charCodeAt(q)<<(q%4<<3);r[q>>2]|=128<<(q%4<<
3);if(55<q)for(f(m,r),q=0;16>q;q++)r[q]=0;r[14]=8*v;f(m,r);for(n=0;n<m.length;n++){v=m[n];q="";for(r=0;4>r;r++)q+=e[v>>8*r+4&15]+e[v>>8*r&15];m[n]=q}return m.join("")};var e="0123456789abcdef".split("")},function(D,w,f){D=f(0);var M=f(5),U=f(25),n=f(4),z=f(75),e=f(21),m=f(1),C=f(8),v=f(36),q=f(2),r=f(3),y=f(27),a=f(60),T=f(38);f=Object(D.a)("__reformer",function(f,c){function k(a){switch(a.type){case "VALTORGB":a.color_ramp||(a.color_ramp={elements:[{position:.5,color:[1,1,1,1]}]},g("node Color Ramp",
a,"color_ramp"));break;case "CURVE_RGB":a.curve_mapping||(a.curve_mapping={curves_data:[[[0,0],[1,1]],[[0,0],[1,1]],[[0,0],[1,1]],[[0,0],[1,1]]],curves_handle_types:["EXTRAPOLATED","EXTRAPOLATED","EXTRAPOLATED","EXTRAPOLATED"],curve_extend:[["AUTO","AUTO"],["AUTO","AUTO"],["AUTO","AUTO"],["AUTO","AUTO"]]},g("node RGB Curves",a,"curve_mapping"));break;case "CURVE_VEC":a.curve_mapping||(a.curve_mapping={curves_data:[[[0,0],[1,1]],[[0,0],[1,1]],[[0,0],[1,1]]],curves_handle_types:["EXTRAPOLATED","EXTRAPOLATED",
"EXTRAPOLATED"],curve_extend:[["AUTO","AUTO"],["AUTO","AUTO"],["AUTO","AUTO"]]},g("node Vector Curves",a,"curve_mapping"));break;case "MAPPING":a.vector_type||(a.vector_type="POINT",g("node Mapping",a,"vector_type"));break;case "MATERIAL":case "MATERIAL_EXT":"alpha"in a||(a.alpha=1,g("node material",a,"alpha"));"darkness"in a||(a.darkness=1,g("node material",a,"darkness"));"diffuse_toon_size"in a||(a.diffuse_toon_size=.5,g("node material",a,"diffuse_toon_size"));"diffuse_toon_smooth"in a||(a.diffuse_toon_smooth=
.1,g("node material",a,"diffuse_toon_smooth"));"diffuse_intensity"in a||(a.diffuse_intensity=1,g("node material",a,"diffuse_intensity"));"use_tangent_shading"in a||(a.use_tangent_shading=!1,g("node material",a,"use_tangent_shading"));"specular_shader"in a||(a.specular_shader="COOKTORR",g("node material",a,"specular_shader"));"specular_ior"in a||(a.specular_ior=4,g("node material",a,"specular_ior"));"specular_hardness"in a||(a.specular_hardness=50,g("node material",a,"specular_hardness"));"specular_slope"in
a||(a.specular_slope=.1,g("node material",a,"specular_slope"));"specular_toon_size"in a||(a.specular_toon_size=.5,g("node material",a,"specular_toon_size"));"specular_toon_smooth"in a||(a.specular_toon_smooth=.1,g("node material",a,"specular_toon_smooth"));"specular_intensity"in a||(a.specular_intensity=.5,g("node material",a,"specular_intensity"));"diffuse_shader"in a||(a.diffuse_shader="LAMBERT",g("node material",a,"diffuse_shader"));"roughness"in a||(a.roughness=.5,g("node material",a,"roughness"));
"diffuse_fresnel"in a||(a.diffuse_fresnel=.1,g("node material",a,"diffuse_fresnel"));"diffuse_fresnel_factor"in a||(a.diffuse_fresnel_factor=.5,g("node material",a,"diffuse_fresnel_factor"));break;case "MATH":case "MIX_RGB":"use_clamp"in a||(a.use_clamp=!1,g("node "+a.type,a,"use_clamp"));break;case "GROUP":a.node_tree_name=a.node_tree_name.replace(/\.[0-9]{3,}$/g,"");switch(a.node_tree_name){case "CLAMP":case "LEVELS_OF_QUALITY":case "LINEAR_TO_SRGB":case "NORMAL_VIEW":case "PARALLAX":case "REFLECT":case "REFRACTION":case "REPLACE":case "SMOOTHSTEP":case "SRGB_TO_LINEAR":case "TIME":case "TRANSLUCENCY":case "VECTOR_VIEW":a.node_tree_name=
"B4W_"+a.node_tree_name}break;case "VECT_TRANSFORM":"convert_from"in a||(a.convert_from="WORLD",g("node "+a.type,a,"convert_from"));"convert_to"in a||(a.convert_to="WORLD",g("node "+a.type,a,"convert_to"));"vector_type"in a||(a.vector_type="POINT",g("node "+a.type,a,"vector_type"));break;case "ATTRIBUTE":a.color_layer="";break;case "BSDF_TRANSPARENT":"b4w_use_alpha"in a||(a.b4w_use_alpha=!1,g("node "+a.type,a,"b4w_use_alpha"))}}function b(a){if(a=a.nla_tracks)for(var b=0;b<a.length;b++)for(var c=
a[b],e=0;e<c.strips.length;e++){var f=c.strips[e];"action"in f||(f.action=null,g("strip",f,"action"));"action_frame_start"in f||(f.action_frame_start=0,g("strip",f,"action_frame_start"));"action_frame_end"in f||(f.action_frame_end=f.frame_end-f.frame_start,g("strip",f,"action_frame_end"));"repeat"in f||(f.repeat=1,g("strip",f,"repeat"));"use_reverse"in f||(f.use_reverse=!1,g("strip",f,"use_reverse"));"scale"in f||(f.scale=1,g("strip",f,"scale"))}}function g(a,b,c){c=c+">>"+a;c in J||(J[c]={Lx:[],
OH:"undefined",type:a});J[c].Lx.push(b.name)}function w(a,b,c){c=c+">>"+a;c in J||(J[c]={Lx:[],OH:"deprecated",type:a});J[c].Lx.push(b.name)}function D(a){A.warn(a)}function u(a,b){b||(b=a.name+"_COPY");var c=a.materials,g=a.submeshes;a.materials=null;a.submeshes=null;var e=q.O(a);a.materials=c;a.submeshes=g;e.name=b;e.materials=a.materials.slice(0);e.submeshes=[];for(a=0;a<g.length;a++)b=q.N(g[a]),e.submeshes.push(b);return e}function F(a,b,c){if(1<c){for(var g=a.length/c,e=b.length/c,f=new Float32Array(a.length+
b.length),d=0,k=0;k<c;k++)f.set(a.subarray(g*k,g*(k+1)),d),d+=g,f.set(b.subarray(e*k,e*(k+1)),d),d+=e;return f}return q._2(a,b)}var R=Object(M.a)(f),O=Object(n.a)(f),K=Object(z.a)(f),A=Object(m.a)(f),ca=Object(a.a)(f),L=Object(T.a)(f),ha=O.wa,J={},W=y.create(),B=v.c(),ba=C.create();c.fN=function(a){J={};var c=a.worlds;if(0==c.length){A.warn('WARNING Datablock world is missing, reexport "'+a.b4w_filepath_blend+'" scene');var e={name:"DEFAULT",horizon_color:new Float32Array([0,0,0]),zenith_color:new Float32Array([0,
0,0]),light_settings:{use_environment_light:!1,environment_energy:1,environment_color:"PLAIN"},fog_settings:{use_fog:!1,intensity:0,depth:25,start:5,height:0,falloff:"INVERSE_QUADRATIC",use_custom_color:!0,color:[.5,.5,.5]},use_sky_paper:!1,use_sky_blend:!1,use_sky_real:!1,use_nodes:!1,node_tree:null,texture_slots:[]};c.push(e)}for(var f=0;f<c.length;f++){e=c[f];"use_sky_blend"in e||(g("world",e,"use_sky_blend"),e.use_sky_blend=!1);"use_sky_paper"in e||(g("world",e,"use_sky_paper"),e.use_sky_paper=
!1);"use_sky_real"in e||(g("world",e,"use_sky_real"),e.use_sky_real=!1);"b4w_sky_settings"in e&&"rayleigh_brightness"in e.b4w_sky_settings||(g("world",e,"rayleigh_brightness"),e.b4w_sky_settings={render_sky:!1,procedural_skydome:!1,use_as_enviroment_map:!1,color:[.24,.43,.75],rayleigh_brightness:3.3,mie_brightness:.1,spot_brightness:10,scatter_strength:.2,rayleigh_strength:.2,mie_strength:.006,rayleigh_collection_power:.5,mie_collection_power:.5,mie_distribution:.4});"fog_settings"in e||(g("world",
e,"fog_settings"),e.fog_settings={use_fog:!1,intensity:0,depth:25,start:0,height:0,falloff:"QUADRATIC",use_custom_color:!0,color:[.5,.5,.5]},"b4w_fog_color"in e&&(e.fog_settings.use_custom_color=!0,e.fog_settings.color=e.b4w_fog_color),"b4w_fog_density"in e&&0<e.b4w_fog_density&&(e.fog_settings.depth=1/e.b4w_fog_density));"render_sky"in e.b4w_sky_settings||(g("world",e,"render_sky"),e.b4w_sky_settings.render_sky=!1);for(var l=e.texture_slots,m=0;m<l.length;m++){var d=l[m];"blend_type"in d||(d.blend_type=
"MIX",g("world_texture_slot",d,"blend_type"));"use_map_blend"in d||(d.use_map_blend=!1,g("world_texture_slot",d,"use_map_blend"));"use_map_horizon"in d||(d.use_map_horizon=!0,g("world_texture_slot",d,"use_map_horizon"));"use_map_zenith_up"in d||(d.use_map_zenith_up=!1,g("world_texture_slot",d,"use_map_zenith_up"));"use_rgb_to_intensity"in d||(d.use_rgb_to_intensity=!1,g("world_texture_slot",d,"use_rgb_to_intensity"));"invert"in d||(d.invert=!1,g("world_texture_slot",d,"invert"));"color"in d||(d.color=
[1,0,1],g("world_texture_slot",d,"color"));"blend_factor"in d||(d.blend_factor=0,g("world_texture_slot",d,"blend_factor"));"horizon_factor"in d||(d.horizon_factor=1,g("world_texture_slot",d,"horizon_factor"));"zenith_up_factor"in d||(d.zenith_up_factor=0,g("world_texture_slot",d,"zenith_up_factor"));"zenith_down_factor"in d||(d.zenith_down_factor=0,g("world_texture_slot",d,"zenith_down_factor"));"default_value"in d||(d.default_value=1,g("world_texture_slot",d,"default_value"))}"b4w_use_default_animation"in
e||(g("world",e,"b4w_use_default_animation"),e.b4w_use_default_animation=!1);"b4w_anim_behavior"in e||(g("world",e,"b4w_anim_behavior"),e.b4w_anim_behavior="CYCLIC")}l=a.scenes;for(f=0;f<l.length;f++)d=l[f],m=d.world,"timeline_markers"in d||(d.timeline_markers=null,g("scene",d,"timeline_markers")),"boolean"==typeof d.b4w_enable_physics&&(d.b4w_enable_physics="AUTO"),"b4w_reflection_quality"in d||(d.b4w_reflection_quality="MEDIUM",g("scene",d,"b4w_reflection_quality")),"b4w_use_nla"in d||(d.b4w_use_nla=
!1,g("scene",d,"b4w_use_nla")),"fps"in d||(d.fps=24,g("scene",d,"fps")),"b4w_nla_cyclic"in d||(d.b4w_nla_cyclic=!1,g("scene",d,"b4w_nla_cyclic")),"b4w_logic_nodes"in d||(d.b4w_logic_nodes=[],g("scene",d,"b4w_logic_nodes")),"b4w_detect_collisions"in d&&(w("scene",d,"b4w_detect_collisions"),delete d.b4w_detect_collisions),"audio_doppler_speed"in d||(d.audio_doppler_speed=343.3),"audio_doppler_factor"in d||(d.audio_doppler_factor=1),"b4w_dynamic_compressor_settings"in d||(d.b4w_dynamic_compressor_settings=
{threshold:-24,knee:30,ratio:12,attack:.003,release:.25},g("scene",d,"b4w_dynamic_compressor_settings")),"b4w_enable_convolution_engine"in d||(d.b4w_enable_convolution_engine=!1),"b4w_enable_bloom"in d||(d.b4w_enable_bloom=!1,g("scene",d,"b4w_enable_bloom")),"b4w_enable_motion_blur"in d||(d.b4w_enable_motion_blur=!1,g("scene",d,"b4w_enable_motion_blur")),"b4w_enable_color_correction"in d||(d.b4w_enable_color_correction=!1,g("scene",d,"b4w_enable_color_correction")),"b4w_antialiasing_quality"in d||
(d.b4w_antialiasing_quality="MEDIUM",g("scene",d,"b4w_antialiasing_quality")),"b4w_tags"in d||(d.b4w_tags={title:"",description:""},g("scene",d,"b4w_tags")),"b4w_lod_smooth_type"in d||(d.b4w_lod_smooth_type="OFF",g("scene",d,"b4w_lod_smooth_type")),"b4w_lod_hyst_interval"in d||(d.b4w_lod_hyst_interval=0,g("scene",d,"b4w_lod_hyst_interval")),"b4w_enable_object_selection"in d||(d.b4w_enable_object_selection="AUTO",g("scene",d,"b4w_enable_object_selection")),"b4w_enable_outlining"in d||(d.b4w_enable_outlining=
"AUTO",g("scene",d,"b4w_enable_outlining")),"b4w_enable_glow_materials"in d||(d.b4w_enable_glow_materials="AUTO",g("scene",d,"b4w_enable_glow_materials")),"b4w_enable_anchors_visibility"in d||(d.b4w_enable_anchors_visibility="AUTO",g("scene",d,"b4w_enable_anchors_visibility")),"b4w_outline_color"in d||(d.b4w_outline_color=[1,1,1],g("scene",d,"b4w_outline_color")),"b4w_outline_factor"in d||(d.b4w_outline_factor="b4w_glow_factor"in d?d.b4w_glow_factor:1,g("scene",d,"b4w_outline_factor")),"b4w_shadow_settings"in
d||(g("scene",d,"b4w_shadow_settings"),c=m.b4w_shadow_settings,d.b4w_shadow_settings=c?c:{csm_resolution:2048,blur_samples:"16x",self_shadow_polygon_offset:1,b4w_enable_csm:!1,csm_num:1,csm_first_cascade_border:10,first_cascade_blur_radius:3,csm_last_cascade_border:100,last_cascade_blur_radius:1.5,fade_last_cascade:!0,blend_between_cascades:!0}),c=d.b4w_shadow_settings,"csm_resolution"in c||(g("scene",d,"b4w_shadow_settings.csm_resolution"),c.csm_resolution=2048),"blur_samples"in c||(g("scene",d,
"b4w_shadow_settings.blur_samples"),c.blur_samples="16x"),"soft_shadows"in c||(g("scene",d,"b4w_shadow_settings.soft_shadows"),c.soft_shadows=!0),"self_shadow_polygon_offset"in c||(g("scene",d,"b4w_shadow_settings.self_shadow_polygon_offset"),c.self_shadow_polygon_offset=1),"self_shadow_normal_offset"in c||(g("scene",d,"b4w_shadow_settings.self_shadow_normal_offset"),c.self_shadow_normal_offset=.01),"b4w_enable_csm"in c||(g("scene",d,"b4w_shadow_settings.b4w_enable_csm"),c.b4w_enable_csm=!1),"csm_num"in
c||(g("scene",d,"b4w_shadow_settings.csm_num"),c.csm_num=1),"csm_first_cascade_border"in c||(g("scene",d,"b4w_shadow_settings.csm_first_cascade_border"),c.csm_first_cascade_border=10),"first_cascade_blur_radius"in c||(g("scene",d,"b4w_shadow_settings.first_cascade_blur_radius"),c.first_cascade_blur_radius=3),"csm_last_cascade_border"in c||(g("scene",d,"b4w_shadow_settings.csm_last_cascade_border"),c.csm_last_cascade_border=100),"last_cascade_blur_radius"in c||(g("scene",d,"b4w_shadow_settings.last_cascade_blur_radius"),
c.last_cascade_blur_radius=1.5),"fade_last_cascade"in c||(g("scene",d,"b4w_shadow_settings.fade_last_cascade"),c.fade_last_cascade=!0),"blend_between_cascades"in c||(g("scene",d,"b4w_shadow_settings.blend_between_cascades"),c.blend_between_cascades=!0),"b4w_ssao_settings"in d||(g("scene",d,"b4w_ssao_settings"),c=m.b4w_ssao_settings,d.b4w_ssao_settings=c?c:{dist_factor:0,samples:16,hemisphere:!1,blur_depth:!1,blur_discard_value:1}),c=d.b4w_ssao_settings,"dist_factor"in c||(g("scene",d,"b4w_ssao_settings.dist_factor"),
c.dist_factor=0),"samples"in c||(g("scene",d,"b4w_ssao_settings.samples"),c.samples=16),"hemisphere"in c||(g("scene",d,"b4w_ssao_settings.hemisphere"),c.hemisphere=!1),"blur_depth"in c||(g("scene",d,"b4w_ssao_settings.blur_depth"),c.blur_depth=!1),"blur_discard_value"in c||(g("scene",d,"b4w_ssao_settings.blur_discard_value"),c.blur_discard_value=1),"b4w_bloom_settings"in d||(g("scene",d,"b4w_bloom_settings"),c=m.b4w_bloom_settings,d.b4w_bloom_settings=c?c:{key:.2,blur:4,edge_lum:1}),"key"in d.b4w_bloom_settings||
(g("scene",d,"b4w_bloom_settings.key"),d.b4w_bloom_settings.key=.2),"blur"in d.b4w_bloom_settings||(g("scene",d,"b4w_bloom_settings.blur"),d.b4w_bloom_settings.blur=4),"edge_lum"in d.b4w_bloom_settings||(g("scene",d,"b4w_bloom_settings.edge_lum"),d.b4w_bloom_settings.edge_lum=1),"adaptive"in d.b4w_bloom_settings||(g("scene",d,"b4w_bloom_settings.adaptive"),d.b4w_bloom_settings.adaptive=!0),"average_luminance"in d.b4w_bloom_settings||(g("scene",d,"b4w_bloom_settings.average_luminance"),d.b4w_bloom_settings.average_luminance=
.5),"b4w_motion_blur_settings"in d||(g("scene",d,"b4w_motion_blur_settings"),c=m.b4w_motion_blur_settings,d.b4w_motion_blur_settings=c?c:{motion_blur_factor:.01,motion_blur_decay_threshold:.01}),"motion_blur_factor"in d.b4w_motion_blur_settings||(g("scene",d,"b4w_motion_blur_settings.motion_blur_factor"),d.b4w_motion_blur_settings.motion_blur_factor=.01),"motion_blur_decay_threshold"in d.b4w_motion_blur_settings||(g("scene",d,"b4w_motion_blur_settings.motion_blur_decay_threshold"),d.b4w_motion_blur_settings.motion_blur_decay_threshold=
.01),"b4w_color_correction_settings"in d||(g("scene",d,"b4w_color_correction_settings"),c=m.b4w_color_correction_settings,d.b4w_color_correction_settings=c?c:{brightness:0,contrast:0,exposure:1,saturation:1}),"b4w_god_rays_settings"in d||(g("scene",d,"b4w_god_rays_settings"),c=m.b4w_god_rays_settings,d.b4w_god_rays_settings=c?c:{intensity:.7,max_ray_length:1,steps_per_pass:10}),"steps_per_pass"in d.b4w_god_rays_settings||(g("scene",d,"b4w_god_rays_settings.steps_per_pass"),d.b4w_god_rays_settings.steps_per_pass=
10),"b4w_glow_settings"in d||(g("scene",d,"b4w_glow_settings"),d.b4w_glow_settings={render_glow_over_blend:!1,small_glow_mask_coeff:2,large_glow_mask_coeff:2,small_glow_mask_width:2,large_glow_mask_width:6},c=d.b4w_glow_settings,"b4w_render_glow_over_blend"in m&&(c.render_glow_over_blend=m.b4w_render_glow_over_blend),"b4w_small_glow_mask_coeff"in m&&(c.small_glow_mask_coeff=m.b4w_small_glow_mask_coeff),"b4w_large_glow_mask_coeff"in m&&(c.large_glow_mask_coeff=m.b4w_large_glow_mask_coeff),"b4w_small_glow_mask_width"in
m&&(c.small_glow_mask_width=m.b4w_small_glow_mask_width),"b4w_large_glow_mask_width"in m&&(c.large_glow_mask_width=m.b4w_large_glow_mask_width)),m=d.b4w_render_shadows,"AUTO"!=m&&"OFF"!=m&&"ON"!=m&&(d.b4w_render_shadows=m?"ON":"OFF"),m=d.b4w_render_reflections,"OFF"!=m&&"ON"!=m&&(d.b4w_render_reflections=m?"ON":"OFF"),m=d.b4w_render_refractions,"AUTO"!=m&&"OFF"!=m&&"ON"!=m&&(d.b4w_render_refractions=m?"ON":"OFF"),"b4w_render_dynamic_grass"in d||(g("scene",d,"b4w_render_dynamic_grass"),d.b4w_render_dynamic_grass=
"AUTO"),d.b4w_nla_script&&w("scene",d,"b4w_nla_script"),"audio_distance_model"in d||(g("scene",d,"audio_distance_model"),d.audio_distance_model="INVERSE_CLAMPED"),"b4w_custom_prop"in d||(g("scene",d,"b4w_custom_prop"),d.b4w_custom_prop=null);l=a.meshes;for(f=0;f<l.length;f++){d=l[f];d.b4w_boundings||(g("mesh",d,"b4w_boundings"),d.b4w_boundings={},c=d.b4w_boundings,c.bb=d.b4w_bounding_box?d.b4w_bounding_box:{max_x:0,max_y:0,max_z:0,min_x:0,min_y:0,min_z:0},c.bb_src=d.b4w_bounding_box_source?d.b4w_bounding_box_source:
d.b4w_bounding_box,c.bs_cen=d.b4w_bounding_sphere_center?d.b4w_bounding_sphere_center:[0,0,0],c.bc_cen=d.b4w_bounding_cylinder_center?d.b4w_bounding_cylinder_center:[0,0,0],c.be_cen=d.b4w_bounding_ellipsoid_center?d.b4w_bounding_ellipsoid_center:[0,0,0],d.b4w_bounding_ellipsoid_axes?c.be_ax=d.b4w_bounding_ellipsoid_axes:(m=c.bb,c.be_ax=[(m.max_x-m.min_x)/2,(m.max_y-m.min_y)/2,(m.max_z-m.min_z)/2]),d.b4w_rotated_bounding_box?c.rbb=d.b4w_rotated_bounding_box:(m=c.bb,c.rbb={rbb_c:[(m.max_x+m.min_x)/
2,(m.max_y+m.min_y)/2,(m.max_z+m.min_z)/2],rbb_s:[1,1,1]}),c.caxis_x=d.b4w_cov_axis_x?d.b4w_cov_axis_x:[1,0,0],c.caxis_y=d.b4w_cov_axis_y?d.b4w_cov_axis_y:[0,1,0],c.caxis_z=d.b4w_cov_axis_z?d.b4w_cov_axis_z:[0,0,1]);"is_boundings_overridden"in d||(g("mesh",d,"is_boundings_overridden"),d.is_boundings_overridden=!1);"b4w_shape_keys"in d||(d.b4w_shape_keys=[],g("mesh",d,"b4w_shape_keys"));c=!0;for(e=0;e<d.submeshes.length;e++){var n=d.submeshes[e];"boundings"in n||(c=!1,n.boundings={be_ax:d.b4w_bounding_ellipsoid_axes,
be_cen:d.b4w_bounding_ellipsoid_center,bb:{max_x:d.b4w_bounding_box.max_x,max_y:d.b4w_bounding_box.max_y,max_z:d.b4w_bounding_box.max_z,min_x:d.b4w_bounding_box.min_x,min_y:d.b4w_bounding_box.min_y,min_z:d.b4w_bounding_box.min_z}});"uv_layers"in n||(g("submesh",d,"uv_layers"),n.uv_layers=d.uv_textures);"be_ax"in n.boundings||(n.boundings.be_ax=d.b4w_bounding_ellipsoid_axes);"be_cen"in n.boundings||(n.boundings.be_cen=d.b4w_bounding_ellipsoid_center);"bb"in n.boundings||(n.boundings.bb=d.b4w_bounding_box);
"rbb"in n.boundings||(m=d.b4w_bounding_box,n.boundings.rbb={rbb_c:[(m.max_x+m.min_x)/2,(m.max_y+m.min_y)/2,(m.max_z+m.min_z)/2],rbb_s:[1,1,1]});"caxis_x"in n.boundings||(n.boundings.caxis_x=[1,0,0]);"caxis_y"in n.boundings||(n.boundings.caxis_y=[0,1,0]);"caxis_z"in n.boundings||(n.boundings.caxis_z=[0,0,1])}c||g("mesh",d,"submesh_bd");m=d;c=["b4w_apply_scale","b4w_apply_modifiers","b4w_export_edited_normals","b4w_loc_export_vertex_anim","b4w_shape_keys"];e=null;for(n=0;n<c.length;n++)m[c[n]]&&(e?
(m[c[n]]=!1,A.warn('WARNING property "'+c[n]+'" of object "'+m.name+'" has been set to "false". Foreground property "'+e+'" already exists.')):e=c[n]);for(m=0;m<d.b4w_vertex_anim.length;m++)c=d.b4w_vertex_anim[m],"allow_nla"in c||(g('mesh["b4w_vertex_anim"]',d,"allow_nla"),c.allow_nla=!0);"active_uv_name"in d||(g("mesh",d,"active_uv_name"),d.active_uv_name="")}l=a.cameras;for(f=0;f<l.length;f++)d=l[f],d.type||(d.type="PERSP",g("camera",d,"type")),"b4w_eye_target_dist"in d&&(delete d.b4w_eye_target_dist,
w("camera",d,"b4w_eye_target_dist")),"b4w_hover_zero_level"in d||(d.b4w_hover_zero_level=0,g("camera",d,"b4w_hover_zero_level")),"b4w_trans_velocity"in d||(d.b4w_trans_velocity=1,g("camera",d,"b4w_trans_velocity")),"b4w_rot_velocity"in d||(d.b4w_rot_velocity=1,g("camera",d,"b4w_rot_velocity")),"b4w_zoom_velocity"in d||(d.b4w_zoom_velocity=.1,g("camera",d,"b4w_zoom_velocity")),"b4w_use_target_distance_limits"in d||(d.b4w_use_target_distance_limits=d.b4w_use_distance_limits||!1,g("camera",d,"b4w_use_target_distance_limits")),
"b4w_use_zooming"in d||(d.b4w_use_zooming=d.b4w_use_distance_limits||!1,g("camera",d,"b4w_use_zooming")),"b4w_distance_min"in d||(d.b4w_distance_min=1,g("camera",d,"b4w_distance_min")),"b4w_distance_max"in d||(d.b4w_distance_max=100,g("camera",d,"b4w_distance_max")),"b4w_horizontal_translation_min"in d||(d.b4w_horizontal_translation_min=-100,g("camera",d,"b4w_horizontal_translation_min")),"b4w_horizontal_translation_max"in d||(d.b4w_horizontal_translation_max=100,g("camera",d,"b4w_horizontal_translation_max")),
"b4w_vertical_translation_min"in d||(d.b4w_vertical_translation_min=-100,g("camera",d,"b4w_vertical_translation_min")),"b4w_vertical_translation_max"in d||(d.b4w_vertical_translation_max=100,g("camera",d,"b4w_vertical_translation_max")),"b4w_use_horizontal_clamping"in d||(d.b4w_use_horizontal_clamping=!1,g("camera",d,"b4w_use_horizontal_clamping")),"b4w_rotation_left_limit"in d||(d.b4w_rotation_left_limit=-Math.PI,g("camera",d,"b4w_rotation_left_limit")),"b4w_rotation_right_limit"in d||(d.b4w_rotation_right_limit=
Math.PI,g("camera",d,"b4w_rotation_right_limit")),"b4w_horizontal_clamping_type"in d||(d.b4w_horizontal_clamping_type="LOCAL",g("camera",d,"b4w_horizontal_clamping_type")),"b4w_use_vertical_clamping"in d||(d.b4w_use_vertical_clamping=!1,g("camera",d,"b4w_use_vertical_clamping")),"b4w_rotation_down_limit"in d||(d.b4w_rotation_down_limit=-Math.PI/2,g("camera",d,"b4w_rotation_down_limit")),"b4w_rotation_up_limit"in d||(d.b4w_rotation_up_limit=Math.PI/2,g("camera",d,"b4w_rotation_up_limit")),"b4w_vertical_clamping_type"in
d||(d.b4w_vertical_clamping_type="LOCAL",g("camera",d,"b4w_vertical_clamping_type")),"b4w_hover_angle_min"in d||(d.b4w_hover_angle_min=Math.PI/6,g("camera",d,"b4w_hover_angle_min")),"b4w_hover_angle_max"in d||(d.b4w_hover_angle_max=Math.PI/6,g("camera",d,"b4w_hover_angle_max")),"b4w_enable_hover_hor_rotation"in d||(d.b4w_enable_hover_hor_rotation=!0,g("camera",d,"b4w_enable_hover_hor_rotation")),"b4w_use_panning"in d||(d.b4w_use_panning=!0,g("camera",d,"b4w_use_panning")),"b4w_use_pivot_limits"in
d||(d.b4w_use_pivot_limits=!1,d.b4w_pivot_z_min=0,d.b4w_pivot_z_max=10,g("camera",d,"b4w_use_pivot_limits")),"b4w_dof_bokeh"in d||(d.b4w_dof_bokeh=!1,g("camera",d,"b4w_dof_bokeh")),"b4w_dof_bokeh_intensity"in d||(d.b4w_dof_bokeh_intensity=.3,g("camera",d,"b4w_dof_bokeh_intensity")),"b4w_dof_foreground_blur"in d||(d.b4w_dof_foreground_blur=!1,g("camera",d,"b4w_dof_foreground_blur")),"b4w_dof_front_start"in d||(d.b4w_dof_front_start=0,g("camera",d,"b4w_dof_front_start")),"b4w_dof_front_end"in d||(d.b4w_dof_front_end=
d.b4w_dof_front,g("camera",d,"b4w_dof_front_end")),"b4w_dof_rear_start"in d||(d.b4w_dof_rear_start=0,g("camera",d,"b4w_dof_rear_start")),"b4w_dof_rear_end"in d||(d.b4w_dof_rear_end=d.b4w_dof_rear,g("camera",d,"b4w_dof_rear_end")),"sensor_fit"in d||(d.sensor_fit="VERTICAL",g("camera",d,"sensor_fit"));l=a.lamps;for(f=0;f<l.length;f++)if(d=l[f],"b4w_generate_shadows"in d||(d.b4w_generate_shadows=!1,g("lamp",d,"b4w_generate_shadows")),"b4w_dynamic_intensity"in d||(d.b4w_dynamic_intensity=!1,g("lamp",
d,"b4w_dynamic_intensity")),"use_diffuse"in d||(d.use_diffuse=!0,g("lamp",d,"use_diffuse")),"use_specular"in d||(d.use_specular=!0,g("lamp",d,"use_specular")),"clip_start"in d||(d.clip_start=.1,g("lamp",d,"clip_start")),"clip_end"in d||(d.clip_end=30,g("lamp",d,"clip_end")),"POINT"==d.type||"SPOT"==d.type)"use_sphere"in d||(d.use_sphere=!1,g("lamp",d,"use_sphere")),ha.XG&&(d.type="SUN");l=a.speakers;for(f=0;f<l.length;f++)d=l[f],"b4w_behavior"in d||(d.b4w_behavior=d.b4w_background_music?"BACKGROUND_SOUND":
"POSITIONAL"),"b4w_auto_play"in d||(d.b4w_auto_play=!1,g("speaker",d,"b4w_auto_play")),"b4w_enable_doppler"in d||(d.b4w_enable_doppler=!1,g("speaker",d,"b4w_enable_doppler")),"b4w_delay"in d||(d.b4w_delay=0),"b4w_delay_random"in d||(d.b4w_delay_random=0),"b4w_volume_random"in d||(d.b4w_volume_random=0),"b4w_pitch_random"in d||(d.b4w_pitch_random=0),"b4w_fade_in"in d||(d.b4w_fade_in=0),"b4w_fade_out"in d||(d.b4w_fade_out=0),"b4w_loop"in d||(d.b4w_loop=!1),"b4w_loop_start"in d||(d.b4w_loop_start=0,
g("speaker",d,"b4w_loop_start")),"b4w_loop_end"in d||(d.b4w_loop_end=0,g("speaker",d,"b4w_loop_end")),d.animation_data&&b(d.animation_data);l=a.textures;for(f=0;f<l.length;f++)d=l[f],"b4w_anisotropic_filtering"in d||(d.b4w_anisotropic_filtering="OFF",g("texture",d,"b4w_anisotropic_filtering")),"b4w_water_foam"in d||(d.b4w_water_foam=!1,g("texture",d,"b4w_water_foam")),"b4w_foam_uv_freq"in d||(d.b4w_foam_uv_freq=[1,1],g("texture",d,"b4w_foam_uv_freq")),"b4w_foam_uv_magnitude"in d||(d.b4w_foam_uv_magnitude=
[1,1],g("texture",d,"b4w_foam_uv_magnitude")),"b4w_parallax_steps"in d||(d.b4w_parallax_steps=5,g("material",d,"b4w_parallax_steps")),"b4w_parallax_lod_dist"in d||(d.b4w_parallax_lod_dist=10,g("material",d,"b4w_parallax_lod_dist")),"b4w_shore_dist_map"in d||(d.b4w_shore_dist_map=!1,g("texture",d,"b4w_shore_dist_map")),"b4w_shore_boundings"in d||(d.b4w_shore_boundings=[1E3,-1E3,1E3,-1E3],g("texture",d,"b4w_shore_boundings")),"b4w_max_shore_dist"in d||(d.b4w_max_shore_dist=100,g("texture",d,"b4w_max_shore_dist")),
"b4w_disable_compression"in d||(d.b4w_disable_compression=!1,g("texture",d,"b4w_disable_compression")),"b4w_source_type"in d||(d.b4w_source_type="",g("texture",d,"b4w_source_type")),"b4w_source_id"in d||(d.b4w_source_id="",g("texture",d,"b4w_source_id")),"b4w_source_size"in d||(d.b4w_source_size=1024,g("texture",d,"b4w_source_size")),"b4w_enable_canvas_mipmapping"in d||(d.b4w_enable_canvas_mipmapping=!0,g("texture",d,"b4w_enable_canvas_mipmapping")),"b4w_nla_video"in d||(d.b4w_nla_video=!1,g("texture",
d,"b4w_nla_video"));l=a.images;for(f=0;f<l.length;f++)d=l[f],"colorspace_settings_name"in d||(d.colorspace_settings_name="sRGB",g("image",d,"colorspace_settings_name"));c=a.materials;for(f=0;f<c.length;f++){e=c[f];"ALPHA_ANTIALIASING"==e.game_settings.alpha_blend&&(ha.YG?e.game_settings.alpha_blend="CLIP":2>ha.Jc&&(A.warn('Material "'+e.name+'" has the "Alpha Anti-Aliasing" transparency type, but multisampling is disabled. Changed to "Alpha Clip".'),e.game_settings.alpha_blend="CLIP"));"use_tangent_shading"in
e||(e.use_tangent_shading=!1,g("material",e,"use_tangent_shading"));"b4w_node_mat_type"in e&&w("material",e,"b4w_node_mat_type");"b4w_skydome"in e&&w("material",e,"b4w_skydome");"b4w_procedural_skydome"in e&&w("material",e,"b4w_procedural_skydome");"b4w_lens_flares"in e||(e.b4w_lens_flares=!1,g("material",e,"b4w_lens_flares"));"LENS_FLARES"===e.name&&(e.b4w_lens_flares||A.warn('"LENS_FLARES" material name has been found. Enable the "Lens Flare" property for this material.'),e.b4w_lens_flares=!0);
e.b4w_water&&("b4w_water_shore_smoothing"in e||(e.b4w_water_shore_smoothing=!1,g("material",e,"b4w_water_shore_smoothing")),"b4w_water_dynamic"in e||(e.b4w_water_dynamic=!1,g("material",e,"b4w_water_dynamic")),"b4w_waves_height"in e||(e.b4w_waves_height=1,g("material",e,"b4w_waves_height")),"b4w_waves_length"in e||(e.b4w_waves_length=1,g("material",e,"b4w_waves_length")),"b4w_water_dst_noise_scale0"in e||(e.b4w_water_dst_noise_scale0=.05,g("material",e,"b4w_water_dst_noise_scale0")),"b4w_water_dst_noise_scale1"in
e||(e.b4w_water_dst_noise_scale1=.03,g("material",e,"b4w_water_dst_noise_scale1")),"b4w_water_dst_noise_freq0"in e||(e.b4w_water_dst_noise_freq0=1.3,g("material",e,"b4w_water_dst_noise_freq0")),"b4w_water_dst_noise_freq1"in e||(e.b4w_water_dst_noise_freq1=1,g("material",e,"b4w_water_dst_noise_freq1")),"b4w_water_dir_min_shore_fac"in e||(e.b4w_water_dir_min_shore_fac=.4,g("material",e,"b4w_water_dir_min_shore_fac")),"b4w_water_dir_freq"in e||(e.b4w_water_dir_freq=.5,g("material",e,"b4w_water_dir_freq")),
"b4w_water_dir_noise_scale"in e||(e.b4w_water_dir_noise_scale=.05,g("material",e,"b4w_water_dir_noise_scale")),"b4w_water_dir_noise_freq"in e||(e.b4w_water_dir_noise_freq=.07,g("material",e,"b4w_water_dir_noise_freq")),"b4w_water_dir_min_noise_fac"in e||(e.b4w_water_dir_min_noise_fac=.5,g("material",e,"b4w_water_dir_min_noise_fac")),"b4w_water_dst_min_fac"in e||(e.b4w_water_dst_min_fac=.2,g("material",e,"b4w_water_dst_min_fac")),"b4w_water_waves_hor_fac"in e||(e.b4w_water_waves_hor_fac=5,g("material",
e,"b4w_water_waves_hor_fac")),"b4w_water_absorb_factor"in e||(e.b4w_water_absorb_factor=6,g("material",e,"b4w_water_absorb_factor")),"b4w_water_fog_color"in e||(e.b4w_water_fog_color=[.5,.7,.7],g("material",e,"b4w_water_fog_color")),"b4w_foam_factor"in e||(e.b4w_foam_factor=5,g("material",e,"b4w_foam_factor")),"b4w_generated_mesh"in e||(e.b4w_generated_mesh=!1,g("material",e,"b4w_generated_mesh")),"b4w_water_num_cascads"in e||(e.b4w_water_num_cascads=5,g("material",e,"b4w_water_num_cascads")),"b4w_water_subdivs"in
e||(e.b4w_water_subdivs=64,g("material",e,"b4w_water_subdivs")),"b4w_water_detailed_dist"in e||(e.b4w_water_detailed_dist=1E3,g("material",e,"b4w_water_detailed_dist")),"b4w_water_enable_caust"in e||(e.b4w_water_enable_caust=!1,g("material",e,"b4w_water_enable_caust")),"b4w_water_caust_scale"in e||(e.b4w_water_caust_scale=.25,g("material",e,"b4w_water_caust_scale")),"b4w_water_caust_brightness"in e||(e.b4w_water_caust_brightness=.5,g("material",e,"b4w_water_caust_brightness")));"b4w_dynamic_grass_size"in
e||(e.b4w_dynamic_grass_size="");"b4w_dynamic_grass_color"in e||(e.b4w_dynamic_grass_color="");"diffuse_intensity"in e||(e.diffuse_intensity=1,g("material",e,"diffuse_intensity"));"b4w_use_ghost"in e||(e.b4w_use_ghost=!1);"b4w_collision_margin"in e||(e.b4w_collision_margin=.04,g("material",e,"b4w_collision_margin"));"b4w_collision_group"in e||(e.b4w_collision_group=128,g("material",e,"b4w_collision_group"));"b4w_collision_mask"in e||(e.b4w_collision_mask=127,g("material",e,"b4w_collision_mask"));
"b4w_do_not_render"in e||(e.b4w_do_not_render=!1,g("material",e,"b4w_do_not_render"));"HALO"!=e.type||"b4w_halo_sky_stars"in e||(e.b4w_halo_sky_stars=!1,g("material",e,"b4w_halo_sky_stars"));"HALO"!=e.type||"b4w_halo_stars_blend_height"in e||(e.b4w_halo_stars_blend_height=10,g("material",e,"b4w_halo_stars_blend_height"));"HALO"!=e.type||"b4w_halo_stars_min_height"in e||(e.b4w_halo_stars_min_height=0,g("material",e,"b4w_halo_stars_min_height"));"specular_shader"in e||(e.specular_shader="COOKTORR",
g("material",e,"specular_shader"));"diffuse_shader"in e||(e.diffuse_shader="LAMBERT",g("material",e,"diffuse_shader"));"roughness"in e||(e.roughness=.5,g("material",e,"roughness"));"diffuse_fresnel"in e||(e.diffuse_fresnel=.1,g("material",e,"diffuse_fresnel"));"diffuse_fresnel_factor"in e||(e.diffuse_fresnel_factor=.5,g("material",e,"diffuse_fresnel_factor"));"specular_slope"in e||(e.specular_slope=.2,g("material",e,"specular_slope"));"specular_toon_size"in e||(e.specular_toon_size=.5,g("material",
e,"specular_toon_size"));"specular_toon_smooth"in e||(e.specular_toon_smooth=.1,g("material",e,"specular_toon_smooth"));"specular_alpha"in e||(e.specular_alpha=1,g("material",e,"specular_alpha"));"b4w_wettable"in e||(e.b4w_wettable=!1,g("material",e,"b4w_wettable"));"b4w_refractive"in e||(e.b4w_refractive=!1,g("material",e,"b4w_refractive"));"b4w_refr_bump"in e||(e.b4w_refr_bump=0,g("material",e,"b4w_refr_bump"));"b4w_shallow_water_col"in e||(e.b4w_shallow_water_col=[0,.8,.3],g("material",e,"b4w_shallow_water_col"));
"b4w_shore_water_col"in e||(e.b4w_shore_water_col=[0,.9,.2],g("material",e,"b4w_shore_water_col"));"b4w_shallow_water_col_fac"in e||(e.b4w_shallow_water_col_fac=1,g("material",e,"b4w_shallow_water_col_fac"));"b4w_shore_water_col_fac"in e||(e.b4w_shore_water_col_fac=.5,g("material",e,"b4w_shore_water_col_fac"));"b4w_water_sss_strength"in e||(e.b4w_water_sss_strength=5.9,g("material",e,"b4w_water_sss_strength"));"b4w_water_sss_width"in e||(e.b4w_water_sss_width=.45,g("material",e,"b4w_water_sss_width"));
"b4w_render_above_all"in e||(e.b4w_render_above_all=!1,g("material",e,"b4w_render_above_all"));"b4w_water_norm_uv_velocity"in e||(e.b4w_water_norm_uv_velocity=.05,g("material",e,"b4w_water_norm_uv_velocity"));"specular_ior"in e||(e.specular_ior=1,g("material",e,"specular_ior"));"darkness"in e||(e.darkness=0,g("material",e,"darkness"));"diffuse_toon_size"in e||(e.diffuse_toon_size=0,g("material",e,"diffuse_toon_size"));"diffuse_toon_smooth"in e||(e.diffuse_toon_smooth=0,g("material",e,"diffuse_toon_smooth"));
"pass_index"in e||(e.pass_index=0,g("material",e,"pass_index"));l=e.texture_slots;for(m=0;m<l.length;m++)d=l[m],"blend_type"in d||(d.blend_type="MIX",g("texture_slot",d,"blend_type"));if(e.node_tree){l=e.node_tree.nodes;for(m=0;m<l.length;m++)k(l[m]);e.node_tree.animation_data&&b(e.node_tree.animation_data)}}d=a.node_groups;for(f=0;f<d.length;f++)for(l=d[f].node_tree.nodes,m=0;m<l.length;m++)k(l[m]);l=a.objects;for(f=0;f<l.length;f++){d=l[f];switch(d.type){case "MESH":"b4w_dynamic_geometry"in d||
(d.b4w_dynamic_geometry=!1);"b4w_reflexible"in d||(d.b4w_reflexible=!1);"b4w_reflexible_only"in d||(d.b4w_reflexible_only=!1);"b4w_reflective"in d||(d.b4w_reflective=!1);"b4w_reflection_type"in d||(d.b4w_reflection_type="PLANE",g("object",d,"b4w_reflection_type"));"b4w_wind_bending"in d||(d.b4w_wind_bending=!1,g("object",d,"b4w_wind_bending"));"b4w_wind_bending_angle"in d||(d.b4w_wind_bending_angle=10,d.b4w_wind_bending_freq=.25,g("object",d,"wind bending params"));"b4w_detail_bending_amp"in d||(d.b4w_detail_bending_amp=
.1,d.b4w_branch_bending_amp=.3,g("object",d,"detail bending params"));"b4w_detail_bending_freq"in d||(d.b4w_detail_bending_freq=1,g("object",d,"b4w_detail_bending_freq"));"b4w_main_bend_stiffness_col"in d||(d.b4w_main_bend_stiffness_col="",g("object",d,"b4w_main_bend_stiffness_col"));"b4w_detail_bend_colors"in d||(d.b4w_detail_bend_colors={leaves_stiffness_col:"",leaves_phase_col:"",overall_stiffness_col:""},g("object",d,"b4w_detail_bend_colors"));"b4w_caustics"in d||(d.b4w_caustics=!1);"vertex_groups"in
d&&d.vertex_groups.length&&d.data&&0==d.data.vertex_groups.length&&(d.data.vertex_groups=d.vertex_groups,delete d.vertex_groups,g("object",d,"vertex_groups"));"b4w_vertex_anim"in d&&d.b4w_vertex_anim.length&&d.data&&0==d.data.b4w_vertex_anim.length&&(d.data.b4w_vertex_anim=d.b4w_vertex_anim,delete d.b4w_vertex_anim,g("object",d,"b4w_vertex_anim"));"b4w_do_not_render"in d||(d.b4w_do_not_render=!1);"b4w_hidden_on_load"in d||(d.b4w_hidden_on_load=!1);"b4w_hide_chldr_on_load"in d||(d.b4w_hide_chldr_on_load=
!1);"use_ghost"in d.game||(d.game.use_ghost=!1);"use_sleep"in d.game||(d.game.use_sleep=!1);"velocity_min"in d.game||(d.game.velocity_min=0);"velocity_max"in d.game||(d.game.velocity_max=0);"collision_group"in d.game||(d.game.collision_group=1);"collision_mask"in d.game||(d.game.collision_mask=255);m=d;c=m.game;e=c.collision_bounds_type;c.use_collision_bounds&&"BOX"!=e&&"CYLINDER"!=e&&"CONE"!=e&&"SPHERE"!=e&&"CAPSULE"!=e&&"EMPTY"!=e&&(A.error("Wrong collision bounds type "+e+". Disable physics for object "+
m.name),m.b4w_collision=!1,m.b4w_floating=!1,m.b4w_vehicle=!1,m.b4w_character=!1);"b4w_vehicle_settings"in d?d.b4w_vehicle_settings&&("steering_ratio"in d.b4w_vehicle_settings||(d.b4w_vehicle_settings.steering_ratio=10),"steering_max"in d.b4w_vehicle_settings||(d.b4w_vehicle_settings.steering_max=1),"inverse_control"in d.b4w_vehicle_settings||(d.b4w_vehicle_settings.inverse_control=!1),"force_max"in d.b4w_vehicle_settings||(d.b4w_vehicle_settings.force_max=1500),"brake_max"in d.b4w_vehicle_settings||
(d.b4w_vehicle_settings.brake_max=100),"speed_ratio"in d.b4w_vehicle_settings||(d.b4w_vehicle_settings.speed_ratio=.027),"max_speed_angle"in d.b4w_vehicle_settings||(d.b4w_vehicle_settings.max_speed_angle=Math.PI),"delta_tach_angle"in d.b4w_vehicle_settings||(d.b4w_vehicle_settings.delta_tach_angle=4.43),"suspension_compression"in d.b4w_vehicle_settings||(d.b4w_vehicle_settings.suspension_compression=4.4),"suspension_stiffness"in d.b4w_vehicle_settings||(d.b4w_vehicle_settings.suspension_stiffness=
20),"suspension_damping"in d.b4w_vehicle_settings||(d.b4w_vehicle_settings.suspension_damping=2.3),"wheel_friction"in d.b4w_vehicle_settings||(d.b4w_vehicle_settings.wheel_friction=1E3),"roll_influence"in d.b4w_vehicle_settings||(d.b4w_vehicle_settings.roll_influence=.1),"max_suspension_travel_cm"in d.b4w_vehicle_settings||(d.b4w_vehicle_settings.max_suspension_travel_cm=30),"floating_factor"in d.b4w_vehicle_settings||(d.b4w_vehicle_settings.floating_factor=3),"floating_factor"in d.b4w_vehicle_settings||
(d.b4w_vehicle_settings.floating_factor=3),"water_lin_damp"in d.b4w_vehicle_settings||(d.b4w_vehicle_settings.water_lin_damp=.9),"water_rot_damp"in d.b4w_vehicle_settings||(d.b4w_vehicle_settings.water_rot_damp=.9)):(d.b4w_vehicle_settings=null,g("object",d,"b4w_vehicle_settings"));"b4w_floating_settings"in d?d.b4w_floating_settings&&("floating_factor"in d.b4w_floating_settings||(d.b4w_floating_settings.floating_factor=3),"water_lin_damp"in d.b4w_floating_settings||(d.b4w_floating_settings.water_lin_damp=
.8),"water_rot_damp"in d.b4w_floating_settings||(d.b4w_floating_settings.water_rot_damp=.8)):(d.b4w_floating_settings=null,g("object",d,"b4w_floating_settings"));"b4w_character_settings"in d?d.b4w_character_settings&&("walk_speed"in d.b4w_character_settings||(d.b4w_character_settings.walk_speed=4),"run_speed"in d.b4w_character_settings||(d.b4w_character_settings.run_speed=8),"step_height"in d.b4w_character_settings||(d.b4w_character_settings.step_height=.25),"jump_strength"in d.b4w_character_settings||
(d.b4w_character_settings.jump_strength=5),"waterline"in d.b4w_character_settings||(d.b4w_character_settings.waterline=0)):(d.b4w_character_settings=null,g("object",d,"b4w_character_settings"));"b4w_selectable"in d||(d.b4w_selectable=!1,g("object",d,"b4w_selectable"));"b4w_outlining"in d||(d.b4w_outlining=!1,g("object",d,"b4w_outlining"));"b4w_outline_on_select"in d||(d.b4w_outline_on_select=!1,g("object",d,"b4w_outline_on_select"));"b4w_billboard"in d||(d.b4w_billboard=!1,g("object",d,"b4w_billboard"));
"b4w_billboard_geometry"in d||(d.b4w_billboard_geometry="SPHERICAL",g("object",d,"b4w_billboard_geometry"));"b4w_pres_glob_orientation"in d||(d.b4w_pres_glob_orientation=!1,g("object",d,"b4w_pres_glob_orientation"));"b4w_outline_settings"in d||("b4w_glow_settings"in d?d.b4w_outline_settings=d.b4w_glow_settings:(d.b4w_outline_settings={},d.b4w_outline_settings.outline_duration=1,d.b4w_outline_settings.outline_period=1,d.b4w_outline_settings.outline_relapses=0),g("object",d,"b4w_outline_settings"));
"lod_levels"in d||(d.lod_levels=[],g("object",d,"lod_levels"));"b4w_animation_mixing"in d||(d.b4w_animation_mixing=!1,g("object",d,"b4w_animation_mixing"));break;case "EMPTY":"b4w_anchor"in d||(d.b4w_anchor=null,g("object",d,"b4w_anchor")),!d.b4w_anchor||"max_width"in d.b4w_anchor||(d.b4w_anchor.max_width=250)}"collision_margin"in d.game||(d.game.collision_margin=.04,g("object",d,"collision_margin"));"b4w_anim_behavior"in d||(d.b4w_anim_behavior=d.b4w_cyclic_animation?"CYCLIC":"FINISH_STOP",g("object",
d,"b4w_anim_behavior"));if(!("rotation_quaternion"in d)){m=[0,0,0,1];q.Y(d.rotation_euler,m);c=m;e=m[0];n=m[1];var u=m[2];c[0]=m[3];c[1]=e;c[2]=n;c[3]=u;d.rotation_quaternion=m;g("object",d,"rotation_quaternion")}"webgl_do_not_batch"in d&&(d.b4w_do_not_batch=d.webgl_do_not_batch)&&w("object",d,"webgl_do_not_batch");"b4w_shadow_cast_only"in d||(d.b4w_shadow_cast_only=!1,g("object",d,"b4w_shadow_cast_only"));"b4w_correct_bounding_offset"in d||(d.b4w_correct_bounding_offset="AUTO",g("object",d,"b4w_correct_bounding_offset"));
c=d.particle_systems;for(m=0;m<c.length;m++)e=c[m],n=e.settings,"use_rotation_dupli"in n||(n.use_rotation_dupli=!1,g("particle_settings",n,"use_rotation_dupli")),"use_whole_group"in n||(n.use_whole_group=!1,g("particle_settings",n,"use_whole_group")),e.transforms||(e.transforms=new Float32Array,g("particle_system",e,"transforms")),"b4w_billboard_align"in n||(n.b4w_billboard_align="VIEW",g("particle_settings",n,"b4w_billboard_align")),"b4w_dynamic_grass"in n||(n.b4w_dynamic_grass=!1,g("object",n,"b4w_dynamic_grass")),
"b4w_dynamic_grass_scale_threshold"in n||(n.b4w_dynamic_grass_scale_threshold=.01,g("object",n,"b4w_dynamic_grass_scale_threshold")),"b4w_initial_rand_rotation"in n||(n.b4w_initial_rand_rotation=!1,g("particle_settings",n,"b4w_initial_rand_rotation")),"b4w_rotation_type"in n||(n.b4w_rotation_type="Z",g("particle_settings",n,"b4w_rotation_type")),"b4w_rand_rotation_strength"in n||(n.b4w_rand_rotation_strength=1,g("particle_settings",n,"b4w_rand_rotation_strength")),"b4w_hair_billboard"in n||(n.b4w_hair_billboard=
!1,g("particle_settings",n,"b4w_hair_billboard")),"b4w_hair_billboard_type"in n||(n.b4w_hair_billboard_type="BASIC",g("particle_settings",n,"b4w_hair_billboard_type")),"b4w_hair_billboard_jitter_amp"in n||(n.b4w_hair_billboard_jitter_amp=0,g("particle_settings",n,"b4w_hair_billboard_jitter_amp")),"b4w_hair_billboard_jitter_freq"in n||(n.b4w_hair_billboard_jitter_freq=0,g("particle_settings",n,"b4w_hair_billboard_jitter_freq")),"b4w_hair_billboard_geometry"in n||(n.b4w_hair_billboard_geometry="SPHERICAL",
g("particle_settings",n,"b4w_hair_billboard_geometry")),"b4w_wind_bend_inheritance"in n||(n.b4w_wind_bend_inheritance="PARENT",g("particle_settings",n,"b4w_wind_bend_inheritance")),"b4w_shadow_inheritance"in n||(n.b4w_shadow_inheritance="PARENT",g("particle_settings",n,"b4w_shadow_inheritance")),"b4w_reflection_inheritance"in n||(n.b4w_reflection_inheritance="PARENT",g("particle_settings",n,"b4w_reflection_inheritance")),"b4w_vcol_from_name"in n||(n.b4w_vcol_from_name="",g("particle_settings",n,"b4w_vcol_from_name")),
"b4w_vcol_to_name"in n||(n.b4w_vcol_to_name="",g("particle_settings",n,"b4w_vcol_to_name")),"b4w_coordinate_system"in n||(n.b4w_coordinate_system="LOCAL",g("particle_settings",n,"b4w_coordinate_system")),"b4w_allow_nla"in n||(n.b4w_allow_nla=!0,g("particle_settings",n,"b4w_allow_nla")),"b4w_enable_soft_particles"in n||(n.b4w_enable_soft_particles=!1,g("particle_settings",n,"b4w_enable_soft_particles")),"b4w_particles_softness"in n||(n.b4w_particles_softness=1,g("particle_settings",n,"b4w_particles_softness")),
"billboard_tilt"in n||(n.billboard_tilt=0,g("particle_settings",n,"billboard_tilt")),"billboard_tilt_random"in n||(n.billboard_tilt_random=0,g("particle_settings",n,"billboard_tilt_random")),"use_rotations"in n||(n.use_rotations=!1,g("particle_settings",n,"use_rotations"));"constraints"in d||(d.constraints=[],g("object",d,"constraints"));c=d.constraints;for(m=0;m<c.length;m++)e=c[m],"influence"in e||(e.influence=1),"axes"in e||(e.axes=[1,1,1]);c=d.modifiers;for(m=0;m<c.length;m++){a:{e=c[m];switch(e.type){case "ARRAY":if(!("fit_type"in
e)){A.error("WARNING Incomplete modifier "+String(e.type)+' for "'+d.name+'", reexport "'+a.b4w_filepath_blend+'" scene');e=!1;break a}}e=!0}e||(c.splice(m,1),m--)}"animation_data"in d||(d.animation_data={action:null,nla_tracks:[]},g("object",d,"animation_data"));if(d.animation_data){if(!("action"in d.animation_data))d.animation_data.action=null,D("no action in animation data "+d.name);else if(d.animation_data.action){m=d.animation_data.action.fcurves;for(var r in m){c=m[r];for(var v in c)e=c[v],
"num_channels"in e||(e.num_channels=1,D('B4W Warning: no channels number in animation fcurve for "'+d.animation_data.action.name+'" action, reexport scene'))}}"nla_tracks"in d.animation_data||(d.animation_data.nla_tracks=[],D("no NLA in animation data "+d.name));b(d.animation_data)}"b4w_collision_id"in d||(d.b4w_collision_id="",g("object",d,"b4w_collision_id"));"b4w_viewport_alignment"in d||(d.b4w_viewport_alignment=null,g("object",d,"b4w_viewport_alignment"));"pinverse_tsr"in d||(d.pinverse_tsr=
null,g("object",d,"pinverse_tsr"));"b4w_cluster_data"in d||(d.b4w_cluster_data={cluster_id:-1,cluster_center:null},g("object",d,"b4w_cluster_data"));"pass_index"in d||(d.pass_index=0,g("object",d,"pass_index"));"b4w_custom_prop"in d||(g("object",d,"b4w_custom_prop"),d.b4w_custom_prop=null);(0>d.scale[0]||0>d.scale[1]||0>d.scale[2])&&D('negative scale for object "'+d.name+'", can lead to some errors');m=d.scale;0==m[0]&&0==m[1]&&0==m[2]?m=!0:(c=Math.abs((m[1]-m[2])/m[1]),m=.005>Math.abs((m[0]-m[1])/
m[0])&&.005>c);m||D("non-uniform scale for object "+d.name)}for(var y in J)f=J[y],r=y.match(/.*?(?=>>|$)/i)[0],A.warn('Property "'+String(r)+'" is '+f.OH+' for "'+f.type+'". To fix this, reexport '+a.b4w_filepath_blend)};c.uM=function(a){a:{var b=a.modifiers;for(var c=0;c<b.length;c++){var g=b[c].type;if("ARRAY"==g||"CURVE"==g){b=!0;break a}}b=!1}if(!b)return null;b=u(a.data,a.data.name+"_MOD");a=a.modifiers;for(c=0;c<a.length;c++){var f=a[c];switch(f.type){case "ARRAY":g=b;var k=f,d=0,l=0,m=0,n=
new Float32Array(16);f=[];for(var w=1;w<k.count;w++){k.use_constant_offset&&(d+=k.constant_offset_displace[0],l+=k.constant_offset_displace[1],m+=k.constant_offset_displace[2]);if(k.use_relative_offset){var z=g.b4w_boundings.bb;d+=(z.max_x-z.min_x)*k.relative_offset_displace[0];l+=(z.max_y-z.min_y)*k.relative_offset_displace[1];m+=(z.max_z-z.min_z)*k.relative_offset_displace[2]}q._60(d,l,m,n);var D=z=u(g),E=n,I=y.fromMat4(E,W);I=C.fromMat3(I,ba);for(var O=0;O<D.submeshes.length;O++){var L=D.submeshes[O];
q._28(L.position,E,L.position,0);v.j(L.tbn,I,L.tbn)}f.push(z)}for(w=0;w<f.length;w++)for(k=g,d=f[w],l=0;l<k.submeshes.length;l++)if(m=k.submeshes[l],n=d.submeshes[l],z=m.base_length,D=m.indices.length,z)for(var J in m)switch(J){case "base_length":m[J]+=n[J];break;case "boundings":break;case "indices":m[J]=q._67(m[J],n[J]);for(E=D;E<m[J].length;E++)m[J][E]+=z;break;case "position":m[J]=F(m[J],n[J],m[J].length/z/3);break;case "tbn":m[J]=F(m[J],n[J],m[J].length/z/4);break;case "shade_tangs":m[J]=F(m[J],
n[J],m[J].length/z/3);break;case "group":m[J]=F(m[J],n[J],m[J].length/z);break;case "texcoord":m[J]=F(m[J],n[J],m.uv_layers.length);break;case "color":m[J]=F(m[J],n[J],m.vertex_colors.length);break;case "uv_layers":case "vertex_colors":break;default:A.warn('array_mesh_join(): unknown submesh property "'+J+'"'),m[J]=q._2(m[J],n[J])}break;case "CURVE":for(g=b,w=K.gO(f.object),k=new Float32Array(16),l=w.sl?4:3,d=new Float32Array(l),l=new Float32Array(l),m=new Float32Array(3),n=new Float32Array(4),z=
new Float32Array(4),D=new Float32Array(3),E=new Float32Array(3),I=new Float32Array(3),O=0;O<g.submeshes.length;O++){var T=g.submeshes[O];L=T.position;T=T.tbn;a:{var M=f.deform_axis;switch(M){case "POS_X":case "NEG_X":M=0;break a;case "POS_Y":case "NEG_Y":M=1;break a;case "POS_Z":case "NEG_Z":M=2;break a;default:R.va("Wrong deform axis value "+M)}M=void 0}D[0]=0;D[1]=0;D[2]=0;D[M]=1;for(var ca=K.nU(w),ea=0;ea<L.length/3;ea++){I[0]=L[3*ea];I[1]=L[3*ea+1];I[2]=L[3*ea+2];var ha=I[M],wa=K.mU(w,ha);K.oU(w,
wa,d);m[0]=d[0];m[1]=d[1];m[2]=d[2];K.lU(w,wa,l);E[0]=l[0];E[1]=0;E[2]=l[2];r.normalize(E,E);C.rotationTo(D,E,n);0>ha?(d[0]=E[0],d[1]=E[1],d[2]=E[2],r.scale(d,ha,d),r.add(m,d,m)):ha>ca&&(d[0]=E[0],d[1]=E[1],d[2]=E[2],r.scale(d,ha-ca,d),r.add(m,d,m));e.fromRotationTranslation(n,m,k);w.sl&&(C.setAxisAngle(D,d[3],z),r.transformQuat(I,z,I));I[M]=0;r.transformMat4(I,k,I);L[3*ea]=I[0];L[3*ea+1]=I[1];L[3*ea+2]=I[2];ha=v.e(T,ea,B);v.j(ha,n,ha);v.n(T,ha,ea)}}}U.N(b)}return b};c.xM=function(a,b){function c(b,
c){var d=b[0];if(1<b.length)for(var e=1;e<b.length;e++)d+="*"+b[e];for(e=0;e<a.length;e++)if(b=a[e],b.name==d)for(var g in c)b[g]=c[g]}function e(a,b){for(var d in a)c(a[d],b)}for(var g=b.b4w_logic_nodes,f=0;f<g.length;f++)for(var d=g[f],k=0;k<d.length;k++){var l=d[k],m={register1:"variable1",register2:"variable2",registerd:"variabled"},n;for(n in m)n in l&&(l[m[n]]=l[n]);for(var q in l.variables)"boolean"!=typeof l.variables[q][0]&&(l.variables[q]=[!1,l.variables[q]]);0<=["MATH","CONDJUMP","PAGEPARAM",
"REGSTORE"].indexOf(l.type)&&("variable1"in l&&(l.variables.id0=[!1,l.variable1]),"variable2"in l&&(l.variables.id1=[!1,l.variable2]),"variabled"in l&&(l.variables.vd=[!1,l.variabled]));for(var u in l.links)u.startsWith("id")||delete l.links[u];m=l.common_usage_names;var r=l.variables;switch(l.type){case "SELECT":for(var v=0;v<a.length;v++)m=a[v],m.name==l.object&&(m.b4w_selectable=!0);l.bools||(l.bools={});l.bools.not_wait||(l.bools.not_wait=!1);D('Logic nodes type "SELECT" is deprecated');break;
case "SWITCH_SELECT":e(l.objects_paths,{b4w_selectable:!0});if(l.links instanceof Array){D('Format of a "SWITCH_SELECT" node is outdated. It is recommended to reexport the scene "'+b.name+'"');m={};r=0;for(v in l.objects_paths)m[v]=l.links[r],r++;l.links=m}break;case "SELECT_PLAY":D('Logic nodes type "SELECT_PLAY" is deprecated, node will be muted. To fix this, reexport the scene "'+b.name+'"');l.mute=!0;break;case "SELECT_PLAY_ANIM":D('Logic nodes type "SELECT_PLAY_ANIM" is deprecated');break;case "SHOW":case "HIDE":l.bools||
(l.bools={});void 0===l.bools.ch&&(l.bools.ch=!1);l.bools.id0||e(l.objects_paths,{b4w_do_not_batch:!0});break;case "SET_SHADER_NODE_PARAM":case "INHERIT_MAT":e(l.objects_paths,{b4w_do_not_batch:!0});break;case "PLAY":b.b4w_use_nla=!0;break;case "MOVE_TO":e(l.objects_paths,{b4w_do_not_batch:!0});break;case "TRANSFORM_OBJECT":e(l.objects_paths,{b4w_do_not_batch:!0});switch(m.space_type){case "WORLD":m.space_type=ca.NK;break;case "PARENT":m.space_type=ca.MK;break;case "LOCAL":m.space_type=ca.LK}break;
case "OUTLINE":e(l.objects_paths,{b4w_outlining:!0});break;case "CONDJUMP":l.condition&&(m.condition=l.condition);if("cnd"in l.floats)m.condition=l.floats.cnd;else switch(m.condition){case "GEQUAL":m.condition=ca.kD;break;case "LEQUAL":m.condition=ca.mD;break;case "GREATER":m.condition=ca.lD;break;case "LESS":m.condition=ca.nD;break;case "NOTEQUAL":m.condition=ca.oD;break;case "EQUAL":m.condition=ca.jD}void 0!=l.number1&&(l.input1=l.number1);void 0!=l.number2&&(l.input2=l.number2);l.bools||(l.bools=
{});l.bools.str&&(m.variable_type="STRING");switch(m.variable_type){case "NUMBER":m.variable_type=ca.Ry;break;case "STRING":m.variable_type=ca.qD;break;case "OBJECT":m.variable_type=ca.pD}void 0===m.variable_type&&(m.variable_type=ca.Ry,l.floats.inp1=l.input1,l.floats.inp2=l.input2);void 0===r.id0&&(r.id0=r.v1,r.id1=r.v2);break;case "SEND_REQ":l.bools||(l.bools={});l.strings||(l.strings={});void 0===l.bools.ct&&(l.bools.ct=!1);void 0!=l.url&&(l.bools.url=!1,l.strings.url=l.url);break;case "MATH":void 0!=
l.number1&&(l.input1=l.number1);void 0!=l.number2&&(l.input2=l.number2);void 0!=l.input1&&(l.floats.inp1=l.input1);void 0!=l.input2&&(l.floats.inp2=l.input2);switch(l.operation){case "DIV":l.operation=ca.sK;break;case "SUB":l.operation=ca.BK;break;case "MUL":l.operation=ca.xK;break;case "ADD":l.operation=ca.nK;break;case "RAND":l.operation=ca.yK;break;case "SIN":l.operation=ca.AK;break;case "COS":l.operation=ca.rK;break;case "TAN":l.operation=ca.CK;break;case "ARCSIN":l.operation=ca.pK;break;case "ARCCOS":l.operation=
ca.oK;break;case "ARCTAN":l.operation=ca.qK;break;case "LOG":l.operation=ca.tK;break;case "MIN":l.operation=ca.vK;break;case "MAX":l.operation=ca.uK;break;case "ROUND":l.operation=ca.zK;break;case "MOD":l.operation=ca.wK;break;case "ABS":l.operation=ca.mK}void 0===r.id0&&(r.id0=r.v1,r.id1=r.v2);break;case "REGSTORE":l.floats||(l.floats={});l.strings||(l.strings={});void 0!=l.number1&&(l.input1=l.number1);if(void 0!=l.input1)switch(typeof l.input1){case "number":l.floats.inp1=l.input1;m.variable_type=
"NUMBER";break;default:l.strings.inp1=l.input1,m.variable_type="STRING"}switch(m.variable_type){case "NUMBER":m.variable_type=ca.Ry;break;case "STRING":m.variable_type=ca.qD;break;case "OBJECT":m.variable_type=ca.pD,e(l.objects_paths,{b4w_do_not_batch:!0})}break;case "PAGEPARAM":l.bools||(l.bools={});void 0===l.bools.hsh&&(l.bools.hsh=!1);l.floats||(l.floats={});void 0===l.floats.ptp&&(l.floats.ptp=0);break;case "STOP_ANIM":case "PLAY_ANIM":l.bools||(l.bools={});void 0===l.bools.env&&(l.bools.env=
!1);void 0===l.bools.id0&&(l.bools.id0=!1);l.bools.id0||c(l.objects_paths.id0,{b4w_do_not_batch:!0});"PLAY_ANIM"==l.type&&((l=m.param_anim_behavior)||(l="FINISH_STOP"),m.param_anim_behavior=L.az(l));break;case "STRING":switch(m.string_operation){case "JOIN":m.string_operation=ca.IK;break;case "FIND":m.string_operation=ca.HK;break;case "REPLACE":m.string_operation=ca.JK;break;case "SPLIT":m.string_operation=ca.KK;break;case "COMPARE":m.string_operation=ca.GK}if("cnd"in l.floats)m.condition=l.floats.cnd;
else switch(m.condition){case "GEQUAL":m.condition=ca.kD;break;case "LEQUAL":m.condition=ca.mD;break;case "GREATER":m.condition=ca.lD;break;case "LESS":m.condition=ca.nD;break;case "NOTEQUAL":m.condition=ca.oD;break;case "EQUAL":m.condition=ca.jD}break;case "REDIRECT":void 0!=l.url&&(l.bools.url=!1,l.strings.url=l.url);break;case "SET_CAMERA_MOVE_STYLE":switch(m.camera_move_style){case "STATIC":m.camera_move_style=ca.iK;break;case "TARGET":m.camera_move_style=ca.jK;break;case "EYE":m.camera_move_style=
ca.gK;break;case "HOVER":m.camera_move_style=ca.hK}break;case "ENTRYPOINT":l.bools||(l.bools={});void 0===l.bools.js&&(l.bools.js=!1);l.bools.js&&(l.mute=!0);break;case "JS_CALLBACK":for(n in l=m.js_cb_params,l)switch(l[n]){case "OBJECT":l[n]=ca.kK;break;case "VARIABLE":l[n]=ca.lK}}}}});w.a=f},function(D,w,f){D=f(0);var M=f(16),U=f(1),n=f(12),z=f(10),e=f(2);f=Object(D.a)("__debug_batch",function(f,w){function m(a,c,f){var b=[],g;for(g in a)1<e._8(a[g])&&b.push([g,a[g]]);b.sort(function(a,b){var c=
e._8(a[1]),g=e._8(b[1]);return g!=c?g-c:a<b?-1:b<a?1:0});if(b.length){y.groupCollapsed(c+" "+f);y.Wd("Property different variants (>1) | Property name");for(a=0;a<b.length;a++)y.groupCollapsed(e._8(b[a][1]),b[a][0]),q(b[a][1]);y.groupEnd()}}function q(a){y.Wd("Batches count for this property value | Property value");var c=[],e;for(e in a)c.push([e,a[e]]);c.sort(function(a,c){return c[1]!=a[1]?c[1]-a[1]:a[0]<c[0]?-1:c[0]<a[0]?1:0});for(a=0;a<c.length;a++)y.Wd(c[a][1],c[a][0]);y.groupEnd()}var r=Object(M.a)(f),
y=Object(U.a)(f),a=Object(n.a)(f),C=Object(z.a)(f);w.print_batches_stat=function(){for(var e={},c="bounds_local bufs_data id attribute_setters num_vertices num_triangles material_names shader bpy_tex_names".split(" "),f=0,b=0,g=a.tc(C.Bh(),"MESH",a.DATA_ID_ALL),n=0;n<g.length;n++)for(var q=0;q<g[n].Aa.length;q++)for(var u=0;u<g[n].Aa[q].Ia.length;u++){var v=r.tN(g[n].Aa[q].Ia[u]),w=v.Mb.yg+"/"+v.Mb.ff;v["shaders_info.directives"]=v.Mb.fi;v["shaders_info.node_elements"]=v.Mb.Mf;delete v.Mb;for(var z=
0;z<c.length;z++)delete v[c[z]];if(g[n].is_dynamic)b++;else{f++;v.type in e||(e[v.type]={});w in e[v.type]||(e[v.type][w]={});for(var D in v)D in e[v.type][w]||(e[v.type][w][D]={}),z=JSON.stringify(v[D]),z in e[v.type][w][D]||(e[v.type][w][D][z]=0),e[v.type][w][D][z]++}}y.group("Batches statistics:");y.Wd("STATIC/DYNAMIC count:",f+"/"+b);y.group("STATIC batches diversity:");for(var A in e)for(w in e[A])m(e[A][w],A,w);y.groupEnd();y.groupEnd()}});w.a=f},function(D,w,f){D=f(0);var M=f(33),U=f(24),n=
f(1),z=f(8),e=f(30),m=f(68),C=f(41),v=f(80),q=f(26),r=f(3);f=Object(D.a)("camera_anim",function(f,a){function w(a,b,c,e,d){c=u.angle_wrap_0_2pi(b-c);c=Math.min(c,2*Math.PI-c);b=u.angle_wrap_0_2pi(e-b);b=Math.min(b,2*Math.PI-b);if(1E-6>Math.abs(c)||1E-6>2*Math.PI-Math.abs(c))c=0;if(1E-6>Math.abs(b)||1E-6>2*Math.PI-Math.abs(b))b=0;k.is_eye_camera(a)?(d[0]=b,d[1]=c):(d[0]=c,d[1]=b);return d}var k=Object(M.a)(f),c=Object(U.a)(f),l=Object(n.a)(f),b=Object(e.a)(f),g=Object(m.a)(f),y=Object(C.a)(f),D=Object(v.a)(f),
u=Object(q.a)(f),F=new Float32Array(2),R=new Float32Array(2),O=new Float32Array(3),K=new Float32Array(3),A=new Float32Array(3),ca=D.create(),L=D.create(),ha=D.create(),J=z.create(),W={},B=!1,ba=!1,I=!1,P=!1;a.track_to_target=function(a,b,e,f,d,m,n,q){if(k.is_eye_camera(a)){if(u.is_vector(b))var p=b;else p=O,y.get_object_center(b,!1,p);e=e||1;f=f||2;d=d||1;m=m||1;var t=y.get_translation(a,K);b=r.subtract(p,t,A);p=k.get_camera_angles(a,F);var v=k.get_camera_angles_dir(b,R),w=v[0]-p[0],z=v[1]-p[1],B=
Math.abs(Math.acos(Math.cos(w)*Math.cos(z))/e),C=r.length(b)*(1-1/f),D=function(a){return 6*a*(1-a)},E=g.get_timeline(),H=0,I=function(){c.remove_sensor_manifold(a,"TRACK_TO_TARGET");n&&n()};e=c.create_timeline_sensor();f=c.create_elapsed_sensor();c.create_sensor_manifold(a,"TRACK_TO_TARGET",c.CT_CONTINUOUS,[e,f],null,function(b,e,g){k.is_eye_camera(b)?1==g&&(g=c.get_sensor_value(b,e,0)-E,e=c.get_sensor_value(b,e,1),g<B?(g=D(g/B),k.rotate_camera(a,g*w*e/B,g*z*e/B)):g<B+d?(0==H&&(k.rotate_camera(a,
v[0],v[1],!0),H++),g=D(g-B/d),e=g*C*e/d,y.move_local(b,0,0,-e)):g<B+d+m?1>=H&&(k.rotate_camera(a,v[0],v[1],!0),k.eye_set_look_at(a,t),y.move_local(b,0,0,-C),q&&q(),H++):g<B+d+m+d?(2>=H&&(k.rotate_camera(a,v[0],v[1],!0),k.eye_set_look_at(a,t),y.move_local(b,0,0,-C),H++),g=D(g-B-d-m/d),e=g*C*e/d,y.move_local(b,0,0,e)):(k.rotate_camera(a,v[0],v[1],!0),k.eye_set_look_at(a,t),I())):I()})}else l.error("track_to_target(): Wrong camera object or camera move style")};a.auto_rotate=function(a,e,g){function f(b,
e,g){if(1==g)if(g=k.get_move_style(b),g==k.MS_STATIC)d();else if(g!=k.MS_TARGET_CONTROLS&&g!=k.MS_EYE_CONTROLS||!k.has_horizontal_rot_limits(b))n=null,e=c.get_sensor_value(b,e,0),k.rotate_camera(b,e*a,0);else{g=g==k.MS_EYE_CONTROLS?k.eye_get_horizontal_limits(b,W):k.target_get_horizontal_limits(b,W);if(null===n||g.left!=n.left||g.right!=n.right){n=n||{};n.left=g.left;n.right=g.right;p=Math.min(.2,u.angle_wrap_0_2pi(n.right-n.left)/2);g=m;var f=n,l=k.get_camera_angles(g,F)[0];g=w(g,l,f.left,f.right,
R);q=a*Math.min(1,g[0]/.2,g[1]/.2)}e=c.get_sensor_value(b,e,0);g=k.get_camera_angles(b,F)[0];g=w(b,g,n.left,n.right,R);g[1]>p&&g[0]>p?q=u.sign(q)*a:g[1]<p?q-=Math.pow(a,2)/.4*e:g[0]<p&&(q+=Math.pow(a,2)/.4*e);k.rotate_camera(b,e*q,0)}}function d(){c.remove_sensor_manifold(m,"AUTO_ROTATE");c.remove_sensor_manifold(m,"DISABLE_AUTO_ROTATE");e()}e=e||function(){};var m=b.get_active_camera();if(k.is_static_camera(m))l.error("auto_rotate(): Wrong camera move style");else{var n={},p=0,q=0;if(c.check_sensor_manifold(m,
"AUTO_ROTATE"))d();else{var r=c.create_mouse_move_sensor("X"),v=c.create_mouse_move_sensor("Y"),y=c.create_mouse_click_sensor(),z=c.create_touch_move_sensor(),A=c.create_touch_zoom_sensor(),B=c.create_elapsed_sensor();g=g?c.create_mouse_wheel_sensor():c.create_custom_sensor(0);c.create_sensor_manifold(m,"DISABLE_AUTO_ROTATE",c.CT_LEVEL,[r,v,y,z,A,g],function(a){return a[0]&&a[2]||a[1]&&a[2]||a[3]||a[4]||a[5]},d);c.create_sensor_manifold(m,"AUTO_ROTATE",c.CT_CONTINUOUS,[B],function(a){return a[0]},
f)}}};a.is_auto_rotate=function(){var a=b.get_active_camera();return c.check_sensor_manifold(a,"AUTO_ROTATE")};a.check_auto_rotate=function(){var a=b.get_active_camera();return k.get_move_style(a)==k.MS_STATIC?!1:!0};a.move_camera_to_point=function(a,b,c,e,d){if(k.get_move_style(a)!=k.MS_STATIC)l.error("move_camera_to_point(): wrong camera type");else if(!B)if(a)if(b){c=c||1;e=e||.01;var f=u.is_vector(a)?a:y.get_tsr(a,ca),m=u.is_vector(b)?b:y.get_tsr(b,L);b=r.distance(D.get_trans(f,O),D.get_trans(m,
K))/c;c=u.quat_to_dir(D.get_quat(f,J),u.AXIS_MZ,O);var n=u.quat_to_dir(D.get_quat(m,J),u.AXIS_MZ,K);c=Math.min(Math.abs(r.dot(c,n)),1);e=1E3*Math.max(b,Math.acos(c)/e);B=!0;var p=g.animate(0,1,e,function(b){var c=D.interpolate(f,m,u.smooth_step(b),ha);I?(g.clear_animation(p),B=I=!1):(y.set_tsr(a,c),1==b&&(B=!1,d&&d()))})}else l.error("move_camera_to_point(): you must specify the point object");else l.error("move_camera_to_point(): you must specify the camera object")};a.rotate_camera=function(a,b,
c,e,d){if(k.get_move_style(a)==k.MS_STATIC)l.error("rotate_camera(): not supported for STATIC cameras");else if(!ba)if(a)if(b||c){e=e||1E3;ba=!0;var f=0,m=g.animate(0,b,e,function(c){P||Math.abs(c)>=Math.abs(b)?(P=!1,g.clear_animation(m),ba&&(ba=!1,d&&d())):(k.rotate_camera(a,f-c,0),f=c)}),n=0,p=g.animate(0,c,e,function(b){P||Math.abs(b)>=Math.abs(c)?(P=!1,g.clear_animation(p),ba&&(ba=!1,d&&d())):(k.rotate_camera(a,0,n-b),n=b)})}else l.error("rotate_camera(): you must specify the rotation angle");
else l.error("rotate_camera(): you must specify the camera object")};a.stop_cam_moving=function(){I=!0};a.stop_cam_rotating=function(){P=!0};a.is_moving=function(){return B};a.is_rotating=function(){return ba}});w.a=f},function(D,w,f){D=f(0);var M=f(33),U=f(24),n=f(54),z=f(30),e=f(26),m=f(61),C=f(40),v=f(49),q=f(50),r=f(41),y=f(67),a=f(3),T=f(81),k=f(1);f=Object(D.a)("fps",function(c,f){function b(){}function g(a,b,c){var d=H.get_active_camera();P.rotate_camera(d,b,c);b=P.get_camera_angles_char(d,
ta);da.set_character_rotation_h(a,b[0]);da.set_character_vert_move_dir_angle(a,b[1])}function l(a,b,c,d){if(.01<Math.abs(Ha[0])||.01<Math.abs(Ha[1]))c=p.get_sensor_value(a,b,0),b=t.smooth(Ha[0],0,c,.2*ia),c=t.smooth(Ha[1],0,c,.2*ia),Ha[0]-=b,Ha[1]-=c,d(a,-b*Ma,-c*Ma)}function w(a,b){a=document.createElement("div");a.style.cssText="position: absolute;left: 10px;bottom: 70px;width: 53px;height: 53px;background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+PHN2ZyBpZD0ic3ZnMzQwMCIgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMTQuMTExbW0iIHdpZHRoPSIxNC4xMTFtbSIgdmVyc2lvbj0iMS4xIiB4bWxuczpjYz0iaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbnMjIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHZpZXdCb3g9IjAgMCA0OS45OTk5OTggNDkuOTk5OTk5Ij4gPG1ldGFkYXRhIGlkPSJtZXRhZGF0YTM0MDUiPjxyZGY6UkRGPjxjYzpXb3JrIHJkZjphYm91dD0iIj48ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD48ZGM6dHlwZSByZGY6cmVzb3VyY2U9Imh0dHA6Ly9wdXJsLm9yZy9kYy9kY21pdHlwZS9TdGlsbEltYWdlIi8+PGRjOnRpdGxlLz48L2NjOldvcms+PC9yZGY6UkRGPiA8L21ldGFkYXRhPiA8ZyBpZD0ibGF5ZXIxIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwIC0xMDAyLjQpIj48cmVjdCBpZD0icmVjdDI0MTI2IiBvcGFjaXR5PSIwLjU0MyIgZmlsbC1vcGFjaXR5PSIuODM2MTEiIGhlaWdodD0iNTAiIHdpZHRoPSI1MCIgeT0iMTAwMi40IiB4PSIwIiBmaWxsPSIjZmZmIi8+PHBhdGggaWQ9InBhdGgyNDEyOCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgZD0ibTM5LjE0MiAxMDMzLjUtMTQuMTQyLTE0LjE0Mi0xNC4xNDIgMTQuMTQyIiBzdHJva2U9IiM2ZTZlNmUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIyIiBmaWxsPSJub25lIi8+IDwvZz48L3N2Zz4=);";
a.setAttribute("id","B4W_DEFAULT_BTN_1");var c=document.createElement("div");c.style.cssText="position: absolute;left: 10px;bottom: 10px;width: 53px;height: 53px;background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+PHN2ZyBpZD0ic3ZnMzQwMCIgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMTQuMTExbW0iIHdpZHRoPSIxNC4xMTFtbSIgdmVyc2lvbj0iMS4xIiB4bWxuczpjYz0iaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbnMjIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHZpZXdCb3g9IjAgMCA0OS45OTk5OTggNDkuOTk5OTk5Ij4gPG1ldGFkYXRhIGlkPSJtZXRhZGF0YTM0MDUiPjxyZGY6UkRGPjxjYzpXb3JrIHJkZjphYm91dD0iIj48ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD48ZGM6dHlwZSByZGY6cmVzb3VyY2U9Imh0dHA6Ly9wdXJsLm9yZy9kYy9kY21pdHlwZS9TdGlsbEltYWdlIi8+PGRjOnRpdGxlLz48L2NjOldvcms+PC9yZGY6UkRGPiA8L21ldGFkYXRhPiA8ZyBpZD0ibGF5ZXIxIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwIC0xMDAyLjQpIj48cmVjdCBpZD0icmVjdDI0MTI2IiBvcGFjaXR5PSIwLjU0MyIgZmlsbC1vcGFjaXR5PSIuODM2MTEiIGhlaWdodD0iNTAiIHdpZHRoPSI1MCIgeT0iMTAwMi40IiB4PSIwIiBmaWxsPSIjZmZmIi8+PHBhdGggaWQ9InBhdGgyNDEyOCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgZD0ibTM5LjE0MiAxMDMzLjUtMTQuMTQyLTE0LjE0Mi0xNC4xNDIgMTQuMTQyIiBzdHJva2U9IiM2ZTZlNmUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIyIiBmaWxsPSJub25lIi8+IDwvZz48L3N2Zz4=);transform: rotate(180deg);transform-origin: center;";
c.setAttribute("id","B4W_DEFAULT_BTN_2");b.appendChild(a);b.appendChild(c)}function u(a){return"function"===typeof(a.requestPointerLock||a.webkitRequestPointerLock||a.mozRequestPointerLock)}function F(a,c){if(u(a)&&!d.detect_mobile()){var e=p.create_plock_mouse_sensor(a),g=Ga?Ga:p.create_plock_sensor(a);Ga=g;p.create_sensor_manifold(c,"FPS_PLOCK",p.CT_CONTINUOUS,[e,g],function(a){return a[0]&&a[1]},function(a,c,d){0<d&&(c=p.get_sensor_payload(a,c,0),b(a,-c.coords[0]*Ma,-c.coords[1]*Ma))});p.create_sensor_manifold(null,
"FPS_ACTIVATE_PLOCK",p.CT_TRIGGER,[g],function(a){return a[0]},function(b,c,d){0<d?Fa.Oz&&Fa.Oz(a):Fa.sr&&Fa.sr(a)})}else{if(d.detect_mobile()){e=p.create_touch_move_sensor("XY",a);g=p.create_touch_click_sensor(a);var f=4}else{e=p.create_mouse_move_sensor("XY",a);g=p.create_mouse_click_sensor(a);f=2;var k=H.get_active_camera(),h=p.create_elapsed_sensor(),m=p.create_gamepad_axis_sensor(na.GMPD_AXIS_2),n=p.create_gamepad_axis_sensor(na.GMPD_AXIS_3);p.create_sensor_manifold(c,"FPS_CAM_ROT",p.CT_CONTINUOUS,
[h,m,n],function(a){return.05<Math.abs(a[1])||.05<Math.abs(a[2])},function(a,b,c){if(0<c){var d=p.get_sensor_value(a,b,0);c=p.get_sensor_value(a,b,1);b=p.get_sensor_value(a,b,2);d*=2.5;b=-(.05>Math.abs(b)?0:b)*d;c=-(.05>Math.abs(c)?0:c)*d;b=t.clamp(b,Y,Q);P.rotate_camera(k,c,b);c=P.get_camera_angles(k,ta);da.set_character_rotation_h(a,c[0]+Math.PI)}})}var q=0,r=0;p.create_sensor_manifold(null,"FPS_DRAG_PRESS",p.CT_SHOT,[g],function(a){return a[0]},function(a,b,c){1==c&&(a=p.get_sensor_payload(a,b,
0).coords,q=a[0],r=a[1])});p.create_sensor_manifold(null,"FPS_DRAG_MOVE",p.CT_CONTINUOUS,[e,g],function(a){return a[0]&&a[1]},function(a,b,c){1==c&&(a=p.get_sensor_payload(a,b,0).coords,Ha[0]+=(a[0]-q)*f,Ha[1]+=(a[1]-r)*f,q=a[0],r=a[1])});e=p.create_elapsed_sensor();p.create_sensor_manifold(c,"FPS_SMOOTH_DRAG",p.CT_CONTINUOUS,[e],null,l,b)}}function D(a,b){na.add_click_listener(a,function(){pa.request_fullscreen_hmd(a,function(){p.check_sensor_manifolds(b,"FPS_PLOCK")&&p.remove_sensor_manifold(b,
"FPS_PLOCK");p.check_sensor_manifolds(null,"FPS_ACTIVATE_PLOCK")&&p.remove_sensor_manifold(null,"FPS_ACTIVATE_PLOCK");p.check_sensor_manifolds(b,"FPS_CAM_ROT")&&p.remove_sensor_manifold(b,"FPS_CAM_ROT");p.check_sensor_manifolds(null,"FPS_DRAG_PRESS")&&p.remove_sensor_manifold(null,"FPS_DRAG_PRESS");p.check_sensor_manifolds(null,"FPS_DRAG_MOVE")&&p.remove_sensor_manifold(null,"FPS_DRAG_MOVE");p.check_sensor_manifolds(b,"FPS_SMOOTH_DRAG")&&p.remove_sensor_manifold(b,"FPS_SMOOTH_DRAG");N.enable_hmd(N.HMD_ALL_AXES_MOUSE_NONE);
O(b);S&&S()},function(){p.remove_sensor_manifold(b,"FPS_CHARECTER_VR_ROT");N.disable_hmd();F(a,b);va&&va()})})}function O(a){var b=p.create_elapsed_sensor(),c=H.get_active_camera();p.create_sensor_manifold(a,"FPS_CHARECTER_VR_ROT",p.CT_CONTINUOUS,[b],null,function(a){var b=P.get_camera_angles_char(c,ta)[0];da.set_character_rotation_h(a,b)})}function K(){var a=N.check_browser_support()&&!d.detect_mobile(),b=na.get_device_by_type_element(na.DEVICE_HMD);b&&(a=a&&na.get_value_param(b,na.HMD_WEBVR_TYPE)&
na.HMD_WEBVR1);return a}function A(a,b,c,e){function g(a){if(k()){4==l.Km.id&&(a=0);a=0<a?1:a;var d=m+n;n=-(0>a?-1:a);a=p+t;var e=m+n;da.set_character_move_dir(b,a,e);c&&c(a,e);h(a,e);u&&d!=e&&u(a,e,0)}}function f(a){if(k()){a=0<a?1:a;var d=p+t;t=-(0>a?-1:a);a=p+t;var e=m+n;da.set_character_move_dir(b,a,e);c&&c(a,e);h(a,e);u&&d!=a&&u(a,e,0)}}function h(a,b){var c=l.Km.id;a||b||4==c?0==c&&(0<q?B(l,2):B(l,1)):B(l,0)}function k(){return ja?(t=p=n=m=0,!1):!0}d.detect_mobile()&&w(b,a.parentElement?a.parentElement:
a);var l=ba(b),m=0,n=0,p=0,t=0,q=-1,u=e.move_dir_cd;a=e.CM;var r=e.bT,v=e.sR,y=e.nR,z=e.eT,A=e.yP;I(1,e.zP,function(a){if(k()){var d=p+t;p=a;a=p+t;var e=m+n;da.set_character_move_dir(b,a,e);c&&c(a,e);h(a,e);u&&d!=a&&u(a,e,0)}});I(1,a,f);I(1,r,g);I(1,v,function(a){if(k()){4==l.Km.id&&(a=0);var d=m+n;m=a;a=p+t;var e=m+n;da.set_character_move_dir(b,a,e);c&&c(a,e);h(a,e);u&&d!=e&&u(a,e,0)}});I(1,y,function(a){k()&&0<a&&(da.character_jump(b),u&&u(p+t,m+n,1))});I(3,[na.GMPD_AXIS_0],g);I(3,[na.GMPD_AXIS_1],
f);I(1,z,function(a){q=a;Math.abs(p+t)+Math.abs(m+n)?(0<a?B(l,2):B(l,1),u&&u(p+t,m+n,0)):B(l,0)});I(1,A,function(a){0<a&&(a=X.Km.id,1==a||0==a?B(l,3):B(l,1))})}function ca(){X||(X={Ha:[],Km:null,lock:!1,rR:null});return X}function L(a,b,c,d,e,g){a.Ha.push({id:b,$y:c,oE:d,nE:e,nz:g})}function ha(a){for(var b=[],c=0;c<a.Ha;c++){var d=a.Ha[c].id;if(0<=b.indexOf(d))return!1;b.push(d)}for(c=0;c<a.Ha;c++){d=a.Ha[c];for(var e=0;e<d.$y.length;e++)if(0>b.indexOf(d.$y[e]))return!1}return!0}function J(a,b){for(var c=
null,d=0;d<a.Ha.length;d++)if(a.Ha[d].id==b){c=a.Ha[d];break}return c}function W(a,b){b=J(a,b);return a.Km=b}function B(a,b){a.rR=b;if(a.lock)return!1;var c=a.Km,d=c.id;if(0<=c.$y.indexOf(b)){var e=!0;c.nE&&(e=c.nE(d,b));if(e)return W(a,b),c.oE&&c.oE(d,b),c.nz&&c.nz(d,b),!0}return!1}function ba(a){function b(b,c){switch(c){case 0:case 1:da.set_character_move_type(a,da.CM_WALK);break;case 2:da.set_character_move_type(a,da.CM_RUN);break;case 3:da.set_character_move_type(a,da.CM_FLY);break;case 4:da.set_character_move_type(a,
da.CM_CLIMB)}}var c=ca();L(c,0,[1,3,2,4],b,null,null);L(c,1,[2,3,4,0],b,null,null);L(c,2,[1,3,4,0],b,null,null);L(c,3,[1],b,null,null);L(c,4,[1,2,0],b,null,null);ha(c);W(c,0);return X}function I(a,b,c){if(b.length){for(var d=[],e=0;e<b.length;e++)if("number"==typeof b[e])300>b[e]?d.push(p.create_keyboard_sensor(b[e])):326>b[e]?d.push(p.create_gamepad_btn_sensor(b[e],wa)):d.push(p.create_gamepad_axis_sensor(b[e]));else if("string"==typeof b[e]){var g=document.getElementById(b[e]);g?d.push(p.create_touch_click_sensor(g)):
oa.error("Couldn't find element with "+b[e]+" ID.")}b=function(){return!1};e=p.CT_SHOT;g=function(){};switch(a){case 1:e=p.CT_TRIGGER;b=function(a){for(var b=0;b<a.length;b++)if(a[b])return!0;return!1};g=function(a,b,d){0<d?c(1):c(0)};break;case 2:e=p.CT_TRIGGER;b=function(a){for(var b=0;b<a.length;b++)if(a[b])return!0;return!1};g=function(a,b,d){0>d?c(1):c(0)};break;case 3:e=p.CT_CONTINUOUS,b=function(a){for(var b=0;b<a.length;b++)if(.05<Math.abs(a[b]))return!0;return!1},g=function(a,b,d,e){if(0<
d)for(d=0;d<e;d++){var g=p.get_sensor_value(a,b,d);if(.05<Math.abs(g)){c(g);break}}else c(0)}}p.create_sensor_manifold(null,"FPS_USER_CONTROL_ACTION_"+Ea.toString(),e,d,b,g,d.length);Ea++}}var P=Object(M.a)(c),p=Object(U.a)(c),da=Object(n.a)(c),H=Object(z.a)(c),t=Object(e.a)(c),d=Object(m.a)(c),la=Object(C.a)(c),na=Object(v.a)(c),pa=Object(q.a)(c),Aa=Object(r.a)(c),Ja=Object(y.a)(c),N=Object(T.a)(c),oa=Object(k.a)(c),Y=(-Math.PI+.1)/2,Q=(Math.PI-.1)/2,Ha=new Float32Array(2),ia=1,Ma=4E-4,Ea=0,X=null,
Ga=null,Fa={Oz:null,sr:null},wa=0,La=4,ja=!1,ta=new Float32Array(2),ka=new Float32Array(3),qa=new Float32Array(3),S=null,va=null;f.append_switch_vr_cbs=function(a){S=a};f.CS_STAY=0;f.CS_WALK=1;f.CS_RUN=2;f.CS_FLY=3;f.CS_CLIMB=4;f.AT_PRESSED=1;f.AT_RELEASED=2;f.AT_CONTINUOUS=3;f.bind_action=I;f.enable_fps_controls=function(c){c=c||{lock_camera:!0};var e=c.character||H.get_first_character();if(e){var f=c.element||la.get_canvas(),k=c.motion_cb||null;wa=c.gamepad_id||0;var l=c.forward_sens||[p.KEY_W,
na.GMPD_BUTTON_12],m=c.backward_sens||[p.KEY_S,na.GMPD_BUTTON_13],h=c.right_sens||[p.KEY_D,na.GMPD_BUTTON_15],n=c.left_sens||[p.KEY_A,na.GMPD_BUTTON_14],t=c.jump_sens||[p.KEY_SPACE,na.GMPD_BUTTON_1],q=c.CY||[p.KEY_SHIFT,na.GMPD_BUTTON_7],u=c.fly_sens||[];d.detect_mobile()&&(l.push("B4W_DEFAULT_BTN_1"),m.push("B4W_DEFAULT_BTN_2"));l={zP:l,CM:m,bT:h,sR:n,nR:t,eT:q,yP:u,move_dir_cd:c.move_dir_cd||null};b=c.rotation_cb||g;m="undefined"!=typeof c.lock_camera?c.lock_camera:!0;c=H.get_active_camera();m&&
(m=Aa.get_translation(c,ka),h=Aa.get_translation(e,qa),a.subtract(m,h,m),Ja.append_stiff_trans(c,e,m));c=P.get_camera_angles_char(c,ta);da.set_character_rotation_h(e,c[0]);da.set_character_vert_move_dir_angle(e,c[1]);K()&&D(f,e);F(f,e);A(f,e,k,l)}};f.disable_fps_controls=function(a,b){a=a||H.get_first_character();b=b||la.get_container();if(a){for(var c=0;c<Ea;c++)p.remove_sensor_manifold(null,"FPS_USER_CONTROL_ACTION_"+c.toString());c=a;var e=b;u(e)&&!d.detect_mobile()&&(Fa.sr&&Fa.sr(e),p.remove_sensor_manifold(c,
"FPS_PLOCK"),p.remove_sensor_manifold(null,"FPS_ACTIVATE_PLOCK"));c=a;if(!u(b)||d.detect_mobile())p.remove_sensor_manifold(c,"FPS_CAM_ROT"),p.remove_sensor_manifold(c,"FPS_DRAG_PRESS"),p.remove_sensor_manifold(c,"FPS_DRAG_MOVE"),p.remove_sensor_manifold(c,"FPS_SMOOTH_DRAG");K()&&p.remove_sensor_manifold(a,"FPS_CHARECTER_VR_ROT");d.detect_mobile()&&(a=document.getElementById("B4W_DEFAULT_BTN_1"),c=document.getElementById("B4W_DEFAULT_BTN_2"),a&&b.removeChild(a),c&&b.removeChild(c))}};f.set_state_change_cb=
function(a,b){J(X,a).nz=b};f.set_cam_smooth_factor=function(a){p.set_plock_smooth_factor(a);ia=a};f.get_cam_smooth_factor=function(){return ia};f.set_cam_sensitivity=function(a){Ma=a/2E5};f.get_cam_sensitivity=function(){return 2E5*Ma};f.set_plock_enable_cb=function(a){Fa.Oz=a};f.set_plock_disable_cb=function(a){Fa.sr=a};f.get_character_state=function(){return X.Km.id};f.add_new_state=function(){return La++};f.add_state=function(a,b,c){var d=ca();L(d,a,b,c,null,null);ha(d)||oa.error("Incorrect state machine.")};
f.switch_state=function(a){var b=ca();B(b,a)};f.lock_character=function(){ca().lock=!0};f.unlock_character=function(){ca().lock=!1};f.is_character_locked=function(){return ca().lock};f.set_rotation_cb=function(a){a?b=a:b=g};f.freeze_movements=function(){ja=!0};f.unfreeze_movements=function(){ja=!1}});w.a=f},function(D,w,f){D=f(0);var M=f(40),U=f(24),n=f(49),z=f(69);f=Object(D.a)("gp_conf",function(e,f){function m(){ba.length=0;for(var a=navigator.getGamepads?navigator.getGamepads():navigator.webkitGetGamepads?
navigator.webkitGetGamepads:[],b=0;b<a.length;b++)a[b]&&ba.push(a[b]);return ba}function v(a){var b=ea.get(a+"_gmpd_stngs","b4w");if(b){b=JSON.parse(b);for(var c in b)E.set_gamepad_key(a,c,b[c])}else c=JSON.stringify(F),ea.set(a+"_gmpd_stngs",c,"b4w")}function q(a){da=!0;var b=document.createElement("div"),c=document.createElement("div"),e=document.createElement("div"),g=document.createElement("div"),f=document.createElement("div"),l=document.createElement("div"),m=document.createElement("div"),n=
document.createElement("div"),t=document.createElement("div"),q=document.createElement("div"),r=document.createElement("div"),v=document.createElement("div"),w=document.createElement("div"),y=document.createElement("div"),z=document.createElement("div"),A=document.createElement("div"),B=document.createElement("div"),C=document.createElement("div"),F=document.createElement("div"),D=document.createElement("div"),H=document.createElement("div"),O=document.createElement("div");L=b;b.style.cssText="position: absolute;height: auto;background-image: url('data:image/svg+xml;base64,"+
btoa('<svg id="svg26627" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="128.51mm" viewBox="0 0 636.63517 455.33329" width="179.67mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:dc="http://purl.org/dc/elements/1.1/"><defs id="defs26629"><linearGradient id="linearGradient4691"><stop id="stop4693" offset="0"/><stop id="stop4695" stop-opacity="0" offset="1"/></linearGradient><linearGradient id="linearGradient4358"><stop id="stop4360" stop-color="#2e2e2e" offset="0"/><stop id="stop4362" stop-color="#2e2e2e" stop-opacity="0" offset="1"/></linearGradient><linearGradient id="linearGradient4364" x1="1141.5" xlink:href="#linearGradient4358" gradientUnits="userSpaceOnUse" y1="255.95" gradientTransform="matrix(-1 0 0 1 1531.4 560.1)" x2="1165.2" y2="309.88"/><linearGradient id="linearGradient4368" x1="1141.5" xlink:href="#linearGradient4358" gradientUnits="userSpaceOnUse" y1="255.95" gradientTransform="translate(-896.37 560.1)" x2="1165.2" y2="309.88"/><linearGradient id="linearGradient4430" x1="959.32" gradientUnits="userSpaceOnUse" y1="653.07" gradientTransform="matrix(-1 0 0 1 1531.4 70.097)" x2="1467.6" y2="653.07"><stop id="stop4426" stop-color="#4f4f4f" offset="0"/><stop id="stop4428" stop-color="#4f4f4f" stop-opacity="0" offset="1"/></linearGradient><linearGradient id="linearGradient4701" x1="529.91" xlink:href="#linearGradient4691" gradientUnits="userSpaceOnUse" y1="111.1" gradientTransform="translate(-52.276 546.89)" x2="481.49" y2="85.746"/><linearGradient id="linearGradient4713" x1="529.91" xlink:href="#linearGradient4691" gradientUnits="userSpaceOnUse" y1="111.1" gradientTransform="matrix(-1 0 0 1 689.01 546.89)" x2="481.49" y2="85.746"/><linearGradient id="linearGradient4725" x1="367.39" xlink:href="#linearGradient4691" gradientUnits="userSpaceOnUse" y1="125.6" gradientTransform="matrix(-1.3272 0 0 .68317 806.95 579.14)" x2="367.39" y2="116.11"/></defs><metadata id="metadata26632"><rdf:RDF><cc:Work rdf:about="">    <dc:format>image/svg+xml</dc:format>    <dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/>    <dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -597.03)"><g id="g20" fill-rule="evenodd"><path id="path4209" fill="#434343" d="m576.71 1052.4c42.015-1.9097 64.296-46.468 59.204-122.86-5.0928-76.387-27.374-175.69-44.562-224.7-17.188-49.015-25.501-62.531-26.737-65.565-3.7697-9.2504-11.278-19.949-62.379-27.691-28.97-4.3891-16.697-7.9577-27.084-9.4696-17.96-2.6141-43.609-1.229-52.203 1.6354-8.594 2.8645-12.709 29.16-24.486 35.207-11.777 6.0473-19.416 10.185-80.149 10.185s-68.372-4.1376-80.149-10.185c-11.777-6.0473-18.113-32.099-25.736-36.993-11.183-7.1796-26.985-5.6722-54.891-0.57481-5.64 1.0302-1.1304 7.6212-18.165 12.509-32.913 9.4438-52.094 3.7056-65.087 20.831-1.9807 2.6106-11.822 21.096-29.01 70.111-17.179 48.95-39.46 148.25-44.553 224.64-5.0929 76.39 17.188 120.99 59.204 122.89 73.339-1.7 55.219-116.53 258.4-116.53s185.05 114.82 258.4 116.49z"/><path id="path4366" fill="url(#linearGradient4368)" d="m249.77 838.51c-107.76 0-171.55 96.288-176.84 121.23-5.2294 24.634-17.658 55.705 3.8195 53.789 9.6996-0.8655 18.053-15.713 37.559-38.193 18.78-21.643 41.379-54.425 96.763-54.425s73.209-44.877 75.119-53.152c1.9098-8.2752 2.4146-27.976-36.418-29.25z"/><path id="path4217" fill="url(#linearGradient4364)" d="m385.23 838.51c107.76 0 171.55 96.288 176.84 121.23 5.2293 24.634 17.658 55.705-3.8195 53.789-9.6996-0.8655-18.053-15.713-37.559-38.193-18.78-21.643-41.379-54.425-96.763-54.425s-73.209-44.877-75.119-53.152c-1.9098-8.2752-2.4146-27.976 36.418-29.25z"/><path id="path4370" fill="url(#linearGradient4430)" d="m572.06 654.81c-60.48-19.09-76.79-18.6-89.84-17.96-13.05 0.63657-22.638 16.617-45.237 49.4s-67.48 125.27-116.23 125.27c-48.746 0-93.626-92.491-116.23-125.27-22.599-32.783-32.008-48.942-45.059-49.579-13.05-0.63648-35.251 1.8354-95.728 20.932l1.1161-2.3404c60.494-19.1 81.754-20.83 94.804-20.19 13.05 0.63657 22.281 13.049 44.88 45.832s67.48 123.49 116.23 123.49c48.746 0 93.626-90.709 116.23-123.49 22.599-32.783 31.83-45.195 44.88-45.832 13.05-0.63648 28.783-1.6248 89.26 17.472"/><path id="path4315" fill="#343434" d="m570.99 652.48c-60.477-19.097-76.074-18.269-89.124-17.633-13.05 0.63658-22.281 14.832-44.88 47.614-22.599 32.783-67.48 125.27-116.23 125.27-48.746 0-93.626-92.491-116.23-125.27-22.599-32.783-31.83-46.978-44.88-47.614-13.05-0.63648-34.715 1.2996-95.192 20.396l1.1161-2.3404c60.474-19.1 81.024-22.26 94.074-21.62 13.05 0.63658 22.281 13.049 44.88 45.832s67.48 123.49 116.23 123.49c48.746 0 93.626-90.709 116.23-123.49 22.599-32.783 31.83-45.195 44.88-45.832 13.05-0.63647 27.71-0.17274 88.186 18.924"/></g><g id="g15645" transform="matrix(.75439 0 0 1 1558.5 -6638.3)" fill-rule="evenodd"><rect id="rect15584" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="2" ry="1.8461" height="44.307" width="570" y="6558.3" x="100.71" fill="#4164bb"/><rect id="rect15331" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="2" ry="1.8461" height="44.307" width="570" y="6554.6" x="100.71" fill="#5276cf"/></g><text id="text15623-9" style="word-spacing:0px;letter-spacing:0px" font-weight="300" xml:space="preserve" font-size="22px" line-height="430.99999428%" y="-53.755863" x="1792.7805" font-family="&apos;Noto Sans CJK TC&apos;" fill="#ffffff"><tspan id="tspan15625-5" y="-53.755863" x="1792.7805"/></text><text id="text15657" style="word-spacing:0px;letter-spacing:0px" font-weight="300" xml:space="preserve" font-size="13px" line-height="430.99999428%" y="-3.7607465" x="1670.2437" font-family="&apos;Noto Sans CJK TC&apos;" fill="#828282"><tspan id="tspan15659" y="-3.7607465" x="1670.2437"/></text><g id="g34" fill-rule="evenodd"><path id="path4675" fill="#303030" d="m551.75 628.4c9.3003 4.1796 8.2375 11.558 2.1302 9.9581-6.1073-1.6003-33.792-9.1405-46.239-11.577-12.446-2.4363-34.904-3.0623-36.951-4.0165-2.0474-0.95416 0.93313-7.7247 5.491-7.3449 23.258 0.91012 59.905 6.0339 75.569 12.98z"/><path id="path4677" fill="#303030" d="m474.88 602.61c3.6488 0.63684 4.1169 1.3708 2.4115 5.2499-0.80967 1.8416-1.261 3.904-3.4715 3.7336-4.456-0.34344-16.578-1.2846-25.692-1.3764-9.1139-0.0918-23.83 1.217-25.307 0.79399-1.4771-0.42301-1.8834-4.9141 1.7769-6.7458 4.6221-1.3593 38.698-3.2021 50.281-1.6553z"/><path id="path4699" opacity=".384" fill="url(#linearGradient4701)" d="m475.53 611.7c-11.693-0.63604-8.4597-0.73151-44.068 54.448-6.5182 8.6489-22.874 37.231-36.865 35.326-6.7491-1.4177 15.436-67.299 22.724-75.767 11.112-12.911 19.255-16.122 58.209-14.007z"/><path id="path4703" fill="#303030" d="m84.068 628.4c-9.3003 4.1796-8.2375 11.558-2.1302 9.9581 6.1073-1.6003 33.792-9.1405 46.239-11.577 12.446-2.4363 34.904-3.0623 36.951-4.0165 2.0474-0.95416-0.93313-7.7247-5.491-7.3449-23.258 0.91012-59.905 6.0339-75.569 12.98z"/><path id="path4705" fill="#303030" d="m161.86 602.61c-3.6488 0.63684-4.1169 1.3708-2.4115 5.2499 0.80967 1.8416 1.261 3.904 3.4715 3.7336 4.456-0.34344 16.578-1.2846 25.692-1.3764 9.1139-0.0918 23.83 1.217 25.307 0.79399 1.4771-0.42301 1.8834-4.9141-1.7769-6.7458-4.6221-1.3593-38.698-3.2021-50.281-1.6553z"/><path id="path4711" opacity=".384" fill="url(#linearGradient4713)" d="m161.2 611.7c11.693-0.63604 8.4597-0.73151 44.068 54.448 6.5182 8.6489 22.874 37.231 36.865 35.326 6.7491-1.4177-15.436-67.299-22.724-75.767-11.112-12.911-19.255-16.122-58.209-14.007z"/><path id="path4717" opacity=".115" fill="url(#linearGradient4725)" d="m413.37 645.84c-9.0496 10.007-29.401 19.937-36.775 19.937h-52.205c-31.171 0-37.359 0.34506-47.75 0.51758-10.39 0.17253-18.682 0.65628-23.653-3.278-5.0513-3.9977-24-15.425-24-15.425 53.346 4.1464 144.49 4.3368 184.38-1.7523z"/></g></g><g id="layer1-0" fill-rule="evenodd" transform="translate(159.08 -720.76)"><g id="g4527-3" transform="translate(-961.22,330.69)"><ellipse id="circle4233-8" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="66.284" ry="66.279" cy="655.39" cx="1027.5" fill="#303030"/><ellipse id="circle4235-8" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="62.007" ry="62.003" cy="655.39" cx="1027.5" fill="#4c4c4c"/><ellipse id="circle4237-7" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="43.41" ry="43.408" cy="655.39" cx="1027.5" fill="#303030"/></g><g id="g4523-1" transform="translate(-961.22,330.69)"><ellipse id="circle4239-4" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="40.057" ry="40.054" cy="655.39" cx="1027.5" fill="#3b63c9"/><ellipse id="circle4243-3" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="36.23" ry="36.228" cy="655.39" cx="1027.5" fill="#5276cf"/></g><g id="g3506" transform="translate(-961.22,330.69)"><ellipse id="ellipse3508" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="66.284" ry="66.279" cy="655.39" cx="1027.5" fill="#303030"/><ellipse id="ellipse3510" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="62.007" ry="62.003" cy="655.39" cx="1027.5" fill="#4c4c4c"/><ellipse id="ellipse3512" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="43.41" ry="43.408" cy="655.39" cx="1027.5" fill="#303030"/></g></g><g id="layer1-7" fill-rule="evenodd" transform="translate(352.57 -719.72)"><g id="g4527-3-4" transform="translate(-961.22,330.69)"><ellipse id="circle4233-8-8" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="66.284" ry="66.279" cy="655.39" cx="1027.5" fill="#303030"/><ellipse id="circle4235-8-9" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="62.007" ry="62.003" cy="655.39" cx="1027.5" fill="#4c4c4c"/><ellipse id="circle4237-7-3" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="43.41" ry="43.408" cy="655.39" cx="1027.5" fill="#303030"/></g><g id="g4523-1-1" transform="translate(-961.22,330.69)"><ellipse id="circle4239-4-4" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="40.057" ry="40.054" cy="655.39" cx="1027.5" fill="#3b63c9"/><ellipse id="circle4243-3-5" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="36.23" ry="36.228" cy="655.39" cx="1027.5" fill="#5276cf"/></g><g id="g3506-2" transform="translate(-961.22,330.69)"><ellipse id="ellipse3508-1" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="66.284" ry="66.279" cy="655.39" cx="1027.5" fill="#303030"/><ellipse id="ellipse3510-1" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="62.007" ry="62.003" cy="655.39" cx="1027.5" fill="#4c4c4c"/><ellipse id="ellipse3512-4" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="43.41" ry="43.408" cy="655.39" cx="1027.5" fill="#303030"/></g></g></svg>')+
"');width: 637px;height: 455px;background-size: 100% 100%;left: 50%;margin-bottom: 40px;-moz-transform: translateX(-50%);-ms-transform: translateX(-50%);-webkit-transform: translateX(-50%);bottom: 0px;";c.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3904" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="35.924mm" width="35.926mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 127.29808 127.28933"><metadata id="metadata3909"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" fill-rule="evenodd" transform="translate(0 -925.07)"><ellipse id="circle4330" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="63.649" ry="63.645" cy="988.72" cx="63.649" fill="#303030"/><ellipse id="circle4223" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="59.705" ry="59.701" cy="988.72" cx="63.649" fill="#4c4c4c"/></g></svg>')+
"');position: absolute;top: 47px;left: 65px;width: 135px;height: 135px;";e.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3754" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="10.711mm" width="9.9653mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 35.3101 37.950677"><metadata id="metadata3759"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1014.4)"><path id="path4326" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" d="m34.81 1017.1c-15.254-3.8172-24.634-1.7612-34.31 0v16.247h0.015c-0.013 0.097-0.013 0.1951-0.015 0.2928 0.0006 9.4753 7.6813 18.256 17.156 18.256 9.4739-0.0005 17.154-8.7813 17.154-18.256 0-0.097-0.014-0.1952-0.014-0.2928h0.014z" fill-rule="evenodd" stroke="#4364b2" stroke-linecap="round" fill="#5276cf"/></g></svg>')+
"');width: 36px;height: 38px;left: 49px;top: 8px;position: absolute;";g.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3790" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="9.9646mm" width="10.711mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 37.953175 35.3077"><metadata id="metadata3795"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1017.1)"><path id="path4324" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" d="m35.298 1017.6c3.8175 15.253 1.7611 24.633 0 34.308h-16.248v-0.015c-0.098 0.01-0.1952 0.01-0.2928 0.015-9.476-0.0006-18.258-7.6807-18.257-17.154 0.0005-9.4733 8.7818-17.153 18.257-17.153 0.098 0 0.1952 0.01 0.2928 0.011v-0.011z" fill-rule="evenodd" stroke="#4364b2" stroke-linecap="round" fill="#5276cf"/></g></svg>')+
"');width: 38px;height: 36px;top: 47px;left: 84px;position: absolute;";f.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3754" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="10.711mm" width="9.9653mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 35.3101 37.950677"><metadata id="metadata3759"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1014.4)"><path id="path4328" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" d="m34.81 1049.7c-15.254 3.8172-24.634 1.7612-34.31 0v-16.247h0.015c-0.013-0.097-0.013-0.1951-0.015-0.2928 0.0006-9.4753 7.6813-18.256 17.156-18.256 9.4739 0.0005 17.154 8.7813 17.154 18.256 0 0.097-0.014 0.1952-0.014 0.2928h0.014z" fill-rule="evenodd" stroke="#4364b2" stroke-linecap="round" fill="#5276cf"/></g></svg>')+
"');width: 36px;height: 38px;bottom: 11px;left: 51px;position: absolute;";l.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3790" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="9.9646mm" width="10.711mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 37.953175 35.3077"><metadata id="metadata3795"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1017.1)"><path id="path4324" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" d="m2.6552 1051.9c-3.8175-15.253-1.7611-24.633 0-34.308h16.248v0.015c0.098-0.01 0.1952-0.01 0.2928-0.015 9.476 0.0006 18.258 7.6807 18.257 17.154-0.0005 9.4733-8.7818 17.153-18.257 17.153-0.098 0-0.1952-0.01-0.2928-0.011v0.011z" fill-rule="evenodd" stroke="#4364b2" stroke-linecap="round" fill="#5276cf"/></g></svg>')+
"');width: 38px;height: 36px;top: 47px;left: 13px;position: absolute;";m.style.cssText="position: absolute;top: 55px;left: 434px;width: 150px;height: 150px;";n.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3548" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="13.417mm" width="13.418mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 47.543997 47.542"><metadata id="metadata3553"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1004.8)"><ellipse id="circle4271" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="23.772" ry="23.771" cy="1028.6" cx="23.772" fill="#303030"/><ellipse id="circle4273" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" stroke-linecap="round" rx="18.668" ry="18.667" stroke="#3b63c9" cy="1028.6" cx="23.772" fill="#5276cf"/></g></svg>')+
"');width: 50px;height: 50px;left: 53px;top: 0px;position: absolute;";t.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3548" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="13.417mm" width="13.418mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 47.543997 47.542"><metadata id="metadata3553"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1004.8)"><ellipse id="circle4271" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="23.772" ry="23.771" cy="1028.6" cx="23.772" fill="#303030"/><ellipse id="circle4273" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" stroke-linecap="round" rx="18.668" ry="18.667" stroke="#3b63c9" cy="1028.6" cx="23.772" fill="#5276cf"/></g></svg>')+
"');width: 50px;height: 50px;left: 107px;top: 51px;position: absolute;";q.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3548" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="13.417mm" width="13.418mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 47.543997 47.542"><metadata id="metadata3553"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1004.8)"><ellipse id="circle4271" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="23.772" ry="23.771" cy="1028.6" cx="23.772" fill="#303030"/><ellipse id="circle4273" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" stroke-linecap="round" rx="18.668" ry="18.667" stroke="#3b63c9" cy="1028.6" cx="23.772" fill="#5276cf"/></g></svg>')+
"');width: 50px;height: 50px;left: 53px;bottom: 0px;position: absolute;";r.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3548" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="13.417mm" width="13.418mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 47.543997 47.542"><metadata id="metadata3553"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1004.8)"><ellipse id="circle4271" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="23.772" ry="23.771" cy="1028.6" cx="23.772" fill="#303030"/><ellipse id="circle4273" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" stroke-linecap="round" rx="18.668" ry="18.667" stroke="#3b63c9" cy="1028.6" cx="23.772" fill="#5276cf"/></g></svg>')+
"');width: 50px;height: 50px;top: 51px;position: absolute;";v.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3461" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="22.608mm" width="22.61mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 80.114398 80.108405"><metadata id="metadata3466"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(.0000019915 -972.25)"><g id="g3514-7" fill-rule="evenodd" transform="translate(-987.45 356.91)"><ellipse id="ellipse3516-7" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="40.057" ry="40.054" cy="655.39" cx="1027.5" fill="#3b63c9"/><ellipse id="ellipse3518-7" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="36.23" ry="36.228" cy="655.39" cx="1027.5" fill="#5276cf"/></g></g></svg>')+
"');position: absolute;top: 222px;left: 183px;width: 85px;height: 85px;";w.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3461" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="22.608mm" width="22.61mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 80.114398 80.108405"><metadata id="metadata3466"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(.0000019915 -972.25)"><g id="g3514-7" fill-rule="evenodd" transform="translate(-987.45 356.91)"><ellipse id="ellipse3516-7" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="40.057" ry="40.054" cy="655.39" cx="1027.5" fill="#3b63c9"/><ellipse id="ellipse3518-7" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="36.23" ry="36.228" cy="655.39" cx="1027.5" fill="#5276cf"/></g></g></svg>')+
"');position: absolute;top: 223px;left: 376px;width: 85px;height: 85px;";y.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3699" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="9.2811mm" width="9.2817mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 32.8879 32.88565"><metadata id="metadata3704"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" fill-rule="evenodd" transform="translate(0 -1019.5)"><ellipse id="ellipse4575" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="16.444" ry="16.443" cy="1035.9" cx="16.444" fill="#2e2e2e"/><ellipse id="ellipse4577" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" stroke-linecap="round" rx="15.112" ry="15.11" stroke="#4364b2" cy="1035.9" cx="16.444" fill="#5276cf"/><ellipse id="ellipse4579" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="11.867" ry="11.866" cy="1035.9" cx="16.444" fill="#434343"/></g></svg>')+
"');position: absolute;top: 76px;left: 227px;width: 34px;height: 34px;";z.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3699" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="9.2811mm" width="9.2817mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 32.8879 32.88565"><metadata id="metadata3704"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" fill-rule="evenodd" transform="translate(0 -1019.5)"><ellipse id="ellipse4575" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="16.444" ry="16.443" cy="1035.9" cx="16.444" fill="#2e2e2e"/><ellipse id="ellipse4577" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" stroke-linecap="round" rx="15.112" ry="15.11" stroke="#4364b2" cy="1035.9" cx="16.444" fill="#5276cf"/><ellipse id="ellipse4579" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="11.867" ry="11.866" cy="1035.9" cx="16.444" fill="#434343"/></g></svg>')+
"');position: absolute;top: 76px;left: 376px;width: 34px;height: 34px;";A.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="21.241671mm" height="8.8544388mm" viewBox="0 0 75.265762 31.373996" id="svg3447" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="l1.svg"><defs id="defs3449" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="1.4" inkscape:cx="-254.57869" inkscape:cy="228.81952" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3452"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(1.5000945e-8,-1020.9882)"><path style="fill:#5276cf;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:0.99999994px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" d="m 11.026383,1051.1651 c -7.4440599,1.9144 -7.5133499,2.2466 -9.7963799,-4.4934 -1.81058997,-5.3452 -2.44278,-8.8152 4.01547,-12.116 2.74038,-1.4007 13.7365799,-5.877 38.4768299,-10.72 24.26031,-4.749 25.16653,-2.7967 26.79132,0.3418 1.15503,2.2311 1.8961,4.1561 2.94279,6.651 3.08552,8.5188 2.92609,8.5778 -6.08214,9.5501 -19.09891,2.1414 -37.95723,5.8307 -56.34789,10.7865 z" id="path4289" inkscape:connector-curvature="0" sodipodi:nodetypes="cssssccc" /></g></svg>')+
"');position: absolute;top: 4px;left: 78px;width: 79px;height: 33px;";B.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3447" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="8.8544mm" width="21.242mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 75.265762 31.373996"><metadata id="metadata3452"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(1.5001e-8 -1021)"><path id="path4715" d="m64.239 1051.2c7.4441 1.9144 7.5134 2.2466 9.7964-4.4934 1.8106-5.3452 2.4428-8.8152-4.0155-12.116-2.7404-1.4007-13.737-5.877-38.477-10.72-24.26-4.749-25.167-2.7967-26.791 0.3418-1.155 2.2311-1.8961 4.1561-2.9428 6.651-3.0855 8.5188-2.9261 8.5778 6.0822 9.5501 19.099 2.1414 37.957 5.8307 56.348 10.786z" fill-rule="evenodd" fill="#5276cf"/></g></svg>')+
"');position: absolute;top: 4px;left: 477px;width: 79px;height: 33px;";C.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3560" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="4.7796mm" width="13.57mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 48.082162 16.935645"><metadata id="metadata3565"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1035.4)"><path id="path4727" d="m42.857 1052.2c4.7071 0.4081 4.7981 0.6563 5.1414-4.9139 0.16344-2.6517 0.16699-6.1108-0.72615-8.0342-0.59471-1.2808-1.7793-2.049-3.7642-2.4662-2.5264-0.531-16.253-1.4345-26.685-1.3241-15.118 0.16-15.362 1.4769-15.855 4.1522-0.35071 1.9018-0.5016 3.5056-0.74837 5.5967-0.55261 7.0693-0.44908 7.0921 5.0452 6.5411 11.661-1.1062 25.929-0.7359 37.592 0.4484z" fill-rule="evenodd" fill="#5276cf"/></g></svg>')+
"');position: absolute;top: -7px;left: 425px;width: 50px;height: 17px;";F.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3560" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="4.7796mm" width="13.57mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 48.082162 16.935645"><metadata id="metadata3565"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1035.4)"><path id="path4727" d="m42.857 1052.2c4.7071 0.4081 4.7981 0.6563 5.1414-4.9139 0.16344-2.6517 0.16699-6.1108-0.72615-8.0342-0.59471-1.2808-1.7793-2.049-3.7642-2.4662-2.5264-0.531-16.253-1.4345-26.685-1.3241-15.118 0.16-15.362 1.4769-15.855 4.1522-0.35071 1.9018-0.5016 3.5056-0.74837 5.5967-0.55261 7.0693-0.44908 7.0921 5.0452 6.5411 11.661-1.1062 25.929-0.7359 37.592 0.4484z" fill-rule="evenodd" fill="#5276cf"/></g></svg>')+
"');position: absolute;top: -7px;left: 164px;width: 50px;height: 17px;";D.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="24.603382mm" height="24.601696mm" viewBox="0 0 87.177338 87.171363" id="svg3640" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="main.svg"><defs id="defs3642" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="1.979899" inkscape:cx="61.113463" inkscape:cy="69.71796" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3645"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(0,-965.19093)"><ellipse ry="43.585682" rx="43.588669" style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#2e2e2e;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:0.99999994;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" id="ellipse4372" cx="43.588669" cy="1008.7766" /><ellipse cy="1008.7766" cx="43.588669" id="circle4239-1" style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#5276cf;fill-opacity:1;fill-rule:evenodd;stroke:#4364b2;stroke-width:0.99999994;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" rx="40.056705" ry="40.053959" /><ellipse style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#434343;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:0.99999994;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" id="circle4243-0" cx="43.588669" cy="1008.7766" rx="31.455994" ry="31.453836" /></g></svg>')+
"');position: absolute;top: 68px;left: 274px;width: 92px;height: 92px;";H.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3407" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="41.787mm" width="41.786mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 148.0624 148.06251"><metadata id="metadata3412"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -904.3)" fill="#e6e6e6"><path id="rect4545" d="m74.031 904.3-14.469 22.156h8.0313v8.2187h12.875v-8.2187h8.0625l-14.5-22.156z"/><path id="rect4603" d="m125.94 963.86v8.0313h-8.25v12.906h8.25v8.0313l22.125-14.5-22.125-14.469z"/><path id="rect4609" d="m67.594 1022v8.25h-8.0313l14.469 22.125 14.5-22.125h-8.0625v-8.25h-12.875z"/><path id="rect4615" d="m22.156 963.86-22.156 14.47l22.156 14.5v-8.2188h8.2188v-12.906h-8.2188v-7.8438z"/><path id="path4619" style="color:#000000;text-indent:0;block-progression:tb;text-decoration-line:none;text-transform:none" d="m54.393 924.58c-15.821 5.7885-28.404 18.385-34.188 34.219h11.156c4.6667-10.175 12.865-18.361 23.031-23.031v-11.188zm39.219 0.031v11.156c10.167 4.6713 18.361 12.86 23.031 23.031h11.156c-5.7846-15.821-18.379-28.393-34.188-34.188zm-73.375 73.438c5.7899 15.816 18.348 28.403 34.156 34.188v-11.156c-10.163-4.6691-18.364-12.861-23.031-23.031h-11.125zm96.406 0c-4.6712 10.167-12.868 18.361-23.031 23.031v11.125c15.796-5.7901 28.366-18.352 34.156-34.156h-11.125z"/></g></svg>')+
"');position: absolute;top: 186px;left: 148px;width: 157px;height: 157px;";O.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3407" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="41.787mm" width="41.786mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 148.0624 148.06251"><metadata id="metadata3412"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -904.3)" fill="#e6e6e6"><path id="rect4545" d="m74.031 904.3-14.469 22.156h8.0313v8.2187h12.875v-8.2187h8.0625l-14.5-22.156z"/><path id="rect4603" d="m125.94 963.86v8.0313h-8.25v12.906h8.25v8.0313l22.125-14.5-22.125-14.469z"/><path id="rect4609" d="m67.594 1022v8.25h-8.0313l14.469 22.125 14.5-22.125h-8.0625v-8.25h-12.875z"/><path id="rect4615" d="m22.156 963.86-22.156 14.47l22.156 14.5v-8.2188h8.2188v-12.906h-8.2188v-7.8438z"/><path id="path4619" style="color:#000000;text-indent:0;block-progression:tb;text-decoration-line:none;text-transform:none" d="m54.393 924.58c-15.821 5.7885-28.404 18.385-34.188 34.219h11.156c4.6667-10.175 12.865-18.361 23.031-23.031v-11.188zm39.219 0.031v11.156c10.167 4.6713 18.361 12.86 23.031 23.031h11.156c-5.7846-15.821-18.379-28.393-34.188-34.188zm-73.375 73.438c5.7899 15.816 18.348 28.403 34.156 34.188v-11.156c-10.163-4.6691-18.364-12.861-23.031-23.031h-11.125zm96.406 0c-4.6712 10.167-12.868 18.361-23.031 23.031v11.125c15.796-5.7901 28.366-18.352 34.156-34.156h-11.125z"/></g></svg>')+
"');position: absolute;top: 187px;left: 339px;width: 157px;height: 157px;";b.appendChild(H);b.appendChild(O);c.appendChild(e);c.appendChild(g);c.appendChild(f);c.appendChild(l);b.appendChild(c);m.appendChild(n);m.appendChild(t);m.appendChild(q);m.appendChild(r);b.appendChild(m);b.appendChild(v);b.appendChild(w);b.appendChild(y);b.appendChild(z);b.appendChild(A);b.appendChild(B);b.appendChild(C);a.appendChild(b);b.appendChild(F);b.appendChild(D);I.length=0;R.length=0;P.length=0;p.length=0;I.push(q,
t,r,n,A,B,F,C,y,z,v,w,e,f,l,g,D);R.push('<svg id="svg3548" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="13.417mm" width="13.418mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 47.543997 47.542"><metadata id="metadata3553"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1004.8)"><ellipse id="circle4271" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="23.772" ry="23.771" cy="1028.6" cx="23.772" fill="#303030"/><ellipse id="circle4273" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" stroke-linecap="round" rx="18.668" ry="18.667" stroke="#3b63c9" cy="1028.6" cx="23.772" fill="#5276cf"/></g></svg>',
'<svg id="svg3548" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="13.417mm" width="13.418mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 47.543997 47.542"><metadata id="metadata3553"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1004.8)"><ellipse id="circle4271" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="23.772" ry="23.771" cy="1028.6" cx="23.772" fill="#303030"/><ellipse id="circle4273" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" stroke-linecap="round" rx="18.668" ry="18.667" stroke="#3b63c9" cy="1028.6" cx="23.772" fill="#5276cf"/></g></svg>',
'<svg id="svg3548" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="13.417mm" width="13.418mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 47.543997 47.542"><metadata id="metadata3553"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1004.8)"><ellipse id="circle4271" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="23.772" ry="23.771" cy="1028.6" cx="23.772" fill="#303030"/><ellipse id="circle4273" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" stroke-linecap="round" rx="18.668" ry="18.667" stroke="#3b63c9" cy="1028.6" cx="23.772" fill="#5276cf"/></g></svg>',
'<svg id="svg3548" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="13.417mm" width="13.418mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 47.543997 47.542"><metadata id="metadata3553"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1004.8)"><ellipse id="circle4271" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="23.772" ry="23.771" cy="1028.6" cx="23.772" fill="#303030"/><ellipse id="circle4273" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" stroke-linecap="round" rx="18.668" ry="18.667" stroke="#3b63c9" cy="1028.6" cx="23.772" fill="#5276cf"/></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="21.241671mm" height="8.8544388mm" viewBox="0 0 75.265762 31.373996" id="svg3447" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="l1.svg"><defs id="defs3449" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="1.4" inkscape:cx="-254.57869" inkscape:cy="228.81952" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3452"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(1.5000945e-8,-1020.9882)"><path style="fill:#5276cf;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:0.99999994px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" d="m 11.026383,1051.1651 c -7.4440599,1.9144 -7.5133499,2.2466 -9.7963799,-4.4934 -1.81058997,-5.3452 -2.44278,-8.8152 4.01547,-12.116 2.74038,-1.4007 13.7365799,-5.877 38.4768299,-10.72 24.26031,-4.749 25.16653,-2.7967 26.79132,0.3418 1.15503,2.2311 1.8961,4.1561 2.94279,6.651 3.08552,8.5188 2.92609,8.5778 -6.08214,9.5501 -19.09891,2.1414 -37.95723,5.8307 -56.34789,10.7865 z" id="path4289" inkscape:connector-curvature="0" sodipodi:nodetypes="cssssccc" /></g></svg>',
'<svg id="svg3447" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="8.8544mm" width="21.242mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 75.265762 31.373996"><metadata id="metadata3452"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(1.5001e-8 -1021)"><path id="path4715" d="m64.239 1051.2c7.4441 1.9144 7.5134 2.2466 9.7964-4.4934 1.8106-5.3452 2.4428-8.8152-4.0155-12.116-2.7404-1.4007-13.737-5.877-38.477-10.72-24.26-4.749-25.167-2.7967-26.791 0.3418-1.155 2.2311-1.8961 4.1561-2.9428 6.651-3.0855 8.5188-2.9261 8.5778 6.0822 9.5501 19.099 2.1414 37.957 5.8307 56.348 10.786z" fill-rule="evenodd" fill="#5276cf"/></g></svg>',
'<svg id="svg3560" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="4.7796mm" width="13.57mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 48.082162 16.935645"><metadata id="metadata3565"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1035.4)"><path id="path4727" d="m42.857 1052.2c4.7071 0.4081 4.7981 0.6563 5.1414-4.9139 0.16344-2.6517 0.16699-6.1108-0.72615-8.0342-0.59471-1.2808-1.7793-2.049-3.7642-2.4662-2.5264-0.531-16.253-1.4345-26.685-1.3241-15.118 0.16-15.362 1.4769-15.855 4.1522-0.35071 1.9018-0.5016 3.5056-0.74837 5.5967-0.55261 7.0693-0.44908 7.0921 5.0452 6.5411 11.661-1.1062 25.929-0.7359 37.592 0.4484z" fill-rule="evenodd" fill="#5276cf"/></g></svg>',
'<svg id="svg3560" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="4.7796mm" width="13.57mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 48.082162 16.935645"><metadata id="metadata3565"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1035.4)"><path id="path4727" d="m42.857 1052.2c4.7071 0.4081 4.7981 0.6563 5.1414-4.9139 0.16344-2.6517 0.16699-6.1108-0.72615-8.0342-0.59471-1.2808-1.7793-2.049-3.7642-2.4662-2.5264-0.531-16.253-1.4345-26.685-1.3241-15.118 0.16-15.362 1.4769-15.855 4.1522-0.35071 1.9018-0.5016 3.5056-0.74837 5.5967-0.55261 7.0693-0.44908 7.0921 5.0452 6.5411 11.661-1.1062 25.929-0.7359 37.592 0.4484z" fill-rule="evenodd" fill="#5276cf"/></g></svg>',
'<svg id="svg3699" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="9.2811mm" width="9.2817mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 32.8879 32.88565"><metadata id="metadata3704"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" fill-rule="evenodd" transform="translate(0 -1019.5)"><ellipse id="ellipse4575" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="16.444" ry="16.443" cy="1035.9" cx="16.444" fill="#2e2e2e"/><ellipse id="ellipse4577" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" stroke-linecap="round" rx="15.112" ry="15.11" stroke="#4364b2" cy="1035.9" cx="16.444" fill="#5276cf"/><ellipse id="ellipse4579" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="11.867" ry="11.866" cy="1035.9" cx="16.444" fill="#434343"/></g></svg>',
'<svg id="svg3699" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="9.2811mm" width="9.2817mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 32.8879 32.88565"><metadata id="metadata3704"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" fill-rule="evenodd" transform="translate(0 -1019.5)"><ellipse id="ellipse4575" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="16.444" ry="16.443" cy="1035.9" cx="16.444" fill="#2e2e2e"/><ellipse id="ellipse4577" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" stroke-linecap="round" rx="15.112" ry="15.11" stroke="#4364b2" cy="1035.9" cx="16.444" fill="#5276cf"/><ellipse id="ellipse4579" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="11.867" ry="11.866" cy="1035.9" cx="16.444" fill="#434343"/></g></svg>',
'<svg id="svg3461" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="22.608mm" width="22.61mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 80.114398 80.108405"><metadata id="metadata3466"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(.0000019915 -972.25)"><g id="g3514-7" fill-rule="evenodd" transform="translate(-987.45 356.91)"><ellipse id="ellipse3516-7" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="40.057" ry="40.054" cy="655.39" cx="1027.5" fill="#3b63c9"/><ellipse id="ellipse3518-7" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="36.23" ry="36.228" cy="655.39" cx="1027.5" fill="#5276cf"/></g></g></svg>',
'<svg id="svg3461" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="22.608mm" width="22.61mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 80.114398 80.108405"><metadata id="metadata3466"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(.0000019915 -972.25)"><g id="g3514-7" fill-rule="evenodd" transform="translate(-987.45 356.91)"><ellipse id="ellipse3516-7" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="40.057" ry="40.054" cy="655.39" cx="1027.5" fill="#3b63c9"/><ellipse id="ellipse3518-7" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="36.23" ry="36.228" cy="655.39" cx="1027.5" fill="#5276cf"/></g></g></svg>',
'<svg id="svg3754" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="10.711mm" width="9.9653mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 35.3101 37.950677"><metadata id="metadata3759"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1014.4)"><path id="path4326" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" d="m34.81 1017.1c-15.254-3.8172-24.634-1.7612-34.31 0v16.247h0.015c-0.013 0.097-0.013 0.1951-0.015 0.2928 0.0006 9.4753 7.6813 18.256 17.156 18.256 9.4739-0.0005 17.154-8.7813 17.154-18.256 0-0.097-0.014-0.1952-0.014-0.2928h0.014z" fill-rule="evenodd" stroke="#4364b2" stroke-linecap="round" fill="#5276cf"/></g></svg>',
'<svg id="svg3754" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="10.711mm" width="9.9653mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 35.3101 37.950677"><metadata id="metadata3759"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1014.4)"><path id="path4328" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" d="m34.81 1049.7c-15.254 3.8172-24.634 1.7612-34.31 0v-16.247h0.015c-0.013-0.097-0.013-0.1951-0.015-0.2928 0.0006-9.4753 7.6813-18.256 17.156-18.256 9.4739 0.0005 17.154 8.7813 17.154 18.256 0 0.097-0.014 0.1952-0.014 0.2928h0.014z" fill-rule="evenodd" stroke="#4364b2" stroke-linecap="round" fill="#5276cf"/></g></svg>',
'<svg id="svg3790" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="9.9646mm" width="10.711mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 37.953175 35.3077"><metadata id="metadata3795"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1017.1)"><path id="path4324" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" d="m2.6552 1051.9c-3.8175-15.253-1.7611-24.633 0-34.308h16.248v0.015c0.098-0.01 0.1952-0.01 0.2928-0.015 9.476 0.0006 18.258 7.6807 18.257 17.154-0.0005 9.4733-8.7818 17.153-18.257 17.153-0.098 0-0.1952-0.01-0.2928-0.011v0.011z" fill-rule="evenodd" stroke="#4364b2" stroke-linecap="round" fill="#5276cf"/></g></svg>',
'<svg id="svg3790" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="9.9646mm" width="10.711mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 37.953175 35.3077"><metadata id="metadata3795"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1017.1)"><path id="path4324" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" d="m35.298 1017.6c3.8175 15.253 1.7611 24.633 0 34.308h-16.248v-0.015c-0.098 0.01-0.1952 0.01-0.2928 0.015-9.476-0.0006-18.258-7.6807-18.257-17.154 0.0005-9.4733 8.7818-17.153 18.257-17.153 0.098 0 0.1952 0.01 0.2928 0.011v-0.011z" fill-rule="evenodd" stroke="#4364b2" stroke-linecap="round" fill="#5276cf"/></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="24.603382mm" height="24.601696mm" viewBox="0 0 87.177338 87.171363" id="svg3640" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="main.svg"><defs id="defs3642" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="1.979899" inkscape:cx="61.113463" inkscape:cy="69.71796" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3645"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(0,-965.19093)"><ellipse ry="43.585682" rx="43.588669" style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#2e2e2e;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:0.99999994;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" id="ellipse4372" cx="43.588669" cy="1008.7766" /><ellipse cy="1008.7766" cx="43.588669" id="circle4239-1" style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#5276cf;fill-opacity:1;fill-rule:evenodd;stroke:#4364b2;stroke-width:0.99999994;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" rx="40.056705" ry="40.053959" /><ellipse style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#434343;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:0.99999994;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" id="circle4243-0" cx="43.588669" cy="1008.7766" rx="31.455994" ry="31.453836" /></g></svg>');
P.push(v,v,w,w);p.push(H,O);for(a=0;a<I.length;a++)I[a].setAttribute("id","pad_btn_"+a),I[a].setAttribute("data-colorstate","B"),I[a].setAttribute("data-key",a),I[a].setAttribute("data-svgid",a);H.setAttribute("id","pad_left_axis");H.setAttribute("data-colorstate","GR");H.setAttribute("data-key",E.GMPD_AXIS_0);H.setAttribute("data-svgid",R.length);O.setAttribute("id","pad_right_axis");O.setAttribute("data-colorstate","GR");O.setAttribute("data-key",E.GMPD_AXIS_2);O.setAttribute("data-svgid",R.length+
1);R.push('<svg id="svg3407" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="41.787mm" width="41.786mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 148.0624 148.06251"><metadata id="metadata3412"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -904.3)" fill="#e6e6e6"><path id="rect4545" d="m74.031 904.3-14.469 22.156h8.0313v8.2187h12.875v-8.2187h8.0625l-14.5-22.156z"/><path id="rect4603" d="m125.94 963.86v8.0313h-8.25v12.906h8.25v8.0313l22.125-14.5-22.125-14.469z"/><path id="rect4609" d="m67.594 1022v8.25h-8.0313l14.469 22.125 14.5-22.125h-8.0625v-8.25h-12.875z"/><path id="rect4615" d="m22.156 963.86-22.156 14.47l22.156 14.5v-8.2188h8.2188v-12.906h-8.2188v-7.8438z"/><path id="path4619" style="color:#000000;text-indent:0;block-progression:tb;text-decoration-line:none;text-transform:none" d="m54.393 924.58c-15.821 5.7885-28.404 18.385-34.188 34.219h11.156c4.6667-10.175 12.865-18.361 23.031-23.031v-11.188zm39.219 0.031v11.156c10.167 4.6713 18.361 12.86 23.031 23.031h11.156c-5.7846-15.821-18.379-28.393-34.188-34.188zm-73.375 73.438c5.7899 15.816 18.348 28.403 34.156 34.188v-11.156c-10.163-4.6691-18.364-12.861-23.031-23.031h-11.125zm96.406 0c-4.6712 10.167-12.868 18.361-23.031 23.031v11.125c15.796-5.7901 28.366-18.352 34.156-34.156h-11.125z"/></g></svg>',
'<svg id="svg3407" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="41.787mm" width="41.786mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 148.0624 148.06251"><metadata id="metadata3412"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -904.3)" fill="#e6e6e6"><path id="rect4545" d="m74.031 904.3-14.469 22.156h8.0313v8.2187h12.875v-8.2187h8.0625l-14.5-22.156z"/><path id="rect4603" d="m125.94 963.86v8.0313h-8.25v12.906h8.25v8.0313l22.125-14.5-22.125-14.469z"/><path id="rect4609" d="m67.594 1022v8.25h-8.0313l14.469 22.125 14.5-22.125h-8.0625v-8.25h-12.875z"/><path id="rect4615" d="m22.156 963.86-22.156 14.47l22.156 14.5v-8.2188h8.2188v-12.906h-8.2188v-7.8438z"/><path id="path4619" style="color:#000000;text-indent:0;block-progression:tb;text-decoration-line:none;text-transform:none" d="m54.393 924.58c-15.821 5.7885-28.404 18.385-34.188 34.219h11.156c4.6667-10.175 12.865-18.361 23.031-23.031v-11.188zm39.219 0.031v11.156c10.167 4.6713 18.361 12.86 23.031 23.031h11.156c-5.7846-15.821-18.379-28.393-34.188-34.188zm-73.375 73.438c5.7899 15.816 18.348 28.403 34.156 34.188v-11.156c-10.163-4.6691-18.364-12.861-23.031-23.031h-11.125zm96.406 0c-4.6712 10.167-12.868 18.361-23.031 23.031v11.125c15.796-5.7901 28.366-18.352 34.156-34.156h-11.125z"/></g></svg>');
k(I,u);k(p,"#e6e6e6")}function r(a){return[g.create_gamepad_btn_sensor(E.GMPD_BUTTON_0,a),g.create_gamepad_btn_sensor(E.GMPD_BUTTON_1,a),g.create_gamepad_btn_sensor(E.GMPD_BUTTON_2,a),g.create_gamepad_btn_sensor(E.GMPD_BUTTON_3,a),g.create_gamepad_btn_sensor(E.GMPD_BUTTON_4,a),g.create_gamepad_btn_sensor(E.GMPD_BUTTON_5,a),g.create_gamepad_btn_sensor(E.GMPD_BUTTON_6,a),g.create_gamepad_btn_sensor(E.GMPD_BUTTON_7,a),g.create_gamepad_btn_sensor(E.GMPD_BUTTON_8,a),g.create_gamepad_btn_sensor(E.GMPD_BUTTON_9,
a),g.create_gamepad_btn_sensor(E.GMPD_BUTTON_10,a),g.create_gamepad_btn_sensor(E.GMPD_BUTTON_11,a),g.create_gamepad_btn_sensor(E.GMPD_BUTTON_12,a),g.create_gamepad_btn_sensor(E.GMPD_BUTTON_13,a),g.create_gamepad_btn_sensor(E.GMPD_BUTTON_14,a),g.create_gamepad_btn_sensor(E.GMPD_BUTTON_15,a),g.create_gamepad_btn_sensor(E.GMPD_BUTTON_16,a),g.create_gamepad_btn_sensor(E.GMPD_BUTTON_17,a),g.create_gamepad_btn_sensor(E.GMPD_BUTTON_18,a),g.create_gamepad_btn_sensor(E.GMPD_BUTTON_19,a),g.create_gamepad_btn_sensor(E.GMPD_BUTTON_20,
a),g.create_gamepad_btn_sensor(E.GMPD_BUTTON_21,a),g.create_gamepad_btn_sensor(E.GMPD_BUTTON_22,a),g.create_gamepad_btn_sensor(E.GMPD_BUTTON_23,a),g.create_gamepad_btn_sensor(E.GMPD_BUTTON_24,a),g.create_gamepad_btn_sensor(E.GMPD_BUTTON_25,a)]}function w(a){return[g.create_gamepad_axis_sensor(E.GMPD_AXIS_0,a),g.create_gamepad_axis_sensor(E.GMPD_AXIS_1,a),g.create_gamepad_axis_sensor(E.GMPD_AXIS_2,a),g.create_gamepad_axis_sensor(E.GMPD_AXIS_3,a),g.create_gamepad_axis_sensor(E.GMPD_AXIS_4,a),g.create_gamepad_axis_sensor(E.GMPD_AXIS_5,
a),g.create_gamepad_axis_sensor(E.GMPD_AXIS_6,a),g.create_gamepad_axis_sensor(E.GMPD_AXIS_7,a),g.create_gamepad_axis_sensor(E.GMPD_AXIS_8,a),g.create_gamepad_axis_sensor(E.GMPD_AXIS_9,a),g.create_gamepad_axis_sensor(E.GMPD_AXIS_10,a),g.create_gamepad_axis_sensor(E.GMPD_AXIS_11,a)]}function a(a,b){var c=document.createElement("input");c.style.cssText="display: inline-block;position = relative;";c.setAttribute("type","radio");c.setAttribute("name","choice");var d=document.createElement("label");d.textContent=
b;d.style.cssText="position = relative;display: inline-block;color: white;";a.appendChild(c);a.appendChild(d);return c}function D(a){ca.removeChild(L);L=null;switch(a){case "PAD":W.checked=!0;q(ca);break;case "WHEEL":J.checked=!0;var b=ca;da=!1;var c=document.createElement("div"),e=document.createElement("div"),g=document.createElement("div"),f=document.createElement("div"),l=document.createElement("div"),m=document.createElement("div"),n=document.createElement("div"),t=document.createElement("div"),
r=document.createElement("div"),v=document.createElement("div"),w=document.createElement("div"),y=document.createElement("div"),z=document.createElement("div"),A=document.createElement("div"),B=document.createElement("div"),C=document.createElement("div"),F=document.createElement("div"),D=document.createElement("div"),H=document.createElement("div"),O=document.createElement("div"),K=document.createElement("div"),T=document.createElement("div"),M=document.createElement("div"),U=document.createElement("div");
a=document.createElement("div");var ea=document.createElement("div"),ha=document.createElement("div"),ba=document.createElement("div"),za=document.createElement("div"),Da=document.createElement("div");L=c;var ua="position: absolute;height: auto;background-image: url('data:image/svg+xml;base64,"+btoa('<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>')+
"');width: 19px;height: 19px;background-size: 100% 100%;";c.style.cssText="position: absolute;background-image: url('data:image/svg+xml;base64,"+btoa('<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="112.08413mm" height="128.46834mm" viewBox="0 0 397.14849 455.20277" id="svg3440" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel.svg"><defs id="defs3442" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="0.98994949" inkscape:cx="421.01508" inkscape:cy="52.510802" inkscape:document-units="px" inkscape:current-layer="g87" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3445"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title /></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(-2.3645008e-8,-597.15942)"><path inkscape:connector-curvature="0" style="fill:#4d4d4d;stroke:#6e6e6e;stroke-width:2.99125171;stroke-miterlimit:4;stroke-dasharray:none" id="path4140" d="m 307.84153,715.52552 c -4.35995,43.11849 -2.78952,86.66385 -15.90234,128.54337 -10.85452,25.86023 -13.33477,47.2976 6.91492,61.09536 7.23778,50.7442 78.38013,47.39232 82.20535,0 23.06079,-14.19054 13.49405,-42.79138 6.91492,-61.09536 -17.40045,-40.83001 -4.82581,-86.43019 -15.90235,-128.54337 -8.3177,-20.33228 -56.75348,-20.7661 -64.22927,0 z" stroke-miterlimit="4" /><path inkscape:connector-curvature="0" style="fill:#cccccc;stroke:#1a1a1a;stroke-width:2.09465766;stroke-miterlimit:4;stroke-dasharray:none" id="path4266" d="m 313.11812,724.1957 -3.84514,68.80568 c 4.64168,13.40814 62.19981,10.8172 61.83082,0 l -3.84515,-68.80568 c -4.46942,-24.00369 -52.58756,-18.95946 -54.13979,0 z" stroke-miterlimit="4" /><path inkscape:connector-curvature="0" style="fill:#353535;stroke:#2c2c2c;stroke-width:2.11880326;stroke-miterlimit:4;stroke-dasharray:none" id="path4156" d="m 304.91419,870.673 c -12.36924,67.40381 80.42804,69.69607 70.55134,0 -6.57605,-36.5947 -65.0964,-34.8253 -70.55134,0 z m 60.53812,3.9862 c 8.65841,48.24354 -57.58987,49.86644 -50.52489,0 4.7009,-26.27069 46.6394,-24.84292 50.52489,0 z" stroke-miterlimit="4" /><path inkscape:connector-curvature="0" style="fill:#e6e6e6;stroke:#969696;stroke-width:2.99125171;stroke-miterlimit:4;stroke-dasharray:none" id="path4011" d="m 106.04576,696.97906 c -11.197076,4.25792 -17.123706,8.24834 -17.123706,8.24834 l -66.18493,16.33946 1.40291,30.64619 46.54715,-7.67623 c 17.00932,-1.6438 32.551896,8.94676 38.302026,23.34506 l 2.78663,65.4778 27.6363,0 2.78663,-65.4778 c 8.0428,-15.3291 20.46247,-27.10803 38.30202,-23.34506 l 46.54716,7.67623 1.40291,-30.64619 -66.18493,-16.33946 c 0,0 -5.92627,-3.99074 -17.12371,-8.24834 -13.45408,-4.31874 -26.62772,-4.20804 -39.08982,0 z" stroke-miterlimit="4" /><path inkscape:connector-curvature="0" style="fill:#252525;stroke:#6e6e6e;stroke-width:2.99125171;stroke-miterlimit:4;stroke-dasharray:none" id="path2996" d="m 38.311064,931.09899 c -8.01574,5.05649 -22.76006,21.74743 -26.34852,58.0567 -4.1290804,35.18581 -4.8394604,60.59901 28.55878,61.68771 l 162.934726,0 c 39.19437,1.1693 30.46155,-41.5992 28.55878,-61.68771 -3.58839,-36.30927 -18.33277,-52.99983 -26.34851,-58.0567 z" stroke-miterlimit="4" /><path inkscape:connector-curvature="0" style="fill:#373737;stroke:#6e6e6e;stroke-width:2.83429575;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none" id="path3019" d="m 26.230254,979.1291 c -11.50334,14.44882 -11.98241,47.3999 -0.33519,57.1202 l 191.802226,0 c 12.10111,-12.3068 9.93082,-46.99573 -0.33518,-57.1202 z" stroke-miterlimit="4" /><path inkscape:connector-curvature="0" style="fill:#808080;stroke:#1a1a1a;stroke-width:2.14882827;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0" id="path4133" d="m 360.82498,854.6914 a 20.634815,21.265151 0 1 1 -41.269,0 20.634815,21.265151 0 1 1 41.269,0 z" stroke-miterlimit="4" /><path inkscape:connector-curvature="0" style="fill:#333333;stroke:#000000;stroke-width:2.11880326;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0" id="path4280" d="m 351.64051,761.132 a 11.444622,11.75148 0 1 1 -22.88896,0 11.444622,11.75148 0 1 1 22.88896,0 z" stroke-miterlimit="4" /><path inkscape:connector-curvature="0" style="fill:#313131;stroke:#565656;stroke-width:2.93434715;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0" id="path3993" d="m 125.52855,598.62659 c -68.528026,0 -124.0613764,57.81925 -124.0613764,129.13695 0,71.31265 55.5370404,129.13696 124.0613764,129.13696 68.52804,0 124.07984,-57.81926 124.07984,-129.13696 0,-71.31264 -55.55611,-129.13695 -124.07984,-129.13695 z m -1.00095,23.63932 c 10.01261,0.0734 20.238,1.32074 28.95237,3.51006 11.62203,3.80301 21.53624,8.52304 31.01135,16.15381 26.21752,19.0207 43.36275,50.36277 43.36275,85.83029 0,58.01564 -45.80548,105.05244 -102.30928,105.05244 -56.500726,0 -102.309276,-47.03364 -102.309276,-105.05244 0,-32.14848 14.06783,-60.91918 36.22336,-80.19121 11.45168,-11.11714 23.14136,-17.13322 37.3943,-21.79731 7.855846,-2.48302 17.655666,-3.5835 27.668276,-3.51006 z" stroke-miterlimit="4" /><g style="stroke-miterlimit:4;stroke-dasharray:none" id="g4127" stroke-miterlimit="4" transform="matrix(0.61498728,0,0,0.63147657,-18.171616,453.28593)"><g id="g4111"><path style="fill:#808080;stroke:#373737;stroke-width:3.56837296" inkscape:connector-curvature="0" id="rect3040" d="m 110.97,771.16 31.694,4.8776 1.3007,44.257 -32.995,0 z" /><path style="fill:#b3b3b3;stroke:#565656;stroke-width:3.4000001;stroke-linecap:butt;stroke-linejoin:miter" inkscape:connector-curvature="0" id="path3024" d="m 96.83,686.82 58.353,-5.0761 c 15.608,27.569 6.8304,64.333 -5.0761,90.545 l -53.841,-2.538 z" /></g><g id="g4115" transform="translate(97.984785,0)"><path style="fill:#808080;stroke:#373737;stroke-width:3.56837296" inkscape:connector-curvature="0" id="path4117" d="m 110.97,771.16 31.694,4.8776 1.3007,44.257 -32.995,0 z" /><path style="fill:#b3b3b3;stroke:#565656;stroke-width:3.4000001;stroke-linecap:butt;stroke-linejoin:miter" inkscape:connector-curvature="0" id="path4119" d="m 96.83,686.82 58.353,-5.0761 c 15.608,27.569 6.8304,64.333 -5.0761,90.545 l -53.841,-2.538 z" /></g><g id="g4121" transform="translate(195.96959,0)"><path style="fill:#808080;stroke:#373737;stroke-width:3.56837296" inkscape:connector-curvature="0" id="path4123" d="m 110.97,771.16 31.694,4.8776 1.3007,44.257 -32.995,0 z" /><path style="fill:#b3b3b3;stroke:#565656;stroke-width:3.4000001;stroke-linecap:butt;stroke-linejoin:miter" inkscape:connector-curvature="0" id="path4125" d="m 96.83,686.82 58.353,-5.0761 c 15.608,27.569 6.8304,64.333 -5.0761,90.545 l -53.841,-2.538 z" /></g></g><g style="fill:#666666;stroke:#969696;stroke-width:3.99777174;stroke-miterlimit:4;stroke-dasharray:none" id="g4051" transform="translate(-42.878584,98.083591)" stroke-miterlimit="4"><g id="g4437" transform="matrix(0.74686368,0,0,0.74686368,-73.374214,285.30447)"><path inkscape:connector-curvature="0" id="rect4348" style="color:#000000;text-indent:0;text-transform:none;block-progression:tb;fill:#ffffff" d="m 567.31,584.22 0,42.25 0,3.4062 0,42.25 3.375,0 0,-42.25 27.062,0 0,42.25 3.375,0 0,-42.25 27.062,0 0,42.25 3.375,0 0,-42.25 27.062,0 0,42.25 3.4062,0 0,-43.969 0,-1.6875 -1.7188,0 -28.75,0 0,-42.25 -3.375,0 0,42.25 -27.062,0 0,-42.25 -3.375,0 0,42.25 -27.062,0 0,-42.25 -3.375,0 z" /><g style="fill:#a02c2c;stroke:#ffffff;stroke-width:3.4000001;stroke-linecap:square" id="g87" /></g></g></g></svg>')+
"');width: 397px;height: 455px;-moz-transform: translateX(-50%);-ms-transform: translateX(-50%);-webkit-transform: translateX(-50%);transform: translateX(-50%);background-size: 100% 100%;left: 50%;margin-left: 25px;margin-bottom: 40px;bottom: 0px;";e.style.cssText=ua+"top: 132px;left: 331px;";g.style.cssText=ua+"top: 122px;left: 315px;";f.style.cssText=ua+"top: 122px;left: 347px;";l.style.cssText=ua+"top: 113px;left: 331px;";m.style.cssText="position: absolute;height: auto;background-image: url('data:image/svg+xml;base64,"+
btoa('<svg id="svg3400" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="10.507mm" width="15.1mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 53.504016 37.228838"><metadata id="metadata3405"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(-2.847e-7 -1015.1)"><path id="path4049" d="m26.584 1016.1c-12.631 0-23.15 9.858-25.478 22.922l50.705 12.18c0.47921-2.1565 0.73023-4.4099 0.73023-6.7204 0-15.677-11.621-28.382-25.957-28.382z" stroke="#5276cf" stroke-linecap="square" stroke-width="1.9247" fill="#666"/></g></svg>')+
"');width: 54px;height: 37px;background-size: 100% 100%;top: 84px;left: 166px;";n.style.cssText="position: absolute;height: auto;background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3400" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="10.507mm" width="15.1mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 53.504016 37.228838"><metadata id="metadata3405"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(-2.847e-7 -1015.1)"><path id="path4033" d="m26.92 1016.1c-14.337 0-25.957 12.707-25.957 28.382 0 2.3225 0.26742 4.5784 0.74876 6.7386l50.681-12.18c-2.321-13.072-12.841-22.944-25.476-22.944z" stroke="#5276cf" stroke-linecap="square" stroke-width="1.9247" fill="#666"/></g></svg>')+
"');width: 54px;height: 37px;background-size: 100% 100%;top: 84px;left: 36px;";t.style.cssText=ua+"top: 107px;left: 141px;";r.style.cssText=ua+"top: 107px;left: 90px;";v.style.cssText=ua+"top: 185px;left: 321px;";w.style.cssText=ua+"top: 185px;left: 340px;";y.style.cssText=ua+"top: 179px;left: 358px;";z.style.cssText=ua+"top: 178px;left: 303px;";A.style.cssText=ua+"top: 210px;left: 299px;";B.style.cssText=ua+"top: 279px;left: 299px;";C.style.cssText=ua+"top: 210px;left: 321px;";F.style.cssText=ua+
"top: 279px;left: 321px;";D.style.cssText=ua+"top: 210px;left: 344px;";H.style.cssText=ua+"top: 278px;left: 344px;";O.style.cssText=ua+"top: 124px;left: 147px;";K.style.cssText=ua+"top: 138px;left: 133px;";T.style.cssText=ua+"top: 124px;left: 82px;";M.style.cssText=ua+"top: 138px;left: 96px;";U.style.cssText=ua+"top: 278px;left: 367px;";ua="position: absolute;background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3386" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="12.859mm" width="5.2917mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 18.749999 45.562501"><metadata id="metadata3391"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1006.8)"><path id="rect4575" d="m9.3125 1006.8-9.3125 14.25h5.3125v17.094h-5.1875l9.3125 14.219 9.3125-14.219h-5.1562v-17.094h5.0312l-9.3125-14.25z" fill="#e6e6e6"/></g></svg>')+
"');width: 19px;height: 46px;background-size: 100% 100%;";a.style.cssText=ua+"top: 291px;left: 50px;";ea.style.cssText=ua+"top: 291px;left: 111px;";ha.style.cssText=ua+"top: 291px;left: 171px;";ba.style.cssText="position: absolute;background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3458" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="50.447mm" width="83.899mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 297.28131 178.75"><metadata id="metadata3463"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -873.61)" fill="#e6e6e6"><path id="path4535" style="color:#000000;text-indent:0;block-progression:tb;text-decoration-line:none;text-transform:none" d="m33.875 873.61-18.5 8.8125 5.0626 3.0625c-12.899 22.78-20.438 49.17-20.438 77.44 0 28.284 7.5315 54.691 20.438 77.469l-5.0626 3.0625 18.5 8.8125 0.6563-20.469-5.531 3.3c-12.002-21.2-18.937-45.8-18.937-72.18 0-26.362 6.9415-50.99 18.937-72.188l5.5313 3.3438-0.6563-20.469z"/><path id="path4551" style="color:#000000;text-indent:0;block-progression:tb;text-decoration-line:none;text-transform:none" d="m263.38 873.71-0.6562 20.469 5.5312-3.3438c11.996 21.198 18.969 45.825 18.969 72.188 0 26.371-6.9672 51.011-18.969 72.219l-5.5312-3.3437 0.6562 20.469 18.5-8.8125-5.0312-3.0625c12.906-22.778 20.438-49.184 20.438-77.469 0-28.275-7.5391-54.665-20.438-77.438l5.0312-3.0625-18.5-8.8125z"/></g></svg>')+
"');width: 297px;height: 179px;background-size: 100% 100%;top: 43px;left: -25px;";za.style.cssText="position: absolute;background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3378" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="2.9016mm" width="9.2516mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 32.781198 10.281199"><metadata id="metadata3383"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1042.1)"><path id="rect4585" d="m32.781 1047.2-7.875-5.125v2.8437h-17.031v-2.8437l-7.875 5.1 7.875 5.1562v-2.8437h17.031v2.8437z" fill="#e6e6e6"/></g></svg>')+
"');width: 33px;height: 10px;background-size: 100% 100%;top: 159px;left: 324px;";Da.style.cssText="position: absolute;background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3378" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="9.2516mm" width="2.9016mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 10.281248 32.7812"><metadata id="metadata3383"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1019.6)"><path id="rect4585" d="m5.125 1019.6-5.125 7.9h2.8437v17.031h-2.8437l5.125 7.875 5.1562-7.875h-2.8438v-17.031h2.8438z" fill="#e6e6e6"/></g></svg>')+
"');width: 10px;height: 33px;background-size: 100% 100%;top: 148px;left: 335px;";b.appendChild(c);c.appendChild(a);c.appendChild(ea);c.appendChild(ha);c.appendChild(ba);c.appendChild(za);c.appendChild(Da);c.appendChild(e);c.appendChild(g);c.appendChild(f);c.appendChild(l);c.appendChild(m);c.appendChild(n);c.appendChild(t);c.appendChild(r);c.appendChild(v);c.appendChild(w);c.appendChild(y);c.appendChild(z);c.appendChild(A);c.appendChild(B);c.appendChild(C);c.appendChild(F);c.appendChild(D);c.appendChild(H);
c.appendChild(O);c.appendChild(K);c.appendChild(T);c.appendChild(M);c.appendChild(U);I.length=0;R.length=0;P.length=0;p.length=0;I.push(e,g,f,l,m,n,t,r,v,w,y,z,A,B,C,F,D,H,O,K,T,M,U);R.push('<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg id="svg3400" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="10.507mm" width="15.1mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 53.504016 37.228838"><metadata id="metadata3405"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(-2.847e-7 -1015.1)"><path id="path4049" d="m26.584 1016.1c-12.631 0-23.15 9.858-25.478 22.922l50.705 12.18c0.47921-2.1565 0.73023-4.4099 0.73023-6.7204 0-15.677-11.621-28.382-25.957-28.382z" stroke="#5276cf" stroke-linecap="square" stroke-width="1.9247" fill="#666"/></g></svg>',
'<svg id="svg3400" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="10.507mm" width="15.1mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 53.504016 37.228838"><metadata id="metadata3405"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(-2.847e-7 -1015.1)"><path id="path4033" d="m26.92 1016.1c-14.337 0-25.957 12.707-25.957 28.382 0 2.3225 0.26742 4.5784 0.74876 6.7386l50.681-12.18c-2.321-13.072-12.841-22.944-25.476-22.944z" stroke="#5276cf" stroke-linecap="square" stroke-width="1.9247" fill="#666"/></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>');
p.push(ba,a,ha,ea,za,Da);for(b=0;b<I.length;b++)I[b].setAttribute("id","wheel_btn_"+b),I[b].setAttribute("data-colorstate","B"),I[b].setAttribute("data-key",b),I[b].setAttribute("data-svgid",b);for(b=0;b<p.length;b++)I[b].setAttribute("id","wheel_axis_"+b),I[b].setAttribute("data-colorstate","GR");ba.setAttribute("data-key",E.GMPD_AXIS_0);ba.setAttribute("data-svgid",R.length);a.setAttribute("data-key",E.GMPD_AXIS_1);a.setAttribute("data-svgid",R.length+1);ha.setAttribute("data-key",E.GMPD_AXIS_2);
ha.setAttribute("data-svgid",R.length+2);ea.setAttribute("data-key",E.GMPD_AXIS_3);ea.setAttribute("data-svgid",R.length+3);za.setAttribute("data-key",E.GMPD_AXIS_4);za.setAttribute("data-svgid",R.length+4);Da.setAttribute("data-key",E.GMPD_AXIS_5);Da.setAttribute("data-svgid",R.length+5);R.push('<svg id="svg3458" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="50.447mm" width="83.899mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 297.28131 178.75"><metadata id="metadata3463"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -873.61)" fill="#e6e6e6"><path id="path4535" style="color:#000000;text-indent:0;block-progression:tb;text-decoration-line:none;text-transform:none" d="m33.875 873.61-18.5 8.8125 5.0626 3.0625c-12.899 22.78-20.438 49.17-20.438 77.44 0 28.284 7.5315 54.691 20.438 77.469l-5.0626 3.0625 18.5 8.8125 0.6563-20.469-5.531 3.3c-12.002-21.2-18.937-45.8-18.937-72.18 0-26.362 6.9415-50.99 18.937-72.188l5.5313 3.3438-0.6563-20.469z"/><path id="path4551" style="color:#000000;text-indent:0;block-progression:tb;text-decoration-line:none;text-transform:none" d="m263.38 873.71-0.6562 20.469 5.5312-3.3438c11.996 21.198 18.969 45.825 18.969 72.188 0 26.371-6.9672 51.011-18.969 72.219l-5.5312-3.3437 0.6562 20.469 18.5-8.8125-5.0312-3.0625c12.906-22.778 20.438-49.184 20.438-77.469 0-28.275-7.5391-54.665-20.438-77.438l5.0312-3.0625-18.5-8.8125z"/></g></svg>',
'<svg id="svg3386" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="12.859mm" width="5.2917mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 18.749999 45.562501"><metadata id="metadata3391"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1006.8)"><path id="rect4575" d="m9.3125 1006.8-9.3125 14.25h5.3125v17.094h-5.1875l9.3125 14.219 9.3125-14.219h-5.1562v-17.094h5.0312l-9.3125-14.25z" fill="#e6e6e6"/></g></svg>',
'<svg id="svg3386" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="12.859mm" width="5.2917mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 18.749999 45.562501"><metadata id="metadata3391"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1006.8)"><path id="rect4575" d="m9.3125 1006.8-9.3125 14.25h5.3125v17.094h-5.1875l9.3125 14.219 9.3125-14.219h-5.1562v-17.094h5.0312l-9.3125-14.25z" fill="#e6e6e6"/></g></svg>',
'<svg id="svg3386" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="12.859mm" width="5.2917mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 18.749999 45.562501"><metadata id="metadata3391"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1006.8)"><path id="rect4575" d="m9.3125 1006.8-9.3125 14.25h5.3125v17.094h-5.1875l9.3125 14.219 9.3125-14.219h-5.1562v-17.094h5.0312l-9.3125-14.25z" fill="#e6e6e6"/></g></svg>',
'<svg id="svg3378" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="2.9016mm" width="9.2516mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 32.781198 10.281199"><metadata id="metadata3383"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1042.1)"><path id="rect4585" d="m32.781 1047.2-7.875-5.125v2.8437h-17.031v-2.8437l-7.875 5.1 7.875 5.1562v-2.8437h17.031v2.8437z" fill="#e6e6e6"/></g></svg>',
'<svg id="svg3378" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="9.2516mm" width="2.9016mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 10.281248 32.7812"><metadata id="metadata3383"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1019.6)"><path id="rect4585" d="m5.125 1019.6-5.125 7.9h2.8437v17.031h-2.8437l5.125 7.875 5.1562-7.875h-2.8438v-17.031h2.8438z" fill="#e6e6e6"/></g></svg>');
k(I,u);k(p,"#e6e6e6")}}function k(a,b){function c(a){a=a.target;if(!(0>O||"G"==a.getAttribute("data-colorstate")))if(0!=A){if("R"==a.getAttribute("data-colorstate")&&(K=null,document.getElementById("action_label").textContent="Click on the buttons & arrows to setup your controller",A=0),"B"==a.getAttribute("data-colorstate")||"GR"==a.getAttribute("data-colorstate")){var c=parseFloat(K.getAttribute("data-svgid"));K.style.backgroundImage="url('data:image/svg+xml;base64,"+btoa(R[c])+"')";K.setAttribute("data-colorstate",
a.getAttribute("data-colorstate"));K=a;c=parseFloat(a.getAttribute("data-svgid"));a.style.backgroundImage="url('data:image/svg+xml;base64,"+btoa(R[c].replace(b,"#ff0000"))+"')";a.setAttribute("data-colorstate","R")}}else{c=parseFloat(a.getAttribute("data-svgid"));var d="B"==a.getAttribute("data-colorstate")?1:2;A=d;a.style.backgroundImage="url('data:image/svg+xml;base64,"+btoa(R[c].replace(b,"#ff0000"))+"')";a.setAttribute("data-colorstate","R");document.getElementById("action_label").textContent=
1==d?"Now press the button on the device":"Now move the axis on the device";K=a}}for(var d=0;d<a.length;d++)E.add_click_listener(a[d],c)}function c(a){var b=document.createElement("label");b.style.cssText="position: relative;display: inline-block;width: 50px;color: white;margin: 0 10px;font-size: 36px;line-height: 50px;background-color: black;border: 3px solid white;border-radius: 5px;height: 50px;";b.textContent=a;return b}function l(){var a=window.innerWidth,b=window.innerHeight;ca.style.zoom=750>=
b&&400<b||750>=a&&400<a?"0.5":400>=a||400>=b?"0.3":"1"}var b=Object(M.a)(e),g=Object(U.a)(e),E=Object(n.a)(e),ea=Object(z.a)(e),u=/#5276cf/g,F={};F[E.GMPD_BUTTON_12]=E.GMPD_BUTTON_12;F[E.GMPD_BUTTON_13]=E.GMPD_BUTTON_13;F[E.GMPD_BUTTON_15]=E.GMPD_BUTTON_15;F[E.GMPD_BUTTON_14]=E.GMPD_BUTTON_14;F[E.GMPD_BUTTON_3]=E.GMPD_BUTTON_3;F[E.GMPD_BUTTON_0]=E.GMPD_BUTTON_0;F[E.GMPD_BUTTON_1]=E.GMPD_BUTTON_1;F[E.GMPD_BUTTON_2]=E.GMPD_BUTTON_2;F[E.GMPD_BUTTON_5]=E.GMPD_BUTTON_5;F[E.GMPD_BUTTON_7]=E.GMPD_BUTTON_7;
F[E.GMPD_BUTTON_4]=E.GMPD_BUTTON_4;F[E.GMPD_BUTTON_6]=E.GMPD_BUTTON_6;F[E.GMPD_BUTTON_8]=E.GMPD_BUTTON_8;F[E.GMPD_BUTTON_9]=E.GMPD_BUTTON_9;F[E.GMPD_BUTTON_10]=E.GMPD_BUTTON_10;F[E.GMPD_BUTTON_11]=E.GMPD_BUTTON_11;F[E.GMPD_BUTTON_16]=E.GMPD_BUTTON_16;var R=[],O=-1,K=null,A=0,ca=null,L=null,ha=null,J=null,W=null,B=null,ba=[],I=[],P=[],p=[],da=!0,H={};H[E.GMPD_AXIS_0]=-2;H[E.GMPD_AXIS_1]=-2;H[E.GMPD_AXIS_2]=-2;H[E.GMPD_AXIS_3]=-2;H[E.GMPD_AXIS_4]=-2;H[E.GMPD_AXIS_5]=-2;H[E.GMPD_AXIS_6]=-2;H[E.GMPD_AXIS_7]=
-2;H[E.GMPD_AXIS_8]=-2;H[E.GMPD_AXIS_9]=-2;H[E.GMPD_AXIS_10]=-2;H[E.GMPD_AXIS_11]=-2;f.show=function(){var e=document.createElement("div");ca=e;e.style.cssText="position: absolute;width: 720px;height: 750px;top: 50%;left: 50%;-moz-transform: translateY(-50%) translateX(-50%);-ms-transform: translateY(-50%) translateX(-50%);-webkit-transform: translateY(-50%) translateX(-50%);transform: translateY(-50%) translateX(-50%);background-color: black;border: 4px solid white;border-radius: 35px;box-shadow: 0px 0px 20px 0px rgba(50, 50, 50, 1);";
b.insert_to_container(e,"LAST");q(e);var d=document.createElement("div");d.style.cssText="position: absolute;width: 637px;top: 0px;font-family: sans-serif;text-align: center;margin-top: 40px;-moz-transform: translateX(-50%);-ms-transform: translateX(-50%);-webkit-transform: translateX(-50%);transform: translateX(-50%);left: 50%;";var f=document.createElement("div");f.innerHTML="Select a device";f.style.cssText="color: #fff;display: inline-block;";d.appendChild(f);for(f=0;4>f;f++){var k=r(f),n=function(){return!0},
y=function(a,b){if(b==O)for(var c=0;c<I.length;c++){var d=I[c],e=g.get_sensor_value(a,b,c),f=c;if(0==A){if(e&&"B"==d.getAttribute("data-colorstate")){var k=R[f];d.style.backgroundImage="url('data:image/svg+xml;base64,"+btoa(k.replace(u,"#00ff00"))+"')";d.setAttribute("data-colorstate","G")}e||"B"==d.getAttribute("data-colorstate")||(k=R[f],d.style.backgroundImage="url('data:image/svg+xml;base64,"+btoa(k)+"')",d.setAttribute("data-colorstate","B"))}else e=E.get_pressed_gmpd_btn(O),0<=e&&K&&1==A&&(d=
K.getAttribute("data-key"),E.set_gamepad_key(O,d,e),f=ea.get(O+"_gmpd_stngs","b4w")||"{}",f=JSON.parse(f),f[d]=e,ea.set(O+"_gmpd_stngs",JSON.stringify(f),"b4w"),K=null,document.getElementById("action_label").textContent="Click on the buttons & arrows to setup your controller",A=0)}};g.create_sensor_manifold(null,f,g.CT_CONTINUOUS,k,n,y)}0<m().length&&(O=0);var z=[];f=document.createElement("div");f.style.cssText="margin-top: 20px;";for(k=0;4>k;k++)y=c(k),k==O&&(y.style.backgroundColor="green",ha=
y),v(k),f.appendChild(y),y.setAttribute("data-device_type","PAD"),z.push(y),E.add_click_listener(y,function(a){var b=m();a=a.target;for(var c=0;c<b.length;c++)z[c]==a&&(O=c,ha=a,v(O),D(a.getAttribute("data-device_type")))});d.appendChild(f);B=document.createElement("label");B.style.cssText="position: relative;display: block;color: white;";d.appendChild(B);f=document.createElement("div");f.style.cssText="margin-top: 20px;";k=a(f,"Pad");y=a(f,"Wheel");k.setAttribute("checked","true");k.onchange=function(){D("PAD");
ha&&ha.setAttribute("data-device_type","PAD")};y.onchange=function(){D("WHEEL");ha&&ha.setAttribute("data-device_type","WHEEL")};k.setAttribute("id","test");W=k;J=y;k=document.createElement("label");k.style.cssText+="color: #fff;display: block;";f.appendChild(k);k.textContent="Click on the buttons & arrows to setup your controller";k.setAttribute("id","action_label");d.appendChild(f);e.appendChild(d);e=g.create_elapsed_sensor();g.create_sensor_manifold(null,"UPDATE_GAMEPAD_DATA",g.CT_CONTINUOUS,[e],
n,function(){var a=m(),b=a.length;-1==O&&a.length&&(O=a[0].index,ha=z[O]);for(var c=0;c<z.length;c++)c<b?(z[c].textContent=a[c].index,z[c]==ha?(z[c].style.backgroundColor="green",B.textContent="Selected device: "+a[c].index+". Data: "+a[c].id):z[c].style.backgroundColor="blue"):z[c].style.backgroundColor="black";b||(O=-1,B.textContent="")});for(f=0;4>f;f++)k=w(f),y=function(a,b){if(b=="AXES"+O){for(var c=0;c<P.length;c+=2){var d=P[c],e=a,f=b,k=c,l=20*g.get_sensor_value(e,f,k);e=20*g.get_sensor_value(e,
f,k+1);d.style.transform="translate3d("+l+"px, "+e+"px, 0px) rotate(0rad)"}if(da)for(c=0;12>c;c+=2){if(e=a,f=b,d=c,!(d+1>2*p.length)){l=g.get_sensor_value(e,f,d);e=g.get_sensor_value(e,f,d+1);if(-2<H[d]){var m=l-H[d],n=e-H[d+1];f=p[Math.floor(d/2)];k=f.getAttribute("data-svgid");0==A?f.style.backgroundImage=m||n?"url('data:image/svg+xml;base64,"+btoa(R[k].replace("#e6e6e6","#00ff00"))+"')":"url('data:image/svg+xml;base64,"+btoa(R[k])+"')":2==A&&(m=E.get_moved_gmpd_axis(O),0<=m&&(0!=m%2&&m--,A=0,f.style.backgroundImage=
"url('data:image/svg+xml;base64,"+btoa(R[k])+"')",f=parseFloat(K.getAttribute("data-key")),E.set_gamepad_key(O,f,m),E.set_gamepad_key(O,f+1,m+1),K=null,document.getElementById("action_label").textContent="Click on the buttons & arrows to setup your controller"))}H[d]=l;H[d+1]=e}}else for(c=0;12>c;c++)d=c,d>=p.length||(l=g.get_sensor_value(a,b,d),-2<H[d]&&(k=l-H[d],e=p[d],f=e.getAttribute("data-svgid"),0==A?e.style.backgroundImage=k?"url('data:image/svg+xml;base64,"+btoa(R[f].replace("#e6e6e6","#00ff00"))+
"')":"url('data:image/svg+xml;base64,"+btoa(R[f])+"')":2==A&&(k=E.get_moved_gmpd_axis(O),0<=k&&(A=0,e.style.backgroundImage="url('data:image/svg+xml;base64,"+btoa(R[f])+"')",e=parseFloat(K.getAttribute("data-key")),E.set_gamepad_key(O,e,k),K=null,document.getElementById("action_label").textContent="Click on the buttons & arrows to setup your controller"))),H[d]=l)}},g.create_sensor_manifold(null,"AXES"+f,g.CT_CONTINUOUS,k,function(){return!0},y);l();window.addEventListener("resize",l)};f.hide=function(){A=
0;O=-1;W=J=K=ha=null;P.length=0;I.length=0;p.length=0;b.get_container().removeChild(ca);ca=null;g.remove_sensor_manifold(null,"UPDATE_GAMEPAD_DATA");for(var a=0;4>a;a++)g.remove_sensor_manifold(null,a),g.remove_sensor_manifold(null,"AXES"+a);window.removeEventListener("resize",l)};f.update=function(){for(var a=0;4>a;a++)v(a)}});w.a=f},function(D,w,f){D=f(0);var M=f(33),U=f(24),n=f(30),z=f(41),e=f(26),m=f(3);f=Object(D.a)("gyroscope",function(f,v){function q(a){var e=w.create_gyro_angles_sensor(),
f=w.create_gyro_quat_sensor(),n=!0;w.create_sensor_manifold(a,"CAMERA_ROTATE_GYRO",w.CT_CONTINUOUS,[e,f],null,function(a,e,f){if(0<f)if(r.is_eye_camera(a))e=w.get_sensor_payload(a,e,1),f=m.transformQuat(k.AXIS_MY,e,b),r.set_vertical_axis(a,f),C.set_rotation_v(a,e);else{l=w.get_sensor_payload(a,e,0);n&&(c[0]=l[0],c[1]=l[1],c[2]=l[2],n=!1);f=e=0;0==window.orientation&&(e=l[1]-c[1],f=l[0]-c[0],l[1]>D&&l[1]<g&&(f=0));if(180==window.orientation){e=l[1]-c[1];0>l[1]&&(e=-e);f=c[0]-l[0];if(e>Math.PI/2||e<
-Math.PI/2)e=0;l[1]>-g&&l[1]<-D&&(f=0)}if(-90==window.orientation){e=l[0]-c[0];if(e>Math.PI/2||e<-Math.PI/2)e=0;f=c[1]-l[1];if(l[0]>ea||l[0]<u)f=0}if(90==window.orientation){e=c[0]-l[0];if(e>Math.PI/2||e<-Math.PI/2)e=0;f=l[1]-c[1];if(l[0]>ea||l[0]<u)f=0}r.rotate_camera(a,f,e);c[0]=l[0];c[1]=l[1];c[2]=l[2]}})}var r=Object(M.a)(f),w=Object(U.a)(f),a=Object(n.a)(f),C=Object(z.a)(f),k=Object(e.a)(f),c=new Float32Array(3),l=new Float32Array(3),b=m.create(),g=k.deg_to_rad(110),D=k.deg_to_rad(70),ea=k.deg_to_rad(70),
u=-k.deg_to_rad(70);v.enable_camera_rotation=function(){var b=a.get_active_camera();q(b)};v.disable_camera_rotation=function(){var b=a.get_active_camera();w.remove_sensor_manifold(b,"CAMERA_ROTATE_GYRO")}});w.a=f},function(D,w,f){D=f(0);var M=f(40),U=f(24),n=f(49),z=f(1),e=f(69),m=f(26);f=Object(D.a)("hmd_conf",function(f,v){function q(){if(!ea.can_use_device(ea.DEVICE_HMD))return!1;var a=ea.get_device_by_type_element(ea.DEVICE_HMD);a=ea.get_value_param(a,ea.HMD_WEBVR_TYPE);return a&(ea.HMD_NON_WEBVR|
ea.HMD_WEBVR_MOBILE|ea.HMD_WEBVR_DESKTOP)&&!(a&ea.HMD_WEBVR1)}function r(a){a=a.target.value;var b=W[a],c;for(c in ha)if(c in b){var e=document.getElementById(c+"_slider");e&&(e.disabled="custom"!==a,e.value=b[c]);if(e=document.getElementById(c+"_number"))e.disabled="custom"!==a,e.value=b[c];ha[c]=b[c]}}function w(){D.remove_sensor_manifold(null,"UPDATE_HMD_RENDERING");C();c();O&&(O=!1,g.get_container().removeChild(K),document.head.removeChild(A),A=ca=K=null)}function a(){C(!0);c();for(var a in ha){var b=
document.getElementById(a+"_slider");b&&(b.value=ha[a]);if(b=document.getElementById(a+"_number"))b.value=ha[a]}}function C(a){var b=Math.max(window.screen.width,window.screen.height)*window.devicePixelRatio,c=Math.min(window.screen.width,window.screen.height)*window.devicePixelRatio,e=0,g=0,f=0;a:{var d=ba;var k=navigator.userAgent||navigator.vendor||window.opera;if(1==d.format&&d.devices&&d.devices.length)for(var l=0;l<d.devices.length;l++){var m=d.devices[l];if(m.rules&&("ios"==m.type&&J||"android"==
m.type)){for(var n=!1,q=0;q<m.rules.length;q++){var r=m.rules[q];if(r.ua&&0<=k.indexOf(r.ua)||!r.ua&&r.res&&r.res[0]&&r.res[1]&&Math.min(b,c)==Math.min(r.res[0],r.res[1])&&Math.max(b,c)==Math.max(r.res[0],r.res[1])){n=!0;break}}if(n){d=l;break a}}}else u.error("DPDB isn't correct.");d=-1}-1!=d&&(f=ba.devices[d],g=f.dpi[1]||f.dpi,e=Math.round(25.4*b/(f.dpi[0]||f.dpi)),g=Math.round(25.4*c/g),f=Math.round(f.bw));b=F.get("hmd_conf","b4w");b=JSON.parse(b?b:"{}");a?(ha.first_distortion=.34,ha.second_distortion=
.55,ha.bevel_size=f||4,ha.screen_width=e||110,ha.screen_height=g||65,ha.screen_lense=50,ha.ipd=64,ha.baseline=32):(ha.first_distortion="first_distortion"in b?parseFloat(b.first_distortion):.34,ha.second_distortion="second_distortion"in b?parseFloat(b.second_distortion):.55,ha.bevel_size="bevel_size"in b?parseFloat(b.bevel_size):f||4,ha.screen_width="screen_width"in b?parseFloat(b.screen_width):e||110,ha.screen_height="screen_height"in b?parseFloat(b.screen_height):g||65,ha.screen_lense="screen_lense"in
b?parseFloat(b.screen_lense):50,ha.ipd="ipd"in b?parseFloat(b.ipd):64,ha.baseline="baseline"in b?parseFloat(b.baseline):32);L=!0}function k(){F.set("hmd_conf",JSON.stringify(ha),"b4w");w()}function c(){if(L){var a=ea.get_device_by_type_element(ea.DEVICE_HMD);a&&(ea.set_config(a,ea.HMD_DISTORTION,[ha.first_distortion,ha.second_distortion]),ea.get_value_param(a,ea.HMD_WEBVR_TYPE)&(ea.HMD_NON_WEBVR|ea.HMD_WEBVR_MOBILE)&&(ea.set_config(a,ea.HMD_BEVEL_SIZE,.001*ha.bevel_size),ea.set_config(a,ea.HMD_SCREEN_WIDTH,
.001*ha.screen_width),ea.set_config(a,ea.HMD_SCREEN_HEIGHT,.001*ha.screen_height),ea.set_config(a,ea.HMD_SCREEN_LENS_DIST,.001*ha.screen_lense),ea.set_config(a,ea.HMD_EYE_DISTANCE,.001*ha.ipd),ea.set_config(a,ea.HMD_BASELINE_DIST,.001*ha.baseline)));L=!1}}function l(a){var b=a.target.id.split("_");b=b.splice(0,b.length-1).join("_");b in ha&&ha[b]!=a.target.value&&(L=!0,ha[b]=a.target.value,document.getElementById(b+"_slider").value=a.target.value,document.getElementById(b+"_number").value=a.target.value)}
function b(a,b,c){var e=document.createElement("button");e.onclick=a;e.style.cssText="background-color: #323232;border: 2px solid rgba(98, 98, 98, .2);border-radius: 2px;width: 160px;height: 30px;display: block;float: left;font-size: 16px;font-weight: normal;color: #fff;cursor: pointer;text-decoration: none;text-align: center;padding-left: 8px;line-height: 28px;margin-right:"+c+";box-shadow: 0px 0px 4px 0px rgba(98, 98, 98, .8);";e.innerHTML=b;return e}var g=Object(M.a)(f),D=Object(U.a)(f),ea=Object(n.a)(f),
u=Object(z.a)(f),F=Object(e.a)(f),R=Object(m.a)(f),O=!1,K=null,A=null,ca=null,L=!0,ha={profile:"custom",first_distortion:0,second_distortion:0,bevel_size:0,screen_width:0,screen_height:0,screen_lense:0,ipd:0,baseline:0},J=/iPad|iPhone|iPod/.test(navigator.platform),W={oculus_dk2:{name:"Oculus Rift DK2",type:2,first_distortion:.22,second_distortion:.28},cardboard_1:{name:"Cardboard (2014)",type:1,ipd:60,baseline:35,screen_lense:42,first_distortion:.441,second_distortion:.156},cardboard_2:{name:"Cardboard (2015)",
type:1,ipd:64,baseline:35,screen_lense:39,first_distortion:.34,second_distortion:.55},custom:{name:"Custom",type:0,ipd:64,baseline:35,screen_lense:39,first_distortion:0,second_distortion:0}},B=[{label:"Tray to lens-center distance.",Vo:!0,inputs:[{id:"baseline",max:"50",step:"0.5"}]},{label:"Interpupillary distance.",Vo:!0,inputs:[{id:"ipd",max:"100",step:"1"}]},{label:"Screen to lense distance.",Vo:!0,inputs:[{id:"screen_lense",max:"100",step:"1"}]},{label:"Screen height.",Vo:!0,inputs:[{id:"screen_height",
max:"150",step:"1"}]},{label:"Screen width.",Vo:!0,inputs:[{id:"screen_width",max:"200",step:"1"}]},{label:"Bevel width.",Vo:!0,inputs:[{id:"bevel_size",max:"20",step:"1"}]},{label:"Distortion coefficients.",inputs:[{id:"first_distortion",max:"1.0",step:"0.01"},{id:"second_distortion",max:"1.0",step:"0.01"}]}];v.check=q;v.show=function(e){if(q()){var f=g.get_container();A=document.createElement("style");A.innerHTML="."+e+" input[type=range]::-webkit-slider-runnable-track {width: 100%; height: 8px;cursor: pointer;background-color: #fff;border: 2px solid rgba(98, 98, 98, .2);box-shadow: 0px 0px 4px 0px rgba(98, 98, 98, .8);}."+
e+" input[type=range]::-webkit-slider-thumb {box-shadow: 0px 0px 4px 0px rgba(98, 98, 98, .8);height: 30px;width: 16px;border-radius: 2px;background-color: #323232;cursor: pointer;margin-top: -13px;-webkit-appearance: none;}";document.head.appendChild(A);if(!O){O=!0;C();var m=ea.get_device_by_type_element(ea.DEVICE_MOUSE,f);ea.switch_prevent_default(m,!1);m=ea.get_device_by_type_element(ea.DEVICE_TOUCH,f);ea.switch_prevent_default(m,!1);K=document.createElement("div");K.className=e;f.appendChild(K);
ca=document.createElement("div");K.appendChild(ca);ca.style.cssText="background-color: #484848;border: 2px solid rgba(150, 150, 150, 0.7);box-shadow: 0px 0px 10px 0px rgba(150, 150, 150, 0.7);position: relative;width: 524px;padding: 16px;overflow: hidden;";e=F.get("hmd_conf","b4w");e=JSON.parse(e?e:"{}").profile||"custom";f=document.createElement("div");m=document.createElement("label");m.innerHTML="Profile: ";m.className="text_label";m.style.cssText="background-color: #323232;border: 2px solid rgba(98, 98, 98, .2);border-radius: 2px;width: 120px;height: 30px;display: block;float: left;font-size: 16px;font-weight: normal;color: #fff;cursor: pointer;text-decoration: none;text-align: left;padding-left: 8px;line-height: 28px;margin-bottom: 4px;box-shadow: 0px 0px 4px 0px rgba(98, 98, 98, .8);";
f.appendChild(m);m=document.createElement("select");f.appendChild(m);m.style.cssText="background-color: #323232;border: 2px solid rgba(98, 98, 98, .2);border-radius: 2px;height: 30px;display: block;font-size: 16px;font-weight: normal;color: #fff;cursor: pointer;text-decoration: none;text-align: left;padding-left: 8px;line-height: 28px;margin-bottom: 4px;box-shadow: 0px 0px 4px 0px rgba(98, 98, 98, .8);";var n=ea.get_device_by_type_element(ea.DEVICE_HMD);if(n)for(var u in W)if(0==W[u].type||ea.get_value_param(n,
ea.HMD_WEBVR_TYPE)&(ea.HMD_NON_WEBVR|ea.HMD_WEBVR_MOBILE)&&1==W[u].type){var t=document.createElement("option");t.value=u;t.text=W[u].name;m.appendChild(t)}m.value=e;R.is_ie11()?m.onchange=r:m.oninput=r;ca.appendChild(f);u=ea.get_device_by_type_element(ea.DEVICE_HMD);for(e=0;e<B.length;e++)if(ea.get_value_param(u,ea.HMD_WEBVR_TYPE)&(ea.HMD_NON_WEBVR|ea.HMD_WEBVR_MOBILE)||!B[e].Vo){f=B[e];n=e;m=document.createElement("div");t=document.createElement("label");t.className="text_label";var d="8px";n%2&&
(d="0");t.style.cssText="background-color: #323232;border: 2px solid rgba(98, 98, 98, .2);border-radius: 2px;width: 100%;height: 30px;display: block;font-size: 16px;font-weight: normal;color: #fff;cursor: pointer;text-decoration: none;text-align: left;padding-left: 8px;line-height: 28px;margin-bottom: 4px;box-shadow: 0px 0px 4px 0px rgba(98, 98, 98, .8);";t.textContent=f.label;m.appendChild(t);m.style.cssText="margin-top: 16px;float: left;width: 240px;margin-right: "+d+";border-top: 2px solid rgba(98, 98, 98, .4);box-sizing: border-box;-webkit-box-sizing: border-box;padding-top: 8px;";
for(n=0;n<f.inputs.length;n++){t=f.inputs[n];d=document.createElement("div");d.className="row";var v=document.createElement("input");v.className="input_slider";v.style.cssText="-webkit-appearance: none;width: 192px;display: block;float: left;height: 8px;margin-bottom: 16px;margin-top: 16px;box-sizing: border-box;margin-right: 8px;margin-left: 0;";v.setAttribute("id",t.id+"_slider");v.setAttribute("type","range");v.setAttribute("min","0.00");v.setAttribute("step",t.step);v.setAttribute("value",ha[t.id]);
v.setAttribute("max",t.max);d.appendChild(v);var y=document.createElement("input");y.className="input_text";y.setAttribute("id",t.id+"_number");y.setAttribute("type","number");y.setAttribute("min","0.00");y.setAttribute("step",t.step);y.setAttribute("value",ha[t.id]);y.setAttribute("max",t.max);d.appendChild(y);y.style.cssText="background-color: #323232;border: 2px solid rgba(98, 98, 98, .2);border-radius: 2px;width: 40px;height: 30px;display: block;float: left;font-size: 16px;font-weight: normal;color: #fff;cursor: pointer;text-decoration: none;text-align: center;box-sizing: border-box;line-height: 28px;margin-top: 4px;margin-right: 0;margin-left: 0;box-shadow: 0px 0px 4px 0px rgba(98, 98, 98, .8);";
R.is_ie11()?(v.onchange=l,y.onchange=l):(v.oninput=l,y.oninput=l);m.appendChild(d)}ca.appendChild(m)}u=document.createElement("div");e=b(k,"SAVE","4px");f=b(w,"CANCEL","4px");m=b(a,"RESET","0px");u.className="row";u.style.cssText="padding-top: 32px;clear: both;box-sizing: border-box;-webkit-box-sizing: border-box;";u.appendChild(e);u.appendChild(f);u.appendChild(m);ca.appendChild(u);u=D.create_timeline_sensor();D.create_sensor_manifold(null,"UPDATE_HMD_RENDERING",D.CT_CONTINUOUS,[u],null,c)}}};v.hide=
w;v.reset=a;v.update=function(){C();c()};var ba={_comment:"AUTOMATICALLY GENERATED BY generate_dpdb.py. DO NOT EDIT.",format:1,last_updated:"2016-01-26T23:11:18Z",devices:[{type:"android",rules:[{mdmh:"asus/*/Nexus 7/*"},{ua:"Nexus 7"}],dpi:[320.8,323],bw:3,ac:500},{type:"android",rules:[{mdmh:"asus/*/ASUS_Z00AD/*"},{ua:"ASUS_Z00AD"}],dpi:[403,404.6],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"HTC/*/HTC6435LVW/*"},{ua:"HTC6435LVW"}],dpi:[449.7,443.3],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"HTC/*/HTC One XL/*"},
{ua:"HTC One XL"}],dpi:[315.3,314.6],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"htc/*/Nexus 9/*"},{ua:"Nexus 9"}],dpi:289,bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One M9/*"},{ua:"HTC One M9"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One_M8/*"},{ua:"HTC One_M8"}],dpi:[449.7,447.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One/*"},{ua:"HTC One"}],dpi:472.8,bw:3,ac:1E3},{type:"android",rules:[{mdmh:"Huawei/*/Nexus 6P/*"},{ua:"Nexus 6P"}],dpi:[515.1,
518],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5X/*"},{ua:"Nexus 5X"}],dpi:[422,419.9],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"LGE/*/LGMS345/*"},{ua:"LGMS345"}],dpi:[221.7,219.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D800/*"},{ua:"LG-D800"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D850/*"},{ua:"LG-D850"}],dpi:[537.9,541.9],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/VS985 4G/*"},{ua:"VS985 4G"}],dpi:[537.9,535.6],bw:3,ac:1E3},{type:"android",
rules:[{mdmh:"LGE/*/Nexus 5/*"},{ua:"Nexus 5 B"}],dpi:[442.4,444.8],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 4/*"},{ua:"Nexus 4"}],dpi:[319.8,318.4],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"LGE/*/LG-P769/*"},{ua:"LG-P769"}],dpi:[240.6,247.5],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"LGE/*/LGMS323/*"},{ua:"LGMS323"}],dpi:[206.6,204.6],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"LGE/*/LGLS996/*"},{ua:"LGLS996"}],dpi:[403.4,401.5],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"Micromax/*/4560MMX/*"},
{ua:"4560MMX"}],dpi:[240,219.4],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"Micromax/*/A250/*"},{ua:"Micromax A250"}],dpi:[480,446.4],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"Micromax/*/Micromax AQ4501/*"},{ua:"Micromax AQ4501"}],dpi:240,bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/DROID RAZR/*"},{ua:"DROID RAZR"}],dpi:[368.1,256.7],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"motorola/*/XT830C/*"},{ua:"XT830C"}],dpi:[254,255.9],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"motorola/*/XT1021/*"},
{ua:"XT1021"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1023/*"},{ua:"XT1023"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1028/*"},{ua:"XT1028"}],dpi:[326.6,327.6],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"motorola/*/XT1034/*"},{ua:"XT1034"}],dpi:[326.6,328.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1053/*"},{ua:"XT1053"}],dpi:[315.3,316.1],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"motorola/*/XT1562/*"},{ua:"XT1562"}],
dpi:[403.4,402.7],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"motorola/*/Nexus 6/*"},{ua:"Nexus 6 B"}],dpi:[494.3,489.7],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"motorola/*/XT1063/*"},{ua:"XT1063"}],dpi:[295,296.6],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"motorola/*/XT1064/*"},{ua:"XT1064"}],dpi:[295,295.6],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1092/*"},{ua:"XT1092"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1095/*"},{ua:"XT1095"}],dpi:[422,423.4],
bw:3,ac:1E3},{type:"android",rules:[{mdmh:"OnePlus/*/A0001/*"},{ua:"A0001"}],dpi:[403.4,401],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE E1005/*"},{ua:"ONE E1005"}],dpi:[442.4,441.4],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A2005/*"},{ua:"ONE A2005"}],dpi:[391.9,405.4],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"OPPO/*/X909/*"},{ua:"X909"}],dpi:[442.4,444.1],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9082/*"},{ua:"GT-I9082"}],dpi:[184.7,185.4],bw:3,ac:1E3},
{type:"android",rules:[{mdmh:"samsung/*/SM-G360P/*"},{ua:"SM-G360P"}],dpi:[196.7,205.4],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/Nexus S/*"},{ua:"Nexus S"}],dpi:[234.5,229.8],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[304.8,303.9],bw:5,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-T230NU/*"},{ua:"SM-T230NU"}],dpi:216,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SGH-T399/*"},{ua:"SGH-T399"}],dpi:[217.7,231.4],bw:3,ac:1E3},{type:"android",
rules:[{mdmh:"samsung/*/SM-N9005/*"},{ua:"SM-N9005"}],dpi:[386.4,387],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SM-N900A/*"},{ua:"SAMSUNG-SM-N900A"}],dpi:[386.4,387.7],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9500/*"},{ua:"GT-I9500"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/GT-I9505/*"},{ua:"GT-I9505"}],dpi:439.4,bw:4,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900F/*"},{ua:"SM-G900F"}],dpi:[415.6,431.6],bw:5,ac:1E3},{type:"android",
rules:[{mdmh:"samsung/*/SM-G900M/*"},{ua:"SM-G900M"}],dpi:[415.6,431.6],bw:5,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/SM-G800F/*"},{ua:"SM-G800F"}],dpi:326.8,bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/SM-G906S/*"},{ua:"SM-G906S"}],dpi:[562.7,572.4],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[306.7,304.8],bw:5,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/SM-T535/*"},{ua:"SM-T535"}],dpi:[142.6,136.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-N920C/*"},
{ua:"SM-N920C"}],dpi:[515.1,518.4],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300I/*"},{ua:"GT-I9300I"}],dpi:[304.8,305.8],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9195/*"},{ua:"GT-I9195"}],dpi:[249.4,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SPH-L520/*"},{ua:"SPH-L520"}],dpi:[249.4,255.9],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SGH-I717/*"},{ua:"SAMSUNG-SGH-I717"}],dpi:285.8,bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/SPH-D710/*"},
{ua:"SPH-D710"}],dpi:[217.7,204.2],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/GT-N7100/*"},{ua:"GT-N7100"}],dpi:265.1,bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/SCH-I605/*"},{ua:"SCH-I605"}],dpi:265.1,bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/Galaxy Nexus/*"},{ua:"Galaxy Nexus"}],dpi:[315.3,314.2],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910H/*"},{ua:"SM-N910H"}],dpi:[515.1,518],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910C/*"},{ua:"SM-N910C"}],
dpi:[515.2,520.2],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G130M/*"},{ua:"SM-G130M"}],dpi:[165.9,164.8],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G928I/*"},{ua:"SM-G928I"}],dpi:[515.1,518.4],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/SM-G920F/*"},{ua:"SM-G920F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G920P/*"},{ua:"SM-G920P"}],dpi:[522.5,577],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/SM-G925F/*"},{ua:"SM-G925F"}],dpi:580.6,
bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G925V/*"},{ua:"SM-G925V"}],dpi:[522.5,576.6],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"Sony/*/C6903/*"},{ua:"C6903"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"Sony/*/D6653/*"},{ua:"D6653"}],dpi:[428.6,427.6],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"Sony/*/E6653/*"},{ua:"E6653"}],dpi:[428.6,425.7],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"Sony/*/E6853/*"},{ua:"E6853"}],dpi:[403.4,401.9],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"Sony/*/SGP321/*"},
{ua:"SGP321"}],dpi:[224.7,224.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"TCT/*/ALCATEL ONE TOUCH Fierce/*"},{ua:"ALCATEL ONE TOUCH Fierce"}],dpi:[240,247.5],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"THL/*/thl 5000/*"},{ua:"thl 5000"}],dpi:[480,443.3],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"ZTE/*/ZTE Blade L2/*"},{ua:"ZTE Blade L2"}],dpi:240,bw:3,ac:500},{type:"ios",rules:[{res:[640,960]}],dpi:[325.1,328.4],bw:4,ac:1E3},{type:"ios",rules:[{res:[640,1136]}],dpi:[317.1,320.2],bw:3,ac:1E3},{type:"ios",
rules:[{res:[750,1334]}],dpi:326.4,bw:4,ac:1E3},{type:"ios",rules:[{res:[1242,2208]}],dpi:[453.6,458.4],bw:4,ac:1E3},{type:"ios",rules:[{res:[1125,2001]}],dpi:[410.9,415.4],bw:4,ac:1E3}]}});w.a=f},function(D,w,f){D=f(0);var M=f(24),U=f(1),n=f(30),z=f(50),e=f(82),m=f(26);f=Object(D.a)("mixer",function(f,v){function q(){A=K.length=0;ca=r(100);L=new Float32Array(ca.length);ha=new Float32Array(ca.length);var a=F.get_speaker_objects();if(a.length){K.push(w());for(var b=0;b<a.length;b++)K.push(C(a[b]));
K.sort(function(a,b){return"MASTER"==a.id?-1:"MASTER"==b.id?1:"COMPRESSOR"==a.id?-1:"COMPRESSOR"==b.id?1:a.id.toUpperCase()<b.id.toUpperCase()?-1:a.id.toUpperCase()>b.id.toUpperCase()?1:0})}}function r(a){for(var b=new Float32Array(a),c=0,e=0;e<a;e++)b[e]=20*Math.pow(1E3,c),c+=1/(a-1);return b}function w(){var b=a("MASTER"),c=F.get_compressor_params();c&&(b.Oa.push(["THRESHOLD",c.threshold,-100,0,100,!1]),b.Oa.push(["KNEE",c.knee,0,40,40,!1]),b.Oa.push(["RATIO",c.ratio,1,20,20,!1]),b.Oa.push(["ATTACK",
c.attack,0,1,1E3,!1]),b.Oa.push(["RELEASE",c.release,0,1,1E3,!1]));b.Oa.push(["VOLUME",F.get_volume(null),0,1,50,!1]);b.mute=F.is_muted(null)?1:0;b.Qh=-1;return b}function a(a){return{id:a,Oa:[],rm:0,mute:-1,Qh:-1,Vc:null}}function C(b){var c=a(ea.get_object_name(b));c.mute=F.is_muted(b)?1:0;c.Qh=0;c.Vc=b;return c}function k(a){if(a.Vc){a.Oa.length=0;var b=F.get_positional_params(a.Vc);b&&(a.Oa.push(["DIST_REF",b.dist_ref,0,1E3,1E4,!1]),a.Oa.push(["ATTENUATION",b.attenuation,0,50,1E3,!1]),a.Oa.push(["DIST_MAX",
b.dist_max,0,1E4,1E4,!1]));if(b=F.get_filter_params(a.Vc))a.Oa.push(["EQ_FREQ",b.freq,20,2E4,100,!0]),a.Oa.push(["EQ_Q",b.Q,0,10,100,!1]),a.Oa.push(["EQ_GAIN",b.gain,-70,30,100,!1]);a.Oa.push(["VOLUME",F.get_volume(a.Vc),0,1,50,!1]);R.clamp(a.rm,0,a.Oa.length-1)}}function c(a){for(var b=0;b<K.length;b++){var c=K[b];if(c!=a&&1==c.Qh)return!0}return!1}function l(a){for(var b=0;b<K.length;b++){var c=K[b];c!=a&&0==c.mute&&0==c.Qh&&F.mute(c.Vc,!1)}}function b(){if(0==K.length)return[0,-1];var a=8*Math.floor(A/
8),b=a+7;a=R.clamp(a,0,K.length-1);b=R.clamp(b,0,K.length-1);return[a,b]}var g=Object(M.a)(f),D=Object(U.a)(f),ea=Object(n.a)(f),u=Object(z.a)(f),F=Object(e.a)(f),R=Object(m.a)(f),O="SWITCH_STRIP SWITCH_STRIP_HOLD SWITCH_PARAM INC_DEC INC_DEC_HOLD MUTE_SOLO".split(" "),K=[],A=0,ca=null,L=null,ha=null;v.enable_mixer_controls=function(){function a(a,b,c){if(1==c){var d=g.get_sensor_value(a,b,0)?-1:1,e=K[A];if(e)switch(c=e.Oa[e.rm],c[1]=c[5]?c[1]*Math.pow(c[3]/c[2],d/c[4]):c[1]+(c[3]-c[2])/c[4]*d,c[1]=
R.clamp(c[1],c[2],c[3]),c[0]){case "VOLUME":"MASTER"!=e.id?F.set_volume(e.Vc,c[1]):F.set_volume(null,c[1]);break;case "DIST_REF":d=F.get_positional_params(e.Vc);d.dist_ref=c[1];F.set_positional_params(e.Vc,d);break;case "ATTENUATION":d=F.get_positional_params(e.Vc);d.attenuation=c[1];F.set_positional_params(e.Vc,d);break;case "DIST_MAX":d=F.get_positional_params(e.Vc);d.dist_max=c[1];F.set_positional_params(e.Vc,d);break;case "EQ_FREQ":d=F.get_filter_params(e.Vc);d.freq=c[1];F.set_filter_params(e.Vc,
d);break;case "EQ_Q":d=F.get_filter_params(e.Vc);d.Q=c[1];F.set_filter_params(e.Vc,d);break;case "EQ_GAIN":d=F.get_filter_params(e.Vc);d.gain=c[1];F.set_filter_params(e.Vc,d);break;case "THRESHOLD":e=F.get_compressor_params();e.threshold=c[1];F.set_compressor_params(e);break;case "KNEE":e=F.get_compressor_params();e.knee=c[1];F.set_compressor_params(e);break;case "RATIO":e=F.get_compressor_params();e.ratio=c[1];F.set_compressor_params(e);break;case "ATTACK":e=F.get_compressor_params();e.attack=c[1];
F.set_compressor_params(e);break;case "RELEASE":e=F.get_compressor_params();e.release=c[1];F.set_compressor_params(e);break;default:D.error("Unknown strip param")}"INC_DEC"==b?g.reset_timer_sensor(a,b,2,.35):g.reset_timer_sensor(a,b,2,.05)}else g.reset_timer_sensor(a,b,2,10)}function e(a,c,d){if(1==d){d=g.get_sensor_value(a,c,0)?-1:1;if(K.length){1==d&&A<K.length-1?A++:-1==d&&0<A&&A--;d=b();for(var e=d[0];e<=d[1];e++)k(K[e])}"SWITCH_STRIP"==c?g.reset_timer_sensor(a,c,2,.15+.3):g.reset_timer_sensor(a,
c,2,.15)}else g.reset_timer_sensor(a,c,2,10)}q();var f=g.create_keyboard_sensor(g.KEY_NUM4),m=g.create_keyboard_sensor(g.KEY_NUM6),n=g.create_keyboard_sensor(g.KEY_NUM8),r=g.create_keyboard_sensor(g.KEY_NUM2),p=g.create_keyboard_sensor(g.KEY_ADD),v=g.create_keyboard_sensor(g.KEY_SUB),w=g.create_keyboard_sensor(g.KEY_NUM7),t=g.create_keyboard_sensor(g.KEY_NUM9),d=g.create_timer_sensor(.15,!0),y=g.create_timer_sensor(.05,!0);f=[f,m,d];g.create_sensor_manifold(null,"SWITCH_STRIP",g.CT_TRIGGER,f,function(a){return a[0]||
a[1]},e);g.create_sensor_manifold(null,"SWITCH_STRIP_HOLD",g.CT_SHOT,f,function(a){return(a[0]||a[1])&&a[2]},e);g.create_sensor_manifold(null,"SWITCH_PARAM",g.CT_SHOT,[n,r],function(a){return a[0]||a[1]},function(a,b){a=g.get_sensor_value(a,b,0)?-1:1;(b=K[A])&&(1==a&&b.rm<b.Oa.length-1?b.rm++:-1==a&&0<b.rm&&b.rm--)});n=[v,p,y];g.create_sensor_manifold(null,"INC_DEC",g.CT_TRIGGER,n,function(a){return a[0]||a[1]},a);g.create_sensor_manifold(null,"INC_DEC_HOLD",g.CT_SHOT,n,function(a){return(a[0]||a[1])&&
a[2]},a);g.create_sensor_manifold(null,"MUTE_SOLO",g.CT_SHOT,[w,t],function(a){return a[0]||a[1]},function(a,b){if(g.get_sensor_value(a,b,0))(a=K[A])&&0<=a.mute&&("MASTER"!=a.id?0==a.mute?(a.mute=1,F.mute(a.Vc,!0),1==a.Qh&&(a.Qh=0,c(a)||l(a))):(a.mute=0,c(a)||F.mute(a.Vc,!1)):0==a.mute?(a.mute=1,F.mute(null,!0)):(a.mute=0,F.mute(null,!1)));else if((a=K[A])&&0<=a.Qh)if(0==a.Qh)for(a.Qh=1,F.mute(a.Vc,!1),1==a.mute&&(a.mute=0),b=0;b<K.length;b++){var d=K[b];d!=a&&0==d.mute&&0==d.Qh&&F.mute(d.Vc,!0)}else a.Qh=
0,c(a)?F.mute(a.Vc,!0):l(a)});w=g.create_elapsed_sensor();g.create_sensor_manifold(null,"MIXER_DRAW",g.CT_CONTINUOUS,[w],null,function(){if(K[A])for(var a=b(),c=a[0];c<=a[1];c++){var d=K[c];u.draw_mixer_strip(d.id,c==A,c%8,d.Oa,d.rm,d.mute,d.Qh);if(d.Vc&&F.get_filter_params(d.Vc)){F.get_filter_freq_response(d.Vc,ca,L,ha);for(d=0;d<L.length;d++)L[d]=20*Math.log(L[d])/Math.LN10;u.plot_array("EQ",c%8,L,20,2E4,-10,10)}}});w=g.create_timer_sensor(1,!0);g.create_sensor_manifold(null,"MIXER_UPDATE",g.CT_TRIGGER,
[w],null,function(){for(var a=b(),c=a[0];c<=a[1];c++)k(K[c])})};v.disable_mixer_controls=function(){for(var a=0;O.length;a++)g.remove_sensor_manifold(null,O[a])}});w.a=f},function(D,w,f){D=f(0);var M=f(33),U=f(40),n=f(24),z=f(54),e=f(1),m=f(30),C=f(26),v=f(61);f=Object(D.a)("mouse",function(f,r){function q(){1==I&&(I=0);var a=document.exitPointerLock||document.webkitExitPointerLock||document.mozExitPointerLock;"function"===typeof a&&a.apply(document);u.remove_sensor_manifold(O.get_active_camera(),
"SMOOTH_PL")}function a(a){2==I&&(I=0);a.removeEventListener("mousedown",k,!1);a.removeEventListener("mouseup",c,!1);a.removeEventListener("mousemove",w,!1);u.remove_sensor_manifold(O.get_active_camera(),"SMOOTH_DRAG")}function w(a){if(B()){if(p)var b=ea.get_coords_target_space(a,W);else b=W,b[0]=a.clientX,b[1]=a.clientY;J[0]+=2*(b[0]-L);J[1]+=2*(b[1]-ha);L=b[0];ha=b[1]}a.preventDefault()}function k(a){if(p)var b=ea.get_coords_target_space(a,W);else b=W,b[0]=a.clientX,b[1]=a.clientY;L=b[0];ha=b[1];
a.currentTarget.addEventListener("mousemove",w,!1);a.preventDefault()}function c(a){a.currentTarget.removeEventListener("mousemove",w,!1);a.preventDefault()}function l(a,b,c,d){if(.01<Math.abs(J[0])||.01<Math.abs(J[1]))b=u.get_sensor_value(a,b,0),a=K.smooth(J[0],0,b,.1*ca),b=K.smooth(J[1],0,b,.1*ca),J[0]-=a,J[1]-=b,d(4E-4*-a,4E-4*-b)}function b(a,b){var c=O.get_first_character(),d=O.get_active_camera();D.rotate_camera(d,a,b);c&&(a=D.get_camera_angles_char(d,W),F.set_character_rotation_h(c,a[0]),F.set_character_vert_move_dir_angle(c,
a[1]))}function g(a){P?(a=ea.get_coords_target_space(a,!1,W),a=O.pick_object(a[0],a[1])):a=O.pick_object(a.clientX,a.clientY);a?(O.outlining_is_enabled(a)&&O.set_outline_intensity(a,1),O.outlining_is_enabled(ba)&&a!=ba&&O.set_outline_intensity(ba,0)):O.outlining_is_enabled(ba)&&O.set_outline_intensity(ba,0);ba=a}var D=Object(M.a)(f),ea=Object(U.a)(f),u=Object(n.a)(f),F=Object(z.a)(f),R=Object(e.a)(f),O=Object(m.a)(f),K=Object(C.a)(f),A=Object(v.a)(f),ca=1,L=0,ha=0,J=new Float32Array(2),W=new Float32Array(2),
B=null,ba=null,I=0,P=!1,p=!1;r.request_pointerlock=function(c,e,f,d,g,k){function m(){if(document.pointerLockElement===c||document.webkitPointerLockElement===c||document.mozPointerLockElement===c){a(c);c.addEventListener("mousemove",d,!1);var b=O.get_active_camera();if(!u.check_sensor_manifold(b,"SMOOTH_PL")){var g=u.create_elapsed_sensor();u.create_sensor_manifold(b,"SMOOTH_PL",u.CT_CONTINUOUS,[g],null,l,k)}e()}else c.removeEventListener("mousemove",d,!1),I=0,document.removeEventListener("pointerlockchange",
m,!1),document.removeEventListener("webkitpointerlockchange",m,!1),document.removeEventListener("mozpointerlockchange",m,!1),f()}if(1!=I){I=1;e=e||function(){};f=f||function(){};k=k||b;g=g||function(){return!0};d=d||function(a){if(g()){if("number"==typeof a.movementX){var b=a.movementX;a=a.movementY}else"number"==typeof a.webkitMovementX?(b=a.webkitMovementX,a=a.webkitMovementY):"number"==typeof a.mozMovementX?(b=a.mozMovementX,a=a.mozMovementY):a=b=0;J[0]+=b;J[1]+=a}};document.addEventListener("pointerlockchange",
m,!1);document.addEventListener("webkitpointerlockchange",m,!1);document.addEventListener("mozpointerlockchange",m,!1);var n=c.requestPointerLock||c.webkitRequestPointerLock||c.mozRequestPointerLock;"function"===typeof n?n.apply(c):R.error("Pointer lock is not available")}};r.exit_pointerlock=q;r.check_pointerlock=function(a){return"function"===typeof(a.requestPointerLock||a.webkitRequestPointerLock||a.mozRequestPointerLock)?!0:!1};r.request_mouse_drag=function(a,e,f,d){2!=I&&(I=2,q(),B=e||function(){return!0},
f=f||b,p=!!d,a.addEventListener("mousedown",k,!1),a.addEventListener("mouseup",c,!1),a=O.get_active_camera(),u.check_sensor_manifold(a,"SMOOTH_DRAG")||(e=u.create_elapsed_sensor(),u.create_sensor_manifold(a,"SMOOTH_DRAG",u.CT_CONTINUOUS,[e],null,l,f)))};r.exit_mouse_drag=a;r.enable_mouse_hover_outline=function(a){P=!!a;A.detect_mobile()||ea.get_canvas().addEventListener("mousemove",g)};r.disable_mouse_hover_outline=function(){A.detect_mobile()||(ea.get_canvas().removeEventListener("mousemove",g),
ba&&O.set_outline_intensity(ba,0))};r.get_coords_x=function(a,b,c){return c?ea.get_coords_target_space(a,b,W)[0]:"clientX"in a?a.clientX:(a="touchend"==a.type?a.changedTouches:b?a.targetTouches:a.touches)&&a[0]&&"clientX"in a[0]?a[0].clientX:-1};r.get_coords_y=function(a,b,c){return c?ea.get_coords_target_space(a,b,W)[1]:"clientY"in a?a.clientY:(a="touchend"==a.type?a.changedTouches:b?a.targetTouches:a.touches)&&a[0]&&"clientY"in a[0]?a[0].clientY:-1};r.set_plock_smooth_factor=function(a){ca=a};r.get_plock_smooth_factor=
function(){return ca}});w.a=f},function(D,w,f){D=f(0);var M=f(83),U=f(24),n=f(8),z=f(30),e=f(68),m=f(41),C=f(3),v=f(54),q=f(1),r=f(26);f=Object(D.a)("npc_ai",function(f,a){function w(a,b){var c=b.destination,e=b.dz,f=ha;R.get_translation(b.collider,f);var k=0,l=f[2];c[2]=l;switch(b.type){case P:if(b.random&&b.Nl){c[0]=(12*Math.random()-6)*b.speed+e[0];c[1]=-(12*Math.random()-6)*b.speed+e[1];var m=ba;e=J;var q=b.speed,u=b.rot_speed;R.get_rotation(b.collider,m);C.transformQuat(A.AXIS_MY,m,e);e[2]=0;
C.normalize(e,e);m=.5*q/Math.sin(u/2);f=C.dist(c,f);f<2*m&&C.scaleAndAdd(c,e,2*m-f,c);b.Nl=!1}b.pA&&(k=b.pA-l,f=b.speed*a,k>f?k=f:k<-f&&(k=-f));b.Ok=k;break;case p:case da:b.mq?k=b.mq:b.Ok&&(k=b.Ok,b.type==da&&(k*=a)),b.random&&b.Nl&&(b.type==da?(b.speed=Math.random()+.1,f=b.aH-b.dH):f=b.max_height-b.min_height,c[0]=10*Math.random()-5+e[0],c[1]=10*Math.random()-5+e[1],c[2]=l-(Math.random()*f-.5*f),b.Nl=!1)}k&&(c[2]=l+k);c=L;f=ha;m=J;k=I;u=b.rig;e=b.collider;l=b.destination;var t=b.speed,r=b.actions,
v=y.get_current_anim_name(u);if(!y.is_play(u)||!r.idle||-1==r.idle.indexOf(v)){R.get_translation(e,c);q=l[0]-c[0];var w=l[1]-c[1];q=Math.sqrt(q*q+w*w);if(q>2*t*a)b.state=20,A.horizontal_direction(l,c,m),r=b.rig,y.is_animated(r)&&(u=b.speed,t=y.get_frame(r),r=y.get_anim_length(r),u=r/24*(1-t/r)*u,.9>q/u&&C.scaleAndAdd(l,m,u-q,l)),q=ba,u=W,R.get_rotation(b.collider,q),C.transformQuat(A.AXIS_MY,q,f),u[0]=f[0],u[1]=f[1],u[2]=0,C.normalize(u,u),t=C.dot(u,m),r=a/(Math.abs(Math.acos(t))/Math.PI)*b.rot_speed*
b.OB,n.rotationTo(u,m,k),n.rotationTo(A.AXIS_MY,u,q),1<=Math.abs(t)?n.copy(q,k):(n.multiply(k,q,k),n.slerp(q,k,Math.min(r,1),k)),m=a,b.type!=p&&(m=Math.max(m,1/60),q=B,u=ba,n.setAxisAngle(A.AXIS_X,-Math.asin(-f[2]),u),n.setAxisAngle(A.AXIS_X,-Math.atan(b.Ok/(b.speed*m)),q),n.slerp(u,q,m,q),n.multiply(k,q,k)),R.set_rotation_v(e,k),f=J,e=W,A.quat_to_dir(k,A.AXIS_MY,f),C.scale(f,b.speed*a,e),C.add(e,c,e),e[2]=b.type!=P?(l[2]-c[2])*a*.1+c[2]:l[2],R.set_translation_v(b.collider,e);else if(b.type==P)r.move?
v&&-1!=r.move.indexOf(v)&&y.is_play(u)?b.state=20:(b.state=10,b.Nl=!0):(b.state=10,b.Nl=!0);else if(b.type==da||b.type==p)b.Nl=!0;if(g(b)&&(a=b.rig,!y.is_play(a))){c=null;switch(b.state){case 10:b=b.actions;c=b.idle?A.random_from_array(b.idle):null;break;case 20:c=y.get_current_anim_name(b.rig),l=k=b.actions,l.move_blends&&-1==l.move_blends.indexOf(c)&&l.move&&-1!=l.move.indexOf(c)&&.33<Math.random()?(b=b.actions,b=b.move_blends[b.move.indexOf(c)]):(l=b.actions,l.move&&(-1!=l.move.indexOf(c)||!l.move_blends&&
!l.move_start||!l.move_start&&!c||l.move_blends&&-1!=l.move_blends.indexOf(c)||l.move_start&&-1!=l.move_start.indexOf(c))?(b=b.actions,b.move_blends?(k=b.move_blends.indexOf(c),-1!=k?(c=k+1,c=c<b.move.length?c:0,b=b.move[c]):b=-1!=b.move.indexOf(c)?c:A.random_from_array(b.move)):b=A.random_from_array(b.move)):(b=b.actions,b=b.move_start&&-1==b.move_start.indexOf(c)&&b.move&&-1==b.move.indexOf(c)?A.random_from_array(k.move_start):null)),c=b}c&&(y.apply(a,c),y.set_behavior(a,y.AB_FINISH_RESET),y.set_frame(a,
0),y.play(a))}}}function k(a,b,c,e){if(e)if(1==c)switch(e.type){case p:a:{for(c=0;3>c;c++){var d=D.get_sensor_payload(a,b,c).hit_fract;if(d){b=d;break a}}b=void 0}b=100*b;e.Ok=b<e.min_height?10:b>e.max_height?-10:0;break;case P:a=D.get_sensor_payload(a,b,0);e.pA=a.hit_pos[2];break;case da:a=D.get_sensor_payload(a,b,0),"CLOSE_GROUND"==b?(e.Ok=100*a.hit_fract-1,e.Ok=.1>e.Ok?.05:0):"CLOSE_WATER"==b&&(e.mq=100*a.hit_fract,e.mq=e.mq<e.dH?-.02:e.mq>e.aH?.02:0)}else e.Ok=0}function c(){for(var a=0;a<ca.length;a++){var c=
ca[a];l(c);b(c);y.get_current_anim_name(c.rig)&&y.play(c.rig)}}function l(a){var b=C.create(),c=a.collider;switch(a.type){case p:var e=D.create_ray_sensor(c,b,[0,0,-100],"TERRAIN",!0,!0),f=D.create_ray_sensor(c,b,[0,0,-100],"STONE",!0,!0);b=D.create_ray_sensor(c,b,[0,0,-100],"WATER",!0,!0);e=[e,f,b];D.create_sensor_manifold(c,"CLOSE_GROUND",D.CT_CONTINUOUS,e,function(a){return a[0]||a[1]||a[2]},k,a);break;case P:e=D.create_ray_sensor(c,[0,0,1],[0,0,-99],"TERRAIN",!0,!0);e=[e];D.create_sensor_manifold(c,
"CLOSE_GROUND",D.CT_CONTINUOUS,e,null,k,a);break;case da:e=D.create_ray_sensor(c,[0,0,1],[0,0,-99],"TERRAIN",!0,!0),b=D.create_ray_sensor(c,b,[0,0,100],"WATER",!0,!0),e=[e],D.create_sensor_manifold(c,"CLOSE_WATER",D.CT_CONTINUOUS,[b],null,k,a),D.create_sensor_manifold(c,"CLOSE_GROUND",D.CT_CONTINUOUS,e,null,k,a)}}function b(a){var b=a.collider;if(a.type==P){var c=D.create_collision_sensor(b,"CONSTRUCTION",!1);D.create_sensor_manifold(b,"CONSTRUCTION_COLL",D.CT_CONTINUOUS,[c],null,function(b,c,d){1==
d?(C.copy(a.dz,a.destination),a.OB=4):a.OB=1})}}function g(a){var b=a.rig;if(!y.is_play(b))return!0;b=y.get_current_anim_name(b);if(!b)return!0;var c=a.actions;switch(a.state){case 10:if(!c.idle)return!1;break;case 20:if(!c.move||-1!=c.move.indexOf(b)||c.move_start&&-1!=c.move_start.indexOf(b)||c.move_blends&&-1!=c.move_blends.indexOf(b))return!1;break;default:return!1}return!0}var y=Object(M.a)(f),D=Object(U.a)(f),u=Object(z.a)(f),F=Object(e.a)(f),R=Object(m.a)(f),O=Object(v.a)(f),K=Object(q.a)(f),
A=Object(r.a)(f),ca=[],L=new Float32Array(3),ha=new Float32Array(3),J=new Float32Array(3),W=new Float32Array(3),B=new Float32Array(4),ba=new Float32Array(4),I=new Float32Array(4),P=a.NT_WALKING=10,p=a.NT_FLYING=20,da=a.NT_SWIMMING=30;a.new_event_track=function(a){var b={obj:null,rig:null,collider:null,empty:null,type:P,state:10,actions:{},dz:new Float32Array(3),destination:new Float32Array(3),path:[],start:[],ended:[],ev:[],delay:[],random:!0,Nl:!0,pA:0,Ok:0,mq:0,OB:1,speed:1,rot_speed:.1,max_height:0,
min_height:0,aH:0,dH:0};if("object"!=typeof a.obj)K.error("Can't create event track. Wrong object.");else if("object"!=typeof a.rig)K.error("Can't create event track. Wrong rig object.");else if("object"==typeof a.collider&&O.has_physics(a.collider)){b.obj=a.obj;b.collider=a.collider;b.rig=a.rig;R.get_translation(a.collider,b.dz);"object"==typeof a.actions&&(b.actions=a.actions);"boolean"==typeof a.random&&(b.random=a.random);"number"==typeof a.type&&(b.type=a.type);"number"==typeof a.speed&&(b.speed=
a.speed);"number"==typeof a.rot_speed&&(b.rot_speed=a.rot_speed);"number"==typeof a.max_height&&(b.max_height=a.max_height);"number"==typeof a.min_height&&(b.min_height=a.min_height);if(!b.random){for(var c=0;c<a.path.length;c++)b.start[c]=-1,b.ended[c]=!1,b.ev[c]=!1;b.path=a.path;b.delay=a.delay}a=a.actions;c=y.get_current_anim_name(b.rig);for(var e in a)for(var f=a[e],g=0;g<f.length;g++)y.apply(b.rig,f[g]);c&&y.apply(b.rig,c);ca.push(b)}else K.error("Can't create event track. Wrong collider object.")};
a.enable_animation=function(){if(ca.length){c();var a=D.create_elapsed_sensor();D.create_sensor_manifold(ca[0].collider,"ELAPSED",D.CT_CONTINUOUS,[a],function(a){return a[0]},function(a,b,c){if(1==c)for(a=D.get_sensor_value(a,b,0),b=0;b<ca.length;b++){c=ca[b];var d=a;if(u.is_visible(c.obj))if(c.random)w(d,c);else{for(var e=F.get_timeline(),f=0;f<c.path.length;f++)if(!c.ended[f]){c.ev[f]||(c.ev[f]=!0,c.destination[0]=c.path[f][0],c.destination[1]=c.path[f][1],c.destination[2]=c.path[f][2],c.start[f]=
e+c.delay[f]);if(e<c.start[f])break;w(d,c);c.ended[f]=c.Nl;break}a:{for(d=0;d<c.path.length;d++)if(0==c.ended[d]){d=!1;break a}d=!0}if(d)for(d=0;d<c.path.length;d++)c.ev[d]=!1,c.ended[d]=!1}}})}};a.disable_animation=function(){if(!(0>=ca.length))for(var a=0;a<ca.length;a++){var b=ca[a];D.check_sensor_manifolds(b.collider)&&D.remove_sensor_manifold(b.collider);y.is_play(b.rig)&&y.stop(b.rig)}}});w.a=f},function(D,w,f){D=f(0);var M=f(40);f=Object(D.a)("preloader",function(f,n){var w=Object(M.a)(f),
e,m,C,v,q,r,y,a,D=null;n.create_preloader=function(a){var c="#484848",f="#5276cf",b="rgba(150, 150, 150, 0.7)",g="#fff";for(k in a)switch(k){case "container_color":c=a.container_color;break;case "bar_color":f=a.bar_color;break;case "frame_color":b=a.frame_color;break;case "font_color":g=a.font_color}a=document.createElement("div");var k=a.cloneNode(!1);var n=a.cloneNode(!1),q=a.cloneNode(!1),r=w.get_container();n.appendChild(k);n.appendChild(q);a.appendChild(n);r.appendChild(a);a.style.cssText="background-color: "+
c+";width: 100%;height: 100%;position: absolute;top: 0;left: 0;";n.style.cssText="position: absolute;left: 50%;top: 50%;margin-left: -150px;margin-top: -30px;width: 300px;height: 28px;box-shadow: 0px 0px 10px 0px "+b+";border: 2px solid "+b+";";k.style.cssText="position: absolute;width: 0%;top: 0;left: 0;background-color: "+f+";height: 100%;";q.style.cssText="font-family: Arial, sans-serif;line-height: 28px;height: 100%;width: 100%;top: 0;left: 0;text-align: center;position: absolute;font-size: 16px;font-weight: bold;text-shadow: 0px 0px 6px "+
b+";color: "+g+";";e=k;m=q;C=a;v="DEFAULT"};n.create_simple_preloader=function(a){var c=null,f=null,b="#bf9221",g="#000";for(k in a)switch(k){case "canvas_container_id":c=a.canvas_container_id;break;case "background_container_id":f=a.background_container_id;break;case "bg_color":g=a.bg_color;break;case "bar_color":b=a.bar_color}a=document.createElement("div");var k=document.createElement("div");a.id="simple_preloader_container";var n=document.createElement("div"),u=document.createElement("div");f=
document.getElementById(f);D=document.getElementById(c);a.style.cssText="z-index: 4;background-color: "+g+";width: 100%;height: 100%;position: absolute;margin: 0;padding: 0;top: 0;left: 0;";k.style.cssText="position: absolute;left: 50%;top: 82%;width: 300px;height: 20px;margin-left: -150px;margin-top: -10px;border-style:solid;border-width:4px;border-color: #000;border-radius: 0px;";n.style.cssText="position: absolute;left: 0px;top: 1px;width: 0px;height: 18px;background-color: "+b+";border-radius: 0px;";
u.style.cssText="position: absolute;left: 50%;top: 50%;width: 100%;height: 100%;margin-left: -150px;margin-top: -10px;text-align: center;font-size: 17px;font-weight: bold;color: #000;font-family: Verdana;"+k.appendChild(n);k.appendChild(u);a.appendChild(k);document.body.appendChild(a);v="SIMPLE";C=a;e=n;m=u;q=f};n.create_rotation_preloader=function(a){var c=null,e=null,b="rgba(0,0,0,0)",f="",k="",n="rgba(0,0,0,0)";for(u in a)switch(u){case "canvas_container_id":c=a.canvas_container_id;break;case "background_container_id":e=
a.background_container_id;break;case "frame_bg_color":b=a.frame_bg_color;break;case "bg_color":n=a.bg_color;break;case "frame_class":f=a.frame_class;break;case "anim_elem_class":k=a.anim_elem_class}a=document.createElement("div");var u=document.createElement("div");var w=document.createElement("div"),y=document.createElement("div");e=document.getElementById(e);D=document.getElementById(c);a.style.cssText="z-index: 4;background-color: "+n+";width: 100%;height: 100%;position: absolute;margin: 0;padding: 0;top: 0;left: 0;";
u.style.cssText="position: absolute;left: 50%;top: 50%;width: 117px;height: 117px;margin-left: -58px;margin-top: -58px;background-color: "+b+";";w.style.cssText="position: absolute;left: 0px;top: 0px;width: 100%;height: 100%;background-position: center;background-repeat: no-repeat;";y.style.cssText="position: absolute;width: 100%;height: 100%;text-align: center;margin-top: 38px;font-size: 36px;color: #ffffff;font-family: Arial;font-weight: bold;";w.className=k;u.appendChild(w);u.className=f;u.appendChild(y);
a.appendChild(u);D.appendChild(a);v="ROTATION";C=a;r=w;m=y;q=e};n.create_advanced_preloader=function(f){var c=f.preloader_width;c/=c-f.img_width;var k=document.getElementById(f.preloader_bar_id),b=document.getElementById(f.fill_band_id),g=document.getElementById(f.preloader_caption_id),n=document.getElementById(f.preloader_container_id),r=document.getElementById(f.background_container_id);D=document.getElementById(f.canvas_container_id);v="ADVANCED";e=k;y=b;a=c;m=g;C=n;q=r};n.update_preloader=function(f){m.innerHTML=
f+"%";"SIMPLE"==v?e.style.width=f+"%":"ADVANCED"==v?(e.style.width=f/a+"%",y.style.width=100-f+"%"):"ROTATION"==v?r.style.transform="rotate("+f+"deg)":"DEFAULT"==v&&(e.style.width=f+"%");100==f&&(C.parentNode.removeChild(C),q&&q.parentNode.removeChild(q))}});w.a=f},function(D,w,f){D=f(0);var M=f(50),U=f(1);f=Object(D.a)("screenshooter",function(f,w){var e=Object(M.a)(f),m=Object(U.a)(f);w.shot=function(f,n){m.ef("shot","screen.shot");e.shot(f,n)}});w.a=f},function(D,w,f){D=f(0);var M=f(55);f=Object(D.a)("anchors",
function(f,n){var w=Object(M.a)(f);n.attach_move_cb=w.attach_move_cb;n.detach_move_cb=w.detach_move_cb;n.is_anchor=w.is_anchor;n.get_element_id=w.get_element_id;n.update=function(){w.update(!0)}});w.a=f},function(D,w,f){D=f(0);var M=f(56),U=f(9),n=f(13),z=f(1),e=f(6);f=Object(D.a)("armature",function(f,w){var m=Object(U.a)(f),q=Object(n.a)(f),r=Object(z.a)(f);w.get_bone_tsr=function(f,a,n){if(!m.is_armature(f))return null;if(!M.a(f,a))return r.error('There is no bone: "',a,'" in "',f.name,'".'),null;
n||(n=e.b());M.b(f,a,!1,!1,n);return n};w.get_bone_tsr_rel=function(f,a,n){if(!m.is_armature(f))return null;if(!M.a(f,a))return r.error('There is no bone: "',a,'" in "',f.name,'".'),null;n||(n=e.b());M.b(f,a,!1,!0,n);return n};w.set_bone_tsr=function(e,a,f){m.is_armature(e)&&(M.a(e,a)?(M.c(e,a,f,!1),q.Ea(e)):r.error('There is no bone: "',a,'" in "',e.name,'".'))};w.set_bone_tsr_rel=function(e,a,f){m.is_armature(e)&&(M.a(e,a)?(M.c(e,a,f,!0),q.Ea(e)):r.error('There is no bone: "',a,'" in "',e.name,
'".'))}});w.a=f},function(D,w,f){D=f(0);var M=f(44);f=Object(D.a)("assets",function(f,n){var w=Object(M.a)(f);n.AT_ARRAYBUFFER=w.AT_ARRAYBUFFER;n.AT_ARRAYBUFFER_ZIP=w.AT_ARRAYBUFFER_ZIP;n.AT_JSON=w.AT_JSON;n.AT_JSON_ZIP=w.AT_JSON_ZIP;n.AT_TEXT=w.AT_TEXT;n.AT_AUDIOBUFFER=w.AT_AUDIOBUFFER;n.AT_IMAGE_ELEMENT=w.AT_IMAGE_ELEMENT;n.AT_AUDIO_ELEMENT=w.AT_AUDIO_ELEMENT;n.AT_VIDEO_ELEMENT=w.AT_VIDEO_ELEMENT;n.AT_SEQ_VIDEO_ELEMENT=w.AT_SEQ_VIDEO_ELEMENT;n.enqueue=function(e,f,n,v){e.length&&w.enqueue(e,f,n,
v)}});w.a=f},function(D,w,f){D=f(0);var M=f(16),U=f(20),n=f(1),z=f(22),e=f(36);f=Object(D.a)("geometry",function(f,w){var m=Object(M.a)(f),q=Object(U.a)(f),r=Object(n.a)(f),y=Object(z.a)(f);w.extract_vertex_array=function(a,e,f){if(!q.ck(a))return r.error("Wrong object:",a.name),null;if(a=m.Zb(a,e,"MAIN")){if((e=a.$a)&&e.mc&&("a_normal"==f&&e.mc.a_tbn||e.mc[f]))return q.Tz(e,f);r.error("Attribute not found:"+f);return null}r.error("Wrong material:",e);return null};w.extract_index_array=function(a,
e){if(!q.ck(a))return r.error("Wrong object:",a.name),null;if(a=m.Zb(a,e,"MAIN")){if((e=a.$a)&&e.mc)return e.Ke;r.error("Buffer data not found");return null}r.error("Wrong material:",e);return null};w.update_vertex_array=function(a,e,f,c){if(q.ck(a))for(var k=["MAIN","SHADOW","COLOR_ID"],b=0;b<k.length;b++){var g=m.Zb(a,e,k[b]);g&&(g=g.$a)&&g.mc&&("a_normal"==f&&g.mc.a_tbn||g.mc[f])&&q.aJ(g,f,0,c)}else r.error("Wrong object:",a.name)};w.override_geometry=function(a,f,k,c,l){if(q.ck(a))if(k instanceof
Uint16Array||k instanceof Uint32Array)if(c instanceof Float32Array)for(var b=["MAIN","SHADOW","COLOR_ID"],g=0;g<b.length;g++){var n=m.Zb(a,f,b[g]);if(n){var v=n.$a;if(v){q.bJ(v,n.gi,k);var u={},w;for(w in v.mc){var z=v.mc[w];z=c.length/3*z.Tc;var C=q.Lo(w);u[C]||(u[C]=0);u[C]+=z}C=q.aR(u);v.Pc=C;u={};for(w in v.mc)switch(z=v.mc[w],C=q.Lo(w),u[C]||(u[C]=0),w){case "a_position":q.wt(v.Pc,"a_position",c,u[C]);z.offset=u[C];z.length=c.length;u[C]+=z.length;break;case "a_tbn":var D;l&&(D=q.kE(k,c,c));
var A=q.jE(k,c,D);z.length=c.length/3*z.Tc;for(var M=new Float32Array(z.length),L=0;L<M.length;L+=4)M[L]=1,M[L+3]=1;A=e.d(A,M);q.wt(v.Pc,"a_tbn",A,u[C]);z.offset=u[C];u[C]+=z.length;break;default:z.offset=u[C],z.length=c.length/3*z.Tc,A=new (q.bQ(C))(z.length),q.wt(v.Pc,w,A,u[C]),u[C]+=z.length}q.IC(v);y.bu(n);(n=m.Sg(a,n))&&n.$a&&(n.$a=v)}}}else r.error("Wrong positions_array type");else r.error("Wrong ibo_array type");else r.error("Wrong object:",a.name)};w.set_shape_key_value=function(a,e,f){q.check_shape_keys(a)?
q.uA(a,e)?q.cz(a,e,parseFloat(f)):r.error("Wrong key name:",e):r.error("Wrong object:",a.name)};w.check_shape_keys=function(a){return q.check_shape_keys(a)};w.get_shape_keys_names=function(a){return q.check_shape_keys(a)?q.get_shape_keys_names(a):(r.error("Wrong object:",a.name),[])};w.get_shape_key_value=function(a,e){return q.check_shape_keys(a)?q.uA(a,e)?q.get_shape_key_value(a,e):(r.error("Wrong key name:",e),0):(r.error("Wrong object:",a.name),0)};w.draw_line=function(a,e,f){f=f||!1;if(e instanceof
Float32Array){if(a=m.qv(a))q.draw_line(a,e,f),y.bu(a)}else r.error("Wrong positions type")}});w.a=f},function(D,w,f){D=f(0);var M=f(51),U=f(1);f=Object(D.a)("hud",function(f,w){var e=Object(M.a)(f),m=Object(U.a)(f);w.draw_mixer_strip=function(f,n,q,r,w,a,z){m.ef("draw_mixer_strip","screen.draw_mixer_strip");e.draw_mixer_strip(f,n,q,r,w,a,z)};w.plot_array=function(f,n,q,r,w,a,z){m.ef("plot_array","screen.plot_array");e.plot_array(f,n,q,r,w,a,z)}});w.a=f},function(D,w,f){D=f(0);var M=f(57),U=f(12),
n=f(9),z=f(1),e=f(8),m=f(10),C=f(13),v=f(6),q=f(2),r=f(3);f=Object(D.a)("lights",function(f,a){function w(a){for(var e=g.get_active(),f=c.tc(e,"LAMP",c.DATA_ID_ALL),k=0;k<f.length;k++){var l=f[k];if("SUN"==l.lc.type){var m=l;break}}if(!m)b.error("There is no sun on the scene");else if("number"==typeof a.hor_position&&"number"==typeof a.vert_position){f=q.T(180-a.hor_position);a=q.T(90-a.vert_position);k=m.ka;y.set_rotation_euler(m,[a,0,f]);f=new Float32Array(3);l=v.g(k.na,A);q._34(l,q.f,f);k=v.j(k.na,
K);k=r.length(k);r.copy(f,D);r.scale(D,k,D);y.set_translation(m,D);y.Ea(m);f=m.lc;if(f.vF){k=e.world.horizon_color;l=e.world.zenith_color;a=Math.cos(Math.abs(a));var n=Math.max(a,.1)*e.world.light_settings.environment_energy;M.d(f,Math.max(Math.min(3*a,1),0)*f.kF);g.set_environment_colors(e,n,k,l)}g.$p(m,e)}}function k(a){if(l.is_lamp(a))return a.lc.type;b.error("get_light_type(): Wrong object");return""}var c=Object(U.a)(f),l=Object(n.a)(f),b=Object(z.a)(f),g=Object(m.a)(f),y=Object(C.a)(f),D=new Float32Array(3),
u,F,R,O=60,K=r.create(),A=e.create();a.get_lamps=function(a){var b=g.get_active();b=c.tc(b,"LAMP",c.DATA_ID_ALL);if(!a)return b;for(var e=[],f=0;f<b.length;f++){var k=b[f];k.lc.type===a&&e.push(k)}return e};a.get_sun_params=function(){var a=g.get_active();a=c.tc(a,"LAMP",c.DATA_ID_ALL);for(var b=null,e=0;e<a.length;e++){var f=a[e];if("SUN"==f.lc.type){b=f;break}}return b?(b=b.lc.direction,a=q._39(Math.atan2(-b[1],b[0]))+90,180<a&&(a-=360),b=q._39(Math.atan2(b[2],Math.sqrt(b[0]*b[0]+b[1]*b[1]))),e=
{},e.hor_position=a,e.vert_position=b,e):null};a.set_sun_params=w;a.set_day_time=function(a){var e=g.get_active();e=c.tc(e,"LAMP",c.DATA_ID_ALL);for(var f=0;f<e.length;f++){var k=e[f];if("SUN"==k.lc.type){var l=k;break}}l?(l=-Math.cos(a/12*Math.PI)*O,e={},e.hor_position=12>a?15*a:15*(a-24),e.vert_position=l,w(e)):b.error("There is no sun on the scene")};a.set_date=function(a){u=a.getFullYear();F=a.getMonth();R=a.getDate();u?1582==u&&9==F&&4<R&&15>R&&b.error("The dates 5 through 14 October, 1582, do not exist in the Gregorian system!"):
b.error("There is no year 0 in the Julian system!")};a.set_max_sun_angle=function(a){O=Math.min(Math.max(a,0),90)};a.get_light_params=function(a){if(l.is_lamp(a))var c=a.lc;else return b.error("get_light_params(): Wrong object"),null;if(a=k(a))switch(a){case "SPOT":var e={light_type:a,light_color:new Float32Array(3),light_energy:c.Qg,light_spot_blend:c.at,light_spot_size:c.En,light_distance:c.distance};e.light_color.set(c.color);break;case "POINT":e={light_type:a,light_color:new Float32Array(3),light_energy:c.Qg,
light_distance:c.distance};e.light_color.set(c.color);break;default:e={light_type:a,light_color:new Float32Array(3),light_energy:c.Qg},e.light_color.set(c.color)}return e?e:null};a.get_light_type=k;a.set_light_params=function(a,c){if(l.is_lamp(a)){var e=a.lc,f=g.get_active(),k=!1;"number"==typeof c.light_energy&&M.d(e,c.light_energy);"object"==typeof c.light_color&&M.b(e,c.light_color);"number"==typeof c.light_spot_blend&&(M.e(e,c.light_spot_blend),k=!0);"number"==typeof c.light_spot_size&&(M.f(e,
c.light_spot_size),k=!0);"number"==typeof c.light_distance&&(M.c(e,c.light_distance),k=!0);g.$p(a,f);k&&g.JU(f)}else b.error("set_light_params(): Wrong object")};a.get_light_energy=function(a){return l.is_lamp(a)?a.lc.Qg:(b.error("get_light_energy(): Wrong object"),0)};a.set_light_energy=function(a,c){if(l.is_lamp(a)){var e=g.get_active();M.d(a.lc,c);g.$p(a,e)}else b.error("set_light_energy(): Wrong object")};a.get_light_color=function(a,c){if(!l.is_lamp(a))return b.error("get_light_color(): Wrong object"),
null;c=c||new Float32Array(3);c.set(a.lc.color);return c};a.set_light_color=function(a,c){if(l.is_lamp(a)){var e=g.get_active();M.b(a.lc,c);g.$p(a,e)}else b.error("set_light_color(): Wrong object")}});w.a=f},function(D,w,f){D=f(0);var M=f(60);f=Object(D.a)("logic_nodes",function(f,n){var w=Object(M.a)(f);n.append_custom_callback=function(e,f){w.hM(e,f)};n.remove_custom_callback=function(e){w.RS(e)};n.run_entrypoint=function(e,f){w.dT(e,f)}});w.a=f},function(D,w,f){D=f(0);var M=f(16),U=f(4),n=f(20),
z=f(12),e=f(9),m=f(1),C=f(34),v=f(2),q=f(10);f=Object(D.a)("material",function(f,w){var a=Object(M.a)(f),r=Object(U.a)(f),k=Object(n.a)(f),c=Object(z.a)(f),l=Object(e.a)(f),b=Object(m.a)(f),g=Object(C.a)(f),y=Object(q.a)(f),D=r.wa;w.inherit_material=function(a,e,f,g){if(k.ck(f)&&k.ck(a)){var l=a.Kf.Fl.indexOf(e);if(-1==l)b.error('inherit_material(): material "'+e+'" not found on the object "'+a.oe+'".');else{var m=f.Kf.Fl.indexOf(g);-1==m?b.error('inherit_material(): material "'+g+'" not found on the object "'+
f.oe+'".'):(0==f.Vk.data.submeshes[m].shade_tangs.length&&a.Sc[l].Se&&b.warn('The target material "'+g+'" was exported without tangent shading data. However, the "'+e+'" material requires it. It\'s needed to enable the "Tangent Shading" option on the target material for correct rendering.'),c.inherit_material(a,e,f,g))}}else b.error('inherit_material(): both objects "'+a.oe+'" and "'+f.oe+'" must have the "Dynamic Geometry & Materials" flag enabled.')};w.get_materials_names=function(a){var c=[];if(!l.kc(a))return b.error('get_materials_names(): Object "'+
a.name+'" is not a dynamic MESH.'),c;a=a.Aa;for(var e=0;e<a.length;e++)for(var f=a[e].Ia,g=0;g<f.length;g++){var k=f[g];if("MAIN"==k.type)for(var m=0;m<k.Hc.length;m++)-1==c.indexOf(k.Hc[m])&&c.push(k.Hc[m])}return c};w.set_diffuse_color=function(c,e,f){if(l.kc(c)){var g=a.Zb(c,e,"MAIN");g?g.bc?b.error("set_diffuse_color(): Not allowed for node materials! Use set_nodemat_value/set_nodemat_rgb methods instead."):(g.Qc.set(f),(c=a.Sg(c,e,"MAIN"))&&c.Qc.set(f)):b.error('set_diffuse_color(): Material "'+
e+'" wasn\'t found on the object "'+c.name+'".')}else b.error('set_diffuse_color(): Object "'+c.name+'" is not a dynamic MESH.')};w.get_diffuse_color=function(c,e){var f=new Float32Array(4);if(!l.kc(c))return b.error('get_diffuse_color(): Object "'+c.name+'" is not a dynamic MESH.'),f;var g=a.Zb(c,e,"MAIN");if(!g)return b.error('get_diffuse_color(): Material "'+e+'" wasn\'t found on the object "'+c.name+'".'),f;if(g.bc)return b.error("get_diffuse_color(): Not allowed for node materials! Use get_nodemat_value/get_nodemat_rgb methods instead."),
f;f.set(g.Qc);return f};w.set_diffuse_intensity=function(c,e,f){if(l.kc(c)){var g=a.Zb(c,e,"MAIN");if(g)if(g.bc)b.error("set_diffuse_intensity(): Not allowed for node materials! Use set_nodemat_value/set_nodemat_rgb methods instead.");else{if(g.Je=f,c=a.Sg(c,e,"MAIN"))c.Je=f}else b.error('set_diffuse_intensity(): Material "'+e+'" wasn\'t found on the object "'+c.name+'".')}else b.error('set_diffuse_intensity(): Object "'+c.name+'" is not a dynamic MESH.')};w.get_diffuse_intensity=function(c,e){if(!l.kc(c))return b.error('get_diffuse_intensity(): Object "'+
c.name+'" is not a dynamic MESH.'),0;var f=a.Zb(c,e,"MAIN");return f?f.bc?(b.error("get_diffuse_intensity(): Not allowed for node materials! Use get_nodemat_value/get_nodemat_rgb methods instead."),0):f.Je:(b.error('get_diffuse_intensity(): Material "'+e+'" wasn\'t found on the object "'+c.name+'".'),0)};w.set_specular_color=function(c,e,f){if(l.kc(c)){var g=a.Zb(c,e,"MAIN");g?g.bc?b.error("set_specular_color(): Not allowed for node materials! Use set_nodemat_value/set_nodemat_rgb methods instead."):
(g.Re.set(f),(c=a.Sg(c,e,"MAIN"))&&c.Re.set(f)):b.error('set_specular_color(): Material "'+e+'" wasn\'t found on the object "'+c.name+'".')}else b.error('set_specular_color(): Object "'+c.name+'" is not a dynamic MESH.')};w.get_specular_color=function(c,e){var f=new Float32Array(3);if(!l.kc(c))return b.error('get_specular_color(): Object "'+c.name+'" is not a dynamic MESH.'),f;var g=a.Zb(c,e,"MAIN");if(!g)return b.error('get_specular_color(): Material "'+e+'" wasn\'t found on the object "'+c.name+
'".'),f;if(g.bc)return b.error("get_specular_color(): Not allowed for node materials! Use get_nodemat_value/get_nodemat_rgb methods instead."),f;f.set(g.Re);return f};w.set_specular_color_factor=function(c,e,f){if(l.kc(c)){var g=a.Zb(c,e,"MAIN");if(g)if(g.bc)b.error("set_specular_color_factor(): Not allowed for node materials! Use set_nodemat_value/set_nodemat_rgb methods instead.");else{if(g.Dk=f,c=a.Sg(c,e,"MAIN"))c.Dk=f}else b.error('set_specular_color_factor(): Material "'+e+'" wasn\'t found on the object "'+
c.name+'".')}else b.error('set_specular_color_factor(): Object "'+c.name+'" is not a dynamic MESH.')};w.get_specular_color_factor=function(c,e){if(!l.kc(c))return b.error('get_specular_color_factor(): Object "'+c.name+'" is not a dynamic MESH.'),0;var f=a.Zb(c,e,"MAIN");return f?f.bc?(b.error("get_specular_color_factor(): Not allowed for node materials! Use get_nodemat_value/get_nodemat_rgb methods instead."),0):f.Dk:(b.error('get_specular_color_factor(): Material "'+e+'" wasn\'t found on the object "'+
c.name+'".'),0)};w.set_specular_intensity=function(c,e,f){if(l.kc(c)){var g=a.Zb(c,e,"MAIN");g?g.bc?b.error("set_specular_intensity(): Not allowed for node materials! Use set_nodemat_value/set_nodemat_rgb methods instead."):(g.tf[0]=f,(c=a.Sg(c,e,"MAIN"))&&(c.tf[0]=f)):b.error('set_specular_intensity(): Material "'+e+'" wasn\'t found on the object "'+c.name+'".')}else b.error('set_specular_intensity(): Object "'+c.name+'" is not a dynamic MESH.')};w.get_specular_intensity=function(c,e){if(!l.kc(c))return b.error('get_specular_intensity(): Object "'+
c.name+'" is not a dynamic MESH.'),0;var f=a.Zb(c,e,"MAIN");return f?f.bc?(b.error("get_specular_intensity(): Not allowed for node materials! Use get_nodemat_value/get_nodemat_rgb methods instead."),0):f.tf[0]:(b.error('get_specular_intensity(): Material "'+e+'" wasn\'t found on the object "'+c.name+'".'),0)};w.check_specular_intensity=function(c,e){b.Ma("check_specular_intensity() is deprecated, not needed anymore");c=a.Zb(c,e,"MAIN");return!(!c||!c.tf[0])};w.set_specular_hardness=function(c,e,f){if(l.kc(c)){var g=
a.Zb(c,e,"MAIN");g?g.bc?b.error("set_specular_hardness(): Not allowed for node materials! Use set_nodemat_value/set_nodemat_rgb methods instead."):(g.tf[1]=f,(c=a.Sg(c,e,"MAIN"))&&(c.tf[1]=f)):b.error('set_specular_hardness(): Material "'+e+'" wasn\'t found on the object "'+c.name+'".')}else b.error('set_specular_hardness(): Object "'+c.name+'" is not a dynamic MESH.')};w.get_specular_hardness=function(c,e){if(!l.kc(c))return b.error('get_specular_hardness(): Object "'+c.name+'" is not a dynamic MESH.'),
0;var f=a.Zb(c,e,"MAIN");return f?f.bc?(b.error("get_specular_hardness(): Not allowed for node materials! Use get_nodemat_value/get_nodemat_rgb methods instead."),0):f.tf[1]:(b.error('get_specular_hardness(): Material "'+e+'" wasn\'t found on the object "'+c.name+'".'),0)};w.check_specular_hardness=function(c,e){b.Ma("check_specular_hardness() is deprecated, not needed anymore");c=a.Zb(c,e,"MAIN");return!(!c||!c.tf[1])};w.set_emit_factor=function(c,e,f){if(l.kc(c)){var g=a.Zb(c,e,"MAIN");if(g)if(g.bc)b.error("set_emit_factor(): Not allowed for node materials! Use set_nodemat_value/set_nodemat_rgb methods instead.");
else{if(g.ie=f,c=a.Sg(c,e,"MAIN"))c.ie=f}else b.error('set_emit_factor(): Material "'+e+'" wasn\'t found on the object "'+c.name+'".')}else b.error('set_emit_factor(): Object "'+c.name+'" is not a dynamic MESH.')};w.get_emit_factor=function(c,e){if(!l.kc(c))return b.error('get_emit_factor(): Object "'+c.name+'" is not a dynamic MESH.'),0;var f=a.Zb(c,e,"MAIN");return f?f.bc?(b.error("get_emit_factor(): Not allowed for node materials! Use get_nodemat_value/get_nodemat_rgb methods instead."),0):f.ie:
(b.error('get_emit_factor(): Material "'+e+'" wasn\'t found on the object "'+c.name+'".'),0)};w.set_ambient_factor=function(c,e,f){if(l.kc(c)){var g=a.Zb(c,e,"MAIN");if(g)if(g.bc)b.error("set_ambient_factor(): Not allowed for node materials! Use set_nodemat_value/set_nodemat_rgb methods instead.");else{if(g.fe=f,c=a.Sg(c,e,"MAIN"))c.fe=f}else b.error('set_ambient_factor(): Material "'+e+'" wasn\'t found on the object "'+c.name+'".')}else b.error('set_ambient_factor(): Object "'+c.name+'" is not a dynamic MESH.')};
w.get_ambient_factor=function(c,e){if(!l.kc(c))return b.error('get_ambient_factor(): Object "'+c.name+'" is not a dynamic MESH.'),0;var f=a.Zb(c,e,"MAIN");return f?f.bc?(b.error("get_ambient_factor(): Not allowed for node materials! Use get_nodemat_value/get_nodemat_rgb methods instead."),0):f.fe:(b.error('get_ambient_factor(): Material "'+e+'" wasn\'t found on the object "'+c.name+'".'),0)};w.set_diffuse_color_factor=function(c,e,f){if(l.kc(c)){var g=a.Zb(c,e,"MAIN");if(g)if(g.bc)b.error("set_diffuse_color_factor(): Not allowed for node materials! Use set_nodemat_value/set_nodemat_rgb methods instead.");
else{if(g.Wi=f,c=a.Sg(c,e,"MAIN"))c.Wi=f}else b.error('set_diffuse_color_factor(): Material "'+e+'" wasn\'t found on the object "'+c.name+'".')}else b.error('set_diffuse_color_factor(): Object "'+c.name+'" is not a dynamic MESH.')};w.get_diffuse_color_factor=function(c,e){if(!l.kc(c))return b.error('get_diffuse_color_factor(): Object "'+c.name+'" is not a dynamic MESH.'),0;var f=a.Zb(c,e,"MAIN");return f?f.bc?(b.error("get_diffuse_color_factor(): Not allowed for node materials! Use get_nodemat_value/get_nodemat_rgb methods instead."),
0):f.Wi:(b.error('get_diffuse_color_factor(): Material "'+e+'" wasn\'t found on the object "'+c.name+'".'),0)};w.set_alpha_factor=function(c,e,f){if(l.kc(c)){var g=a.Zb(c,e,"MAIN");if(g)if(g.bc)b.error("set_alpha_factor(): Not allowed for node materials! Use set_nodemat_value/set_nodemat_rgb methods instead.");else{if(g.oh=f,c=a.Sg(c,e,"MAIN"))c.oh=f}else b.error('set_alpha_factor(): Material "'+e+'" wasn\'t found on the object "'+c.name+'".')}else b.error('set_alpha_factor(): Object "'+c.name+'" is not a dynamic MESH.')};
w.get_alpha_factor=function(c,e){if(!l.kc(c))return b.error('get_alpha_factor(): Object "'+c.name+'" is not a dynamic MESH.'),0;var f=a.Zb(c,e,"MAIN");return f?f.bc?(b.error("get_alpha_factor(): Not allowed for node materials! Use get_nodemat_value/get_nodemat_rgb methods instead."),0):f.oh:(b.error('get_alpha_factor(): Material "'+e+'" wasn\'t found on the object "'+c.name+'".'),0)};w.get_material_extended_params=function(c,e){if(!l.kc(c))return b.error('get_material_extended_params(): Object "'+
c.name+'" is not a dynamic MESH.'),null;var f=a.Zb(c,e,"MAIN");if(!f)return b.error('get_material_extended_params(): Material "'+e+'" wasn\'t found on the object "'+c.name+'".'),null;if(f.bc)return b.error("get_material_extended_params(): Not allowed for node materials! Use get_nodemat_value/get_nodemat_rgb methods instead."),null;c={};c.reflect_factor=f.reflect_factor;c.fresnel=f.ji[0];c.fresnel_factor=5*(1-f.ji[1]);c.parallax_scale=f.parallax_scale;c.parallax_steps=parseFloat(a.Td(f,"PARALLAX_STEPS")[1]);
return c};w.set_material_extended_params=function(c,e,f){if(l.kc(c)){var k=a.Zb(c,e,"MAIN");if(k)if(k.bc)b.error("set_material_extended_params(): Not allowed for node materials! Use set_nodemat_value/set_nodemat_rgb methods instead.");else{var m=[k];(k=a.Sg(c,e,"MAIN"))&&m.push(k);for(c=0;c<m.length;c++)k=m[c],"number"==typeof f.reflect_factor&&(k.reflect_factor=f.reflect_factor),"number"==typeof f.fresnel&&(k.ji[0]=f.fresnel),"number"==typeof f.fresnel_factor&&(k.ji[1]=1-f.fresnel_factor/5),"number"==
typeof f.parallax_scale&&(k.parallax_scale=f.parallax_scale),"number"==typeof f.parallax_steps&&(a.dc(k,"PARALLAX_STEPS",g.Ga(f.parallax_steps)),a.md(k),y.JH(k))}else b.error('set_material_extended_params(): Material "'+e+'" wasn\'t found on the object "'+c.name+'".')}else b.error('set_material_extended_params(): Object "'+c.name+'" is not a dynamic MESH.')};w.get_water_material_params=function(c,e){if(!l.kc(c))return b.error('get_water_material_params(): Object "'+c.name+'" is not a dynamic MESH.'),
null;var f=a.Zb(c,e,"MAIN");if(!f||!f.Bg)return b.error('get_water_material_params(): Material "'+e+'" wasn\'t found on the object "'+c.name+"\" or it's not a water material."),null;if(f.bc)return b.error("get_water_material_params(): Not allowed for node materials! Use get_nodemat_value/get_nodemat_rgb methods instead."),null;c={};c.shore_smoothing=D.shore_smoothing&&f.Un&&!!parseFloat(a.Td(f,"SHORE_SMOOTHING")[1]);c.absorb_factor=parseFloat(a.Td(f,"ABSORB")[1]);c.foam_factor=f.foam_factor;c.shallow_water_col=
new Float32Array(3);c.shore_water_col=new Float32Array(3);c.shallow_water_col_fac=0;c.shore_water_col_fac=0;D.Cp&&(c.shallow_water_col.set(f.shallow_water_col),c.shore_water_col.set(f.shore_water_col),c.shallow_water_col_fac=f.shallow_water_col_fac,c.shore_water_col_fac=f.shore_water_col_fac);c.norm_uv_velocity=f.lm;c.water_dynamic=D.water_dynamic&&f.water_dynamic&&!!parseFloat(a.Td(f,"DYNAMIC")[1]);c.sss_strength=parseFloat(a.Td(f,"SSS_STRENGTH")[1]);c.sss_width=parseFloat(a.Td(f,"SSS_WIDTH")[1]);
c.waves_height=parseFloat(a.Td(f,"WAVES_HEIGHT")[1]);c.waves_length=parseFloat(a.Td(f,"WAVES_LENGTH")[1]);c.dst_noise_scale0=parseFloat(a.Td(f,"DST_NOISE_SCALE_0")[1]);c.dst_noise_scale1=parseFloat(a.Td(f,"DST_NOISE_SCALE_1")[1]);c.dst_noise_freq0=parseFloat(a.Td(f,"DST_NOISE_FREQ_0")[1]);c.dst_noise_freq1=parseFloat(a.Td(f,"DST_NOISE_FREQ_1")[1]);c.dir_min_shore_fac=parseFloat(a.Td(f,"DIR_MIN_SHR_FAC")[1]);c.dir_freq=parseFloat(a.Td(f,"DIR_FREQ")[1]);c.dir_noise_scale=parseFloat(a.Td(f,"DIR_NOISE_SCALE")[1]);
c.dir_noise_freq=parseFloat(a.Td(f,"DIR_NOISE_FREQ")[1]);c.dir_min_noise_fac=parseFloat(a.Td(f,"DIR_MIN_NOISE_FAC")[1]);c.dst_min_fac=parseFloat(a.Td(f,"DST_MIN_FAC")[1]);c.waves_hor_fac=parseFloat(a.Td(f,"WAVES_HOR_FAC")[1]);return c};w.set_water_material_params=function(c,e,f){if(l.kc(c)){var k=a.Zb(c,e,"MAIN");if(k&&k.Bg)if(k.bc)b.error("set_water_material_params(): Not allowed for node materials! Use set_nodemat_value/set_nodemat_rgb methods instead.");else{var m=[k];(k=a.Sg(c,e,"MAIN"))&&m.push(k);
for(c=0;c<m.length;c++)k=m[c],"boolean"==typeof f.shore_smoothing&&(D.shore_smoothing&&k.Un&&f.shore_smoothing?a.dc(k,"SHORE_SMOOTHING",1):a.dc(k,"SHORE_SMOOTHING",0)),"number"==typeof f.absorb_factor&&(e=g.Ga(parseFloat(f.absorb_factor)),a.dc(k,"ABSORB",e)),"number"==typeof f.foam_factor&&D.Ho&&(k.foam_factor=f.foam_factor),D.Cp&&("object"==typeof f.shallow_water_col&&k.shallow_water_col.set(f.shallow_water_col),"number"==typeof f.shallow_water_col_fac&&(k.shallow_water_col_fac=f.shallow_water_col_fac),
"object"==typeof f.shore_water_col&&k.shore_water_col.set(f.shore_water_col),"number"==typeof f.shore_water_col_fac&&(k.shore_water_col_fac=f.shore_water_col_fac)),"number"==typeof f.norm_uv_velocity&&(k.lm=f.norm_uv_velocity),D.water_dynamic&&k.water_dynamic&&("boolean"==typeof f.water_dynamic&&(f.water_dynamic?a.dc(k,"DYNAMIC",1):a.dc(k,"DYNAMIC",0)),"number"==typeof f.sss_strength&&(e=g.Ga(parseFloat(f.sss_strength)),a.dc(k,"SSS_STRENGTH",e)),"number"==typeof f.sss_width&&(e=g.Ga(parseFloat(f.sss_width)),
a.dc(k,"SSS_WIDTH",e)),"number"==typeof f.waves_height&&(e=g.Ga(parseFloat(f.waves_height)),a.dc(k,"WAVES_HEIGHT",e)),"number"==typeof f.waves_length&&(e=g.Ga(parseFloat(f.waves_length)),a.dc(k,"WAVES_LENGTH",e)),"number"==typeof f.dst_noise_scale0&&(e=g.Ga(parseFloat(f.dst_noise_scale0)),a.dc(k,"DST_NOISE_SCALE_0",e)),"number"==typeof f.dst_noise_scale1&&(e=g.Ga(parseFloat(f.dst_noise_scale1)),a.dc(k,"DST_NOISE_SCALE_1",e)),"number"==typeof f.dst_noise_freq0&&(e=g.Ga(parseFloat(f.dst_noise_freq0)),
a.dc(k,"DST_NOISE_FREQ_0",e)),"number"==typeof f.dst_noise_freq1&&(e=g.Ga(parseFloat(f.dst_noise_freq1)),a.dc(k,"DST_NOISE_FREQ_1",e)),"number"==typeof f.dir_min_shore_fac&&(e=g.Ga(parseFloat(f.dir_min_shore_fac)),a.dc(k,"DIR_MIN_SHR_FAC",e)),"number"==typeof f.dir_freq&&(e=g.Ga(parseFloat(f.dir_freq)),a.dc(k,"DIR_FREQ",e)),"number"==typeof f.dir_noise_scale&&(e=g.Ga(parseFloat(f.dir_noise_scale)),a.dc(k,"DIR_NOISE_SCALE",e)),"number"==typeof f.dir_noise_freq&&(e=g.Ga(parseFloat(f.dir_noise_freq)),
a.dc(k,"DIR_NOISE_FREQ",e)),"number"==typeof f.dir_min_noise_fac&&(e=g.Ga(parseFloat(f.dir_min_noise_fac)),a.dc(k,"DIR_MIN_NOISE_FAC",e)),"number"==typeof f.dst_min_fac&&(e=g.Ga(parseFloat(f.dst_min_fac)),a.dc(k,"DST_MIN_FAC",e)),"number"==typeof f.waves_hor_fac&&(e=g.Ga(parseFloat(f.waves_hor_fac)),a.dc(k,"WAVES_HOR_FAC",e))),a.md(k),y.JH(k)}else b.error('set_water_material_params(): Material "'+e+'" wasn\'t found on the object "'+c.name+"\" or it's not a water material.")}else b.error('set_water_material_params(): Object "'+
c.name+'" is not a dynamic MESH.')};w.set_line_params=function(c,e){l.is_line(c)?(c=a.qv(c))?(v._17(e.color)&&c.Qc.set(e.color),v._17(e.width)&&(c.ln=e.width)):b.error("set_line_params(): Couldn't set line parameters!"):b.error('set_line_params(): Object "'+c.name+'" is not a LINE object.')};w.get_line_params=function(c){if(!l.is_line(c))return b.error('get_line_params(): Object "'+c.name+'" is not a LINE object.'),null;c=a.qv(c);return c?{color:new Float32Array(c.Qc),width:c.ln}:(b.error("get_line_params(): Couldn't get line parameters!"),
null)};w.set_nodemat_value=function(e,f,g){var k=l.kc(e),m=l.is_world(e),n=m?c.zv(e):e.name;if(k||m){if(k){var q=f[0],r=1;k=a.wh(e,q,"MAIN")||a.wh(e,q,"PARTICLES");if(!k){b.error('set_nodemat_value(): Material "'+q+'" wasn\'t found on the object "'+n+'".');return}}else if(m&&(k=y.get_active(),q="",r=0,k=a.Nr(e,k),!k)){b.error("set_nodemat_value(): Sky node material wasn't found on the world object \""+n+'".');return}c.set_nodemat_value(e,q,a.hs(f,r),g)||b.error('set_nodemat_value(): Value node "'+
f[f.length-1]+'" was not found in the object "'+n+'".')}else b.error('set_nodemat_value(): Object "'+n+'" is not a dynamic MESH or WORLD.')};w.get_nodemat_value=function(e,f){var g=l.kc(e),k=l.is_world(e),m=k?c.zv(e):e.name;if(!g&&!k)return b.error('get_nodemat_value(): Object "'+m+'" is not a dynamic MESH or WORLD.'),0;if(g){var n=f[0],q=1;g=a.wh(e,n,"MAIN")||a.wh(e,n,"PARTICLES");if(!g)return b.error('get_nodemat_value(): Material "'+n+'" wasn\'t found on the object "'+m+'".'),0}else if(k&&(g=y.get_active(),
n="",q=0,g=a.Nr(e,g),!g))return b.error("get_nodemat_value(): Sky node material wasn't found on the world object \""+m+'".'),0;e=c.get_nodemat_value(e,n,a.hs(f,q));null===e&&b.error('get_nodemat_value(): Value node "'+f[f.length-1]+'" was not found in the object "'+m+'".');return e};w.set_nodemat_rgb=function(e,f,g,k,m){var n=l.kc(e),q=l.is_world(e),r=q?c.zv(e):e.name;if(n||q){if(n){var u=f[0],v=1;n=a.wh(e,u,"MAIN")||a.wh(e,u,"PARTICLES");if(!n){b.error('set_nodemat_rgb(): Material "'+u+'" wasn\'t found on the object "'+
r+'".');return}}else if(q&&(n=y.get_active(),u="",v=0,n=a.Nr(e,n),!n)){b.error("set_nodemat_rgb(): Sky node material wasn't found on the world object \""+r+'".');return}c.set_nodemat_rgb(e,u,a.hs(f,v),g,k,m)||b.error('set_nodemat_rgb(): RGB node "'+f[f.length-1]+'" was not found in the object "'+r+'".')}else b.error('set_nodemat_rgb(): Object "'+r+'" is not a dynamic MESH or WORLD.')};w.get_nodemat_rgb=function(e,f,g){var k=l.kc(e),m=l.is_world(e),n=m?c.zv(e):e.name;if(!k&&!m)return b.error('get_nodemat_rgb(): Object "'+
n+'" is not a dynamic MESH or WORLD.'),null;if(k){var q=f[0],r=1;k=a.wh(e,q,"MAIN")||a.wh(e,q,"PARTICLES");if(!k)return b.error('get_nodemat_rgb(): Material "'+q+'" wasn\'t found on the object "'+n+'".'),null}else if(m&&(k=y.get_active(),q="",r=0,k=a.Nr(e,k),!k))return b.error("get_nodemat_rgb(): Sky node material wasn't found on the world object \""+n+'".'),null;g||(g=new Float32Array(3));(g=c.get_nodemat_rgb(e,q,a.hs(f,r),g))||b.error('get_nodemat_rgb(): RGB node "'+f[f.length-1]+'" was not found in the object "'+
n+'".');return g};w.is_node_material=function(c,e){if(!l.kc(c))return b.error('is_node_material(): Object "'+c.name+'" is not a dynamic MESH.'),!1;var f=a.Zb(c,e,"MAIN");return f?f.bc:(b.error('is_node_material(): Material "'+e+'" wasn\'t found on the object "'+c.name+'".'),!1)};w.is_water_material=function(c,e){if(!l.kc(c))return b.error('is_water_material(): Object "'+c.name+'" is not a dynamic MESH.'),!1;var f=a.Zb(c,e,"MAIN");return f?f.Bg&&!f.bc:(b.error('is_water_material(): Material "'+e+'" wasn\'t found on the object "'+
c.name+'".'),!1)}});w.a=f},function(D,w,f){D=f(0);var M=f(3),U=f(2),n=f(42);f=Object(D.a)("math",function(f,e){var m=new Float32Array(3);e.create_pline_from_points=function(e,f){var q=new Float32Array(6);n.R(q,e);M.subtract(f,e,m);n.Q(q,m);return q};e.create_pline_from_point_vec=function(e,f){var m=new Float32Array(6);n.R(m,e);n.Q(m,f);return m};e.create_pline=function(){return new Float32Array(6)};e.get_pline_directional_vec=n.M;e.get_pline_initial_point=n.N;e.set_pline_initial_point=n.R;e.set_pline_directional_vec=
n.Q;e.line_plane_intersect=U._22;e.calc_pline_point=n.f;e.point_plane_dist=n.P;e.linear_tween=n.O;e.ease_in_quad=n.x;e.ease_out_quad=n.H;e.ease_in_out_quad=n.t;e.ease_in_cubic=n.k;e.ease_out_cubic=n.E;e.ease_in_out_cubic=n.q;e.ease_in_quart=n.y;e.ease_out_quart=n.I;e.ease_in_out_quart=n.u;e.ease_in_quint=n.z;e.ease_out_quint=n.J;e.ease_in_out_quint=n.v;e.ease_in_sine=n.A;e.ease_out_sine=n.K;e.ease_in_out_sine=n.w;e.ease_in_expo=n.m;e.ease_out_expo=n.G;e.ease_in_out_expo=n.s;e.ease_in_circ=n.j;e.ease_out_circ=
n.D;e.ease_in_out_circ=n.p;e.ease_in_elastic=n.l;e.ease_out_elastic=n.F;e.ease_in_out_elastic=n.r;e.ease_in_back=n.h;e.ease_out_back=n.B;e.ease_in_out_back=n.n;e.ease_in_bounce=n.i;e.ease_out_bounce=n.C;e.ease_in_out_bounce=n.o});w.a=f},function(D,w,f){D=f(0);var M=f(52),U=f(18),n=f(1),z=f(2);f=Object(D.a)("nla",function(e,f){var m=Object(M.a)(e),v=Object(U.a)(e),q=Object(n.a)(e);f.set_frame=function(e){e=z.M(e,m.get_frame_start(),m.get_frame_end());m.check_logic_nodes()?q.error("The active scene is using the Logic Editor."):
m.set_frame(e,v.get_timeline())};f.get_frame=function(){return m.get_frame(v.get_timeline())};f.stop=function(){m.check_logic_nodes()&&q.warn("The active scene is using the Logic Editor. It may conflicts with your JS-code.");m.kC()};f.play=function(e){m.check_logic_nodes()&&q.warn("The active scene is using the Logic Editor. It may conflicts with your JS-code.");m.AH(e)};f.is_play=function(){return m.is_play()};f.get_frame_start=function(){return m.get_frame_start()};f.get_frame_end=function(){return m.get_frame_end()};
f.check_nla=function(){return m.check_nla()};f.check_logic_nodes=function(){return m.check_logic_nodes()};f.set_range=function(e,f){m.check_logic_nodes()?q.error("The active scene is using the Logic Editor."):(f=parseFloat(f)||m.get_frame_end(),e=parseFloat(e)||m.get_frame_end(),f=z.M(f,m.get_frame_start(),m.get_frame_end()),e=z.M(e,m.get_frame_start(),f),m.set_range(e,f))};f.reset_range=function(){m.check_logic_nodes()?q.error("The active scene is using the Logic Editor."):m.reset_range()};f.set_cyclic=
function(e){m.check_logic_nodes()?q.error("The active scene is using the Logic Editor."):m.set_cyclic(e)};f.clear_callback=function(){m.check_logic_nodes()?q.error("The active scene is using the Logic Editor."):m.clear_callback()}});w.a=f},function(D,w,f){D=f(0);var M=f(20),U=f(12),n=f(16),z=f(9),e=f(1),m=f(10),C=f(6),v=f(2);f=Object(D.a)("objects",function(f,r){var q=Object(M.a)(f),a=Object(U.a)(f),w=Object(n.a)(f),k=Object(z.a)(f),c=Object(e.a)(f),l=Object(m.a)(f);r.get_meta_tags=function(b){if(b)return a.get_meta_tags(b)};
r.get_custom_prop=function(b){if(b)return a.get_custom_prop(b)};r.copy=function(b,e,f){if(!k.is_mesh(b)&&!k.is_empty(b))return c.error('object "'+b.name+'" is not of type "MESH".'),!1;if(!k.is_dynamic(b))return c.error('object "'+b.name+'" is not dynamic.'),!1;if(!q.ck(b)&&!q.check_shape_keys(b)&&f)return c.error('object "'+b.name+'" has not dynamic geometry for deep copying.'),!1;var g=a.tc(l.get_active(),"MESH",a.DATA_ID_ALL);return-1==g.indexOf(b)&&(g=a.tc(l.get_active(),"EMPTY",a.DATA_ID_ALL),
-1==g.indexOf(b))?(c.error('object "'+b.name+'" does not belong to the active scene.'),!1):a.copy(b,e||"",f)};r.update_boundings=function(b){k.is_mesh(b)?q.ck(b)||q.check_shape_keys(b)?a.update_boundings(b):c.error('object "'+b.name+'" has not dynamic geometry.'):c.error('The type of the object "'+b.name+'" is not "MESH".')};r.get_parent=k.get_parent;r.get_dg_parent=k.get_dg_parent;r.is_mesh=k.is_mesh;r.is_armature=k.is_armature;r.is_speaker=k.is_speaker;r.is_camera=k.is_camera;r.is_lamp=k.is_lamp;
r.is_empty=k.is_empty;r.is_line=k.is_line;r.is_world=k.is_world;r.get_selectable_objects=function(){return a.get_selectable_objects()};r.get_outlining_objects=function(){return a.get_outlining_objects()};r.is_dynamic=k.is_dynamic;r.set_wind_bending_params=function(b,e){if(k.kc(b)){var f=b.ka;if(f.yf){if("number"==typeof e.angle){var g=w.HJ(v.T(e.angle),f.Jj,C.i(f.na));f.Cg=g}"number"==typeof e.main_frequency&&(f.Dg=e.main_frequency);"number"==typeof e.detail_frequency&&(f.ig=e.detail_frequency);"number"==
typeof e.detail_amplitude&&(f.hg=e.detail_amplitude);"number"==typeof e.branch_amplitude&&(f.cg=e.branch_amplitude);a.CT(b)}else c.error('The "'+b.name+"\" object doesn't have wind bending parameters.")}else c.error('The type of the object "'+b.name+'" is not "MESH" or it is not dynamic.')};r.get_wind_bending_params=function(a){a=a.ka;if(!a.yf)return null;var b={},c=v._39(w.PV(a.Cg,a.Jj,C.i(a.na)));b.angle=c;b.main_frequency=a.Dg;b.detail_frequency=a.ig;b.detail_amplitude=a.hg;b.branch_amplitude=
a.cg;return b};r.create_line=function(b){return a.create_line(b)};r.create_empty=function(b){return a.create_empty(b)};r.hide_all_by_data_id=function(b){b=a.get_all_objects("ALL",b);for(var c=0;c<b.length;c++)l.Cm(b[c],!0)};r.show_all_by_data_id=function(b){b=a.get_all_objects("ALL",b);for(var c=0;c<b.length;c++)l.Cm(b[c],!1)}});w.a=f},function(D,w,f){D=f(0);var M=f(47),U=f(1);f=Object(D.a)("particles",function(f,w){var e=Object(M.a)(f),m=Object(U.a)(f);w.set_size=function(f,n,q){e.mB(f,n)?e.set_size(f,
n,q):m.error('set_size(): Object "'+f.name+'" has not a particle system named "'+n+'"')};w.set_normal_factor=function(f,n,q){e.mB(f,n)?e.set_normal_factor(f,n,q):m.error('set_normal_factor(): Object "'+f.name+'" has not a particle system named "'+n+'"')};w.set_factor=function(f,n,q){e.mB(f,n)?(q=Math.min(q,1),q=Math.max(q,0),e.set_factor(f,n,q)):m.error('set_factor(): Object "'+f.name+'" has not a particle system named "'+n+'"')}});w.a=f},function(D,w,f){D=f(0);var M=f(2);f=Object(D.a)("rgb",function(f,
n){var w=new Float32Array(3);n.create=function(){return new Float32Array(3)};n.from_values=function(e,f,n){var m=new Float32Array(3);m[0]=e;m[1]=f;m[2]=n;return m};n.set=function(e,f,n,v){v[0]=e;v[1]=f;v[2]=n;return v};n.css_to_rgb=function(e,f,n,v){v=v||new Float32Array(3);v[0]=e/255;v[1]=f/255;v[2]=n/255;M._57(v,v);return v};n.rgb_to_css=function(e){e=M._21(e,w);return[Math.round(255*e[0]),Math.round(255*e[1]),Math.round(255*e[2])]};n.rgb_to_css_hex=function(e){function f(e){e=Math.round(255*e).toString(16);
return 1==e.length?"0"+e:e}e=M._21(e,w);return"#"+f(e[0])+f(e[1])+f(e[2])}});w.a=f},function(D,w,f){D=f(0);var M=f(1),U=f(10),n=f(17),z=f(9),e=f(44),m=f(48);f=Object(D.a)("textures",function(f,v){var q=Object(M.a)(f),r=Object(U.a)(f),w=Object(n.a)(f),a=Object(z.a)(f),C=Object(e.a)(f);v.play_video=function(a,c){c||(c=0);(c=w.mA(a,c))?r.get_active().b4w_use_nla&&w.QC(c)?q.error("NLA texture can't be controlled directly through API."):w.play_video(c):q.error('Texture with name "'+a+'" not found!')};
v.pause_video=function(a,c){c||(c=0);(c=w.mA(a,c))?r.get_active().b4w_use_nla&&w.QC(c)?q.error("NLA texture can't be controlled directly through API."):w.pause_video(c):q.error('Texture with name "'+a+'" not found!')};v.reset_video=function(a,c){c||(c=0);(c=w.mA(a,c))?r.get_active().b4w_use_nla&&w.QC(c)?q.error("NLA texture can't be controlled directly through API."):w.reset_video(c):q.error('Texture with name "'+a+'" not found!')};v.get_canvas_ctx=function(e,c){if(a.is_mesh(e)){if(e=w.XP(e,c))return e;
q.error("Couldn't find canvas texture with this name: "+c)}else q.error("Object must be type of mesh.");return null};v.update_canvas_ctx=function(e,c){if(!a.is_mesh(e))return q.error("Object must be type of mesh."),!1;var f=w.yv(e,c);if(!f||"CANVAS"!=f.source)return q.error("Couldn't find canvas texture \""+c+'" in object "'+e.name+'".'),!1;w.qV(f);return!0};v.change_image=function(a,c,e,b){q.ef("change_image","replace_image");b=b||function(){};var f=w.yv(a,c);if(f)if(f.ej)q.error("Changing video textures is forbidden."),
b(!1);else{var k=Object(m.b)(e);f.pl==k?b(!0):C.enqueue([{id:e,type:C.AT_IMAGE_ELEMENT,url:e,request_method:"GET"}],function(g){g?(w.change_image(a,f,c,g,e),b(!0)):b(!1)},null,null)}else q.error("Couldn't find texture \""+c+'" in object "'+a.name+'".'),b(!1)};v.replace_image=function(a,c,e,b){b=b||function(){};var f=w.yv(a,c);if(f)if(f.ej)q.error("Changing video textures is forbidden."),b(!1);else if("src"in e){var k=e.src;if(e.complete)w.change_image(a,f,c,e,k),b(!0);else{var l=e.onload,m=e.onerror;
e.onload=function(){l&&l.call(e);w.change_image(a,f,c,e,k);b(!0)};e.onerror=function(){m&&m.call(e);b(!1)}}}else q.error("Incorrect image."),b(!1);else q.error("Couldn't find texture \""+c+'" in object "'+a.name+'".'),b(!1)};v.get_texture_names=function(e){if(a.is_mesh(e))return w.get_texture_names(e);q.error("Object must be type of mesh.");return[]}});w.a=f},function(D,w,f){D=f(0);var M=f(37);f=Object(D.a)("version",function(f,n){n.version=M.e;n.version_str=M.f;n.type=M.d;n.date=M.a;n.date_str=M.b;
n.get_build_version=M.c});w.a=f}]);
